{"version":3,"mappings":"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","names":["getRandomColor","letters","color","i","consoleColoured","options","args","printArgs","BASE64_PREFIX","QUOTED_STR","times","cb","deferred","obj","prom","resolve","reject","debounceCb","fn","wait","timeout","params","debounceT","promise","res","rej","debounce","error","debounceF","frame","throttle","timerId","jsonStringify","object","space","replaceSingleQuote","result","parseJsonString","value","couldBeJson","isJson","str","isBase64","toBase64","_obj","isObject","fromBase64","base64","maybeDecodedUri","encoded","parseType","val","input","isAttribute","type","jsonString","isUndefined","isDefined","getString","getNumber","isNumber","isBoolean","isString","justDigits","num","escapeHtml","html","c","withoutSpecialChars","replaceUmlautChars","withoutMultiWhitespace","handleize","stripHtml","tmp","camelCase","grouped","kebabCase","letter","capitalize","extend","extended","objects","merge","prop","clone","deep","x","setAttribute","el","attributeName","newValue","oldValue","newValueFormatted","changed","getDataset","element","dataset","attr","hasChildNodesTrim","_a","childNodes","getInputValue","results","key","option","scrolling","scrollElement","scrollTimeout","checkScroll","scrollTo","to","offset","angle","behavior","scrollPromise","top","left","scrollY","scrollX","marginTop","marginLeft","getScrollHeight","win","doc","getScrollWidth","scrollToPosition","position","_b","getElementFromEvent","event","getViewportDimensions","w","isInViewport","elem","distance","vp","vertical","horizontal","ready","callback","checkReady","loadScript","src","id","async","defer","script","getUID","prefix","MAX_UID","isCustomElement","isRegistered","isUpgraded","localName","customConstructor","waitForCustomElement","getElementIndex","isNode","tasksByHandle","currentlyRunningATask","messagePrefix","onGlobalMessage","runIfPresent","_clearImmediate","handle","run","task","fallbackCopyTextToClipboard","text","textArea","msg","err","copyTextToClipboard","getOS","ua","platform","uAs","platforms","uAKey","platformKey","getOSType","os","isMobile","isDesktop","isGameConsole","getLocation","url","l","normalizeUrl","location","curHostname","getUrl","onRoute","checkUrl","compareQueryParam","location1","location2","onParentRoute","pathname","hostname","checkLocation","checkPathname","checkHostname","cleanLink","getPort","p","port","protocol","isAbsoluteUrl","isExternalUrl","absoluteUrl","host","isExternal","ModuleElementService","elements","__publicField","_Observer","model","keypath","parseResult","root","tokens","current","index","chr","active","path","unreached","prev","token","next","rootProp","Observer","AdapterService","adapters","adapter","fallbackName","forceFallback","name","BindersService","binders","Binder","_EventDispatcher","namespace","instance","namespaces","eventName","thisContext","curEvent","EventDispatcher","CoreService","_LifecycleService","data","viewId","newStatus","oldStatus","container","containerHtml","firstPageLoad","tagName","connected","bound","component","states","state","allBound","errorMessage","count","LifecycleService","ComponentService","components","FormatterService","formatters","formatter","HttpService","headers","dataType","contentType","accept","method","body","header","cache","separator","response","bodyResult","_DotAdapter","ref","original","map","weakmap","r","k","pointers","idx","callbacks","desc","_callbacks","DotAdapter","dotAdapter","FORMATTER_ARGS","FORMATTER_SPLIT","view","identifier","modelName","formatterIndex","arg","ai","observer","startIndex","promised","declaration","processedArgs","handler","ev","realValue","fi","models","regexp","AnimateStarBinder","animateClassName","start","AddClassBinder","className","AssignPropertyBinder","propertyName","AssignBinder","AttributeBinder","BlockBinder","CheckedBinder","ClassStarBinder","classList","ele","_","NO_RIBA_COMPONENT_ERROR_MESSAGE","ComponentAttributeBinder","attrName","DisabledBinder","NoDragBinder","enable","MustacheTextBinder","node","TEXT","BINDING","DECLARATION_SPLIT","parseTemplate","template","delimiters","length","lastIndex","open","close","substring","lastToken","parseNode","templateDelimiters","blockRecursion","childNode","parseDeclaration","matches","pipes","_View","els","binder","anchorEl","binding","webComponent","bindingFullPrefixes","fullPrefix","wildcards","attributes","attributeBinders","block","bindInfos","len","nodeName","attribute","startingPrefix","bindInfo","COMPONENT","parsedDeclaration","resolveNodeName","View","a","b","aPriority","EachStarBinder","collection","indexProp","scope","matchIndex","nextView","nextIndex","previous","ElementBinder","EnabledBinder","FlexSortChildsBinder","descending","childrens","child","HideBinder","HtmlBinder","IfBinder","MaxlengthBinder","maxLength","OnEventBinder","ParentBinder","ReadonlyBinder","readOnly","RemoveClassBinder","regex","ShowBinder","SrcsetSizeBinder","size","srcset","seperator","sizes","iterSize","StyleBackgroundImageBinder","StyleStarBinder","StyleBinder","TagStarBinder","oldEl","curTagName","newEl","TemplateBinder","TextBinder","ToggleOnEventBinder","passive","propertyKey","UncheckedBinder","UnlessBinder","DEFAULT_EVENTS","ValueBinder","events","ModulesService","module","_Riba","context","viewOptions","Riba","JsxFragment","Raw","_props","htmlVoidElements","createElement","tag","props","children","renderElement","hasChildren","renderChildren","BasicComponent","mode","observedAttributes","observedAttribute","oa2c","requiredAttribute","self","parsedAttributeName","oldDocument","newDocument","fnArgs","TemplatesComponent","Component","tpl","content","templates","containsFormatter","search","sizeFormatter","emptyFormatter","getFormatter","firstFormatter","isLastFormatter","array","lastFormatter","randomFormatter","arrayOrMaxNumber","min","max","rangeFormatter","arr","end","setFormatter","overlapsFormatter","joinFormatter","delimeter","andFormatter","betweenFormatter","nums","egtFormatter","eqFormatter","gtFormatter","neFormatter","ltFormatter","eltFormatter","orFormatter","notFormatter","plusFormatter","minusFormatter","timesFormatter","dividedByFormatter","moduloFormatter","_gcd","gcdFormatter","evenFormatter","unevenFormatter","digitsFormatter","argsFormatter","debugFormatter","toPrint","level","defaultFormatter","defaultValue","isDesktopFormatter","isMobileFormatter","callFormatter","callNameFormatter","mapFormatter","target","osFormatter","preferFormatter","preferValue","ternaryFormatter","condition","yes","no","appendFormatter","capitalizeFormatter","cutFormatter","cutAt","delimitation","downcaseFormatter","endsWithFormatter","checkStart","filledFormatter","handleizeFormatter","matchFormatter","flags","padStartFormatter","padString","padEndFormatter","toIntegerFormatter","ret","toFloatFormatter","toDecimalFormatter","retI","retF","isIntegerFormatter","DEFAULT_DECIMAL_SEPARATOR","DEFAULT_THOUSAND_SEPARATOR","DEFAULT_PRECISION","numberFormatFormatter","precision","decimalSeparator","thousandSeparator","retStr","pluralizeFormatter","singular","plural","prependFormatter","upcaseFormatter","replaceFormatter","replaceValue","replaceFirstFormatter","sliceFormatter","startsWithFormatter","stripFormatter","stripHtmlFormatter","booleanFormatter","isArrayFormatter","isBooleanFormatter","isDefinedFormatter","isNumberFormatter","isObjectFormatter","isStringFormatter","isUndefinedFormatter","jsonFormatter","parseFormatter","toBase64Formatter","toStringFormatter","def","toNumberFormatter","coreModule","services","services.CoreService","line","col","_HistoryManager","history","HistoryManager","ROUTE_ERROR_CLASS","IGNORE_CLASS_LINK","IGNORE_CLASS_PREFETCH","BaseTransition","action","oldContainer","newContainer","newContainerLoading","CustomTransition","FadeTransition","scrollToTop","HideShowTransition","BaseView","Dom","title","titleElement","responseText","parseTitle","containerSelector","prefetchLinks","prefetchLinkElements","wrapper","newPage","_Prefetch","autobindLinks","evt","preventCheck","Pjax","pjax","href","Prefetch","s","m","h","d","y","ms","parse","fmtLong","fmtShort","match","n","msAbs","isPlural","InMemoryStorage$1","InMemoryStorage_1","InMemoryStorage","require$$0","require$$1","createCache","cleanupInterval","customStorage","intervalTickId","isUndef","v","isDef","isFn","isNum","checkHasExpired","exp","set","expiresIn","expiredInMs","storedValue","cachedValue","cachedExpiresIn","del","matchStart","cacheKey","clear","teardown","BaseCache","promisifyRequest","request","createStore","dbName","storeName","dbp","txMode","db","defaultGetStoreFunc","defaultGetStore","get","customStore","store","eachCursor","keys","items","cursor","idbStorage","_Pjax","listenAllLinks","listenPopstate","changeBrowserUrl","scrollToAnchorOffset","RouterService","newTab","linkElement","head","rel","responsePromise","forceCache","fallback","currLocation","scrollToElement","newUrl","oldUrl","newContainerPromise","transition","transitionResult","currentStatus","initialResponse","currentUrl","ViewStaticBinder","RouteBinder","optionsOrUrl","isAnchorHTMLElement","RouteClassStarBinder","isAnchorElement","RoutePreloadBinder","ParentRouteClassStarBinder","isAnkerHTMLElement","goBack","RouteBackOnStarBinder","_RouterLoadScriptComponent","RouterLoadScriptComponent","_RouterViewComponent","pjaxOptions","prevStatus","newPageRawHTML","isInit","RouterViewComponent","routerModule","services.RouterService","themeChoices","DEFAULT_BP_XS","DEFAULT_BP_SM","DEFAULT_BP_MD","DEFAULT_BP_LG","DEFAULT_BP_XL","DEFAULT_BP_XXL","DEFAULT_MODULE_OPTIONS","TOGGLE_BUTTON","TOGGLE_ATTRIBUTE","TOGGLE_CLASS","_Bs5Service","breakpoint","newBreakpoint","breakpoints","dimension","curr","last","found","isBreakpointName","compareBreakpointName","isBreakpoint","compareBreakpoint","Bs5Service","bottom","right","auto","basePlacements","clippingParents","viewport","popper","reference","variationPlacements","acc","placement","placements","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","getNodeName","getWindow","ownerDocument","isElement","OwnElement","isHTMLElement","isShadowRoot","applyStyles","_ref","style","effect","_ref2","initialStyles","styleProperties","property","applyStyles$1","getBasePlacement","round","getUAString","uaData","item","isLayoutViewport","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scaleX","scaleY","visualViewport","addVisualOffsets","width","height","getLayoutRect","contains","parent","rootNode","getComputedStyle","isTableElement","getDocumentElement","getParentNode","getTrueOffsetParent","getContainingBlock","isFirefox","isIE","elementCss","currentNode","css","getOffsetParent","window","offsetParent","getMainAxisFromPlacement","within","mathMax","mathMin","withinMaxClamp","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","hashMap","toPaddingObject","padding","arrow","_state$modifiersData$","arrowElement","popperOffsets","basePlacement","axis","isVertical","arrowRect","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","center","axisProp","_options$element","arrow$2","getVariation","unsetSides","roundOffsetsByDPR","dpr","mapToStyles","_Object$assign2","popperRect","variation","offsets","gpuAcceleration","adaptive","roundOffsets","isFixed","_offsets$x","_offsets$y","_ref3","hasX","hasY","sideX","sideY","heightProp","widthProp","offsetY","offsetX","commonStyles","_ref4","_Object$assign","computeStyles","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","computeStyles$1","_options$scroll","scroll","_options$resize","resize","scrollParents","scrollParent","eventListeners","hash","getOppositePlacement","matched","getOppositeVariationPlacement","getWindowScroll","scrollLeft","scrollTop","getWindowScrollBarX","getViewportRect","strategy","layoutViewport","getDocumentRect","_element$ownerDocumen","winScroll","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","getScrollParent","listScrollParents","list","isBody","updatedList","rectToClientRect","rect","getInnerBoundingClientRect","getClientRectFromMixedType","clippingParent","getClippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","computeOffsets","commonX","commonY","mainAxis","detectOverflow","_options","_options$placement","_options$strategy","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","computeAutoPlacement","flipVariations","_options$allowedAutoP","allowedAutoPlacements","allPlacements","allowedPlacements","overflows","getExpandedFallbackPlacements","oppositePlacement","flip","_options$mainAxis","checkMainAxis","_options$altAxis","checkAltAxis","specifiedFallbackPlacements","_options$flipVariatio","preferredPlacement","isBasePlacement","fallbackPlacements","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","mainVariationSide","altVariationSide","checks","check","numberOfChecks","_loop","_i","fittingPlacement","_ret","flip$1","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","hide","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","hide$1","distanceAndSkiddingToXY","rects","invertDistance","skidding","_options$offset","_data$state$placement","offset$1","popperOffsets$1","getAltAxis","preventOverflow","_options$tether","tether","_options$tetherOffset","tetherOffset","altAxis","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_offset","_len","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","preventOverflow$1","getHTMLElementScroll","getNodeScroll","isElementScaled","getCompositeRect","elementOrVirtualElement","isOffsetParentAnElement","offsetParentIsScaled","documentElement","order","modifiers","visited","modifier","sort","requires","dep","depModifier","orderModifiers","orderedModifiers","phase","pending","mergeByName","merged","existing","DEFAULT_OPTIONS","areValidElements","_key","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","effectCleanupFns","isDestroyed","setOptionsAction","cleanupModifierEffects","runModifierEffects","_state$elements","_state$orderedModifie","_state$orderedModifie2","_ref$options","cleanupFn","noopFn","createPopper","MILLISECONDS_MULTIPLIER","TRANSITION_END","toType","getSelector","selector","hrefAttr","getSelectorFromElement","getElementFromSelector","getTransitionDurationFromElement","transitionDuration","transitionDelay","floatTransitionDuration","floatTransitionDelay","triggerTransitionEnd","getElement","typeCheckConfig","componentName","config","configTypes","expectedTypes","valueType","isVisible","isDisabled","findShadowRoot","noop","reflow","getjQuery","jQuery","DOMContentLoadedCallbacks","onDOMContentLoaded","isRTL","defineJQueryPlugin","plugin","$","JQUERY_NO_CONFLICT","execute","executeAfterTransition","transitionElement","waitForTransition","durationPadding","emulatedDuration","called","getNextActiveElement","activeElement","shouldGetNext","isCycleAllowed","listLength","namespaceRegex","stripNameRegex","stripUidRegex","eventRegistry","uidEvent","customEvents","customEventsRegex","nativeEvents","getUidEvent","uid","getEvent","bootstrapHandler","EventHandler","bootstrapDelegationHandler","domElements","findHandler","delegationSelector","uidEventList","normalizeParams","originalTypeEvent","delegationFn","delegation","originalHandler","typeEvent","getTypeEvent","addHandler","oneOff","wrapFn","handlers","previousFn","removeHandler","removeNamespacedHandlers","storeElementEvent","handlerKey","inNamespace","isNamespace","elementEvent","keyHandlers","isNative","jQueryEvent","bubbles","nativeDispatch","defaultPrevented","elementMap","Data","instanceMap","VERSION","BaseComponent","isAnimated","enableDismissTrigger","clickEvent","NAME$d","DATA_KEY$c","EVENT_KEY$c","EVENT_CLOSE","EVENT_CLOSED","CLASS_NAME_FADE$5","CLASS_NAME_SHOW$8","Alert","NAME$c","DATA_KEY$b","EVENT_KEY$b","DATA_API_KEY$7","CLASS_NAME_ACTIVE$3","SELECTOR_DATA_TOGGLE$5","EVENT_CLICK_DATA_API$6","Button","button","normalizeData","normalizeDataKey","Manipulator","pureKey","NODE_TEXT","SelectorEngine","parents","ancestor","focusables","NAME$b","DATA_KEY$a","EVENT_KEY$a","DATA_API_KEY$6","ARROW_LEFT_KEY","ARROW_RIGHT_KEY","TOUCHEVENT_COMPAT_WAIT","SWIPE_THRESHOLD","Default$a","DefaultType$a","ORDER_NEXT","ORDER_PREV","DIRECTION_LEFT","DIRECTION_RIGHT","KEY_TO_DIRECTION","EVENT_SLIDE","EVENT_SLID","EVENT_KEYDOWN","EVENT_MOUSEENTER","EVENT_MOUSELEAVE","EVENT_TOUCHSTART","EVENT_TOUCHMOVE","EVENT_TOUCHEND","EVENT_POINTERDOWN","EVENT_POINTERUP","EVENT_DRAG_START","EVENT_LOAD_DATA_API$2","EVENT_CLICK_DATA_API$5","CLASS_NAME_CAROUSEL","CLASS_NAME_ACTIVE$2","CLASS_NAME_SLIDE","CLASS_NAME_END","CLASS_NAME_START","CLASS_NAME_NEXT","CLASS_NAME_PREV","CLASS_NAME_POINTER_EVENT","SELECTOR_ACTIVE$1","SELECTOR_ACTIVE_ITEM","SELECTOR_ITEM","SELECTOR_ITEM_IMG","SELECTOR_NEXT_PREV","SELECTOR_INDICATORS","SELECTOR_INDICATOR","SELECTOR_DATA_SLIDE","SELECTOR_DATA_RIDE","POINTER_TYPE_TOUCH","POINTER_TYPE_PEN","Carousel","activeIndex","absDeltax","direction","hasPointerPenTouch","move","itemImg","isNext","relatedTarget","eventDirectionName","targetIndex","fromIndex","activeIndicator","indicators","elementInterval","directionOrOrder","activeElementIndex","nextElement","nextElementIndex","isCycling","directionalClassName","orderClassName","triggerSlidEvent","completeCallBack","_config","slideIndex","carousels","NAME$a","DATA_KEY$9","EVENT_KEY$9","DATA_API_KEY$5","Default$9","DefaultType$9","EVENT_SHOW$5","EVENT_SHOWN$5","EVENT_HIDE$5","EVENT_HIDDEN$5","EVENT_CLICK_DATA_API$4","CLASS_NAME_SHOW$7","CLASS_NAME_COLLAPSE","CLASS_NAME_COLLAPSING","CLASS_NAME_COLLAPSED","CLASS_NAME_DEEPER_CHILDREN","CLASS_NAME_HORIZONTAL","WIDTH","HEIGHT","SELECTOR_ACTIVES","SELECTOR_DATA_TOGGLE$4","Collapse","toggleList","filterElement","foundElem","actives","activesData","tempActiveData","elemActive","complete","scrollSize","triggerArrayLength","trigger","selected","triggerArray","isOpen","NAME$9","DATA_KEY$8","EVENT_KEY$8","DATA_API_KEY$4","ESCAPE_KEY$2","SPACE_KEY","TAB_KEY$1","ARROW_UP_KEY","ARROW_DOWN_KEY","RIGHT_MOUSE_BUTTON","REGEXP_KEYDOWN","EVENT_HIDE$4","EVENT_HIDDEN$4","EVENT_SHOW$4","EVENT_SHOWN$4","EVENT_CLICK_DATA_API$3","EVENT_KEYDOWN_DATA_API","EVENT_KEYUP_DATA_API","CLASS_NAME_SHOW$6","CLASS_NAME_DROPUP","CLASS_NAME_DROPEND","CLASS_NAME_DROPSTART","CLASS_NAME_NAVBAR","SELECTOR_DATA_TOGGLE$3","SELECTOR_MENU","SELECTOR_NAVBAR_NAV","SELECTOR_VISIBLE_ITEMS","PLACEMENT_TOP","PLACEMENT_TOPEND","PLACEMENT_BOTTOM","PLACEMENT_BOTTOMEND","PLACEMENT_RIGHT","PLACEMENT_LEFT","Default$8","DefaultType$8","Dropdown","Popper","referenceElement","popperConfig","isDisplayStatic","Popper.createPopper","parentDropdown","isEnd","popperData","defaultBsPopperConfig","toggles","composedPath","isMenuTarget","isActive","getToggleButton","SELECTOR_FIXED_CONTENT","SELECTOR_STICKY_CONTENT","ScrollBarHelper","documentWidth","calculatedValue","styleProp","scrollbarWidth","manipulationCallBack","actualValue","callBack","Default$7","DefaultType$7","NAME$8","CLASS_NAME_FADE$4","CLASS_NAME_SHOW$5","EVENT_MOUSEDOWN","Backdrop","backdrop","Default$6","DefaultType$6","NAME$7","DATA_KEY$7","EVENT_KEY$7","EVENT_FOCUSIN$1","EVENT_KEYDOWN_TAB","TAB_KEY","TAB_NAV_FORWARD","TAB_NAV_BACKWARD","FocusTrap","trapElement","autofocus","NAME$6","DATA_KEY$6","EVENT_KEY$6","DATA_API_KEY$3","ESCAPE_KEY$1","Default$5","DefaultType$5","EVENT_HIDE$3","EVENT_HIDE_PREVENTED","EVENT_HIDDEN$3","EVENT_SHOW$3","EVENT_SHOWN$3","EVENT_RESIZE","EVENT_CLICK_DISMISS","EVENT_KEYDOWN_DISMISS$1","EVENT_MOUSEUP_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_CLICK_DATA_API$2","CLASS_NAME_OPEN","CLASS_NAME_FADE$3","CLASS_NAME_SHOW$4","CLASS_NAME_STATIC","OPEN_SELECTOR$1","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","SELECTOR_DATA_TOGGLE$2","Modal","htmlElement","modalBody","transitionComplete","scrollHeight","isModalOverflowing","isBodyOverflowing","showEvent","allReadyOpen","NAME$5","DATA_KEY$5","EVENT_KEY$5","DATA_API_KEY$2","EVENT_LOAD_DATA_API$1","ESCAPE_KEY","Default$4","DefaultType$4","CLASS_NAME_SHOW$3","CLASS_NAME_BACKDROP","OPEN_SELECTOR","EVENT_SHOW$2","EVENT_SHOWN$2","EVENT_HIDE$2","EVENT_HIDDEN$2","EVENT_CLICK_DATA_API$1","EVENT_KEYDOWN_DISMISS","SELECTOR_DATA_TOGGLE$1","Offcanvas","completeCallback","uriAttributes","ARIA_ATTRIBUTE_PATTERN","SAFE_URL_PATTERN","DATA_URL_PATTERN","allowedAttribute","allowedAttributeList","regExp","attributeRegex","DefaultAllowlist","sanitizeHtml","unsafeHtml","allowList","sanitizeFn","createdDocument","elementName","attributeList","allowedAttributes","NAME$4","DATA_KEY$4","EVENT_KEY$4","CLASS_PREFIX$1","DISALLOWED_ATTRIBUTES","DefaultType$3","AttachmentMap","Default$3","Event$2","CLASS_NAME_FADE$2","CLASS_NAME_MODAL","CLASS_NAME_SHOW$2","HOVER_STATE_SHOW","HOVER_STATE_OUT","SELECTOR_TOOLTIP_INNER","SELECTOR_MODAL","EVENT_MODAL_HIDE","TRIGGER_HOVER","TRIGGER_FOCUS","TRIGGER_CLICK","TRIGGER_MANUAL","Tooltip","shadowRoot","isInTheDom","tip","tipId","attachment","customClass","prevHoverState","templateElement","eventIn","eventOut","originalTitleType","dataAttributes","dataAttr","basicClassPrefixRegex","tabClass","tClass","NAME$3","DATA_KEY$3","EVENT_KEY$3","CLASS_PREFIX","Default$2","DefaultType$2","Event$1","SELECTOR_TITLE","SELECTOR_CONTENT","Popover","NAME$2","DATA_KEY$2","EVENT_KEY$2","DATA_API_KEY$1","Default$1","DefaultType$1","EVENT_ACTIVATE","EVENT_SCROLL","EVENT_LOAD_DATA_API","CLASS_NAME_DROPDOWN_ITEM","CLASS_NAME_ACTIVE$1","SELECTOR_DATA_SPY","SELECTOR_NAV_LIST_GROUP$1","SELECTOR_NAV_LINKS","SELECTOR_NAV_ITEMS","SELECTOR_LIST_ITEMS","SELECTOR_LINK_ITEMS","SELECTOR_DROPDOWN$1","SELECTOR_DROPDOWN_TOGGLE$1","METHOD_OFFSET","METHOD_POSITION","ScrollSpy","autoMethod","offsetMethod","offsetBase","targetSelector","targetBCR","maxScroll","queries","link","listGroup","navItem","spy","NAME$1","DATA_KEY$1","EVENT_KEY$1","DATA_API_KEY","EVENT_HIDE$1","EVENT_HIDDEN$1","EVENT_SHOW$1","EVENT_SHOWN$1","EVENT_CLICK_DATA_API","CLASS_NAME_DROPDOWN_MENU","CLASS_NAME_ACTIVE","CLASS_NAME_FADE$1","CLASS_NAME_SHOW$1","SELECTOR_DROPDOWN","SELECTOR_NAV_LIST_GROUP","SELECTOR_ACTIVE","SELECTOR_ACTIVE_UL","SELECTOR_DATA_TOGGLE","SELECTOR_DROPDOWN_TOGGLE","SELECTOR_DROPDOWN_ACTIVE_CHILD","Tab","listElement","itemSelector","hideEvent","isTransitioning","dropdownChild","dropdownElement","dropdown","NAME","DATA_KEY","EVENT_KEY","EVENT_MOUSEOVER","EVENT_MOUSEOUT","EVENT_FOCUSIN","EVENT_FOCUSOUT","EVENT_HIDE","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","CLASS_NAME_FADE","CLASS_NAME_HIDE","CLASS_NAME_SHOW","CLASS_NAME_SHOWING","DefaultType","Default","Toast","isInteracting","_Carousel","_Collapse","_Bs5DropdownComponent","ctx","Bs5DropdownComponent","DROPDOWN_DATA_API_KEY","DROPDOWN_ARROW_DOWN_KEY","DROPDOWN_ARROW_UP_KEY","DROPDOWN_ESCAPE_KEY","_Dropdown","dropdownEls","dropdownEl","CollapseEvents","Notification","ModalNotification","message","iconUrl","focus","keyboard","buttons","modalService","contextualClass","channel","$event","$context","_Modal","_Tooltip","_Popover","_ThemeService","selectEl","e","savedTheme","choice","newColorScheme","oldScheme","newScheme","ThemeService","ToastNotification","delay","autoHide","animation","toastService","_Toast","Bs5AbstractBreakpointBinder","myBreakpoints","nextBreakpoint","prevBreakpoint","unhandled","handledBreakpoints","Bs5AttributeBreakpointBinder","CollapseOnUrlBinder","Bs5ComponentAttributeBreakpointBinder","ToggleCollapseOnEventBinder","collapseService","newTargets","DropdownBinder","dropdownService","ExpandOnUrlBinder","dispatcher","checkURL","urlToCheck","PopoverBinder","optionsOrContent","popover","methodNames","listener","methodName","ShowToastOnEventBinder","toastData","ScrollspyClassBinder","offsetTop","offsetBottom","nativeIDTargetSelector","inner","TooltipBinder","innerEl","ScrollToOnEventBinder","ToggleAttributeBinder","newId","oldId","toggleButton","ToggleClassBinder","_Bs5AccordionComponent","others","other","firstContentChild","visible","__vitePreload","Bs5AccordionComponent","_Bs5ButtonComponent","Bs5ButtonComponent","_Bs5CarouselComponent","Bs5CarouselComponent","_Bs5CollapseComponent","Bs5CollapseComponent","needle","pad","colorNames","printNum","decs","Color","g","that","parseString","rgb","alpha","vals","hsl","mults","suff","hex","rgba","hue2rgb","q","t","EventBucket","isMatch","dragTrack","eventBucket","area","dragging","clamp","onMove","info","starting","bounds","relX","relY","onMouse","onTouch","BG_TRANSP","HUES","stopEvent","onKey","bucket","stop","_Bs5ColorPickerComponent","ex","hsla","addEvent","_dragTrack","onDoneProxy","thumbH","thumbSL","thumbA","posX","posY","opaque","transp","bg","format","Bs5ColorPickerComponent","_Bs5ContentsComponent","depth","wrapperElement","headersStart","headersDepth","pushTo","headerElement","Bs5ContentsComponent","_Bs5FormComponent","submitSettings","submitter","invalidElements","invalidElement","endsOn","status","form","validationScope","errorEventName","formEl","Bs5FormComponent","_Bs5IconComponent","pathnames","icon","alt","currentSvg","error2","newSvg","colorArr","newColor","classString","Bs5IconComponent","template$5","_Bs5ModalItemComponent","modal","modalEl","notificationContainer","Bs5ModalItemComponent","_Bs5NavbarComponent","collapseElements","collapseElement","ce","Bs5NavbarComponent","template$4","_Bs5NotificationContainerComponent","notification","Bs5NotificationContainerComponent","_Bs5ScrollspyComponent","Bs5ScrollspyComponent","template$3","labelTemplate","_Bs5ShareComponent","newLine","shareItem","mediaUrl","shareText","shareTitle","urlTemplate","encode","shareURL","dropDownButtonElement","Bs5ShareComponent","getScrollPosition","isScrollable","scrollPosition","_Gameloop","timestamp","progress","numUpdateSteps","delta","interp","Gameloop","Autoscroll","append","Dragscroll","newScrollX","newScrollY","BaseEventsService","originalEvent","extraParameters","ScrollEventsService","currentPosition","MediaReadyState","MediaReadyState2","TouchType","TouchType2","TouchEventsService","settings","threshold","interval","range","startPosition","endPosition","hThreshold","vThreshold","swipeDir","touchesTypes","boundingClientRect","withIndex","positionType","offsetType","touchData","diffPosition","duration","touchesLength","touches","elOffset","touch","now","lastTouch","lastTap","endEvnt","xAmount","yAmount","global","factory","this","EvEmitter","proto","listeners","onceEvents","onceListeners","console","makeArray","ImagesLoaded","onAlways","queryElem","elementNodeTypes","nodeType","childImgs","img","reURL","loadingImage","LoadingImage","background","Background","onProgress","image","isLoaded","parentNode","_Bs5SidebarComponent","scrollEl","translateX","containers","currStyle","conStyle","Bs5SidebarComponent","templateSlides","templateControls","templateIndicators","templateImage","SLIDESHOW_INNER_SELECTOR","SLIDES_SELECTOR","_Bs5SlideshowComponent","centeredIndex","prevIndex","nearestIndex","positions","_c","dragscrollOptions","autoscrollOptions","intervalsTimeMs","slideElement","goal","nearZero","minIndex","excludeIndex","maxScrollTo","_d","mainBoundingClient","Bs5SlideshowComponent","SLIDER_INNER_SELECTOR","_Bs5SliderComponent","fromRight","currentActive","hasChange","slideEls","slideEl","updateIndex","slides","containerRect","slideRect","activeSlides","firstIndex","isRetry","fallbackOffset","slideWidth","slideHeight","Bs5SliderComponent","_VideoComponent","muted","volume","loop","controls","currentTime","autoplay","poster","preload","disablePictureInPicture","video","videoEl","videoWrapperEl","sourceElement","mediaQueryList","bufferedAmount","VideoComponent","_Bs5SlideVideoComponent","Bs5SlideVideoComponent","templateHorizontal","templateVertical","_Bs5TabsComponent","highest","tabPane","tab","firstTabContentChild","newSize","curTab","tabScrollPosition","scrollLeftTo","Bs5TabsComponent","template$2","_Bs5TaggedImageComponent","po","tagEl","shape","borderRadius","fullSize","smallSize","tagData","scopeTagOptions","attrs","clientTop","clientLeft","naturalWidth","naturalHeight","clientX","clientY","wRatio","hRatio","actualWidth","actualHeight","boundIndexAttr","boundIndex","foundTag","fit","Bs5TaggedImageComponent","template$1","_Bs5ThemeButtonComponent","theme","Bs5ThemeButtonComponent","_Bs5ToastItemComponent","toast","toastEl","toastContainer","Bs5ToastItemComponent","_Bs5ToggleButtonComponent","Bs5ToggleButtonComponent","bs5Module","constants","partialOptions","constants.DEFAULT_MODULE_OPTIONS","services.Bs5Service","isArray","getTag","INFINITY","baseToString","toString","isObjectLike","isBlank","INCORRECT_INDEX_TYPE","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","PATTERN_LENGTH_TOO_LARGE","MISSING_KEY_PROPERTY","INVALID_KEY_WEIGHT_VALUE","hasOwn","KeyStore","totalWeight","createKey","keyId","weight","getFn","createKeyPath","createKeyId","deepGet","MatchOptions","BasicOptions","FuzzyOptions","AdvancedOptions","Config","SPACE","norm","mantissa","numTokens","FuseIndex","fieldNormWeight","docs","records","docIndex","record","keyIndex","subRecords","stack","nestedArrIndex","subRecord","createIndex","myIndex","parseIndex","computeScore$1","pattern","errors","currentLocation","expectedLocation","ignoreLocation","accuracy","proximity","convertMaskToIndices","matchmask","minMatchCharLength","indices","MAX_BITS","patternAlphabet","findAllMatches","includeMatches","patternLen","textLen","currentThreshold","bestLocation","computeMatches","matchMask","score","lastBitArr","finalScore","binMax","mask","binMin","binMid","finish","bitArr","charMatch","createPatternAlphabet","char","BitapSearch","isCaseSensitive","addChunk","remainder","allIndices","totalScore","hasMatches","alphabet","BaseMatch","getMatch","ExactMatch","InverseExactMatch","PrefixExactMatch","InversePrefixExactMatch","SuffixExactMatch","InverseSuffixExactMatch","FuzzyMatch","IncludeMatch","searchers","searchersLen","SPACE_RE","OR_TOKEN","parseQuery","query","queryItem","searcher","MultiMatchSet","ExtendedSearch","numMatches","qLen","j","pLen","registeredSearchers","register","createSearcher","searcherClass","LogicalOperator","KeyType","isExpression","isPath","isLeaf","convertToExplicit","isQueryPath","computeScore","ignoreFieldNorm","transformMatches","transformScore","includeScore","transformers","transformer","Fuse","predicate","limit","shouldSort","sortFn","expression","evaluate","resultMap","expResults","_FuseSearchComponent","testItem","childKeys","childKey","FuseSearchComponent","fuseModule","TypedocService","_MemberSignaturesComponent","signatureEl","descriptionEl","MemberSignaturesComponent","_SearchComponent","NavbarComponent","field","newActive","oldActive","anchor","searchText","dir","fallbackByDir","SearchComponent","_NavbarComponent","sidebar","_NavigationComponent","templateEl","NavigationComponent","childTemplateList","childTemplateDropdown","_NavigationPrimaryComponent","mod","_e","_f","_g","_h","_j","selectedModule","NavigationPrimaryComponent","typedocModule","services.TypedocService","_FooterComponent","FooterComponent","_HeaderComponent","HeaderComponent","gjsifyTypedocModule","registerComponent","constructor","Application","pageLink","iter","reflAnchor","reflContainer","warning","lunr","builder","docRef","fieldName","stringValue","fieldRef","intersection","posting","documentCount","documentsWithTerm","metadata","sliceEnd","sliceStart","sliceLength","tokenMetadata","label","serialised","pipeline","fnName","fns","existingFn","newFn","pos","stackLength","memo","pivotPoint","pivotIndex","insertIdx","sumOfSquares","elementsLength","otherVector","dotProduct","aLen","bLen","aVal","bVal","output","step2list","step3list","C","V","mgr0","meq1","mgr1","s_v","re_mgr0","re_mgr1","re_meq1","re_s_v","re_1a","re2_1a","re_1b","re2_1b","re_1b_2","re2_1b_2","re3_1b_2","re4_1b_2","re_1c","re_2","re_3","re_4","re2_4","re_5","re_5_1","re3_5","porterStemmer","stem","suffix","firstch","re","re2","re3","re4","fp","stopWords","words","stopWord","clause","editDistance","noEditNode","insertionNode","substitutionNode","charA","charB","transposeNode","final","edges","edge","labels","qEdges","nEdges","nLen","qEdge","nEdge","qNode","word","commonPrefix","nextNode","downTo","queryString","parser","matchingFields","queryVectors","termFieldCache","requiredMatches","prohibitedMatches","terms","clauseMatches","term","termTokenSet","expandedTerms","expandedTerm","termIndex","fieldPosting","matchingDocumentRefs","termField","matchingDocumentsSet","matchingDocumentRef","matchingFieldRef","fieldMatch","allRequiredMatches","allProhibitedMatches","matchingFieldRefs","fieldVector","docMatch","invertedIndex","fieldVectors","serializedIndex","serializedVectors","serializedInvertedIndex","tokenSetBuilder","tuple","number","fields","extractor","fieldTerms","metadataKey","fieldRefs","numberOfFields","accumulator","documentsWithField","fieldRefsLength","termIdfCache","fieldLength","termFrequencies","termsLength","fieldBoost","docBoost","tf","idf","scoreWithPrecision","clonedMetadata","metadataKeys","otherMatchData","allFields","subSlices","charCode","lexer","lexeme","completedClause","nextLexeme","possibleFields","f","boost","initSearch","searchEl","searchScript","resultClicked","bindEvents","updateResults","preventPress","gotoCurrentResult","setCurrentResult","checkIndex","Index","row","boldMatches","lowerText","lowerSearch","parts","SPECIAL_HTML","pointerDown","pointerMove","pointerUp","pointerDownPosition","isPointerDown","hasPointerMoved","Toggle","_storage","storage","Filter","fromStorage","allChildrenHidden","Accordion","stored","initTheme","choices","setTheme","themeChoice","app","bootstrap","riba"],"sources":["../../../vendor/riba/packages/utils/src/color.ts","../../../vendor/riba/packages/utils/src/constants.ts","../../../vendor/riba/packages/utils/src/control.ts","../../../vendor/riba/packages/utils/src/type.ts","../../../vendor/riba/packages/utils/src/dom.ts","../../../vendor/riba/packages/utils/src/env.ts","../../../vendor/riba/packages/utils/src/immediate.ts","../../../vendor/riba/packages/utils/src/tools.ts","../../../vendor/riba/packages/utils/src/url.ts","../../../vendor/riba/packages/core/src/services/module-element.service.ts","../../../vendor/riba/packages/core/src/observer.ts","../../../vendor/riba/packages/core/src/services/adapter.service.ts","../../../vendor/riba/packages/core/src/services/binder.service.ts","../../../vendor/riba/packages/events/dist/esm/services/event-dispatcher.service.js","../../../vendor/riba/packages/core/src/services/core.service.ts","../../../vendor/riba/packages/core/src/services/lifecycle.service.ts","../../../vendor/riba/packages/core/src/services/component.service.ts","../../../vendor/riba/packages/core/src/services/formatter.service.ts","../../../vendor/riba/packages/core/src/services/http.service.ts","../../../vendor/riba/packages/core/src/adapters/dot.adapter.ts","../../../vendor/riba/packages/core/src/constants/formatter.ts","../../../vendor/riba/packages/core/src/binder.ts","../../../vendor/riba/packages/core/src/binders/animate-classname.binder.ts","../../../vendor/riba/packages/core/src/binders/add-class.binder.ts","../../../vendor/riba/packages/core/src/binders/assign-property.binder.ts","../../../vendor/riba/packages/core/src/binders/assign.binder.ts","../../../vendor/riba/packages/core/src/binders/attribute.binder.ts","../../../vendor/riba/packages/core/src/binders/block.binder.ts","../../../vendor/riba/packages/core/src/binders/checked.binder.ts","../../../vendor/riba/packages/core/src/binders/class-name.binder.ts","../../../vendor/riba/packages/core/src/binders/co-attribute.binder.ts","../../../vendor/riba/packages/core/src/binders/disabled.binder.ts","../../../vendor/riba/packages/core/src/binders/draggable.binder.ts","../../../vendor/riba/packages/core/src/binders/mustache-text.binder.ts","../../../vendor/riba/packages/core/src/constants/parser.ts","../../../vendor/riba/packages/core/src/parse-template.ts","../../../vendor/riba/packages/core/src/parse-node.ts","../../../vendor/riba/packages/core/src/parse-declaration.ts","../../../vendor/riba/packages/core/src/view.ts","../../../vendor/riba/packages/core/src/binders/each-item.binder.ts","../../../vendor/riba/packages/core/src/binders/element.binder.ts","../../../vendor/riba/packages/core/src/binders/enabled.binder.ts","../../../vendor/riba/packages/core/src/binders/flex-sort-childs.binder.ts","../../../vendor/riba/packages/core/src/binders/hide.binder.ts","../../../vendor/riba/packages/core/src/binders/html.binder.ts","../../../vendor/riba/packages/core/src/binders/if.binder.ts","../../../vendor/riba/packages/core/src/binders/maxlength.binder.ts","../../../vendor/riba/packages/core/src/binders/on-event.binder.ts","../../../vendor/riba/packages/core/src/binders/parent.binder.ts","../../../vendor/riba/packages/core/src/binders/readonly.binder.ts","../../../vendor/riba/packages/core/src/binders/remove-class.binder.ts","../../../vendor/riba/packages/core/src/binders/show.binder.ts","../../../vendor/riba/packages/core/src/binders/srcset-size.binder.ts","../../../vendor/riba/packages/core/src/binders/style-background-image.binder.ts","../../../vendor/riba/packages/core/src/binders/style-css-property.binder.ts","../../../vendor/riba/packages/core/src/binders/style-property.binder.ts","../../../vendor/riba/packages/core/src/binders/tag-name.binder.ts","../../../vendor/riba/packages/core/src/binders/template.binder.ts","../../../vendor/riba/packages/core/src/binders/text.binder.ts","../../../vendor/riba/packages/core/src/binders/toggle-on-event.binder.ts","../../../vendor/riba/packages/core/src/binders/unchecked.binder.ts","../../../vendor/riba/packages/core/src/binders/unless.binder.ts","../../../vendor/riba/packages/core/src/binders/value.binder.ts","../../../vendor/riba/packages/core/src/services/module.service.ts","../../../vendor/riba/packages/core/src/riba.ts","../../../vendor/riba/packages/jsx/src/jsx-fragment.ts","../../../vendor/riba/packages/jsx/src/jsx-raw.ts","../../../vendor/riba/packages/jsx/src/jsx.ts","../../../vendor/riba/packages/core/src/component/basic-component.ts","../../../vendor/riba/packages/core/src/component/component.ts","../../../vendor/riba/packages/core/src/components/templates/templates.component.ts","../../../vendor/riba/packages/core/src/formatters/array/contains.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/size.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/empty.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/get.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/first.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/is-last.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/last.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/random.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/range.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/set.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/overlaps.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/join.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/and.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/between.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/egt.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/eq.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/gt.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/ne.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/lt.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/elt.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/or.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/not.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/plus.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/minus.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/times.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/divided-by.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/modulo.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/gcd.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/even.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/uneven.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/digits.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/args.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/debug.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/default.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/is-desktop.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/is-mobile.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/call.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/call-name.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/map.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/os.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/prefer.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/ternary.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/append.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/capitalize.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/cut.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/downcase.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/ends-with.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/filled.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/handleize.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/match.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/pad-start.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/pad-end.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-integer.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-float.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-decimal.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-integer.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/number-format.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/pluralize.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/prepend.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/upcase.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/replace.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/replace-first.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/slice.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/starts-with.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/strip.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/strip-html.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/boolean.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-array.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-boolean.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-defined.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-number.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-object.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-string.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-undefined.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/json.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/parse.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-base64.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-string.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-number.formatter.ts","../../../vendor/riba/packages/core/src/core.module.ts","../../../vendor/riba/packages/history/src/services/history-manager.service.ts","../../../vendor/riba/packages/router/src/constants.ts","../../../vendor/riba/packages/router/src/services/Transition/BaseTransition.ts","../../../vendor/riba/packages/router/src/services/Transition/CustomTransition.ts","../../../vendor/riba/packages/router/src/services/Transition/FadeTransition.ts","../../../vendor/riba/packages/router/src/services/Transition/HideShowTransition.ts","../../../vendor/riba/packages/router/src/services/View.ts","../../../vendor/riba/packages/router/src/services/Pjax/Dom.ts","../../../vendor/riba/packages/router/src/services/Pjax/Prefetch.ts","../../../node_modules/ms/index.js","../../../node_modules/keshi/src/InMemoryStorage.js","../../../node_modules/keshi/src/index.js","../../../vendor/riba/packages/cache/src/services/base-cache.service.ts","../../../node_modules/idb-keyval/dist/index.js","../../../vendor/riba/packages/cache/src/services/idb-cache.service.ts","../../../vendor/riba/packages/router/src/services/Pjax/index.ts","../../../vendor/riba/packages/router/src/services/router.service.ts","../../../vendor/riba/packages/router/src/binders/view-static.binder.ts","../../../vendor/riba/packages/router/src/binders/route.binder.ts","../../../vendor/riba/packages/router/src/binders/route-class-star.binder.ts","../../../vendor/riba/packages/router/src/binders/route-preload.binder.ts","../../../vendor/riba/packages/router/src/binders/parent-route-class-star.binder.ts","../../../vendor/riba/packages/router/src/binders/route-back-on-star.binder.ts","../../../vendor/riba/packages/router/src/components/load-script/load-script.component.ts","../../../vendor/riba/packages/router/src/components/view/view.component.ts","../../../vendor/riba/packages/router/src/router.module.ts","../../../vendor/riba/packages/bs5/src/constants/theme-choices.ts","../../../vendor/riba/packages/bs5/src/constants/index.ts","../../../vendor/riba/packages/bs5/src/services/bs5.service.ts","../../../node_modules/@popperjs/core/lib/enums.js","../../../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","../../../node_modules/@popperjs/core/lib/dom-utils/getWindow.js","../../../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","../../../node_modules/@popperjs/core/lib/modifiers/applyStyles.js","../../../node_modules/@popperjs/core/lib/utils/getBasePlacement.js","../../../node_modules/@popperjs/core/lib/utils/math.js","../../../node_modules/@popperjs/core/lib/utils/userAgent.js","../../../node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js","../../../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","../../../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","../../../node_modules/@popperjs/core/lib/dom-utils/contains.js","../../../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","../../../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","../../../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","../../../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","../../../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","../../../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","../../../node_modules/@popperjs/core/lib/utils/within.js","../../../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","../../../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","../../../node_modules/@popperjs/core/lib/utils/expandToHashMap.js","../../../node_modules/@popperjs/core/lib/modifiers/arrow.js","../../../node_modules/@popperjs/core/lib/utils/getVariation.js","../../../node_modules/@popperjs/core/lib/modifiers/computeStyles.js","../../../node_modules/@popperjs/core/lib/modifiers/eventListeners.js","../../../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","../../../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","../../../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","../../../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","../../../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","../../../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","../../../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","../../../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","../../../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","../../../node_modules/@popperjs/core/lib/utils/rectToClientRect.js","../../../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","../../../node_modules/@popperjs/core/lib/utils/computeOffsets.js","../../../node_modules/@popperjs/core/lib/utils/detectOverflow.js","../../../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","../../../node_modules/@popperjs/core/lib/modifiers/flip.js","../../../node_modules/@popperjs/core/lib/modifiers/hide.js","../../../node_modules/@popperjs/core/lib/modifiers/offset.js","../../../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","../../../node_modules/@popperjs/core/lib/utils/getAltAxis.js","../../../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","../../../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","../../../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","../../../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","../../../node_modules/@popperjs/core/lib/utils/orderModifiers.js","../../../node_modules/@popperjs/core/lib/utils/debounce.js","../../../node_modules/@popperjs/core/lib/utils/mergeByName.js","../../../node_modules/@popperjs/core/lib/createPopper.js","../../../node_modules/@popperjs/core/lib/popper-lite.js","../../../node_modules/@popperjs/core/lib/popper.js","../../../node_modules/bootstrap/dist/js/bootstrap.esm.js","../../../vendor/riba/packages/bs5/src/services/carousel.ts","../../../vendor/riba/packages/bs5/src/services/collapse.ts","../../../vendor/riba/packages/bs5/src/components/bs5-dropdown/bs5-dropdown.component.ts","../../../vendor/riba/packages/bs5/src/services/dropdown.ts","../../../vendor/riba/packages/bs5/src/types/collapse-events.ts","../../../vendor/riba/packages/bs5/src/types/notification.ts","../../../vendor/riba/packages/bs5/src/services/modal-notification.ts","../../../vendor/riba/packages/bs5/src/services/modal.ts","../../../vendor/riba/packages/bs5/src/services/tooltip.ts","../../../vendor/riba/packages/bs5/src/services/popover.ts","../../../vendor/riba/packages/bs5/src/services/theme.ts","../../../vendor/riba/packages/bs5/src/services/toast-notification.ts","../../../vendor/riba/packages/bs5/src/services/toast.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-abstract-breakpoint.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-attribute-breakpoint.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-collapse-on-url.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-co-attribute-breakpoint.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-toggle-collapse-on-event.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-dropdown.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-expand-on-url.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-popover.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-show-toast-on.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-scrollspy-class.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-tooltip.binder.ts","../../../vendor/riba/packages/bs5/src/binders/scroll-to-on-event.binder.ts","../../../vendor/riba/packages/bs5/src/binders/toggle-attribute.binder.ts","../../../vendor/riba/packages/bs5/src/binders/toggle-class.binder.ts","../../../vendor/riba/packages/bs5/src/components/bs5-accordion/bs5-accordion.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-button/bs5-button.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-carousel/bs5-carousel.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-collapse/bs5-collapse.component.tsx","../../../node_modules/@sphinxxxx/color-conversion/src/color.js","../../../vendor/riba/packages/bs5/src/components/bs5-colorpicker/bs5-colorpicker.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-contents/bs5-contents.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-form/bs5-form.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-icon/bs5-icon.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-modal-item/bs5-modal-item.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-modal-item/bs5-modal-item.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-navbar/bs5-navbar.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-notification-container/bs5-notification-container.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-notification-container/bs5-notification-container.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-scrollspy/bs5-scrollspy.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-share/bs5-share.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-share/bs5-share.label.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-share/bs5-share.component.ts","../../../vendor/riba/packages/extras/src/helper/scroll.ts","../../../vendor/riba/packages/extras/src/services/gameloop.service.ts","../../../vendor/riba/packages/extras/src/services/autoscroll.service.ts","../../../vendor/riba/packages/extras/src/services/dragscroll.service.ts","../../../vendor/riba/packages/extras/src/services/touch-events/base-events.service.ts","../../../vendor/riba/packages/extras/src/services/touch-events/scroll-events.service.ts","../../../vendor/riba/packages/extras/src/types/media-ready-state.ts","../../../vendor/riba/packages/extras/src/types/touch-type.ts","../../../vendor/riba/packages/extras/src/services/touch-events/touch-events.service.ts","../../../node_modules/ev-emitter/ev-emitter.js","../../../node_modules/imagesloaded/imagesloaded.js","../../../vendor/riba/packages/bs5/src/components/bs5-sidebar/bs5-sidebar.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow-slides.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow-controls.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow-indicators.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow-image.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-slider/bs5-slider.component.ts","../../../vendor/riba/packages/extras/src/components/video/video.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-slide-video/bs5-slide-video.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-tabs/bs5-tabs-horizontal.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-tabs/bs5-tabs-vertical.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-tabs/bs5-tabs.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-tagged-image/bs5-tagged-image.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-tagged-image/bs5-tagged-image.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-theme-button/bs5-theme-button.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-theme-button/bs5-theme-button.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-toast-item/bs5-toast-item.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-toast-item/bs5-toast-item.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-toggle-button/bs5-toggle-button.component.ts","../../../vendor/riba/packages/bs5/src/bs5.module.ts","../../../node_modules/fuse.js/dist/fuse.esm.js","../../../vendor/riba/packages/fuse/src/components/search/search.component.tsx","../../../vendor/riba/packages/fuse/src/module.ts","../../../vendor/riba/packages/typedoc/src/services/typedoc.service.ts","../../../vendor/riba/packages/typedoc/src/components/member-signatures/member-signatures.component.ts","../../../vendor/riba/packages/typedoc/src/components/search/search.component.tsx","../../../vendor/riba/packages/typedoc/src/components/navbar/navbar.component.ts","../../../vendor/riba/packages/typedoc/src/components/navigation-secondary/navigation-secondary.component.tsx","../../../vendor/riba/packages/typedoc/src/components/navigation-primary/child-template-list.html?raw","../../../vendor/riba/packages/typedoc/src/components/navigation-primary/child-template-dropdown.html?raw","../../../vendor/riba/packages/typedoc/src/components/navigation-primary/navigation-primary.component.tsx","../../../vendor/riba/packages/typedoc/src/module.ts","../../typedoc-theme-client/scripts/components/footer/footer.component.ts","../../typedoc-theme-client/scripts/components/header/header.component.ts","../../typedoc-theme-client/scripts/module.ts","../../typedoc-theme-client/scripts/original/typedoc/Application.ts","../../typedoc-theme-client/scripts/original/typedoc/utils/debounce.ts","../../../node_modules/lunr/lunr.js","../../typedoc-theme-client/scripts/original/typedoc/components/Search.ts","../../typedoc-theme-client/scripts/original/typedoc/Component.ts","../../typedoc-theme-client/scripts/original/typedoc/utils/pointer.ts","../../typedoc-theme-client/scripts/original/typedoc/components/Toggle.ts","../../typedoc-theme-client/scripts/original/typedoc/utils/storage.ts","../../typedoc-theme-client/scripts/original/typedoc/components/Filter.ts","../../typedoc-theme-client/scripts/original/typedoc/components/Accordion.ts","../../typedoc-theme-client/scripts/original/typedoc/Theme.ts","../../typedoc-theme-client/scripts/original/bootstrap.ts","../../typedoc-theme-client/scripts/main.ts"],"sourcesContent":["/**\n * Generates a random color\n * @see https://stackoverflow.com/a/1484514/1465919\n */\nexport const getRandomColor = () => {\n  const letters = \"0123456789ABCDEF\";\n  let color = \"#\";\n  for (let i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n  return color;\n};\n\nexport const consoleColoured = (\n  options: {\n    namespace?: string;\n    color?: string;\n    mode: \"debug\" | \"info\" | \"log\" | \"error\";\n  },\n  ...args: unknown[]\n) => {\n  const printArgs: unknown[] = [];\n  if (options.color) {\n    if (options.namespace) {\n      printArgs.push(\n        `%c[${options.namespace}] ${options.mode.toUpperCase()}: `\n      );\n    } else {\n      printArgs.push(`%c${options.mode.toUpperCase()}: `);\n    }\n    printArgs.push(`color: ${options.color}`);\n  } else {\n    if (options.namespace) {\n      printArgs.push(`[${options.namespace}] ${options.mode.toUpperCase()}: `);\n    } else {\n      printArgs.push(`${options.mode.toUpperCase()}: `);\n    }\n  }\n\n  printArgs.push(...args);\n\n  console[options.mode](...printArgs);\n};\n","export const BASE64_PREFIX = \"base64:\";\n\nexport const PRIMITIVE = 0;\nexport const KEYPATH = 1;\n\nexport const QUOTED_STR = /^'.*'$|^\".*\"$/; // regex to test if string is wrapped in \" or '\n","import { Deferred, TimeoutPromise } from \"./types/index.js\";\n\nexport const noop = () => {\n  /** do nothing */\n};\n\nexport const times = (n: number, cb: () => void) => {\n  for (let i = 0; i < n; i++) {\n    cb();\n  }\n};\n\nexport const sleep = (time: number) => {\n  return new Promise((resolve) => setTimeout(resolve, time));\n};\n\nexport const waitForProp = async <T = any>(\n  propName: string,\n  obj: any = window,\n  delay = 1000\n) => {\n  while (!obj[propName]) {\n    await sleep(delay);\n  }\n  return obj[propName] as T;\n};\n\n/**\n * Return a new \"Deferred\" object\n * https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred\n *\n * @return\n */\nexport const deferred = <T = any>() => {\n  const obj: Partial<Deferred<T>> = {};\n  const prom = new Promise<T>((resolve, reject) => {\n    obj.resolve = resolve;\n    obj.reject = reject;\n  });\n  obj.promise = prom;\n  return obj as Deferred<T>;\n};\n\n/**\n * debounce (Timeout + Callback edition)\n * The debounce function receives our function as a parameter\n * It is recommended to use this method for scroll events, but the event should still be passive.\n * In the debouncing technique, no matter how many times the user fires the event,\n * the attached function will be executed only after the specified time once the user stops firing the event.\n * This method uses internally the setTimeout method\n * @see https://css-tricks.com/styling-based-on-scroll-position/\n * @see https://www.telerik.com/blogs/debouncing-and-throttling-in-javascript\n */\nexport const debounceCb = <T = any>(fn: (...args: any[]) => T, wait = 100) => {\n  let timeout: ReturnType<typeof setTimeout>;\n  return (...params: any[]) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => fn(...params), wait);\n  };\n};\n\n/**\n * debounce (Timeout + Promise edition)\n * The debounce function receives our function as a parameter\n * It is recommended to use this method for scroll events, but the event should still be passive.\n * In the debouncing technique, no matter how many times the user fires the event,\n * the attached function will be executed only after the specified time once the user stops firing the event.\n * This method uses internally the setTimeout method\n */\nexport const debounceT = <T = any>(fn: (...args: any[]) => any, wait = 100) => {\n  let resolve: (val: any) => any;\n  let reject: (error: any) => void;\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  let debounce: undefined | ((...params: any[]) => void) = undefined;\n\n  return (...params: any[]) => {\n    if (!debounce)\n      debounce = debounceCb(() => {\n        try {\n          resolve(fn(...params));\n          // Reset\n          debounce = undefined;\n        } catch (error) {\n          reject(error);\n        }\n      }, wait);\n    debounce(...params);\n\n    return promise;\n  };\n};\n\n/**\n * debounce (RequestAnimationFrame + Promise edition)\n * The debounce function receives our function as a parameter\n * It is recommended to use this method for scroll events, but the event should still be passive.\n * In the debouncing technique, no matter how many times the user fires the event,\n * the attached function will be executed only after the specified time once the user stops firing the event.\n * This method uses internally the requestAnimationFrame method\n * @see https://css-tricks.com/styling-based-on-scroll-position/\n * @see https://www.telerik.com/blogs/debouncing-and-throttling-in-javascript\n */\nexport const debounceF = (fn: (...params: any) => any) => {\n  // This holds the requestAnimationFrame reference, so we can cancel it if we wish\n  let frame: number | null = null;\n  let resolve: (val: any) => any;\n  let reject: (error: Error) => void;\n  let promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n\n  // The debounce function returns a new function that can receive a variable number of arguments\n  return (...params: any) => {\n    // If the frame variable has been defined, clear it now, and queue for next frame\n    if (frame) {\n      cancelAnimationFrame(frame);\n    }\n\n    // Queue our function call for the next frame\n    frame = window.requestAnimationFrame(() => {\n      // Call our function and pass any params we received\n      try {\n        resolve(fn(...params));\n      } catch (error) {\n        reject(error as Error);\n      }\n      // reset frame and initialize new promise for next call\n      frame = null;\n      promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n      });\n    });\n\n    return promise;\n  };\n};\n\n/**\n * debounce (RequestAnimationFrame + Promise edition)\n * The debounce function receives our function as a parameter\n * It is recommended to use this method for scroll events, but the event should still be passive.\n * In the debouncing technique, no matter how many times the user fires the event,\n * the attached function will be executed only after the specified time once the user stops firing the event.\n * This method uses requestAnimationFrame method if no delay is passed, otherwise a timeout\n */\nexport const debounce = (fn: (...params: any) => any, wait?: number) => {\n  if (typeof wait === \"number\") {\n    return debounceT(fn, wait);\n  } else {\n    return debounceF(fn);\n  }\n};\n\n/**\n * The throttle function receives our function as a parameter\n * It is recommended to use this method for resize events\n * Throttling is a technique in which, no matter how many times the user fires the event,\n * the attached function will be executed only once in a given time interval.\n * @see https://www.telerik.com/blogs/debouncing-and-throttling-in-javascript\n * @see https://gist.github.com/peduarte/969217eac456538789e8fac8f45143b4\n */\nexport const throttle = (fn: (...params: any[]) => any, wait = 100) => {\n  let timerId: number | null = null;\n  let resolve: (val: any) => any;\n  let reject: (error: Error) => void;\n  let promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n\n  return (...params: any[]) => {\n    if (timerId === null) {\n      timerId = window.setTimeout(() => {\n        // reset timerId and initialize new promise for next call\n        timerId = null;\n        promise = new Promise((res, rej) => {\n          resolve = res;\n          reject = rej;\n        });\n      }, wait);\n      try {\n        resolve(fn(...params));\n      } catch (error) {\n        reject(error as Error);\n      }\n    }\n    return promise;\n  };\n};\n\n/**\n * Cancel promise on timeout.\n */\nexport const pTimeout = <T>(value: Promise<T>, ms: number, error?: Error) => {\n  const def = deferred<T>();\n\n  const p: TimeoutPromise<T> = {\n    _timeout: setTimeout(() => {\n      def.reject(error || new Error(`Timeout after ${ms}ms`));\n    }, ms),\n    promise: def.promise,\n    cancel: () => {\n      def.resolve(value);\n      if (p._timeout) {\n        clearTimeout(p._timeout);\n      }\n    },\n  };\n\n  value\n    .then((value: T) => {\n      p.cancel();\n      def.resolve(value);\n    })\n    .catch((error) => {\n      p.cancel();\n      def.reject(error);\n    });\n\n  return p.promise;\n};\n","import { BASE64_PREFIX, KEYPATH, PRIMITIVE, QUOTED_STR } from \"./constants.js\";\n\n/**\n * Fixed version of typeof operator\n * @param obj\n * @see https://goo.gl/pxwQGp\n */\nexport const toType = (obj: any) => {\n  const matches = {}.toString.call(obj).match(/\\s([a-z]+)/i);\n  return matches ? matches[1].toLowerCase() : null;\n};\n\n/**\n * Formats an object to a json string with the special feature that single quotes are replaced.\n * This way there are no conflicts when this json string is used as attribute value afterwards.\n * @note This function is used by the JsonFormatter\n * @see parseJsonString\n * @param object\n * @param space\n * @param replaceSingleQuote\n * @returns\n */\nexport const jsonStringify = (\n  object: any,\n  space = 2,\n  replaceSingleQuote = true\n) => {\n  const result = JSON.stringify(object, null, space);\n  if (replaceSingleQuote && result) {\n    return result.replace(/'/g, `&#39;`);\n  }\n  return result;\n};\n\n/**\n * Parses a json string with the special feature that json strings\n * can also have single quotations for defining the properties and values\n * @see jsonStringify\n */\nexport const parseJsonString = (value?: string | null) => {\n  let object = null;\n\n  if (!value) {\n    return object;\n  }\n\n  if (!couldBeJson(value)) {\n    return object;\n  }\n  if (isJson(value)) {\n    object = JSON.parse(value) || null;\n  } else {\n    try {\n      // Transform an invalid json string with single quotation to a valid json string with double quotation\n      object = JSON.parse(value.replace(/'/g, '\"')) || null;\n    } catch (error) {\n      console.warn(`Can't parse json string of \"${value}\" `, error);\n    }\n  }\n  return object;\n};\n\nexport const couldBeJson = (str?: string | null) => {\n  if (!str || typeof str !== \"string\") {\n    return false;\n  }\n  str = str.trim();\n  return (\n    (str.charAt(0) === \"{\" && str.charAt(str.length - 1) === \"}\") ||\n    (str.charAt(0) === \"[\" && str.charAt(str.length - 1) === \"]\")\n  );\n};\n\n/**\n * Test if a string is base64 encoded\n * Note, this is not a general function and is used internally by Riba.js by prefixing a base64 string with \"base64:\".\n * So if you want to use this method make sure that you prefix your base64 strings with \"base64:\".\n */\nexport const isBase64 = (str?: string | null) => {\n  if (!str) return false;\n  if (typeof str !== \"string\") return false;\n  return str.startsWith(BASE64_PREFIX);\n};\n\n/**\n * Decode an string or object to base64\n * @see https://developer.mozilla.org/en-US/docs/Glossary/Base64#solution_2_%E2%80%93_rewriting_atob_and_btoa_using_typedarrays_and_utf-8\n * @param obj\n * @returns\n */\nexport const toBase64 = (_obj: any) => {\n  let obj: string;\n  if (isObject(_obj)) {\n    obj = JSON.stringify(_obj, null, 0);\n  } else {\n    obj = _obj.toString();\n  }\n  return BASE64_PREFIX + btoa(encodeURIComponent(obj));\n};\n\n/**\n * Encode an base64 string back\n * @see https://developer.mozilla.org/en-US/docs/Glossary/Base64#solution_2_%E2%80%93_rewriting_atob_and_btoa_using_typedarrays_and_utf-8\n * @param obj\n * @returns\n */\nexport const fromBase64 = (base64?: string | null) => {\n  if (typeof base64 !== \"string\") {\n    return \"Not a base64 string!\";\n  }\n\n  if (base64.startsWith(BASE64_PREFIX)) {\n    base64 = base64.substring(BASE64_PREFIX.length);\n  }\n\n  const maybeDecodedUri = atob(base64);\n  let encoded: any;\n  try {\n    encoded = decodeURIComponent(maybeDecodedUri);\n  } catch (error) {\n    encoded = maybeDecodedUri;\n  }\n\n  return parseType(encoded, false).value;\n};\n\n/**\n * Test if string is a json string\n * @param str\n */\nexport const isJson = (str?: string | null) => {\n  if (!str || !couldBeJson(str)) {\n    return false;\n  }\n  try {\n    const val = JSON.parse(str);\n    return Array.isArray(val) || typeof val === \"object\" ? true : false;\n  } catch (error) {\n    return false;\n  }\n};\n\n/**\n * Parser and tokenizer for getting the type and value from a string.\n * @param input\n * @param isAttribute\n */\nexport const parseType = (input?: string | null, isAttribute = false) => {\n  let type = PRIMITIVE;\n  let value: any = input;\n  if (input === undefined) {\n    return { type, value: undefined };\n  }\n  if (input === null) {\n    return { type, value: null };\n  }\n  if (QUOTED_STR.test(input)) {\n    value = parseType(input.slice(1, -1), isAttribute).value;\n  } else if (input === \"true\") {\n    value = true;\n  } else if (input === \"false\") {\n    value = false;\n  } else if (input === \"null\") {\n    value = null;\n  } else if (input === \"undefined\") {\n    value = undefined;\n  } else if (input.startsWith(\"http://\") || input.startsWith(\"https://\")) {\n    value = input;\n  } else if (input === \"\") {\n    // An empty attribute should be handled has a true value\n    if (isAttribute) {\n      value = true;\n    } else {\n      value = \"\";\n    }\n  } else if (!isNaN(Number(input))) {\n    value = Number(input);\n    // If number is too large store the value as string\n    if (value >= Number.MAX_SAFE_INTEGER) {\n      value = input;\n    }\n  } else if (isBase64(value)) {\n    value = fromBase64(value);\n  } else if (couldBeJson(value)) {\n    const jsonString = parseJsonString(value);\n    value = jsonString ? jsonString : value;\n  } else {\n    type = KEYPATH;\n  }\n  return { type, value };\n};\n\n/**\n * Check if value is undefined\n */\nexport const isUndefined = (value?: any) => {\n  return typeof value === \"undefined\";\n};\n\n/**\n * Check if value is undefined\n */\nexport const isDefined = (value?: any) => {\n  return !isUndefined(value);\n};\n\n/**\n * Check if type is Object\n * @see https://stackoverflow.com/a/4775737/1465919\n */\nexport const isObject = (obj: any) => {\n  return isDefined(obj) && typeof obj === \"object\" && obj !== null;\n};\n\n/**\n * Parse value to string or return undefined if value is null\n * @param value\n */\nexport const getString = (value: any) => {\n  return value?.toString ? value.toString() : undefined;\n};\n\n/**\n * Parse value to number or return 0 if value is null or undefined\n * @param value\n */\nexport const getNumber = (value: string) => {\n  return value ? parseFloat(value) : undefined;\n};\n\n/**\n * Check if value is a function\n */\nexport const isFunction = (value: any) => {\n  return typeof value === \"function\";\n};\n\n/**\n * Check whether variable is number or a string with numbers in JavaScript\n * @see https://stackoverflow.com/a/1421988/1465919\n */\nexport const isNumber = (value?: any): boolean => {\n  return !isNaN(parseFloat(value)) && !isNaN(value - 0);\n};\n\n/**\n * Check if type is Boolean\n * @see https://stackoverflow.com/a/28814615/1465919\n */\nexport const isBoolean = (value?: any) => {\n  return typeof value === typeof true;\n};\n\n/**\n * Check if value is a string\n */\nexport const isString = (value?: any) => {\n  return typeof value === \"string\";\n};\n\n/**\n * Check if string contains a number\n */\nexport const stringHasNumber = (value: string) => {\n  return isString(value) && /\\d/.test(value);\n};\n\n/**\n * Check if string contains only numbers\n */\nexport const stringHasOnlyNumbers = (value?: any) => {\n  return /^\\d+$/.test(value);\n};\n\n/**\n * Check if string contains only numbers, +, - and ()\n */\nexport const stringIsPhoneNumber = (value: string) => {\n  return /^[0-9 ()+-]+$/.test(value);\n};\n\n/**\n * Just get the digits of a string, useful to remove px pixel from css value\n *\n * @see http://stackoverflow.com/a/1100653/1465919\n */\nexport const justDigits = (str: string | number) => {\n  if (typeof str === \"number\") {\n    return str;\n  }\n  const num = str.replace(/[^-\\d.]/g, \"\");\n  if (!isNumber(num)) {\n    return 0;\n  } else {\n    return Number(num);\n  }\n};\n\nexport const escapeHtml = (html: string) => {\n  return html.replace(\n    /[&<>'\"]/g,\n    (c) =>\n      ({\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': \"&quot;\",\n        \"'\": \"&#39;\",\n      }[c as never])\n  );\n};\n\n/**\n * Remove all special chars from a string\n * @see https://stackoverflow.com/a/11090301/1465919\n * @param str\n */\nexport const withoutSpecialChars = (str: string) => {\n  // str = str.replace(/[^\\w\\s]/gi, \"\"); // http://stackoverflow.com/a/4374890\n  str = str.replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>{}[\\]\\\\/]/gi, \"\");\n  return str;\n};\n\n/**\n * Replace all umlaut chars from string like ä with ae\n * @param str\n */\nexport const replaceUmlautChars = (str: string) => {\n  str = str\n    .replace(/ä/g, \"ae\")\n    .replace(/ö/g, \"oe\")\n    .replace(/ü/g, \"ue\")\n    .replace(/ß/g, \"ss\")\n    .replace(/Ä/g, \"Ae\")\n    .replace(/Ö/g, \"Oe\")\n    .replace(/Ü/g, \"Üe\");\n  return str;\n};\n\n/**\n * Removes multiple tabs, newlines, etc from a string\n * @param str\n */\nexport const withoutMultiWhitespace = (str: string) => {\n  str = str.replace(/\\s\\s+/g, \" \");\n  return str;\n};\n\n/**\n * Formats a string into a handle.\n * E.g. '100% M & Ms!!!' -> 100-m-ms\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#handle-handleize\n */\nexport const handleize = (str: string) => {\n  str = str.trim();\n  str = str.toLowerCase();\n  str = withoutMultiWhitespace(str);\n  str = withoutSpecialChars(str);\n  str = replaceUmlautChars(str);\n  str = str.replace(/ /g, \"-\");\n  return str;\n};\n\nexport const stripHtml = (html: string) => {\n  const tmp = document.createElement(\"DIV\");\n  tmp.innerHTML = html;\n  return tmp.textContent || tmp.innerText || \"\";\n};\n\n/**\n * foo-bar -> fooBar\n * Returns a camel-cased version of the string. Used when translating an\n * element's attribute name into a property name for the component's scope.\n * @param str\n */\nexport const camelCase = (str: string) => {\n  return str.replace(/-([a-z0-9])/g, (grouped) => {\n    return grouped[1].toUpperCase();\n  });\n};\n\n/**\n * fooBar -> foo-bar\n */\nexport const kebabCase = (str: string) => {\n  return str.replace(/[A-Z]/g, (letter) => `-${letter.toLowerCase()}`);\n};\n\n/**\n * uppercase's the first letter of a string\n * @param str\n */\nexport const capitalize = (str: string) => {\n  if (typeof str !== \"string\") return \"\";\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\n/**\n * Merge the contents of two or more objects together into the first object.\n * @param options\n * @param extended An object that will receive the new properties\n * @param objects The objects containing additional properties to merge in.\n * @see http://www.damirscorner.com/blog/posts/20180216-VariableNumberOfArgumentsInTypescript.html\n * @see https://gomakethings.com/merging-objects-with-vanilla-javascript/\n */\nexport const extend = (\n  options: {\n    /** Deep merge, if true compares also nested objects */\n    deep?: boolean;\n    /** Keep existing values, if true only undefined target values will be overwritten with the source value */\n    keepValues?: boolean;\n    /** If true only overwrite target values if the source value is defined / not undefined */\n    onlyDefined?: boolean;\n    /** merge arrays, if true, two arrays will be merged into one */\n    mergeArrays?: boolean;\n  } = {},\n  extended: any = {},\n  ...objects: any[]\n) => {\n  // Merge the object into the extended object\n  const merge = (obj: any) => {\n    for (const prop in obj) {\n      if (Object.hasOwnProperty.bind(obj)(prop)) {\n        if (\n          options.deep &&\n          Object.prototype.toString.call(obj[prop]) === \"[object Object]\"\n        ) {\n          // If we're doing a deep merge and the property is an object\n          extended[prop] = extend(options, extended[prop], obj[prop]);\n        } else {\n          // Otherwise, do a regular merge\n          if (options.keepValues) {\n            // Only overwrite target value if the target value is undefined\n            if (typeof extended[prop] === \"undefined\") {\n              extended[prop] = obj[prop];\n            }\n          } else if (options.onlyDefined) {\n            // Only overwrite target value if the source value is defined / not undefined\n            if (typeof obj[prop] !== \"undefined\") {\n              extended[prop] = obj[prop];\n            }\n          } else if (options.mergeArrays) {\n            // Merge array if both values are array's\n            if (Array.isArray(extended[prop]) && Array.isArray(obj[prop])) {\n              extended[prop] = [...extended[prop], ...obj[prop]];\n            } else {\n              extended[prop] = obj[prop];\n            }\n          } else {\n            extended[prop] = obj[prop];\n          }\n        }\n      }\n    }\n  };\n\n  // Loop through each object and conduct a merge\n  for (let i = 0; i < objects.length; i++) {\n    merge(objects[i]);\n  }\n\n  return extended;\n};\n\n/**\n * Clone an object, array or any primitive type like numbers or strings.\n * @param deep If true, the merge becomes recursive (aka. deep copy).\n * @param val The value(s) to clone\n */\nexport const clone = <T = any>(deep: boolean, val: T): T => {\n  if (Array.isArray(val)) {\n    if (deep) {\n      return (val as any).map((x: any) => clone<any>(true, x));\n    } else {\n      return (val as any).slice();\n    }\n  }\n  if (isObject(val)) {\n    return extend({ deep }, {}, val);\n  }\n  // Primitive types like numbers and strings are copied by default\n  return val;\n};\n\n/**\n * Get the class `\"that\"`\n * @param that\n */\nexport const classOf = (that: any) => {\n  return that.constructor;\n};\n\n/**\n * Removes internal riba properties from an object\n * @param obj\n * @return Cleared new object\n */\nexport const clearObjFromRiba = (\n  obj: Record<string, any> | Array<any>\n): Record<string, any> | Array<any> => {\n  if (Array.isArray(obj)) {\n    return (obj as Array<any>).map((x: any) =>\n      isObject(x) ? clearObjFromRiba(x) : x\n    );\n  }\n  const newObj: any = {};\n  for (const key in obj) {\n    if (key !== \"__rv\") {\n      if (isObject(obj[key])) {\n        newObj[key] = clearObjFromRiba(obj[key]);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  return newObj;\n};\n\n/**\n * Generate a Hash from string\n * @param str The string\n * @returns hash code\n * @see https://stackoverflow.com/a/7616484\n */\nexport const hashCode = (str: string) => {\n  let hash = 0;\n  let i: number;\n  let chr: number;\n  if (str.length === 0) return hash;\n  for (i = 0; i < str.length; i++) {\n    chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n};\n","import { clone, justDigits, jsonStringify, parseType } from \"./type.js\";\n\nexport const MAX_UID = 1000;\n\n/**\n * Sets an attribute. The peculiarity of this custom method is that when an object is passed, it is converted to a json string.\n * This is useful if, for example, an object is to be passed to a custom element via an attribute.\n * @note This method is used by the AttributeBinder.\n * @param el\n * @param attributeName\n * @param newValue\n * @returns\n */\nexport const setAttribute = (\n  el: HTMLElement,\n  attributeName: string,\n  newValue: any\n) => {\n  if (!attributeName) {\n    throw new Error(\"Can't set attribute of \" + attributeName);\n  }\n\n  const oldValue = el.getAttribute(attributeName);\n  let newValueFormatted: any;\n  let changed = false;\n  switch (typeof newValue) {\n    case \"string\":\n    case \"number\":\n    case \"boolean\":\n      newValueFormatted = String(newValue);\n      break;\n    case \"undefined\":\n      newValueFormatted = undefined;\n    case \"object\":\n      if (newValue === null) {\n        newValueFormatted = null;\n      } else {\n        newValueFormatted = jsonStringify(newValue, 0);\n      }\n      break;\n    default:\n      newValueFormatted = String(newValue);\n      break;\n  }\n\n  if (newValueFormatted === null || newValueFormatted === undefined) {\n    el.removeAttribute(attributeName);\n    changed = true;\n  } else {\n    if (oldValue !== newValueFormatted) {\n      el.setAttribute(attributeName, newValueFormatted);\n      changed = true;\n    }\n  }\n  return {\n    name: attributeName,\n    newValue: newValueFormatted,\n    oldValue,\n    changed,\n  };\n};\n\nexport const getDataset = (element: HTMLElement) => {\n  const dataset = clone(false, element.dataset);\n  for (const attr in dataset) {\n    if (dataset[attr]) {\n      dataset[attr] = parseType(dataset[attr], true).value;\n    }\n  }\n  return dataset;\n};\n\n/**\n * Calls el.hasChildNodes but ignores empty strings, the default hasChildNodes would return true on `<div> </div>`.\n * Very useful to check within a component if the component has set child elements to load or overwrite the component template\n * @param el\n */\nexport const hasChildNodesTrim = (el: HTMLUnknownElement) => {\n  if (!el.hasChildNodes()) {\n    return false;\n  }\n  const childNodes = el.childNodes;\n  if (childNodes.length === 1 && childNodes[0].nodeType === 3) {\n    if (!childNodes[0].nodeValue || childNodes[0].nodeValue?.trim() === \"\") {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n *\n */\nexport const getInputValue = (\n  el:\n    | HTMLUnknownElement\n    | HTMLElement\n    | HTMLSelectElement\n    | HTMLInputElement\n    | HTMLOptionsCollection\n) => {\n  const results: string[] = [];\n  if ((el as HTMLSelectElement).type === \"checkbox\") {\n    return (el as HTMLInputElement).checked;\n  } else if ((el as HTMLSelectElement).type === \"select-multiple\") {\n    const options: HTMLOptionsCollection = (el as HTMLSelectElement).options;\n\n    for (const key in options) {\n      if (options[key]) {\n        const option = options[key];\n        if (option.selected) {\n          results.push(option.value);\n        }\n      }\n    }\n\n    return results;\n  } else if (\n    (el as HTMLElement).hasAttribute &&\n    (el as HTMLElement).hasAttribute(\"contenteditable\")\n  ) {\n    return (el as HTMLElement).innerHTML; // TODO write test for contenteditable\n  } else {\n    return (el as HTMLInputElement).value;\n  }\n};\n\nexport const elementIsHidden = (el: HTMLElement) => {\n  return (\n    el.hasAttribute(\"hidden\") ||\n    el.style.display === \"none\" ||\n    el.style.visibility === \"hidden\" ||\n    window.getComputedStyle(el).display === \"none\" ||\n    window.getComputedStyle(el).visibility === \"hidden\"\n  );\n};\n\nexport const elementIsVisible = (el: HTMLElement) => {\n  return !elementIsHidden(el);\n};\n\n/**\n * Observe scroll event\n * @param scrollElement The element or window you want to observe\n * @returns Returns a promise which resolves when an element stops scrolling\n */\nexport const scrolling = async (\n  scrollElement: HTMLElement | (Window & typeof globalThis)\n) => {\n  return new Promise<void>((resolve) => {\n    let scrollTimeout: ReturnType<typeof setTimeout> | undefined;\n    const checkScroll = () => {\n      if (scrollTimeout !== undefined) {\n        clearTimeout(scrollTimeout);\n      }\n\n      scrollTimeout = setTimeout(() => {\n        resolve();\n      }, 100);\n    };\n    scrollElement.removeEventListener(\"scroll\", checkScroll);\n    scrollElement.addEventListener(\"scroll\", checkScroll, { passive: true });\n    checkScroll();\n  });\n};\n\n/**\n * Scrolls to an element\n *\n * @see https://stackoverflow.com/a/31987330\n * @see https://pawelgrzybek.com/page-scroll-in-vanilla-javascript/\n * @param element\n * @param to\n * @param duration\n */\nexport const scrollTo = async (\n  to: HTMLElement,\n  offset = 0,\n  scrollElement: HTMLElement | (Window & typeof globalThis) | null = window,\n  angle: \"horizontal\" | \"vertical\" = \"vertical\",\n  behavior: \"auto\" | \"smooth\" | undefined = \"smooth\"\n) => {\n  if (!scrollElement) {\n    scrollElement = window;\n  }\n\n  const scrollPromise = scrolling(scrollElement);\n\n  let top = 0;\n  let left = 0;\n\n  // If element is window\n  if ((scrollElement as Window).document) {\n    if (angle === \"vertical\") {\n      const scrollY =\n        (scrollElement as Window).scrollY ||\n        (scrollElement as Window).pageYOffset;\n      top = Math.round(to.getBoundingClientRect().top + scrollY - offset);\n    } else {\n      const scrollX =\n        (scrollElement as Window).scrollX ||\n        (scrollElement as Window).pageXOffset;\n      left = Math.round(to.getBoundingClientRect().left + scrollX - offset);\n    }\n  } else {\n    if (angle === \"vertical\") {\n      const marginTop = justDigits(\n        window.getComputedStyle(scrollElement as HTMLElement).marginTop\n      );\n      top = Math.round(to.offsetTop - offset - marginTop);\n    } else {\n      const marginLeft = justDigits(\n        window.getComputedStyle(scrollElement as HTMLElement).marginLeft\n      );\n      left = Math.round(to.offsetLeft - offset - marginLeft);\n    }\n  }\n\n  scrollElement.scroll({\n    behavior,\n    left,\n    top,\n  });\n\n  return scrollPromise;\n};\n\nexport const getScrollHeight = (\n  scrollElement: HTMLElement | (Window & typeof globalThis)\n): number => {\n  // if element is window\n  if ((scrollElement as Window).document) {\n    const win = scrollElement as Window;\n    const doc = win.document;\n    return (\n      (win as any).scrollMaxY ||\n      Math.max(\n        doc.body.scrollHeight,\n        doc.body.offsetHeight,\n        doc.documentElement.clientHeight,\n        doc.documentElement.scrollHeight,\n        doc.documentElement.offsetHeight,\n        0\n      )\n    );\n  }\n  return (scrollElement as HTMLElement).scrollHeight;\n};\n\nexport const getScrollWidth = (\n  scrollElement: HTMLElement | (Window & typeof globalThis)\n): number => {\n  // if element is window\n  if ((scrollElement as Window).document) {\n    const win = scrollElement as Window;\n    const doc = win.document;\n    return (\n      (win as any).scrollMaxX ||\n      Math.max(\n        doc.body.scrollWidth,\n        doc.body.offsetWidth,\n        doc.documentElement.clientWidth,\n        doc.documentElement.scrollWidth,\n        doc.documentElement.offsetWidth\n      )\n    );\n  }\n  return (scrollElement as HTMLElement).scrollWidth;\n};\n\nexport const scrollToPosition = async (\n  scrollElement: HTMLElement | (Window & typeof globalThis) | null,\n  position: number | \"end\" | \"start\" | \"center\",\n  angle: \"horizontal\" | \"vertical\" | \"both\" = \"vertical\",\n  behavior: \"auto\" | \"smooth\" | undefined = \"smooth\"\n) => {\n  let top: number | undefined;\n  let left: number | undefined;\n\n  if (!scrollElement) {\n    return;\n  }\n\n  const scrollPromise = scrolling(scrollElement);\n\n  if (angle === \"vertical\" || angle === \"both\") {\n    switch (position) {\n      case \"start\":\n        top = 0;\n        break;\n      case \"end\":\n        top = getScrollHeight(scrollElement);\n        break;\n      case \"center\":\n        top = getScrollHeight(scrollElement);\n        if (top) {\n          top /= 2;\n          // if element is window\n          if ((scrollElement as Window).document) {\n            top -= ((scrollElement as Window).visualViewport?.height || 0) / 2;\n          } else {\n            top -= (scrollElement as HTMLElement).clientHeight / 2;\n          }\n        }\n        break;\n      default:\n        top = position;\n        break;\n    }\n  }\n\n  if (angle === \"horizontal\" || angle === \"both\") {\n    switch (position) {\n      case \"start\":\n        left = 0;\n        break;\n      case \"end\":\n        left = getScrollWidth(scrollElement);\n        break;\n      case \"center\":\n        left = getScrollWidth(scrollElement);\n        if (left) {\n          left /= 2;\n          // if element is window\n          if ((scrollElement as Window).document) {\n            left -= ((scrollElement as Window).visualViewport?.width || 0) / 2;\n          } else {\n            left -= (scrollElement as HTMLElement).clientWidth / 2;\n          }\n        }\n        break;\n      default:\n        left = position;\n        break;\n    }\n  }\n\n  scrollElement.scroll({\n    behavior,\n    top,\n    left,\n  });\n\n  return scrollPromise;\n};\n\nexport const getElementFromEvent = <T = HTMLAnchorElement | HTMLUnknownElement>(\n  event: Event | MouseEvent | TouchEvent\n) => {\n  const el =\n    ((event as Event).target as unknown as T | null) ||\n    ((event as any).currentTarget as T | null) ||\n    ((event as MouseEvent).relatedTarget as unknown as T | null) ||\n    // JQuery event\n    ((event as any).delegateTarget as T) ||\n    ((event as any).fromElement as T);\n  return el;\n};\n\nexport const getViewportDimensions = () => {\n  const w = Math.max(\n    document.documentElement ? document.documentElement.clientWidth : 0,\n    window.innerWidth || 0\n  );\n  const h = Math.max(\n    document.documentElement ? document.documentElement.clientHeight : 0,\n    window.innerHeight || 0\n  );\n  return {\n    h,\n    w,\n  };\n};\n\n/**\n * Determine if an element is in the viewport\n * @param elem The element\n * @param offset.top Distance to the top of the screen, if this is 0, the element must be scrolled until the top of the screen\n * @param offset.bottom Distance to the bottom of the screen, if this is 0, the scroll position must be over the element\n * @return Returns true if element is in the viewport\n */\nexport const isInViewport = (\n  elem: Element,\n  offset: {\n    top?: number;\n    bottom?: number;\n    left?: number;\n    right?: number;\n  } = {}\n) => {\n  if (!elem) {\n    return false;\n  }\n\n  const distance = elem.getBoundingClientRect();\n\n  const vp = getViewportDimensions();\n\n  offset.top ||= 0;\n  offset.left ||= 0;\n  offset.bottom ||= 0;\n  offset.right ||= 0;\n\n  offset.top += vp.h - distance.height;\n  offset.left += vp.w - distance.width;\n\n  const vertical =\n    distance.top + distance.height >= offset.bottom &&\n    distance.bottom - distance.height <= offset.top;\n\n  const horizontal =\n    distance.left + distance.width >= offset.right &&\n    distance.right - distance.width <= offset.left;\n\n  return vertical && horizontal;\n};\n\n/**\n * Select all of an contenteditable or input element\n * @param element The element you want to select\n */\nexport const selectAll = (element: HTMLInputElement) => {\n  // need setTimeout for safari\n  setTimeout(() => {\n    if (typeof element.selectionStart !== \"undefined\") {\n      element.selectionStart = 0;\n      element.selectionEnd = 999;\n    }\n\n    if (typeof element.select === \"function\") {\n      element.select();\n    }\n\n    if (typeof element.setSelectionRange === \"function\") {\n      element.setSelectionRange(0, 999);\n    }\n\n    if (window.getSelection) {\n      const range = document.createRange();\n      range.selectNodeContents(element);\n      const selection = window.getSelection();\n      if (selection) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.selectAllChildren(element);\n      }\n    }\n\n    if ((document as any).body.createTextRange) {\n      const range: any = (document.body as any).createTextRange(); // Creates TextRange object\n      range.moveToElementText(element); // sets Range\n      range.select(); // make selection.\n    }\n\n    if (document.execCommand) {\n      document.execCommand(\"selectAll\", false, undefined);\n    }\n  }, 0);\n};\n\n/**\n * Cross-browser Document Ready check\n * @see https://www.competa.com/blog/cross-browser-document-ready-with-vanilla-javascript/\n * @param callback\n */\nexport const ready = (callback: () => void) => {\n  if (!callback || typeof callback !== \"function\") {\n    return new Error(\"The callback is required!\");\n  }\n\n  /**\n   * In some cases it can be useful to dispatch the \"DOMContentLoaded\" by hand,\n   * but Riba should only react to the real event.\n   *\n   * For this case you can create the event in this way:\n   *\n   * @example\n   * ```ts\n   *   const event: Event & { fake?: boolean } = new Event('DOMContentLoaded', {\n   *     bubbles: true,\n   *     cancelable: true,\n   *   })\n   *   event.fake = true\n   *   window.document.dispatchEvent(event)\n   * ```\n   */\n  const checkReady = (event?: Event & { fake?: boolean }) => {\n    // Do nothing if this is a fake event\n    if (event?.fake) return;\n\n    if (document.readyState !== \"loading\") {\n      callback();\n      if ((document as any).attachEvent) {\n        (document as any).detachEvent(\"onreadystatechange\", checkReady);\n      }\n      document.removeEventListener(\"DOMContentLoaded\", checkReady);\n    }\n  };\n\n  if ((document as any).attachEvent) {\n    (document as any).attachEvent(\"onreadystatechange\", checkReady);\n  }\n  if (document.addEventListener) {\n    document.addEventListener(\"DOMContentLoaded\", checkReady);\n  }\n  checkReady();\n};\n\nexport const loadScript = async (\n  src: string,\n  id: string,\n  async = true,\n  defer = true\n) => {\n  const script = await new Promise<HTMLScriptElement>((resolve, reject) => {\n    let script = document.getElementById(id) as HTMLScriptElement | null;\n    if (script) {\n      console.warn(\"script already loaded, do nothing.\");\n      if (script.hasAttribute(\"loaded\")) {\n        return resolve(script);\n      }\n    } else {\n      script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.id = id;\n      script.src = src;\n      if (async) {\n        script.async = true;\n      }\n      if (defer) {\n        script.defer = true;\n      }\n      const head = document.head || document.getElementsByTagName(\"head\")[0];\n      head.appendChild(script);\n    }\n\n    // IE\n    if ((script as any).readyState) {\n      (script as any).onreadystatechange = function () {\n        if (\n          (script as any).readyState === \"loaded\" ||\n          (script as any).readyState === \"complete\"\n        ) {\n          (script as any).onreadystatechange = null;\n          script?.setAttribute(\"loaded\", \"true\");\n          resolve(script as HTMLScriptElement);\n        }\n      };\n    }\n\n    // Other browsers\n    script.addEventListener(\"load\", () => {\n      script?.setAttribute(\"loaded\", \"true\");\n      resolve(script as HTMLScriptElement);\n    });\n    script.addEventListener(\"error\", (...args) => {\n      const error = new Error(\"Error on load script \" + script?.src);\n      console.error(error);\n      console.error(...args);\n      reject(error);\n    });\n  });\n\n  return script;\n};\n\nexport const getUID = (prefix: string): string => {\n  do {\n    prefix += ~~(Math.random() * MAX_UID); // \"~~\" acts like a faster Math.floor() here\n  } while (document.getElementById(prefix));\n\n  return prefix;\n};\n\n/**\n * Detects if dom element is custom element and a registered riba component\n * @see https://stackoverflow.com/a/47737765/1465919\n * @param element The element or tag name you want to test\n * @param isRegistered If true the element must also be a registered as a custom element,\n * @param isUpgraded\n */\nexport const isCustomElement = (\n  element: HTMLUnknownElement | string,\n  isRegistered = false,\n  isUpgraded = false\n) => {\n  // A custom element's name is required to contain a -, whereas an HTML-defined element will not. So:\n  const localName = typeof element === \"string\" ? element : element.localName;\n  const isCustomElement = localName.includes(\"-\");\n  if (isCustomElement && isRegistered && customElements) {\n    const customConstructor = customElements.get(localName);\n    if (!customConstructor) {\n      return false;\n    }\n    // If the element is not yet upgraded the constructor is still equal to HTMLElement\n    if (isUpgraded) {\n      return customConstructor === element.constructor;\n    }\n    // If we don't need to check for upgraded status\n    return true;\n  }\n  return isCustomElement;\n};\n\n/**\n * Waits for CustomElement to be upgraded, returns the element.\n * @param element The custom Element waiting for an upgrade.\n * @returns the element after the upgrade\n */\nexport const waitForCustomElement = async (element: HTMLUnknownElement) => {\n  await customElements.whenDefined(element.localName);\n  return element;\n};\n\n/**\n * Creating a new DOM element from an HTML string\n * @param html representing a single element\n * @example\n * ```js\n *   const td = htmlToElement(\"<td>foo</td>\");\n *   const div = htmlToElement(\"<div><span>nested</span> <span>stuff</span></div>\");\n * ```\n */\nexport const htmlToElement = (html: string) => {\n  const template = document.createElement(\"template\");\n  html = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = html;\n  return template.content.firstChild;\n};\n\n/**\n * Creating a new DOM elements from an HTML string\n * @param html representing any number of sibling elements\n * @example\n * ```js\n *   var rows = htmlToElements('<tr><td>foo</td></tr><tr><td>bar</td></tr>');\n * ```\n */\nexport const htmlToElements = (html: string) => {\n  const template = document.createElement(\"template\");\n  template.innerHTML = html;\n  return template.content.childNodes;\n};\n\n/**\n * Converts a NodeList or HTMLCollection to an Array\n * @param nodeList\n * @returns\n */\nexport const toArray = (nodeList: NodeList | HTMLCollection): HTMLElement[] => {\n  if (!nodeList) {\n    return [];\n  }\n\n  return [].slice.call(nodeList);\n};\n\n/**\n * Check if any html element is visible in the dom\n * @param element\n * @returns\n */\nexport const isVisible = (element: HTMLElement) => {\n  if (!element) {\n    return false;\n  }\n\n  if (\n    element.style &&\n    element.parentNode &&\n    (element.parentNode as HTMLElement).style\n  ) {\n    const elementStyle = getComputedStyle(element);\n    const parentNodeStyle = getComputedStyle(element.parentNode as HTMLElement);\n\n    return (\n      elementStyle.display !== \"none\" &&\n      parentNodeStyle.display !== \"none\" &&\n      elementStyle.visibility !== \"hidden\"\n    );\n  }\n\n  return false;\n};\n\n/**\n * Similar to JQuery's `$(el).index();`\n * @param el\n */\nexport const getElementIndex = (el: Element | null) => {\n  if (!el) {\n    return -1;\n  }\n  let i = 0;\n  do {\n    i++;\n    el = (el as HTMLElement).previousElementSibling;\n  } while (el);\n  return i;\n};\n","// Credits\n// * https://github.com/flexdinesh/browser-or-node\n// * https://stackoverflow.com/a/33697246/1465919\n\n// For real types see https://github.com/denoland/deno/blob/main/core/lib.deno_core.d.ts\ndeclare const Deno: any;\ndeclare const process: any;\ndeclare const WorkerGlobalScope: any;\ndeclare const importScripts: any;\ndeclare const WorkerNavigator: any;\n\nconst isNode =\n  typeof process !== \"undefined\" &&\n  process.versions != null &&\n  process.versions.node != null;\n\nconst isWebWorker =\n  !isNode &&\n  \"undefined\" !== typeof WorkerGlobalScope &&\n  \"function\" === typeof importScripts &&\n  navigator instanceof WorkerNavigator;\ntypeof self === \"object\" &&\n  (self as any).constructor &&\n  (self as any).constructor.name === \"DedicatedWorkerGlobalScope\";\n\n/**\n * @see https://github.com/jsdom/jsdom/releases/tag/12.0.0\n * @see https://github.com/jsdom/jsdom/issues/1537\n */\nconst isJsDom =\n  (typeof window !== \"undefined\" && window.name === \"nodejs\") ||\n  (typeof navigator !== \"undefined\" &&\n    (navigator.userAgent.includes(\"Node.js\") ||\n      navigator.userAgent.includes(\"jsdom\")));\n\nconst isBrowser =\n  !isJsDom &&\n  !isNode &&\n  !isWebWorker &&\n  typeof window !== \"undefined\" &&\n  typeof window.document !== \"undefined\";\n\nconst isDeno = typeof Deno !== \"undefined\" && typeof Deno.core !== \"undefined\";\n\nexport { isBrowser, isWebWorker, isNode, isJsDom, isDeno };\n","/**\n * Simplified version of https://github.com/YuzuJS/setImmediate\n * TODO Port tests\n */\n\ninterface Task {\n  callback: (...args: any) => any;\n  args: any[];\n}\n\nlet nextHandle = 1; // Spec says greater than zero\nconst tasksByHandle: { [key: string]: Task } = {};\nlet currentlyRunningATask = false;\nconst messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n\nconst onGlobalMessage = function (event: MessageEvent) {\n  if (\n    event.source === window &&\n    typeof event.data === \"string\" &&\n    event.data.indexOf(messagePrefix) === 0\n  ) {\n    runIfPresent(+event.data.slice(messagePrefix.length));\n  }\n};\n\nif (window) {\n  window.addEventListener(\"message\", onGlobalMessage, false);\n}\n\nfunction registerImmediate(handle: number) {\n  window.postMessage(messagePrefix + handle, \"*\");\n}\n\nfunction _setImmediate(callback: (...args: any) => any, ...args: any[]) {\n  console.debug(\"Use setImmediate polyfill\");\n  // Callback can either be a function or a string\n  if (typeof callback !== \"function\") {\n    callback = new Function(\"\" + callback) as (...args: any) => any;\n  }\n  // Store and register the task\n  const task = { callback: callback, args };\n  tasksByHandle[nextHandle] = task;\n  registerImmediate(nextHandle);\n  return nextHandle++;\n}\n\nfunction _clearImmediate(handle: number) {\n  delete tasksByHandle[handle];\n}\n\nfunction run(task: Task) {\n  const callback = task.callback;\n  const args = task.args;\n  callback(...args);\n}\n\nfunction runIfPresent(handle: any) {\n  // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n  // So if we're currently running a task, we'll need to delay this invocation.\n  if (currentlyRunningATask) {\n    // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n    // \"too much recursion\" error.\n    setTimeout(runIfPresent, 0, handle);\n  } else {\n    const task = tasksByHandle[handle];\n    if (task) {\n      currentlyRunningATask = true;\n      try {\n        run(task);\n      } finally {\n        _clearImmediate(handle);\n        currentlyRunningATask = false;\n      }\n    }\n  }\n}\n\nexport const setImmediate: typeof _setImmediate =\n  (window as any)?.setImmediate || _setImmediate;\nexport const clearImmediate: typeof _clearImmediate =\n  (window as any)?.clearImmediate || _clearImmediate;\n","const fallbackCopyTextToClipboard = (text: string) => {\n  const textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n\n  // Avoid scrolling to bottom\n  textArea.style.top = \"0\";\n  textArea.style.left = \"0\";\n  textArea.style.position = \"fixed\";\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    const successful = document.execCommand(\"copy\");\n    const msg = successful ? \"successful\" : \"unsuccessful\";\n    console.log(`Fallback: Copying text command was ${msg}: ${text}`);\n  } catch (err) {\n    console.error(\"Fallback: Oops, unable to copy\", err);\n  }\n\n  document.body.removeChild(textArea);\n};\n\n/**\n * Copy text to clipboard\n * @see https://stackoverflow.com/a/30810322\n */\nexport const copyTextToClipboard = async (text: string) => {\n  if (!navigator.clipboard) {\n    fallbackCopyTextToClipboard(text);\n    return;\n  }\n  try {\n    await navigator.clipboard.writeText(text);\n    console.log(\"Copying to clipboard was successful: \" + text);\n  } catch (error) {\n    console.error(\"Could not copy text: \", error);\n  }\n};\n\n/**\n * Get the Operating system the browser is running on\n * @see https://stackoverflow.com/questions/19877924/what-is-the-list-of-possible-values-for-navigator-platform-as-of-today\n * @see https://stackoverflow.com/questions/9038625/detect-if-device-is-ios\n * @see https://github.com/podlove/podlove-subscribe-button/blob/master/src/coffee/user_agent.coffee\n */\nexport const getOS = () => {\n  const ua = navigator.userAgent;\n  const platform = window.navigator.platform;\n\n  const uAs = {\n    windows7: /Windows NT 6.1/,\n    windows8: /Windows NT 6.2/,\n    windows81: /Windows NT 6.3/,\n    windows10: /Windows NT 10.0/,\n    windows: /windows/i,\n    windowsPhone: /trident/i,\n    android: /android/i,\n    ios: /(ipad|iphone|ipod)/i,\n    linux: /(linux)/i,\n    unix: /(openbsd|freebsd|netbsd)/i,\n    osxCatalina: /macintosh.+10(_|\\.)15/i,\n    osxBigSur: /macintosh.+((10(_|\\.)16)|(11(_|\\.)))/i,\n    osx: /macintosh/i,\n    mac: /mac/i,\n  };\n\n  const platforms = {\n    linux: /Linux/i,\n\n    unix: /(FreeBSD|OpenBSD|X11|SunOS)/i,\n    webOS: /webOS/i,\n\n    playstation3: /playstation 3/i,\n    playstation4: /playstation 4/i,\n    PlaystationPortable: /psp/i,\n\n    newNintendo3Ds: /new nintendo 3ds/i,\n    nintendoDsi: /nintendo dsi/i,\n    nintendo3Ds: /nintendo 3ds/i,\n    nintendoWii: /nintendo wii/i,\n    nintendoWiiU: /nintendo wiiu/i,\n\n    palmos: /palmos/i,\n\n    symbian: /(nokia_series_40|s60|symbian)/i,\n  };\n\n  for (const uAKey of Object.keys(uAs) as Array<keyof typeof uAs>) {\n    const regex = uAs[uAKey];\n    if (regex.test(ua)) {\n      // iPad on iOS 13 detection\n      if (uAKey === \"mac\" && \"ontouchend\" in document) {\n        return \"ios\";\n      }\n      return uAKey;\n    }\n  }\n\n  for (const platformKey of Object.keys(platforms) as Array<\n    keyof typeof platforms\n  >) {\n    const regex = platforms[platformKey];\n    if (regex.test(platform)) {\n      return platformKey;\n    }\n  }\n\n  return \"Unknown\";\n};\n\n// TODO test TV\nexport const getOSType = () => {\n  const os = getOS();\n\n  let isMobile = false;\n  let isDesktop = false;\n  let isGameConsole = false;\n\n  switch (os) {\n    case \"windows\":\n    case \"windows10\":\n    case \"windows7\":\n    case \"windows8\":\n    case \"windows81\":\n    case \"osxBigSur\":\n    case \"osxCatalina\":\n    case \"osx\":\n    case \"mac\":\n    case \"linux\":\n    case \"unix\":\n      isDesktop = true;\n      break;\n\n    case \"ios\":\n    case \"android\":\n    case \"windowsPhone\":\n    case \"symbian\":\n      isMobile = true;\n      break;\n  }\n\n  if (os.includes(\"playstation\") || os.includes(\"nintendo\")) {\n    isGameConsole = true;\n  }\n\n  return {\n    isMobile,\n    isDesktop,\n    isGameConsole,\n  };\n};\n\nexport const isMobile = () => {\n  return getOSType().isMobile;\n};\n\nexport const isDesktop = () => {\n  return getOSType().isDesktop;\n};\n\nexport const isGameConsole = () => {\n  return getOSType().isGameConsole;\n};\n","/**\n * get param from hash\n */\nexport const getUrlParameter = (name: string, url: string) => {\n  if (!url) {\n    url = window.location.href;\n  }\n  name = name.replace(/[[\\]]/g, \"\\\\$&\");\n  const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\");\n  const results = regex.exec(url);\n  if (!results) {\n    return null;\n  }\n  if (!results[2]) {\n    return \"\";\n  }\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n};\n\n/**\n * get location object ofpath or address bar\n * @see http://stackoverflow.com/a/736970/1465919\n *\n * @example\n * var l = getLocation(\"http://example.com:3000/pathname/?search=test#hash\");\n * =>\n * l.protocol; // => \"http:\"\n * l.host;     // => \"example.com:3000\"\n * l.hostname; // => \"example.com\"\n * l.port;     // => \"3000\"\n * l.pathname; // => \"/pathname/\"\n * l.hash;     // => \"#hash\"\n * l.search;   // => \"?search=test\"\n * l.origin;   // => \"http://example.com:3000\"\n */\nexport const getLocation = (url?: string): Location => {\n  if (!url) {\n    return window.location;\n  }\n  const l = document.createElement(\"a\");\n  l.href = url;\n  return l as any as Location;\n};\n\n/**\n * If the webapps url is https://mysupersite.org and the url is https://mysupersite.org/subpage?search=test\n * this method will return /subpage?search=test\n * If the url is https://anothersite.org/subpage?search=test this method will return https://anothersite.org/subpage?search=test\n * @param url\n */\nexport const normalizeUrl = (\n  url?: string\n): { url: string; location: Location } => {\n  const location = getLocation(url);\n  const curHostname = getLocation().hostname;\n  if (location.hostname === curHostname) {\n    return {\n      url: location.pathname + location.search + location.hash,\n      location,\n    };\n  } else {\n    return {\n      url: getUrl(url),\n      location,\n    };\n  }\n};\n\n/**\n * Return the current full url\n *\n * @return {string} currentUrl\n */\nexport const getUrl = (url?: string): string => {\n  const location = getLocation(url);\n  return (\n    location.protocol +\n    \"//\" +\n    location.host +\n    location.pathname +\n    location.search +\n    location.hash\n  );\n};\n\n/**\n * Check if we are on the route\n */\nexport const onRoute = (checkUrl?: string, compareQueryParam = false) => {\n  if (checkUrl) {\n    const location1 = getLocation();\n    const location2 = getLocation(checkUrl);\n\n    if (compareQueryParam) {\n      // TODO ignore query parameter order\n      if (location1.search !== location2.search) {\n        return false;\n      }\n    }\n\n    return (\n      location1.hostname === location2.hostname &&\n      location1.pathname === location2.pathname\n    );\n  }\n  return false;\n};\n\n/**\n * Check if the current location url stats with a url or is equal\n */\nexport const onParentRoute = (checkUrl?: string) => {\n  if (checkUrl) {\n    const location = getLocation();\n    const pathname = location.pathname;\n    const hostname = location.hostname;\n    const checkLocation = getLocation(checkUrl);\n    const checkPathname = checkLocation.pathname;\n    const checkHostname = checkLocation.hostname;\n    return hostname === checkHostname && pathname.startsWith(checkPathname);\n  }\n  return false;\n};\n\n/**\n * Given an url, return it without the hash\n *\n * @param url\n * @return newCleanUrl\n */\nexport const cleanLink = (url: string): string => {\n  return url.replace(/#.*/, \"\");\n};\n\n/**\n * Return the port number normalized, eventually you can pass a string to be normalized.\n *\n * @param p\n * @return port\n */\nexport const getPort = (p?: string, url?: string) => {\n  const location = getLocation(url);\n  const port = typeof p !== \"undefined\" ? p : location.port;\n  const protocol = location.protocol;\n\n  if (port !== \"\") {\n    return Number(port);\n  }\n  if (protocol === \"http:\") {\n    return 80;\n  }\n\n  if (protocol === \"https:\") {\n    return 443;\n  }\n};\n\n/**\n * Test if url is absolute or relative\n * @see https://stackoverflow.com/a/19709846/1465919\n */\nexport const isAbsoluteUrl = (url: string) => {\n  if (!url) {\n    return false;\n  }\n  const isProtokoll = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n  const isAbsolute =\n    isProtokoll.test(url) ||\n    url.startsWith(\"mailto:\") ||\n    url.startsWith(\"tel:\") ||\n    url.startsWith(\"fax:\");\n  return isAbsolute;\n};\n\nexport const isExternalUrl = (absoluteUrl: string) => {\n  if (isAbsoluteUrl(absoluteUrl)) {\n    const location = getLocation();\n    const host = location.protocol + \"//\" + location.hostname;\n    let isExternal = true;\n    if (absoluteUrl.startsWith(host)) {\n      isExternal = false;\n    }\n    return isExternal;\n  }\n  return false;\n};\n\nexport const isInternalUrl = (url: string) => {\n  return !isExternalUrl(url);\n};\n\n/**\n * Get hash from address bar or url if set\n */\nexport const getHash = (url?: string) => {\n  return getLocation(url).hash;\n};\n\n/**\n * Change hash from address bar\n */\nexport const updateHash = (hash: string) => {\n  return (window.location.hash = hash);\n};\n\n/**\n * Remove hash from address bar\n */\nexport const removeHash = () => {\n  return history.pushState(\n    \"\",\n    document.title,\n    window.location.pathname + window.location.search\n  );\n};\n","import { isObject } from \"@ribajs/utils/src/type.js\";\nimport { ModuleElementType, Elements } from \"../types/index.js\";\n\nexport abstract class ModuleElementService<T = any> {\n  protected elements: Elements<T>;\n\n  protected abstract type: ModuleElementType;\n\n  /**\n   *\n   * @param elements;\n   */\n  constructor(elements: Elements) {\n    this.elements = elements;\n  }\n\n  /**\n   * Regist a element\n   * @param element\n   * @param name  Overwrites the name to access the element over\n   */\n  public abstract register(element: T, name?: string): Elements;\n\n  /**\n   * Regist a set / array of elements\n   * @param elements\n   */\n  public registerAll(elements: Elements): Elements {\n    if (!isObject(elements)) {\n      throw new Error(\"Elements to register must be an object of elements\");\n    }\n    for (const key in elements) {\n      if (elements[key] && key !== \"__esModule\") {\n        const element = elements[key];\n        this.register(element, key);\n      }\n    }\n    return this.elements;\n  }\n}\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport type {\n  Adapters,\n  Root,\n  Key,\n  ObserverSyncCallback,\n  Obj,\n  Options,\n} from \"./types/index.js\";\nimport { isObject } from \"@ribajs/utils/src/type.js\";\n\nexport class Observer {\n  public static adapters: Adapters;\n  public static interfaces: string[] = [];\n  public static rootInterface: Root;\n\n  public static updateOptions(options: Partial<Options>): void {\n    if (!options.adapters) {\n      throw new Error(\"adapters are required!\");\n    }\n\n    if (options.adapters) {\n      Observer.adapters = { ...Observer.adapters, ...options.adapters };\n      Observer.interfaces = Object.keys(Observer.adapters);\n    }\n\n    Observer.rootInterface = options.rootInterface || Observer.interfaces[0];\n\n    if (!Observer.rootInterface) {\n      throw new Error(\"rootInterface is required!\");\n    }\n  }\n\n  /**\n   * Tokenize the provided keypath string into interface + path tokens for the\n   * observer to work with.\n   */\n  public static tokenize(keypath: string, root: Root): any[] {\n    const tokens: any[] = [];\n    let current: Key = { i: root, path: \"\" };\n    let index: number;\n    let chr: string;\n\n    for (index = 0; index < keypath.length; index++) {\n      chr = keypath.charAt(index);\n      if (~Observer.interfaces.indexOf(chr)) {\n        tokens.push(current);\n        current = { i: chr, path: \"\" };\n      } else {\n        current.path += chr;\n      }\n    }\n    tokens.push(current);\n    return tokens;\n  }\n\n  /**\n   * Gets the provided key on an object.\n   * @param key\n   * @param obj\n   */\n  public static get(key: Key, obj: Obj) {\n    return Observer.adapters[key.i].get(obj, key.path);\n  }\n\n  /**\n   * Observes or unobserve a callback on the object using the provided key.\n   * @param active\n   * @param key\n   * @param obj\n   * @param callback\n   */\n  public static set(\n    active: boolean,\n    key: Key,\n    obj: Obj,\n    callback: ObserverSyncCallback\n  ) {\n    if (active) {\n      Observer.adapters[key.i].observe(obj, key.path, callback);\n    } else {\n      Observer.adapters[key.i].unobserve(obj, key.path, callback);\n    }\n  }\n\n  public keypath: string;\n  public callback: ObserverSyncCallback;\n  public objectPath: Obj[];\n  public obj: Obj;\n  public target: Obj;\n  public key: Key;\n  public tokens: Key[];\n\n  /**\n   * Constructs a new keypath observer and kicks things off.\n   * @param model\n   * @param keypath\n   * @param callback\n   */\n  constructor(model: Obj, keypath: string, callback: ObserverSyncCallback) {\n    this.keypath = keypath;\n    this.callback = callback;\n    this.objectPath = [];\n    const parseResult = this.parse();\n    this.key = parseResult.key;\n    this.tokens = parseResult.tokens;\n    this.obj = this.getRootObject(model);\n    this.target = this.realize();\n    if (isObject(this.target)) {\n      Observer.set(true, this.key, this.target, this.callback);\n    }\n  }\n\n  /**\n   * Parses the keypath using the interfaces defined on the view. Sets variables\n   * for the tokenized keypath as well as the end key.\n   */\n  public parse() {\n    let path: string;\n    let root: Root;\n\n    if (!Observer.interfaces || !Observer.interfaces.length) {\n      throw new Error(\n        `[Observer] Must define at least one adapter interface. interfaces: \"${JSON.stringify(\n          Observer.interfaces\n        )}\" adapters: \"${JSON.stringify(Observer.adapters)}\"`\n      );\n    }\n\n    if (~Observer.interfaces.indexOf(this.keypath[0])) {\n      root = this.keypath[0];\n      path = this.keypath.substr(1);\n    } else {\n      root = Observer.rootInterface;\n      path = this.keypath;\n    }\n\n    this.tokens = Observer.tokenize(path, root);\n\n    if (!this.tokens.length) {\n      throw new Error(\"[Observer] No tokens\");\n    }\n\n    this.key = this.tokens.pop() as Key;\n\n    return {\n      key: this.key,\n      tokens: this.tokens,\n    };\n  }\n\n  /**\n   * Realizes the full keypath, attaching observers for every key and correcting\n   * old observers to any changed objects in the keypath.\n   */\n  public realize() {\n    let current: Obj = this.obj;\n    let unreached = -1;\n    let prev;\n    let token;\n\n    for (let index = 0; index < this.tokens.length; index++) {\n      token = this.tokens[index];\n      if (isObject(current)) {\n        if (typeof this.objectPath[index] !== \"undefined\") {\n          prev = this.objectPath[index];\n          if (current !== prev) {\n            Observer.set(false, token, prev, this);\n            Observer.set(true, token, current, this);\n            this.objectPath[index] = current;\n          }\n        } else {\n          Observer.set(true, token, current, this);\n          this.objectPath[index] = current;\n        }\n        current = Observer.get(token, current);\n      } else {\n        if (unreached === -1) {\n          unreached = index;\n        }\n        prev = this.objectPath[index];\n        if (prev) {\n          Observer.set(false, token, prev, this);\n        }\n      }\n    }\n    if (unreached !== -1) {\n      this.objectPath.splice(unreached);\n    }\n    return current;\n  }\n\n  /**\n   * Updates the keypath. This is called when any intermediary key is changed.\n   */\n  public sync() {\n    let oldValue;\n    let newValue;\n    const next = this.realize();\n    if (next !== this.target) {\n      if (isObject(this.target)) {\n        Observer.set(false, this.key, this.target, this.callback);\n      }\n\n      if (isObject(next)) {\n        Observer.set(true, this.key, next, this.callback);\n      }\n\n      oldValue = this.value();\n      this.target = next;\n      newValue = this.value();\n      if (newValue !== oldValue || Array.isArray(newValue)) {\n        this.callback.sync();\n      }\n    } else if (Array.isArray(next)) {\n      this.callback.sync();\n    }\n  }\n\n  /**\n   * Reads the current end value of the observed keypath. Returns undefined if\n   * the full keypath is unreachable.\n   */\n  public value() {\n    if (isObject(this.target)) {\n      return Observer.get(this.key, this.target);\n    }\n  }\n\n  /**\n   * Sets the current end value of the observed keypath. Calling setValue when\n   *  the full keypath is unreachable is a no-op.\n   * @param value\n   */\n  public setValue(value: any) {\n    if (isObject(this.target)) {\n      Observer.adapters[this.key.i].set(this.target, this.key.path, value);\n    }\n  }\n\n  /**\n   * Unobserve the entire keypath.\n   */\n  public unobserve() {\n    let obj: Obj;\n    let token;\n\n    for (let index = 0; index < this.tokens.length; index++) {\n      token = this.tokens[index];\n      obj = this.objectPath[index];\n      if (obj) {\n        Observer.set(false, token, obj, this);\n      }\n    }\n\n    if (isObject(this.target)) {\n      Observer.set(false, this.key, this.target, this.callback);\n    }\n  }\n\n  /**\n   * traverse the scope chain to find the scope which has the root property\n   * if the property is not found in chain, returns the root scope\n   * @param obj\n   */\n  public getRootObject(obj: Obj) {\n    let rootProp;\n    let current;\n    if (!obj.$parent) {\n      return obj;\n    }\n\n    if (this.tokens.length) {\n      rootProp = this.tokens[0].path;\n    } else {\n      rootProp = this.key.path;\n    }\n\n    current = obj;\n    while (current.$parent && current[rootProp] === undefined) {\n      current = current.$parent;\n    }\n    return current;\n  }\n}\n","import {\n  Adapter,\n  Adapters,\n  ModuleElementType,\n  AnyConstructor,\n} from \"../types/index.js\";\nimport { ModuleElementService } from \"./module-element.service.js\";\nimport { Observer } from \"../observer.js\";\n\nexport class AdapterService\n  extends ModuleElementService\n  implements AnyConstructor\n{\n  protected type: ModuleElementType = \"adapter\";\n\n  /**\n   *\n   */\n  constructor(adapters: Adapters) {\n    super(adapters);\n  }\n\n  /**\n   * Regist a adapter with his name\n   */\n  public register(\n    adapter: Adapter,\n    fallbackName?: string,\n    forceFallback = false\n  ): Adapters {\n    const name = forceFallback\n      ? fallbackName || adapter.name\n      : adapter.name || fallbackName;\n    if (!name) {\n      throw new Error(\"Adapter name not found!\");\n    }\n    this.elements[name] = adapter;\n    const options = { adapters: this.elements as any as Adapters };\n    Observer.updateOptions(options);\n    return this.elements;\n  }\n}\n","import { Binders, ModuleElementType, ClassOfBinder } from \"../types/index.js\";\nimport { ModuleElementService } from \"./module-element.service.js\";\n\n/**\n *\n */\nexport class BindersService extends ModuleElementService<ClassOfBinder> {\n  protected type: ModuleElementType = \"binder\";\n\n  /**\n   *\n   * @param binders;\n   */\n  constructor(binders: Binders) {\n    super(binders);\n  }\n\n  /**\n   * Regist a binder\n   */\n  public register(\n    Binder: ClassOfBinder,\n    fallbackName?: string,\n    forceFallback = false\n  ) {\n    if (!Binder) {\n      throw new Error(\"No Binder passed to register!\");\n    }\n\n    const name = forceFallback\n      ? fallbackName || Binder.key\n      : Binder.key || fallbackName;\n\n    if (!name) {\n      throw new Error(\"Binder name not found!\");\n    }\n\n    this.elements[name] = Binder;\n    return this.elements;\n  }\n}\n","class EventDispatcher {\n    static instances = {};\n    static getNamespaces() {\n        return Object.keys(this.instances);\n    }\n    static getInstance(namespace = \"main\") {\n        const result = EventDispatcher.instances[namespace];\n        if (!result) {\n            return new this(namespace);\n        }\n        return result;\n    }\n    static getAllInstances() {\n        return EventDispatcher.instances;\n    }\n    static clearInstance(namespace = \"main\") {\n        const instance = EventDispatcher.instances[namespace];\n        instance.events = {};\n        instance.eventsOnce = {};\n        return instance;\n    }\n    static deleteInstance(namespace = \"main\") {\n        this.clearInstance(namespace);\n        delete this.instances[namespace];\n    }\n    static clearAllInstances() {\n        const namespaces = this.getNamespaces();\n        for (const namespace of namespaces) {\n            this.clearInstance(namespace);\n        }\n    }\n    static deleteAllInstances() {\n        this.clearAllInstances();\n        this.instances = {};\n    }\n    events = {};\n    eventsOnce = {};\n    _namespace = \"anonymous\";\n    get namespace() {\n        return this._namespace;\n    }\n    constructor(namespace) {\n        if (namespace) {\n            if (EventDispatcher.instances[namespace]) {\n                return EventDispatcher.instances[namespace];\n            }\n            this._namespace = namespace;\n            EventDispatcher.instances[namespace] = this;\n            return EventDispatcher.instances[namespace];\n        }\n    }\n    once(eventName, cb, thisContext) {\n        this.eventsOnce[eventName] = this.eventsOnce[eventName] || [];\n        if (typeof thisContext !== \"undefined\") {\n            this.eventsOnce[eventName].push({\n                cb: cb.bind(thisContext),\n                orgCb: cb,\n                thisContext,\n            });\n        }\n        else {\n            this.eventsOnce[eventName].push(cb);\n        }\n        return this;\n    }\n    on(eventName, cb, thisContext) {\n        this.events[eventName] = this.events[eventName] || [];\n        if (typeof thisContext !== \"undefined\") {\n            this.events[eventName].push({\n                cb: cb.bind(thisContext),\n                orgCb: cb,\n                thisContext,\n            });\n        }\n        else {\n            this.events[eventName].push(cb);\n        }\n        return this;\n    }\n    off(eventName, cb, thisContext) {\n        if (eventName === undefined) {\n            this.events = {};\n            this.eventsOnce = {};\n            return this;\n        }\n        if (cb !== undefined) {\n            if (thisContext !== undefined) {\n                if (eventName in this.events) {\n                    for (const [i, event] of this.events[eventName].entries()) {\n                        const curEvent = event;\n                        if (curEvent.orgCb === cb && curEvent.thisContext === thisContext) {\n                            this.events[eventName].splice(i, 1);\n                        }\n                    }\n                }\n                if (eventName in this.eventsOnce) {\n                    for (const [i, event] of this.eventsOnce[eventName].entries()) {\n                        const curEvent = event;\n                        if (curEvent.orgCb === cb && curEvent.thisContext === thisContext) {\n                            this.eventsOnce[eventName].splice(i, 1);\n                        }\n                    }\n                }\n            }\n            else {\n                if (eventName in this.events) {\n                    for (const [i, event] of this.events[eventName].entries()) {\n                        const curEvent = event;\n                        if (curEvent === cb) {\n                            this.events[eventName].splice(i, 1);\n                        }\n                    }\n                }\n                if (eventName in this.eventsOnce) {\n                    for (const [i, event] of this.eventsOnce[eventName].entries()) {\n                        const curEvent = event;\n                        if (curEvent === cb) {\n                            this.eventsOnce[eventName].splice(i, 1);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            this.events[eventName] = [];\n            this.eventsOnce[eventName] = [];\n        }\n        return this;\n    }\n    trigger(eventName, ...args) {\n        if (eventName in this.events) {\n            for (const event of this.events[eventName]) {\n                if (event?.cb) {\n                    event.cb(...args);\n                }\n                else {\n                    event(...args);\n                }\n            }\n        }\n        if (eventName in this.eventsOnce) {\n            for (const [i, event] of this.eventsOnce[eventName].entries()) {\n                if (event?.cb) {\n                    event.cb(...args);\n                    this.eventsOnce[eventName].splice(i, 1);\n                }\n                else {\n                    event(...args);\n                    this.eventsOnce[eventName].splice(i, 1);\n                }\n            }\n        }\n        return this;\n    }\n}\nexport { EventDispatcher };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnQtZGlzcGF0Y2hlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NlcnZpY2VzL2V2ZW50LWRpc3BhdGNoZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFZQSxNQUFhLGVBQWU7SUFDaEIsTUFBTSxDQUFDLFNBQVMsR0FBNkIsRUFBRSxDQUFDO0lBRW5ELE1BQU0sQ0FBQyxhQUFhO1FBQ3pCLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHLE1BQU07UUFDMUMsTUFBTSxNQUFNLEdBQUcsZUFBZSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNwRCxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ1gsT0FBTyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUM1QjtRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFTSxNQUFNLENBQUMsZUFBZTtRQUMzQixPQUFPLGVBQWUsQ0FBQyxTQUFTLENBQUM7SUFDbkMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBUyxHQUFHLE1BQU07UUFDNUMsTUFBTSxRQUFRLEdBQUcsZUFBZSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN0RCxRQUFRLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNyQixRQUFRLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUN6QixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBRU0sTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEdBQUcsTUFBTTtRQUM3QyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRU0sTUFB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","import { CoreModuleOptions } from \"../types/index.js\";\n\nexport class CoreService {\n  protected static _options: CoreModuleOptions = {};\n  protected static instance?: CoreService;\n\n  public static get options() {\n    return this._options;\n  }\n\n  protected constructor() {\n    /**/\n  }\n\n  public static getSingleton() {\n    if (this.instance) {\n      return this.instance;\n    }\n\n    throw new Error(\n      `Singleton of CoreService not defined, please call setSingleton first!`\n    );\n  }\n\n  public static setSingleton(options: CoreModuleOptions = {}) {\n    if (this.instance) {\n      throw new Error(`Singleton of CoreService already defined!`);\n    }\n    this._options = options;\n    this.instance = new this();\n    return this.instance;\n  }\n\n  public static hasInstance() {\n    return !!this.instance;\n  }\n}\n","import { EventDispatcher } from \"@ribajs/events\";\nimport { CoreService } from \"./core.service.js\";\nimport type { State } from \"@ribajs/history\";\nimport type {\n  ComponentLifecycleEventData,\n  ComponentLifecycleObject,\n  ComponentLifecycleStates,\n} from \"../types/index.js\";\n\n/**\n * Component lifecycle control service.\n * Useful to check if all current components are bound and ready.\n */\nexport class LifecycleService {\n  public events = EventDispatcher.getInstance(\"lifecycle\");\n  protected debug = false;\n  protected routerEvents = EventDispatcher.getInstance();\n  protected timeout: number | null = null;\n  protected allBound = false;\n  protected static instance: LifecycleService;\n\n  protected components: {\n    [name: string]: ComponentLifecycleObject;\n  } = {};\n\n  protected constructor() {\n    this.addEventListeners();\n    this.reset();\n    LifecycleService.instance = this;\n  }\n\n  public static getInstance() {\n    if (LifecycleService.instance) {\n      return LifecycleService.instance;\n    }\n    LifecycleService.instance = new LifecycleService();\n    return LifecycleService.instance;\n  }\n\n  protected getEmpty(): ComponentLifecycleObject {\n    return {\n      components: [],\n    };\n  }\n\n  protected addEventListeners() {\n    this.events.on(\n      \"Component:connected\",\n      (data: ComponentLifecycleEventData) => {\n        if (data.options.ignore) {\n          return;\n        }\n        this.resetTimeout();\n\n        this.components[data.tagName] =\n          this.components[data.tagName] || this.getEmpty();\n        this.components[data.tagName].components.push(data.component);\n      }\n    );\n\n    this.events.on(\n      \"Component:disconnected\",\n      (data: ComponentLifecycleEventData) => {\n        if (data.options.ignore) {\n          return;\n        }\n        this.resetTimeout();\n        this.checkStates();\n      }\n    );\n\n    this.events.on(\n      \"Component:afterBind\",\n      (data: ComponentLifecycleEventData) => {\n        if (data.options.ignore) {\n          return;\n        }\n        this.resetTimeout();\n        this.checkStates();\n      }\n    );\n\n    this.events.on(\n      \"Component:error\",\n      (error: Error, data: ComponentLifecycleEventData) => {\n        this.onError(error, data);\n      }\n    );\n\n    // Router\n\n    this.routerEvents.on(\n      \"newPageReady\",\n      (\n        viewId: string,\n        newStatus: State,\n        oldStatus: State,\n        container: HTMLElement,\n        containerHtml: string,\n        dataset: any,\n        firstPageLoad: boolean\n      ) => {\n        if (this.debug)\n          console.debug(\n            \"newPageReady\",\n            viewId,\n            newStatus,\n            oldStatus,\n            \"firstPageLoad\",\n            firstPageLoad\n          );\n        if (!firstPageLoad) {\n          this.reset();\n        }\n      }\n    );\n  }\n\n  protected getState(tagName: string) {\n    let connected = 0;\n    let bound = 0;\n\n    for (const component of this.components[tagName].components) {\n      if (component.connected) {\n        connected++;\n\n        if (component.bound) {\n          bound++;\n        }\n      }\n    }\n\n    return {\n      connected,\n      bound,\n    };\n  }\n\n  protected getStates() {\n    const states: {\n      [tagName: string]: ComponentLifecycleStates;\n    } = {};\n\n    for (const tagName in this.components) {\n      const state = this.getState(tagName);\n\n      states[tagName] = {\n        state,\n        components: this.components[tagName].components,\n      };\n    }\n\n    return states;\n  }\n\n  protected checkStates() {\n    let allBound = true;\n    const states = this.getStates();\n    for (const tagName in states) {\n      const state = states[tagName].state;\n      if (state.connected !== state.bound) {\n        allBound = false;\n        break;\n      }\n    }\n    if (allBound && !this.allBound) {\n      this.onAllBound();\n    }\n    this.allBound = allBound;\n    return {\n      states,\n      allBound,\n    };\n  }\n\n  protected onAllBound() {\n    this.clearTimeout();\n    this.events.trigger(\"ComponentLifecycle:allBound\", this.components);\n    if (this.debug) console.debug(\"[ComponentLifecycle] All components bound!\");\n  }\n\n  protected onError(error: Error, data: ComponentLifecycleEventData) {\n    this.clearTimeout();\n    console.error(\n      `The component \"${data.tagName}\" has caused an error:`,\n      error\n    );\n    this.events.trigger(\"ComponentLifecycle:error\", error, data);\n  }\n\n  protected onTimeout() {\n    this.clearTimeout();\n    const states = this.getStates();\n\n    let errorMessage =\n      \"[ComponentLifecycle] Timeout! {count} component(s) takes too long!\\nUnfinished components:\\n\";\n    let count = 0;\n    for (const tagName in states) {\n      const state = states[tagName].state;\n      if (state.connected !== state.bound) {\n        count++;\n        errorMessage += `${tagName}: connected: ${states[tagName].state.connected}, bound: ${states[tagName].state.bound}\\n`;\n      }\n    }\n\n    if (count <= 0) {\n      console.warn(\"No component found\");\n      this.events.trigger(\"ComponentLifecycle:noComponents\");\n      return;\n    }\n\n    errorMessage = errorMessage.replace(\"{count}\", count.toString());\n    this.events.trigger(\n      \"ComponentLifecycle:error\",\n      new Error(errorMessage),\n      {}\n    );\n  }\n\n  protected clearTimeout() {\n    if (this.timeout) {\n      window.clearTimeout(this.timeout);\n    }\n  }\n\n  protected resetTimeout() {\n    if (this.debug) console.debug(\"[ComponentLifecycle] reset timeout..\");\n    this.clearTimeout();\n    this.timeout = window.setTimeout(\n      this.onTimeout.bind(this),\n      CoreService.options.lifecycle?.timeout || 5000\n    );\n    return this.timeout;\n  }\n\n  protected reset() {\n    if (this.debug) console.debug(\"[ComponentLifecycle] reset!\");\n    this.allBound = false;\n    this.components = {};\n    this.resetTimeout();\n  }\n}\n","import { Components, ModuleElementType } from \"../types/index.js\";\nimport { Component } from \"../component/index.js\";\nimport { ModuleElementService } from \"./module-element.service.js\";\n\nexport class ComponentService extends ModuleElementService {\n  protected type: ModuleElementType = \"components\";\n\n  /**\n   *\n   * @param components\n   */\n  constructor(components: Components) {\n    super(components);\n  }\n\n  /**\n   * Regist a component with his name\n   */\n  public register(\n    component: typeof Component,\n    fallbackName?: string,\n    forceFallback = false\n  ): Components {\n    const name = forceFallback\n      ? fallbackName || component.tagName\n      : component.tagName || fallbackName;\n\n    if (!name) {\n      console.warn(new Error(\"Component name not found!\"), component);\n      return this.elements;\n    }\n\n    this.elements[name] = component;\n    return this.elements;\n  }\n}\n","import { Formatter, Formatters } from \"../types/index.js\";\nimport { ModuleElementService } from \"./module-element.service.js\";\n\nexport class FormatterService extends ModuleElementService {\n  protected type: \"binder\" | \"formatter\" | \"components\" | \"services\" =\n    \"formatter\";\n\n  /**\n   *\n   */\n  constructor(formatters: Formatters) {\n    super(formatters);\n  }\n\n  /**\n   * Regist a formatter with his name\n   */\n  public register(\n    formatter: Formatter,\n    fallbackName?: string,\n    forceFallback = false\n  ): Formatters {\n    const name = forceFallback\n      ? fallbackName || formatter.name\n      : formatter.name || fallbackName;\n\n    if (!name) {\n      throw new Error(\"Formatter name not found!\");\n    }\n\n    this.elements[name] = formatter;\n    return this.elements;\n  }\n}\n","import { extend, isJson } from \"@ribajs/utils/src/type.js\";\nimport { HttpMethod } from \"../types/http-method.js\";\nimport { HttpServiceOptions, HttpServiceResponse } from \"../types/index.js\";\n\nexport class HttpService {\n  /**\n   * Set header for each request\n   * @param name Header name\n   * @param value Header value\n   */\n  public static setRequestHeaderEachRequest(name: string, value: string) {\n    this._requestHeadersEachRequest.push({\n      name,\n      value,\n    });\n  }\n\n  /**\n   * Load JSON-encoded data from the server using a GET HTTP request.\n   * @param url A string containing the URL to which the request is sent.\n   * @param data A plain object or string that is sent to the server with the request.\n   * @see https://api.jquery.com/jquery.getjson/\n   */\n  public static async getJSON<T = any>(\n    url: string,\n    data?: any,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"GET\", data, \"json\", headers, options);\n  }\n\n  /**\n   * Load data from the server using a HTTP POST request.\n   * @param url A string containing the URL to which the request is sent.\n   * @param data A plain object or string that is sent to the server with the request.\n   * @param dataType The type of data expected from the server. Default: Intelligent Guess (xml, json, script, text, html).\n   * @see https://api.jquery.com/jquery.post/\n   */\n  public static async post<T = any>(\n    url: string,\n    data?: any,\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"POST\", data, dataType, headers, options);\n  }\n\n  public static async delete<T = any>(\n    url: string,\n    data?: any,\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"DELETE\", data, dataType, headers, options);\n  }\n\n  public static async put<T = any>(\n    url: string,\n    data?: any,\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"PUT\", data, dataType, headers, options);\n  }\n\n  /**\n   * Load data from the server using a HTTP GET request.\n   * @param url A string containing the URL to which the request is sent.\n   * @param data A plain object or string that is sent to the server with the request.\n   * @param dataType The type of data expected from the server. Default: Intelligent Guess (xml, json, script, text, html).\n   * @see https://api.jquery.com/jquery.get/\n   */\n  public static async get<T = any>(\n    url: string,\n    data?: any,\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"GET\", data, dataType, headers, options);\n  }\n\n  /**\n   *\n   * @param dataType The type of data expected from the server. Default: Intelligent Guess (xml, json, script, text, html).\n   */\n  public static parseDataType(dataType: string) {\n    const headers: { \"Content-Type\"?: string; Accept?: string } = {};\n    let contentType = \"application/x-www-form-urlencoded\";\n    let accept = \"*/*\";\n    switch (dataType) {\n      case \"script\":\n        contentType = \"application/javascript\";\n        break;\n      case \"json\":\n        contentType = \"application/json\";\n        accept = \"application/json, text/javascript\";\n        break;\n      case \"xml\":\n        contentType = \"application/xml\";\n        accept = \"application/xml, text/xml\";\n        break;\n      case \"text\":\n        contentType = \"text/plain\";\n        accept = \"text/plain\";\n        break;\n      case \"html\":\n        contentType = \"text/html\";\n        accept = \"text/html\";\n        break;\n      case \"form\":\n        contentType = \"application/x-www-form-urlencoded\";\n        break;\n      // case \"multi-form\":\n      //   contentType = \"multipart/form-data\";\n      //   break;\n    }\n    if (contentType) {\n      headers[\"Content-Type\"] = contentType;\n      // tslint:disable-next-line:no-string-literal\n      headers[\"Accept\"] = accept;\n    }\n    return headers;\n  }\n\n  public static async fetch<T = any>(\n    url: string,\n    method: HttpMethod = \"GET\",\n    data: any = {},\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ): Promise<HttpServiceResponse<T>> {\n    if (!fetch) {\n      throw new Error(\n        \"Your browser does not support the fetch API, use xhr instead or install a polyfill.\"\n      );\n    }\n\n    let body;\n    // headers\n    for (const header of this._requestHeadersEachRequest) {\n      headers[header.name] = header.value;\n    }\n\n    if (dataType) {\n      headers = extend({ deep: false }, headers, this.parseDataType(dataType));\n    }\n\n    if (!options.crossDomain && !headers[\"X-Requested-With\"]) {\n      headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n    }\n\n    const cache = options.cache ? options.cache : \"default\";\n\n    if (method === \"GET\" && data) {\n      const queryStr = new URLSearchParams(data).toString();\n      if (queryStr) {\n        const separator = url.includes(\"?\") ? \"&\" : \"?\";\n        url = url + separator + new URLSearchParams(data).toString();\n      }\n    } else if (data) {\n      if (dataType === \"form\") {\n        body = new URLSearchParams(data);\n      } else {\n        body = JSON.stringify(data);\n      }\n    }\n    const response = await fetch(url, {\n      credentials: \"same-origin\",\n      cache,\n      method,\n      body,\n      headers,\n      mode: options.mode || \"cors\",\n    });\n\n    let bodyResult = (await response.text()) as unknown as T;\n    if (typeof bodyResult === \"string\" && isJson(bodyResult)) {\n      bodyResult = JSON.parse(bodyResult);\n    }\n\n    if (typeof bodyResult === \"string\") {\n      switch (bodyResult) {\n        case \"null\":\n          bodyResult = null as unknown as T;\n          break;\n        case \"true\":\n          bodyResult = true as unknown as T;\n          break;\n        case \"false\":\n          bodyResult = false as unknown as T;\n          break;\n        case \"undefined\":\n          bodyResult = undefined as unknown as T;\n          break;\n      }\n    }\n\n    const result: HttpServiceResponse<T> = {\n      status: response.status,\n      headers: response.headers,\n      ok: response.ok,\n      redirected: response.redirected,\n      statusText: response.statusText,\n      // trailer: response.trailer,\n      type: response.type,\n      url: response.url,\n      arrayBuffer: response.arrayBuffer,\n      blob: response.blob,\n      bodyUsed: response.bodyUsed,\n      clone: response.clone,\n      formData: response.formData,\n      text: response.text,\n      body: bodyResult,\n    };\n    return result;\n  }\n\n  /**\n   * Header name value pair to send on each request\n   */\n  protected static _requestHeadersEachRequest: {\n    name: string;\n    value: string;\n  }[] = [];\n}\n","import {\n  Adapter,\n  AdapterFunction,\n  Ref,\n  ObserverSyncCallback,\n  RVArray,\n} from \"../types/index.js\";\n\nexport class DotAdapter implements Adapter {\n  public static ARRAY_METHODS = [\n    \"push\",\n    \"pop\",\n    \"shift\",\n    \"unshift\",\n    \"sort\",\n    \"reverse\",\n    \"splice\",\n  ];\n\n  public name = \".\";\n\n  public counter = 0;\n  public weakmap: any = {};\n\n  public weakReference(obj: any) {\n    if (!Object.hasOwnProperty.bind(obj)(\"__rv\")) {\n      const id = this.counter++;\n\n      Object.defineProperty(obj, \"__rv\", {\n        value: id,\n      });\n    }\n\n    if (!this.weakmap[obj.__rv]) {\n      this.weakmap[obj.__rv] = {\n        callbacks: {},\n      };\n    }\n\n    return this.weakmap[obj.__rv];\n  }\n\n  public cleanupWeakReference(ref: Ref, id: number) {\n    if (!Object.keys(ref.callbacks).length) {\n      if (!(ref.pointers && Object.keys(ref.pointers).length)) {\n        delete this.weakmap[id];\n      }\n    }\n  }\n\n  public stubFunction(obj: any, fn: string) {\n    const original = obj[fn];\n    const map = this.weakReference(obj);\n    const weakmap = this.weakmap;\n\n    obj[fn] = (...args: any[]): AdapterFunction => {\n      const response = original.apply(obj, args);\n\n      Object.keys(map.pointers).forEach((r) => {\n        const k = map.pointers[r];\n\n        if (weakmap[r]) {\n          if (Array.isArray(weakmap[r].callbacks[k])) {\n            weakmap[r].callbacks[k].forEach(\n              (callback: ObserverSyncCallback) => {\n                callback.sync();\n              }\n            );\n          }\n        }\n      });\n\n      return response;\n    };\n  }\n\n  public observeMutations(obj: any, ref: string, keypath: string) {\n    if (Array.isArray(obj)) {\n      const map = this.weakReference(obj);\n\n      if (!map.pointers) {\n        map.pointers = {};\n\n        DotAdapter.ARRAY_METHODS.forEach((fn) => {\n          this.stubFunction(obj, fn);\n        });\n      }\n\n      if (!map.pointers[ref]) {\n        map.pointers[ref] = [];\n      }\n\n      if (map.pointers[ref].indexOf(keypath) === -1) {\n        map.pointers[ref].push(keypath);\n      }\n    }\n  }\n\n  public unobserveMutations(obj: RVArray, ref: string, keypath: string) {\n    if (Array.isArray(obj) && obj.__rv != null) {\n      const map = this.weakmap[obj.__rv];\n\n      if (map) {\n        const pointers = map.pointers[ref];\n\n        if (pointers) {\n          const idx = pointers.indexOf(keypath);\n\n          if (idx > -1) {\n            pointers.splice(idx, 1);\n          }\n\n          if (!pointers.length) {\n            delete map.pointers[ref];\n          }\n\n          this.cleanupWeakReference(map, obj.__rv);\n        }\n      }\n    }\n  }\n\n  public observe(obj: any, keypath: string, callback: ObserverSyncCallback) {\n    let value: any;\n\n    const callbacks = this.weakReference(obj).callbacks;\n\n    if (!callbacks[keypath]) {\n      callbacks[keypath] = [];\n      const desc = Object.getOwnPropertyDescriptor(obj, keypath);\n\n      if (!desc || !(desc.get || desc.set || !desc.configurable)) {\n        value = obj[keypath];\n\n        Object.defineProperty(obj, keypath, {\n          enumerable: true,\n\n          get: () => {\n            return value;\n          },\n\n          set: (newValue) => {\n            if (newValue !== value) {\n              this.unobserveMutations(value, obj.__rv, keypath);\n              value = newValue;\n              const map = this.weakmap[obj.__rv];\n\n              if (map) {\n                const _callbacks = map.callbacks[keypath];\n\n                if (_callbacks) {\n                  _callbacks.forEach((cb: ObserverSyncCallback) => {\n                    cb.sync();\n                  });\n                }\n\n                this.observeMutations(newValue, obj.__rv, keypath);\n              }\n            }\n          },\n        });\n      }\n    }\n\n    if (callbacks[keypath].indexOf(callback) === -1) {\n      callbacks[keypath].push(callback);\n    }\n\n    this.observeMutations(obj[keypath], obj.__rv, keypath);\n  }\n\n  public unobserve(obj: any, keypath: string, callback: ObserverSyncCallback) {\n    const map = this.weakmap[obj.__rv];\n\n    if (map) {\n      const callbacks = map.callbacks[keypath];\n\n      if (callbacks) {\n        const idx = callbacks.indexOf(callback);\n\n        if (idx > -1) {\n          callbacks.splice(idx, 1);\n\n          if (!callbacks.length) {\n            delete map.callbacks[keypath];\n            this.unobserveMutations(obj[keypath], obj.__rv, keypath);\n          }\n        }\n\n        this.cleanupWeakReference(map, obj.__rv);\n      }\n    }\n  }\n\n  public get(obj: any, keypath: string) {\n    return obj[keypath];\n  }\n\n  public set(obj: any, keypath: string, value: any) {\n    obj[keypath] = value;\n  }\n}\n\nconst dotAdapter = new DotAdapter();\nexport { dotAdapter };\n","export const FORMATTER_ARGS = /[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g;\nexport const FORMATTER_SPLIT = /\\s+/;\n","import { parseType, PRIMITIVE, KEYPATH } from \"@ribajs/utils\";\nimport { Observer } from \"./observer.js\";\nimport type {\n  FormatterObservers,\n  eventHandlerFunction,\n  ObserverSyncCallback,\n  Bindable,\n} from \"./types/index.js\";\nimport { FORMATTER_ARGS, FORMATTER_SPLIT } from \"./constants/formatter.js\";\nimport type { View } from \"./view.js\";\nimport { getInputValue } from \"@ribajs/utils/src/dom.js\";\n\n/**\n * A single binding between a model attribute and a DOM element.\n */\nexport abstract class Binder<T = any, E = HTMLUnknownElement> implements Bindable<E> {\n  /**\n   * The name of the binder to access the binder by\n   */\n  static key = \"\";\n\n  /**\n   * Blocks the current node and child nodes from being parsed (used for iteration binding as well as the if/unless binders).\n   */\n  static block = false;\n\n  /**\n   * Key of the Binder\n   */\n  name: string;\n\n  /**\n   * Set this to true if you want view.publish() to call publish on these bindings.\n   */\n  publishes = false;\n  /**\n   * Priority of the binder, binders with higher priority are applied first\n   */\n  priority = 0;\n\n  /**\n   * The routine function is called when an observed attribute on the model changes and is used to update the DOM. When defining a one-way binder as a single function, it is actually the routine function that you're defining.\n   */\n  abstract routine(element: E, value: T): void;\n\n  /**\n   * This function will get called for this binding on the initial `view.bind()`. Use it to store some initial state on the binding, or to set up any event listeners on the element.\n   */\n  bind?(element: E): void;\n\n  /**\n   * This function will get called for this binding on `view.unbind()`. Use it to reset any state on the element that would have been changed from the routine getting called, or to unbind any event listeners on the element that you've set up in the `binder.bind` function.\n   */\n  unbind?(element: E): void;\n\n  /**\n   * Updates the binding's model from what is currently set on the view.\n   * Unbinds the old model first and then re-binds with the new model.\n   */\n  update?(model: any): void;\n\n  /**\n   * The getValue function is called when the binder wants to set the value on the model. This function takes the HTML element as only parameter\n   */\n  getValue?(element: E): void;\n\n  public value?: any;\n  public observer?: Observer;\n  public view: View;\n  public el: E;\n\n  /**\n   * Name of the binder without the prefix\n   */\n  public type: string | null;\n  public formatters: string[] | null;\n  public formatterObservers: FormatterObservers = {};\n  public keypath?: string;\n\n  /**\n   * Arguments parsed from star binders, e.g. on `foo-*-*` `args[0]` is the first star and `args[1]` the second\n   */\n  public args: Array<string | number>;\n\n  /**\n   *\n   */\n  public model?: any;\n\n  /**\n   * HTML Comment to mark a binding in the DOM\n   */\n  public marker?: Comment;\n\n  /**\n   * All information about the binding is passed into the constructor; the\n   * containing view, the DOM node, the type of binding, the model object and the\n   * keypath at which to listen for changes.\n   * @param view\n   * @param el\n   * @param type\n   * @param name\n   * @param keypath\n   * @param formatters\n   * @param identifier\n   */\n  constructor(\n    view: View,\n    el: E,\n    type: string | null,\n    name: string,\n    keypath: string | undefined,\n    formatters: string[] | null,\n    identifier: string | null\n  ) {\n    this.view = view;\n    this.el = el;\n    this.type = type;\n    this.name = name;\n    this.keypath = keypath;\n    this.formatters = formatters;\n    this.model = undefined;\n\n    if (identifier && type) {\n      this.args = this.getStarArguments(identifier, type);\n    } else {\n      this.args = new Array<string | number>();\n    }\n  }\n\n  /**\n   * Observes the model keypath\n   * @param model\n   * @param keypath\n   */\n  public observe(\n    model: any,\n    keypath: string,\n    callback: ObserverSyncCallback\n  ): Observer {\n    return new Observer(model, keypath, callback);\n  }\n\n  public parseTarget() {\n    if (this.keypath) {\n      const token = parseType(this.keypath, true);\n      if (token.type === PRIMITIVE) {\n        this.value = token.value;\n      } else if (token.type === KEYPATH) {\n        this.observer = this.observe(this.view.models, this.keypath, this);\n        this.model = this.observer.target;\n      } else {\n        throw new Error(`[${this.name}] Unknown type in token`);\n      }\n    } else {\n      this.value = undefined;\n    }\n  }\n\n  /**\n   * Get the iteration alias, used in the interaction binders like `each-*`\n   * @param {*} modelName\n   * @see https://github.com/mikeric/rivets/blob/master/dist/rivets.js#L26\n   * @see https://github.com/mikeric/rivets/blob/master/dist/rivets.js#L1175\n   */\n  public getIterationAlias(modelName: string) {\n    return \"%\" + modelName + \"%\";\n  }\n\n  public parseFormatterArguments(\n    args: string[],\n    formatterIndex: number\n  ): string[] {\n    return args\n      .map((arg) => parseType(arg, true))\n      .map(({ type, value }, ai) => {\n        if (type === PRIMITIVE) {\n          const primitiveValue = value;\n          return primitiveValue;\n        } else if (type === KEYPATH) {\n          // keypath is string\n          const keypath = value as string;\n          if (!this.formatterObservers[formatterIndex]) {\n            this.formatterObservers[formatterIndex] = {};\n          }\n\n          let observer = this.formatterObservers[formatterIndex][ai];\n\n          if (!observer) {\n            observer = this.observe(this.view.models, keypath, this);\n            this.formatterObservers[formatterIndex][ai] = observer;\n          }\n          return observer.value();\n        } else {\n          throw new Error(`[${this.name}] Unknown argument type`);\n        }\n      });\n  }\n\n  /**\n   * Applies all the current formatters to the supplied value and returns the\n   * formatted value.\n   */\n  public formattedValue(value: any, startIndex = 0): any {\n    if (this.formatters === null) {\n      throw new Error(`[${this.name} formatters is null`);\n    }\n\n    // If any intermediate result is a promise continue the chain (with startIndex set) after it is resolved.\n    let promised = false;\n    const formatters = startIndex\n      ? this.formatters.slice(startIndex)\n      : this.formatters;\n\n    return formatters.reduce(\n      (result: any, declaration: string, index: number) => {\n        if (promised) {\n          return result;\n        }\n\n        const args = declaration.match(FORMATTER_ARGS);\n        if (args === null) {\n          console.warn(\n            new Error(\n              `[${\n                this.name\n              }] No args matched with regex \"FORMATTER_ARGS\"!\\nvalue: ${JSON.stringify(\n                value\n              )}\\nresult: ${JSON.stringify(\n                result\n              )}\\ndeclaration: ${JSON.stringify(\n                declaration\n              )}\\nindex: ${index}\\n`\n            )\n          );\n          return result;\n        }\n        const id = args.shift();\n\n        if (!id) {\n          throw new Error(`[${this.name}] No formatter id found in args!`);\n        }\n\n        if (!this.view.options.formatters) {\n          throw new Error(`[${this.name}] No formatters are defined!`);\n        }\n\n        const formatter = this.view.options.formatters[id];\n\n        if (!formatter) {\n          throw new Error(\n            `[${this.name}] No formatters with id \"${id}\" found!`\n          );\n        }\n\n        const processedArgs = this.parseFormatterArguments(args, index);\n\n        // get formatter read funcion\n        if (formatter && typeof formatter.read === \"function\") {\n          result = formatter.read.apply(this.model, [result, ...processedArgs]);\n        }\n\n        // If result is a promise, and this is not the last formatter in the chain\n        if (\n          index < formatters.length - 1 &&\n          result &&\n          typeof result.then === \"function\" &&\n          typeof result.catch === \"function\"\n        ) {\n          promised = true;\n          return result.then((value: any) =>\n            this.formattedValue(value, index + 1)\n          );\n        }\n        return result;\n      },\n      value\n    );\n  }\n\n  /**\n   * Returns an event handler for the binding around the supplied function.\n   * This event Handler is mainly used by the on-* binder\n   * @param fn The function to call by the handler\n   * @param el The element the event was triggered from\n   */\n  public eventHandler(\n    fn: eventHandlerFunction,\n    el: HTMLElement\n  ): (ev: Event) => any {\n    const handler = this.view.options.handler;\n    return (ev) => {\n      if (!handler) {\n        throw new Error(\"No handler defined in binding.view.options.handler\");\n      }\n      handler.call(fn, this, ev, this, el);\n    };\n  }\n\n  /**\n   * Sets the value for the binding. This Basically just runs the binding routine\n   * with the supplied value formatted.\n   */\n  public set(value: any) {\n    try {\n      value = this.formattedValue(value);\n    } catch (error) {\n      console.error(error);\n      return value;\n    }\n\n    if (typeof this.routine === \"function\") {\n      // If value is a promise\n      if (\n        value &&\n        typeof value.then === \"function\" &&\n        typeof value.catch === \"function\"\n      ) {\n        value\n          .then((realValue: any) => {\n            this.routine(this.el, realValue);\n          })\n          .catch((error: Error) => {\n            console.error(error);\n          });\n      } else {\n        this.routine(this.el, value);\n      }\n    }\n  }\n\n  /**\n   * Syncs up the view binding with the model.\n   */\n  public sync() {\n    if (this.observer) {\n      this.model = this.observer.target;\n      this.set(this.observer.value());\n    } else {\n      this.set(this.value);\n    }\n  }\n\n  /**\n   * Publishes the value currently set on the input element (or any other which implements getValue) back to the model.\n   * An example of the use of this method are the following binders:\n   * - ElementBinder\n   * - ValueBinder\n   * - (Un)CheckedBinder\n   */\n  public publish() {\n    if (this.observer) {\n      if (this.formatters === null) {\n        throw new Error(\"formatters is null\");\n      }\n\n      const value = this.formatters.reduceRight(\n        (\n          result: any /*check type*/,\n          declaration: string /*check type*/,\n          index: number\n        ) => {\n          const args = declaration.split(FORMATTER_SPLIT);\n          const id = args.shift();\n          if (!id) {\n            throw new Error(\"id not defined\");\n          }\n\n          if (!this.view.options.formatters) {\n            return undefined;\n          }\n\n          const formatter = this.view.options.formatters[id];\n          const processedArgs = this.parseFormatterArguments(args, index);\n\n          if (formatter && typeof formatter.publish === \"function\") {\n            result = formatter.publish(result, ...processedArgs);\n          }\n          return result;\n        },\n        this._getValue(this.el)\n      );\n\n      this.observer.setValue(value);\n    }\n  }\n\n  /**\n   * Subscribes to the model for changes at the specified keypath. Bi-directional\n   * routines will also listen for changes on the element to propagate them back\n   * to the model.\n   */\n  public _bind() {\n    this.parseTarget();\n\n    if (this.bind) {\n      if (typeof this.bind !== \"function\") {\n        throw new Error(\"the method bind is not a function\");\n      }\n      this.bind(this.el);\n    }\n\n    if (this.view.options.preloadData) {\n      this.sync();\n    }\n  }\n\n  /**\n   * Unsubscribes from the model and the element.\n   */\n  public _unbind() {\n    if (this.unbind) {\n      this.unbind(this.el);\n    }\n\n    if (this.observer) {\n      this.observer.unobserve();\n    }\n\n    Object.keys(this.formatterObservers).forEach((fi) => {\n      const args = this.formatterObservers[fi];\n\n      Object.keys(args).forEach((ai) => {\n        args[ai].unobserve();\n      });\n    });\n\n    this.formatterObservers = {};\n  }\n\n  /**\n   * Updates the binding's model from what is currently set on the view. Unbinds\n   * the old model first and then re-binds with the new model.\n   * @param {any} models\n   */\n  public _update(models: any = {}) {\n    if (this.observer) {\n      this.model = this.observer.target;\n    }\n    if (typeof this.update === \"function\") {\n      this.update(models);\n    }\n  }\n\n  /**\n   * Returns elements value\n   * @param el\n   */\n  public _getValue(el: E) {\n    if (typeof this.getValue === \"function\") {\n      return this.getValue(el);\n    } else {\n      return getInputValue(el as any);\n    }\n  }\n\n  protected getStarArguments(identifier: string, type: string): string[] {\n    const regexp = this.view.binderRegex(identifier);\n    const match = type.match(regexp)?.slice(1) || [];\n    return match;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * animate-{class}\n * Add / remove animation class with start and done affix\n */\nexport class AnimateStarBinder extends Binder<boolean, HTMLUnknownElement> {\n  static key = \"animate-*\";\n  function = true;\n  priority = 1000;\n\n  bind(el: HTMLUnknownElement) {\n    const animateClassName = (this as any).args[0];\n    el.classList.add(animateClassName);\n  }\n\n  routine(el: HTMLUnknownElement, start: boolean) {\n    const animateClassName = (this as any).args[0];\n    if (start) {\n      el.classList.add(animateClassName + \"-start\");\n      el.classList.remove(animateClassName + \"-done\");\n    } else {\n      el.classList.remove(animateClassName + \"-start\");\n      el.classList.add(animateClassName + \"-done\");\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * add-class\n * Adds the value of the attribute to the class.\n * Instead of `class-[classname]` the classname is defined by the\n * attribute value and not by the star value.\n * @example\n * <ul>\n *   <li rv-each-todo=\"todos\">\n *     <div rv-add-class=\"todo.state\"></div>\n *   </li>\n * <ul>\n */\nexport class AddClassBinder extends Binder<string, HTMLElement> {\n  static key = \"add-class\";\n  function = true;\n  priority = 1000;\n  private staticClasses?: string[];\n\n  bind(el: HTMLElement | SVGElement) {\n    // Note: We use el.getAttribute(\"class\") instead of el.className here to also support svg elements\n    const className = el.getAttribute(\"class\") || \"\";\n    this.staticClasses = className.split(\" \");\n  }\n\n  unbind() {\n    delete this.staticClasses;\n  }\n\n  routine(el: HTMLElement, newValue: string) {\n    if (newValue) {\n      if (this.staticClasses?.indexOf(newValue) === -1) {\n        el.setAttribute(\"class\", this.staticClasses.join(\" \") + \" \" + newValue);\n      }\n    } else {\n      if (this.staticClasses) {\n        el.setAttribute(\"class\", this.staticClasses.join(\" \"));\n      }\n    }\n    const className = el.getAttribute(\"class\");\n    if (className) {\n      el.setAttribute(\"class\", className.trim());\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { camelCase } from \"@ribajs/utils/src/type.js\";\n\n/**\n * assign-*\n * Assign a value in your model.\n * Sets or overwrites a value by his property name (named whatever value is in place of [property]) in your model.\n * @example\n * <div rv-assign-new='\"hello\"'>{new}</div>\n */\nexport class AssignPropertyBinder extends Binder<any, HTMLUnknownElement> {\n  static key = \"assign-*\";\n  routine(el: HTMLUnknownElement, value: any) {\n    const propertyName = camelCase((this.args[0] as string).trim());\n    const obj: any = {};\n    obj[propertyName] = value;\n    this.view.models[propertyName] = value;\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport type { Assign } from \"../types/assign.js\";\nimport { extend } from \"@ribajs/utils/src/type.js\";\n\n/**\n * assign\n * Assign a value in your model.\n * The value you want to assign must be an object and will be concatenate with your model.\n * @example\n * <div rv-assign='{\"newValue\": \"hello\", \"anotherNewValue\": \"world\"}'>{newValue} {anotherNewValue}!</div>\n */\nexport class AssignBinder extends Binder<Assign, HTMLUnknownElement> {\n  static key = \"assign\";\n  routine(el: HTMLUnknownElement, value: any) {\n    if (typeof value === \"object\") {\n      return extend({ deep: false }, this.view.models, value);\n    }\n    console.warn(\"Value must be an object or propertyName is required\");\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { BinderAttributeChangedEvent } from \"../types/index.js\";\nimport { setAttribute } from \"@ribajs/utils\";\n\n/**\n * Sets the attribute on the element. If no binder above is matched it will fall\n * back to using this binder.\n */\nexport class AttributeBinder extends Binder<any, HTMLElement> {\n  static key = \"attr-*\";\n\n  routine(el: HTMLElement, newValue: any) {\n    if (!this.type) {\n      throw new Error(\"Can't set attribute of \" + this.type);\n    }\n\n    const {\n      newValue: newValueFormatted,\n      oldValue,\n      changed,\n    } = setAttribute(el, this.type, newValue);\n\n    // If this is a source element, the parent a video element and the attribute is the `src`, start loading the video\n    if (\n      this.type === \"src\" &&\n      (el as HTMLSourceElement).tagName.toUpperCase() === \"SOURCE\" &&\n      (\n        (el as HTMLSourceElement).parentElement as HTMLVideoElement\n      )?.tagName.toUpperCase() === \"VIDEO\"\n    ) {\n      ((el as HTMLSourceElement).parentElement as HTMLVideoElement).load();\n    }\n\n    if (changed) {\n      el.dispatchEvent(\n        new CustomEvent(\"binder-changed\", {\n          detail: { name: this.type, newValue: newValueFormatted, oldValue },\n        } as BinderAttributeChangedEvent)\n      );\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * block\n * Blocks the binding for the current element and his childs.\n * @note Please note that `<script></script>`, `<style type=\"text/css\"></style>`, `<template></template>` and `<code></code>` tags are blocked by default.\n * You can change this by setting the `blockNodeNames` option.\n * @example\n * <div rv-block=\"\">\n *  <!-- After binding you should see `{ value }` because the binding is blocked here -->\n *  { value }\n * </div>\n */\nexport class BlockBinder extends Binder<unknown> {\n  static key = \"block\";\n  static block = true;\n  routine() {\n    /**/\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { getInputValue } from \"@ribajs/utils/src/dom.js\";\nimport { getString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * checked\n * Checks a checkbox or radio input when the value is true. Also sets the model\n * property when the input is checked or unchecked (two-way binder).\n */\nexport class CheckedBinder extends Binder<string | boolean, HTMLInputElement> {\n  static key = \"checked\";\n  publishes = true;\n  priority = 2000;\n\n  onChange = this.publish.bind(this);\n\n  bind(el: HTMLInputElement) {\n    el.addEventListener(\"change\", this.onChange);\n  }\n\n  unbind(el: HTMLInputElement) {\n    el.removeEventListener(\"change\", this.onChange);\n  }\n\n  routine(el: HTMLInputElement, newValue: string | boolean) {\n    let oldValue;\n    if (!this._getValue) {\n      console.warn(\"this._getValue is not a function, this: \", this);\n      oldValue = getInputValue(el);\n    } else {\n      oldValue = this._getValue(el);\n    }\n    if (el.type === \"radio\") {\n      el.checked = getString(oldValue) === getString(newValue);\n    } else {\n      if (oldValue !== newValue) {\n        el.checked = !!newValue;\n      }\n    }\n  }\n\n  getValue(el: HTMLInputElement) {\n    return getInputValue(el);\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * class-*\n * class-[classname]\n *\n * Adds a class (whatever value is in place of [classname]) on the element\n * when the value evaluates to true and removes that class if the value\n * evaluates to false.\n * @example\n * <li rv-class-completed=\"todo.done\">{ todo.name }</li>\n */\nexport class ClassStarBinder extends Binder<boolean, HTMLElement | SVGElement> {\n  static key = \"class-*\";\n  routine(el: HTMLElement | SVGElement, value: boolean) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    // Note: We use el.getAttribute(\"class\") instead of el.className here to also support svg elements\n    const className = el.getAttribute(\"class\") || \"\";\n    const classList = className.split(\" \").filter((ele: string) => ele !== \"\");\n    const arg = (this.args[0] as string).trim();\n    const idx = classList.indexOf(arg);\n    if (idx === -1) {\n      if (value) {\n        el.setAttribute(\"class\", `${className} ${arg}`);\n      }\n    } else if (!value) {\n      el.setAttribute(\"class\", classList.filter((_, i) => i !== idx).join(\" \"));\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { BasicComponent } from \"../component/basic-component.js\";\nimport type { Observer } from \"../observer.js\";\nimport { isCustomElement, waitForCustomElement } from \"@ribajs/utils\";\n\nconst NO_RIBA_COMPONENT_ERROR_MESSAGE =\n  '[componentAttributeBinder] You can only use the \"rv-co-*\" binder on Riba components, but \"{tagName}\" is not registered.';\n\n/**\n * co-*\n * Pass a riba model / scope value to your component without first converting it as an attribute\n */\nexport class ComponentAttributeBinder extends Binder<any, BasicComponent> {\n  static key = \"co-*\";\n  publishes = true;\n\n  protected componentAttributeObserver?: Observer;\n  protected attributeName?: string;\n\n  protected __routine(el: BasicComponent, value: any) {\n    const attrName = (this.args[0] as string).trim();\n    if (el.setBinderAttribute) {\n      el.setBinderAttribute(attrName, value);\n    } else {\n      console.warn(\n        NO_RIBA_COMPONENT_ERROR_MESSAGE.replace(\"{tagName}\", el.tagName),\n        el\n      );\n    }\n  }\n\n  async routine(el: BasicComponent, value: any) {\n    if (isCustomElement(el, true, true)) {\n      this.__routine(el, value);\n    } else if (isCustomElement(el, true)) {\n      await waitForCustomElement(el);\n      this.__routine(el, value);\n    } else {\n      console.warn(\n        NO_RIBA_COMPONENT_ERROR_MESSAGE.replace(\"{tagName}\", el.tagName),\n        el\n      );\n    }\n  }\n\n  protected __bind(el: BasicComponent) {\n    this.attributeName = this.args[0].toString().trim();\n    if (typeof el.observeAttribute !== \"function\") {\n      console.warn(\n        NO_RIBA_COMPONENT_ERROR_MESSAGE.replace(\"{tagName}\", el.tagName),\n        el\n      );\n      return;\n    }\n    this.componentAttributeObserver = el.observeAttribute(this.attributeName, {\n      sync: () => {\n        this.publish();\n      },\n    });\n  }\n\n  async bind(el: BasicComponent) {\n    if (isCustomElement(el, true, true)) {\n      this.__bind(el);\n    } else if (isCustomElement(el, true)) {\n      await waitForCustomElement(el);\n      this.__bind(el);\n    } else {\n      console.warn(\n        NO_RIBA_COMPONENT_ERROR_MESSAGE.replace(\"{tagName}\", el.tagName),\n        el\n      );\n    }\n  }\n\n  unbind() {\n    this.componentAttributeObserver?.unobserve();\n  }\n\n  getValue(el: BasicComponent) {\n    const attrName = (this.args[0] as string).trim();\n    const val = el.getBinderAttribute(attrName);\n    return val;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Disables the element when value is true (negated version of `enabled` binder).\n */\nexport class DisabledBinder extends Binder<\n  boolean,\n  HTMLButtonElement | HTMLInputElement\n> {\n  static key = \"disabled\";\n  routine(el: HTMLButtonElement | HTMLInputElement, value: boolean) {\n    el.disabled = !!value;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * This binder can be used to disable (or enable) dragging ghost image for browser which have no support for the css feature `user-select: none;` like firefox.\n * This binder is useful in combination with the `scrollbar-draggable` binder.\n */\nexport class NoDragBinder extends Binder<boolean, HTMLElement> {\n  static key = \"draggable\";\n\n  enable = false;\n\n  _onDrag(event: Event) {\n    if (!this.enable) {\n      // Ignore event is draggable is disabled\n      event.preventDefault();\n    }\n  }\n\n  onDrag = this._onDrag.bind(this);\n\n  /** This method is called every time the attribute values changes */\n  routine(el: HTMLElement, enable: boolean) {\n    this.enable = enable;\n    el.setAttribute(\"draggable\", enable ? \"true\" : \"false\");\n  }\n\n  /** This method is called as soon as Riba bounds this binder */\n  bind(el: HTMLElement) {\n    el.addEventListener(\"dragstart\", this.onDrag, true);\n  }\n\n  /** This method is called as soon as Riba unbound this binder */\n  unbind(el: HTMLElement) {\n    el.removeAttribute(\"draggable\");\n    el.removeEventListener(\"dragstart\", this.onDrag, true);\n  }\n}\n","import { DataElement } from \"../types/index.js\";\nimport { Binder } from \"../binder.js\";\n\nexport class MustacheTextBinder extends Binder<string, DataElement> {\n  static key = \"mustache-text\";\n  routine(node: DataElement, value: string) {\n    node.data = value != null ? value : \"\";\n  }\n}\n","export const TEXT = 0;\nexport const BINDING = 1;\n\nexport const DECLARATION_SPLIT =\n  /((?:'[^']*')*(?:(?:[^|']*(?:'[^']*')+[^|']*)+|[^|]+))|^$/g;\n","import { Tokens } from \"./types/index.js\";\nimport { BINDING, TEXT } from \"./constants/parser.js\";\n\n/**\n * Template parser and tokenizer for {{ mustache-style }} text content bindings.\n * Parses the template and returns a set of tokens, separating static portions\n * of text from binding declarations.\n * @param template\n * @param delimiters\n */\nexport function parseTemplate(template: string, delimiters: string[]) {\n  let tokens: Tokens[] | null = null;\n  const length = template.length;\n  let index = 0;\n  let lastIndex = 0;\n  const open = delimiters[0];\n  const close = delimiters[1];\n\n  while (lastIndex < length) {\n    index = template.indexOf(open, lastIndex);\n\n    if (index < 0) {\n      if (tokens) {\n        tokens.push({\n          type: TEXT,\n          value: template.slice(lastIndex),\n        });\n      }\n\n      break;\n    } else {\n      tokens = tokens || [];\n      if (index > 0 && lastIndex < index) {\n        tokens.push({\n          type: TEXT,\n          value: template.slice(lastIndex, index),\n        });\n      }\n\n      lastIndex = index + open.length;\n      index = template.indexOf(close, lastIndex);\n\n      if (index < 0) {\n        const substring = template.slice(lastIndex - open.length);\n        const lastToken = tokens[tokens.length - 1];\n\n        if (lastToken && lastToken.type === TEXT) {\n          lastToken.value += substring;\n        } else {\n          tokens.push({\n            type: TEXT,\n            value: substring,\n          });\n        }\n\n        break;\n      }\n\n      const value = template.slice(lastIndex, index).trim();\n\n      tokens.push({\n        type: BINDING,\n        value,\n      });\n\n      lastIndex = index + close.length;\n    }\n  }\n\n  return tokens;\n}\n","import { DataElement } from \"./types/index.js\";\nimport { MustacheTextBinder } from \"./binders/mustache-text.binder.js\";\nimport { View } from \"./view.js\";\nimport { BINDING } from \"./constants/parser.js\";\nimport { parseTemplate } from \"./parse-template.js\";\n\nexport function parseNode(\n  view: View,\n  node: DataElement,\n  templateDelimiters: Array<string>\n) {\n  /** If true stop / block the parseNode  recursion */\n  let blockRecursion = false;\n\n  node = node as DataElement;\n  if (node.nodeType === Node.TEXT_NODE) {\n    let tokens = null;\n\n    if (node.data) {\n      tokens = parseTemplate(node.data, templateDelimiters);\n    }\n\n    if (tokens && tokens.length) {\n      for (let i = 0; i < tokens.length; i++) {\n        const token = tokens[i];\n        const text = document.createTextNode(token.value);\n        if (node.parentNode && text && node) {\n          node.parentNode.insertBefore(text, node);\n        }\n        if (token.type === BINDING) {\n          // TODO fix circular dependency\n          view.buildBinding(text, null, token.value, MustacheTextBinder, null);\n        }\n      }\n      if (node.parentNode) {\n        node.parentNode.removeChild(node);\n      }\n    }\n    blockRecursion = true;\n  } else if (node.nodeType === Node.ELEMENT_NODE) {\n    // traverse binds attributes and components\n    blockRecursion = view.traverse(node);\n  }\n  if (!blockRecursion) {\n    if (node.childNodes && node.childNodes.length > 0) {\n      for (let i = 0; i < node.childNodes.length; i++) {\n        const childNode = node.childNodes[i];\n        if (childNode) {\n          parseNode(view, childNode as DataElement, templateDelimiters);\n        }\n      }\n    }\n  }\n}\n","import { ParsedDeclarations } from \"./types/index.js\";\nimport { DECLARATION_SPLIT } from \"./constants/parser.js\";\n\n/**\n * Parses an attribute argument to his keypath and splits the formatter names into a pipes array.\n * @param declaration e.g. `object.data | validate | json`\n *\n * if declaration is\n * ```\n * object.data | validate | json`\n * ``\n *\n * the result is\n * ```\n * {\n *    keypath: \"object.data\",\n *    pipes: [\"validate\", \"json\"]\n * }\n * ```\n */\nexport function parseDeclaration(declaration: string): ParsedDeclarations {\n  const matches = declaration.match(DECLARATION_SPLIT);\n  if (matches === null) {\n    throw new Error(\"[View] No matches\");\n  }\n  const pipes = matches.map((str: string) => {\n    return str.trim();\n  });\n  const keypath = pipes.shift() || undefined;\n\n  return {\n    keypath,\n    pipes,\n  } as ParsedDeclarations;\n}\n","import {\n  Options,\n  BindableElement,\n  ClassOfBinder,\n  ClassOfComponent,\n  DataElement,\n} from \"./types/index.js\";\nimport { parseNode } from \"./parse-node.js\";\nimport { parseDeclaration } from \"./parse-declaration.js\";\nimport { BasicComponent, Component } from \"./component/index.js\";\nimport { isCustomElement } from \"@ribajs/utils\";\nimport { Binder } from \"./binder.js\";\n\n/**\n * Sets the attribute on the element. If no binder is matched it will fall\n * back to using this binder.\n */\nimport { AttributeBinder } from \"./binders/attribute.binder.js\";\n\n/**\n * A collection of bindings built from a set of parent nodes.\n */\nexport class View {\n  /** Global root scope */\n  public static $rootScope: any = {};\n\n  public static bindingComparator = (a: Binder, b: Binder) => {\n    const aPriority = a.priority || 0;\n    const bPriority = b.priority || 0;\n    return bPriority - aPriority;\n  };\n\n  /**\n   * Helper function to create a new view inside of a binding\n   * @param binding\n   * @param models\n   * @param anchorEl\n   */\n  public static create(\n    binder: Binder,\n    models: any,\n    anchorEl: HTMLElement | Node | null\n  ) {\n    const template = binder.el.cloneNode(true);\n    const view = new View(template, models, binder.view.options);\n    view.bind();\n    if (!binder?.marker?.parentNode) {\n      console.warn(\"[View]: No parent node for binding!\");\n    } else {\n      binder.marker.parentNode.insertBefore(template, anchorEl);\n    }\n    return view;\n  }\n\n  public els: HTMLCollection | HTMLElement[] | Node[];\n  public models: any;\n  public options: Options;\n  public bindings: Array<Binder> = [];\n  public webComponents: Array<Component | BasicComponent> = [];\n  // public componentView: View | null = null;\n\n  /**\n   * The DOM elements and the model objects for binding are passed into the\n   * constructor along with any local options that should be used throughout the\n   * context of the view and it's bindings.\n   * @param els\n   * @param models\n   * @param options\n   */\n  constructor(\n    els:\n      | HTMLCollection\n      | HTMLElement\n      | Node\n      | NodeListOf<ChildNode>\n      | HTMLUnknownElement[],\n    models: any,\n    options: Options\n  ) {\n    if (Array.isArray(els)) {\n      this.els = els;\n    } else {\n      this.els = [els] as HTMLElement[] | Node[];\n    }\n\n    this.models = models;\n\n    // If $root property exists in model merge this with the global root scope / model\n    if (this.models.$root) {\n      for (const key of Object.keys(this.models.$root)) {\n        View.$rootScope[key] = this.models.$root[key];\n      }\n    }\n\n    this.models.$root = View.$rootScope;\n\n    this.options = options;\n\n    this.build();\n  }\n\n  /**\n   * Binds all of the current bindings for this view.\n   */\n  public bind() {\n    this.bindings.forEach((binding) => {\n      binding._bind();\n    });\n  }\n\n  /**\n   * Unbinds all of the current bindings for this view.\n   */\n  public unbind() {\n    if (Array.isArray(this.bindings)) {\n      this.bindings.forEach((binding) => {\n        binding._unbind();\n        if (typeof binding.el && this.options.removeBinderAttributes) {\n          // TODO reset attribute ?\n          // binding.el.setAttribute(attribute.name);\n        }\n      });\n    }\n\n    // TODO fallback to unbind web components\n    if (Array.isArray(this.webComponents)) {\n      this.webComponents.forEach((webComponent) => {\n        if (typeof (webComponent as Component).unbind === \"function\") {\n          (webComponent as Component).unbind();\n        }\n      });\n    }\n  }\n\n  /**\n   * Syncs up the view with the model by running the routines on all bindings.\n   */\n  public sync() {\n    this.bindings.forEach((binding) => {\n      if (binding.sync) {\n        binding.sync();\n      }\n    });\n  }\n\n  /**\n   * Publishes the input values from the view back to the model (reverse sync).\n   */\n  public publish() {\n    this.bindings.forEach((binder) => {\n      if (binder.publishes && binder.publish) {\n        binder.publish();\n      }\n    });\n  }\n\n  /**\n   * Updates the view's models along with any affected bindings.\n   * @param models\n   */\n  public update(models: any = {}) {\n    Object.keys(models).forEach((key) => {\n      this.models[key] = models[key];\n    });\n\n    for (const binding of this.bindings) {\n      if (binding._update) {\n        binding._update(models);\n      }\n    }\n  }\n\n  /**\n   * Parses the DOM tree and builds `Binding` instances for every matched\n   * binding declaration.\n   */\n  public build() {\n    this.bindings = []; // this.bindings || [];\n\n    if (!this.options.templateDelimiters) {\n      throw new Error(\"templateDelimiters required\");\n    }\n\n    const elements = this.els;\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element) {\n        parseNode(\n          this,\n          element as DataElement,\n          this.options.templateDelimiters\n        );\n      }\n    }\n\n    this.bindings.sort(View.bindingComparator);\n  }\n\n  protected startsWithPrefix(name: string) {\n    const bindingFullPrefixes = this.options.fullPrefix;\n    if (!bindingFullPrefixes) {\n      throw new Error(\"prefix is required\");\n    }\n\n    for (const fullPrefix of bindingFullPrefixes) {\n      if (name.startsWith(fullPrefix)) {\n        return fullPrefix;\n      }\n    }\n\n    return undefined;\n  }\n\n  public binderRegex(identifier: string) {\n    const wildcards = identifier.match(/\\*/g)?.length || 0;\n    let regexp: RegExp;\n    if (wildcards > 1) {\n      regexp = new RegExp(\n        `^${identifier.replace(\"*\", \"([^-]*)\").replaceAll(\"-*\", \"-(.+)\")}$`\n      );\n    } else {\n      regexp = new RegExp(`^${identifier.replaceAll(\"*\", \"(.+)\")}$`);\n    }\n    return regexp;\n  }\n\n  /**\n   *\n   */\n  private bindBinders(\n    attributes: NamedNodeMap,\n    node: BindableElement,\n    attributeBinders = this.options.attributeBinders\n  ) {\n    let block = false;\n    if (!this.options.binders) {\n      return block;\n    }\n    const bindInfos = [];\n    for (let i = 0, len = attributes.length; i < len; i++) {\n      let nodeName = \"\";\n      let Binder: ClassOfBinder | null = null;\n      const attribute = attributes[i];\n      // if attribute starts with the binding prefix. E.g. rv-\n      const startingPrefix = this.startsWithPrefix(attribute.name);\n      if (startingPrefix) {\n        let identifier = \"\";\n        nodeName = attribute.name.slice(startingPrefix.length);\n\n        // if binder is not a attributeBinder binder should be set\n        if (this.options.binders[nodeName]) {\n          Binder = this.options.binders[nodeName];\n        }\n\n        if (Binder === null) {\n          // seems to be a star binder\n          // Check if any attributeBinder match's\n          for (let k = 0; k < attributeBinders.length; k++) {\n            identifier = attributeBinders[k];\n            const regexp = this.binderRegex(identifier);\n            if (regexp.test(nodeName)) {\n              Binder = this.options.binders[identifier];\n              break;\n            }\n          }\n        }\n\n        if (Binder === null) {\n          if (this.options.binders[\"*\"]) {\n            Binder = this.options.binders[\"*\"];\n            identifier = \"*\";\n          } else {\n            Binder = AttributeBinder;\n          }\n        }\n        // if block is set, do not bind its child's (this means the binder bound it by itself)\n        // and build binding directly (do not push it to bindInfos array)\n        if (Binder.block) {\n          this.buildBinding(\n            node,\n            nodeName,\n            attribute.value,\n            Binder,\n            identifier\n          );\n          if (node.removeAttribute && this.options.removeBinderAttributes) {\n            node.removeAttribute(attribute.name);\n          }\n          block = true;\n          return block;\n        }\n\n        bindInfos.push({ attr: attribute, Binder, nodeName, identifier });\n      }\n    }\n\n    for (let i = 0; i < bindInfos.length; i++) {\n      const bindInfo = bindInfos[i];\n      this.buildBinding(\n        node,\n        bindInfo.nodeName,\n        bindInfo.attr.value,\n        bindInfo.Binder,\n        bindInfo.identifier\n      );\n      if (node.removeAttribute && this.options.removeBinderAttributes) {\n        node.removeAttribute(bindInfo.attr.name);\n      }\n    }\n    return block;\n  }\n\n  private bindComponent(node: BindableElement) {\n    let block = false;\n    if (!this.options.components) {\n      return block;\n    }\n\n    const nodeName = node.nodeName.toLowerCase();\n    const COMPONENT = this.options.components[nodeName];\n    if (COMPONENT) {\n      // this.registComponentWithFallback(node, COMPONENT, nodeName);\n      this.registerComponent(COMPONENT, nodeName);\n      block = true;\n    }\n    // Also block unknown custom elements except page components\n    else if (\n      this.options.blockUnknownCustomElements &&\n      isCustomElement(node) &&\n      !nodeName.endsWith(\"-page\")\n    ) {\n      block = true;\n    }\n    return block;\n  }\n\n  public traverse(node: BindableElement): boolean {\n    /** If true stop / block the parseNode recursion */\n    let block = this.options.blockNodeNames.includes(node.nodeName);\n    if (block) {\n      return block;\n    }\n    const attributes = node.attributes;\n\n    // bind attribute binders if available\n    if (attributes && this.options.binders) {\n      block = this.bindBinders(attributes, node);\n      if (block) {\n        return block;\n      }\n    }\n\n    // bind components\n    if (!block && !node._bound && this.options.components) {\n      block = this.bindComponent(node);\n    }\n    return block;\n  }\n\n  public buildBinding(\n    node: HTMLUnknownElement | Text,\n    type: string | null,\n    declaration: string,\n    Binder: ClassOfBinder,\n    identifier: string | null\n  ) {\n    const parsedDeclaration = parseDeclaration(declaration);\n    const keypath = parsedDeclaration.keypath;\n    const pipes = parsedDeclaration.pipes;\n    this.bindings.push(\n      new Binder(this, node, type, Binder.key, keypath, pipes, identifier)\n    );\n  }\n\n  /**\n   * Regist all components\n   * This can sometimes be useful so that the browser automatically recognizes whether a component is inserted into the dom.\n   * However, the components are already registered when they are found by riba in the DOM.\n   *\n   * Please note, this method does not support the browser fallback for browsers that cannot use custom elements.\n   */\n  public registerComponents() {\n    for (const nodeName in this.options.components) {\n      if (this.options.components[nodeName]) {\n        // Not already registered?\n        if (!customElements.get(nodeName)) {\n          const COMPONENT = this.options.components[nodeName];\n          this.registerComponent(COMPONENT, nodeName);\n        }\n      }\n    }\n  }\n\n  /**\n   * Register a custom element using the native customElements feature.\n   * @param COMPONENT\n   * @param nodeName\n   */\n  public registerComponent(COMPONENT: ClassOfComponent, nodeName?: string) {\n    if (!customElements) {\n      console.error(\"customElements not supported by your browser!\");\n      throw new Error(\"customElements not supported by your browser!\");\n    }\n\n    const resolveNodeName = nodeName || COMPONENT.tagName;\n    if (!customElements.get(resolveNodeName)) {\n      customElements.define(COMPONENT.tagName, COMPONENT);\n    }\n  }\n}\n","import { Bindable } from \"../types/index.js\";\nimport { View } from \"../view.js\";\nimport { Binder } from \"../binder.js\";\nimport { times, camelCase } from \"@ribajs/utils\";\n\n/**\n * each-*\n * Appends bound instances of the element in place for each item in the array.\n */\nexport class EachStarBinder extends Binder<any[], HTMLElement> {\n  static key = \"each-*\";\n  static block = true;\n  priority = 4000;\n\n  iterated: View[] = [];\n\n  bind(el: HTMLElement) {\n    if (!this.marker) {\n      this.marker = window?.document?.createComment(` riba: ${this.type} `);\n      if (!el.parentNode?.insertBefore || !this.marker) {\n        // console.warn('No parent node!');\n      } else {\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      }\n    } else {\n      this.iterated.forEach((view: View) => {\n        view.bind();\n      });\n    }\n  }\n\n  unbind() {\n    if (this.iterated) {\n      this.iterated.forEach((view: View) => {\n        view.unbind();\n      });\n    }\n  }\n\n  routine(el: HTMLElement, collection: any[]) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    let isObject = false;\n    const modelName = camelCase(this.args[0].toString());\n    collection = collection || [];\n\n    // Transform object to array to iterate over\n    if (\n      !Array.isArray(collection) &&\n      typeof collection === \"object\" &&\n      collection !== null\n    ) {\n      collection = Object.entries(collection).map(([key, value]) => {\n        return { key, value };\n      });\n      isObject = true;\n    }\n\n    if (!Array.isArray(collection)) {\n      throw new Error(\n        `each-${\n          this.args[0]\n        } needs an array or object to iterate over, but it is ${typeof collection}`\n      );\n    }\n\n    // if index name is set by `index-property` use this name, otherwise `%[modelName]%`\n    const indexProp =\n      el.getAttribute(\"index-property\") || this.getIterationAlias(modelName);\n\n    collection.forEach((model, index) => {\n      const scope: any = { $parent: this.view.models };\n      // Is object transformed to array\n      if (isObject) {\n        scope[indexProp] = model.key;\n        scope[modelName] = model.value;\n      }\n      // Is Array\n      else {\n        scope[indexProp] = index;\n        scope[modelName] = model;\n      }\n\n      let view = this.iterated[index];\n\n      if (!view) {\n        let previous: HTMLElement | Element | Node | undefined;\n\n        if (this.iterated.length) {\n          previous = this.iterated[this.iterated.length - 1].els[0];\n        } else if (this.marker) {\n          previous = this.marker;\n        }\n\n        if (!previous) {\n          return;\n        }\n        view = View.create(this, scope, previous.nextSibling);\n        this.iterated.push(view);\n      } else {\n        if (view.models[modelName] !== model) {\n          // search for a view that matches the model\n          let matchIndex;\n          let nextView: View = this.iterated[index];\n          for (\n            let nextIndex = index + 1;\n            nextIndex < this.iterated.length;\n            nextIndex++\n          ) {\n            nextView = this.iterated[nextIndex];\n            if (nextView.models[modelName] === model) {\n              matchIndex = nextIndex;\n              break;\n            }\n          }\n          if (matchIndex !== undefined) {\n            // model is in other position\n            // TODO: consider avoiding the splice here by setting a flag\n            // profile performance before implementing such change\n            this.iterated.splice(matchIndex, 1);\n            if (!this.marker || !this.marker.parentNode?.insertBefore) {\n              throw new Error(\"Marker has no parent node\");\n            }\n            if (nextView && nextView.els[0] && view.els[0]) {\n              this.marker.parentNode.insertBefore(nextView.els[0], view.els[0]);\n            }\n\n            nextView.models[indexProp] = index;\n          } else {\n            // new model\n            nextView = View.create(this, scope, view.els[0]);\n          }\n          this.iterated.splice(index, 0, nextView);\n        } else {\n          view.models[indexProp] = index;\n        }\n      }\n    });\n\n    if (this.iterated.length > collection.length) {\n      times(this.iterated.length - collection.length, () => {\n        const view = this.iterated.pop();\n        if (!view) {\n          throw new Error(\"view is undefined!\");\n        }\n        view.unbind();\n        if (!this.marker || !this.marker.parentNode) {\n          throw new Error(\"Marker has no parent node\");\n        }\n        this.marker.parentNode.removeChild(view.els[0]);\n      });\n    }\n\n    if (el.nodeName === \"OPTION\" && this.view.bindings) {\n      this.view.bindings.forEach((binding: Bindable) => {\n        if (\n          this.marker &&\n          binding.el === this.marker.parentNode &&\n          binding.type === \"value\" &&\n          binding.sync\n        ) {\n          binding.sync();\n        }\n      });\n    }\n  }\n\n  update(models: any) {\n    const data: any = {};\n    // TODO: add test and fix if necessary\n    Object.keys(models).forEach((key) => {\n      if (this.args === null) {\n        throw new Error(\"args is null\");\n      }\n      if (key !== this.args[0]) {\n        data[key] = models[key];\n      }\n    });\n\n    this.iterated.forEach((view: View) => {\n      view.update(data);\n    });\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Sets a reference to the HTML element into the scope\n */\nexport class ElementBinder extends Binder<HTMLElement, HTMLElement> {\n  static key = \"element\";\n  publishes = true;\n\n  bind() {\n    this.publish();\n  }\n\n  routine() {\n    //\n  }\n\n  getValue(el: HTMLElement) {\n    return el;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Enables the element when value is true.\n */\nexport class EnabledBinder extends Binder<\n  boolean,\n  HTMLButtonElement | HTMLInputElement\n> {\n  static key = \"enabled\";\n  routine(el: HTMLButtonElement | HTMLInputElement, value: boolean) {\n    el.disabled = !value;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * sort-childs using flex order\n */\nexport class FlexSortChildsBinder extends Binder<boolean, HTMLElement> {\n  static key = \"flex-sort-childs\";\n  priority = 90000;\n\n  routine(el: HTMLElement, descending: boolean) {\n    const childrens = Array.from(el.children) as HTMLElement[];\n    childrens.sort((a, b) => {\n      if (!a.dataset.sortBy || !b.dataset.sortBy) {\n        return 0;\n      }\n      if (a.dataset.sortBy < b.dataset.sortBy) {\n        return descending ? 1 : -1;\n      }\n      if (a.dataset.sortBy > b.dataset.sortBy) {\n        return descending ? -1 : 1;\n      }\n      return 0;\n    });\n    for (let i = 0; i < childrens.length; i++) {\n      const child = childrens[i];\n      child.style.order = i.toString();\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Hides the element when value is true (negated version of `show` binder).\n */\nexport class HideBinder extends Binder<boolean, HTMLElement> {\n  static key = \"hide\";\n  routine(el: HTMLElement, value: boolean) {\n    el.style.display = value ? \"none\" : \"\";\n    if (value) {\n      el.setAttribute(\"hidden\", \"true\");\n    } else {\n      el.removeAttribute(\"hidden\");\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Sets the element's text value.\n */\nexport class HtmlBinder extends Binder<number | string | boolean, HTMLElement> {\n  static key = \"html\";\n  routine(el: HTMLElement, value: number | string | boolean) {\n    if (typeof value !== \"string\") {\n      if (value === undefined || value === null) {\n        value = \"\";\n      } else if (typeof value?.toString === \"function\") {\n        value = value.toString();\n      } else {\n        console.warn(\"[HtmlBinder] Value is not a string\", value);\n        value = JSON.stringify(value);\n      }\n    }\n\n    el.innerHTML = value || \"\";\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { View } from \"../view.js\";\n\n/**\n * if\n * Inserts and binds the element and it's child nodes into the DOM when true.\n */\nexport class IfBinder extends Binder<boolean> {\n  static key = \"if\";\n  static block = true;\n  priority = 4000;\n\n  attached = false;\n  nested?: View;\n\n  bind(el: HTMLUnknownElement) {\n    if (!this.marker) {\n      this.marker = window?.document?.createComment(\n        \" riba: \" + this.type + \" \" + this.keypath + \" \"\n      );\n      this.attached = false;\n      if (!el.parentNode?.insertBefore) {\n        // console.warn('Element has no parent node');\n      } else {\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      }\n    } else if (this.nested) {\n      this.nested.bind();\n    }\n  }\n\n  unbind() {\n    if (this.nested) {\n      this.nested.unbind();\n    }\n  }\n\n  routine(el: HTMLElement, value: boolean) {\n    value = !!value;\n    if (value !== this.attached) {\n      if (value) {\n        if (!this.nested) {\n          this.nested = new View(el, this.view.models, this.view.options);\n          this.nested.bind();\n        }\n        if (!this.marker || !this.marker.parentNode) {\n          // console.warn('Marker has no parent node');\n        } else {\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\n        }\n        this.attached = true;\n      } else {\n        if (!el.parentNode) {\n          // console.warn('Element has no parent node');\n        } else {\n          el.parentNode.removeChild(el);\n        }\n        this.attached = false;\n      }\n    }\n  }\n\n  update(models: any) {\n    if (this.nested) {\n      this.nested.update(models);\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * maxlength\n */\nexport class MaxlengthBinder extends Binder<number, HTMLElement> {\n  static key = \"maxlength\";\n\n  routine(el: HTMLElement, maxLength?: number) {\n    if (typeof maxLength === \"number\") {\n      (el as HTMLInputElement).setAttribute(\"maxlength\", maxLength.toString());\n      (el as HTMLInputElement).maxLength = maxLength;\n    } else {\n      (el as HTMLInputElement).removeAttribute(\"maxlength\");\n    }\n  }\n}\n","import { eventHandlerFunction } from \"../types/index.js\";\nimport { Binder } from \"../binder.js\";\n\n/**\n * Binds an event handler on the element.\n */\nexport class OnEventBinder extends Binder<eventHandlerFunction, HTMLElement> {\n  static key = \"on-*\";\n  function = true;\n  priority = 1000;\n\n  handler?: any;\n\n  unbind(el: HTMLElement) {\n    if (this.handler) {\n      if (this.args === null) {\n        throw new Error(\"args is null\");\n      }\n      const eventName = this.args[0] as string;\n      el.removeEventListener(eventName, this.handler);\n    }\n  }\n\n  routine(el: HTMLElement, value: eventHandlerFunction) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    const eventName = this.args[0] as string;\n\n    // see https://github.com/microsoft/TypeScript/issues/32912\n    const options: AddEventListenerOptions & EventListenerOptions = {\n      passive: this.el.dataset.passive === \"true\", // data-passive=\"true\"\n    };\n    if (this.handler) {\n      el.removeEventListener(eventName, this.handler, options);\n    }\n    this.handler = this.eventHandler(value, el).bind(this);\n\n    el.addEventListener(eventName, this.handler, options);\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { BasicComponent } from \"../component/basic-component.js\";\nimport { isCustomElement, waitForCustomElement } from \"@ribajs/utils\";\n\n/**\n * parent\n * Binds the parent scope to your component\n */\nexport class ParentBinder extends Binder<any, BasicComponent> {\n  static key = \"parent\";\n  routine() {\n    /**/\n  }\n  private bindIntern(el: BasicComponent) {\n    if (el.setBinderAttribute) {\n      el.setBinderAttribute(\"$parent\", this.view.models);\n    } else {\n      console.warn(\n        \"[parentBinder] You can only use this binder on Riba components\",\n        el.localName,\n        customElements.get(el.localName)\n      );\n    }\n  }\n\n  async bind(el: BasicComponent) {\n    if (isCustomElement(el, true, true)) {\n      this.bindIntern(el);\n    } else if (isCustomElement(el, true)) {\n      console.info(\n        `[parentBinder] CustomElement ${el.localName} has been defined, but is not yet upgraded. Waiting for upgrade..`,\n        el\n      );\n      await waitForCustomElement(el);\n      this.bindIntern(el);\n    } else {\n      console.warn(\n        \"[parentBinder] You can only use this binder on Riba components\",\n        el.localName\n      );\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * readonly\n */\nexport class ReadonlyBinder extends Binder<boolean, HTMLInputElement> {\n  static key = \"readonly\";\n\n  routine(el: HTMLInputElement, readOnly: boolean) {\n    readOnly = !!readOnly;\n    el.readOnly = readOnly;\n    if (readOnly) {\n      el.setAttribute(\"readonly\", \"\");\n    } else {\n      el.removeAttribute(\"readonly\");\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * remove-class\n * Removes the given class string.\n * Instead of `class-[classname]` the classname is removed by the\n * given attribute and not by the star value,\n * @example\n * <img class=\"loading\" rv-src=\"img.src\" rv-remove-class=\"loadingClass\">\n */\nexport class RemoveClassBinder extends Binder<string, HTMLElement> {\n  static key = \"remove-class\";\n  private staticClassesString?: string;\n  bind(el: HTMLElement) {\n    this.staticClassesString = el.className;\n  }\n  routine(el: HTMLElement, value: string) {\n    const regex = new RegExp(`\\\\b${value}\\\\b`, \"g\");\n    if (!this.staticClassesString) {\n      throw new Error(\"staticClassesString is undefined!\");\n    }\n    el.className = this.staticClassesString.replace(regex, \"\").trim();\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Shows the element when value is true (negated version of `hide` binder).\n */\nexport class ShowBinder extends Binder<boolean, HTMLElement> {\n  static key = \"show\";\n  routine(el: HTMLElement, value: boolean) {\n    el.style.display = value ? \"\" : \"none\";\n    if (value) {\n      el.removeAttribute(\"hidden\");\n    } else {\n      el.setAttribute(\"hidden\", \"true\");\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * srcset-size\n * Sets an url with size to the `srcset` attribute\n */\nexport class SrcsetSizeBinder extends Binder<string, HTMLElement> {\n  static key = \"srcset-*\";\n\n  routine(el: HTMLUnknownElement, url: string) {\n    const size: string = this.args[0] as string;\n    let srcset = el.getAttribute(\"srcset\");\n    if (typeof srcset !== \"string\") {\n      srcset = \"\";\n    }\n    if (typeof url === \"string\" && url.length > 0) {\n      const seperator = srcset.length > 0 ? \", \" : \"\";\n      // Add size to srcset attribute\n      srcset += `${seperator}${url} ${size}`;\n    } else {\n      // Remove size from srcset attribute\n      let sizes = srcset.split(\",\");\n      sizes = sizes.map((iterSize) => iterSize.trim());\n      sizes = sizes.filter((iterSize) => !iterSize.includes(size));\n      srcset = sizes.join(\", \") || \"\";\n    }\n    el.setAttribute(\"srcset\", srcset);\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * style-*\n * Adds a style to the element.\n *\n * ```html\n * <div rv-style-background-image=\"'/image.png'\"></div>\n * ```\n */\nexport class StyleBackgroundImageBinder extends Binder<string, HTMLElement> {\n  static key = \"style-background-image\";\n  routine(el: HTMLElement, value: string) {\n    const prop = \"background-image\";\n    if (value === null || value === undefined || value === \"\") {\n      el.style.removeProperty(prop);\n    } else {\n      el.style.setProperty(prop, `url(${value})`);\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * style-*\n * Adds a style to the element.\n *\n * ```html\n * <div rv-style-background-color=\"'blue'\"></div>\n * ```\n */\nexport class StyleStarBinder extends Binder<string, HTMLElement> {\n  static key = \"style-*\";\n  routine(el: HTMLElement, value: string) {\n    const propertyName = this.args[0];\n    if (value === null || value === undefined || value === \"\") {\n      el.style.removeProperty(propertyName.toString());\n    } else {\n      el.style.setProperty(propertyName.toString(), value);\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { kebabCase } from \"@ribajs/utils\";\n\n/**\n * style\n * Adds a style to the element.\n *\n * ```html\n * <div rv-style=\"{'backgroundColor':'blue'}\"></div>\n * ```\n */\nexport class StyleBinder extends Binder<\n  Partial<CSSStyleDeclaration> | string,\n  HTMLElement\n> {\n  static key = \"style\";\n  routine(el: HTMLElement, value: Partial<CSSStyleDeclaration> | string) {\n    if (value) {\n      if (typeof value === \"string\") {\n        el.setAttribute(\"style\", value);\n      } else {\n        for (const key of Object.keys(value)) {\n          el.style.setProperty(kebabCase(key), value[key as any] || null);\n        }\n      }\n    } else {\n      for (const key of Object.keys(el.style)) {\n        (el.style as any).removeProperty(key);\n      }\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * tag-*\n * tag-[tagname]\n *\n * Changes the html tag (whatever value is in place of [tagname]) of the element\n * when the value evaluates to true and reverts to the original tag name if the value evaluates to false.\n *\n * TODO test me on value change\n *\n * @example\n * <div rv-tag-a=\"item.hasHref\">{ item.label }</div>\n */\nexport class TagStarBinder extends Binder<boolean, HTMLElement> {\n  static key = \"tag-*\";\n  priority = -1000;\n\n  private originalTag?: string;\n\n  bind(el: HTMLUnknownElement) {\n    this.originalTag = el.tagName.toLowerCase();\n  }\n\n  routine(oldEl: HTMLUnknownElement, value: boolean) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n\n    const curTagName = this.el.tagName.toLowerCase();\n    let tagName: string;\n    if (value) {\n      tagName = (this.args[0] as string).trim().toLowerCase();\n    } else if (this.originalTag) {\n      tagName = this.originalTag.toLowerCase();\n    } else {\n      throw new Error(\"Tag name not found!\");\n    }\n\n    if (curTagName !== tagName) {\n      const newEl = document.createElement(tagName);\n\n      // Move childs to new element we use this instead if innerHTML to keep the binders alive on this childs\n      while (oldEl.childNodes.length > 0) {\n        if (oldEl.firstChild) {\n          newEl.appendChild(oldEl.firstChild);\n        }\n      }\n\n      // Copy attributes to new element\n      const attributes = Array.prototype.slice.call(oldEl.attributes);\n      for (const attribute of attributes) {\n        newEl.setAttribute(attribute.name, attribute.value);\n      }\n\n      // Replace the old element with the new element\n      if (oldEl.parentNode) {\n        oldEl.parentNode.replaceChild(newEl, oldEl);\n      } else {\n        console.warn(\"No parent\");\n      }\n\n      this.el = newEl;\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { View } from \"../view.js\";\n\n/**\n * template\n * Similar to rv-html but also binds the html with riba, so you can also use binders and components in this templates.\n */\nexport class TemplateBinder extends Binder<string, HTMLElement> {\n  static key = \"template\";\n\n  private nested?: View;\n\n  bind(el: HTMLUnknownElement) {\n    this.nested = new View(el, this.view.models, this.view.options);\n  }\n\n  routine(el: HTMLUnknownElement, value: string) {\n    this.nested?.unbind();\n    el.innerHTML = value ? value : \"\";\n    this.nested = new View(el, this.view.models, this.view.options);\n    this.nested?.bind();\n  }\n\n  unbind() {\n    this.nested?.unbind();\n  }\n\n  update(models: any) {\n    this.nested?.update(models);\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Sets the element's text value.\n */\nexport class TextBinder extends Binder<string, HTMLElement> {\n  static key = \"text\";\n  routine(el: HTMLElement, value: any) {\n    if (typeof value !== \"string\") {\n      if (typeof value?.toString === \"function\") {\n        value = value.toString();\n      } else {\n        // console.warn(\n        //   `[TextBinder] Can't convert value \"${value}\" to string! Element: `,\n        //   el\n        // );\n      }\n    }\n\n    el.textContent = value || \"\";\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Toggles a boolean variable to true/false if the event is triggered.\n */\nexport class ToggleOnEventBinder extends Binder<string, HTMLUnknownElement> {\n  static key = \"toggle-on-*\";\n\n  private propertyKey?: string;\n\n  toggle() {\n    if (this.propertyKey) {\n      this.view.models[this.propertyKey] = !this.view.models[this.propertyKey];\n    }\n  }\n\n  bind(el: HTMLUnknownElement) {\n    const eventName = this.args[0] as string;\n    const passive = this.el.dataset.passive === \"true\"; // data-passive=\"true\"\n    el.addEventListener(eventName, this.toggle, { passive });\n  }\n\n  unbind(el: HTMLUnknownElement) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    const eventName = this.args[0] as string;\n    el.removeEventListener(eventName, this.toggle);\n  }\n\n  routine(el: HTMLUnknownElement, propertyKey: string) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    this.propertyKey = propertyKey;\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { getInputValue } from \"@ribajs/utils/src/dom.js\";\nimport { getString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * unchecked\n * Unchecks a checkbox or radio input when the value is true (negated version of\n * `checked` binder). Also sets the model property when the input is checked or\n * unchecked (two-way binder).\n */\nexport class UncheckedBinder extends Binder<\n  string | boolean,\n  HTMLInputElement\n> {\n  static key = \"unchecked\";\n  publishes = true;\n  priority = 2000;\n\n  onChange = this.publish.bind(this);\n\n  bind(el: HTMLInputElement) {\n    el.addEventListener(\"change\", this.onChange);\n  }\n\n  unbind(el: HTMLInputElement) {\n    el.removeEventListener(\"change\", this.onChange);\n  }\n\n  routine(el: HTMLInputElement, value: string | boolean) {\n    if (el.type === \"radio\") {\n      el.checked = getString(el.value) !== getString(value);\n    } else {\n      el.checked = !value;\n    }\n  }\n\n  getValue(el: HTMLInputElement) {\n    return getInputValue(el);\n  }\n}\n","import { IfBinder } from \"./if.binder.js\";\n\n/**\n * unless\n * Removes and unbinds the element and it's child nodes into the DOM when true\n * (negated version of `if` binder).\n */\nexport class UnlessBinder extends IfBinder {\n  static key = \"unless\";\n\n  routine(el: HTMLElement, value: boolean) {\n    return super.routine(el, !value);\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { getInputValue, getString, setAttribute } from \"@ribajs/utils\";\n\nconst DEFAULT_EVENTS = \"change input paste blur focus\";\n\n/**\n * Sets the element's value. Also sets the model property when the input changes\n * (two-way binder).\n */\nexport class ValueBinder extends Binder<any, HTMLElement> {\n  static key = \"value\";\n  publishes = true;\n  priority = 3000;\n\n  event?: string;\n\n  getData(el: HTMLElement) {\n    const data = {\n      type: (el as HTMLInputElement).type,\n      tagName: el.tagName,\n      contenteditable: el.getAttribute(\"contenteditable\") ? true : false,\n      isRadio: false,\n      isOption: false,\n    };\n    data.isRadio = data.tagName === \"INPUT\" && data.type === \"radio\";\n    data.isOption = data.tagName === \"OPTION\";\n    return data;\n  }\n\n  onChange = this.publish.bind(this);\n\n  bind(el: HTMLElement) {\n    if (el.tagName === \"OPTION\") {\n      return;\n    }\n    const data = this.getData(el);\n    if (!data.isRadio) {\n      this.event = el.getAttribute(\"event-name\") || DEFAULT_EVENTS;\n\n      const events = this.event.split(\" \");\n      for (const event of events) {\n        el.addEventListener(event.trim(), this.onChange, false);\n      }\n    }\n  }\n\n  unbind(el: HTMLUnknownElement) {\n    if (this.event) {\n      const events = this.event.split(\" \");\n      for (const event in events) {\n        el.removeEventListener(event.trim(), this.onChange);\n      }\n    }\n  }\n\n  routine(\n    el: HTMLElement | HTMLSelectElement,\n    newValue?: number | string | string[]\n  ) {\n    let oldValue = this.getValue(el);\n\n    if (!Array.isArray(newValue)) {\n      if (newValue != null) {\n        newValue = getString(newValue);\n      } else {\n        newValue = \"\";\n      }\n    }\n    if (!Array.isArray(oldValue)) {\n      if (oldValue != null) {\n        oldValue = getString(oldValue);\n      } else {\n        oldValue = \"\";\n      }\n    }\n\n    if (oldValue === newValue) {\n      // nothing changed\n      return;\n    }\n\n    const data = this.getData(el);\n\n    if (data.isRadio || data.isOption) {\n      return setAttribute(el, \"value\", newValue);\n    }\n\n    if ((el as HTMLSelectElement).type === \"select-multiple\") {\n      if (Array.isArray(newValue)) {\n        for (let i = 0; i < (el as HTMLSelectElement).options.length; i++) {\n          const option = (el as HTMLSelectElement).options[\n            i\n          ] as HTMLOptionElement;\n          option.selected = newValue.indexOf(option.value) > -1;\n        }\n      }\n    } else if (el.getAttribute(\"contenteditable\")) {\n      el.innerHTML = newValue as string; // TODO write test for contenteditable\n    } else {\n      (el as HTMLInputElement).value = newValue as string;\n    }\n  }\n\n  getValue(el: HTMLElement) {\n    return getInputValue(el);\n  }\n}\n","import {\n  Adapters,\n  Binders,\n  Formatters,\n  Components,\n  RibaModule,\n} from \"../types/index.js\";\nimport { BindersService } from \"./binder.service.js\";\nimport { ComponentService } from \"./component.service.js\";\nimport { FormatterService } from \"./formatter.service.js\";\nimport { AdapterService } from \"./adapter.service.js\";\n\nexport class ModulesService {\n  public binder: BindersService;\n  public component: ComponentService;\n  public formatter: FormatterService;\n  public adapter: AdapterService;\n\n  /**\n   *\n   * @param binders;\n   * @param components;\n   * @param formatters;\n   * @param adapters;\n   */\n  constructor(\n    binders: Binders<any>,\n    components: Components,\n    formatters: Formatters,\n    adapters: Adapters\n  ) {\n    this.binder = new BindersService(binders);\n    this.component = new ComponentService(components);\n    this.formatter = new FormatterService(formatters);\n    this.adapter = new AdapterService(adapters);\n  }\n\n  public register(module: RibaModule) {\n    if (!module) {\n      console.error(module);\n      throw new Error(\"The Riba module is falsy!\");\n    }\n    if (module.binders) {\n      this.binder.registerAll(module.binders);\n    }\n    if (module.components) {\n      this.component.registerAll(module.components);\n    }\n    if (module.formatters) {\n      this.formatter.registerAll(module.formatters);\n    }\n    if (module.adapters) {\n      this.adapter.registerAll(module.adapters);\n    }\n  }\n}\n","import {\n  Formatters,\n  Binders,\n  Adapters,\n  Root,\n  Components,\n  Options,\n} from \"./types/index.js\";\nimport { parseTemplate } from \"./parse-template.js\";\nimport { parseType } from \"@ribajs/utils\";\nimport { Binder } from \"./binder.js\";\nimport { View } from \"./view.js\";\nimport { Observer } from \"./observer.js\";\nimport { ModulesService } from \"./services/module.service.js\";\nimport { LifecycleService } from \"./services/lifecycle.service.js\";\n\nexport class Riba {\n  /**\n   * Default event handler, calls the function defined in his binder\n   * @see Binding.eventHandler\n   * @param el The element the event was triggered from\n   */\n  public static handler(\n    this: any,\n    context: any,\n    ev: Event,\n    binder: Binder,\n    el: HTMLElement\n  ) {\n    if (!this || !this.call) {\n      const error = new Error(\n        `[rv-${binder.type}=\"${binder.keypath}\"] Event handler \"${binder.keypath}\" not found!\"`\n      );\n      console.error(error, binder, el, binder.view.models);\n      throw error;\n    }\n    this.call(context, ev, binder.view.models, el);\n  }\n\n  /** singleton instance */\n  private static instance: Riba;\n\n  public module: ModulesService;\n\n  public lifecycle = LifecycleService.getInstance();\n\n  /** Global binders */\n  public binders: Binders<any> = {};\n\n  /** Global components. */\n  public components: Components = {};\n\n  /** Global formatters. */\n  public formatters: Formatters = {};\n\n  /** Global (sightglass) adapters. */\n  public adapters: Adapters = {};\n\n  public parseTemplate = parseTemplate;\n\n  public parseType = parseType;\n\n  /** Default template delimiters. */\n  public templateDelimiters = [\"{\", \"}\"];\n\n  /** Default sightglass root interface. */\n  public rootInterface = \".\";\n\n  /** Preload data by default. */\n  public preloadData = true;\n\n  /** Remove binder attributes after binding */\n  public removeBinderAttributes = true; // TODO fixme on false: Maximum call stack size exceeded\n\n  /** Stop binding on this node types */\n  public blockNodeNames = [\"SCRIPT\", \"STYLE\", \"TEMPLATE\", \"CODE\"];\n\n  public blockUnknownCustomElements = true;\n\n  /** Default attribute prefix. */\n  private _prefix: string[] = [\"rv\"];\n\n  /** Default attribute full prefix. */\n  private _fullPrefix: string[] = [\"rv-\"];\n\n  set prefix(value: string[]) {\n    if (Array.isArray(value)) {\n      this._prefix = [];\n      this._fullPrefix = [];\n      for (const val of value) {\n        this._prefix.push(val);\n        this._fullPrefix.push(val + \"-\");\n      }\n    }\n  }\n\n  get prefix(): string[] {\n    return this._prefix;\n  }\n\n  get fullPrefix(): string[] {\n    return this._fullPrefix;\n  }\n\n  /**\n   * Creates an singleton instance of Riba.\n   */\n  constructor() {\n    this.module = new ModulesService(\n      this.binders,\n      this.components,\n      this.formatters,\n      this.adapters\n    );\n    if (Riba.instance) {\n      return Riba.instance;\n    }\n    Riba.instance = this;\n  }\n\n  /**\n   * Merges an object literal into the corresponding global options.\n   * @param options\n   */\n  public configure(options: Partial<Options>) {\n    if (!options) {\n      return;\n    }\n\n    for (const [option, value] of Object.entries(options)) {\n      switch (option) {\n        case \"binders\":\n          this.binders = { ...this.binders, ...(value as Binders) };\n          break;\n        case \"formatters\":\n          this.formatters = { ...this.formatters, ...(value as Formatters) };\n          break;\n        case \"components\":\n          this.components = { ...this.components, ...(value as Components) };\n          break;\n        case \"adapters\":\n          this.adapters = { ...this.adapters, ...(value as Adapters) };\n          break;\n        case \"prefix\":\n          this.prefix = value as string[];\n          break;\n        case \"parseTemplate\":\n          this.parseTemplate = value as any;\n          break;\n        case \"parseType\":\n          this.parseType = value as any;\n          break;\n        case \"templateDelimiters\":\n          this.templateDelimiters = value as string[];\n          break;\n        case \"rootInterface\":\n          this.rootInterface = value as string;\n          break;\n        case \"preloadData\":\n          this.preloadData = value as boolean;\n          break;\n        case \"blockNodeNames\":\n          this.blockNodeNames = value as string[];\n          break;\n        case \"blockUnknownCustomElements\":\n          this.blockUnknownCustomElements = Boolean(value);\n          break;\n        default:\n          console.warn(\"Option not supported\", option, value);\n          break;\n      }\n    }\n  }\n\n  public getViewOptions(options?: Partial<Options>) {\n    const viewOptions: Partial<Options> = {\n      // EXTENSIONS\n      adapters: {} as Adapters,\n      binders: {} as Binders<any>,\n      components: {} as Components,\n      formatters: {} as Formatters,\n\n      // other\n      attributeBinders: [],\n\n      // sightglass\n      rootInterface: {} as Root,\n    };\n\n    if (options) {\n      viewOptions.binders = { ...viewOptions.binders, ...options.binders };\n      viewOptions.formatters = {\n        ...viewOptions.formatters,\n        ...options.formatters,\n      };\n      viewOptions.components = {\n        ...viewOptions.components,\n        ...options.components,\n      };\n      viewOptions.adapters = {\n        ...viewOptions.adapters,\n        ...options.adapters,\n      };\n    }\n\n    // Prefix\n    if (options?.prefix && Array.isArray(options?.prefix)) {\n      viewOptions.prefix = [];\n      viewOptions.fullPrefix = [];\n      for (const prefix of options.prefix) {\n        viewOptions.prefix.push(prefix);\n        viewOptions.fullPrefix.push(prefix + \"-\");\n      }\n    } else {\n      viewOptions.prefix = this.prefix;\n      viewOptions.fullPrefix = this.fullPrefix;\n    }\n\n    viewOptions.templateDelimiters =\n      options?.templateDelimiters || this.templateDelimiters;\n    viewOptions.rootInterface = options?.rootInterface || this.rootInterface;\n    viewOptions.removeBinderAttributes =\n      typeof options?.removeBinderAttributes === \"boolean\"\n        ? options.removeBinderAttributes\n        : this.removeBinderAttributes;\n    viewOptions.blockNodeNames = options?.blockNodeNames || this.blockNodeNames;\n    viewOptions.preloadData =\n      typeof options?.preloadData === \"boolean\"\n        ? options.preloadData\n        : this.preloadData;\n    viewOptions.handler = options?.handler || Riba.handler;\n\n    // merge extensions\n    viewOptions.binders = { ...this.binders, ...viewOptions.binders };\n    viewOptions.formatters = { ...this.formatters, ...viewOptions.formatters };\n    viewOptions.components = { ...this.components, ...viewOptions.components };\n    viewOptions.adapters = { ...this.adapters, ...viewOptions.adapters };\n\n    if (!viewOptions.attributeBinders) {\n      viewOptions.attributeBinders = [];\n    }\n\n    // get all attributeBinders from available binders\n    if (viewOptions.binders) {\n      const attributeBinders = Object.keys(viewOptions.binders).filter(\n        (key) => key.indexOf(\"*\") >= 1 // Should contain, but not start with, *\n      );\n      viewOptions.attributeBinders.push(...attributeBinders);\n    }\n\n    return viewOptions as Options;\n  }\n\n  /**\n   * Binds some data to a template / element. Returns a riba.View instance.\n   * @param el\n   * @param models The root\n   * @param options\n   * @returns\n   */\n  public bind(\n    el: HTMLElement | DocumentFragment | HTMLUnknownElement[],\n    models: any = {},\n    options?: Options\n  ) {\n    const viewOptions: Options = this.getViewOptions(options);\n\n    Observer.updateOptions(viewOptions);\n\n    const view = new View(el, models, viewOptions);\n    view.bind();\n    return view;\n  }\n}\n\n(window as any).Riba = Riba;\n","export const JsxFragment = Symbol();\n","/**\n * Used to inject HTML directly into the document.\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function Raw(_props: { html: string }) {\n  // This is handled specially by the renderElement function. Instead of being\n  // called, the tag is compared to this function and the `html` prop will be\n  // returned directly.\n  return null;\n}\n","/* eslint-disable no-var */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable @typescript-eslint/no-namespace */\n/**\n * Custom JSX module designed specifically for Ribajs's needs.\n * When overriding a default TypeDoc theme output, your implementation must create valid {@link Element}\n * instances, which can be most easily done by using TypeDoc's JSX implementation. To use it, set up\n * your tsconfig with the following compiler options:\n * ```json\n * {\n *     \"jsx\": \"react\",\n *     \"jsxFactory\": \"JSX.createElement\",\n *     \"jsxFragmentFactory\": \"JSX.Fragment\"\n * }\n * ```\n * @see https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/jsx.ts\n * @module\n */\n\nimport type {\n  JsxElement,\n  JsxChildren,\n  JsxComponent,\n  BasicIntrinsicElements,\n} from \"./types/index.js\";\nimport { isCustomElement, jsonStringify, escapeHtml } from \"@ribajs/utils\";\nimport { JsxFragment } from \"./jsx-fragment.js\";\nimport { Raw } from \"./jsx-raw.js\";\n\nexport const htmlVoidElements = new Set([\n  \"area\",\n  \"base\",\n  \"br\",\n  \"col\",\n  \"embed\",\n  \"hr\",\n  \"img\",\n  \"input\",\n  \"link\",\n  \"meta\",\n  \"param\",\n  \"source\",\n  \"track\",\n  \"wbr\",\n]);\n\n/**\n * JSX factory function to create an \"element\" that can later be rendered with {@link renderElement}\n * @param tag\n * @param props\n * @param children\n */\nexport function createElement(\n  tag: typeof JsxFragment | string | JsxComponent<any>,\n  props: Record<string, unknown> | null,\n  ...children: JsxChildren[]\n): JsxElement {\n  return { tag, props, children };\n}\n\nexport function renderElement(element: JsxElement | null | undefined): string {\n  if (!element) {\n    return \"\";\n  }\n\n  const { tag, props, children } = element;\n\n  if (typeof tag === \"function\") {\n    if (tag === Raw) {\n      return String((props as any).html);\n    }\n    return renderElement(tag(Object.assign({ children }, props)));\n  }\n\n  const html: string[] = [];\n\n  if (tag !== JsxFragment) {\n    html.push(\"<\", tag);\n\n    for (const [key, val] of Object.entries(props ?? {})) {\n      if (val == null) continue;\n\n      if (typeof val == \"boolean\" && !isCustomElement(tag)) {\n        if (val) {\n          html.push(\" \", key);\n        }\n      } else {\n        html.push(\" \", key, \"=\", jsonStringify(val));\n      }\n    }\n  }\n\n  let hasChildren = false;\n  if (children.length) {\n    hasChildren = true;\n    if (tag !== JsxFragment) html.push(\">\");\n    renderChildren(children);\n  }\n\n  if (tag !== JsxFragment) {\n    if (!hasChildren) {\n      if (htmlVoidElements.has(tag)) {\n        html.push(\"/>\");\n      } else {\n        html.push(\"></\", tag, \">\");\n      }\n    } else {\n      html.push(\"</\", tag, \">\");\n    }\n  }\n\n  return html.join(\"\");\n\n  function renderChildren(children: JsxChildren[]) {\n    for (const child of children) {\n      if (!child) continue;\n\n      if (Array.isArray(child)) {\n        renderChildren(child);\n      } else if (typeof child === \"string\" || typeof child === \"number\") {\n        html.push(escapeHtml(child.toString()));\n      } else {\n        html.push(renderElement(child));\n      }\n    }\n  }\n}\n\ndeclare global {\n  var jsxCreateElement: typeof createElement;\n  var jsxFragment: typeof JsxFragment;\n  /**\n   * TypeScript's rules for looking up the JSX.IntrinsicElements and JSX.Element\n   * interfaces are incredibly strange. It will find them if they are included as\n   * a namespace under the createElement function, or globally, or, apparently, if\n   * a JSX namespace is declared at the same scope as the factory function.\n   * Hide this in the docs, hopefully someday TypeScript improves this and allows\n   * looking adjacent to the factory function and we can get rid of this phantom namespace.\n   *\n   * We are using the global namespace to be able to extend the IntrinsicElements interface in other Ribajs Modules\n   * @hidden\n   */\n  namespace JSX {\n    // This must be an interface to be able to extend this interface in other Ribajs Modules\n    export interface IntrinsicElements extends BasicIntrinsicElements {}\n    export { JsxElement as Element };\n  }\n}\n\n// Set as global variable in Browser, Deno or Node\nglobalThis.jsxCreateElement = createElement;\nglobalThis.jsxFragment = JsxFragment;\n","/**\n * Auto parse custom element attributes\n *\n * @see https://developer.mozilla.org/de/docs/Web/Web_Components/Using_custom_elements\n */\nimport \"@ribajs/types\";\nimport {\n  EventHandler,\n  ObservedAttributesToCheck,\n  TemplateFunction,\n  ObserverSyncCallback,\n} from \"../types/index.js\";\nimport type { JsxElement } from \"@ribajs/jsx\";\nimport { renderElement } from \"@ribajs/jsx\";\nimport { Binder } from \"../binder.js\";\nimport { Observer } from \"../observer.js\";\nimport { parseJsonString, camelCase } from \"@ribajs/utils/src/type.js\";\nimport { getRandomColor, consoleColoured } from \"@ribajs/utils/src/color.js\";\n\nexport abstract class BasicComponent extends HTMLElement {\n  public static tagName: string;\n\n  public _debug = false;\n  public _color?: string;\n\n  protected templateLoaded = false;\n\n  /**\n   * Used to check if all passed observedAttributes are initialized\n   */\n  protected observedAttributesToCheck: ObservedAttributesToCheck = {};\n\n  protected observedAttributes: string[] = [];\n\n  public abstract scope: any;\n\n  constructor() {\n    super();\n\n    if (this._debug) {\n      this._color = getRandomColor();\n    }\n  }\n\n  /**\n   * Remove this custom element\n   */\n  public remove() {\n    if (this && this.parentElement) {\n      this.parentElement.removeChild(this);\n    }\n  }\n\n  protected abstract template(): ReturnType<TemplateFunction>;\n\n  protected _log(mode: \"debug\" | \"info\" | \"log\" | \"error\", ...args: unknown[]) {\n    const namespace = this.constructor.name || this.tagName;\n    if (!this._color) {\n      this._color = getRandomColor();\n    }\n    consoleColoured({ namespace, color: this._color, mode }, ...args);\n  }\n\n  protected info(...args: unknown[]) {\n    return this._log(\"info\", ...args);\n  }\n\n  protected debug(...args: unknown[]) {\n    if (!this._debug) {\n      return;\n    }\n\n    return this._log(\"debug\", ...args);\n  }\n\n  protected error(...args: unknown[]) {\n    console.error(...args);\n  }\n\n  /**\n   * returns a list of attributes which are required until the riba binding starts\n   */\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected async init(observedAttributes: string[]) {\n    this.loadAttributes(observedAttributes);\n    this.getPassedObservedAttributes(observedAttributes);\n    return;\n  }\n\n  protected ready() {\n    return (\n      this.allPassedObservedAttributesAreInitialized() &&\n      this.checkRequiredAttributes()\n    );\n  }\n\n  /**\n   * Check if the attribute (e.g. `src`) is passed to this custom element\n   * @param observedAttribute\n   */\n  protected attributeIsPassed(observedAttribute: string) {\n    return this.hasAttribute(observedAttribute);\n  }\n\n  /**\n   * Get passed observed attributes, used to check if all passed attributes are initialized\n   * @param observedAttributes\n   */\n  protected getPassedObservedAttributes(observedAttributes: string[]) {\n    const oa2c = this.observedAttributesToCheck;\n    for (const observedAttribute of observedAttributes) {\n      if (!oa2c[observedAttribute]) {\n        oa2c[observedAttribute] = { passed: false, initialized: false };\n      } else {\n        if (!oa2c[observedAttribute].passed) {\n          oa2c[observedAttribute].passed =\n            this.attributeIsPassed(observedAttribute);\n        }\n      }\n    }\n  }\n\n  /**\n   * Checks if all passed observed attributes are initialized\n   */\n  protected allPassedObservedAttributesAreInitialized() {\n    return Object.keys(this.observedAttributesToCheck).every(\n      (key) =>\n        !this.observedAttributesToCheck[key]?.passed ||\n        this.observedAttributesToCheck[key]?.initialized\n    );\n  }\n\n  /**\n   * Required attributes before the view is bound\n   *\n   * The attributeChangedCallback is called for each attribute which updates the riba view each time\n   * which can have a big impact on performance or required attributes are not yet available which can lead to errors.\n   * So define required attributes and the view is ony bind the first time after all this attributes are transmitted.\n   */\n  protected checkRequiredAttributes() {\n    return this.requiredAttributes().every((requiredAttribute) => {\n      requiredAttribute = camelCase(requiredAttribute);\n      return (\n        this.scope.hasOwnProperty(requiredAttribute) &&\n        typeof this.scope[requiredAttribute] !== \"undefined\"\n      );\n    });\n  }\n\n  protected parseAttribute(attr: string | null) {\n    let value: any = attr;\n    if (typeof attr !== \"string\") {\n      return attr;\n    }\n\n    if (attr === \"true\") {\n      value = true;\n    } else if (attr === \"false\") {\n      value = false;\n    } else if (attr === \"null\") {\n      value = null;\n    } else if (attr === \"undefined\") {\n      value = undefined;\n    } else if (attr === \"\") {\n      value = undefined;\n    } else if (!isNaN(Number(attr))) {\n      value = Number(attr);\n      // If number is too large store the value as string\n      if (value >= Number.MAX_SAFE_INTEGER) {\n        value = attr;\n      }\n    } else {\n      const jsonString = parseJsonString(value);\n      value = jsonString ? jsonString : value;\n    }\n\n    return value;\n  }\n\n  /**\n   * Returns an event handler for the bindings (most on-*) inside this component.\n   */\n  protected eventHandler(self: BasicComponent): EventHandler {\n    // IMPORTANT this must be a function and not a Arrow Functions\n    return function (\n      context: Binder,\n      event: Event,\n      binding: Binder,\n      el: HTMLElement\n    ) {\n      if (!this || !this.call) {\n        const error = new Error(\n          `[rv-${binding.type}=\"${binding.keypath}\"] Event handler \"${binding.keypath}\" not found!\"`\n        );\n        console.error(binding, el);\n        throw error;\n      }\n\n      this.call(self, event, binding.view.models, el);\n    };\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when the custom element is first connected to the document's DOM.\n   */\n  protected connectedCallback() {\n    // console.warn('connectedCallback called');\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when the custom element is disconnected from the document's DOM.\n   */\n  protected disconnectedCallback() {\n    // if (this.bound && this.view) {\n    //   // IMPORTANT ROUTE FIXME, if we unbind the component then it will no longer work if it is retrieved from the cache and the connectedCallback is called\n    //   // because the riba attributes are removed. We need a solution for that, maybe we do not remove the attributes or we recreate the attributes\n    //   // See view bind / unbind methods for that.\n    //   // only unbind if cache is not enabled?\n    //   this.unbind();\n    // }\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when one of the custom element's attributes is added, removed, or changed.\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected async attributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    // this.debug(\"attributeChangedCallback\", attributeName, newValue);\n    if (\n      this.observedAttributesToCheck &&\n      this.observedAttributesToCheck[attributeName]\n    ) {\n      this.observedAttributesToCheck[attributeName].initialized = true;\n    }\n\n    newValue = this.parseAttribute(newValue);\n\n    const parsedAttributeName = camelCase(attributeName);\n\n    if (this.scope && this.scope[parsedAttributeName]) {\n      oldValue = this.scope[parsedAttributeName];\n    }\n\n    // automatically inject observed attributes to view scope\n    this.scope[parsedAttributeName] = newValue;\n\n    // call custom attribute changed callback with parsed values\n    this.parsedAttributeChangedCallback(\n      parsedAttributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  /**\n   * Similar to attributeChangedCallback but attribute arguments are already parsed as they are stored in the scope\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    this.debug(\n      \"parsedAttributeChangedCallback called\",\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when one of the custom element's attributes is added, removed, or changed.\n   * Note: Not supported on polyfill: https://github.com/webcomponents/custom-elements#known-bugs-and-limitations\n   * @param oldDocument\n   * @param newDocument\n   */\n  protected adoptedCallback(oldDocument: Document, newDocument: Document) {\n    this.debug(\"adoptedCallback called\", oldDocument, newDocument);\n  }\n\n  protected async loadTemplate(): Promise<\n    JsxElement | HTMLElement | string | null\n  > {\n    if (this.templateLoaded === true) {\n      // this.debug(\"template already loaded\");\n      return null;\n    }\n\n    if (!this.checkRequiredAttributes()) {\n      this.debug(\"Not all required attributes are set to load the template\");\n      return null;\n    }\n\n    this.templateLoaded = true;\n\n    const template = await this.template();\n\n    // if innerHTML is null this component uses the innerHTML which he already has!\n    try {\n      if (template) {\n        if (template instanceof HTMLElement) {\n          this.innerHTML = \"\";\n          this.appendChild(template as HTMLElement);\n        } else if (typeof template === \"string\") {\n          this.innerHTML = template;\n        } else if ((template as JsxElement).tag) {\n          this.innerHTML = renderElement(template as JsxElement);\n        }\n      }\n      return template;\n    } catch (error) {\n      this.templateLoaded = false;\n      throw error;\n    }\n  }\n\n  protected async beforeTemplate(): Promise<any> {\n    // this.debug('beforeTemplate');\n  }\n\n  protected async afterTemplate(\n    template: JsxElement | HTMLElement | string | null\n  ): Promise<any> {\n    this.debug(\"afterTemplate\", template);\n  }\n\n  protected async onReady(): Promise<any> {\n    // this.debug('onReady', this.bound);\n  }\n\n  /**\n   * Observes a object keypath in the scope\n   * @param keypath\n   * @param callback\n   */\n  public observe(keypath: string, callback: ObserverSyncCallback): Observer {\n    return new Observer(this.scope, keypath, callback);\n  }\n\n  /**\n   * Observes a attributeName\n   * @param attributeName\n   * @param callback\n   */\n  public observeAttribute(\n    attributeName: string,\n    callback: ObserverSyncCallback\n  ): Observer {\n    const parsedAttributeName = camelCase(attributeName);\n    return this.observe(parsedAttributeName, callback);\n  }\n\n  /**\n   * Directly set a attribute value in the scope.\n   * This method is meant to be called from the outside, e.g. from a binder or another component.\n   * @note This method is used in the componentAttributeBinder\n   * @param attributeName\n   * @param newValue\n   * @param namespace\n   */\n  public setBinderAttribute(\n    attributeName: string,\n    newValue: any,\n    namespace: string | null = null\n  ) {\n    const parsedAttributeName = camelCase(attributeName);\n    const oldValue = this.scope[parsedAttributeName];\n    this.attributeChangedCallback(attributeName, oldValue, newValue, namespace);\n  }\n\n  /**\n   * Directly get a attribute value from the scope.\n   * This method is meant to be called from the outside, e.g. from a binder or another component.\n   * @note This method is used in the componentAttributeBinder\n   * @param attributeName\n   * @returns\n   */\n  public getBinderAttribute(attributeName: string) {\n    const parsedAttributeName = camelCase(attributeName);\n    const value = this.scope[parsedAttributeName];\n    return value;\n  }\n\n  /**\n   * Load all attributes and calls the attributeChangedCallback for each attribute.\n   * Please note: Normally the browser calls the attributeChangedCallback for you\n   */\n  protected loadAttributes(observedAttributes: string[]) {\n    const attributes = this.attributes;\n    for (const i in attributes) {\n      const attribute: Node = attributes[i];\n      const name = attribute.nodeName;\n      if (observedAttributes.indexOf(name) !== -1) {\n        const newValue = attribute.nodeValue;\n        this.attributeChangedCallback(name, undefined, newValue, null);\n      }\n    }\n  }\n}\n","/**\n * This implementation of components replaces the old components of rivets following the Web Components v1 specs\n *\n * @see https://developer.mozilla.org/de/docs/Web/Web_Components/Using_custom_elements\n */\nimport { View } from \"../view.js\";\nimport { Riba } from \"../riba.js\";\nimport { Binder } from \"../binder.js\";\nimport { BasicComponent } from \"./basic-component.js\";\nimport { Formatter } from \"../types/index.js\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport type {\n  ComponentLifecycleEventData,\n  ComponentLifecycleOptions,\n} from \"../types/index.js\";\n\nexport abstract class Component extends BasicComponent {\n  protected view?: View | null = null;\n  protected riba?: Riba;\n  /** true when binding is in progress */\n  protected _binds = false;\n  /** true when binding is done */\n  protected _bound = false;\n  /** true when component is connected to the dom */\n  protected _connected = false;\n  /** true when component is disconnected from the dom */\n  protected _disconnected = false;\n  protected lifecycleEvents = EventDispatcher.getInstance(\"lifecycle\");\n\n  protected lifecycleOptions: ComponentLifecycleOptions = {};\n\n  /** true when binding is in progress */\n  public get binds() {\n    return this._binds;\n  }\n\n  /** true when binding is done */\n  public get bound() {\n    return this._bound;\n  }\n\n  /** true when component is connected to the dom */\n  public get connected() {\n    return this._connected;\n  }\n\n  /** true when component is disconnected from the dom */\n  public get disconnected() {\n    return this._disconnected;\n  }\n\n  /**\n   * If true the component will automatically bind the component to riba if all required attributes are set.\n   */\n  protected autobind = true;\n\n  constructor() {\n    super();\n    this.lifecycleEvents.trigger(\n      \"Component:constructor\",\n      this.getLifecycleEventData()\n    );\n    this.lifecycleEvents.on(\n      \"ComponentLifecycle:allBound\",\n      this.afterAllBind,\n      this\n    );\n  }\n\n  protected async init(observedAttributes: string[]) {\n    try {\n      await super.init(observedAttributes);\n      this.lifecycleEvents.trigger(\n        \"Component:init\",\n        this.getLifecycleEventData()\n      );\n      return await this.bindIfReady();\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  /**\n   * Use this to throw critical errors within the component\n   *\n   * @protected\n   * @param {Error} error\n   * @memberof Component\n   */\n  protected throw(error: any) {\n    if (error.message) {\n      console.error(`[${this.tagName}] ${error.message}`);\n    }\n    this.lifecycleEvents.trigger(\n      \"Component:error\",\n      error,\n      this.getLifecycleEventData()\n    );\n    this.error(error);\n  }\n\n  /**\n   * If `autobind` is true this component will bind riba automatically in this component if all all passed observed and required attributes are initialized\n   */\n  protected async bindIfReady() {\n    /**\n     * After all required and passed attributes are set we load the template and bind the component\n     */\n    if (this.ready()) {\n      await this.beforeTemplate();\n      const template = await this.loadTemplate();\n      await this.afterTemplate(template);\n      if (this.autobind) {\n        await this.bind();\n      }\n      await this.onReady();\n      return;\n    }\n    this.debug(\n      `Not all required or passed attributes are set to load and bind the template`,\n      this.observedAttributesToCheck,\n      this.scope\n    );\n    return;\n  }\n\n  /** Only internal used */\n  private async _beforeBind(): Promise<any> {\n    this._binds = true;\n    this.debug(\"Start to bind Riba\");\n    this.lifecycleEvents.trigger(\n      \"Component:beforeBind\",\n      this.getLifecycleEventData()\n    );\n  }\n\n  /** Used to handle stuff before binding starts */\n  protected async beforeBind(): Promise<any> {\n    // this.debug(\"beforeBind\", this.scope);\n  }\n\n  /** Only internal used */\n  private async _afterBind(): Promise<any> {\n    this._binds = false;\n    this._bound = true;\n    this.lifecycleEvents.trigger(\n      \"Component:afterBind\",\n      this.getLifecycleEventData()\n    );\n  }\n\n  /** Used to handle stuff after binding is done */\n  protected async afterBind(): Promise<any> {\n    // this.debug(\"afterBind\", this.scope);\n  }\n\n  /**\n   * Called after component binding is done for all current components.\n   * Please note: this method is called every time a route changes, so be careful with this method.\n   */\n  protected async afterAllBind(): Promise<any> {\n    // this.debug(\"afterBind\", this.scope);\n  }\n\n  protected getLifecycleEventData() {\n    const data: ComponentLifecycleEventData = {\n      tagName: this.tagName.toLowerCase(),\n      // scope: this.scope,\n      component: this,\n      // id: this.id,\n      options: this.lifecycleOptions,\n    };\n    return data;\n  }\n\n  /**\n   * Event handler to listen for publish binder event for two-way-binding in web components\n   */\n  // protected publish(name: string, newValue: any, namespace: string | null) {\n  //   this.dispatchEvent(\n  //     new CustomEvent(\"publish-binder-change:\" + name, {\n  //       detail: {\n  //         name,\n  //         newValue,\n  //         namespace: null, // TODO\n  //       },\n  //     })\n  //   );\n  // }\n\n  /**\n   * Default custom Element method\n   * Invoked when the custom element is disconnected from the document's DOM.\n   */\n  protected disconnectedCallback() {\n    try {\n      this._disconnected = true;\n      this._connected = false;\n      super.disconnectedCallback();\n      // IMPORTANT ROUTE FIXME, if we unbind the component then it will no longer work if it is retrieved from the cache and the connectedCallback is called\n      // because the riba attributes are removed. We need a solution for that, maybe we do not remove the attributes or we recreate the attributes\n      // See view bind / unbind methods for that.\n      // only unbind if cache is not enabled?\n      // if (this._binds && this.view) {\n      //   this.unbind();\n      // }\n      this.lifecycleEvents.trigger(\n        \"Component:disconnected\",\n        this.getLifecycleEventData()\n      );\n      this.lifecycleEvents.off(\n        \"ComponentLifecycle:allBound\",\n        this.afterAllBind,\n        this\n      );\n      this.lifecycleEvents.off(\n        \"ComponentLifecycle:error\",\n        this.afterAllBind,\n        this\n      );\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when the custom element is first connected to the document's DOM.\n   */\n  protected connectedCallback() {\n    try {\n      this._disconnected = false;\n      this._connected = true;\n      super.connectedCallback();\n      this.lifecycleEvents.trigger(\n        \"Component:connected\",\n        this.getLifecycleEventData()\n      );\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when one of the custom element's attributes is added, removed, or changed.\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected async attributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    try {\n      super.attributeChangedCallback(\n        attributeName,\n        oldValue,\n        newValue,\n        namespace\n      );\n      await this.bindIfReady();\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  /**\n   * Extra call formatter to avoid the \"this\" context problem\n   */\n  protected callFormatterHandler(self: this): any {\n    return {\n      name: \"call\",\n      read: (fn: (...args: any[]) => any, ...args: any[]) => {\n        if (!fn) {\n          throw new Error(\n            `[${self.tagName}] Can not use \"call\" formatter: fn is undefined!`\n          );\n        }\n        return fn.apply(self, args);\n      },\n    };\n  }\n\n  /**\n   * Extra args formatter to avoid the \"this\" context problem\n   *\n   * Sets arguments to a function without directly call them\n   * @param fn The function you wish to call\n   * @param args the parameters you wish to call the function with\n   */\n  protected argsFormatterHandler(self: this): Formatter {\n    return {\n      name: \"args\",\n      read: (fn: (...args: any[]) => any, ...fnArgs: any[]) => {\n        return (event: Event, scope: any, el: HTMLElement, binding: Binder) => {\n          if (!fn) {\n            throw new Error(\n              `[${self.tagName}] Can not use \"args\" formatter: fn is undefined!`\n            );\n          }\n\n          // append the event handler args to passed args\n          fnArgs.push(event);\n          fnArgs.push(scope);\n          fnArgs.push(el);\n          fnArgs.push(binding);\n          return fn.apply(self, fnArgs);\n        };\n      },\n    };\n  }\n\n  protected async bind() {\n    if (this.binds || this.bound) {\n      // this.debug(\"component already bound\");\n      return this.view;\n    }\n\n    if (!this.checkRequiredAttributes()) {\n      this.debug(\"Not all required attributes are set for bind\");\n      return;\n    }\n\n    try {\n      await this._beforeBind();\n      await this.beforeBind();\n\n      this.riba = new Riba();\n      this.view = this.getView();\n      if (this.view) {\n        this.scope = this.view.models;\n        this.view.bind();\n      }\n\n      await this._afterBind();\n      await this.afterBind();\n    } catch (error) {\n      this._binds = false;\n      this._bound = false;\n      this.throw(error as Error);\n    }\n\n    return this.view;\n  }\n\n  protected getView() {\n    try {\n      const viewOptions = this.riba?.getViewOptions({\n        handler: this.eventHandler(this),\n        formatters: {\n          call: this.callFormatterHandler(this),\n          args: this.argsFormatterHandler(this),\n        },\n      });\n\n      if (viewOptions) {\n        const view = new View(\n          Array.prototype.slice.call(this.childNodes),\n          this.scope,\n          viewOptions\n        );\n        return view;\n      }\n      return null;\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  public async unbind() {\n    try {\n      if (this.view) {\n        this._binds = false;\n        this._bound = false;\n        this.view.unbind();\n        this.view = null;\n      }\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  protected async build() {\n    try {\n      if (this.view) {\n        this.view.build();\n      }\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n}\n","import { Component, ScopeBase } from \"@ribajs/core\";\nimport { camelCase, parseJsonString, parseType } from \"@ribajs/utils\";\n\nexport type AttributeType = string;\n\nexport interface TemplateAttribute {\n  name: string;\n  type?: AttributeType;\n  required?: boolean;\n}\n\nexport type TemplateAttributes = Array<TemplateAttribute>;\n\nexport interface Scope extends ScopeBase {\n  items?: Array<any>;\n}\n\nexport abstract class TemplatesComponent extends Component {\n  protected templateAttributes: TemplateAttributes = [];\n\n  protected templateReady = false;\n\n  public abstract scope: Scope;\n\n  protected connectedCallback() {\n    this.addItemsByTemplate();\n    super.connectedCallback();\n    this.removeTemplates();\n    this.bindIfReady();\n  }\n\n  protected ready() {\n    return super.ready() && this.templateReady;\n  }\n\n  /**\n   * Called before getting attribute value, use this method to transform the attribute value if you wish\n   * @param name Attribute name\n   * @param value Attribute value\n   */\n  protected transformTemplateAttribute(\n    name: string,\n    value: any,\n    type?: AttributeType\n  ) {\n    switch (type) {\n      case \"number\":\n        return Number(value);\n      case \"boolean\":\n        return value === \"true\";\n      case \"string\":\n        if (typeof value === \"string\") {\n          return value;\n        }\n        if (typeof value?.toString === \"function\") {\n          return value.toString();\n        }\n      case \"object\":\n        return parseJsonString(value);\n    }\n    return parseType(value).value;\n  }\n\n  /**\n   * Called before getting all attribute values, use this method to transform the attribute values if you wish\n   * @param attributes\n   */\n  protected transformTemplateAttributes(attributes: any, index: number) {\n    attributes.index = attributes.index || index;\n    return attributes;\n  }\n\n  protected getTemplateAttributes(\n    tpl: HTMLTemplateElement | HTMLElement,\n    index: number\n  ) {\n    const attributes: any = {};\n    for (const attribute of this.templateAttributes) {\n      const attrValue = tpl.getAttribute(attribute.name);\n      if (typeof attrValue !== \"string\" && attribute.required) {\n        console.error(\n          new Error(`template \"${attribute.name}\" attribute is required!`)\n        );\n      } else {\n        attributes[camelCase(attribute.name)] = this.transformTemplateAttribute(\n          attribute.name,\n          tpl.getAttribute(attribute.name)\n        );\n      }\n    }\n    return this.transformTemplateAttributes(attributes, index);\n  }\n\n  protected addItemByTemplate(\n    tpl: HTMLTemplateElement | HTMLElement,\n    index: number\n  ) {\n    const attributes = this.getTemplateAttributes(tpl, index);\n    const content = tpl.innerHTML;\n    if (!this.scope.items) {\n      this.scope.items = [];\n    }\n    this.scope.items.push({ ...attributes, content });\n  }\n\n  protected addItemsByTemplate() {\n    const templates = this.querySelectorAll<HTMLTemplateElement | HTMLElement>(\n      \"template, .template\"\n    );\n    for (let index = 0; index < templates.length; index++) {\n      const tpl = templates[index];\n\n      this.addItemByTemplate(tpl, index);\n    }\n    this.templateReady = true;\n  }\n\n  protected removeTemplates() {\n    const templates = this.querySelectorAll<HTMLTemplateElement | HTMLElement>(\n      \"template, .template\"\n    );\n    for (let index = 0; index < templates.length; index++) {\n      const tpl = templates[index];\n      this.removeChild(tpl);\n    }\n  }\n\n  protected hasOnlyTemplateChilds() {\n    return !Array.from(this.children).some(\n      (child) =>\n        child.nodeName !== \"TEMPLATE\" &&\n        !child.classList?.contains(\"template\") &&\n        child.nodeName !== \"#text\"\n    );\n  }\n}\n","import {\n  isString,\n  isObject,\n  isDefined,\n  isNumber,\n} from \"@ribajs/utils/src/type.js\";\n\n/**\n * Returns true if an object, array or string contains an index, object, property or substring.\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const containsFormatter = {\n  name: \"contains\",\n  read(value: string | any | any[], attr: string | number, search: string) {\n    if (isString(value)) {\n      return value.indexOf(attr) > -1;\n    } else if (Array.isArray(value)) {\n      if (!isNumber(attr)) {\n        console.warn(\n          \"[containsFormatter] The second parameter must be of type number for arrays but is \" +\n            typeof attr\n        );\n      }\n      attr = Number(attr);\n      if (isDefined(attr)) {\n        if (isDefined(search)) {\n          return value[attr] === search;\n        } else {\n          return value.includes(attr);\n        }\n      }\n    } else if (isObject(value)) {\n      if (isDefined(attr)) {\n        if (isDefined(search)) {\n          return value[attr] === search;\n        } else {\n          if (!isString(attr)) {\n            console.warn(\n              \"[containsFormatter] The second parameter must be of type string for objects\" +\n                typeof attr\n            );\n          }\n\n          return Object.keys(value).includes(String(attr));\n        }\n      }\n    }\n    return false;\n  },\n};\n","/**\n * Returns the size of a string (the number of characters) or an array (the number of elements).\n * @see https://help.shopify.com/themes/liquid/filters/array-filters#size\n */\nexport const sizeFormatter = {\n  name: \"size\",\n  read(value: any[] | string) {\n    return value && value.length ? value.length : 0;\n  },\n};\n","import { sizeFormatter } from \"./size.formatter.js\";\n\nexport const emptyFormatter = {\n  name: \"empty\",\n  read(a: any[] | string) {\n    return sizeFormatter.read(a) <= 0;\n  },\n};\n","import { isObject, isString, isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Get property of object or get item by index of array\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const getFormatter = {\n  name: \"get\",\n  read(value: any | any[] | string, key: string | number) {\n    if (isObject(value) || Array.isArray(value)) {\n      return value[key];\n    }\n    if (isString(value)) {\n      if (isNumber(key)) {\n        return (value as string).charAt(key as number);\n      }\n    }\n    return null;\n  },\n};\n","import { getFormatter } from \"./get.formatter.js\";\n\n/**\n * Array formatter to get the first element of an array\n */\nexport const firstFormatter = {\n  name: \"first\",\n  read(value: any | any[] | string) {\n    return getFormatter.read(value, 0);\n  },\n};\n","/**\n * Returns true if value index is the last index of the array. Returns false if it is not the last index.\n * ```\n *  <div rv-each-image=\"product.images\" rv-hide=\"product.images | last %image%\"></div>\n * ```\n * @see https://help.shopify.com/themes/liquid/objects/for-loops#forloop-last\n */\nexport const isLastFormatter = {\n  name: \"isLast\",\n  read(array: any[], i: number) {\n    return array.length === i + 1;\n  },\n};\n","import { getFormatter } from \"./get.formatter.js\";\n\n/**\n * Array formatter to get the last element of an array\n */\nexport const lastFormatter = {\n  name: \"last\",\n  read(array: any[]) {\n    return getFormatter.read(array, array.length - 1);\n  },\n};\n","import { isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Gets back random value of array\n * @example <div rv-add-class='\"[\"col-2\", \"col-3\", \"col-4\", \"col-5\", \"col-6\"]\" | parse | random'>\n *\n * Or gets back a randon number\n * Random number between 0 and 6:\n * @example <div rv-add-class='6 | random'>\n * Random number between 1 and 6:\n * @example <div rv-add-class='6 | random 1'>\n */\nexport const randomFormatter = {\n  name: \"random\",\n  read(arrayOrMaxNumber: any, min = 0) {\n    // If is array\n    if (Array.isArray(arrayOrMaxNumber)) {\n      return arrayOrMaxNumber[\n        Math.floor(Math.random() * arrayOrMaxNumber.length)\n      ];\n    }\n    // If is number\n    if (isNumber(arrayOrMaxNumber)) {\n      const max = arrayOrMaxNumber as number;\n      return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n    return null;\n  },\n};\n","import { isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Array formatter to get a subarray from array\n */\nexport const rangeFormatter = {\n  name: \"range\",\n  read(arr: any[], start: number, end: number) {\n    start = Number(isNumber(start) ? start : 0);\n    end = Number(isNumber(end) ? end : arr.length - 1);\n    if (end > arr.length - 1) {\n      end = arr.length - 1;\n    }\n    if (start > end) {\n      return [];\n    }\n    return arr.slice(Number(start || 0), 1 + end);\n  },\n};\n","import { isObject } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Sets property of object, array or value\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const setFormatter = {\n  name: \"set\",\n  read(obj: any | any[], key: string | number, value?: any) {\n    // the key is the value if value is not set\n    if (!value) {\n      value = key;\n    }\n\n    if (isObject(obj) || Array.isArray(obj)) {\n      obj[key] = value;\n    } else {\n      obj = value;\n    }\n    return obj;\n  },\n};\n","/**\n * Returns true if an array overlaps with another array.\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const overlapsFormatter = {\n  name: \"overlaps\",\n  read(value: any[], search: any[]) {\n    for (const a of value) {\n      for (const b of search) {\n        if (a.equals && a.equals(b)) {\n          return true;\n        }\n        if (a === b) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n};\n","/**\n * Joins value with a given delimeter\n */\nexport const joinFormatter = {\n  name: \"join\",\n  read(value: any[], delimeter: string | undefined) {\n    return value.join(delimeter);\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a && b\n */\nexport const andFormatter: Formatter = {\n  name: \"and\",\n  read(a: boolean, b: boolean) {\n    return a && b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a >= b && a <= c\n */\nexport const betweenFormatter: Formatter = {\n  name: \"between\",\n  read(num: number, ...nums: any[]) {\n    return num >= nums[0] && num <= nums[1];\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * equal or greater than\n * a >= b\n */\nexport const egtFormatter: Formatter = {\n  name: \"egt\",\n  read(a: number, b: number) {\n    return a >= b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a === b\n */\nexport const eqFormatter: Formatter = {\n  name: \"eq\",\n  read(a: any, b: any) {\n    return a === b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * greater than\n * a > b\n */\nexport const gtFormatter: Formatter = {\n  name: \"gt\",\n  read(a: number, b: number) {\n    return a > b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a !== b\n */\nexport const neFormatter: Formatter = {\n  name: \"ne\",\n  read(a: any, b: any) {\n    return a !== b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * lower than\n * a < b\n */\nexport const ltFormatter: Formatter = {\n  name: \"lt\",\n  read(a: number, b: number) {\n    return a < b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * euqal or lower than\n * a <= b\n */\nexport const eltFormatter: Formatter = {\n  name: \"elt\",\n  read(a: number, b: number) {\n    return a <= b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a || b\n */\nexport const orFormatter: Formatter = {\n  name: \"or\",\n  read(a: boolean, b: boolean) {\n    return a || b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * !a\n */\nexport const notFormatter: Formatter = {\n  name: \"not\",\n  read(a: boolean) {\n    return !a;\n  },\n};\n","/**\n * Adds a number to an value.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#plus\n */\nexport const plusFormatter = {\n  name: \"plus\",\n  read(a: string | number, b: string | number) {\n    return Number(a) + Number(b);\n  },\n};\n","/**\n * Subtracts a number from an output.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#minus\n */\nexport const minusFormatter = {\n  name: \"minus\",\n  read(a: string | number, b: string | number) {\n    return Number(a) - Number(b);\n  },\n};\n","/**\n * Multiplies an value by a number.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#times\n */\nexport const timesFormatter = {\n  name: \"times\",\n  read(a: string | number, b: string | number) {\n    return Number(a) * Number(b);\n  },\n};\n","/**\n * Divides an output by a number. The output is rounded down to the nearest integer.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#divided_by\n */\nexport const dividedByFormatter = {\n  name: \"dividedBy\",\n  read(a: string | number, b: string | number) {\n    return Number(a) / Number(b);\n  },\n};\n","/**\n * Divides an value by a number and returns the remainder.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#modulo\n */\nexport const moduloFormatter = {\n  name: \"modulo\",\n  read(a: string | number, b: string | number) {\n    return Number(a) % Number(b);\n  },\n};\n","/**\n * Greatest common divisor (GCD) useful to calculate a ratio\n * @see https://stackoverflow.com/a/1186465/1465919\n */\nconst _gcd = (a: number, b: number): number => {\n  return b === 0 ? a : _gcd(b, a % b);\n};\n\nexport const gcdFormatter = {\n  name: \"gcd\",\n  read: _gcd,\n};\n","/**\n * Check if a number is even or not\n */\nexport const evenFormatter = {\n  name: \"even\",\n  read(num: number) {\n    return num % 2 === 0;\n  },\n};\n","export const unevenFormatter = {\n  name: \"uneven\",\n  read(num: number) {\n    return num % 2 !== 0;\n  },\n};\n","import { justDigits, isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Just get the digits of a string, useful to remove px from css value\n * @see http://stackoverflow.com/a/1100653/1465919\n */\nexport const digitsFormatter = {\n  name: \"digits\",\n  read(str: string) {\n    if (isNumber(str)) {\n      return str;\n    }\n    return justDigits(str);\n  },\n};\n","import type { Formatter } from \"../../types/index.js\";\nimport { FormatterFuntionParam } from \"./call.formatter.js\";\nimport { Binder } from \"../../binder.js\";\n\n/**\n * Sets arguments to a function without directly call them\n * ```html\n * <button rv-on-click=\"sum | args 1 2\"></button>\n * ```\n * @param fn The function the event handler should call\n * @param fnArgs the parameters you wish to get called the function with\n */\nexport const argsFormatter: Formatter = {\n  name: \"args\",\n  read(fn: FormatterFuntionParam, ...fnArgs: any[]) {\n    return (event: Event, scope: any, el: HTMLElement, binder: Binder) => {\n      // append the event handler args to passed args\n      fnArgs.push(event);\n      fnArgs.push(scope);\n      fnArgs.push(el);\n      fnArgs.push(binder);\n      return fn.apply(this, fnArgs);\n    };\n  },\n};\n","import { Formatter } from \"@ribajs/core\";\n\nexport const debugFormatter: Formatter = {\n  name: \"debug\",\n  read(\n    toPrint: any,\n    level: \"log\" | \"debug\" | \"info\" | \"error\" | \"warn\" = \"debug\"\n  ) {\n    console[level](toPrint);\n    return toPrint;\n  },\n};\n","import { isString, isDefined } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Sets a default value if the first value is not set\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const defaultFormatter = {\n  name: \"default\",\n  read(value: any, defaultValue: any) {\n    if (isDefined(value)) {\n      if (isString(value)) {\n        if (value.length > 0) {\n          return value;\n        } else {\n          return defaultValue;\n        }\n      }\n      if (value === null) {\n        return defaultValue;\n      }\n      return value;\n    }\n    return defaultValue;\n  },\n};\n","import { isDesktop } from \"@ribajs/utils\";\n\nexport const isDesktopFormatter = {\n  name: \"is-desktop\",\n  read() {\n    return isDesktop();\n  },\n};\n","import { isMobile } from \"@ribajs/utils\";\n\nexport const isMobileFormatter = {\n  name: \"is-mobile\",\n  read() {\n    return isMobile();\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n// babel misinterprets the \"this\" fake parameter, so we define it in this interfaces\nexport type FormatterFuntionParam = (this: any, ...args: any[]) => any;\n\n/**\n * Calls a function with arguments\n * @param fn The function you wish to call\n * @param args the parameters you wish to call the function with\n */\nexport const callFormatter: Formatter = {\n  name: \"call\",\n  read(fn: FormatterFuntionParam, ...args: any[]) {\n    return fn.apply(this, args);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Calls a function by name with arguments\n * @param object The object that contains the function you wish to call\n * @param name The name of the function you wish to call\n * @param args the parameters you wish to call the function with\n */\nexport const callNameFormatter: Formatter = {\n  name: \"call-name\",\n  read: function (object: any, name: string, ...args: any[]) {\n    return object[name](...args);\n  },\n};\n","/* eslint-disable prefer-spread */\n/* eslint-disable prefer-rest-params */\nimport { Formatter } from \"@ribajs/core\";\n\n/**\n * Calls a method on the given object. The first parameters defines the object and the second the methodname.\n * Target will be passed as the first argument to the method.\n * @see https://github.com/matthieuriolo/rivetsjs-stdlib#map\n * @example\n * ```html\n * <span rv-text=\"10 | map 'Math' 'sin'\"></span>\n * ```\n * @returns e.g. as in the example: `<span>-0.5440211108893699</span>`\n */\nexport const mapFormatter: Formatter = {\n  name: \"map\",\n  /**\n   * Calls a method on the given object. The first parameters defines the object and the second the method name.\n   * Target will be passed as the first argument to the method.\n   * @see https://github.com/matthieuriolo/rivetsjs-stdlib#map\n   * @example\n   * ```html\n   * <span rv-text=\"10 | map 'Math' 'sin'\"></span>\n   * ```\n   * @returns e.g. as in the example: `<span>-0.5440211108893699</span>`\n   * @param target\n   * @param obj\n   * @param prop\n   */\n  read(target: any, obj: any, prop: string) {\n    const args = Array.prototype.slice.call(arguments);\n    args.splice(1, 2);\n    return obj[prop].apply(obj, args);\n  },\n};\n","import { getOS } from \"@ribajs/utils\";\n\nexport const osFormatter = {\n  name: \"os\",\n  read() {\n    return getOS();\n  },\n};\n","/**\n * Prefers the first formatter parameter before left parameter\n */\nexport const preferFormatter = {\n  name: \"prefer\",\n  read(value: any, preferValue: any) {\n    return preferValue || value;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a ? b : c\n */\nexport const ternaryFormatter: Formatter = {\n  name: \"ternary\",\n  read(condition: any, yes, no) {\n    return condition ? yes : no;\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Appends characters to a string.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#append\n */\nexport const appendFormatter: Formatter = {\n  name: \"append\",\n  read(a: string, b: string) {\n    return a + b;\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { capitalize } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Uppercases the first letter of a string\n */\nexport const capitalizeFormatter: Formatter = {\n  name: \"capitalize\",\n  read(str: string) {\n    return capitalize(str);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Cats a string\n * If the first parameter is -1 the string will not be uncut\n * @example\n * <p rv-text=\"'abcdefghijklnmopqrstuvwxyzabcdefghijklnmopqrstuvwxyz' | cut 3 '...'\"></p>\n * -> <p>abc...</p>\n *\n * <p rv-text=\"'abcdefghijklnmopqrstuvwxyzabcdefghijklnmopqrstuvwxyz' | cut 3\"></p>\n * -> <p>abc</p>\n */\nexport const cutFormatter: Formatter = {\n  name: \"cut\",\n  read(str: string, cutAt: number, delimitation = \"\") {\n    if (!str) {\n      return \"\";\n    }\n    if (typeof str !== \"string\") {\n      console.warn(\"[cutFormatter] Value must be of type string\");\n      return str;\n    }\n    if (str.length > cutAt) {\n      return str.substring(cutAt, cutAt === -1 ? undefined : -1) + delimitation;\n    } else {\n      return str;\n    }\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Converts a string into lowercase.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#downcase\n */\nexport const downcaseFormatter: Formatter = {\n  name: \"downcase\",\n  read(str: string) {\n    return str.toLowerCase();\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Returns true if the sequence of elements of searchString converted to a String is the same as the corresponding elements of this object (converted to a String) starting at endPosition – length(this).\n * Otherwise returns false.\n *\n * @example\n * <p rv-if=\"'abcdefg' | ends-with 'efg'\">Hello World!</p>\n * -> <p>Hello World!</p>\n */\nexport const endsWithFormatter: Formatter = {\n  name: \"ends-with\",\n  read(str: string, checkStart: string) {\n    if (typeof str !== \"string\") {\n      console.warn(\"[endsWithFormatter] Value must be of type string\");\n      return str;\n    }\n    return str.endsWith(checkStart);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { emptyFormatter } from \"../array/empty.formatter.js\";\nimport { isString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Check if value is a string and not empty\n */\nexport const filledFormatter: Formatter = {\n  name: \"filled\",\n  read(str: string) {\n    return isString(str) && !emptyFormatter.read(str.replace(/\\s/g, \"\"));\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { handleize } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Formats a string into a handle.\n * E.g. '100% M & Ms!!!' -> 100-m-ms\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#handle-handleize\n */\nexport const handleizeFormatter: Formatter = {\n  name: \"handleize\",\n  read(str: string) {\n    if (!str) {\n      console.warn(\"[handleizeFormatter] str is not set\");\n      return \"\";\n    }\n    return handleize(str);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\nexport const matchFormatter: Formatter = {\n  name: \"match\",\n  read(a: string, regexp: string, flags?: string) {\n    if (!a || !regexp) {\n      return false;\n    }\n    return a.match(new RegExp(regexp, flags));\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * The padStart formatter pads the current string with another string (multiple times, if needed) until the resulting string reaches the given length.\n * The padding is applied from the start of the current string.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\n */\nexport const padStartFormatter: Formatter = {\n  name: \"padStart\",\n  /**\n   * The padStart formatter pads the current string with another string (multiple times, if needed) until the resulting string reaches the given length.\n   * The padding is applied from the start of the current string.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\n   * @param target\n   * @param length The length of the resulting string once the current `str` has been padded. If the value is less than `str.length`, then `str` is returned as-is.\n   * @param padString The string to pad the current `str` with. If `padString` is too long to stay within the `targetLength`, it will be truncated from the end. The default value is `\" \"` (`U+0020 'SPACE'`).\n   */\n  read(target: string, length = 2, padString = \"0\") {\n    return target.padStart(length, padString);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * The padEnd formatters pads the current string with a given string (repeated, if needed) so that the resulting string reaches a given length.\n * The padding is applied from the end of the current string.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n */\nexport const padEndFormatter: Formatter = {\n  name: \"padEnd\",\n  /**\n   *\n   * The padEnd formatters pads the current string with a given string (repeated, if needed) so that the resulting string reaches a given length.\n   * The padding is applied from the end of the current string.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n   *\n   * @param target\n   * @param length The length of the resulting string once the current `str` has been padded. If the value is lower than `str.length`, the current string will be returned as-is.\n   * @param padString The string to pad the current `str` with. If `padString` is too long to stay within `targetLength`, it will be truncated: for left-to-right languages the left-most part and for right-to-left languages the right-most will be applied. The default value for this parameter is \" \" (`U+0020`).\n   */\n  read(target: string, length = 2, padString = \"0\") {\n    return target.padEnd(length, padString);\n  },\n};\n","import { Formatter } from \"@ribajs/core\";\n\n/**\n * Returns the integer representation of the given target.\n * @see https://github.com/matthieuriolo/rivetsjs-stdlib/blob/master/src/rivetsstdlib.js#L128\n */\nexport const toIntegerFormatter: Formatter = {\n  name: \"to-integer\",\n  /**\n   * Returns the integer representation of the given target.\n   * @param target\n   */\n  read(target: any) {\n    const ret = parseInt((target * 1) as any, 10);\n    return isNaN(ret) ? 0 : ret;\n  },\n};\n","import { Formatter } from \"@ribajs/core\";\n\n/**\n * Returns the float representation of the given target\n * @see https://github.com/matthieuriolo/rivetsjs-stdlib/blob/master/src/rivetsstdlib.js#L133\n */\nexport const toFloatFormatter: Formatter = {\n  name: \"to-float\",\n  /**\n   * Returns the integer representation of the given target.\n   * @param target\n   */\n  read(target: any) {\n    const ret = parseFloat((target * 1.0) as any);\n    return isNaN(ret) ? 0.0 : ret;\n  },\n};\n","import { Formatter } from \"@ribajs/core\";\nimport { toIntegerFormatter } from \"./to-integer.formatter.js\";\nimport { toFloatFormatter } from \"./to-float.formatter.js\";\n\nexport const toDecimalFormatter: Formatter = {\n  name: \"to-decimal\",\n  read(target: any) {\n    if (!toIntegerFormatter.read) {\n      throw new Error(\"toIntegerFormatter must have a read function\");\n    }\n    if (!toFloatFormatter.read) {\n      throw new Error(\"toFloatFormatter must have a read function\");\n    }\n    const retI = toIntegerFormatter.read(target * 1);\n    const retF = toFloatFormatter.read(target);\n    return retI == retF ? retI : retF;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n\n/**\n * Checks if value is a number\n * @see https://github.com/matthieuriolo/rivetsjs-stdlib/blob/master/src/rivetsstdlib.js#L82\n */\nexport const isIntegerFormatter: Formatter = {\n  name: \"is-integer\",\n  read(n: number) {\n    /**\n     * Thanks a lot to Dagg Nabbit\n     * http://stackoverflow.com/questions/3885817/how-to-check-if-a-number-is-float-or-integer\n     */\n    return n === +n && n === (n | 0);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { isNumber } from \"@ribajs/utils/src/type.js\";\nimport { toDecimalFormatter } from \"../type/to-decimal.formatter.js\";\nimport { isIntegerFormatter } from \"../type/is-integer.formatter.js\";\n\n// TODO set by current locale\nconst DEFAULT_DECIMAL_SEPARATOR = \".\";\nconst DEFAULT_THOUSAND_SEPARATOR = \"'\";\nconst DEFAULT_PRECISION = 2;\n\n/**\n * Returns a formatted version of the target as string.\n * The number will always be rounded after the DIN 1333 (1.55 => 1.6 and -1.55 => -1.6)\n */\nexport const numberFormatFormatter: Formatter = {\n  name: \"numberFormat\",\n  /**\n   * Returns a formatted version of the target as string.\n   * The number will always be rounded after the DIN 1333 (1.55 => 1.6 and -1.55 => -1.6)\n   * @param target\n   * @param precision (default: 2)\n   * @param decimalSeparator (default: \".\")\n   * @param thousandSeparator (default: \"'\")\n   */\n  read(\n    target: number,\n    precision = DEFAULT_PRECISION,\n    decimalSeparator = DEFAULT_DECIMAL_SEPARATOR,\n    thousandSeparator = DEFAULT_THOUSAND_SEPARATOR\n  ) {\n    if (!toDecimalFormatter.read) {\n      throw new Error(\"toDecimalFormatter must have a read function\");\n    }\n    if (!isIntegerFormatter.read) {\n      throw new Error(\"isIntegerFormatter must have a read function\");\n    }\n    target = isNumber(target) ? target : toDecimalFormatter.read(target);\n\n    if (!isIntegerFormatter.read(precision)) {\n      precision = DEFAULT_PRECISION;\n    }\n\n    /*\n     * Thanks to user2823670\n     * http://stackoverflow.com/questions/10015027/javascript-tofixed-not-rounding\n     */\n    let retStr = (+(\n      Math.round(+(Math.abs(target) + \"e\" + precision)) +\n      \"e\" +\n      -precision\n    )).toFixed(precision);\n    if (target < 0) retStr = \"-\" + retStr;\n\n    /**\n     * Thanks to Elias Zamaria\n     * http://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n     */\n    const ret = retStr.split(\".\");\n    if (ret.length == 2) {\n      return (\n        ret[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandSeparator) +\n        decimalSeparator +\n        ret[1]\n      );\n    }\n\n    return ret[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandSeparator);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\nexport const pluralizeFormatter: Formatter = {\n  name: \"pluralize\",\n  read(input: any, singular: string, plural: string) {\n    if (plural === null) {\n      plural = singular + \"s\";\n    }\n    if (Array.isArray(input)) {\n      input = input.length;\n    }\n    if (input === 1) {\n      return singular;\n    } else {\n      return plural;\n    }\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Prepends characters to a string.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#prepend\n */\nexport const prependFormatter: Formatter = {\n  name: \"prepend\",\n  read(a: string, b: string) {\n    return b + a;\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Converts a string into uppercase.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#upcase\n */\nexport const upcaseFormatter: Formatter = {\n  name: \"upcase\",\n  read(str: string) {\n    return str.toUpperCase();\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Replaces all occurrences of a string with a substring.\n * @see https://help.shopify.com/en/themes/liquid/filters/string-filters#replace\n */\nexport const replaceFormatter: Formatter = {\n  name: \"replace\",\n  read(str: string, value: string, replaceValue: string) {\n    return str.replace(new RegExp(value, \"g\"), replaceValue);\n  },\n};\n","/* tslint:disable:variable-name */\nimport { Formatter } from \"../../types/index.js\";\n\n/**\n * Replaces the first occurrence of a string with a substring.\n * @see https://help.shopify.com/en/themes/liquid/filters/string-filters#replace_first\n */\nexport const replaceFirstFormatter: Formatter = {\n  name: \"replaceFirst\",\n  read(str: string, value: string, replaceValue: string) {\n    return str.replace(value, replaceValue);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * The `slice` formatter returns a substring, starting at the specified index.\n * An optional second parameter can be passed to specify the length of the substring.\n * If no second parameter is given, the substring continues to the end of string.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#slice\n */\nexport const sliceFormatter: Formatter = {\n  name: \"slice\",\n  read(value: any, start: number, end: number) {\n    return value.slice(start, end);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Returns true if the sequence of elements of searchString converted to a String is the same as the corresponding elements of this object (converted to a String) starting at position.\n * Otherwise returns false.\n *\n * @example\n * <p rv-if=\"'abcdefg' | starts-with 'abc'\">Hello World!</p>\n * -> <p>Hello World!</p>\n */\nexport const startsWithFormatter: Formatter = {\n  name: \"starts-with\",\n  read(str: string, checkStart: string) {\n    if (typeof str !== \"string\") {\n      console.warn(\"[startsWithFormatter] Value must be of type string\");\n      return str;\n    }\n    return str.startsWith(checkStart);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Strips tabs, spaces, and newlines (all whitespace) from the left and right side of a string.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#strip\n */\nexport const stripFormatter: Formatter = {\n  name: \"strip\",\n  read(str: string) {\n    return str.trim();\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { stripHtml } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Strips all HTML tags from a string.\n * @see https://help.shopify.com/en/themes/liquid/filters/string-filters#strip_html\n */\nexport const stripHtmlFormatter: Formatter = {\n  name: \"strip-html\",\n  read(html: string) {\n    return stripHtml(html);\n  },\n};\n","/**\n * Converts a variable to boolean\n */\nexport const booleanFormatter = {\n  name: \"boolean\",\n  read(value: string | boolean) {\n    if (value === \"true\") {\n      return true;\n    } else if (value === \"false\") {\n      return false;\n    } else {\n      return !!value;\n    }\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n\n/**\n * Checks if value is an array\n */\nexport const isArrayFormatter: Formatter = {\n  name: \"is-array\",\n  read: Array.isArray,\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isBoolean } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Checks if value is an boolean\n */\nexport const isBooleanFormatter: Formatter = {\n  name: \"is-boolean\",\n  read: isBoolean,\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isDefined } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Checks if value is defined\n */\nexport const isDefinedFormatter: Formatter = {\n  name: \"is-defined\",\n  read: isDefined,\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Checks if value is a number\n */\nexport const isNumberFormatter: Formatter = {\n  name: \"is-number\",\n  read: isNumber,\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isObject } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Checks if value is a object\n */\nexport const isObjectFormatter: Formatter = {\n  name: \"is-object\",\n  read: isObject,\n};\n","import { isString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Check if value is a string\n */\nexport const isStringFormatter = {\n  name: \"is-string\",\n  read(str: string) {\n    return isString(str);\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isUndefined } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Check if value is undefined\n */\nexport const isUndefinedFormatter: Formatter = {\n  name: \"is-undefined\",\n  read: isUndefined,\n};\n","import { jsonStringify } from \"@ribajs/utils\";\n\n/**\n * Converts a string into a JSON string.\n */\nexport const jsonFormatter = {\n  name: \"json\",\n  read(object: any, space = 2, replaceSingleQuote = true) {\n    return jsonStringify(object, space, replaceSingleQuote);\n  },\n};\n","import { isObject, parseType } from \"@ribajs/utils/src/type.js\";\n\n/**\n * parse json, base64 or any other value string to to its real value\n * @example <div rv-add-class='\"[\"col-2\", \"col-3\", \"col-4\", \"col-5\", \"col-6\"]\" | parse | random'>\n */\nexport const parseFormatter = {\n  name: \"parse\",\n  read(str?: any) {\n    if (\n      isObject(str as any) ||\n      Array.isArray(str as any) ||\n      typeof str === \"boolean\" ||\n      typeof str === \"number\"\n    ) {\n      console.warn(\n        \"[parseFormatter] You do not need to parse the value because since it already been parsed\"\n      );\n      return str;\n    }\n\n    if (typeof str === \"string\") {\n      return parseType(str, true).value;\n    } else {\n      return null;\n    }\n  },\n};\n","import { toBase64 } from \"@ribajs/utils\";\n\n/**\n * Decodes a string into a base64 string.\n */\nexport const toBase64Formatter = {\n  name: \"toBase64\",\n  read(object: any) {\n    return toBase64(object);\n  },\n};\n","import { isObject, getString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Parses a value to string\n * @param value The value you want to parse to string\n * @param def Default value if value is undefined\n */\nexport const toStringFormatter = {\n  name: \"to-string\",\n  read(value: any, def: string) {\n    // If value is an array convert each value in array to string\n    if (Array.isArray(value)) {\n      for (const i in value as Array<any>) {\n        if (value[i]) {\n          value[i] = getString(value[i]);\n        }\n      }\n    } else if (isObject(value)) {\n      for (const key in value) {\n        value[key] = getString(value[key]);\n      }\n    } else {\n      value = getString(value);\n    }\n\n    // If default value is set return the default value if num is 0, null or undefined\n    if (def) {\n      return value ? value : def;\n    }\n\n    return value;\n  },\n};\n","import { getNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Parse a string to number / float\n * @see http://stackoverflow.com/a/1100653/1465919\n */\nexport const toNumberFormatter = {\n  name: \"to-number\",\n  read(str: string, def: number) {\n    const num = getNumber(str);\n    // If default value is set return the default value if num is 0, null or undefined\n    if (def) {\n      return num ? num : def;\n    }\n    return num;\n  },\n};\n","import { RibaModule, CoreModuleOptions } from \"./types/index.js\";\nimport * as binders from \"./binders/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as components from \"./components/index.js\";\nimport * as adapters from \"./adapters/index.js\";\n\nexport const coreModule: RibaModule<CoreModuleOptions> = {\n  formatters,\n  binders,\n  services,\n  components,\n  adapters,\n  init(options = {}) {\n    services.CoreService.setSingleton(options);\n\n    window.onerror = (msg, url, line, col, error) => {\n      console.error(msg, url, line, col, error);\n    };\n    window.addEventListener(\"error\", (event: Event) => {\n      console.error(event);\n    });\n\n    return this;\n  },\n};\n","import { State } from \"../types/state.js\";\n/**\n * HistoryManager helps to keep track of the navigation\n */\nexport class HistoryManager {\n  private static instance: HistoryManager;\n\n  /**\n   * Keep track of the status in historic order\n   */\n  private readonly history: State[] = [];\n\n  constructor() {\n    if (HistoryManager.instance) {\n      return HistoryManager.instance;\n    }\n\n    HistoryManager.instance = this;\n    return HistoryManager.instance;\n  }\n\n  /**\n   * Return information about the current status\n   */\n  public currentStatus(): State {\n    return this.history[this.history.length - 1];\n  }\n\n  /**\n   * Return information about the previous status\n   */\n  public prevStatus(): State | null {\n    const history = this.history;\n\n    if (history.length < 2) {\n      return null;\n    }\n\n    return history[history.length - 2];\n  }\n\n  /**\n   * Add a new set of url and namespace\n   */\n  public add(url: string, namespace: string | null = null) {\n    this.history.push({\n      namespace,\n      url,\n    });\n  }\n}\n","/**\n * Class append to links which have caused an error\n */\nexport const ROUTE_ERROR_CLASS = \"router-error\";\n/**\n * Class name used to ignore links\n */\nexport const IGNORE_CLASS_LINK = \"no-barba\";\n/**\n * Class name used to ignore prefetch on links\n */\nexport const IGNORE_CLASS_PREFETCH = \"no-barba-prefetch\";\n","import { deferred } from \"@ribajs/utils\";\nimport { Transition } from \"../../types/transition.js\";\n\n/**\n * BaseTransition to extend\n */\nexport abstract class BaseTransition implements Transition {\n  protected oldContainer?: HTMLElement;\n\n  protected newContainer?: HTMLElement;\n\n  protected newContainerLoading?: Promise<HTMLElement>;\n\n  protected deferred = deferred();\n\n  protected action: \"replace\" | \"append\";\n\n  constructor(action: \"replace\" | \"append\" = \"replace\") {\n    this.action = action;\n  }\n\n  /**\n   * This function is called from Pjax module to initialize\n   * the transition.\n   *\n   */\n  public async init(\n    oldContainer: HTMLElement,\n    newContainer: Promise<HTMLElement>\n  ): Promise<void> {\n    this.oldContainer = oldContainer;\n\n    this.deferred = deferred();\n    const newContainerLoading = deferred<HTMLElement>();\n    this.newContainerLoading = newContainerLoading.promise;\n\n    this.start();\n\n    this.newContainer = await newContainer;\n    newContainerLoading.resolve(this.newContainer);\n    return this.deferred.promise;\n  }\n\n  /**\n   * This function needs to be called as soon the Transition is finished\n   */\n  public async done() {\n    if (!this.oldContainer) {\n      throw new Error(\"Can't remove old container\");\n    }\n\n    if (this.action === \"replace\") {\n      this.oldContainer.remove();\n    }\n\n    if (!this.newContainer) {\n      throw new Error(\"Can't show new container\");\n    }\n    this.newContainer.style.visibility = \"visible\";\n    return this.deferred.resolve(undefined);\n  }\n\n  /**\n   * Constructor for your Transition\n   */\n  public abstract start(): void;\n}\n","import { BaseTransition } from \"./BaseTransition.js\";\nimport { Transition } from \"../../types/transition.js\";\n\ndeclare global {\n  // tslint:disable: interface-name\n  interface Window {\n    model: any;\n  }\n}\n\n/**\n * Basic Transition object, wait for the new Container to be ready,\n * scroll top, and finish the transition (removing the old container and displaying the new one)\n *\n * @private\n */\nclass CustomTransition extends BaseTransition implements Transition {\n  public async start() {\n    if (!this.newContainerLoading) {\n      throw new Error(\"this.newContainerLoading is not set\");\n    }\n    await this.newContainerLoading;\n    this.finish();\n    return;\n  }\n\n  public async finish() {\n    document.body.scrollTop = 0;\n    return this.done();\n  }\n}\n\nexport { CustomTransition };\n","import { BaseTransition } from \"./BaseTransition.js\";\nimport { Transition } from \"../../types/transition.js\";\nimport { scrollToPosition } from \"@ribajs/utils\";\n\n/**\n * Basic Transition object, wait for the new Container to be ready,\n * scroll top, and finish the transition (removing the old container and displaying the new one)\n *\n * @private\n */\nexport class FadeTransition extends BaseTransition implements Transition {\n  protected scrollToTop: boolean;\n  protected durationMs = 200;\n\n  constructor(scrollToTop = true) {\n    super(\"replace\");\n    this.scrollToTop = scrollToTop;\n  }\n\n  public async start() {\n    if (!this.newContainerLoading) {\n      throw new Error(\"this.newContainerLoading is not set\");\n    }\n\n    if (this.oldContainer) {\n      this.oldContainer.style.transition = `opacity ${this.durationMs}ms`;\n      this.oldContainer.style.opacity = \"0\";\n    }\n\n    if (this.scrollToTop) {\n      await scrollToPosition(window, \"start\", \"vertical\", \"smooth\");\n    }\n\n    const newContainer = await this.newContainerLoading;\n\n    newContainer.style.opacity = \"0\";\n    newContainer.style.transition = `opacity ${this.durationMs}ms`;\n\n    setTimeout(() => {\n      this.finish(newContainer);\n    }, this.durationMs);\n\n    return;\n  }\n\n  public async finish(newContainer: HTMLElement) {\n    newContainer.style.opacity = \"1\";\n    return this.done();\n  }\n}\n","import { BaseTransition } from \"./BaseTransition.js\";\nimport { Transition } from \"../../types/transition.js\";\nimport { scrollToPosition } from \"@ribajs/utils\";\n\n/**\n * Basic Transition object, wait for the new Container to be ready,\n * scroll top, and finish the transition (removing the old container and displaying the new one)\n *\n * @private\n */\nexport class HideShowTransition extends BaseTransition implements Transition {\n  protected action: \"replace\" | \"append\";\n\n  protected scrollToTop: boolean;\n\n  constructor(action: \"replace\" | \"append\" = \"replace\", scrollToTop = true) {\n    super(action);\n    this.action = action;\n    this.scrollToTop = scrollToTop;\n  }\n\n  public async start() {\n    if (!this.newContainerLoading) {\n      throw new Error(\"this.newContainerLoading is not set\");\n    }\n    if (this.oldContainer) {\n      this.oldContainer.style.display = \"none\";\n    }\n\n    if (this.scrollToTop) {\n      await scrollToPosition(window, \"start\", \"vertical\", \"smooth\");\n    }\n\n    await this.newContainerLoading;\n\n    await this.finish();\n\n    if (this.oldContainer) {\n      this.oldContainer.style.display = \"\";\n    }\n\n    return;\n  }\n\n  public async finish() {\n    return this.done();\n  }\n}\n","import { EventDispatcher } from \"@ribajs/events\";\nimport { State } from \"@ribajs/history\";\nimport { extend } from \"@ribajs/utils/src/type.js\";\n\n/**\n * BaseView to be extended\n */\nabstract class BaseView {\n  /**\n   * Namespace of the view.\n   * (need to be associated with the data-namespace of the container)\n   */\n  protected namespace?: string;\n\n  protected container?: HTMLElement;\n\n  private dispatcher = EventDispatcher.getInstance();\n\n  /**\n   * Helper to extend the object\n   */\n  public extend(obj: any) {\n    return extend({ deep: false }, this, obj);\n  }\n\n  /**\n   * Init the view.\n   * P.S. Is suggested to init the view before starting Barba.Pjax.start(),\n   * in this way .onEnter() and .onEnterCompleted() will be fired for the current\n   * container when the page is loaded.\n   */\n  public init() {\n    this.dispatcher.on(\n      \"initStateChange\",\n      (viewId: string, newStatus: State, oldStatus: State) => {\n        if (oldStatus && oldStatus.namespace === this.namespace) {\n          this.onLeave();\n        }\n      }\n    );\n\n    this.dispatcher.on(\n      \"newPageReady\",\n      (\n        viewId: string,\n        newStatus: State,\n        oldStatus: State,\n        container: HTMLElement /*, html: string, isInit: boolean*/\n      ) => {\n        this.container = container;\n        if (newStatus.namespace === this.namespace) {\n          this.onEnter();\n        }\n      }\n    );\n\n    this.dispatcher.on(\n      \"transitionCompleted\",\n      (viewId: string, newStatus: State, oldStatus: State) => {\n        if (newStatus.namespace === this.namespace) {\n          this.onEnterCompleted();\n        }\n\n        if (oldStatus && oldStatus.namespace === this.namespace) {\n          this.onLeaveCompleted();\n        }\n      }\n    );\n  }\n\n  /**\n   * This function will be fired when the container\n   * is ready and attached to the DOM.\n   */\n  protected abstract onEnter(): any;\n\n  /**\n   * This function will be fired when the transition\n   * to this container has just finished.\n   */\n  protected abstract onEnterCompleted(): any;\n\n  /**\n   * This function will be fired when the transition\n   * to a new container has just started.\n   */\n  protected abstract onLeave(): any;\n\n  /**\n   * This function will be fired when the container\n   * has just been removed from the DOM.\n   */\n  protected abstract onLeaveCompleted(): any;\n}\n\nexport { BaseView };\n","import { Response } from \"../../types/response.js\";\n\n/**\n * Object that is going to deal with DOM parsing/manipulation\n * TODO move to @ribajs/core dom utils\n */\nclass Dom {\n  public static getPrefetchLinkElements(content: DocumentFragment | Document) {\n    // router-preload is a custom preloader\n    return content.querySelectorAll(\n      'link[href][rel=\"dns-prefetch\"], link[href][rel=\"preconnect\"], link[href][rel=\"prefetch\"], link[href][rel=\"subresource\"], link[href][rel=\"preload\"], link[href][rel=\"router-preload\"]'\n    ) as NodeListOf<HTMLLinkElement>;\n  }\n\n  public static parseTitle(content: DocumentFragment | Document) {\n    let title = \"\";\n    // title = Dom.findHTMLTagContent('title', template.innerHTML) || '';\n    const titleElement = content.querySelector(\"title\");\n    if (titleElement && titleElement.innerText) {\n      title = titleElement.innerText;\n    }\n    return title;\n  }\n\n  /**\n   * Parse the responseText obtained from the fetch call\n   * @see https://stackoverflow.com/a/41038197/1465919\n   */\n  public static parseResponse(\n    responseText: string,\n    parseTitle: boolean,\n    containerSelector: string,\n    prefetchLinks = true\n  ): Response {\n    let title = \"\";\n    let prefetchLinkElements:\n      | NodeListOf<HTMLLinkElement>\n      | Array<HTMLLinkElement> = [];\n    const template = document.createElement(\"template\") as HTMLTemplateElement;\n    template.innerHTML = responseText;\n\n    if (parseTitle) {\n      title = this.parseTitle(template.content);\n    }\n\n    if (prefetchLinks) {\n      prefetchLinkElements = this.getPrefetchLinkElements(template.content);\n    }\n\n    const container = this.getContainer(template, containerSelector);\n\n    return {\n      container,\n      title,\n      prefetchLinks: prefetchLinkElements,\n    };\n  }\n\n  /**\n   * Use this method only on the first page load\n   */\n  public static parseInitial(\n    parseTitle: boolean,\n    containerSelector: string,\n    prefetchLinks = true\n  ) {\n    let title = \"\";\n    let prefetchLinkElements:\n      | NodeListOf<HTMLLinkElement>\n      | Array<HTMLLinkElement> = [];\n\n    // const template = document.createElement(\"template\") as HTMLTemplateElement;\n    // template.innerHTML = document.body.innerHTML;\n\n    const container = this.getContainer(document, containerSelector);\n\n    if (parseTitle) {\n      title = this.parseTitle(document);\n    }\n\n    if (prefetchLinks) {\n      prefetchLinkElements = this.getPrefetchLinkElements(document);\n    }\n\n    return {\n      container: container,\n      title,\n      prefetchLinks: prefetchLinkElements,\n    };\n  }\n\n  /**\n   * Get the container on the current DOM,\n   * or from an Element passed via argument\n   */\n  public static getContainer(\n    element: HTMLTemplateElement | HTMLElement | Document,\n    containerSelector: string\n  ): HTMLElement {\n    if (!element) {\n      throw new Error(\n        \"Barba.js: [getContainer] No element to get container from, maybe the DOM is not ready!\"\n      );\n    }\n\n    const container = this.parseContainer(element, containerSelector);\n\n    if (!container) {\n      throw new Error(\"[DOM] No container found\");\n    }\n\n    return container;\n  }\n\n  /**\n   * Get the namespace of the container\n   */\n  public static getNamespace(element: HTMLElement): string | null {\n    if (element && element.dataset && element.dataset.namespace) {\n      return element.dataset.namespace;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Put the container on the page\n   */\n  public static putContainer(element: HTMLElement, wrapper: HTMLElement) {\n    element = element as HTMLElement;\n    element.style.visibility = \"hidden\";\n    wrapper.appendChild(element);\n  }\n\n  /**\n   * Get container selector\n   */\n  protected static parseContainer(\n    newPage: HTMLTemplateElement | HTMLElement | Document,\n    containerSelector: string\n  ): HTMLElement {\n    if (!newPage) {\n      const error = new Error(\"New page not loaded!\");\n      console.error(error, newPage);\n      throw error;\n    }\n\n    let result: HTMLElement | null;\n\n    if ((newPage as HTMLTemplateElement).content) {\n      result = (newPage as HTMLTemplateElement).content.querySelector(\n        containerSelector\n      );\n    } else {\n      result = newPage.querySelector(containerSelector);\n    }\n\n    if (!result) {\n      const error = new Error(\n        `No container with selector \"${containerSelector}\" found!`\n      );\n      console.error(error, newPage);\n      throw error;\n    }\n\n    return result;\n  }\n}\n\nexport { Dom };\n","import { Pjax } from \"./index.js\";\nimport { getElementFromEvent } from \"@ribajs/utils/src/dom.js\";\nimport { normalizeUrl } from \"@ribajs/utils/src/url\";\nimport { IGNORE_CLASS_PREFETCH, ROUTE_ERROR_CLASS } from \"../../constants.js\";\n\nexport interface PrefetchInstances {\n  [key: string]: Prefetch;\n}\n\n/**\n * Prefetch\n */\nclass Prefetch {\n  public static getInstance(id = \"main\"): Prefetch {\n    const result = Prefetch.instances[id];\n    if (!result) {\n      return new this(id);\n    }\n    return result;\n  }\n\n  /** singleton instance */\n  protected static instances: PrefetchInstances = {};\n\n  /**\n   * Creates an singleton instance of Prefetch.\n   */\n  constructor(readonly viewId: string) {\n    this.viewId = viewId;\n    if (Prefetch.instances[this.viewId]) {\n      return Prefetch.instances[this.viewId];\n    }\n    Prefetch.instances[this.viewId] = this;\n    this.onLinkEnterIntern = this.onLinkEnterIntern.bind(this);\n  }\n\n  /**\n   * Init the event listener on mouseover and touchstart for all links on the document\n   * for the prefetch\n   *\n   */\n  public init(autobindLinks = false) {\n    if (!window.history.pushState) {\n      return false;\n    }\n    if (autobindLinks) {\n      this.deInit();\n      document.body.addEventListener(\"mouseover\", this.onLinkEnterIntern, {\n        passive: true,\n      });\n      document.body.addEventListener(\"touchstart\", this.onLinkEnterIntern, {\n        passive: true,\n      });\n    }\n  }\n\n  public deInit() {\n    document.body.removeEventListener(\"mouseover\", this.onLinkEnterIntern);\n    document.body.removeEventListener(\"touchstart\", this.onLinkEnterIntern);\n  }\n\n  /**\n   * This method is used from the rv-route binder\n   * @param el\n   */\n  public initBinder(el: HTMLAnchorElement, url: string) {\n    if (!window.history.pushState) {\n      return false;\n    }\n    this.deInitBinder(el, url);\n    el.addEventListener(\"mouseover\", this.onLinkEnter.bind(this, url, el), {\n      passive: true,\n    });\n    el.addEventListener(\"touchstart\", this.onLinkEnter.bind(this, url, el), {\n      passive: true,\n    });\n  }\n\n  public deInitBinder(el: HTMLAnchorElement, url: string) {\n    el.removeEventListener(\"mouseover\", this.onLinkEnter.bind(this, url, el));\n    el.removeEventListener(\"touchstart\", this.onLinkEnter.bind(this, url, el));\n  }\n\n  public onLinkEnter(\n    url: string,\n    el: HTMLAnchorElement | HTMLUnknownElement,\n    evt: Event\n  ) {\n    if (\n      el.classList &&\n      (el.classList.contains(IGNORE_CLASS_PREFETCH) ||\n        el.classList.contains(ROUTE_ERROR_CLASS))\n    ) {\n      return;\n    }\n\n    url = normalizeUrl(url).url;\n\n    const preventCheck = Pjax.preventCheck(url, el, evt);\n\n    // Check if the link is eligible for Pjax\n    if (url && preventCheck) {\n      const pjax = Pjax.getInstance(this.viewId);\n      if (pjax) {\n        pjax.loadResponseCached(url, false, false).catch((error) => {\n          el.classList.add(ROUTE_ERROR_CLASS);\n          console.error(url);\n          console.error(error);\n        });\n      } else {\n        console.warn(\n          `[Prefetch.onLinkEnter] No pjax instance for viewId \"${this.viewId}\" found!`\n        );\n        el.classList.add(ROUTE_ERROR_CLASS);\n      }\n    }\n  }\n\n  public url(url: string) {\n    url = normalizeUrl(url).url;\n\n    const preventCheck = Pjax.preventCheck(url);\n\n    // Check if the link is eligible for Pjax\n    if (url && preventCheck) {\n      const pjax = Pjax.getInstance(this.viewId);\n      if (pjax) {\n        pjax.loadResponseCached(url, false, false).catch((error) => {\n          console.error(error);\n        });\n      } else {\n        console.warn(\n          `[Prefetch.url] No pjax instance for viewId \"${this.viewId}\" found!`\n        );\n      }\n    }\n  }\n\n  /**\n   * Callback for the mouseover/touchstart, please use the rv-route binder instead\n   *\n   */\n  protected onLinkEnterIntern(evt: Event) {\n    let el = getElementFromEvent(evt);\n\n    if (!el) {\n      throw new Error(\"HTML Element not set\");\n    }\n\n    while (el && !Pjax.getHref(el)) {\n      el = el.parentNode as HTMLAnchorElement;\n    }\n\n    if (!el) {\n      return;\n    }\n\n    if (el.nodeName !== \"A\") {\n      return;\n    }\n\n    const href = Pjax.getHref(el);\n\n    // Already managed by the rv-route binder\n    if (el.classList.contains(\"route\") || el.hasAttribute(\"rv-route\")) {\n      return;\n    }\n\n    if (!href) {\n      console.warn(\n        `Url is not defined, you can't cache the link without the url. Please make sure your element has the href attribute or pass the url directly to this function.`,\n        el\n      );\n      return;\n    }\n\n    return this.onLinkEnter(href, el, evt);\n  }\n}\n\nexport { Prefetch };\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","class InMemoryStorage {\n  constructor() {\n    this.cache = new Map()\n  }\n\n  get(key) {\n    return this.cache.get(key)\n  }\n\n  set(key, value) {\n    this.cache.set(key, value)\n  }\n\n  keys() {\n    return Array.from(this.cache.keys())\n  }\n\n  del(key) {\n    this.cache.delete(key)\n  }\n\n  clear() {\n    this.cache.clear()\n  }\n}\n\nmodule.exports = InMemoryStorage\n","const ms = require('ms')\nconst InMemoryStorage = require('./InMemoryStorage')\n\nfunction createCache({ cleanupInterval = '5 mins', customStorage } = {}) {\n  let cache = customStorage || new InMemoryStorage()\n  let intervalTickId\n\n  const isUndef = v => typeof v === 'undefined'\n  const isDef = v => typeof v !== 'undefined'\n  const isFn = v => typeof v === 'function'\n  const isNum = v => typeof v === 'number'\n\n  const checkHasExpired = exp => exp && new Date(exp).getTime() < Date.now()\n\n  async function set(key, value, expiresIn) {\n    if (expiresIn) {\n      const expiredInMs = isNum(expiresIn) ? expiresIn : ms(expiresIn)\n      await cache.set(key, [value, new Date(Date.now() + expiredInMs).toISOString()])\n      return value\n    }\n\n    await cache.set(key, [value])\n    return value\n  }\n\n  async function resolve(key, value, expiresIn) {\n    const storedValue = await cache.get(key)\n\n    if (isUndef(storedValue)) {\n      if (isDef(value)) {\n        // A first time set (nothing in store but value defined).\n        const newValue = isFn(value) ? await value() : value\n        set(key, newValue, expiresIn)\n        return newValue\n      }\n\n      // A get request with nothing in the store.\n      return undefined\n    }\n\n    const [cachedValue, cachedExpiresIn] = storedValue\n    const hasExpired = checkHasExpired(cachedExpiresIn)\n\n    if (hasExpired) {\n      // If the stored value has expired and a value was provided then save it to store\n      // and return that.\n      if (isDef(value)) {\n        const newValue = isFn(value) ? await value() : value\n        set(key, newValue, expiresIn)\n        return newValue\n      }\n\n      // If the stored value has expired and no value was provided then return undefined and\n      // remove it from storage.\n      cache.del(key)\n      return undefined\n    }\n\n    // If the value hasn't expired then return it.\n    return cachedValue\n  }\n\n  async function del(key, matchStart) {\n    if (matchStart) {\n      const keys = await cache.keys()\n      keys.forEach(cacheKey => {\n        if (cacheKey.indexOf(key) === 0) {\n          cache.del(cacheKey)\n        }\n      })\n      return\n    }\n\n    cache.del(key)\n  }\n\n  function clear() {\n    return cache.clear()\n  }\n\n  function teardown() {\n    clearInterval(intervalTickId)\n  }\n\n  if (cleanupInterval) {\n    intervalTickId = setInterval(async () => {\n      const keys = await cache.keys()\n      keys.forEach(async k => {\n        const value = await cache.get(k)\n        if (value) {\n          const expiresIn = value[1]\n          const hasExpired = checkHasExpired(expiresIn)\n          if (hasExpired) {\n            cache.del(k)\n          }\n        }\n      })\n    }, ms(cleanupInterval))\n  }\n\n  return {\n    resolve,\n    del,\n    clear,\n    teardown,\n  }\n}\n\nmodule.exports = createCache\n","/**\n * BaseCache it's a simple static cache\n */\nclass BaseCache<T = any> {\n  /**\n   * The Object that keeps all the key value information\n   */\n  public data: { [key: string]: T };\n\n  constructor() {\n    this.data = {};\n  }\n\n  /**\n   * Set a key and value data, mainly Barba is going to save promises\n   *\n   */\n  public set(key: string, val: T) {\n    this.data[key] = val;\n    return this.data[key];\n  }\n\n  /**\n   * Retrieve the data using the key\n   */\n  public get(key: string): T | undefined {\n    return this.data[key];\n  }\n\n  /**\n   * Flush the cache\n   */\n  public reset() {\n    this.data = {};\n  }\n}\n\nexport { BaseCache };\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic – if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","import createCache from \"keshi\";\nimport type { Storage } from \"keshi\";\nimport { get, set, keys, del, clear } from \"idb-keyval\";\n\nexport const idbStorage: Storage = {\n  get,\n  set,\n  keys,\n  del,\n  clear: () => {\n    return clear() as any;\n  },\n};\n\nexport const idbCache = createCache({\n  // Use default memory storage on ssr\n  customStorage: (window as any).ssr ? undefined : idbStorage,\n});\n","export * from \"./Dom.js\";\nexport * from \"./Prefetch.js\";\n\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { HttpService, HttpServiceOptions } from \"@ribajs/core\";\nimport {\n  cleanLink,\n  getPort,\n  normalizeUrl,\n  getUrl,\n  isBoolean,\n  getElementFromEvent,\n  getDataset,\n  scrollTo,\n} from \"@ribajs/utils\";\n\nimport { BaseCache } from \"@ribajs/cache\";\nimport { HideShowTransition } from \"../Transition/index.js\";\nimport { Transition, Response, PjaxOptions } from \"../../types/index.js\";\nimport { Dom } from \"./Dom.js\";\nimport { HistoryManager } from \"@ribajs/history\";\nimport { ROUTE_ERROR_CLASS, IGNORE_CLASS_LINK } from \"../../constants.js\";\nimport { RouterService } from \"../../services/index.js\";\n\nexport interface PjaxInstances {\n  [key: string]: Pjax;\n}\n\n/**\n * Pjax is a static object with main function\n *\n * @borrows Dom as Dom\n */\nclass Pjax {\n  public static cache = new BaseCache<Promise<Response>>();\n\n  public static getInstance(id = \"main\"): Pjax | undefined {\n    const result = Pjax.instances[id];\n    if (!result) {\n      console.warn(\n        `[Pjax.getInstance] No pjax instance for viewId \"${id}\" found!`\n      );\n    }\n    return result;\n  }\n\n  /**\n   * Determine if the link should be followed\n   */\n  protected static preventCheckUrl(href: string): boolean {\n    /**\n     * Create fake html element\n     */\n    const element = document.createElement(\"a\");\n    element.setAttribute(\"href\", href);\n\n    if (!element) {\n      return false;\n    }\n\n    if (!href) {\n      return false;\n    }\n\n    // In case you're trying to load the same page\n    if (cleanLink(href) === cleanLink(location.href)) {\n      return false;\n    }\n\n    // Check if it's the same domain\n    if (\n      window.location.protocol !== (element as HTMLAnchorElement).protocol ||\n      window.location.hostname !== (element as HTMLAnchorElement).hostname\n    ) {\n      return false;\n    }\n\n    // Check if the port is the same\n    if (getPort() !== getPort((element as HTMLAnchorElement).port)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Determine if the link should be followed\n   */\n  public static preventCheck(\n    url: string,\n    element?: HTMLAnchorElement | HTMLLinkElement | HTMLUnknownElement,\n    evt?: Event\n  ): boolean {\n    if (!window.history.pushState) {\n      return false;\n    }\n\n    if (!this.preventCheckUrl(url)) {\n      return false;\n    }\n\n    if (evt) {\n      // Middle click, cmd click, ctrl click or prefetch load event\n      if (\n        (evt && (evt as any).which && (evt as any).which > 1) ||\n        (evt as any).metaKey ||\n        (evt as any).ctrlKey ||\n        (evt as any).shiftKey ||\n        (evt as any).altKey\n      ) {\n        return false;\n      }\n    }\n\n    if (element) {\n      // Ignore target with _blank target\n      if (\n        (element as HTMLAnchorElement).target &&\n        (element as HTMLAnchorElement).target === \"_blank\"\n      ) {\n        return false;\n      }\n\n      // Ignore case where there is download attribute\n      if (\n        element.getAttribute &&\n        typeof element.getAttribute(\"download\") === \"string\"\n      ) {\n        return false;\n      }\n\n      if (element.classList.contains(IGNORE_CLASS_LINK)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Get the .href parameter out of an element\n   * and handle special cases (like xlink:href)\n   */\n  public static getHref(\n    el: HTMLAnchorElement | SVGAElement | HTMLLinkElement | HTMLUnknownElement\n  ): string | undefined {\n    if (!el) {\n      return undefined;\n    }\n\n    if (el.getAttribute && typeof el.getAttribute(\"xlink:href\") === \"string\") {\n      return el.getAttribute(\"xlink:href\") || undefined;\n    }\n\n    if (\n      typeof (el as HTMLAnchorElement).href === \"string\" ||\n      (el.hasAttribute && el.hasAttribute(\"href\"))\n    ) {\n      const href = (el as HTMLAnchorElement).href || el.getAttribute(\"href\");\n      if (!href) {\n        console.error(\"href attribute not found for element: \", el);\n        throw new Error(\"href attribute not found!\");\n      }\n      return href;\n    }\n\n    return undefined;\n  }\n\n  private static instances: PjaxInstances = {};\n\n  public history = new HistoryManager();\n\n  /**\n   * Indicate wether or not use the cache\n   */\n  public cacheEnabled = true;\n\n  /**\n   * Indicate if there is an animation in progress\n   */\n  public transitionProgress = false;\n\n  protected listenAllLinks: boolean;\n\n  protected listenPopstate: boolean;\n\n  protected parseTitle: boolean;\n\n  protected changeBrowserUrl: boolean;\n\n  protected dispatcher: EventDispatcher;\n\n  protected transition?: Transition;\n\n  protected wrapper?: HTMLElement;\n\n  protected viewId = \"main\";\n\n  protected containerSelector: string;\n\n  /**\n   * Finds elements in the head like <link rel=\"preload\" href=\"...\" as=\"fetch\"> add them to the new head (and removes the old)\n   */\n  protected prefetchLinks: boolean;\n\n  protected scrollToAnchorOffset: number;\n\n  /**\n   * Creates an singleton instance of Pjax.\n   */\n  constructor({\n    id,\n    action = \"replace\",\n    wrapper,\n    containerSelector = \"[data-namespace]\",\n    listenAllLinks = false,\n    listenPopstate = true,\n    parseTitle = true,\n    changeBrowserUrl = true,\n    prefetchLinks = true,\n    scrollToTop = true,\n    scrollToAnchorOffset = RouterService.options.scrollToAnchorOffset,\n  }: PjaxOptions) {\n    if (id) {\n      this.viewId = id;\n    }\n\n    let instance = this as Pjax;\n\n    this.scrollToAnchorOffset = scrollToAnchorOffset || 0;\n\n    this.dispatcher = new EventDispatcher(this.viewId);\n\n    this.listenAllLinks = listenAllLinks;\n    this.listenPopstate = listenPopstate;\n    this.parseTitle = parseTitle;\n    this.changeBrowserUrl = changeBrowserUrl;\n    this.containerSelector = containerSelector;\n    this.prefetchLinks = prefetchLinks;\n\n    if (Pjax.instances[this.viewId]) {\n      instance = Pjax.instances[this.viewId];\n    }\n\n    instance.transition =\n      instance.transition || new HideShowTransition(action, scrollToTop);\n    instance.wrapper = instance.wrapper || wrapper;\n    instance.containerSelector =\n      instance.containerSelector || containerSelector;\n\n    instance.listenAllLinks = isBoolean(instance.listenAllLinks)\n      ? instance.listenAllLinks\n      : listenAllLinks;\n    instance.listenPopstate = isBoolean(instance.listenPopstate)\n      ? instance.listenPopstate\n      : listenPopstate;\n    instance.parseTitle = isBoolean(instance.parseTitle)\n      ? instance.parseTitle\n      : parseTitle;\n    instance.changeBrowserUrl = isBoolean(instance.changeBrowserUrl)\n      ? instance.changeBrowserUrl\n      : changeBrowserUrl;\n    instance.prefetchLinks = isBoolean(instance.prefetchLinks)\n      ? instance.prefetchLinks\n      : prefetchLinks;\n\n    if (instance.wrapper) {\n      instance.wrapper.setAttribute(\"aria-live\", \"polite\");\n    }\n\n    Pjax.instances[this.viewId] = instance;\n    return Pjax.instances[this.viewId];\n  }\n\n  /**\n   * USe this if you have a view component\n   */\n  public setActiveWrapper(wrapper: HTMLElement) {\n    this.wrapper = wrapper;\n  }\n\n  /**\n   * Function to be called to start Pjax\n   */\n  public start() {\n    if (this.wrapper) {\n      try {\n        this.init(this.wrapper, this.listenAllLinks, this.listenPopstate);\n      } catch (error) {\n        console.error(error);\n      }\n    } else {\n      console.error(`Can't init pjax without wrapper`);\n    }\n  }\n\n  /**\n   * Return the currentURL cleaned\n   */\n  public getCurrentUrl() {\n    return cleanLink(getUrl());\n  }\n\n  /**\n   * Change the URL with push state and trigger the state change\n   */\n  public goTo(url: string, newTab = false) {\n    if (newTab) {\n      const win = window.open(url, \"_blank\");\n      if (win) {\n        return win.focus();\n      }\n      return false;\n    }\n\n    if (url.startsWith(\"http\")) {\n      url = normalizeUrl(url).url;\n    }\n\n    if (!url.startsWith(\"http\")) {\n      if (this.changeBrowserUrl) {\n        window.history.pushState(null, \"\", url);\n      }\n      return this.onStateChange(undefined, url);\n    } else {\n      // fallback\n      this.forceGoTo(url);\n    }\n  }\n\n  /**\n   * Return a transition object\n   */\n  public getTransition(): Transition {\n    // User customizable\n    return this.transition || new HideShowTransition();\n  }\n\n  public prefetchLink(href: string) {\n    href = normalizeUrl(href).url;\n    const follow = Pjax.preventCheckUrl(href);\n    if (follow) {\n      return this.loadResponseCached(href, true, false);\n    }\n  }\n\n  /**\n   * Appends a prefetch link to the head and caches the result\n   */\n  protected prefetchLinkElement(\n    linkElement: HTMLLinkElement,\n    head: HTMLHeadElement\n  ) {\n    const rel = linkElement.getAttribute(\"rel\");\n    const href = Pjax.getHref(linkElement);\n    if (\n      rel === \"router-preload\" &&\n      href &&\n      this.cacheEnabled &&\n      !linkElement.classList.contains(ROUTE_ERROR_CLASS)\n    ) {\n      try {\n        this.prefetchLink(href);\n      } catch (error) {\n        linkElement.classList.add(ROUTE_ERROR_CLASS);\n        console.error(error);\n      }\n    }\n    // Append The link elements to the head for native prefetch by the browser\n    head.appendChild(linkElement);\n  }\n\n  protected removePrefetchLinks(head: HTMLHeadElement) {\n    const removePrefetchLinkElements = head.querySelectorAll(\n      'link[href][rel=\"dns-prefetch\"], link[href][rel=\"preconnect\"], link[href][rel=\"prefetch\"], link[href][rel=\"subresource\"], link[href][rel=\"preload\"], link[href][rel=\"router-preload\"]'\n    ) as NodeListOf<HTMLLinkElement>;\n    // Remove the old prefetch link elements\n    removePrefetchLinkElements.forEach((linkElement: HTMLLinkElement) => {\n      if (linkElement && linkElement.parentNode) {\n        linkElement.parentNode.removeChild(linkElement);\n      }\n    });\n  }\n\n  /**\n   * Replaces the prefetch links in the head with the new one.\n   * The custom link[href][rel=\"router-preload\"] elements will be not readd to the head\n   * because we preload them with javascript, the others are preloaded by the browser\n   * because it has native support for them and for that they must exist in the head\n   * @param prefetchLinks\n   */\n  protected replacePrefetchLinkElements(\n    prefetchLinks: NodeListOf<HTMLLinkElement> | HTMLLinkElement[]\n  ) {\n    const head = document.head || document.getElementsByTagName(\"head\")[0];\n    this.removePrefetchLinks(head);\n\n    prefetchLinks.forEach((linkElement: HTMLLinkElement) => {\n      this.prefetchLinkElement(linkElement, head);\n    });\n  }\n\n  /**\n   * Load an url, will start an fetch request or load the response from the cache and returns the container\n   * Also puts the container to the DOM and sets the title (if this option is active)\n   */\n  public async loadCached(url: string): Promise<HTMLElement> {\n    try {\n      const { responsePromise } = await this.loadResponseCached(\n        url,\n        false,\n        true\n      );\n      if (!this.wrapper) {\n        throw new Error(\"[Pjax] you need a wrapper!\");\n      }\n      const response = await responsePromise;\n      Dom.putContainer(response.container, this.wrapper);\n      if (this.parseTitle === true && response.title) {\n        document.title = response.title;\n      }\n      if (this.prefetchLinks === true && response.prefetchLinks) {\n        this.replacePrefetchLinkElements(response.prefetchLinks);\n      }\n\n      return response.container;\n    } catch (error) {\n      console.error(error);\n      // Something went wrong (timeout, 404, 505...)\n      this.forceGoTo(url);\n      throw error;\n    }\n  }\n\n  /**\n   * Load an url, will start an fetch request or load from the cache (and set it to the cache) and will return a `Response` object\n   * @param url Url to get from cache or to make the request for\n   * @param forceCache Force to use the browser build in cache, for more information see `force-cache` on https://developer.mozilla.org/en-US/docs/Web/API/Request/cache\n   * @param fallback If there is an error, make a normal browser request and reload the page you should not use this on prefetch urls\n   */\n  public async loadResponseCached(\n    url: string,\n    forceCache = false,\n    fallback = true\n  ) {\n    let responsePromise: Promise<Response> | undefined;\n    try {\n      if (this.cacheEnabled) {\n        responsePromise = Pjax.cache.get(url);\n        if (responsePromise) {\n          return {\n            fromCache: true,\n            responsePromise,\n          };\n        }\n      }\n      responsePromise = this.loadResponse(url, forceCache);\n      if (this.cacheEnabled && responsePromise) {\n        Pjax.cache.set(url, responsePromise);\n      } else {\n        // Pjax.cache.reset();\n      }\n    } catch (error) {\n      console.error(error);\n      if (fallback) {\n        this.forceGoTo(url);\n      }\n      throw error;\n    }\n\n    return {\n      fromCache: false,\n      responsePromise,\n    };\n  }\n\n  /**\n   * Load an url, will start an fetch request and will return a `Response` object\n   * @param url Url to get from cache or to make the request for\n   * @param forceCache Force to use the browser build in cache, for more information see `force-cache` on https://developer.mozilla.org/en-US/docs/Web/API/Request/cache\n   */\n  public async loadResponse(url: string, forceCache = false) {\n    const options: HttpServiceOptions = forceCache\n      ? { cache: \"force-cache\" }\n      : {};\n    const data = await HttpService.get<string>(\n      url,\n      undefined,\n      \"html\",\n      {},\n      options\n    );\n    if (!data || !data.body) {\n      throw new Error(\"No body!\");\n    }\n    const response = Dom.parseResponse(\n      data.body,\n      this.parseTitle,\n      this.containerSelector,\n      this.prefetchLinks\n    );\n    return response;\n  }\n\n  /**\n   * Attach the event listeners\n   */\n  protected bindEvents(listenAllLinks: boolean, listenPopstate: boolean) {\n    // you can also use the rv-router for this\n    if (listenAllLinks) {\n      document.addEventListener(\"click\", this.onLinkClickIntern.bind(this));\n    }\n    if (listenPopstate) {\n      window.addEventListener(\"popstate\", this.onStateChange.bind(this));\n    }\n  }\n\n  /**\n   * Force the browser to go to a certain url\n   */\n  public forceGoTo(url: Location | string) {\n    console.warn(\"forceGoTo\", url);\n    if (url && (url as Location).href) {\n      window.location = url as Location;\n    }\n    if (typeof url === \"string\") {\n      window.location.href = url;\n    }\n  }\n\n  protected onLinkClickIntern(evt: Event) {\n    let el = getElementFromEvent(evt);\n\n    while (el && !Pjax.getHref(el)) {\n      el = el.parentNode as HTMLAnchorElement; // TODO test me\n    }\n\n    if (!el || el.nodeName !== \"A\") {\n      return;\n    }\n\n    const href = Pjax.getHref(el);\n\n    // Already managed by the rv-route binder\n    if (el.classList.contains(\"route\") || el.hasAttribute(\"rv-route\")) {\n      return;\n    }\n\n    if (!href) {\n      throw new Error(\n        `Url is not defined, you can't cache the link without the url. Please make sure your element has the href attribute or pass the url directly to this function.`\n      );\n    }\n\n    // Already managed by the rv-route binder\n    if (el.classList.contains(\"route\") || el.hasAttribute(\"rv-route\")) {\n      return false;\n    }\n\n    return this.onLinkClick(evt, el as HTMLAnchorElement, href);\n  }\n\n  /**\n   * Callback called from click event\n   */\n  public onLinkClick(\n    evt: Event,\n    el: HTMLAnchorElement,\n    href: string,\n    newTab = false\n  ) {\n    // normalize url, returns the relative url for internal urls and the full url for external urls\n    const { url, location } = normalizeUrl(href);\n\n    const { location: currLocation } = normalizeUrl();\n\n    // Is this a local scroll link to an title anchor?\n    if (location.hash && currLocation.pathname === location.pathname) {\n      let id = location.hash.slice(1);\n      id = decodeURI(id); // Workaround for markdown generated ids with umlauts\n      const scrollToElement = document.getElementById(id);\n      if (scrollToElement) {\n        evt.stopPropagation();\n        evt.preventDefault();\n        if (this.changeBrowserUrl) {\n          window.history.pushState(null, \"\", url);\n        }\n        return scrollTo(scrollToElement, this.scrollToAnchorOffset);\n      }\n    }\n\n    if (!url) {\n      throw new Error(\"url is falsy\");\n    }\n    const follow = Pjax.preventCheck(url, el, evt);\n\n    if (follow) {\n      evt.stopPropagation();\n      evt.preventDefault();\n\n      this.dispatcher.trigger(\"linkClicked\", el, evt);\n\n      this.goTo(url, newTab);\n    }\n  }\n\n  /**\n   * Method called after a 'popstate' or from .goTo()\n   */\n  protected async onStateChange(\n    event?: Event,\n    newUrl: string = this.getCurrentUrl()\n  ) {\n    // normalize url, returns the relative url for internal urls and the full url for external urls\n    newUrl = normalizeUrl(newUrl).url;\n    const oldUrl = normalizeUrl(this.history.currentStatus().url).url;\n\n    if (this.changeBrowserUrl && oldUrl === newUrl) {\n      return false;\n    }\n\n    this.history.add(newUrl);\n\n    this.dispatcher.trigger(\n      \"initStateChange\",\n      this.viewId,\n      this.history.currentStatus(),\n      this.history.prevStatus()\n    );\n\n    const oldContainer = Dom.getContainer(document, this.containerSelector);\n    const newContainerPromise = this.loadCached(newUrl);\n\n    const transition = this.getTransition();\n\n    this.transitionProgress = true;\n\n    const transitionResult = transition.init(oldContainer, newContainerPromise);\n\n    this.onNewContainerLoaded(await newContainerPromise);\n\n    await transitionResult;\n    this.onTransitionEnd();\n  }\n\n  /**\n   * Function called as soon the new container is ready\n   */\n  protected onNewContainerLoaded(container: HTMLElement) {\n    const currentStatus = this.history.currentStatus();\n\n    currentStatus.namespace = Dom.getNamespace(container);\n\n    const dataset = getDataset(container);\n\n    this.dispatcher.trigger(\n      \"newPageReady\",\n      this.viewId,\n      this.history.currentStatus(),\n      this.history.prevStatus(),\n      container,\n      container.innerHTML,\n      dataset,\n      false // true if this is the first time newPageReady is triggered / true on initialization\n    );\n  }\n\n  /**\n   * Function called as soon the transition is finished\n   */\n  protected onTransitionEnd() {\n    this.transitionProgress = false;\n\n    this.dispatcher.trigger(\n      \"transitionCompleted\",\n      this.viewId,\n      this.history.currentStatus(),\n      this.history.prevStatus()\n    );\n  }\n\n  /**\n   * Init the events\n   */\n  protected init(\n    wrapper: HTMLElement,\n    listenAllLinks: boolean,\n    listenPopstate: boolean\n  ) {\n    const initialResponse = Dom.parseInitial(\n      this.parseTitle,\n      this.containerSelector,\n      this.prefetchLinks\n    );\n    const url = window.location.pathname;\n    // Reload the current site with pjax to cache the initial page\n    if (this.cacheEnabled) {\n      const currentUrl = normalizeUrl(window.location.href).url;\n      if (!Pjax.cache.get(url)) {\n        this.loadResponseCached(currentUrl, false, false);\n      }\n    }\n\n    this.replacePrefetchLinkElements(initialResponse.prefetchLinks);\n\n    this.wrapper = wrapper;\n\n    this.history.add(\n      this.getCurrentUrl(),\n      Dom.getNamespace(initialResponse.container)\n    );\n\n    // Fire for the current view.\n    this.dispatcher.trigger(\n      \"initStateChange\",\n      this.viewId,\n      this.history.currentStatus()\n    );\n\n    const dataset = getDataset(initialResponse.container);\n\n    this.dispatcher.trigger(\n      \"newPageReady\",\n      this.viewId,\n      this.history.currentStatus(),\n      {},\n      initialResponse.container,\n      initialResponse.container.innerHTML,\n      dataset,\n      true // true if this is the first time newPageReady is triggered / true on initialization\n    );\n\n    this.dispatcher.trigger(\n      \"transitionCompleted\",\n      this.viewId,\n      this.history.currentStatus()\n    );\n\n    this.bindEvents(listenAllLinks, listenPopstate);\n  }\n}\n\nexport { Pjax };\n","import { RouterModuleOptions } from \"../types/index.js\";\nimport { HideShowTransition } from \"./Transition/HideShowTransition.js\";\n\nexport class RouterService {\n  protected static _options: RouterModuleOptions;\n  public static instance?: RouterService;\n\n  public static get options() {\n    return this._options;\n  }\n\n  protected constructor() {\n    /**/\n  }\n\n  public static getSingleton() {\n    if (this.instance) {\n      return this.instance;\n    }\n\n    throw new Error(\n      `Singleton of RouterService not defined, please call setSingleton first!`\n    );\n  }\n\n  public static setSingleton(options: Partial<RouterModuleOptions> = {}) {\n    if (this.instance) {\n      console.warn(`Singleton of RouterService already defined!`);\n      return this.instance;\n    }\n    options.defaultTransition =\n      options.defaultTransition ?? new HideShowTransition();\n    options.scrollToAnchorOffset = options.scrollToAnchorOffset ?? 0;\n    this._options = options as RouterModuleOptions;\n    this.instance = new this();\n    return this.instance;\n  }\n}\n","import { Binder, View, handleizeFormatter, FormatterFn } from \"@ribajs/core\";\nimport { isObject } from \"@ribajs/utils/src/type.js\";\nimport { Pjax, HideShowTransition } from \"../services/index.js\";\n\nconst handleize = handleizeFormatter.read as FormatterFn;\n\n/**\n * Loads a url with pjax and show them inside the element this binder is used on\n */\nexport class ViewStaticBinder extends Binder<string, HTMLAnchorElement> {\n  static key = \"view-static\";\n  static block = true;\n\n  private nested: View | null = null;\n\n  async routine(el: HTMLElement, options: any) {\n    const wrapper = el;\n\n    // Set default options\n    options = options || {};\n    options.listenAllLinks = false;\n    options.listenPopstate = false;\n    options.parseTitle = false;\n    options.transition = options.transition || new HideShowTransition();\n    options.viewId =\n      options.viewId || el.getAttribute(\"id\") || handleize(options.url);\n    options.containerSelector = options.containerSelector || \"[data-namespace]\";\n    options.changeBrowserUrl = false;\n\n    const pjax = new Pjax(options);\n\n    const { responsePromise } = await pjax.loadResponseCached(\n      options.url,\n      false,\n      false\n    );\n\n    const response = await responsePromise;\n\n    wrapper.replaceWith(response.container);\n\n    response.container.style.visibility = \"visible\";\n\n    // add the dataset to the model\n    if (!isObject(this.view.models)) {\n      this.view.models = {};\n    }\n\n    if (this.nested) {\n      this.nested.unbind();\n    }\n    this.nested = new View(\n      response.container,\n      this.view.models,\n      this.view.options\n    );\n    this.nested.bind();\n  }\n\n  unbind() {\n    if (this.nested) {\n      this.nested.unbind();\n    }\n  }\n}\n","import { Pjax, Prefetch } from \"../services/index.js\";\nimport { Binder } from \"@ribajs/core\";\nimport { isObject, isString } from \"@ribajs/utils/src/type.js\";\nimport { onRoute, normalizeUrl, isExternalUrl } from \"@ribajs/utils/src/url\";\nimport { RouteOptions } from \"../types/route-options.js\";\n\n/**\n * Open link with pajax if the route is not the active route\n */\nexport class RouteBinder extends Binder<string, HTMLAnchorElement> {\n  static key = \"route\";\n\n  private prefetch?: Prefetch;\n\n  private options: RouteOptions = {\n    url: \"\",\n    viewId: \"main\",\n    removeAfterActivation: false,\n    newTab: false,\n    newTabOnExtern: true,\n  };\n\n  private _onClick(event: Event) {\n    // console.log(this.options.url);\n    const pjax = Pjax.getInstance(this.options.viewId);\n    if (onRoute(this.options.url, true)) {\n      console.info(\"already on this site, do nothing\");\n      event.stopPropagation();\n      event.preventDefault();\n    } else if (isExternalUrl(this.options.url)) {\n      if (!pjax) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n      // Is extern\n      const newTab = this.options.newTab || this.options.newTabOnExtern;\n      pjax.goTo(this.options.url, newTab);\n    } else {\n      if (this.options.url) {\n        if (!pjax) {\n          return;\n        }\n        pjax.onLinkClick(event, this.el, this.options.url, this.options.newTab);\n      }\n    }\n    if (this.options.removeAfterActivation && this.el && this.el.parentNode) {\n      // this.unbind(); TODO?\n      this.el.parentNode.removeChild(this.el);\n    }\n  }\n\n  private onClick = this._onClick.bind(this);\n\n  bind(el: HTMLAnchorElement) {\n    el.classList.add(\"route\");\n    if (window.ssr) {\n      return;\n    }\n    this.onClick = this.onClick.bind(this);\n    el.addEventListener(\"click\", this.onClick);\n  }\n\n  routine(el: HTMLAnchorElement, optionsOrUrl?: string | RouteOptions) {\n    if (isString(optionsOrUrl)) {\n      this.options.url = optionsOrUrl as string;\n    } else if (isObject(optionsOrUrl as RouteOptions)) {\n      this.options = optionsOrUrl as RouteOptions;\n    }\n    this.options.viewId = this.options.viewId || \"main\";\n    this.prefetch = new Prefetch(this.options.viewId);\n\n    this.options.newTab = false;\n    const isAnchorHTMLElement = el.tagName === \"A\";\n\n    if (!this.options.url && isAnchorHTMLElement) {\n      const url = el.getAttribute(\"href\");\n      if (url) {\n        this.options.url = url;\n      }\n    }\n\n    if (el.getAttribute(\"target\") === \"_blank\") {\n      this.options.newTab = true;\n    }\n\n    // normalize url\n    this.options.url = normalizeUrl(this.options.url).url;\n\n    // set href if not set\n    if (\n      isAnchorHTMLElement &&\n      (!(el as HTMLAnchorElement).href || !el.getAttribute(\"href\")) &&\n      this.options.url\n    ) {\n      el.setAttribute(\"href\", this.options.url);\n      (el as HTMLAnchorElement).href = this.options.url;\n    }\n\n    if (!this.options.newTab) {\n      this.prefetch.initBinder(el, this.options.url);\n    }\n    // this.checkURL.call(this, this.options.url);\n  }\n\n  unbind(el: HTMLAnchorElement) {\n    this.prefetch?.deInitBinder(el, this.options.url);\n    el.removeEventListener(\"click\", this.onClick);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { onRoute } from \"@ribajs/utils/src/url\";\n\nexport class RouteClassStarBinder extends Binder<string, HTMLInputElement> {\n  static key = \"route-class-*\";\n\n  private dispatcher = new EventDispatcher(\"main\");\n  private url?: string;\n  private className = \"\";\n\n  private _onUrlChange() {\n    if (this.url) {\n      if (onRoute(this.url)) {\n        this.el.classList.add(this.className);\n        // check if element is radio input\n        if (this.el.getAttribute(\"type\") === \"radio\") {\n          this.el.checked = true;\n        }\n        return true;\n      } else {\n        this.el.classList.remove(this.className);\n        // uncheck if element is radio input\n        if (this.el.getAttribute(\"type\") === \"radio\") {\n          this.el.checked = false;\n        }\n      }\n    }\n    return false;\n  }\n\n  private onUrlChange = this._onUrlChange.bind(this);\n\n  bind() {\n    this.dispatcher.on(\"newPageReady\", this.onUrlChange);\n  }\n\n  /**\n   * Tests the url with the current location, if the url is equal to the current location this element gets the `[classname]` class\n   * @param el Binder HTML Element\n   * @param url Url to compare with the current location\n   */\n  routine(el: HTMLElement, url?: string) {\n    this.url = url;\n    this.className = this.args[0].toString() || \"active\";\n    const isAnchorElement = el.tagName === \"A\";\n    if (!this.url && isAnchorElement) {\n      const href = el.getAttribute(\"href\");\n      if (href) {\n        this.url = href;\n      }\n    }\n\n    this.onUrlChange();\n  }\n\n  unbind() {\n    this.dispatcher.off(\"newPageReady\", this.onUrlChange);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { Pjax } from \"@ribajs/router\";\n\nexport class RoutePreloadBinder extends Binder<string, HTMLAnchorElement> {\n  static key = \"route-preload\";\n\n  routine(el: HTMLElement, url?: string) {\n    if (window.ssr) {\n      return;\n    }\n    const isAnchorElement = el.tagName === \"A\";\n    if (!url && isAnchorElement) {\n      const href = el.getAttribute(\"href\");\n      if (href) {\n        url = href;\n      }\n    }\n    if (url) {\n      Pjax.getInstance()?.prefetchLink(url);\n    }\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { onParentRoute } from \"@ribajs/utils/src/url\";\n\nexport class ParentRouteClassStarBinder extends Binder<\n  string,\n  HTMLAnchorElement | HTMLInputElement\n> {\n  static class = \"parent-route-class-*\";\n\n  private dispatcher = new EventDispatcher(\"main\");\n\n  private className?: string;\n\n  private url?: string;\n\n  private _onUrlChange() {\n    if (!this.url) {\n      throw new Error(\"url is not defined!\");\n    }\n\n    if (!this.className) {\n      throw new Error(\"className is not defined!\");\n    }\n\n    if (onParentRoute(this.url)) {\n      this.el.classList.add(this.className);\n      // check if element is radio input\n      if (this.el.getAttribute(\"type\") === \"radio\") {\n        (this.el as HTMLInputElement).checked = true;\n      }\n      return true;\n    } else {\n      this.el.classList.remove(this.className);\n      // uncheck if element is radio input\n      if (this.el.getAttribute(\"type\") === \"radio\") {\n        (this.el as HTMLInputElement).checked = false;\n      }\n    }\n    return false;\n  }\n\n  private onUrlChange = this._onUrlChange.bind(this);\n\n  /**\n   * Tests the url with the current location, if the current location starts with the url this element gets the `[classname]` class\n   * @param el Binder HTML Element\n   * @param url Url to compare with the current location\n   */\n  routine(el: HTMLElement, url?: string) {\n    this.url = url;\n    this.className = this.args[0].toString() || \"active\";\n    const isAnkerHTMLElement = el.tagName === \"A\";\n    if (!this.url && isAnkerHTMLElement) {\n      const href = el.getAttribute(\"href\");\n      if (href) {\n        this.url = href;\n      }\n    }\n    this.onUrlChange();\n  }\n\n  bind() {\n    this.dispatcher.on(\"newPageReady\", this.onUrlChange);\n  }\n\n  unbind() {\n    this.dispatcher.off(\"newPageReady\", this.onUrlChange);\n  }\n}\n","import { Binder, eventHandlerFunction } from \"@ribajs/core\";\n\nconst goBack = () => {\n  window.history.back();\n};\n\n/**\n * Calls `window.history.back()` on event.\n */\nexport class RouteBackOnStarBinder extends Binder<eventHandlerFunction> {\n  static key = \"route-back-on-*\";\n  priority = 3000;\n\n  private eventName?: string;\n\n  unbind(el: HTMLElement) {\n    if (this.eventName) {\n      el.removeEventListener(this.eventName, goBack);\n    }\n  }\n\n  routine(el: HTMLElement /*, options: any*/) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    if (this.eventName) {\n      el.removeEventListener(this.eventName, goBack);\n    }\n    this.eventName = this.args[0] as string;\n    el.addEventListener(this.args[0] as string, goBack);\n  }\n}\n","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { loadScript, getUID } from \"@ribajs/utils/src/dom.js\";\n\ninterface Scope extends ScopeBase {\n  src: string;\n  id: string;\n  async: boolean;\n  defer: boolean;\n}\n\nexport class RouterLoadScriptComponent extends Component {\n  public static tagName = \"router-load-script\";\n\n  protected autobind = false;\n\n  static get observedAttributes(): string[] {\n    return [\"src\", \"id\", \"async\", \"defer\"];\n  }\n\n  public scope: Scope = {\n    src: \"\",\n    id: \"\",\n    async: true,\n    defer: true,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    super.init(RouterLoadScriptComponent.observedAttributes);\n  }\n\n  protected async onReady() {\n    await super.onReady();\n    if (!this.scope.id) {\n      this.scope.id = getUID(\"script-\");\n    }\n    loadScript(this.scope.src, this.scope.id, this.scope.async);\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"src\"];\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, View, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { scrollTo, scrollToPosition } from \"@ribajs/utils/src/dom.js\";\nimport { State } from \"@ribajs/history\";\nimport { Pjax, Prefetch, RouterService } from \"../../services/index.js\";\nimport type {\n  RouterViewOptions,\n  PjaxOptions,\n  JsxRouterViewProps,\n} from \"../../types/index.js\";\n\ninterface RouterViewScope extends RouterViewOptions, ScopeBase {}\n\nexport class RouterViewComponent extends Component {\n  public static tagName = \"router-view\";\n  protected events = EventDispatcher.getInstance(\"main\");\n  protected nested: View | null = null;\n  protected wrapper: HTMLElement | null = null;\n  protected pjax: Pjax | null = null;\n  protected prefetch: Prefetch | null = null;\n\n  static get observedAttributes(): (keyof JsxRouterViewProps)[] {\n    return [\n      \"id\",\n      \"action\",\n      \"container-selector\",\n      \"scroll-to-top\",\n      \"listen-all-links\",\n      \"listen-popstate\",\n      \"scroll-to-anchor-hash\",\n      \"scroll-to-anchor-offset\",\n      \"dataset-to-root-scope\",\n      \"parse-title\",\n      \"change-browser-url\",\n      \"prefetch-links\",\n    ];\n  }\n\n  public scope: RouterViewScope = {\n    id: \"main\",\n    action: \"replace\",\n    scrollToTop: true,\n    listenAllLinks: true,\n    listenPopstate: true,\n    scrollToAnchorHash: true,\n    scrollToAnchorOffset: RouterService.options.scrollToAnchorOffset,\n    datasetToRootScope: true,\n    parseTitle: true,\n    changeBrowserUrl: true,\n    prefetchLinks: true,\n    transition: RouterService.options.defaultTransition,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(RouterViewComponent.observedAttributes);\n  }\n\n  protected addEventListeners() {\n    this.events.on(\"newPageReady\", this.onPageReady, this);\n    this.events.on(\"initStateChange\", this.onTransitionInit, this);\n    this.events.on(\"transitionCompleted\", this.onTransitionCompleted, this);\n  }\n\n  protected removeEventListeners() {\n    this.events.off(\"newPageReady\", this.onPageReady, this);\n    this.events.off(\"initStateChange\", this.onTransitionInit, this);\n    this.events.off(\"transitionCompleted\", this.onTransitionCompleted, this);\n  }\n\n  protected getContainerSelector() {\n    if (this.scope.id === \"main\") {\n      return `${RouterViewComponent.tagName} > *:first-child`;\n    } else {\n      return `${RouterViewComponent.tagName}#${this.scope.id} > *:first-child`;\n    }\n  }\n\n  protected initAndStartPjax() {\n    if (!this.scope.id) {\n      console.error(\"Id attribute is required!\");\n      return;\n    }\n\n    const pjaxOptions: PjaxOptions = {\n      id: this.scope.id,\n      action: this.scope.action,\n      wrapper: this,\n      containerSelector: this.getContainerSelector(),\n      listenAllLinks: !!this.scope.listenAllLinks,\n      listenPopstate: !!this.scope.listenPopstate,\n      transition: this.scope.transition,\n      parseTitle: !!this.scope.parseTitle,\n      changeBrowserUrl: !!this.scope.changeBrowserUrl,\n      prefetchLinks: !!this.scope.prefetchLinks,\n      scrollToTop: !!this.scope.scrollToTop,\n    };\n    this.pjax = new Pjax(pjaxOptions);\n    this.pjax.setActiveWrapper(this);\n    this.prefetch = new Prefetch(this.scope.id);\n    this.prefetch.init(pjaxOptions.prefetchLinks);\n    this.pjax.start();\n  }\n\n  protected onPageReady(\n    viewId: string,\n    currentStatus: State,\n    prevStatus: State,\n    container: HTMLElement,\n    newPageRawHTML: string,\n    dataset: any,\n    isInit: boolean\n  ) {\n    // Only continue if the viewID is equal (in this way it is possible to have multiple views)\n    if (viewId !== this.scope.id) {\n      console.warn(\"not the right view\", this.scope.id, viewId, dataset);\n      return;\n    }\n\n    this.debug(\"New page ready!\", this.innerHTML);\n\n    if (this.scope.datasetToRootScope) {\n      if (!this.scope.$root) {\n        this.scope.$root = {};\n      }\n      this.scope.$root.dataset = dataset;\n    }\n\n    // Ignore rest on first page requests\n    if (isInit) {\n      return;\n    }\n\n    this.view = this.getView();\n\n    if (!this.view) {\n      console.warn(\"View ist not ready!\");\n      return;\n    }\n\n    this.view.bind();\n  }\n\n  protected async onTransitionInit(viewId: string) {\n    if (viewId !== this.scope.id) {\n      return;\n    }\n    this.setTransitionClass(\"init\");\n  }\n\n  protected async onTransitionCompleted(viewId: string) {\n    // Only to anything if the viewID is equal (in this way it is possible to have multiple views)\n    if (viewId !== this.scope.id) {\n      return;\n    }\n\n    this.setTransitionClass(\"complete\");\n\n    if (this.scope.scrollToAnchorHash) {\n      let scrollToElement: HTMLElement | null = null;\n      const hash = window.location.hash.substr(1);\n      if (hash) {\n        scrollToElement = document.getElementById(\n          window.location.hash.substr(1)\n        );\n        // Scroll to Anchor of hash\n        if (scrollToElement) {\n          return await scrollTo(\n            scrollToElement,\n            this.scope.scrollToAnchorOffset,\n            window\n          );\n        }\n      }\n    }\n\n    if (this.scope.scrollToTop) {\n      return await scrollToPosition(window, \"start\", \"vertical\", \"smooth\");\n    }\n  }\n\n  protected setTransitionClass(state: \"init\" | \"complete\") {\n    this.classList.remove(\"transition-init\");\n    this.classList.remove(\"transition-complete\");\n    this.classList.add(`transition-${state}`);\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    switch (attributeName) {\n      case \"id\":\n        this.events = EventDispatcher.getInstance(this.scope.id);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.addEventListeners();\n    this.initAndStartPjax();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { RibaModule } from \"@ribajs/core\";\nimport * as binders from \"./binders/index.js\";\nimport * as components from \"./components/index.js\";\nimport * as services from \"./services/index.js\";\nimport { RouterModuleOptions } from \"./types/index.js\";\n\nexport const routerModule: RibaModule<Partial<RouterModuleOptions>> = {\n  binders,\n  components,\n  services,\n  formatters: {},\n  init(options = {}) {\n    services.RouterService.setSingleton(options);\n    return this;\n  },\n};\n","import type { ThemeChoice } from \"../types/index.js\";\n\nexport const themeChoices: ThemeChoice[] = [\"os\", \"dark\", \"light\"];\n","import { Bs5ModuleOptions, Breakpoint } from \"../types/index.js\";\n\nexport * from \"./theme-choices.js\";\n\n// Breakpoints\nexport const DEFAULT_BP_XS: Breakpoint = {\n  dimension: 0,\n  name: \"xs\",\n};\nexport const DEFAULT_BP_SM: Breakpoint = {\n  dimension: 576,\n  name: \"sm\",\n};\nexport const DEFAULT_BP_MD: Breakpoint = {\n  dimension: 768,\n  name: \"md\",\n};\nexport const DEFAULT_BP_LG: Breakpoint = {\n  dimension: 992,\n  name: \"lg\",\n};\nexport const DEFAULT_BP_XL: Breakpoint = {\n  dimension: 1200,\n  name: \"xl\",\n};\nexport const DEFAULT_BP_XXL: Breakpoint = {\n  dimension: 1400,\n  name: \"xxl\",\n};\n\nexport const DEFAULT_MODULE_OPTIONS: Bs5ModuleOptions = {\n  breakpoints: [\n    DEFAULT_BP_XS,\n    DEFAULT_BP_SM,\n    DEFAULT_BP_MD,\n    DEFAULT_BP_LG,\n    DEFAULT_BP_XL,\n    DEFAULT_BP_XXL,\n  ],\n  allowStoreDataInBrowser: true,\n};\n\n// EventDispatcher events\nexport const TOGGLE_BUTTON = {\n  nsPrefix: \"bs5-toggle-button:\",\n  eventNames: {\n    toggle: \"toggle\",\n    toggled: \"toggled\",\n    init: \"init\",\n    state: \"state\",\n  },\n};\n\nexport const TOGGLE_ATTRIBUTE = {\n  elEventNames: {\n    removed: \"removed\",\n    added: \"added\",\n  },\n};\n\nexport const TOGGLE_CLASS = {\n  elEventNames: {\n    removed: \"removed\",\n    added: \"added\",\n  },\n};\n","import { Breakpoint, Bs5ModuleOptions } from \"../types/index.js\";\nimport { DEFAULT_MODULE_OPTIONS } from \"../constants/index.js\";\nimport { debounce } from \"@ribajs/utils/src/control\";\nimport { getViewportDimensions } from \"@ribajs/utils/src/dom.js\";\nimport { EventDispatcher, EventCallback } from \"@ribajs/events\";\n\n/**\n * Events:\n * * breakpoint:changed\n */\nexport class Bs5Service {\n  protected _options: Bs5ModuleOptions = DEFAULT_MODULE_OPTIONS;\n  protected _events = EventDispatcher.getInstance(\"bs5\");\n  protected _activeBreakpoint: Breakpoint | null = null;\n\n  public static instance?: Bs5Service;\n\n  protected constructor(options: Bs5ModuleOptions) {\n    this._options = options;\n    this.sortBreakpoints(this._options.breakpoints);\n    this._onViewChanges();\n    this.addEventListeners();\n  }\n\n  public static getSingleton() {\n    if (Bs5Service.instance) {\n      return Bs5Service.instance;\n    }\n\n    throw new Error(\n      \"Singleton of Bs5Service not defined, please call `Bs5Service.setSingleton` or `bs5Module.init` first!\"\n    );\n  }\n\n  public static setSingleton(\n    options: Bs5ModuleOptions = DEFAULT_MODULE_OPTIONS\n  ) {\n    if (Bs5Service.instance) {\n      throw new Error(`Singleton of Bs5Service already defined!`);\n    }\n    Bs5Service.instance = new Bs5Service(options);\n    return Bs5Service.instance;\n  }\n\n  protected onBreakpointChanges() {\n    this._events.trigger(\"breakpoint:changed\", this.activeBreakpoint);\n  }\n\n  protected setActiveBreakpoint(breakpoint: Breakpoint) {\n    if (breakpoint && breakpoint.name !== this.activeBreakpoint?.name) {\n      this._activeBreakpoint = breakpoint;\n      this.onBreakpointChanges();\n    }\n  }\n\n  protected addEventListeners() {\n    window.addEventListener(\"resize\", this.onViewChanges, { passive: true });\n  }\n\n  protected removeEventListeners() {\n    window.removeEventListener(\"resize\", this.onViewChanges);\n  }\n\n  protected _onViewChanges() {\n    const newBreakpoint =\n      this.getBreakpointByDimension(getViewportDimensions().w) ||\n      this.getBreakpointByName(\"xs\");\n    if (newBreakpoint) {\n      this.setActiveBreakpoint(newBreakpoint);\n    }\n  }\n\n  protected onViewChanges = debounce(this._onViewChanges.bind(this));\n\n  public sortBreakpoints(breakpoints: Breakpoint[]) {\n    breakpoints.sort((a, b) => a.dimension - b.dimension);\n  }\n\n  public get options() {\n    return this._options;\n  }\n\n  public get activeBreakpoint() {\n    return this._activeBreakpoint;\n  }\n\n  public get breakpointNames() {\n    return this.options.breakpoints.map((breakpoint) => breakpoint.name);\n  }\n\n  public get events() {\n    return this._events;\n  }\n\n  public on(\n    eventName: \"breakpoint:changed\",\n    cb: (activeBreakpoint: Breakpoint) => void,\n    thisContext?: any\n  ): void;\n  public on(eventName: string, cb: EventCallback, thisContext?: any) {\n    return this.events.on(eventName, cb, thisContext);\n  }\n\n  public once(\n    eventName: \"breakpoint:changed\",\n    cb: (activeBreakpoint: Breakpoint) => void,\n    thisContext?: any\n  ): void;\n  public once(eventName: string, cb: EventCallback, thisContext?: any) {\n    return this.events.once(eventName, cb, thisContext);\n  }\n\n  public off(\n    eventName: \"breakpoint:changed\",\n    cb: (activeBreakpoint: Breakpoint) => void,\n    thisContext?: any\n  ): void;\n  public off(eventName: string, cb: EventCallback, thisContext?: any) {\n    return this.events.off(eventName, cb, thisContext);\n  }\n\n  /**\n   * Get breakpoint for width\n   * @param dimension The dimension you are looking for, e.g. window.innerWidth\n   * @param breakpoints Optional custom breakpoints, otherwise the default globally breakpoints are used\n   */\n  public getBreakpointByDimension(\n    dimension: number,\n    breakpoints?: Breakpoint[]\n  ): Breakpoint | null {\n    breakpoints = breakpoints || this.options.breakpoints;\n\n    for (let i = 0; i < breakpoints.length - 1; i++) {\n      const curr = breakpoints[i];\n      const next = breakpoints[i + 1];\n      if (\n        next &&\n        curr &&\n        dimension > curr.dimension &&\n        dimension < next.dimension\n      ) {\n        return curr;\n      }\n    }\n\n    const last = breakpoints[breakpoints.length - 1];\n    if (dimension >= last.dimension) {\n      return last;\n    }\n\n    return null;\n  }\n\n  /**\n   * Get breakpoint by name\n   * @param name The name you are looking for, e.g. xs\n   * @param breakpoints Optional custom breakpoints, otherwise the default globally breakpoints are used\n   */\n  public getBreakpointByName(\n    name: string,\n    breakpoints?: Breakpoint[]\n  ): Breakpoint | null {\n    breakpoints = breakpoints || this.options.breakpoints;\n    const found = breakpoints.find((breakpoint) => breakpoint.name === name);\n    if (!found) {\n      return null;\n    }\n    return found;\n  }\n\n  public getNextBreakpointByName(name: string) {\n    const breakpoints = this.breakpointNames;\n    const index = breakpoints.indexOf(name);\n    if (index < 0) {\n      throw new Error(`the breakpoint \"${name}\" does not exist!`);\n    }\n    // There is no next breakpoint\n    if (index === breakpoints.length - 1) {\n      return null;\n    }\n    return breakpoints[index + 1];\n  }\n\n  public getPrevBreakpointByName(name: string) {\n    const breakpoints = this.breakpointNames;\n    const index = breakpoints.indexOf(name);\n    if (index < 0) {\n      throw new Error(`the breakpoint \"${name}\" does not exist!`);\n    }\n    // There is no previous breakpoint\n    if (index === 0) {\n      return null;\n    }\n    return breakpoints[index - 1];\n  }\n\n  public isBreakpointGreaterThan(\n    isBreakpointName: string,\n    compareBreakpointName: string\n  ): boolean | null {\n    const isBreakpoint = this.getBreakpointByName(isBreakpointName);\n    const compareBreakpoint = this.getBreakpointByName(compareBreakpointName);\n    if (isBreakpoint && compareBreakpoint) {\n      return isBreakpoint.dimension > compareBreakpoint.dimension;\n    }\n    return null;\n  }\n\n  public isBreakpointSmallerThan(\n    isBreakpointName: string,\n    compareBreakpointName: string\n  ): boolean | null {\n    const isBreakpoint = this.getBreakpointByName(isBreakpointName);\n    const compareBreakpoint = this.getBreakpointByName(compareBreakpointName);\n    if (isBreakpoint && compareBreakpoint) {\n      return isBreakpoint.dimension < compareBreakpoint.dimension;\n    }\n    return null;\n  }\n\n  public isActiveBreakpointGreaterThan(\n    compareBreakpoint: string\n  ): boolean | null {\n    if (!this.activeBreakpoint) {\n      return null;\n    }\n    return this.isBreakpointGreaterThan(\n      this.activeBreakpoint.name,\n      compareBreakpoint\n    );\n  }\n\n  public isActiveBreakpointSmallerThan(\n    compareBreakpoint: string\n  ): boolean | null {\n    if (!this.activeBreakpoint) {\n      return null;\n    }\n    return this.isBreakpointSmallerThan(\n      this.activeBreakpoint.name,\n      compareBreakpoint\n    );\n  }\n}\n","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}","import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}","import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","/*!\n  * Bootstrap v5.1.3 (https://getbootstrap.com/)\n  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)\n  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n  */\nimport * as Popper from '@popperjs/core';\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\nconst MAX_UID = 1000000;\nconst MILLISECONDS_MULTIPLIER = 1000;\nconst TRANSITION_END = 'transitionend'; // Shoutout AngusCroll (https://goo.gl/pxwQGp)\n\nconst toType = obj => {\n  if (obj === null || obj === undefined) {\n    return `${obj}`;\n  }\n\n  return {}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase();\n};\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\n\nconst getUID = prefix => {\n  do {\n    prefix += Math.floor(Math.random() * MAX_UID);\n  } while (document.getElementById(prefix));\n\n  return prefix;\n};\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-bs-target');\n\n  if (!selector || selector === '#') {\n    let hrefAttr = element.getAttribute('href'); // The only valid content that could double as a selector are IDs or classes,\n    // so everything starting with `#` or `.`. If a \"real\" URL is used as the selector,\n    // `document.querySelector` will rightfully complain it is invalid.\n    // See https://github.com/twbs/bootstrap/issues/32273\n\n    if (!hrefAttr || !hrefAttr.includes('#') && !hrefAttr.startsWith('.')) {\n      return null;\n    } // Just in case some CMS puts out a full URL with the anchor appended\n\n\n    if (hrefAttr.includes('#') && !hrefAttr.startsWith('#')) {\n      hrefAttr = `#${hrefAttr.split('#')[1]}`;\n    }\n\n    selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : null;\n  }\n\n  return selector;\n};\n\nconst getSelectorFromElement = element => {\n  const selector = getSelector(element);\n\n  if (selector) {\n    return document.querySelector(selector) ? selector : null;\n  }\n\n  return null;\n};\n\nconst getElementFromSelector = element => {\n  const selector = getSelector(element);\n  return selector ? document.querySelector(selector) : null;\n};\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0;\n  } // Get transition-duration of the element\n\n\n  let {\n    transitionDuration,\n    transitionDelay\n  } = window.getComputedStyle(element);\n  const floatTransitionDuration = Number.parseFloat(transitionDuration);\n  const floatTransitionDelay = Number.parseFloat(transitionDelay); // Return 0 if element or transition duration is not found\n\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0;\n  } // If multiple durations are defined, take the first\n\n\n  transitionDuration = transitionDuration.split(',')[0];\n  transitionDelay = transitionDelay.split(',')[0];\n  return (Number.parseFloat(transitionDuration) + Number.parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER;\n};\n\nconst triggerTransitionEnd = element => {\n  element.dispatchEvent(new Event(TRANSITION_END));\n};\n\nconst isElement = obj => {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (typeof obj.jquery !== 'undefined') {\n    obj = obj[0];\n  }\n\n  return typeof obj.nodeType !== 'undefined';\n};\n\nconst getElement = obj => {\n  if (isElement(obj)) {\n    // it's a jQuery object or a node element\n    return obj.jquery ? obj[0] : obj;\n  }\n\n  if (typeof obj === 'string' && obj.length > 0) {\n    return document.querySelector(obj);\n  }\n\n  return null;\n};\n\nconst typeCheckConfig = (componentName, config, configTypes) => {\n  Object.keys(configTypes).forEach(property => {\n    const expectedTypes = configTypes[property];\n    const value = config[property];\n    const valueType = value && isElement(value) ? 'element' : toType(value);\n\n    if (!new RegExp(expectedTypes).test(valueType)) {\n      throw new TypeError(`${componentName.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`);\n    }\n  });\n};\n\nconst isVisible = element => {\n  if (!isElement(element) || element.getClientRects().length === 0) {\n    return false;\n  }\n\n  return getComputedStyle(element).getPropertyValue('visibility') === 'visible';\n};\n\nconst isDisabled = element => {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    return true;\n  }\n\n  if (element.classList.contains('disabled')) {\n    return true;\n  }\n\n  if (typeof element.disabled !== 'undefined') {\n    return element.disabled;\n  }\n\n  return element.hasAttribute('disabled') && element.getAttribute('disabled') !== 'false';\n};\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null;\n  } // Can find the shadow root otherwise it'll return the document\n\n\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode();\n    return root instanceof ShadowRoot ? root : null;\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element;\n  } // when we don't find a shadow root\n\n\n  if (!element.parentNode) {\n    return null;\n  }\n\n  return findShadowRoot(element.parentNode);\n};\n\nconst noop = () => {};\n/**\n * Trick to restart an element's animation\n *\n * @param {HTMLElement} element\n * @return void\n *\n * @see https://www.charistheo.io/blog/2021/02/restart-a-css-animation-with-javascript/#restarting-a-css-animation\n */\n\n\nconst reflow = element => {\n  // eslint-disable-next-line no-unused-expressions\n  element.offsetHeight;\n};\n\nconst getjQuery = () => {\n  const {\n    jQuery\n  } = window;\n\n  if (jQuery && !document.body.hasAttribute('data-bs-no-jquery')) {\n    return jQuery;\n  }\n\n  return null;\n};\n\nconst DOMContentLoadedCallbacks = [];\n\nconst onDOMContentLoaded = callback => {\n  if (document.readyState === 'loading') {\n    // add listener on the first call when the document is in loading state\n    if (!DOMContentLoadedCallbacks.length) {\n      document.addEventListener('DOMContentLoaded', () => {\n        DOMContentLoadedCallbacks.forEach(callback => callback());\n      });\n    }\n\n    DOMContentLoadedCallbacks.push(callback);\n  } else {\n    callback();\n  }\n};\n\nconst isRTL = () => document.documentElement.dir === 'rtl';\n\nconst defineJQueryPlugin = plugin => {\n  onDOMContentLoaded(() => {\n    const $ = getjQuery();\n    /* istanbul ignore if */\n\n    if ($) {\n      const name = plugin.NAME;\n      const JQUERY_NO_CONFLICT = $.fn[name];\n      $.fn[name] = plugin.jQueryInterface;\n      $.fn[name].Constructor = plugin;\n\n      $.fn[name].noConflict = () => {\n        $.fn[name] = JQUERY_NO_CONFLICT;\n        return plugin.jQueryInterface;\n      };\n    }\n  });\n};\n\nconst execute = callback => {\n  if (typeof callback === 'function') {\n    callback();\n  }\n};\n\nconst executeAfterTransition = (callback, transitionElement, waitForTransition = true) => {\n  if (!waitForTransition) {\n    execute(callback);\n    return;\n  }\n\n  const durationPadding = 5;\n  const emulatedDuration = getTransitionDurationFromElement(transitionElement) + durationPadding;\n  let called = false;\n\n  const handler = ({\n    target\n  }) => {\n    if (target !== transitionElement) {\n      return;\n    }\n\n    called = true;\n    transitionElement.removeEventListener(TRANSITION_END, handler);\n    execute(callback);\n  };\n\n  transitionElement.addEventListener(TRANSITION_END, handler);\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(transitionElement);\n    }\n  }, emulatedDuration);\n};\n/**\n * Return the previous/next element of a list.\n *\n * @param {array} list    The list of elements\n * @param activeElement   The active element\n * @param shouldGetNext   Choose to get next or previous element\n * @param isCycleAllowed\n * @return {Element|elem} The proper element\n */\n\n\nconst getNextActiveElement = (list, activeElement, shouldGetNext, isCycleAllowed) => {\n  let index = list.indexOf(activeElement); // if the element does not exist in the list return an element depending on the direction and if cycle is allowed\n\n  if (index === -1) {\n    return list[!shouldGetNext && isCycleAllowed ? list.length - 1 : 0];\n  }\n\n  const listLength = list.length;\n  index += shouldGetNext ? 1 : -1;\n\n  if (isCycleAllowed) {\n    index = (index + listLength) % listLength;\n  }\n\n  return list[Math.max(0, Math.min(index, listLength - 1))];\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): dom/event-handler.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst namespaceRegex = /[^.]*(?=\\..*)\\.|.*/;\nconst stripNameRegex = /\\..*/;\nconst stripUidRegex = /::\\d+$/;\nconst eventRegistry = {}; // Events storage\n\nlet uidEvent = 1;\nconst customEvents = {\n  mouseenter: 'mouseover',\n  mouseleave: 'mouseout'\n};\nconst customEventsRegex = /^(mouseenter|mouseleave)/i;\nconst nativeEvents = new Set(['click', 'dblclick', 'mouseup', 'mousedown', 'contextmenu', 'mousewheel', 'DOMMouseScroll', 'mouseover', 'mouseout', 'mousemove', 'selectstart', 'selectend', 'keydown', 'keypress', 'keyup', 'orientationchange', 'touchstart', 'touchmove', 'touchend', 'touchcancel', 'pointerdown', 'pointermove', 'pointerup', 'pointerleave', 'pointercancel', 'gesturestart', 'gesturechange', 'gestureend', 'focus', 'blur', 'change', 'reset', 'select', 'submit', 'focusin', 'focusout', 'load', 'unload', 'beforeunload', 'resize', 'move', 'DOMContentLoaded', 'readystatechange', 'error', 'abort', 'scroll']);\n/**\n * ------------------------------------------------------------------------\n * Private methods\n * ------------------------------------------------------------------------\n */\n\nfunction getUidEvent(element, uid) {\n  return uid && `${uid}::${uidEvent++}` || element.uidEvent || uidEvent++;\n}\n\nfunction getEvent(element) {\n  const uid = getUidEvent(element);\n  element.uidEvent = uid;\n  eventRegistry[uid] = eventRegistry[uid] || {};\n  return eventRegistry[uid];\n}\n\nfunction bootstrapHandler(element, fn) {\n  return function handler(event) {\n    event.delegateTarget = element;\n\n    if (handler.oneOff) {\n      EventHandler.off(element, event.type, fn);\n    }\n\n    return fn.apply(element, [event]);\n  };\n}\n\nfunction bootstrapDelegationHandler(element, selector, fn) {\n  return function handler(event) {\n    const domElements = element.querySelectorAll(selector);\n\n    for (let {\n      target\n    } = event; target && target !== this; target = target.parentNode) {\n      for (let i = domElements.length; i--;) {\n        if (domElements[i] === target) {\n          event.delegateTarget = target;\n\n          if (handler.oneOff) {\n            EventHandler.off(element, event.type, selector, fn);\n          }\n\n          return fn.apply(target, [event]);\n        }\n      }\n    } // To please ESLint\n\n\n    return null;\n  };\n}\n\nfunction findHandler(events, handler, delegationSelector = null) {\n  const uidEventList = Object.keys(events);\n\n  for (let i = 0, len = uidEventList.length; i < len; i++) {\n    const event = events[uidEventList[i]];\n\n    if (event.originalHandler === handler && event.delegationSelector === delegationSelector) {\n      return event;\n    }\n  }\n\n  return null;\n}\n\nfunction normalizeParams(originalTypeEvent, handler, delegationFn) {\n  const delegation = typeof handler === 'string';\n  const originalHandler = delegation ? delegationFn : handler;\n  let typeEvent = getTypeEvent(originalTypeEvent);\n  const isNative = nativeEvents.has(typeEvent);\n\n  if (!isNative) {\n    typeEvent = originalTypeEvent;\n  }\n\n  return [delegation, originalHandler, typeEvent];\n}\n\nfunction addHandler(element, originalTypeEvent, handler, delegationFn, oneOff) {\n  if (typeof originalTypeEvent !== 'string' || !element) {\n    return;\n  }\n\n  if (!handler) {\n    handler = delegationFn;\n    delegationFn = null;\n  } // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position\n  // this prevents the handler from being dispatched the same way as mouseover or mouseout does\n\n\n  if (customEventsRegex.test(originalTypeEvent)) {\n    const wrapFn = fn => {\n      return function (event) {\n        if (!event.relatedTarget || event.relatedTarget !== event.delegateTarget && !event.delegateTarget.contains(event.relatedTarget)) {\n          return fn.call(this, event);\n        }\n      };\n    };\n\n    if (delegationFn) {\n      delegationFn = wrapFn(delegationFn);\n    } else {\n      handler = wrapFn(handler);\n    }\n  }\n\n  const [delegation, originalHandler, typeEvent] = normalizeParams(originalTypeEvent, handler, delegationFn);\n  const events = getEvent(element);\n  const handlers = events[typeEvent] || (events[typeEvent] = {});\n  const previousFn = findHandler(handlers, originalHandler, delegation ? handler : null);\n\n  if (previousFn) {\n    previousFn.oneOff = previousFn.oneOff && oneOff;\n    return;\n  }\n\n  const uid = getUidEvent(originalHandler, originalTypeEvent.replace(namespaceRegex, ''));\n  const fn = delegation ? bootstrapDelegationHandler(element, handler, delegationFn) : bootstrapHandler(element, handler);\n  fn.delegationSelector = delegation ? handler : null;\n  fn.originalHandler = originalHandler;\n  fn.oneOff = oneOff;\n  fn.uidEvent = uid;\n  handlers[uid] = fn;\n  element.addEventListener(typeEvent, fn, delegation);\n}\n\nfunction removeHandler(element, events, typeEvent, handler, delegationSelector) {\n  const fn = findHandler(events[typeEvent], handler, delegationSelector);\n\n  if (!fn) {\n    return;\n  }\n\n  element.removeEventListener(typeEvent, fn, Boolean(delegationSelector));\n  delete events[typeEvent][fn.uidEvent];\n}\n\nfunction removeNamespacedHandlers(element, events, typeEvent, namespace) {\n  const storeElementEvent = events[typeEvent] || {};\n  Object.keys(storeElementEvent).forEach(handlerKey => {\n    if (handlerKey.includes(namespace)) {\n      const event = storeElementEvent[handlerKey];\n      removeHandler(element, events, typeEvent, event.originalHandler, event.delegationSelector);\n    }\n  });\n}\n\nfunction getTypeEvent(event) {\n  // allow to get the native events from namespaced events ('click.bs.button' --> 'click')\n  event = event.replace(stripNameRegex, '');\n  return customEvents[event] || event;\n}\n\nconst EventHandler = {\n  on(element, event, handler, delegationFn) {\n    addHandler(element, event, handler, delegationFn, false);\n  },\n\n  one(element, event, handler, delegationFn) {\n    addHandler(element, event, handler, delegationFn, true);\n  },\n\n  off(element, originalTypeEvent, handler, delegationFn) {\n    if (typeof originalTypeEvent !== 'string' || !element) {\n      return;\n    }\n\n    const [delegation, originalHandler, typeEvent] = normalizeParams(originalTypeEvent, handler, delegationFn);\n    const inNamespace = typeEvent !== originalTypeEvent;\n    const events = getEvent(element);\n    const isNamespace = originalTypeEvent.startsWith('.');\n\n    if (typeof originalHandler !== 'undefined') {\n      // Simplest case: handler is passed, remove that listener ONLY.\n      if (!events || !events[typeEvent]) {\n        return;\n      }\n\n      removeHandler(element, events, typeEvent, originalHandler, delegation ? handler : null);\n      return;\n    }\n\n    if (isNamespace) {\n      Object.keys(events).forEach(elementEvent => {\n        removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1));\n      });\n    }\n\n    const storeElementEvent = events[typeEvent] || {};\n    Object.keys(storeElementEvent).forEach(keyHandlers => {\n      const handlerKey = keyHandlers.replace(stripUidRegex, '');\n\n      if (!inNamespace || originalTypeEvent.includes(handlerKey)) {\n        const event = storeElementEvent[keyHandlers];\n        removeHandler(element, events, typeEvent, event.originalHandler, event.delegationSelector);\n      }\n    });\n  },\n\n  trigger(element, event, args) {\n    if (typeof event !== 'string' || !element) {\n      return null;\n    }\n\n    const $ = getjQuery();\n    const typeEvent = getTypeEvent(event);\n    const inNamespace = event !== typeEvent;\n    const isNative = nativeEvents.has(typeEvent);\n    let jQueryEvent;\n    let bubbles = true;\n    let nativeDispatch = true;\n    let defaultPrevented = false;\n    let evt = null;\n\n    if (inNamespace && $) {\n      jQueryEvent = $.Event(event, args);\n      $(element).trigger(jQueryEvent);\n      bubbles = !jQueryEvent.isPropagationStopped();\n      nativeDispatch = !jQueryEvent.isImmediatePropagationStopped();\n      defaultPrevented = jQueryEvent.isDefaultPrevented();\n    }\n\n    if (isNative) {\n      evt = document.createEvent('HTMLEvents');\n      evt.initEvent(typeEvent, bubbles, true);\n    } else {\n      evt = new CustomEvent(event, {\n        bubbles,\n        cancelable: true\n      });\n    } // merge custom information in our event\n\n\n    if (typeof args !== 'undefined') {\n      Object.keys(args).forEach(key => {\n        Object.defineProperty(evt, key, {\n          get() {\n            return args[key];\n          }\n\n        });\n      });\n    }\n\n    if (defaultPrevented) {\n      evt.preventDefault();\n    }\n\n    if (nativeDispatch) {\n      element.dispatchEvent(evt);\n    }\n\n    if (evt.defaultPrevented && typeof jQueryEvent !== 'undefined') {\n      jQueryEvent.preventDefault();\n    }\n\n    return evt;\n  }\n\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\nconst elementMap = new Map();\nconst Data = {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map());\n    }\n\n    const instanceMap = elementMap.get(element); // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`);\n      return;\n    }\n\n    instanceMap.set(key, instance);\n  },\n\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null;\n    }\n\n    return null;\n  },\n\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return;\n    }\n\n    const instanceMap = elementMap.get(element);\n    instanceMap.delete(key); // free up element references if there are no instances left for an element\n\n    if (instanceMap.size === 0) {\n      elementMap.delete(element);\n    }\n  }\n\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst VERSION = '5.1.3';\n\nclass BaseComponent {\n  constructor(element) {\n    element = getElement(element);\n\n    if (!element) {\n      return;\n    }\n\n    this._element = element;\n    Data.set(this._element, this.constructor.DATA_KEY, this);\n  }\n\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY);\n    EventHandler.off(this._element, this.constructor.EVENT_KEY);\n    Object.getOwnPropertyNames(this).forEach(propertyName => {\n      this[propertyName] = null;\n    });\n  }\n\n  _queueCallback(callback, element, isAnimated = true) {\n    executeAfterTransition(callback, element, isAnimated);\n  }\n  /** Static */\n\n\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY);\n  }\n\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null);\n  }\n\n  static get VERSION() {\n    return VERSION;\n  }\n\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!');\n  }\n\n  static get DATA_KEY() {\n    return `bs.${this.NAME}`;\n  }\n\n  static get EVENT_KEY() {\n    return `.${this.DATA_KEY}`;\n  }\n\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/component-functions.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst enableDismissTrigger = (component, method = 'hide') => {\n  const clickEvent = `click.dismiss${component.EVENT_KEY}`;\n  const name = component.NAME;\n  EventHandler.on(document, clickEvent, `[data-bs-dismiss=\"${name}\"]`, function (event) {\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault();\n    }\n\n    if (isDisabled(this)) {\n      return;\n    }\n\n    const target = getElementFromSelector(this) || this.closest(`.${name}`);\n    const instance = component.getOrCreateInstance(target); // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method\n\n    instance[method]();\n  });\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$d = 'alert';\nconst DATA_KEY$c = 'bs.alert';\nconst EVENT_KEY$c = `.${DATA_KEY$c}`;\nconst EVENT_CLOSE = `close${EVENT_KEY$c}`;\nconst EVENT_CLOSED = `closed${EVENT_KEY$c}`;\nconst CLASS_NAME_FADE$5 = 'fade';\nconst CLASS_NAME_SHOW$8 = 'show';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Alert extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME$d;\n  } // Public\n\n\n  close() {\n    const closeEvent = EventHandler.trigger(this._element, EVENT_CLOSE);\n\n    if (closeEvent.defaultPrevented) {\n      return;\n    }\n\n    this._element.classList.remove(CLASS_NAME_SHOW$8);\n\n    const isAnimated = this._element.classList.contains(CLASS_NAME_FADE$5);\n\n    this._queueCallback(() => this._destroyElement(), this._element, isAnimated);\n  } // Private\n\n\n  _destroyElement() {\n    this._element.remove();\n\n    EventHandler.trigger(this._element, EVENT_CLOSED);\n    this.dispose();\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Alert.getOrCreateInstance(this);\n\n      if (typeof config !== 'string') {\n        return;\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n\n      data[config](this);\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nenableDismissTrigger(Alert, 'close');\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Alert to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Alert);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): button.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$c = 'button';\nconst DATA_KEY$b = 'bs.button';\nconst EVENT_KEY$b = `.${DATA_KEY$b}`;\nconst DATA_API_KEY$7 = '.data-api';\nconst CLASS_NAME_ACTIVE$3 = 'active';\nconst SELECTOR_DATA_TOGGLE$5 = '[data-bs-toggle=\"button\"]';\nconst EVENT_CLICK_DATA_API$6 = `click${EVENT_KEY$b}${DATA_API_KEY$7}`;\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Button extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME$c;\n  } // Public\n\n\n  toggle() {\n    // Toggle class and sync the `aria-pressed` attribute with the return value of the `.toggle()` method\n    this._element.setAttribute('aria-pressed', this._element.classList.toggle(CLASS_NAME_ACTIVE$3));\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Button.getOrCreateInstance(this);\n\n      if (config === 'toggle') {\n        data[config]();\n      }\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$6, SELECTOR_DATA_TOGGLE$5, event => {\n  event.preventDefault();\n  const button = event.target.closest(SELECTOR_DATA_TOGGLE$5);\n  const data = Button.getOrCreateInstance(button);\n  data.toggle();\n});\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Button to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Button);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): dom/manipulator.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\nfunction normalizeData(val) {\n  if (val === 'true') {\n    return true;\n  }\n\n  if (val === 'false') {\n    return false;\n  }\n\n  if (val === Number(val).toString()) {\n    return Number(val);\n  }\n\n  if (val === '' || val === 'null') {\n    return null;\n  }\n\n  return val;\n}\n\nfunction normalizeDataKey(key) {\n  return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`);\n}\n\nconst Manipulator = {\n  setDataAttribute(element, key, value) {\n    element.setAttribute(`data-bs-${normalizeDataKey(key)}`, value);\n  },\n\n  removeDataAttribute(element, key) {\n    element.removeAttribute(`data-bs-${normalizeDataKey(key)}`);\n  },\n\n  getDataAttributes(element) {\n    if (!element) {\n      return {};\n    }\n\n    const attributes = {};\n    Object.keys(element.dataset).filter(key => key.startsWith('bs')).forEach(key => {\n      let pureKey = key.replace(/^bs/, '');\n      pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length);\n      attributes[pureKey] = normalizeData(element.dataset[key]);\n    });\n    return attributes;\n  },\n\n  getDataAttribute(element, key) {\n    return normalizeData(element.getAttribute(`data-bs-${normalizeDataKey(key)}`));\n  },\n\n  offset(element) {\n    const rect = element.getBoundingClientRect();\n    return {\n      top: rect.top + window.pageYOffset,\n      left: rect.left + window.pageXOffset\n    };\n  },\n\n  position(element) {\n    return {\n      top: element.offsetTop,\n      left: element.offsetLeft\n    };\n  }\n\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): dom/selector-engine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\nconst NODE_TEXT = 3;\nconst SelectorEngine = {\n  find(selector, element = document.documentElement) {\n    return [].concat(...Element.prototype.querySelectorAll.call(element, selector));\n  },\n\n  findOne(selector, element = document.documentElement) {\n    return Element.prototype.querySelector.call(element, selector);\n  },\n\n  children(element, selector) {\n    return [].concat(...element.children).filter(child => child.matches(selector));\n  },\n\n  parents(element, selector) {\n    const parents = [];\n    let ancestor = element.parentNode;\n\n    while (ancestor && ancestor.nodeType === Node.ELEMENT_NODE && ancestor.nodeType !== NODE_TEXT) {\n      if (ancestor.matches(selector)) {\n        parents.push(ancestor);\n      }\n\n      ancestor = ancestor.parentNode;\n    }\n\n    return parents;\n  },\n\n  prev(element, selector) {\n    let previous = element.previousElementSibling;\n\n    while (previous) {\n      if (previous.matches(selector)) {\n        return [previous];\n      }\n\n      previous = previous.previousElementSibling;\n    }\n\n    return [];\n  },\n\n  next(element, selector) {\n    let next = element.nextElementSibling;\n\n    while (next) {\n      if (next.matches(selector)) {\n        return [next];\n      }\n\n      next = next.nextElementSibling;\n    }\n\n    return [];\n  },\n\n  focusableChildren(element) {\n    const focusables = ['a', 'button', 'input', 'textarea', 'select', 'details', '[tabindex]', '[contenteditable=\"true\"]'].map(selector => `${selector}:not([tabindex^=\"-\"])`).join(', ');\n    return this.find(focusables, element).filter(el => !isDisabled(el) && isVisible(el));\n  }\n\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): carousel.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$b = 'carousel';\nconst DATA_KEY$a = 'bs.carousel';\nconst EVENT_KEY$a = `.${DATA_KEY$a}`;\nconst DATA_API_KEY$6 = '.data-api';\nconst ARROW_LEFT_KEY = 'ArrowLeft';\nconst ARROW_RIGHT_KEY = 'ArrowRight';\nconst TOUCHEVENT_COMPAT_WAIT = 500; // Time for mouse compat events to fire after touch\n\nconst SWIPE_THRESHOLD = 40;\nconst Default$a = {\n  interval: 5000,\n  keyboard: true,\n  slide: false,\n  pause: 'hover',\n  wrap: true,\n  touch: true\n};\nconst DefaultType$a = {\n  interval: '(number|boolean)',\n  keyboard: 'boolean',\n  slide: '(boolean|string)',\n  pause: '(string|boolean)',\n  wrap: 'boolean',\n  touch: 'boolean'\n};\nconst ORDER_NEXT = 'next';\nconst ORDER_PREV = 'prev';\nconst DIRECTION_LEFT = 'left';\nconst DIRECTION_RIGHT = 'right';\nconst KEY_TO_DIRECTION = {\n  [ARROW_LEFT_KEY]: DIRECTION_RIGHT,\n  [ARROW_RIGHT_KEY]: DIRECTION_LEFT\n};\nconst EVENT_SLIDE = `slide${EVENT_KEY$a}`;\nconst EVENT_SLID = `slid${EVENT_KEY$a}`;\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY$a}`;\nconst EVENT_MOUSEENTER = `mouseenter${EVENT_KEY$a}`;\nconst EVENT_MOUSELEAVE = `mouseleave${EVENT_KEY$a}`;\nconst EVENT_TOUCHSTART = `touchstart${EVENT_KEY$a}`;\nconst EVENT_TOUCHMOVE = `touchmove${EVENT_KEY$a}`;\nconst EVENT_TOUCHEND = `touchend${EVENT_KEY$a}`;\nconst EVENT_POINTERDOWN = `pointerdown${EVENT_KEY$a}`;\nconst EVENT_POINTERUP = `pointerup${EVENT_KEY$a}`;\nconst EVENT_DRAG_START = `dragstart${EVENT_KEY$a}`;\nconst EVENT_LOAD_DATA_API$2 = `load${EVENT_KEY$a}${DATA_API_KEY$6}`;\nconst EVENT_CLICK_DATA_API$5 = `click${EVENT_KEY$a}${DATA_API_KEY$6}`;\nconst CLASS_NAME_CAROUSEL = 'carousel';\nconst CLASS_NAME_ACTIVE$2 = 'active';\nconst CLASS_NAME_SLIDE = 'slide';\nconst CLASS_NAME_END = 'carousel-item-end';\nconst CLASS_NAME_START = 'carousel-item-start';\nconst CLASS_NAME_NEXT = 'carousel-item-next';\nconst CLASS_NAME_PREV = 'carousel-item-prev';\nconst CLASS_NAME_POINTER_EVENT = 'pointer-event';\nconst SELECTOR_ACTIVE$1 = '.active';\nconst SELECTOR_ACTIVE_ITEM = '.active.carousel-item';\nconst SELECTOR_ITEM = '.carousel-item';\nconst SELECTOR_ITEM_IMG = '.carousel-item img';\nconst SELECTOR_NEXT_PREV = '.carousel-item-next, .carousel-item-prev';\nconst SELECTOR_INDICATORS = '.carousel-indicators';\nconst SELECTOR_INDICATOR = '[data-bs-target]';\nconst SELECTOR_DATA_SLIDE = '[data-bs-slide], [data-bs-slide-to]';\nconst SELECTOR_DATA_RIDE = '[data-bs-ride=\"carousel\"]';\nconst POINTER_TYPE_TOUCH = 'touch';\nconst POINTER_TYPE_PEN = 'pen';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Carousel extends BaseComponent {\n  constructor(element, config) {\n    super(element);\n    this._items = null;\n    this._interval = null;\n    this._activeElement = null;\n    this._isPaused = false;\n    this._isSliding = false;\n    this.touchTimeout = null;\n    this.touchStartX = 0;\n    this.touchDeltaX = 0;\n    this._config = this._getConfig(config);\n    this._indicatorsElement = SelectorEngine.findOne(SELECTOR_INDICATORS, this._element);\n    this._touchSupported = 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0;\n    this._pointerEvent = Boolean(window.PointerEvent);\n\n    this._addEventListeners();\n  } // Getters\n\n\n  static get Default() {\n    return Default$a;\n  }\n\n  static get NAME() {\n    return NAME$b;\n  } // Public\n\n\n  next() {\n    this._slide(ORDER_NEXT);\n  }\n\n  nextWhenVisible() {\n    // Don't call next when the page isn't visible\n    // or the carousel or its parent isn't visible\n    if (!document.hidden && isVisible(this._element)) {\n      this.next();\n    }\n  }\n\n  prev() {\n    this._slide(ORDER_PREV);\n  }\n\n  pause(event) {\n    if (!event) {\n      this._isPaused = true;\n    }\n\n    if (SelectorEngine.findOne(SELECTOR_NEXT_PREV, this._element)) {\n      triggerTransitionEnd(this._element);\n      this.cycle(true);\n    }\n\n    clearInterval(this._interval);\n    this._interval = null;\n  }\n\n  cycle(event) {\n    if (!event) {\n      this._isPaused = false;\n    }\n\n    if (this._interval) {\n      clearInterval(this._interval);\n      this._interval = null;\n    }\n\n    if (this._config && this._config.interval && !this._isPaused) {\n      this._updateInterval();\n\n      this._interval = setInterval((document.visibilityState ? this.nextWhenVisible : this.next).bind(this), this._config.interval);\n    }\n  }\n\n  to(index) {\n    this._activeElement = SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element);\n\n    const activeIndex = this._getItemIndex(this._activeElement);\n\n    if (index > this._items.length - 1 || index < 0) {\n      return;\n    }\n\n    if (this._isSliding) {\n      EventHandler.one(this._element, EVENT_SLID, () => this.to(index));\n      return;\n    }\n\n    if (activeIndex === index) {\n      this.pause();\n      this.cycle();\n      return;\n    }\n\n    const order = index > activeIndex ? ORDER_NEXT : ORDER_PREV;\n\n    this._slide(order, this._items[index]);\n  } // Private\n\n\n  _getConfig(config) {\n    config = { ...Default$a,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    };\n    typeCheckConfig(NAME$b, config, DefaultType$a);\n    return config;\n  }\n\n  _handleSwipe() {\n    const absDeltax = Math.abs(this.touchDeltaX);\n\n    if (absDeltax <= SWIPE_THRESHOLD) {\n      return;\n    }\n\n    const direction = absDeltax / this.touchDeltaX;\n    this.touchDeltaX = 0;\n\n    if (!direction) {\n      return;\n    }\n\n    this._slide(direction > 0 ? DIRECTION_RIGHT : DIRECTION_LEFT);\n  }\n\n  _addEventListeners() {\n    if (this._config.keyboard) {\n      EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event));\n    }\n\n    if (this._config.pause === 'hover') {\n      EventHandler.on(this._element, EVENT_MOUSEENTER, event => this.pause(event));\n      EventHandler.on(this._element, EVENT_MOUSELEAVE, event => this.cycle(event));\n    }\n\n    if (this._config.touch && this._touchSupported) {\n      this._addTouchEventListeners();\n    }\n  }\n\n  _addTouchEventListeners() {\n    const hasPointerPenTouch = event => {\n      return this._pointerEvent && (event.pointerType === POINTER_TYPE_PEN || event.pointerType === POINTER_TYPE_TOUCH);\n    };\n\n    const start = event => {\n      if (hasPointerPenTouch(event)) {\n        this.touchStartX = event.clientX;\n      } else if (!this._pointerEvent) {\n        this.touchStartX = event.touches[0].clientX;\n      }\n    };\n\n    const move = event => {\n      // ensure swiping with one touch and not pinching\n      this.touchDeltaX = event.touches && event.touches.length > 1 ? 0 : event.touches[0].clientX - this.touchStartX;\n    };\n\n    const end = event => {\n      if (hasPointerPenTouch(event)) {\n        this.touchDeltaX = event.clientX - this.touchStartX;\n      }\n\n      this._handleSwipe();\n\n      if (this._config.pause === 'hover') {\n        // If it's a touch-enabled device, mouseenter/leave are fired as\n        // part of the mouse compatibility events on first tap - the carousel\n        // would stop cycling until user tapped out of it;\n        // here, we listen for touchend, explicitly pause the carousel\n        // (as if it's the second time we tap on it, mouseenter compat event\n        // is NOT fired) and after a timeout (to allow for mouse compatibility\n        // events to fire) we explicitly restart cycling\n        this.pause();\n\n        if (this.touchTimeout) {\n          clearTimeout(this.touchTimeout);\n        }\n\n        this.touchTimeout = setTimeout(event => this.cycle(event), TOUCHEVENT_COMPAT_WAIT + this._config.interval);\n      }\n    };\n\n    SelectorEngine.find(SELECTOR_ITEM_IMG, this._element).forEach(itemImg => {\n      EventHandler.on(itemImg, EVENT_DRAG_START, event => event.preventDefault());\n    });\n\n    if (this._pointerEvent) {\n      EventHandler.on(this._element, EVENT_POINTERDOWN, event => start(event));\n      EventHandler.on(this._element, EVENT_POINTERUP, event => end(event));\n\n      this._element.classList.add(CLASS_NAME_POINTER_EVENT);\n    } else {\n      EventHandler.on(this._element, EVENT_TOUCHSTART, event => start(event));\n      EventHandler.on(this._element, EVENT_TOUCHMOVE, event => move(event));\n      EventHandler.on(this._element, EVENT_TOUCHEND, event => end(event));\n    }\n  }\n\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) {\n      return;\n    }\n\n    const direction = KEY_TO_DIRECTION[event.key];\n\n    if (direction) {\n      event.preventDefault();\n\n      this._slide(direction);\n    }\n  }\n\n  _getItemIndex(element) {\n    this._items = element && element.parentNode ? SelectorEngine.find(SELECTOR_ITEM, element.parentNode) : [];\n    return this._items.indexOf(element);\n  }\n\n  _getItemByOrder(order, activeElement) {\n    const isNext = order === ORDER_NEXT;\n    return getNextActiveElement(this._items, activeElement, isNext, this._config.wrap);\n  }\n\n  _triggerSlideEvent(relatedTarget, eventDirectionName) {\n    const targetIndex = this._getItemIndex(relatedTarget);\n\n    const fromIndex = this._getItemIndex(SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element));\n\n    return EventHandler.trigger(this._element, EVENT_SLIDE, {\n      relatedTarget,\n      direction: eventDirectionName,\n      from: fromIndex,\n      to: targetIndex\n    });\n  }\n\n  _setActiveIndicatorElement(element) {\n    if (this._indicatorsElement) {\n      const activeIndicator = SelectorEngine.findOne(SELECTOR_ACTIVE$1, this._indicatorsElement);\n      activeIndicator.classList.remove(CLASS_NAME_ACTIVE$2);\n      activeIndicator.removeAttribute('aria-current');\n      const indicators = SelectorEngine.find(SELECTOR_INDICATOR, this._indicatorsElement);\n\n      for (let i = 0; i < indicators.length; i++) {\n        if (Number.parseInt(indicators[i].getAttribute('data-bs-slide-to'), 10) === this._getItemIndex(element)) {\n          indicators[i].classList.add(CLASS_NAME_ACTIVE$2);\n          indicators[i].setAttribute('aria-current', 'true');\n          break;\n        }\n      }\n    }\n  }\n\n  _updateInterval() {\n    const element = this._activeElement || SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element);\n\n    if (!element) {\n      return;\n    }\n\n    const elementInterval = Number.parseInt(element.getAttribute('data-bs-interval'), 10);\n\n    if (elementInterval) {\n      this._config.defaultInterval = this._config.defaultInterval || this._config.interval;\n      this._config.interval = elementInterval;\n    } else {\n      this._config.interval = this._config.defaultInterval || this._config.interval;\n    }\n  }\n\n  _slide(directionOrOrder, element) {\n    const order = this._directionToOrder(directionOrOrder);\n\n    const activeElement = SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element);\n\n    const activeElementIndex = this._getItemIndex(activeElement);\n\n    const nextElement = element || this._getItemByOrder(order, activeElement);\n\n    const nextElementIndex = this._getItemIndex(nextElement);\n\n    const isCycling = Boolean(this._interval);\n    const isNext = order === ORDER_NEXT;\n    const directionalClassName = isNext ? CLASS_NAME_START : CLASS_NAME_END;\n    const orderClassName = isNext ? CLASS_NAME_NEXT : CLASS_NAME_PREV;\n\n    const eventDirectionName = this._orderToDirection(order);\n\n    if (nextElement && nextElement.classList.contains(CLASS_NAME_ACTIVE$2)) {\n      this._isSliding = false;\n      return;\n    }\n\n    if (this._isSliding) {\n      return;\n    }\n\n    const slideEvent = this._triggerSlideEvent(nextElement, eventDirectionName);\n\n    if (slideEvent.defaultPrevented) {\n      return;\n    }\n\n    if (!activeElement || !nextElement) {\n      // Some weirdness is happening, so we bail\n      return;\n    }\n\n    this._isSliding = true;\n\n    if (isCycling) {\n      this.pause();\n    }\n\n    this._setActiveIndicatorElement(nextElement);\n\n    this._activeElement = nextElement;\n\n    const triggerSlidEvent = () => {\n      EventHandler.trigger(this._element, EVENT_SLID, {\n        relatedTarget: nextElement,\n        direction: eventDirectionName,\n        from: activeElementIndex,\n        to: nextElementIndex\n      });\n    };\n\n    if (this._element.classList.contains(CLASS_NAME_SLIDE)) {\n      nextElement.classList.add(orderClassName);\n      reflow(nextElement);\n      activeElement.classList.add(directionalClassName);\n      nextElement.classList.add(directionalClassName);\n\n      const completeCallBack = () => {\n        nextElement.classList.remove(directionalClassName, orderClassName);\n        nextElement.classList.add(CLASS_NAME_ACTIVE$2);\n        activeElement.classList.remove(CLASS_NAME_ACTIVE$2, orderClassName, directionalClassName);\n        this._isSliding = false;\n        setTimeout(triggerSlidEvent, 0);\n      };\n\n      this._queueCallback(completeCallBack, activeElement, true);\n    } else {\n      activeElement.classList.remove(CLASS_NAME_ACTIVE$2);\n      nextElement.classList.add(CLASS_NAME_ACTIVE$2);\n      this._isSliding = false;\n      triggerSlidEvent();\n    }\n\n    if (isCycling) {\n      this.cycle();\n    }\n  }\n\n  _directionToOrder(direction) {\n    if (![DIRECTION_RIGHT, DIRECTION_LEFT].includes(direction)) {\n      return direction;\n    }\n\n    if (isRTL()) {\n      return direction === DIRECTION_LEFT ? ORDER_PREV : ORDER_NEXT;\n    }\n\n    return direction === DIRECTION_LEFT ? ORDER_NEXT : ORDER_PREV;\n  }\n\n  _orderToDirection(order) {\n    if (![ORDER_NEXT, ORDER_PREV].includes(order)) {\n      return order;\n    }\n\n    if (isRTL()) {\n      return order === ORDER_PREV ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n\n    return order === ORDER_PREV ? DIRECTION_RIGHT : DIRECTION_LEFT;\n  } // Static\n\n\n  static carouselInterface(element, config) {\n    const data = Carousel.getOrCreateInstance(element, config);\n    let {\n      _config\n    } = data;\n\n    if (typeof config === 'object') {\n      _config = { ..._config,\n        ...config\n      };\n    }\n\n    const action = typeof config === 'string' ? config : _config.slide;\n\n    if (typeof config === 'number') {\n      data.to(config);\n    } else if (typeof action === 'string') {\n      if (typeof data[action] === 'undefined') {\n        throw new TypeError(`No method named \"${action}\"`);\n      }\n\n      data[action]();\n    } else if (_config.interval && _config.ride) {\n      data.pause();\n      data.cycle();\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      Carousel.carouselInterface(this, config);\n    });\n  }\n\n  static dataApiClickHandler(event) {\n    const target = getElementFromSelector(this);\n\n    if (!target || !target.classList.contains(CLASS_NAME_CAROUSEL)) {\n      return;\n    }\n\n    const config = { ...Manipulator.getDataAttributes(target),\n      ...Manipulator.getDataAttributes(this)\n    };\n    const slideIndex = this.getAttribute('data-bs-slide-to');\n\n    if (slideIndex) {\n      config.interval = false;\n    }\n\n    Carousel.carouselInterface(target, config);\n\n    if (slideIndex) {\n      Carousel.getInstance(target).to(slideIndex);\n    }\n\n    event.preventDefault();\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$5, SELECTOR_DATA_SLIDE, Carousel.dataApiClickHandler);\nEventHandler.on(window, EVENT_LOAD_DATA_API$2, () => {\n  const carousels = SelectorEngine.find(SELECTOR_DATA_RIDE);\n\n  for (let i = 0, len = carousels.length; i < len; i++) {\n    Carousel.carouselInterface(carousels[i], Carousel.getInstance(carousels[i]));\n  }\n});\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Carousel to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Carousel);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): collapse.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$a = 'collapse';\nconst DATA_KEY$9 = 'bs.collapse';\nconst EVENT_KEY$9 = `.${DATA_KEY$9}`;\nconst DATA_API_KEY$5 = '.data-api';\nconst Default$9 = {\n  toggle: true,\n  parent: null\n};\nconst DefaultType$9 = {\n  toggle: 'boolean',\n  parent: '(null|element)'\n};\nconst EVENT_SHOW$5 = `show${EVENT_KEY$9}`;\nconst EVENT_SHOWN$5 = `shown${EVENT_KEY$9}`;\nconst EVENT_HIDE$5 = `hide${EVENT_KEY$9}`;\nconst EVENT_HIDDEN$5 = `hidden${EVENT_KEY$9}`;\nconst EVENT_CLICK_DATA_API$4 = `click${EVENT_KEY$9}${DATA_API_KEY$5}`;\nconst CLASS_NAME_SHOW$7 = 'show';\nconst CLASS_NAME_COLLAPSE = 'collapse';\nconst CLASS_NAME_COLLAPSING = 'collapsing';\nconst CLASS_NAME_COLLAPSED = 'collapsed';\nconst CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`;\nconst CLASS_NAME_HORIZONTAL = 'collapse-horizontal';\nconst WIDTH = 'width';\nconst HEIGHT = 'height';\nconst SELECTOR_ACTIVES = '.collapse.show, .collapse.collapsing';\nconst SELECTOR_DATA_TOGGLE$4 = '[data-bs-toggle=\"collapse\"]';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Collapse extends BaseComponent {\n  constructor(element, config) {\n    super(element);\n    this._isTransitioning = false;\n    this._config = this._getConfig(config);\n    this._triggerArray = [];\n    const toggleList = SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);\n\n    for (let i = 0, len = toggleList.length; i < len; i++) {\n      const elem = toggleList[i];\n      const selector = getSelectorFromElement(elem);\n      const filterElement = SelectorEngine.find(selector).filter(foundElem => foundElem === this._element);\n\n      if (selector !== null && filterElement.length) {\n        this._selector = selector;\n\n        this._triggerArray.push(elem);\n      }\n    }\n\n    this._initializeChildren();\n\n    if (!this._config.parent) {\n      this._addAriaAndCollapsedClass(this._triggerArray, this._isShown());\n    }\n\n    if (this._config.toggle) {\n      this.toggle();\n    }\n  } // Getters\n\n\n  static get Default() {\n    return Default$9;\n  }\n\n  static get NAME() {\n    return NAME$a;\n  } // Public\n\n\n  toggle() {\n    if (this._isShown()) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  show() {\n    if (this._isTransitioning || this._isShown()) {\n      return;\n    }\n\n    let actives = [];\n    let activesData;\n\n    if (this._config.parent) {\n      const children = SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent);\n      actives = SelectorEngine.find(SELECTOR_ACTIVES, this._config.parent).filter(elem => !children.includes(elem)); // remove children if greater depth\n    }\n\n    const container = SelectorEngine.findOne(this._selector);\n\n    if (actives.length) {\n      const tempActiveData = actives.find(elem => container !== elem);\n      activesData = tempActiveData ? Collapse.getInstance(tempActiveData) : null;\n\n      if (activesData && activesData._isTransitioning) {\n        return;\n      }\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_SHOW$5);\n\n    if (startEvent.defaultPrevented) {\n      return;\n    }\n\n    actives.forEach(elemActive => {\n      if (container !== elemActive) {\n        Collapse.getOrCreateInstance(elemActive, {\n          toggle: false\n        }).hide();\n      }\n\n      if (!activesData) {\n        Data.set(elemActive, DATA_KEY$9, null);\n      }\n    });\n\n    const dimension = this._getDimension();\n\n    this._element.classList.remove(CLASS_NAME_COLLAPSE);\n\n    this._element.classList.add(CLASS_NAME_COLLAPSING);\n\n    this._element.style[dimension] = 0;\n\n    this._addAriaAndCollapsedClass(this._triggerArray, true);\n\n    this._isTransitioning = true;\n\n    const complete = () => {\n      this._isTransitioning = false;\n\n      this._element.classList.remove(CLASS_NAME_COLLAPSING);\n\n      this._element.classList.add(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW$7);\n\n      this._element.style[dimension] = '';\n      EventHandler.trigger(this._element, EVENT_SHOWN$5);\n    };\n\n    const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1);\n    const scrollSize = `scroll${capitalizedDimension}`;\n\n    this._queueCallback(complete, this._element, true);\n\n    this._element.style[dimension] = `${this._element[scrollSize]}px`;\n  }\n\n  hide() {\n    if (this._isTransitioning || !this._isShown()) {\n      return;\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_HIDE$5);\n\n    if (startEvent.defaultPrevented) {\n      return;\n    }\n\n    const dimension = this._getDimension();\n\n    this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`;\n    reflow(this._element);\n\n    this._element.classList.add(CLASS_NAME_COLLAPSING);\n\n    this._element.classList.remove(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW$7);\n\n    const triggerArrayLength = this._triggerArray.length;\n\n    for (let i = 0; i < triggerArrayLength; i++) {\n      const trigger = this._triggerArray[i];\n      const elem = getElementFromSelector(trigger);\n\n      if (elem && !this._isShown(elem)) {\n        this._addAriaAndCollapsedClass([trigger], false);\n      }\n    }\n\n    this._isTransitioning = true;\n\n    const complete = () => {\n      this._isTransitioning = false;\n\n      this._element.classList.remove(CLASS_NAME_COLLAPSING);\n\n      this._element.classList.add(CLASS_NAME_COLLAPSE);\n\n      EventHandler.trigger(this._element, EVENT_HIDDEN$5);\n    };\n\n    this._element.style[dimension] = '';\n\n    this._queueCallback(complete, this._element, true);\n  }\n\n  _isShown(element = this._element) {\n    return element.classList.contains(CLASS_NAME_SHOW$7);\n  } // Private\n\n\n  _getConfig(config) {\n    config = { ...Default$9,\n      ...Manipulator.getDataAttributes(this._element),\n      ...config\n    };\n    config.toggle = Boolean(config.toggle); // Coerce string values\n\n    config.parent = getElement(config.parent);\n    typeCheckConfig(NAME$a, config, DefaultType$9);\n    return config;\n  }\n\n  _getDimension() {\n    return this._element.classList.contains(CLASS_NAME_HORIZONTAL) ? WIDTH : HEIGHT;\n  }\n\n  _initializeChildren() {\n    if (!this._config.parent) {\n      return;\n    }\n\n    const children = SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent);\n    SelectorEngine.find(SELECTOR_DATA_TOGGLE$4, this._config.parent).filter(elem => !children.includes(elem)).forEach(element => {\n      const selected = getElementFromSelector(element);\n\n      if (selected) {\n        this._addAriaAndCollapsedClass([element], this._isShown(selected));\n      }\n    });\n  }\n\n  _addAriaAndCollapsedClass(triggerArray, isOpen) {\n    if (!triggerArray.length) {\n      return;\n    }\n\n    triggerArray.forEach(elem => {\n      if (isOpen) {\n        elem.classList.remove(CLASS_NAME_COLLAPSED);\n      } else {\n        elem.classList.add(CLASS_NAME_COLLAPSED);\n      }\n\n      elem.setAttribute('aria-expanded', isOpen);\n    });\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const _config = {};\n\n      if (typeof config === 'string' && /show|hide/.test(config)) {\n        _config.toggle = false;\n      }\n\n      const data = Collapse.getOrCreateInstance(this, _config);\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n\n        data[config]();\n      }\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$4, SELECTOR_DATA_TOGGLE$4, function (event) {\n  // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n  if (event.target.tagName === 'A' || event.delegateTarget && event.delegateTarget.tagName === 'A') {\n    event.preventDefault();\n  }\n\n  const selector = getSelectorFromElement(this);\n  const selectorElements = SelectorEngine.find(selector);\n  selectorElements.forEach(element => {\n    Collapse.getOrCreateInstance(element, {\n      toggle: false\n    }).toggle();\n  });\n});\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Collapse to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Collapse);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): dropdown.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$9 = 'dropdown';\nconst DATA_KEY$8 = 'bs.dropdown';\nconst EVENT_KEY$8 = `.${DATA_KEY$8}`;\nconst DATA_API_KEY$4 = '.data-api';\nconst ESCAPE_KEY$2 = 'Escape';\nconst SPACE_KEY = 'Space';\nconst TAB_KEY$1 = 'Tab';\nconst ARROW_UP_KEY = 'ArrowUp';\nconst ARROW_DOWN_KEY = 'ArrowDown';\nconst RIGHT_MOUSE_BUTTON = 2; // MouseEvent.button value for the secondary button, usually the right button\n\nconst REGEXP_KEYDOWN = new RegExp(`${ARROW_UP_KEY}|${ARROW_DOWN_KEY}|${ESCAPE_KEY$2}`);\nconst EVENT_HIDE$4 = `hide${EVENT_KEY$8}`;\nconst EVENT_HIDDEN$4 = `hidden${EVENT_KEY$8}`;\nconst EVENT_SHOW$4 = `show${EVENT_KEY$8}`;\nconst EVENT_SHOWN$4 = `shown${EVENT_KEY$8}`;\nconst EVENT_CLICK_DATA_API$3 = `click${EVENT_KEY$8}${DATA_API_KEY$4}`;\nconst EVENT_KEYDOWN_DATA_API = `keydown${EVENT_KEY$8}${DATA_API_KEY$4}`;\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY$8}${DATA_API_KEY$4}`;\nconst CLASS_NAME_SHOW$6 = 'show';\nconst CLASS_NAME_DROPUP = 'dropup';\nconst CLASS_NAME_DROPEND = 'dropend';\nconst CLASS_NAME_DROPSTART = 'dropstart';\nconst CLASS_NAME_NAVBAR = 'navbar';\nconst SELECTOR_DATA_TOGGLE$3 = '[data-bs-toggle=\"dropdown\"]';\nconst SELECTOR_MENU = '.dropdown-menu';\nconst SELECTOR_NAVBAR_NAV = '.navbar-nav';\nconst SELECTOR_VISIBLE_ITEMS = '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)';\nconst PLACEMENT_TOP = isRTL() ? 'top-end' : 'top-start';\nconst PLACEMENT_TOPEND = isRTL() ? 'top-start' : 'top-end';\nconst PLACEMENT_BOTTOM = isRTL() ? 'bottom-end' : 'bottom-start';\nconst PLACEMENT_BOTTOMEND = isRTL() ? 'bottom-start' : 'bottom-end';\nconst PLACEMENT_RIGHT = isRTL() ? 'left-start' : 'right-start';\nconst PLACEMENT_LEFT = isRTL() ? 'right-start' : 'left-start';\nconst Default$8 = {\n  offset: [0, 2],\n  boundary: 'clippingParents',\n  reference: 'toggle',\n  display: 'dynamic',\n  popperConfig: null,\n  autoClose: true\n};\nconst DefaultType$8 = {\n  offset: '(array|string|function)',\n  boundary: '(string|element)',\n  reference: '(string|element|object)',\n  display: 'string',\n  popperConfig: '(null|object|function)',\n  autoClose: '(boolean|string)'\n};\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Dropdown extends BaseComponent {\n  constructor(element, config) {\n    super(element);\n    this._popper = null;\n    this._config = this._getConfig(config);\n    this._menu = this._getMenuElement();\n    this._inNavbar = this._detectNavbar();\n  } // Getters\n\n\n  static get Default() {\n    return Default$8;\n  }\n\n  static get DefaultType() {\n    return DefaultType$8;\n  }\n\n  static get NAME() {\n    return NAME$9;\n  } // Public\n\n\n  toggle() {\n    return this._isShown() ? this.hide() : this.show();\n  }\n\n  show() {\n    if (isDisabled(this._element) || this._isShown(this._menu)) {\n      return;\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    };\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$4, relatedTarget);\n\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n\n    const parent = Dropdown.getParentFromElement(this._element); // Totally disable Popper for Dropdowns in Navbar\n\n    if (this._inNavbar) {\n      Manipulator.setDataAttribute(this._menu, 'popper', 'none');\n    } else {\n      this._createPopper(parent);\n    } // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n\n\n    if ('ontouchstart' in document.documentElement && !parent.closest(SELECTOR_NAVBAR_NAV)) {\n      [].concat(...document.body.children).forEach(elem => EventHandler.on(elem, 'mouseover', noop));\n    }\n\n    this._element.focus();\n\n    this._element.setAttribute('aria-expanded', true);\n\n    this._menu.classList.add(CLASS_NAME_SHOW$6);\n\n    this._element.classList.add(CLASS_NAME_SHOW$6);\n\n    EventHandler.trigger(this._element, EVENT_SHOWN$4, relatedTarget);\n  }\n\n  hide() {\n    if (isDisabled(this._element) || !this._isShown(this._menu)) {\n      return;\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    };\n\n    this._completeHide(relatedTarget);\n  }\n\n  dispose() {\n    if (this._popper) {\n      this._popper.destroy();\n    }\n\n    super.dispose();\n  }\n\n  update() {\n    this._inNavbar = this._detectNavbar();\n\n    if (this._popper) {\n      this._popper.update();\n    }\n  } // Private\n\n\n  _completeHide(relatedTarget) {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$4, relatedTarget);\n\n    if (hideEvent.defaultPrevented) {\n      return;\n    } // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n\n\n    if ('ontouchstart' in document.documentElement) {\n      [].concat(...document.body.children).forEach(elem => EventHandler.off(elem, 'mouseover', noop));\n    }\n\n    if (this._popper) {\n      this._popper.destroy();\n    }\n\n    this._menu.classList.remove(CLASS_NAME_SHOW$6);\n\n    this._element.classList.remove(CLASS_NAME_SHOW$6);\n\n    this._element.setAttribute('aria-expanded', 'false');\n\n    Manipulator.removeDataAttribute(this._menu, 'popper');\n    EventHandler.trigger(this._element, EVENT_HIDDEN$4, relatedTarget);\n  }\n\n  _getConfig(config) {\n    config = { ...this.constructor.Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...config\n    };\n    typeCheckConfig(NAME$9, config, this.constructor.DefaultType);\n\n    if (typeof config.reference === 'object' && !isElement(config.reference) && typeof config.reference.getBoundingClientRect !== 'function') {\n      // Popper virtual elements require a getBoundingClientRect method\n      throw new TypeError(`${NAME$9.toUpperCase()}: Option \"reference\" provided type \"object\" without a required \"getBoundingClientRect\" method.`);\n    }\n\n    return config;\n  }\n\n  _createPopper(parent) {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s dropdowns require Popper (https://popper.js.org)');\n    }\n\n    let referenceElement = this._element;\n\n    if (this._config.reference === 'parent') {\n      referenceElement = parent;\n    } else if (isElement(this._config.reference)) {\n      referenceElement = getElement(this._config.reference);\n    } else if (typeof this._config.reference === 'object') {\n      referenceElement = this._config.reference;\n    }\n\n    const popperConfig = this._getPopperConfig();\n\n    const isDisplayStatic = popperConfig.modifiers.find(modifier => modifier.name === 'applyStyles' && modifier.enabled === false);\n    this._popper = Popper.createPopper(referenceElement, this._menu, popperConfig);\n\n    if (isDisplayStatic) {\n      Manipulator.setDataAttribute(this._menu, 'popper', 'static');\n    }\n  }\n\n  _isShown(element = this._element) {\n    return element.classList.contains(CLASS_NAME_SHOW$6);\n  }\n\n  _getMenuElement() {\n    return SelectorEngine.next(this._element, SELECTOR_MENU)[0];\n  }\n\n  _getPlacement() {\n    const parentDropdown = this._element.parentNode;\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPEND)) {\n      return PLACEMENT_RIGHT;\n    }\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPSTART)) {\n      return PLACEMENT_LEFT;\n    } // We need to trim the value because custom properties can also include spaces\n\n\n    const isEnd = getComputedStyle(this._menu).getPropertyValue('--bs-position').trim() === 'end';\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPUP)) {\n      return isEnd ? PLACEMENT_TOPEND : PLACEMENT_TOP;\n    }\n\n    return isEnd ? PLACEMENT_BOTTOMEND : PLACEMENT_BOTTOM;\n  }\n\n  _detectNavbar() {\n    return this._element.closest(`.${CLASS_NAME_NAVBAR}`) !== null;\n  }\n\n  _getOffset() {\n    const {\n      offset\n    } = this._config;\n\n    if (typeof offset === 'string') {\n      return offset.split(',').map(val => Number.parseInt(val, 10));\n    }\n\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element);\n    }\n\n    return offset;\n  }\n\n  _getPopperConfig() {\n    const defaultBsPopperConfig = {\n      placement: this._getPlacement(),\n      modifiers: [{\n        name: 'preventOverflow',\n        options: {\n          boundary: this._config.boundary\n        }\n      }, {\n        name: 'offset',\n        options: {\n          offset: this._getOffset()\n        }\n      }]\n    }; // Disable Popper if we have a static display\n\n    if (this._config.display === 'static') {\n      defaultBsPopperConfig.modifiers = [{\n        name: 'applyStyles',\n        enabled: false\n      }];\n    }\n\n    return { ...defaultBsPopperConfig,\n      ...(typeof this._config.popperConfig === 'function' ? this._config.popperConfig(defaultBsPopperConfig) : this._config.popperConfig)\n    };\n  }\n\n  _selectMenuItem({\n    key,\n    target\n  }) {\n    const items = SelectorEngine.find(SELECTOR_VISIBLE_ITEMS, this._menu).filter(isVisible);\n\n    if (!items.length) {\n      return;\n    } // if target isn't included in items (e.g. when expanding the dropdown)\n    // allow cycling to get the last item in case key equals ARROW_UP_KEY\n\n\n    getNextActiveElement(items, target, key === ARROW_DOWN_KEY, !items.includes(target)).focus();\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Dropdown.getOrCreateInstance(this, config);\n\n      if (typeof config !== 'string') {\n        return;\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n\n      data[config]();\n    });\n  }\n\n  static clearMenus(event) {\n    if (event && (event.button === RIGHT_MOUSE_BUTTON || event.type === 'keyup' && event.key !== TAB_KEY$1)) {\n      return;\n    }\n\n    const toggles = SelectorEngine.find(SELECTOR_DATA_TOGGLE$3);\n\n    for (let i = 0, len = toggles.length; i < len; i++) {\n      const context = Dropdown.getInstance(toggles[i]);\n\n      if (!context || context._config.autoClose === false) {\n        continue;\n      }\n\n      if (!context._isShown()) {\n        continue;\n      }\n\n      const relatedTarget = {\n        relatedTarget: context._element\n      };\n\n      if (event) {\n        const composedPath = event.composedPath();\n        const isMenuTarget = composedPath.includes(context._menu);\n\n        if (composedPath.includes(context._element) || context._config.autoClose === 'inside' && !isMenuTarget || context._config.autoClose === 'outside' && isMenuTarget) {\n          continue;\n        } // Tab navigation through the dropdown menu or events from contained inputs shouldn't close the menu\n\n\n        if (context._menu.contains(event.target) && (event.type === 'keyup' && event.key === TAB_KEY$1 || /input|select|option|textarea|form/i.test(event.target.tagName))) {\n          continue;\n        }\n\n        if (event.type === 'click') {\n          relatedTarget.clickEvent = event;\n        }\n      }\n\n      context._completeHide(relatedTarget);\n    }\n  }\n\n  static getParentFromElement(element) {\n    return getElementFromSelector(element) || element.parentNode;\n  }\n\n  static dataApiKeydownHandler(event) {\n    // If not input/textarea:\n    //  - And not a key in REGEXP_KEYDOWN => not a dropdown command\n    // If input/textarea:\n    //  - If space key => not a dropdown command\n    //  - If key is other than escape\n    //    - If key is not up or down => not a dropdown command\n    //    - If trigger inside the menu => not a dropdown command\n    if (/input|textarea/i.test(event.target.tagName) ? event.key === SPACE_KEY || event.key !== ESCAPE_KEY$2 && (event.key !== ARROW_DOWN_KEY && event.key !== ARROW_UP_KEY || event.target.closest(SELECTOR_MENU)) : !REGEXP_KEYDOWN.test(event.key)) {\n      return;\n    }\n\n    const isActive = this.classList.contains(CLASS_NAME_SHOW$6);\n\n    if (!isActive && event.key === ESCAPE_KEY$2) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (isDisabled(this)) {\n      return;\n    }\n\n    const getToggleButton = this.matches(SELECTOR_DATA_TOGGLE$3) ? this : SelectorEngine.prev(this, SELECTOR_DATA_TOGGLE$3)[0];\n    const instance = Dropdown.getOrCreateInstance(getToggleButton);\n\n    if (event.key === ESCAPE_KEY$2) {\n      instance.hide();\n      return;\n    }\n\n    if (event.key === ARROW_UP_KEY || event.key === ARROW_DOWN_KEY) {\n      if (!isActive) {\n        instance.show();\n      }\n\n      instance._selectMenuItem(event);\n\n      return;\n    }\n\n    if (!isActive || event.key === SPACE_KEY) {\n      Dropdown.clearMenus();\n    }\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nEventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_DATA_TOGGLE$3, Dropdown.dataApiKeydownHandler);\nEventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_MENU, Dropdown.dataApiKeydownHandler);\nEventHandler.on(document, EVENT_CLICK_DATA_API$3, Dropdown.clearMenus);\nEventHandler.on(document, EVENT_KEYUP_DATA_API, Dropdown.clearMenus);\nEventHandler.on(document, EVENT_CLICK_DATA_API$3, SELECTOR_DATA_TOGGLE$3, function (event) {\n  event.preventDefault();\n  Dropdown.getOrCreateInstance(this).toggle();\n});\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Dropdown to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Dropdown);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/scrollBar.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\nconst SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top';\nconst SELECTOR_STICKY_CONTENT = '.sticky-top';\n\nclass ScrollBarHelper {\n  constructor() {\n    this._element = document.body;\n  }\n\n  getWidth() {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth#usage_notes\n    const documentWidth = document.documentElement.clientWidth;\n    return Math.abs(window.innerWidth - documentWidth);\n  }\n\n  hide() {\n    const width = this.getWidth();\n\n    this._disableOverFlow(); // give padding to element to balance the hidden scrollbar width\n\n\n    this._setElementAttributes(this._element, 'paddingRight', calculatedValue => calculatedValue + width); // trick: We adjust positive paddingRight and negative marginRight to sticky-top elements to keep showing fullwidth\n\n\n    this._setElementAttributes(SELECTOR_FIXED_CONTENT, 'paddingRight', calculatedValue => calculatedValue + width);\n\n    this._setElementAttributes(SELECTOR_STICKY_CONTENT, 'marginRight', calculatedValue => calculatedValue - width);\n  }\n\n  _disableOverFlow() {\n    this._saveInitialAttribute(this._element, 'overflow');\n\n    this._element.style.overflow = 'hidden';\n  }\n\n  _setElementAttributes(selector, styleProp, callback) {\n    const scrollbarWidth = this.getWidth();\n\n    const manipulationCallBack = element => {\n      if (element !== this._element && window.innerWidth > element.clientWidth + scrollbarWidth) {\n        return;\n      }\n\n      this._saveInitialAttribute(element, styleProp);\n\n      const calculatedValue = window.getComputedStyle(element)[styleProp];\n      element.style[styleProp] = `${callback(Number.parseFloat(calculatedValue))}px`;\n    };\n\n    this._applyManipulationCallback(selector, manipulationCallBack);\n  }\n\n  reset() {\n    this._resetElementAttributes(this._element, 'overflow');\n\n    this._resetElementAttributes(this._element, 'paddingRight');\n\n    this._resetElementAttributes(SELECTOR_FIXED_CONTENT, 'paddingRight');\n\n    this._resetElementAttributes(SELECTOR_STICKY_CONTENT, 'marginRight');\n  }\n\n  _saveInitialAttribute(element, styleProp) {\n    const actualValue = element.style[styleProp];\n\n    if (actualValue) {\n      Manipulator.setDataAttribute(element, styleProp, actualValue);\n    }\n  }\n\n  _resetElementAttributes(selector, styleProp) {\n    const manipulationCallBack = element => {\n      const value = Manipulator.getDataAttribute(element, styleProp);\n\n      if (typeof value === 'undefined') {\n        element.style.removeProperty(styleProp);\n      } else {\n        Manipulator.removeDataAttribute(element, styleProp);\n        element.style[styleProp] = value;\n      }\n    };\n\n    this._applyManipulationCallback(selector, manipulationCallBack);\n  }\n\n  _applyManipulationCallback(selector, callBack) {\n    if (isElement(selector)) {\n      callBack(selector);\n    } else {\n      SelectorEngine.find(selector, this._element).forEach(callBack);\n    }\n  }\n\n  isOverflowing() {\n    return this.getWidth() > 0;\n  }\n\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/backdrop.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\nconst Default$7 = {\n  className: 'modal-backdrop',\n  isVisible: true,\n  // if false, we use the backdrop helper without adding any element to the dom\n  isAnimated: false,\n  rootElement: 'body',\n  // give the choice to place backdrop under different elements\n  clickCallback: null\n};\nconst DefaultType$7 = {\n  className: 'string',\n  isVisible: 'boolean',\n  isAnimated: 'boolean',\n  rootElement: '(element|string)',\n  clickCallback: '(function|null)'\n};\nconst NAME$8 = 'backdrop';\nconst CLASS_NAME_FADE$4 = 'fade';\nconst CLASS_NAME_SHOW$5 = 'show';\nconst EVENT_MOUSEDOWN = `mousedown.bs.${NAME$8}`;\n\nclass Backdrop {\n  constructor(config) {\n    this._config = this._getConfig(config);\n    this._isAppended = false;\n    this._element = null;\n  }\n\n  show(callback) {\n    if (!this._config.isVisible) {\n      execute(callback);\n      return;\n    }\n\n    this._append();\n\n    if (this._config.isAnimated) {\n      reflow(this._getElement());\n    }\n\n    this._getElement().classList.add(CLASS_NAME_SHOW$5);\n\n    this._emulateAnimation(() => {\n      execute(callback);\n    });\n  }\n\n  hide(callback) {\n    if (!this._config.isVisible) {\n      execute(callback);\n      return;\n    }\n\n    this._getElement().classList.remove(CLASS_NAME_SHOW$5);\n\n    this._emulateAnimation(() => {\n      this.dispose();\n      execute(callback);\n    });\n  } // Private\n\n\n  _getElement() {\n    if (!this._element) {\n      const backdrop = document.createElement('div');\n      backdrop.className = this._config.className;\n\n      if (this._config.isAnimated) {\n        backdrop.classList.add(CLASS_NAME_FADE$4);\n      }\n\n      this._element = backdrop;\n    }\n\n    return this._element;\n  }\n\n  _getConfig(config) {\n    config = { ...Default$7,\n      ...(typeof config === 'object' ? config : {})\n    }; // use getElement() with the default \"body\" to get a fresh Element on each instantiation\n\n    config.rootElement = getElement(config.rootElement);\n    typeCheckConfig(NAME$8, config, DefaultType$7);\n    return config;\n  }\n\n  _append() {\n    if (this._isAppended) {\n      return;\n    }\n\n    this._config.rootElement.append(this._getElement());\n\n    EventHandler.on(this._getElement(), EVENT_MOUSEDOWN, () => {\n      execute(this._config.clickCallback);\n    });\n    this._isAppended = true;\n  }\n\n  dispose() {\n    if (!this._isAppended) {\n      return;\n    }\n\n    EventHandler.off(this._element, EVENT_MOUSEDOWN);\n\n    this._element.remove();\n\n    this._isAppended = false;\n  }\n\n  _emulateAnimation(callback) {\n    executeAfterTransition(callback, this._getElement(), this._config.isAnimated);\n  }\n\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/focustrap.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\nconst Default$6 = {\n  trapElement: null,\n  // The element to trap focus inside of\n  autofocus: true\n};\nconst DefaultType$6 = {\n  trapElement: 'element',\n  autofocus: 'boolean'\n};\nconst NAME$7 = 'focustrap';\nconst DATA_KEY$7 = 'bs.focustrap';\nconst EVENT_KEY$7 = `.${DATA_KEY$7}`;\nconst EVENT_FOCUSIN$1 = `focusin${EVENT_KEY$7}`;\nconst EVENT_KEYDOWN_TAB = `keydown.tab${EVENT_KEY$7}`;\nconst TAB_KEY = 'Tab';\nconst TAB_NAV_FORWARD = 'forward';\nconst TAB_NAV_BACKWARD = 'backward';\n\nclass FocusTrap {\n  constructor(config) {\n    this._config = this._getConfig(config);\n    this._isActive = false;\n    this._lastTabNavDirection = null;\n  }\n\n  activate() {\n    const {\n      trapElement,\n      autofocus\n    } = this._config;\n\n    if (this._isActive) {\n      return;\n    }\n\n    if (autofocus) {\n      trapElement.focus();\n    }\n\n    EventHandler.off(document, EVENT_KEY$7); // guard against infinite focus loop\n\n    EventHandler.on(document, EVENT_FOCUSIN$1, event => this._handleFocusin(event));\n    EventHandler.on(document, EVENT_KEYDOWN_TAB, event => this._handleKeydown(event));\n    this._isActive = true;\n  }\n\n  deactivate() {\n    if (!this._isActive) {\n      return;\n    }\n\n    this._isActive = false;\n    EventHandler.off(document, EVENT_KEY$7);\n  } // Private\n\n\n  _handleFocusin(event) {\n    const {\n      target\n    } = event;\n    const {\n      trapElement\n    } = this._config;\n\n    if (target === document || target === trapElement || trapElement.contains(target)) {\n      return;\n    }\n\n    const elements = SelectorEngine.focusableChildren(trapElement);\n\n    if (elements.length === 0) {\n      trapElement.focus();\n    } else if (this._lastTabNavDirection === TAB_NAV_BACKWARD) {\n      elements[elements.length - 1].focus();\n    } else {\n      elements[0].focus();\n    }\n  }\n\n  _handleKeydown(event) {\n    if (event.key !== TAB_KEY) {\n      return;\n    }\n\n    this._lastTabNavDirection = event.shiftKey ? TAB_NAV_BACKWARD : TAB_NAV_FORWARD;\n  }\n\n  _getConfig(config) {\n    config = { ...Default$6,\n      ...(typeof config === 'object' ? config : {})\n    };\n    typeCheckConfig(NAME$7, config, DefaultType$6);\n    return config;\n  }\n\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$6 = 'modal';\nconst DATA_KEY$6 = 'bs.modal';\nconst EVENT_KEY$6 = `.${DATA_KEY$6}`;\nconst DATA_API_KEY$3 = '.data-api';\nconst ESCAPE_KEY$1 = 'Escape';\nconst Default$5 = {\n  backdrop: true,\n  keyboard: true,\n  focus: true\n};\nconst DefaultType$5 = {\n  backdrop: '(boolean|string)',\n  keyboard: 'boolean',\n  focus: 'boolean'\n};\nconst EVENT_HIDE$3 = `hide${EVENT_KEY$6}`;\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY$6}`;\nconst EVENT_HIDDEN$3 = `hidden${EVENT_KEY$6}`;\nconst EVENT_SHOW$3 = `show${EVENT_KEY$6}`;\nconst EVENT_SHOWN$3 = `shown${EVENT_KEY$6}`;\nconst EVENT_RESIZE = `resize${EVENT_KEY$6}`;\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY$6}`;\nconst EVENT_KEYDOWN_DISMISS$1 = `keydown.dismiss${EVENT_KEY$6}`;\nconst EVENT_MOUSEUP_DISMISS = `mouseup.dismiss${EVENT_KEY$6}`;\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY$6}`;\nconst EVENT_CLICK_DATA_API$2 = `click${EVENT_KEY$6}${DATA_API_KEY$3}`;\nconst CLASS_NAME_OPEN = 'modal-open';\nconst CLASS_NAME_FADE$3 = 'fade';\nconst CLASS_NAME_SHOW$4 = 'show';\nconst CLASS_NAME_STATIC = 'modal-static';\nconst OPEN_SELECTOR$1 = '.modal.show';\nconst SELECTOR_DIALOG = '.modal-dialog';\nconst SELECTOR_MODAL_BODY = '.modal-body';\nconst SELECTOR_DATA_TOGGLE$2 = '[data-bs-toggle=\"modal\"]';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Modal extends BaseComponent {\n  constructor(element, config) {\n    super(element);\n    this._config = this._getConfig(config);\n    this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element);\n    this._backdrop = this._initializeBackDrop();\n    this._focustrap = this._initializeFocusTrap();\n    this._isShown = false;\n    this._ignoreBackdropClick = false;\n    this._isTransitioning = false;\n    this._scrollBar = new ScrollBarHelper();\n  } // Getters\n\n\n  static get Default() {\n    return Default$5;\n  }\n\n  static get NAME() {\n    return NAME$6;\n  } // Public\n\n\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget);\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return;\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$3, {\n      relatedTarget\n    });\n\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n\n    this._isShown = true;\n\n    if (this._isAnimated()) {\n      this._isTransitioning = true;\n    }\n\n    this._scrollBar.hide();\n\n    document.body.classList.add(CLASS_NAME_OPEN);\n\n    this._adjustDialog();\n\n    this._setEscapeEvent();\n\n    this._setResizeEvent();\n\n    EventHandler.on(this._dialog, EVENT_MOUSEDOWN_DISMISS, () => {\n      EventHandler.one(this._element, EVENT_MOUSEUP_DISMISS, event => {\n        if (event.target === this._element) {\n          this._ignoreBackdropClick = true;\n        }\n      });\n    });\n\n    this._showBackdrop(() => this._showElement(relatedTarget));\n  }\n\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return;\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$3);\n\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n\n    this._isShown = false;\n\n    const isAnimated = this._isAnimated();\n\n    if (isAnimated) {\n      this._isTransitioning = true;\n    }\n\n    this._setEscapeEvent();\n\n    this._setResizeEvent();\n\n    this._focustrap.deactivate();\n\n    this._element.classList.remove(CLASS_NAME_SHOW$4);\n\n    EventHandler.off(this._element, EVENT_CLICK_DISMISS);\n    EventHandler.off(this._dialog, EVENT_MOUSEDOWN_DISMISS);\n\n    this._queueCallback(() => this._hideModal(), this._element, isAnimated);\n  }\n\n  dispose() {\n    [window, this._dialog].forEach(htmlElement => EventHandler.off(htmlElement, EVENT_KEY$6));\n\n    this._backdrop.dispose();\n\n    this._focustrap.deactivate();\n\n    super.dispose();\n  }\n\n  handleUpdate() {\n    this._adjustDialog();\n  } // Private\n\n\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop),\n      // 'static' option will be translated to true, and booleans will keep their value\n      isAnimated: this._isAnimated()\n    });\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    });\n  }\n\n  _getConfig(config) {\n    config = { ...Default$5,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    };\n    typeCheckConfig(NAME$6, config, DefaultType$5);\n    return config;\n  }\n\n  _showElement(relatedTarget) {\n    const isAnimated = this._isAnimated();\n\n    const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog);\n\n    if (!this._element.parentNode || this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {\n      // Don't move modal's DOM position\n      document.body.append(this._element);\n    }\n\n    this._element.style.display = 'block';\n\n    this._element.removeAttribute('aria-hidden');\n\n    this._element.setAttribute('aria-modal', true);\n\n    this._element.setAttribute('role', 'dialog');\n\n    this._element.scrollTop = 0;\n\n    if (modalBody) {\n      modalBody.scrollTop = 0;\n    }\n\n    if (isAnimated) {\n      reflow(this._element);\n    }\n\n    this._element.classList.add(CLASS_NAME_SHOW$4);\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate();\n      }\n\n      this._isTransitioning = false;\n      EventHandler.trigger(this._element, EVENT_SHOWN$3, {\n        relatedTarget\n      });\n    };\n\n    this._queueCallback(transitionComplete, this._dialog, isAnimated);\n  }\n\n  _setEscapeEvent() {\n    if (this._isShown) {\n      EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS$1, event => {\n        if (this._config.keyboard && event.key === ESCAPE_KEY$1) {\n          event.preventDefault();\n          this.hide();\n        } else if (!this._config.keyboard && event.key === ESCAPE_KEY$1) {\n          this._triggerBackdropTransition();\n        }\n      });\n    } else {\n      EventHandler.off(this._element, EVENT_KEYDOWN_DISMISS$1);\n    }\n  }\n\n  _setResizeEvent() {\n    if (this._isShown) {\n      EventHandler.on(window, EVENT_RESIZE, () => this._adjustDialog());\n    } else {\n      EventHandler.off(window, EVENT_RESIZE);\n    }\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none';\n\n    this._element.setAttribute('aria-hidden', true);\n\n    this._element.removeAttribute('aria-modal');\n\n    this._element.removeAttribute('role');\n\n    this._isTransitioning = false;\n\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN);\n\n      this._resetAdjustments();\n\n      this._scrollBar.reset();\n\n      EventHandler.trigger(this._element, EVENT_HIDDEN$3);\n    });\n  }\n\n  _showBackdrop(callback) {\n    EventHandler.on(this._element, EVENT_CLICK_DISMISS, event => {\n      if (this._ignoreBackdropClick) {\n        this._ignoreBackdropClick = false;\n        return;\n      }\n\n      if (event.target !== event.currentTarget) {\n        return;\n      }\n\n      if (this._config.backdrop === true) {\n        this.hide();\n      } else if (this._config.backdrop === 'static') {\n        this._triggerBackdropTransition();\n      }\n    });\n\n    this._backdrop.show(callback);\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE$3);\n  }\n\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED);\n\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n\n    const {\n      classList,\n      scrollHeight,\n      style\n    } = this._element;\n    const isModalOverflowing = scrollHeight > document.documentElement.clientHeight; // return if the following background transition hasn't yet completed\n\n    if (!isModalOverflowing && style.overflowY === 'hidden' || classList.contains(CLASS_NAME_STATIC)) {\n      return;\n    }\n\n    if (!isModalOverflowing) {\n      style.overflowY = 'hidden';\n    }\n\n    classList.add(CLASS_NAME_STATIC);\n\n    this._queueCallback(() => {\n      classList.remove(CLASS_NAME_STATIC);\n\n      if (!isModalOverflowing) {\n        this._queueCallback(() => {\n          style.overflowY = '';\n        }, this._dialog);\n      }\n    }, this._dialog);\n\n    this._element.focus();\n  } // ----------------------------------------------------------------------\n  // the following methods are used to handle overflowing modals\n  // ----------------------------------------------------------------------\n\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;\n\n    const scrollbarWidth = this._scrollBar.getWidth();\n\n    const isBodyOverflowing = scrollbarWidth > 0;\n\n    if (!isBodyOverflowing && isModalOverflowing && !isRTL() || isBodyOverflowing && !isModalOverflowing && isRTL()) {\n      this._element.style.paddingLeft = `${scrollbarWidth}px`;\n    }\n\n    if (isBodyOverflowing && !isModalOverflowing && !isRTL() || !isBodyOverflowing && isModalOverflowing && isRTL()) {\n      this._element.style.paddingRight = `${scrollbarWidth}px`;\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = '';\n    this._element.style.paddingRight = '';\n  } // Static\n\n\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Modal.getOrCreateInstance(this, config);\n\n      if (typeof config !== 'string') {\n        return;\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n\n      data[config](relatedTarget);\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$2, SELECTOR_DATA_TOGGLE$2, function (event) {\n  const target = getElementFromSelector(this);\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault();\n  }\n\n  EventHandler.one(target, EVENT_SHOW$3, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if modal will actually get shown\n      return;\n    }\n\n    EventHandler.one(target, EVENT_HIDDEN$3, () => {\n      if (isVisible(this)) {\n        this.focus();\n      }\n    });\n  }); // avoid conflict when clicking moddal toggler while another one is open\n\n  const allReadyOpen = SelectorEngine.findOne(OPEN_SELECTOR$1);\n\n  if (allReadyOpen) {\n    Modal.getInstance(allReadyOpen).hide();\n  }\n\n  const data = Modal.getOrCreateInstance(target);\n  data.toggle(this);\n});\nenableDismissTrigger(Modal);\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Modal to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Modal);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): offcanvas.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$5 = 'offcanvas';\nconst DATA_KEY$5 = 'bs.offcanvas';\nconst EVENT_KEY$5 = `.${DATA_KEY$5}`;\nconst DATA_API_KEY$2 = '.data-api';\nconst EVENT_LOAD_DATA_API$1 = `load${EVENT_KEY$5}${DATA_API_KEY$2}`;\nconst ESCAPE_KEY = 'Escape';\nconst Default$4 = {\n  backdrop: true,\n  keyboard: true,\n  scroll: false\n};\nconst DefaultType$4 = {\n  backdrop: 'boolean',\n  keyboard: 'boolean',\n  scroll: 'boolean'\n};\nconst CLASS_NAME_SHOW$3 = 'show';\nconst CLASS_NAME_BACKDROP = 'offcanvas-backdrop';\nconst OPEN_SELECTOR = '.offcanvas.show';\nconst EVENT_SHOW$2 = `show${EVENT_KEY$5}`;\nconst EVENT_SHOWN$2 = `shown${EVENT_KEY$5}`;\nconst EVENT_HIDE$2 = `hide${EVENT_KEY$5}`;\nconst EVENT_HIDDEN$2 = `hidden${EVENT_KEY$5}`;\nconst EVENT_CLICK_DATA_API$1 = `click${EVENT_KEY$5}${DATA_API_KEY$2}`;\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY$5}`;\nconst SELECTOR_DATA_TOGGLE$1 = '[data-bs-toggle=\"offcanvas\"]';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Offcanvas extends BaseComponent {\n  constructor(element, config) {\n    super(element);\n    this._config = this._getConfig(config);\n    this._isShown = false;\n    this._backdrop = this._initializeBackDrop();\n    this._focustrap = this._initializeFocusTrap();\n\n    this._addEventListeners();\n  } // Getters\n\n\n  static get NAME() {\n    return NAME$5;\n  }\n\n  static get Default() {\n    return Default$4;\n  } // Public\n\n\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget);\n  }\n\n  show(relatedTarget) {\n    if (this._isShown) {\n      return;\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$2, {\n      relatedTarget\n    });\n\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n\n    this._isShown = true;\n    this._element.style.visibility = 'visible';\n\n    this._backdrop.show();\n\n    if (!this._config.scroll) {\n      new ScrollBarHelper().hide();\n    }\n\n    this._element.removeAttribute('aria-hidden');\n\n    this._element.setAttribute('aria-modal', true);\n\n    this._element.setAttribute('role', 'dialog');\n\n    this._element.classList.add(CLASS_NAME_SHOW$3);\n\n    const completeCallBack = () => {\n      if (!this._config.scroll) {\n        this._focustrap.activate();\n      }\n\n      EventHandler.trigger(this._element, EVENT_SHOWN$2, {\n        relatedTarget\n      });\n    };\n\n    this._queueCallback(completeCallBack, this._element, true);\n  }\n\n  hide() {\n    if (!this._isShown) {\n      return;\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$2);\n\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n\n    this._focustrap.deactivate();\n\n    this._element.blur();\n\n    this._isShown = false;\n\n    this._element.classList.remove(CLASS_NAME_SHOW$3);\n\n    this._backdrop.hide();\n\n    const completeCallback = () => {\n      this._element.setAttribute('aria-hidden', true);\n\n      this._element.removeAttribute('aria-modal');\n\n      this._element.removeAttribute('role');\n\n      this._element.style.visibility = 'hidden';\n\n      if (!this._config.scroll) {\n        new ScrollBarHelper().reset();\n      }\n\n      EventHandler.trigger(this._element, EVENT_HIDDEN$2);\n    };\n\n    this._queueCallback(completeCallback, this._element, true);\n  }\n\n  dispose() {\n    this._backdrop.dispose();\n\n    this._focustrap.deactivate();\n\n    super.dispose();\n  } // Private\n\n\n  _getConfig(config) {\n    config = { ...Default$4,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    };\n    typeCheckConfig(NAME$5, config, DefaultType$4);\n    return config;\n  }\n\n  _initializeBackDrop() {\n    return new Backdrop({\n      className: CLASS_NAME_BACKDROP,\n      isVisible: this._config.backdrop,\n      isAnimated: true,\n      rootElement: this._element.parentNode,\n      clickCallback: () => this.hide()\n    });\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    });\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (this._config.keyboard && event.key === ESCAPE_KEY) {\n        this.hide();\n      }\n    });\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Offcanvas.getOrCreateInstance(this, config);\n\n      if (typeof config !== 'string') {\n        return;\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n\n      data[config](this);\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$1, SELECTOR_DATA_TOGGLE$1, function (event) {\n  const target = getElementFromSelector(this);\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault();\n  }\n\n  if (isDisabled(this)) {\n    return;\n  }\n\n  EventHandler.one(target, EVENT_HIDDEN$2, () => {\n    // focus on trigger when it is closed\n    if (isVisible(this)) {\n      this.focus();\n    }\n  }); // avoid conflict when clicking a toggler of an offcanvas, while another is open\n\n  const allReadyOpen = SelectorEngine.findOne(OPEN_SELECTOR);\n\n  if (allReadyOpen && allReadyOpen !== target) {\n    Offcanvas.getInstance(allReadyOpen).hide();\n  }\n\n  const data = Offcanvas.getOrCreateInstance(target);\n  data.toggle(this);\n});\nEventHandler.on(window, EVENT_LOAD_DATA_API$1, () => SelectorEngine.find(OPEN_SELECTOR).forEach(el => Offcanvas.getOrCreateInstance(el).show()));\nenableDismissTrigger(Offcanvas);\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\ndefineJQueryPlugin(Offcanvas);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/sanitizer.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\nconst uriAttributes = new Set(['background', 'cite', 'href', 'itemtype', 'longdesc', 'poster', 'src', 'xlink:href']);\nconst ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i;\n/**\n * A pattern that recognizes a commonly useful subset of URLs that are safe.\n *\n * Shoutout to Angular https://github.com/angular/angular/blob/12.2.x/packages/core/src/sanitization/url_sanitizer.ts\n */\n\nconst SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i;\n/**\n * A pattern that matches safe data URLs. Only matches image, video and audio types.\n *\n * Shoutout to Angular https://github.com/angular/angular/blob/12.2.x/packages/core/src/sanitization/url_sanitizer.ts\n */\n\nconst DATA_URL_PATTERN = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[\\d+/a-z]+=*$/i;\n\nconst allowedAttribute = (attribute, allowedAttributeList) => {\n  const attributeName = attribute.nodeName.toLowerCase();\n\n  if (allowedAttributeList.includes(attributeName)) {\n    if (uriAttributes.has(attributeName)) {\n      return Boolean(SAFE_URL_PATTERN.test(attribute.nodeValue) || DATA_URL_PATTERN.test(attribute.nodeValue));\n    }\n\n    return true;\n  }\n\n  const regExp = allowedAttributeList.filter(attributeRegex => attributeRegex instanceof RegExp); // Check if a regular expression validates the attribute.\n\n  for (let i = 0, len = regExp.length; i < len; i++) {\n    if (regExp[i].test(attributeName)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nconst DefaultAllowlist = {\n  // Global attributes allowed on any supplied element below.\n  '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],\n  a: ['target', 'href', 'title', 'rel'],\n  area: [],\n  b: [],\n  br: [],\n  col: [],\n  code: [],\n  div: [],\n  em: [],\n  hr: [],\n  h1: [],\n  h2: [],\n  h3: [],\n  h4: [],\n  h5: [],\n  h6: [],\n  i: [],\n  img: ['src', 'srcset', 'alt', 'title', 'width', 'height'],\n  li: [],\n  ol: [],\n  p: [],\n  pre: [],\n  s: [],\n  small: [],\n  span: [],\n  sub: [],\n  sup: [],\n  strong: [],\n  u: [],\n  ul: []\n};\nfunction sanitizeHtml(unsafeHtml, allowList, sanitizeFn) {\n  if (!unsafeHtml.length) {\n    return unsafeHtml;\n  }\n\n  if (sanitizeFn && typeof sanitizeFn === 'function') {\n    return sanitizeFn(unsafeHtml);\n  }\n\n  const domParser = new window.DOMParser();\n  const createdDocument = domParser.parseFromString(unsafeHtml, 'text/html');\n  const elements = [].concat(...createdDocument.body.querySelectorAll('*'));\n\n  for (let i = 0, len = elements.length; i < len; i++) {\n    const element = elements[i];\n    const elementName = element.nodeName.toLowerCase();\n\n    if (!Object.keys(allowList).includes(elementName)) {\n      element.remove();\n      continue;\n    }\n\n    const attributeList = [].concat(...element.attributes);\n    const allowedAttributes = [].concat(allowList['*'] || [], allowList[elementName] || []);\n    attributeList.forEach(attribute => {\n      if (!allowedAttribute(attribute, allowedAttributes)) {\n        element.removeAttribute(attribute.nodeName);\n      }\n    });\n  }\n\n  return createdDocument.body.innerHTML;\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): tooltip.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$4 = 'tooltip';\nconst DATA_KEY$4 = 'bs.tooltip';\nconst EVENT_KEY$4 = `.${DATA_KEY$4}`;\nconst CLASS_PREFIX$1 = 'bs-tooltip';\nconst DISALLOWED_ATTRIBUTES = new Set(['sanitize', 'allowList', 'sanitizeFn']);\nconst DefaultType$3 = {\n  animation: 'boolean',\n  template: 'string',\n  title: '(string|element|function)',\n  trigger: 'string',\n  delay: '(number|object)',\n  html: 'boolean',\n  selector: '(string|boolean)',\n  placement: '(string|function)',\n  offset: '(array|string|function)',\n  container: '(string|element|boolean)',\n  fallbackPlacements: 'array',\n  boundary: '(string|element)',\n  customClass: '(string|function)',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  allowList: 'object',\n  popperConfig: '(null|object|function)'\n};\nconst AttachmentMap = {\n  AUTO: 'auto',\n  TOP: 'top',\n  RIGHT: isRTL() ? 'left' : 'right',\n  BOTTOM: 'bottom',\n  LEFT: isRTL() ? 'right' : 'left'\n};\nconst Default$3 = {\n  animation: true,\n  template: '<div class=\"tooltip\" role=\"tooltip\">' + '<div class=\"tooltip-arrow\"></div>' + '<div class=\"tooltip-inner\"></div>' + '</div>',\n  trigger: 'hover focus',\n  title: '',\n  delay: 0,\n  html: false,\n  selector: false,\n  placement: 'top',\n  offset: [0, 0],\n  container: false,\n  fallbackPlacements: ['top', 'right', 'bottom', 'left'],\n  boundary: 'clippingParents',\n  customClass: '',\n  sanitize: true,\n  sanitizeFn: null,\n  allowList: DefaultAllowlist,\n  popperConfig: null\n};\nconst Event$2 = {\n  HIDE: `hide${EVENT_KEY$4}`,\n  HIDDEN: `hidden${EVENT_KEY$4}`,\n  SHOW: `show${EVENT_KEY$4}`,\n  SHOWN: `shown${EVENT_KEY$4}`,\n  INSERTED: `inserted${EVENT_KEY$4}`,\n  CLICK: `click${EVENT_KEY$4}`,\n  FOCUSIN: `focusin${EVENT_KEY$4}`,\n  FOCUSOUT: `focusout${EVENT_KEY$4}`,\n  MOUSEENTER: `mouseenter${EVENT_KEY$4}`,\n  MOUSELEAVE: `mouseleave${EVENT_KEY$4}`\n};\nconst CLASS_NAME_FADE$2 = 'fade';\nconst CLASS_NAME_MODAL = 'modal';\nconst CLASS_NAME_SHOW$2 = 'show';\nconst HOVER_STATE_SHOW = 'show';\nconst HOVER_STATE_OUT = 'out';\nconst SELECTOR_TOOLTIP_INNER = '.tooltip-inner';\nconst SELECTOR_MODAL = `.${CLASS_NAME_MODAL}`;\nconst EVENT_MODAL_HIDE = 'hide.bs.modal';\nconst TRIGGER_HOVER = 'hover';\nconst TRIGGER_FOCUS = 'focus';\nconst TRIGGER_CLICK = 'click';\nconst TRIGGER_MANUAL = 'manual';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Tooltip extends BaseComponent {\n  constructor(element, config) {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s tooltips require Popper (https://popper.js.org)');\n    }\n\n    super(element); // private\n\n    this._isEnabled = true;\n    this._timeout = 0;\n    this._hoverState = '';\n    this._activeTrigger = {};\n    this._popper = null; // Protected\n\n    this._config = this._getConfig(config);\n    this.tip = null;\n\n    this._setListeners();\n  } // Getters\n\n\n  static get Default() {\n    return Default$3;\n  }\n\n  static get NAME() {\n    return NAME$4;\n  }\n\n  static get Event() {\n    return Event$2;\n  }\n\n  static get DefaultType() {\n    return DefaultType$3;\n  } // Public\n\n\n  enable() {\n    this._isEnabled = true;\n  }\n\n  disable() {\n    this._isEnabled = false;\n  }\n\n  toggleEnabled() {\n    this._isEnabled = !this._isEnabled;\n  }\n\n  toggle(event) {\n    if (!this._isEnabled) {\n      return;\n    }\n\n    if (event) {\n      const context = this._initializeOnDelegatedTarget(event);\n\n      context._activeTrigger.click = !context._activeTrigger.click;\n\n      if (context._isWithActiveTrigger()) {\n        context._enter(null, context);\n      } else {\n        context._leave(null, context);\n      }\n    } else {\n      if (this.getTipElement().classList.contains(CLASS_NAME_SHOW$2)) {\n        this._leave(null, this);\n\n        return;\n      }\n\n      this._enter(null, this);\n    }\n  }\n\n  dispose() {\n    clearTimeout(this._timeout);\n    EventHandler.off(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler);\n\n    if (this.tip) {\n      this.tip.remove();\n    }\n\n    this._disposePopper();\n\n    super.dispose();\n  }\n\n  show() {\n    if (this._element.style.display === 'none') {\n      throw new Error('Please use show on visible elements');\n    }\n\n    if (!(this.isWithContent() && this._isEnabled)) {\n      return;\n    }\n\n    const showEvent = EventHandler.trigger(this._element, this.constructor.Event.SHOW);\n    const shadowRoot = findShadowRoot(this._element);\n    const isInTheDom = shadowRoot === null ? this._element.ownerDocument.documentElement.contains(this._element) : shadowRoot.contains(this._element);\n\n    if (showEvent.defaultPrevented || !isInTheDom) {\n      return;\n    } // A trick to recreate a tooltip in case a new title is given by using the NOT documented `data-bs-original-title`\n    // This will be removed later in favor of a `setContent` method\n\n\n    if (this.constructor.NAME === 'tooltip' && this.tip && this.getTitle() !== this.tip.querySelector(SELECTOR_TOOLTIP_INNER).innerHTML) {\n      this._disposePopper();\n\n      this.tip.remove();\n      this.tip = null;\n    }\n\n    const tip = this.getTipElement();\n    const tipId = getUID(this.constructor.NAME);\n    tip.setAttribute('id', tipId);\n\n    this._element.setAttribute('aria-describedby', tipId);\n\n    if (this._config.animation) {\n      tip.classList.add(CLASS_NAME_FADE$2);\n    }\n\n    const placement = typeof this._config.placement === 'function' ? this._config.placement.call(this, tip, this._element) : this._config.placement;\n\n    const attachment = this._getAttachment(placement);\n\n    this._addAttachmentClass(attachment);\n\n    const {\n      container\n    } = this._config;\n    Data.set(tip, this.constructor.DATA_KEY, this);\n\n    if (!this._element.ownerDocument.documentElement.contains(this.tip)) {\n      container.append(tip);\n      EventHandler.trigger(this._element, this.constructor.Event.INSERTED);\n    }\n\n    if (this._popper) {\n      this._popper.update();\n    } else {\n      this._popper = Popper.createPopper(this._element, tip, this._getPopperConfig(attachment));\n    }\n\n    tip.classList.add(CLASS_NAME_SHOW$2);\n\n    const customClass = this._resolvePossibleFunction(this._config.customClass);\n\n    if (customClass) {\n      tip.classList.add(...customClass.split(' '));\n    } // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n\n\n    if ('ontouchstart' in document.documentElement) {\n      [].concat(...document.body.children).forEach(element => {\n        EventHandler.on(element, 'mouseover', noop);\n      });\n    }\n\n    const complete = () => {\n      const prevHoverState = this._hoverState;\n      this._hoverState = null;\n      EventHandler.trigger(this._element, this.constructor.Event.SHOWN);\n\n      if (prevHoverState === HOVER_STATE_OUT) {\n        this._leave(null, this);\n      }\n    };\n\n    const isAnimated = this.tip.classList.contains(CLASS_NAME_FADE$2);\n\n    this._queueCallback(complete, this.tip, isAnimated);\n  }\n\n  hide() {\n    if (!this._popper) {\n      return;\n    }\n\n    const tip = this.getTipElement();\n\n    const complete = () => {\n      if (this._isWithActiveTrigger()) {\n        return;\n      }\n\n      if (this._hoverState !== HOVER_STATE_SHOW) {\n        tip.remove();\n      }\n\n      this._cleanTipClass();\n\n      this._element.removeAttribute('aria-describedby');\n\n      EventHandler.trigger(this._element, this.constructor.Event.HIDDEN);\n\n      this._disposePopper();\n    };\n\n    const hideEvent = EventHandler.trigger(this._element, this.constructor.Event.HIDE);\n\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n\n    tip.classList.remove(CLASS_NAME_SHOW$2); // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n\n    if ('ontouchstart' in document.documentElement) {\n      [].concat(...document.body.children).forEach(element => EventHandler.off(element, 'mouseover', noop));\n    }\n\n    this._activeTrigger[TRIGGER_CLICK] = false;\n    this._activeTrigger[TRIGGER_FOCUS] = false;\n    this._activeTrigger[TRIGGER_HOVER] = false;\n    const isAnimated = this.tip.classList.contains(CLASS_NAME_FADE$2);\n\n    this._queueCallback(complete, this.tip, isAnimated);\n\n    this._hoverState = '';\n  }\n\n  update() {\n    if (this._popper !== null) {\n      this._popper.update();\n    }\n  } // Protected\n\n\n  isWithContent() {\n    return Boolean(this.getTitle());\n  }\n\n  getTipElement() {\n    if (this.tip) {\n      return this.tip;\n    }\n\n    const element = document.createElement('div');\n    element.innerHTML = this._config.template;\n    const tip = element.children[0];\n    this.setContent(tip);\n    tip.classList.remove(CLASS_NAME_FADE$2, CLASS_NAME_SHOW$2);\n    this.tip = tip;\n    return this.tip;\n  }\n\n  setContent(tip) {\n    this._sanitizeAndSetContent(tip, this.getTitle(), SELECTOR_TOOLTIP_INNER);\n  }\n\n  _sanitizeAndSetContent(template, content, selector) {\n    const templateElement = SelectorEngine.findOne(selector, template);\n\n    if (!content && templateElement) {\n      templateElement.remove();\n      return;\n    } // we use append for html objects to maintain js events\n\n\n    this.setElementContent(templateElement, content);\n  }\n\n  setElementContent(element, content) {\n    if (element === null) {\n      return;\n    }\n\n    if (isElement(content)) {\n      content = getElement(content); // content is a DOM node or a jQuery\n\n      if (this._config.html) {\n        if (content.parentNode !== element) {\n          element.innerHTML = '';\n          element.append(content);\n        }\n      } else {\n        element.textContent = content.textContent;\n      }\n\n      return;\n    }\n\n    if (this._config.html) {\n      if (this._config.sanitize) {\n        content = sanitizeHtml(content, this._config.allowList, this._config.sanitizeFn);\n      }\n\n      element.innerHTML = content;\n    } else {\n      element.textContent = content;\n    }\n  }\n\n  getTitle() {\n    const title = this._element.getAttribute('data-bs-original-title') || this._config.title;\n\n    return this._resolvePossibleFunction(title);\n  }\n\n  updateAttachment(attachment) {\n    if (attachment === 'right') {\n      return 'end';\n    }\n\n    if (attachment === 'left') {\n      return 'start';\n    }\n\n    return attachment;\n  } // Private\n\n\n  _initializeOnDelegatedTarget(event, context) {\n    return context || this.constructor.getOrCreateInstance(event.delegateTarget, this._getDelegateConfig());\n  }\n\n  _getOffset() {\n    const {\n      offset\n    } = this._config;\n\n    if (typeof offset === 'string') {\n      return offset.split(',').map(val => Number.parseInt(val, 10));\n    }\n\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element);\n    }\n\n    return offset;\n  }\n\n  _resolvePossibleFunction(content) {\n    return typeof content === 'function' ? content.call(this._element) : content;\n  }\n\n  _getPopperConfig(attachment) {\n    const defaultBsPopperConfig = {\n      placement: attachment,\n      modifiers: [{\n        name: 'flip',\n        options: {\n          fallbackPlacements: this._config.fallbackPlacements\n        }\n      }, {\n        name: 'offset',\n        options: {\n          offset: this._getOffset()\n        }\n      }, {\n        name: 'preventOverflow',\n        options: {\n          boundary: this._config.boundary\n        }\n      }, {\n        name: 'arrow',\n        options: {\n          element: `.${this.constructor.NAME}-arrow`\n        }\n      }, {\n        name: 'onChange',\n        enabled: true,\n        phase: 'afterWrite',\n        fn: data => this._handlePopperPlacementChange(data)\n      }],\n      onFirstUpdate: data => {\n        if (data.options.placement !== data.placement) {\n          this._handlePopperPlacementChange(data);\n        }\n      }\n    };\n    return { ...defaultBsPopperConfig,\n      ...(typeof this._config.popperConfig === 'function' ? this._config.popperConfig(defaultBsPopperConfig) : this._config.popperConfig)\n    };\n  }\n\n  _addAttachmentClass(attachment) {\n    this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(attachment)}`);\n  }\n\n  _getAttachment(placement) {\n    return AttachmentMap[placement.toUpperCase()];\n  }\n\n  _setListeners() {\n    const triggers = this._config.trigger.split(' ');\n\n    triggers.forEach(trigger => {\n      if (trigger === 'click') {\n        EventHandler.on(this._element, this.constructor.Event.CLICK, this._config.selector, event => this.toggle(event));\n      } else if (trigger !== TRIGGER_MANUAL) {\n        const eventIn = trigger === TRIGGER_HOVER ? this.constructor.Event.MOUSEENTER : this.constructor.Event.FOCUSIN;\n        const eventOut = trigger === TRIGGER_HOVER ? this.constructor.Event.MOUSELEAVE : this.constructor.Event.FOCUSOUT;\n        EventHandler.on(this._element, eventIn, this._config.selector, event => this._enter(event));\n        EventHandler.on(this._element, eventOut, this._config.selector, event => this._leave(event));\n      }\n    });\n\n    this._hideModalHandler = () => {\n      if (this._element) {\n        this.hide();\n      }\n    };\n\n    EventHandler.on(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler);\n\n    if (this._config.selector) {\n      this._config = { ...this._config,\n        trigger: 'manual',\n        selector: ''\n      };\n    } else {\n      this._fixTitle();\n    }\n  }\n\n  _fixTitle() {\n    const title = this._element.getAttribute('title');\n\n    const originalTitleType = typeof this._element.getAttribute('data-bs-original-title');\n\n    if (title || originalTitleType !== 'string') {\n      this._element.setAttribute('data-bs-original-title', title || '');\n\n      if (title && !this._element.getAttribute('aria-label') && !this._element.textContent) {\n        this._element.setAttribute('aria-label', title);\n      }\n\n      this._element.setAttribute('title', '');\n    }\n  }\n\n  _enter(event, context) {\n    context = this._initializeOnDelegatedTarget(event, context);\n\n    if (event) {\n      context._activeTrigger[event.type === 'focusin' ? TRIGGER_FOCUS : TRIGGER_HOVER] = true;\n    }\n\n    if (context.getTipElement().classList.contains(CLASS_NAME_SHOW$2) || context._hoverState === HOVER_STATE_SHOW) {\n      context._hoverState = HOVER_STATE_SHOW;\n      return;\n    }\n\n    clearTimeout(context._timeout);\n    context._hoverState = HOVER_STATE_SHOW;\n\n    if (!context._config.delay || !context._config.delay.show) {\n      context.show();\n      return;\n    }\n\n    context._timeout = setTimeout(() => {\n      if (context._hoverState === HOVER_STATE_SHOW) {\n        context.show();\n      }\n    }, context._config.delay.show);\n  }\n\n  _leave(event, context) {\n    context = this._initializeOnDelegatedTarget(event, context);\n\n    if (event) {\n      context._activeTrigger[event.type === 'focusout' ? TRIGGER_FOCUS : TRIGGER_HOVER] = context._element.contains(event.relatedTarget);\n    }\n\n    if (context._isWithActiveTrigger()) {\n      return;\n    }\n\n    clearTimeout(context._timeout);\n    context._hoverState = HOVER_STATE_OUT;\n\n    if (!context._config.delay || !context._config.delay.hide) {\n      context.hide();\n      return;\n    }\n\n    context._timeout = setTimeout(() => {\n      if (context._hoverState === HOVER_STATE_OUT) {\n        context.hide();\n      }\n    }, context._config.delay.hide);\n  }\n\n  _isWithActiveTrigger() {\n    for (const trigger in this._activeTrigger) {\n      if (this._activeTrigger[trigger]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  _getConfig(config) {\n    const dataAttributes = Manipulator.getDataAttributes(this._element);\n    Object.keys(dataAttributes).forEach(dataAttr => {\n      if (DISALLOWED_ATTRIBUTES.has(dataAttr)) {\n        delete dataAttributes[dataAttr];\n      }\n    });\n    config = { ...this.constructor.Default,\n      ...dataAttributes,\n      ...(typeof config === 'object' && config ? config : {})\n    };\n    config.container = config.container === false ? document.body : getElement(config.container);\n\n    if (typeof config.delay === 'number') {\n      config.delay = {\n        show: config.delay,\n        hide: config.delay\n      };\n    }\n\n    if (typeof config.title === 'number') {\n      config.title = config.title.toString();\n    }\n\n    if (typeof config.content === 'number') {\n      config.content = config.content.toString();\n    }\n\n    typeCheckConfig(NAME$4, config, this.constructor.DefaultType);\n\n    if (config.sanitize) {\n      config.template = sanitizeHtml(config.template, config.allowList, config.sanitizeFn);\n    }\n\n    return config;\n  }\n\n  _getDelegateConfig() {\n    const config = {};\n\n    for (const key in this._config) {\n      if (this.constructor.Default[key] !== this._config[key]) {\n        config[key] = this._config[key];\n      }\n    } // In the future can be replaced with:\n    // const keysWithDifferentValues = Object.entries(this._config).filter(entry => this.constructor.Default[entry[0]] !== this._config[entry[0]])\n    // `Object.fromEntries(keysWithDifferentValues)`\n\n\n    return config;\n  }\n\n  _cleanTipClass() {\n    const tip = this.getTipElement();\n    const basicClassPrefixRegex = new RegExp(`(^|\\\\s)${this._getBasicClassPrefix()}\\\\S+`, 'g');\n    const tabClass = tip.getAttribute('class').match(basicClassPrefixRegex);\n\n    if (tabClass !== null && tabClass.length > 0) {\n      tabClass.map(token => token.trim()).forEach(tClass => tip.classList.remove(tClass));\n    }\n  }\n\n  _getBasicClassPrefix() {\n    return CLASS_PREFIX$1;\n  }\n\n  _handlePopperPlacementChange(popperData) {\n    const {\n      state\n    } = popperData;\n\n    if (!state) {\n      return;\n    }\n\n    this.tip = state.elements.popper;\n\n    this._cleanTipClass();\n\n    this._addAttachmentClass(this._getAttachment(state.placement));\n  }\n\n  _disposePopper() {\n    if (this._popper) {\n      this._popper.destroy();\n\n      this._popper = null;\n    }\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tooltip.getOrCreateInstance(this, config);\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n\n        data[config]();\n      }\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Tooltip to jQuery only if jQuery is present\n */\n\n\ndefineJQueryPlugin(Tooltip);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): popover.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$3 = 'popover';\nconst DATA_KEY$3 = 'bs.popover';\nconst EVENT_KEY$3 = `.${DATA_KEY$3}`;\nconst CLASS_PREFIX = 'bs-popover';\nconst Default$2 = { ...Tooltip.Default,\n  placement: 'right',\n  offset: [0, 8],\n  trigger: 'click',\n  content: '',\n  template: '<div class=\"popover\" role=\"tooltip\">' + '<div class=\"popover-arrow\"></div>' + '<h3 class=\"popover-header\"></h3>' + '<div class=\"popover-body\"></div>' + '</div>'\n};\nconst DefaultType$2 = { ...Tooltip.DefaultType,\n  content: '(string|element|function)'\n};\nconst Event$1 = {\n  HIDE: `hide${EVENT_KEY$3}`,\n  HIDDEN: `hidden${EVENT_KEY$3}`,\n  SHOW: `show${EVENT_KEY$3}`,\n  SHOWN: `shown${EVENT_KEY$3}`,\n  INSERTED: `inserted${EVENT_KEY$3}`,\n  CLICK: `click${EVENT_KEY$3}`,\n  FOCUSIN: `focusin${EVENT_KEY$3}`,\n  FOCUSOUT: `focusout${EVENT_KEY$3}`,\n  MOUSEENTER: `mouseenter${EVENT_KEY$3}`,\n  MOUSELEAVE: `mouseleave${EVENT_KEY$3}`\n};\nconst SELECTOR_TITLE = '.popover-header';\nconst SELECTOR_CONTENT = '.popover-body';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Popover extends Tooltip {\n  // Getters\n  static get Default() {\n    return Default$2;\n  }\n\n  static get NAME() {\n    return NAME$3;\n  }\n\n  static get Event() {\n    return Event$1;\n  }\n\n  static get DefaultType() {\n    return DefaultType$2;\n  } // Overrides\n\n\n  isWithContent() {\n    return this.getTitle() || this._getContent();\n  }\n\n  setContent(tip) {\n    this._sanitizeAndSetContent(tip, this.getTitle(), SELECTOR_TITLE);\n\n    this._sanitizeAndSetContent(tip, this._getContent(), SELECTOR_CONTENT);\n  } // Private\n\n\n  _getContent() {\n    return this._resolvePossibleFunction(this._config.content);\n  }\n\n  _getBasicClassPrefix() {\n    return CLASS_PREFIX;\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Popover.getOrCreateInstance(this, config);\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n\n        data[config]();\n      }\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Popover to jQuery only if jQuery is present\n */\n\n\ndefineJQueryPlugin(Popover);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): scrollspy.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$2 = 'scrollspy';\nconst DATA_KEY$2 = 'bs.scrollspy';\nconst EVENT_KEY$2 = `.${DATA_KEY$2}`;\nconst DATA_API_KEY$1 = '.data-api';\nconst Default$1 = {\n  offset: 10,\n  method: 'auto',\n  target: ''\n};\nconst DefaultType$1 = {\n  offset: 'number',\n  method: 'string',\n  target: '(string|element)'\n};\nconst EVENT_ACTIVATE = `activate${EVENT_KEY$2}`;\nconst EVENT_SCROLL = `scroll${EVENT_KEY$2}`;\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY$2}${DATA_API_KEY$1}`;\nconst CLASS_NAME_DROPDOWN_ITEM = 'dropdown-item';\nconst CLASS_NAME_ACTIVE$1 = 'active';\nconst SELECTOR_DATA_SPY = '[data-bs-spy=\"scroll\"]';\nconst SELECTOR_NAV_LIST_GROUP$1 = '.nav, .list-group';\nconst SELECTOR_NAV_LINKS = '.nav-link';\nconst SELECTOR_NAV_ITEMS = '.nav-item';\nconst SELECTOR_LIST_ITEMS = '.list-group-item';\nconst SELECTOR_LINK_ITEMS = `${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}, .${CLASS_NAME_DROPDOWN_ITEM}`;\nconst SELECTOR_DROPDOWN$1 = '.dropdown';\nconst SELECTOR_DROPDOWN_TOGGLE$1 = '.dropdown-toggle';\nconst METHOD_OFFSET = 'offset';\nconst METHOD_POSITION = 'position';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ScrollSpy extends BaseComponent {\n  constructor(element, config) {\n    super(element);\n    this._scrollElement = this._element.tagName === 'BODY' ? window : this._element;\n    this._config = this._getConfig(config);\n    this._offsets = [];\n    this._targets = [];\n    this._activeTarget = null;\n    this._scrollHeight = 0;\n    EventHandler.on(this._scrollElement, EVENT_SCROLL, () => this._process());\n    this.refresh();\n\n    this._process();\n  } // Getters\n\n\n  static get Default() {\n    return Default$1;\n  }\n\n  static get NAME() {\n    return NAME$2;\n  } // Public\n\n\n  refresh() {\n    const autoMethod = this._scrollElement === this._scrollElement.window ? METHOD_OFFSET : METHOD_POSITION;\n    const offsetMethod = this._config.method === 'auto' ? autoMethod : this._config.method;\n    const offsetBase = offsetMethod === METHOD_POSITION ? this._getScrollTop() : 0;\n    this._offsets = [];\n    this._targets = [];\n    this._scrollHeight = this._getScrollHeight();\n    const targets = SelectorEngine.find(SELECTOR_LINK_ITEMS, this._config.target);\n    targets.map(element => {\n      const targetSelector = getSelectorFromElement(element);\n      const target = targetSelector ? SelectorEngine.findOne(targetSelector) : null;\n\n      if (target) {\n        const targetBCR = target.getBoundingClientRect();\n\n        if (targetBCR.width || targetBCR.height) {\n          return [Manipulator[offsetMethod](target).top + offsetBase, targetSelector];\n        }\n      }\n\n      return null;\n    }).filter(item => item).sort((a, b) => a[0] - b[0]).forEach(item => {\n      this._offsets.push(item[0]);\n\n      this._targets.push(item[1]);\n    });\n  }\n\n  dispose() {\n    EventHandler.off(this._scrollElement, EVENT_KEY$2);\n    super.dispose();\n  } // Private\n\n\n  _getConfig(config) {\n    config = { ...Default$1,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' && config ? config : {})\n    };\n    config.target = getElement(config.target) || document.documentElement;\n    typeCheckConfig(NAME$2, config, DefaultType$1);\n    return config;\n  }\n\n  _getScrollTop() {\n    return this._scrollElement === window ? this._scrollElement.pageYOffset : this._scrollElement.scrollTop;\n  }\n\n  _getScrollHeight() {\n    return this._scrollElement.scrollHeight || Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);\n  }\n\n  _getOffsetHeight() {\n    return this._scrollElement === window ? window.innerHeight : this._scrollElement.getBoundingClientRect().height;\n  }\n\n  _process() {\n    const scrollTop = this._getScrollTop() + this._config.offset;\n\n    const scrollHeight = this._getScrollHeight();\n\n    const maxScroll = this._config.offset + scrollHeight - this._getOffsetHeight();\n\n    if (this._scrollHeight !== scrollHeight) {\n      this.refresh();\n    }\n\n    if (scrollTop >= maxScroll) {\n      const target = this._targets[this._targets.length - 1];\n\n      if (this._activeTarget !== target) {\n        this._activate(target);\n      }\n\n      return;\n    }\n\n    if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {\n      this._activeTarget = null;\n\n      this._clear();\n\n      return;\n    }\n\n    for (let i = this._offsets.length; i--;) {\n      const isActiveTarget = this._activeTarget !== this._targets[i] && scrollTop >= this._offsets[i] && (typeof this._offsets[i + 1] === 'undefined' || scrollTop < this._offsets[i + 1]);\n\n      if (isActiveTarget) {\n        this._activate(this._targets[i]);\n      }\n    }\n  }\n\n  _activate(target) {\n    this._activeTarget = target;\n\n    this._clear();\n\n    const queries = SELECTOR_LINK_ITEMS.split(',').map(selector => `${selector}[data-bs-target=\"${target}\"],${selector}[href=\"${target}\"]`);\n    const link = SelectorEngine.findOne(queries.join(','), this._config.target);\n    link.classList.add(CLASS_NAME_ACTIVE$1);\n\n    if (link.classList.contains(CLASS_NAME_DROPDOWN_ITEM)) {\n      SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1, link.closest(SELECTOR_DROPDOWN$1)).classList.add(CLASS_NAME_ACTIVE$1);\n    } else {\n      SelectorEngine.parents(link, SELECTOR_NAV_LIST_GROUP$1).forEach(listGroup => {\n        // Set triggered links parents as active\n        // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor\n        SelectorEngine.prev(listGroup, `${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`).forEach(item => item.classList.add(CLASS_NAME_ACTIVE$1)); // Handle special case when .nav-link is inside .nav-item\n\n        SelectorEngine.prev(listGroup, SELECTOR_NAV_ITEMS).forEach(navItem => {\n          SelectorEngine.children(navItem, SELECTOR_NAV_LINKS).forEach(item => item.classList.add(CLASS_NAME_ACTIVE$1));\n        });\n      });\n    }\n\n    EventHandler.trigger(this._scrollElement, EVENT_ACTIVATE, {\n      relatedTarget: target\n    });\n  }\n\n  _clear() {\n    SelectorEngine.find(SELECTOR_LINK_ITEMS, this._config.target).filter(node => node.classList.contains(CLASS_NAME_ACTIVE$1)).forEach(node => node.classList.remove(CLASS_NAME_ACTIVE$1));\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = ScrollSpy.getOrCreateInstance(this, config);\n\n      if (typeof config !== 'string') {\n        return;\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n\n      data[config]();\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  SelectorEngine.find(SELECTOR_DATA_SPY).forEach(spy => new ScrollSpy(spy));\n});\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .ScrollSpy to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(ScrollSpy);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): tab.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME$1 = 'tab';\nconst DATA_KEY$1 = 'bs.tab';\nconst EVENT_KEY$1 = `.${DATA_KEY$1}`;\nconst DATA_API_KEY = '.data-api';\nconst EVENT_HIDE$1 = `hide${EVENT_KEY$1}`;\nconst EVENT_HIDDEN$1 = `hidden${EVENT_KEY$1}`;\nconst EVENT_SHOW$1 = `show${EVENT_KEY$1}`;\nconst EVENT_SHOWN$1 = `shown${EVENT_KEY$1}`;\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY$1}${DATA_API_KEY}`;\nconst CLASS_NAME_DROPDOWN_MENU = 'dropdown-menu';\nconst CLASS_NAME_ACTIVE = 'active';\nconst CLASS_NAME_FADE$1 = 'fade';\nconst CLASS_NAME_SHOW$1 = 'show';\nconst SELECTOR_DROPDOWN = '.dropdown';\nconst SELECTOR_NAV_LIST_GROUP = '.nav, .list-group';\nconst SELECTOR_ACTIVE = '.active';\nconst SELECTOR_ACTIVE_UL = ':scope > li > .active';\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]';\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle';\nconst SELECTOR_DROPDOWN_ACTIVE_CHILD = ':scope > .dropdown-menu .active';\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Tab extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME$1;\n  } // Public\n\n\n  show() {\n    if (this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE && this._element.classList.contains(CLASS_NAME_ACTIVE)) {\n      return;\n    }\n\n    let previous;\n    const target = getElementFromSelector(this._element);\n\n    const listElement = this._element.closest(SELECTOR_NAV_LIST_GROUP);\n\n    if (listElement) {\n      const itemSelector = listElement.nodeName === 'UL' || listElement.nodeName === 'OL' ? SELECTOR_ACTIVE_UL : SELECTOR_ACTIVE;\n      previous = SelectorEngine.find(itemSelector, listElement);\n      previous = previous[previous.length - 1];\n    }\n\n    const hideEvent = previous ? EventHandler.trigger(previous, EVENT_HIDE$1, {\n      relatedTarget: this._element\n    }) : null;\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$1, {\n      relatedTarget: previous\n    });\n\n    if (showEvent.defaultPrevented || hideEvent !== null && hideEvent.defaultPrevented) {\n      return;\n    }\n\n    this._activate(this._element, listElement);\n\n    const complete = () => {\n      EventHandler.trigger(previous, EVENT_HIDDEN$1, {\n        relatedTarget: this._element\n      });\n      EventHandler.trigger(this._element, EVENT_SHOWN$1, {\n        relatedTarget: previous\n      });\n    };\n\n    if (target) {\n      this._activate(target, target.parentNode, complete);\n    } else {\n      complete();\n    }\n  } // Private\n\n\n  _activate(element, container, callback) {\n    const activeElements = container && (container.nodeName === 'UL' || container.nodeName === 'OL') ? SelectorEngine.find(SELECTOR_ACTIVE_UL, container) : SelectorEngine.children(container, SELECTOR_ACTIVE);\n    const active = activeElements[0];\n    const isTransitioning = callback && active && active.classList.contains(CLASS_NAME_FADE$1);\n\n    const complete = () => this._transitionComplete(element, active, callback);\n\n    if (active && isTransitioning) {\n      active.classList.remove(CLASS_NAME_SHOW$1);\n\n      this._queueCallback(complete, element, true);\n    } else {\n      complete();\n    }\n  }\n\n  _transitionComplete(element, active, callback) {\n    if (active) {\n      active.classList.remove(CLASS_NAME_ACTIVE);\n      const dropdownChild = SelectorEngine.findOne(SELECTOR_DROPDOWN_ACTIVE_CHILD, active.parentNode);\n\n      if (dropdownChild) {\n        dropdownChild.classList.remove(CLASS_NAME_ACTIVE);\n      }\n\n      if (active.getAttribute('role') === 'tab') {\n        active.setAttribute('aria-selected', false);\n      }\n    }\n\n    element.classList.add(CLASS_NAME_ACTIVE);\n\n    if (element.getAttribute('role') === 'tab') {\n      element.setAttribute('aria-selected', true);\n    }\n\n    reflow(element);\n\n    if (element.classList.contains(CLASS_NAME_FADE$1)) {\n      element.classList.add(CLASS_NAME_SHOW$1);\n    }\n\n    let parent = element.parentNode;\n\n    if (parent && parent.nodeName === 'LI') {\n      parent = parent.parentNode;\n    }\n\n    if (parent && parent.classList.contains(CLASS_NAME_DROPDOWN_MENU)) {\n      const dropdownElement = element.closest(SELECTOR_DROPDOWN);\n\n      if (dropdownElement) {\n        SelectorEngine.find(SELECTOR_DROPDOWN_TOGGLE, dropdownElement).forEach(dropdown => dropdown.classList.add(CLASS_NAME_ACTIVE));\n      }\n\n      element.setAttribute('aria-expanded', true);\n    }\n\n    if (callback) {\n      callback();\n    }\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tab.getOrCreateInstance(this);\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n\n        data[config]();\n      }\n    });\n  }\n\n}\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault();\n  }\n\n  if (isDisabled(this)) {\n    return;\n  }\n\n  const data = Tab.getOrCreateInstance(this);\n  data.show();\n});\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Tab to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Tab);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): toast.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'toast';\nconst DATA_KEY = 'bs.toast';\nconst EVENT_KEY = `.${DATA_KEY}`;\nconst EVENT_MOUSEOVER = `mouseover${EVENT_KEY}`;\nconst EVENT_MOUSEOUT = `mouseout${EVENT_KEY}`;\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`;\nconst EVENT_FOCUSOUT = `focusout${EVENT_KEY}`;\nconst EVENT_HIDE = `hide${EVENT_KEY}`;\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`;\nconst EVENT_SHOW = `show${EVENT_KEY}`;\nconst EVENT_SHOWN = `shown${EVENT_KEY}`;\nconst CLASS_NAME_FADE = 'fade';\nconst CLASS_NAME_HIDE = 'hide'; // @deprecated - kept here only for backwards compatibility\n\nconst CLASS_NAME_SHOW = 'show';\nconst CLASS_NAME_SHOWING = 'showing';\nconst DefaultType = {\n  animation: 'boolean',\n  autohide: 'boolean',\n  delay: 'number'\n};\nconst Default = {\n  animation: true,\n  autohide: true,\n  delay: 5000\n};\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Toast extends BaseComponent {\n  constructor(element, config) {\n    super(element);\n    this._config = this._getConfig(config);\n    this._timeout = null;\n    this._hasMouseInteraction = false;\n    this._hasKeyboardInteraction = false;\n\n    this._setListeners();\n  } // Getters\n\n\n  static get DefaultType() {\n    return DefaultType;\n  }\n\n  static get Default() {\n    return Default;\n  }\n\n  static get NAME() {\n    return NAME;\n  } // Public\n\n\n  show() {\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW);\n\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n\n    this._clearTimeout();\n\n    if (this._config.animation) {\n      this._element.classList.add(CLASS_NAME_FADE);\n    }\n\n    const complete = () => {\n      this._element.classList.remove(CLASS_NAME_SHOWING);\n\n      EventHandler.trigger(this._element, EVENT_SHOWN);\n\n      this._maybeScheduleHide();\n    };\n\n    this._element.classList.remove(CLASS_NAME_HIDE); // @deprecated\n\n\n    reflow(this._element);\n\n    this._element.classList.add(CLASS_NAME_SHOW);\n\n    this._element.classList.add(CLASS_NAME_SHOWING);\n\n    this._queueCallback(complete, this._element, this._config.animation);\n  }\n\n  hide() {\n    if (!this._element.classList.contains(CLASS_NAME_SHOW)) {\n      return;\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE);\n\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n\n    const complete = () => {\n      this._element.classList.add(CLASS_NAME_HIDE); // @deprecated\n\n\n      this._element.classList.remove(CLASS_NAME_SHOWING);\n\n      this._element.classList.remove(CLASS_NAME_SHOW);\n\n      EventHandler.trigger(this._element, EVENT_HIDDEN);\n    };\n\n    this._element.classList.add(CLASS_NAME_SHOWING);\n\n    this._queueCallback(complete, this._element, this._config.animation);\n  }\n\n  dispose() {\n    this._clearTimeout();\n\n    if (this._element.classList.contains(CLASS_NAME_SHOW)) {\n      this._element.classList.remove(CLASS_NAME_SHOW);\n    }\n\n    super.dispose();\n  } // Private\n\n\n  _getConfig(config) {\n    config = { ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' && config ? config : {})\n    };\n    typeCheckConfig(NAME, config, this.constructor.DefaultType);\n    return config;\n  }\n\n  _maybeScheduleHide() {\n    if (!this._config.autohide) {\n      return;\n    }\n\n    if (this._hasMouseInteraction || this._hasKeyboardInteraction) {\n      return;\n    }\n\n    this._timeout = setTimeout(() => {\n      this.hide();\n    }, this._config.delay);\n  }\n\n  _onInteraction(event, isInteracting) {\n    switch (event.type) {\n      case 'mouseover':\n      case 'mouseout':\n        this._hasMouseInteraction = isInteracting;\n        break;\n\n      case 'focusin':\n      case 'focusout':\n        this._hasKeyboardInteraction = isInteracting;\n        break;\n    }\n\n    if (isInteracting) {\n      this._clearTimeout();\n\n      return;\n    }\n\n    const nextElement = event.relatedTarget;\n\n    if (this._element === nextElement || this._element.contains(nextElement)) {\n      return;\n    }\n\n    this._maybeScheduleHide();\n  }\n\n  _setListeners() {\n    EventHandler.on(this._element, EVENT_MOUSEOVER, event => this._onInteraction(event, true));\n    EventHandler.on(this._element, EVENT_MOUSEOUT, event => this._onInteraction(event, false));\n    EventHandler.on(this._element, EVENT_FOCUSIN, event => this._onInteraction(event, true));\n    EventHandler.on(this._element, EVENT_FOCUSOUT, event => this._onInteraction(event, false));\n  }\n\n  _clearTimeout() {\n    clearTimeout(this._timeout);\n    this._timeout = null;\n  } // Static\n\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Toast.getOrCreateInstance(this, config);\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n\n        data[config](this);\n      }\n    });\n  }\n\n}\n\nenableDismissTrigger(Toast);\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Toast to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Toast);\n\nexport { Alert, Button, Carousel, Collapse, Dropdown, Modal, Offcanvas, Popover, ScrollSpy, Tab, Toast, Tooltip };\n//# sourceMappingURL=bootstrap.esm.js.map\n","import { Carousel as _Carousel } from \"bootstrap\";\n// import { CarouselOption } from \"../interfaces.js\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/carousel.js\n */\nexport class Carousel extends _Carousel {}\n\n// /**\n//  * ------------------------------------------------------------------------\n//  * Constants\n//  * ------------------------------------------------------------------------\n//  */\n\n// export const NAME = \"carousel\";\n// export const DATA_KEY = \"bs.carousel\";\n// export const EVENT_KEY = `.${DATA_KEY}`;\n// export const DATA_API_KEY = \".data-api\";\n\n// export const ARROW_LEFT_KEY = \"ArrowLeft\";\n// export const ARROW_RIGHT_KEY = \"ArrowRight\";\n// export const TOUCHEVENT_COMPAT_WAIT = 500; // Time for mouse compat events to fire after touch\n// export const SWIPE_THRESHOLD = 40;\n\n// export const Default: CarouselOption = {\n//   interval: 5000,\n//   keyboard: true,\n//   slide: false,\n//   pause: \"hover\",\n//   wrap: true,\n//   touch: true,\n// };\n\n// export const DefaultType = {\n//   interval: \"(number|boolean)\",\n//   keyboard: \"boolean\",\n//   slide: \"(boolean|string)\",\n//   pause: \"(string|boolean)\",\n//   wrap: \"boolean\",\n//   touch: \"boolean\",\n// };\n\n// export const DIRECTION_NEXT = \"next\";\n// export const DIRECTION_PREV = \"prev\";\n// export const DIRECTION_LEFT = \"left\";\n// export const DIRECTION_RIGHT = \"right\";\n\n// export const EVENT_SLIDE = `slide${EVENT_KEY}`;\n// export const EVENT_SLID = `slid${EVENT_KEY}`;\n// export const EVENT_KEYDOWN = `keydown${EVENT_KEY}`;\n// export const EVENT_MOUSEENTER = `mouseenter${EVENT_KEY}`;\n// export const EVENT_MOUSELEAVE = `mouseleave${EVENT_KEY}`;\n// export const EVENT_TOUCHSTART = `touchstart${EVENT_KEY}`;\n// export const EVENT_TOUCHMOVE = `touchmove${EVENT_KEY}`;\n// export const EVENT_TOUCHEND = `touchend${EVENT_KEY}`;\n// export const EVENT_POINTERDOWN = `pointerdown${EVENT_KEY}`;\n// export const EVENT_POINTERUP = `pointerup${EVENT_KEY}`;\n// export const EVENT_DRAG_START = `dragstart${EVENT_KEY}`;\n// export const EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`;\n// export const EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`;\n\n// export const CLASS_NAME_CAROUSEL = \"carousel\";\n// export const CLASS_NAME_ACTIVE = \"active\";\n// export const CLASS_NAME_SLIDE = \"slide\";\n// export const CLASS_NAME_END = \"carousel-item-end\";\n// export const CLASS_NAME_START = \"carousel-item-start\";\n// export const CLASS_NAME_NEXT = \"carousel-item-next\";\n// export const CLASS_NAME_PREV = \"carousel-item-prev\";\n// export const CLASS_NAME_POINTER_EVENT = \"pointer-event\";\n\n// export const SELECTOR_ACTIVE = \".active\";\n// export const SELECTOR_ACTIVE_ITEM = \".active.carousel-item\";\n// export const SELECTOR_ITEM = \".carousel-item\";\n// export const SELECTOR_ITEM_IMG = \".carousel-item img\";\n// export const SELECTOR_NEXT_PREV = \".carousel-item-next, .carousel-item-prev\";\n// export const SELECTOR_INDICATORS = \".carousel-indicators\";\n// export const SELECTOR_INDICATOR = \"[data-bs-target]\";\n// export const SELECTOR_DATA_SLIDE = \"[data-bs-slide], [data-bs-slide-to]\";\n// export const SELECTOR_DATA_RIDE = '[data-bs-ride=\"carousel\"]';\n\n// export const POINTER_TYPE_TOUCH = \"touch\";\n// export const POINTER_TYPE_PEN = \"pen\";\n","import { Collapse as _Collapse } from \"bootstrap\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/collapse.js\n */\nexport class Collapse extends _Collapse {\n  static CLASS_NAME_SHOW = \"show\";\n  static CLASS_NAME_COLLAPSE = \"collapse\";\n  static CLASS_NAME_COLLAPSING = \"collapsing\";\n  static CLASS_NAME_COLLAPSED = \"collapsed\";\n  static SELECTOR_ACTIVES = \".show, .collapsing\";\n  static SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"collapse\"]';\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { Dropdown } from \"../../services/dropdown.js\";\nimport { Dropdown as BSDropdown } from \"bootstrap\";\nimport { JsxBs5DropdownProps } from \"../../types/jsx/jsx-dropdown-props.js\";\n\ninterface Scope extends Partial<BSDropdown.Options> {\n  toggle: Bs5DropdownComponent[\"toggle\"];\n  show: Bs5DropdownComponent[\"show\"];\n  hide: Bs5DropdownComponent[\"hide\"];\n  update: Bs5DropdownComponent[\"update\"];\n  isShown: boolean;\n}\n\nexport class Bs5DropdownComponent extends Component {\n  public static tagName = \"bs5-dropdown\";\n\n  public scope: Scope = {\n    toggle: this.toggle,\n    show: this.show,\n    hide: this.hide,\n    update: this.update,\n    isShown: false,\n  };\n\n  public dropdown?: Dropdown;\n  protected toggler: HTMLElement | Bs5DropdownComponent | null = null;\n\n  static get observedAttributes(): (keyof JsxBs5DropdownProps)[] {\n    return [\n      \"offset\",\n      \"boundary\",\n      \"reference\",\n      \"display\",\n      \"popper-config\",\n      \"auto-close\",\n    ];\n  }\n\n  constructor() {\n    super();\n  }\n\n  public isShown() {\n    // TODO: Do not access private methods\n    return (this.dropdown as any)?._isShown() || false;\n  }\n\n  public toggle(event: Event, ctx: Scope, el: any) {\n    if (!this.dropdown) {\n      throw new Error(\"Dropdown not ready!\");\n    }\n\n    // Only call toggle if this is not called by the dropdown service itself which is the case on the toggler element\n    if (el !== this.toggler) {\n      this.dropdown.toggle();\n    }\n  }\n\n  public show() {\n    if (!this.dropdown) {\n      throw new Error(\"Dropdown not ready!\");\n    }\n\n    this.dropdown.show();\n  }\n\n  public hide() {\n    if (!this.dropdown) {\n      throw new Error(\"Dropdown not ready!\");\n    }\n\n    this.dropdown.hide();\n  }\n\n  public update() {\n    if (!this.dropdown) {\n      throw new Error(\"Dropdown not ready!\");\n    }\n\n    this.dropdown.update();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5DropdownComponent.observedAttributes);\n  }\n\n  async afterBind() {\n    this.initDropdown();\n    this.addEventListeners();\n    await super.afterBind();\n  }\n\n  protected initDropdown() {\n    this.toggler = this.classList.contains(\"dropdown-toggle\")\n      ? this\n      : this.querySelector<HTMLElement>(\".dropdown-toggle\") || this;\n\n    // To detect this element as an dropdown by the bootstrap logic\n    this.toggler.dataset.bsToggle = \"dropdown\";\n    this.dropdown = new Dropdown(this.toggler, this.scope);\n    this.dropdown.hide();\n    this.scope.isShown = this.isShown();\n  }\n\n  protected _onShown() {\n    console.debug(\"onShown\");\n    this.scope.isShown = this.isShown();\n  }\n\n  protected onShown = this._onShown.bind(this);\n\n  protected _onHidden() {\n    console.debug(\"onHidden\");\n    this.scope.isShown = this.isShown();\n  }\n\n  protected onHidden = this._onHidden.bind(this);\n\n  protected addEventListeners() {\n    this.toggler?.addEventListener(Dropdown.EVENT_SHOWN, this.onShown);\n    this.toggler?.addEventListener(Dropdown.EVENT_HIDDEN, this.onHidden);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Dropdown as _Dropdown } from \"bootstrap\";\nimport { Bs5DropdownComponent } from \"../components/bs5-dropdown/bs5-dropdown.component.js\";\n\nconst DROPDOWN_DATA_API_KEY = \".data-api\";\n\nconst DROPDOWN_ARROW_DOWN_KEY = \"ArrowDown\";\nconst DROPDOWN_ARROW_UP_KEY = \"ArrowUp\";\nconst DROPDOWN_ESCAPE_KEY = \"Escape\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/dropdown.js\n */\nexport class Dropdown extends _Dropdown {\n  public static hideAll() {\n    (this as any).clearMenus(); // TODO type\n  }\n\n  public static getAllComponents() {\n    const dropdownEls = document.querySelectorAll<Bs5DropdownComponent>(\n      Bs5DropdownComponent.tagName\n    );\n    return Array.from(dropdownEls);\n  }\n\n  public static hideAllComponents() {\n    const dropdownEls = this.getAllComponents();\n\n    for (const dropdownEl of Array.from(dropdownEls)) {\n      dropdownEl.dropdown?.hide();\n    }\n  }\n\n  constructor(element: string | Element, options?: Partial<_Dropdown.Options>) {\n    super(element, options);\n  }\n\n  // static NAME = \"dropdown\";\n  // static get DATA_KEY() {\n  //   return DROPDOWN_DATA_KEY;\n  // }\n  // static EVENT_KEY = Dropdown.EVENT_KEY;\n  static DATA_API_KEY = DROPDOWN_DATA_API_KEY;\n\n  static ESCAPE_KEY = DROPDOWN_ESCAPE_KEY;\n  static SPACE_KEY = \"Space\";\n  static TAB_KEY = \"Tab\";\n  static ARROW_UP_KEY = DROPDOWN_ARROW_UP_KEY;\n  static ARROW_DOWN_KEY = DROPDOWN_ARROW_DOWN_KEY;\n  static RIGHT_MOUSE_BUTTON = 2; // MouseEvent.button value for the secondary button, usually the right button\n\n  static REGEXP_KEYDOWN = new RegExp(\n    `${DROPDOWN_ARROW_UP_KEY}|${DROPDOWN_ARROW_DOWN_KEY}|${DROPDOWN_ESCAPE_KEY}`\n  );\n\n  static EVENT_HIDE = `hide${Dropdown.EVENT_KEY}`;\n  static EVENT_HIDDEN = `hidden${Dropdown.EVENT_KEY}`;\n  static EVENT_SHOW = `show${Dropdown.EVENT_KEY}`;\n  static EVENT_SHOWN = `shown${Dropdown.EVENT_KEY}`;\n  static EVENT_CLICK = `click${Dropdown.EVENT_KEY}`;\n  static EVENT_CLICK_DATA_API = `click${Dropdown.EVENT_KEY}${DROPDOWN_DATA_API_KEY}`;\n  static EVENT_KEYDOWN_DATA_API = `keydown${Dropdown.EVENT_KEY}${DROPDOWN_DATA_API_KEY}`;\n  static EVENT_KEYUP_DATA_API = `keyup${Dropdown.EVENT_KEY}${DROPDOWN_DATA_API_KEY}`;\n\n  static CLASS_NAME_DISABLED = \"disabled\";\n  static CLASS_NAME_SHOW = \"show\";\n  static CLASS_NAME_DROPUP = \"dropup\";\n  static CLASS_NAME_DROPEND = \"dropend\";\n  static CLASS_NAME_DROPSTART = \"dropstart\";\n  static CLASS_NAME_NAVBAR = \"navbar\";\n\n  static SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"dropdown\"]';\n  static SELECTOR_FORM_CHILD = \".dropdown form\";\n  static SELECTOR_MENU = \".dropdown-menu\";\n  static SELECTOR_NAVBAR_NAV = \".navbar-nav\";\n  static SELECTOR_VISIBLE_ITEMS =\n    \".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)\";\n}\n","export enum CollapseEvents {\n  /**\n   * This event fires immediately when the show instance method is called.\n   */\n  show = \"show.bs.collapse\",\n\n  /**\n   * This event is fired when a collapse element has been made visible to the user (will wait for CSS transitions to complete).\n   */\n  shown = \"shown.bs.collapse\",\n\n  /**\n   * This event is fired immediately when the hide method has been called.\n   */\n  hide = \"hide.bs.collapse\",\n\n  /**\n   * This event is fired when a collapse element has been hidden from the\n   * user (will wait for CSS transitions to complete).\n   */\n  hidden = \"hidden.bs.collapse\",\n}\n","import type { NotificationEventBinderData } from \"./notification-event-binder-data.js\";\nexport abstract class Notification implements NotificationEventBinderData {\n  type: string;\n  title?: string;\n\n  channel?: string;\n  $event?: CustomEvent;\n  $context?: any;\n\n  constructor(type: string, title?: string) {\n    this.type = type;\n    this.title = title;\n  }\n}\n","import { Notification, ModalNotificationButton } from \"../types/index.js\";\nimport { Modal } from \"../services/modal.js\";\n\nexport class ModalNotification extends Notification {\n  message: string;\n  iconUrl?: string;\n\n  focus: boolean;\n  keyboard: boolean;\n  backdrop: boolean | \"static\";\n\n  buttons: ModalNotificationButton[] = [];\n\n  modalService?: Modal;\n  contextualClass?: string;\n\n  constructor({\n    title,\n    message,\n    iconUrl,\n\n    focus,\n    keyboard,\n    backdrop,\n\n    buttons,\n\n    modalService,\n    contextualClass,\n    channel,\n    $event,\n    $context,\n  }: {\n    title?: string;\n    message: string;\n    iconUrl?: string;\n\n    focus?: boolean;\n    keyboard?: boolean;\n    backdrop?: boolean | \"static\";\n    show?: boolean;\n\n    buttons?: ModalNotificationButton[];\n\n    modalService?: Modal;\n    contextualClass?: string;\n    channel?: string;\n    $event?: CustomEvent;\n    $context?: any;\n  }) {\n    super(\"modal\", title);\n    this.message = message;\n    this.iconUrl = iconUrl;\n\n    this.focus = focus || false;\n    this.keyboard = keyboard || true;\n    this.backdrop = backdrop || true;\n\n    this.buttons = buttons || [];\n\n    this.modalService = modalService;\n    this.contextualClass = contextualClass;\n    this.channel = channel;\n    this.$event = $event;\n    this.$context = $context;\n  }\n}\n","import { Modal as _Modal } from \"bootstrap\";\n\nconst DATA_KEY = \"bs.modal\";\nconst DATA_API_KEY = \".data-api\";\nconst EVENT_KEY = `.${DATA_KEY}`;\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/modal.js\n */\nexport class Modal extends _Modal {\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n\n  static get DATA_API_KEY() {\n    return DATA_API_KEY;\n  }\n\n  static get EVENT_KEY() {\n    return EVENT_KEY;\n  }\n\n  // static NAME = \"modal\";\n\n  static ESCAPE_KEY = \"Escape\";\n\n  static EVENT_HIDE = `hide${EVENT_KEY}`;\n  static EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`;\n  static EVENT_HIDDEN = `hidden${EVENT_KEY}`;\n  static EVENT_SHOW = `show${EVENT_KEY}`;\n  static EVENT_SHOWN = `shown${EVENT_KEY}`;\n  static EVENT_FOCUSIN = `focusin${EVENT_KEY}`;\n  static EVENT_RESIZE = `resize${EVENT_KEY}`;\n  static EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`;\n  static EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`;\n  static EVENT_MOUSEUP_DISMISS = `mouseup.dismiss${EVENT_KEY}`;\n  static EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`;\n  static EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`;\n\n  static CLASS_NAME_SCROLLBAR_MEASURER = \"modal-scrollbar-measure\";\n  static CLASS_NAME_BACKDROP = \"modal-backdrop\";\n  static CLASS_NAME_OPEN = \"modal-open\";\n  static CLASS_NAME_FADE = \"fade\";\n  static CLASS_NAME_SHOW = \"show\";\n  static CLASS_NAME_STATIC = \"modal-static\";\n\n  static SELECTOR_DIALOG = \".modal-dialog\";\n  static SELECTOR_MODAL_BODY = \".modal-body\";\n  static SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"modal\"]';\n  static SELECTOR_DATA_DISMISS = '[data-bs-dismiss=\"modal\"]';\n  static SELECTOR_FIXED_CONTENT =\n    \".fixed-top, .fixed-bottom, .is-fixed, .sticky-top\";\n  static SELECTOR_STICKY_CONTENT = \".sticky-top\";\n}\n","import { Tooltip as _Tooltip } from \"bootstrap\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/tooltip.js\n */\nexport class Tooltip extends _Tooltip {}\n","import { Popover as _Popover } from \"bootstrap\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/popover.js\n */\nexport class Popover extends _Popover {}\n","import { EventDispatcher } from \"@ribajs/events\";\nimport { themeChoices } from \"../constants/index.js\";\nimport { Bs5Service } from \"./bs5.service.js\";\n\nimport type {\n  ThemeChoice,\n  ThemeData,\n  ThemeChangedCallback,\n} from \"../types/index.js\";\n\n/**\n * The theme service is used to change and observe the color scheme from the OS or the user.\n * Can be dark or light respectively.\n * @credits https://stackoverflow.com/questions/56393880/how-do-i-detect-dark-mode-using-javascript\n */\nexport class ThemeService {\n  protected eventDispatcher = EventDispatcher.getInstance();\n\n  protected static instance?: ThemeService;\n  protected bs5 = Bs5Service.getSingleton();\n  public current: ThemeChoice = \"os\";\n\n  protected constructor() {\n    this.addEventListeners();\n    const data = this.init();\n    const selectEl = document.getElementById(\n      \"theme\"\n    ) as HTMLSelectElement | null;\n\n    if (selectEl) this.select(data.choice, selectEl);\n  }\n\n  public static getSingleton() {\n    if (ThemeService.instance) {\n      return ThemeService.instance;\n    }\n\n    return this.setSingleton();\n  }\n\n  public static setSingleton() {\n    if (ThemeService.instance) {\n      throw new Error(`Singleton of ThemeService already defined!`);\n    }\n    ThemeService.instance = new ThemeService();\n    return ThemeService.instance;\n  }\n\n  protected addEventListeners() {\n    // To watch for changes\n    window\n      .matchMedia(\"(prefers-color-scheme: dark)\")\n      .addEventListener(\"change\", (e: MediaQueryListEvent) => {\n        this.triggerChange(e);\n      });\n  }\n\n  /**\n   * Sets the last selected theme (which was stored in the localStorage)\n   * @param choices The theme theme-(light, dark or os)\n   * @returns The selected theme or or `null` in case of an error\n   */\n  public init() {\n    let savedTheme: ThemeChoice = \"os\";\n    if (this.bs5.options.allowStoreDataInBrowser) {\n      savedTheme = (localStorage.getItem(\"bs5-theme\") || \"os\") as ThemeChoice;\n    }\n\n    return this.set(savedTheme);\n  }\n\n  /**\n   * Selects the option of a global theme select element\n   * @param selectEl\n   * @param choice\n   */\n  public select(choice: ThemeChoice, selectEl: HTMLSelectElement) {\n    if (selectEl?.nodeName === \"SELECT\") {\n      selectEl.value = choice;\n    }\n  }\n\n  /**\n   * Get the default data for internal use.\n   * The default is the system light theme.\n   * @returns\n   */\n  protected getDefaultData(): ThemeData {\n    return {\n      supported: !!window.matchMedia, // TODO more checks?\n      isDark: false,\n      isLight: false,\n      systemIsDark: false,\n      systemIsLight: true,\n      bySystem: true,\n      byUser: false,\n      choice: \"os\",\n    };\n  }\n\n  protected triggerChange(e?: MediaQueryListEvent, oldValue?: ThemeData) {\n    if (!oldValue) {\n      oldValue = this.getDefaultData();\n    }\n    const newValue = this.getScheme();\n    this.eventDispatcher.trigger(\"theme-change\", {\n      oldValue,\n      newValue,\n    });\n    return newValue;\n  }\n\n  /**\n   * Adds an one time event listener triggered on theme change\n   * @param cb\n   * @param thisContext\n   */\n  onceChange(cb: ThemeChangedCallback, thisContext?: any): void {\n    this.eventDispatcher.once(\"theme-change\", cb, thisContext);\n  }\n  /**\n   * Adds an event listener triggered on theme change\n   * @param cb\n   * @param thisContext\n   */\n  onChange(cb: ThemeChangedCallback, thisContext?: any): void {\n    this.eventDispatcher.on(\"theme-change\", cb, thisContext);\n  }\n  /**\n   * Removes the theme changed event listener\n   * @param cb\n   * @param thisContext\n   */\n  offChange(cb?: ThemeChangedCallback, thisContext?: any): void {\n    this.eventDispatcher.off(\"theme-change\", cb, thisContext);\n  }\n\n  /**\n   * Sets the theme class to the <html>.\n   * - `os` means that the theme will be used by the operating system (which corresponds to light or dark)\n   * - `light` means that the light theme will be used\n   * - `dark` means that the dark theme will be used\n   * @param choices\n   * @returns The selected theme\n   */\n  set(newColorScheme: ThemeChoice): ThemeData {\n    const oldScheme = this.getScheme();\n    if (!themeChoices.includes(newColorScheme)) {\n      console.warn(\n        `Unsupported theme \"${newColorScheme}\", set instead the default \"os\".`\n      );\n      newColorScheme = \"os\";\n    }\n    if (this.bs5.options.allowStoreDataInBrowser) {\n      localStorage.setItem(\"bs5-theme\", newColorScheme);\n    }\n\n    if (newColorScheme === \"os\") {\n      const newScheme = this.getScheme(newColorScheme);\n      document.documentElement.setAttribute(\n        \"data-bs-theme\",\n        newScheme.isDark ? \"dark\" : \"light\"\n      );\n    } else {\n      document.documentElement.setAttribute(\"data-bs-theme\", newColorScheme);\n    }\n    this.current = newColorScheme;\n    return this.triggerChange(undefined, oldScheme);\n  }\n\n  getScheme(choice: ThemeChoice = this.current): ThemeData {\n    const data = this.getDefaultData();\n    data.systemIsDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\"\n    ).matches;\n    data.systemIsLight = !data.systemIsDark;\n\n    if (choice === \"os\") {\n      data.bySystem = true;\n      data.byUser = false;\n      data.choice = \"os\";\n      data.isDark = data.systemIsDark;\n      data.isLight = data.systemIsLight;\n    } else {\n      data.bySystem = false;\n      data.byUser = true;\n      if (choice === \"dark\") {\n        data.isDark = true;\n        data.choice = \"dark\";\n      }\n      if (choice === \"light\") {\n        data.isLight = true;\n        data.choice = \"light\";\n      }\n    }\n    return data;\n  }\n}\n","import { Toast } from \"./index.js\";\nimport { Notification } from \"../types/notification.js\";\n\nexport class ToastNotification extends Notification {\n  message: string;\n  iconUrl?: string;\n  delay?: number;\n  autoHide?: boolean;\n  animation?: boolean;\n  toastService?: Toast;\n  contextualClass?: string;\n\n  constructor({\n    title,\n    message,\n    iconUrl,\n    delay,\n    autoHide,\n    animation,\n    toastService,\n    contextualClass,\n    channel,\n    $event,\n    $context,\n  }: {\n    title?: string;\n    message: string;\n    iconUrl?: string;\n    delay?: number;\n    autoHide?: boolean;\n    animation?: boolean;\n    toastService?: Toast;\n    contextualClass?: string;\n    channel?: string;\n    $event?: CustomEvent;\n    $context?: any;\n  }) {\n    super(\"toast\", title);\n    this.message = message;\n    this.iconUrl = iconUrl;\n    this.delay = delay;\n    this.autoHide = autoHide;\n    this.animation = animation;\n    this.toastService = toastService;\n    this.contextualClass = contextualClass;\n    this.channel = channel;\n    this.$event = $event;\n    this.$context = $context;\n  }\n}\n","import { Toast as _Toast } from \"bootstrap\";\n\n// const DATA_KEY = \"bs.toast\";\n// const EVENT_KEY = `.${DATA_KEY}`;\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/toast.js\n */\nexport class Toast extends _Toast {\n  // static NAME = \"toast\";\n  // static get DATA_KEY() {\n  //   return DATA_KEY;\n  // }\n  // static get EVENT_KEY() {\n  //   return EVENT_KEY;\n  // }\n\n  static EVENT_CLICK_DISMISS = `click.dismiss${Toast.EVENT_KEY}`;\n  static EVENT_HIDE = `hide${Toast.EVENT_KEY}`;\n  static EVENT_HIDDEN = `hidden${Toast.EVENT_KEY}`;\n  static EVENT_SHOW = `show${Toast.EVENT_KEY}`;\n  static EVENT_SHOWN = `shown${Toast.EVENT_KEY}`;\n\n  static CLASS_NAME_FADE = \"fade\";\n  static CLASS_NAME_HIDE = \"hide\";\n  static CLASS_NAME_SHOW = \"show\";\n  static CLASS_NAME_SHOWING = \"showing\";\n}\n","import { BasicComponent, Binder, View } from \"@ribajs/core\";\nimport { Bs5Service } from \"../services/bs5.service.js\";\nimport { parseJsonString, jsonStringify, camelCase } from \"@ribajs/utils\";\n\nexport abstract class Bs5AbstractBreakpointBinder<\n  E extends HTMLElement = HTMLElement\n> extends Binder<string, E> {\n  protected abstract defaultAttributeBinder: Binder<\n    any,\n    HTMLElement | BasicComponent\n  >;\n  protected bs5: Bs5Service;\n  protected breakpoint: string;\n  protected attributeName: string;\n  protected val?: any;\n\n  constructor(\n    view: View,\n    el: E,\n    type: string | null,\n    name: string,\n    keypath: string | undefined,\n    formatters: string[] | null,\n    identifier: string | null\n  ) {\n    super(view, el, type, name, keypath, formatters, identifier);\n    this.bs5 = Bs5Service.getSingleton();\n    if (this.args.length !== 2) {\n      throw new Error(\n        \"The Bs5AttributeBreakpointBinder was not initialized correctly!\"\n      );\n    }\n    const breakpoint = this.args[0].toString();\n    const attributeName = this.args[1].toString();\n    if (!this.bs5.breakpointNames.includes(breakpoint)) {\n      throw new Error(\n        `Unknown breakpoint \"${breakpoint}\"! You can define breakpoints at the initialization of the Bs5Module.`\n      );\n    }\n    this.breakpoint = breakpoint;\n    this.attributeName = attributeName;\n  }\n\n  protected onBreakpointChanges(/* activeBreakpoint: Breakpoint */) {\n    this.setAttributeOnMatch();\n  }\n\n  /**\n   * Sets the attribute if the current breakpoint matches\n   * @returns\n   */\n  protected setAttributeOnMatch() {\n    if (!this.bs5.activeBreakpoint) return;\n    if (this.isBreakpointMatch(this.breakpoint)) {\n      return this.defaultAttributeBinder.routine(this.el, this.val);\n    }\n    if (this.breakpointUnhandled(this.bs5.activeBreakpoint.name)) {\n      // Remove attribute\n      this.defaultAttributeBinder.routine(this.el, undefined);\n    }\n  }\n\n  /**\n   * Returns `true` if the current active breakpoint matches the breakpoints handled by this binder\n   * @param breakpoint\n   * @returns\n   */\n  protected isBreakpointMatch(breakpoint = this.breakpoint) {\n    if (!this.bs5.activeBreakpoint) {\n      return false;\n    }\n\n    if (this.bs5.activeBreakpoint.name === breakpoint) {\n      return true;\n    }\n\n    const myBreakpoints = this.myBreakpoints(breakpoint);\n    if (myBreakpoints.includes(this.bs5.activeBreakpoint.name)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns all breakpoints handled by this binder.\n   * This binder handles multiple breakpoints if other larger breakpoints exists but are not handled by another binder.\n   * @returns\n   */\n  protected myBreakpoints(breakpoint = this.breakpoint) {\n    const myBreakpoints: string[] = [breakpoint];\n    let nextBreakpoint: string | null = breakpoint;\n    while (nextBreakpoint) {\n      nextBreakpoint = this.bs5.getNextBreakpointByName(nextBreakpoint);\n\n      if (!nextBreakpoint || this.breakpointHandledByAnother(nextBreakpoint)) {\n        break;\n      }\n\n      myBreakpoints.push(nextBreakpoint);\n    }\n    return myBreakpoints;\n  }\n\n  /**\n   * Check if another breakpoint (mostly the next breakpoint) is handled by another binder\n   */\n  protected breakpointHandledByAnother(name: string) {\n    const handledBreakpoints = this.getHandledBreakpoints();\n    if (handledBreakpoints.includes(name)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Check if another breakpoint (mostly the previous breakpoint) is handled by no other breakpoint binders.\n   * These are all breakpoints that are smaller than the minimum breakpoint.\n   * I.e. for these breakpoints there is no binder, neither this one nor another one.\n   * @returns\n   */\n  protected breakpointUnhandled(breakpoint: string) {\n    let prevBreakpoint: string | null = breakpoint;\n\n    // Check if all smaller breakpoints are unhandled\n    let unhandled = true;\n    while (prevBreakpoint && unhandled) {\n      if (this.breakpointHandledByAnother(prevBreakpoint)) {\n        unhandled = false;\n        break;\n      }\n\n      prevBreakpoint = this.bs5.getPrevBreakpointByName(prevBreakpoint);\n\n      if (!prevBreakpoint) {\n        break;\n      }\n    }\n    return unhandled;\n  }\n\n  /**\n   * Used to check if there are more binders for other breakpoints\n   **/\n  protected addToHandledBreakpoints() {\n    const handledBreakpoints = this.getHandledBreakpoints();\n    handledBreakpoints.push(this.breakpoint);\n    this.el.dataset[camelCase(this.attributeName)] =\n      jsonStringify(handledBreakpoints);\n  }\n\n  /**\n   * Get all handled breakpoints.\n   * These are the own but also those of other binders.\n   * @returns\n   */\n  protected getHandledBreakpoints() {\n    const handledBreakpoints: string[] = parseJsonString(\n      this.el.dataset[camelCase(this.attributeName)] || \"[]\"\n    );\n    if (!Array.isArray(handledBreakpoints)) {\n      throw new Error(\"breakpoints dataset has unsupported values!\");\n    }\n    return handledBreakpoints;\n  }\n\n  bind(el: HTMLElement) {\n    this.bs5.on(\"breakpoint:changed\", this.onBreakpointChanges, this);\n    if (typeof this.defaultAttributeBinder.bind === \"function\") {\n      this.defaultAttributeBinder.bind(el);\n    }\n  }\n\n  routine(el: HTMLElement, newValue: any) {\n    this.addToHandledBreakpoints();\n    this.val = newValue;\n    this.setAttributeOnMatch();\n  }\n\n  unbind(el: HTMLElement) {\n    this.bs5?.off(\"breakpoint:changed\", this.onBreakpointChanges, this);\n    if (typeof this.defaultAttributeBinder.unbind === \"function\") {\n      this.defaultAttributeBinder.unbind(el);\n    }\n  }\n}\n","import { AttributeBinder, View } from \"@ribajs/core\";\nimport { Bs5AbstractBreakpointBinder } from \"./bs5-abstract-breakpoint.binder.js\";\n\n/**\n * Responsive attribute breakpoint binder\n * This binder is used to pass attributes to an element that should only be set at certain breakpoints (viewport widths).\n * @example\n * ```html\n *  <img\n *    rv-bs5-attr-xxs-src=\"'https://picsum.photos/100'\"\n *    rv-bs5-attr-xs-src=\"'https://picsum.photos/200'\"\n *    rv-bs5-attr-sm-src=\"'https://picsum.photos/500/200'\"\n *    rv-bs5-attr-md-src=\"'https://picsum.photos/1000/500'\"\n *\n *    rv-bs5-attr-xxs-alt=\"'Image for very small displays'\"\n *    rv-bs5-attr-xs-src=\"'Image for small displays'\"\n *    rv-bs5-attr-sm-src=\"'Image for smartphones'\"\n *    rv-bs5-attr-md-src=\"'Image for tablets and small laptops'\"\n *  />\n * ```\n */\nexport class Bs5AttributeBreakpointBinder extends Bs5AbstractBreakpointBinder<HTMLElement> {\n  static key = \"bs5-attr-*-*\";\n\n  defaultAttributeBinder: AttributeBinder;\n\n  constructor(\n    view: View,\n    el: HTMLElement,\n    type: string | null,\n    name: string,\n    keypath: string | undefined,\n    formatters: string[] | null,\n    identifier: string | null\n  ) {\n    super(view, el, type, name, keypath, formatters, identifier);\n    this.defaultAttributeBinder = new AttributeBinder(\n      view,\n      el,\n      this.attributeName,\n      name,\n      keypath,\n      formatters,\n      \"*\"\n    );\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Collapse } from \"../services/collapse.js\";\nimport { onRoute } from \"@ribajs/utils/src/url\";\n\n/**\n *\n * @see https://getbootstrap.com/docs/4.1/components/collapse/\n * @see https://github.com/twbs/bootstrap/blob/v4-dev/js/src/collapse.js\n */\nexport class CollapseOnUrlBinder extends Binder<string, HTMLInputElement> {\n  static key = \"bs5-collapse-on-url\";\n\n  private dispatcher = EventDispatcher.getInstance(\"main\");\n  private collapseService?: Collapse;\n  private url?: string;\n\n  private _checkURL() {\n    if (this.url && onRoute(this.url)) {\n      this.collapseService?.hide();\n      return true;\n    }\n    // collapseService.show();\n    return false;\n  }\n\n  private checkURL = this._checkURL.bind(this);\n\n  bind(el: HTMLElement) {\n    this.collapseService = new Collapse(el, { toggle: false });\n  }\n\n  unbind() {\n    if (this.checkURL) {\n      this.dispatcher.off(\"newPageReady\", this.checkURL);\n    }\n  }\n\n  routine(el: HTMLElement, url: string) {\n    this.url = url;\n    if (this.checkURL) {\n      this.dispatcher.off(\"newPageReady\", this.checkURL);\n    }\n    this.dispatcher.on(\"newPageReady\", this.checkURL);\n  }\n}\n","import { BasicComponent, ComponentAttributeBinder, View } from \"@ribajs/core\";\nimport { Bs5AbstractBreakpointBinder } from \"./bs5-abstract-breakpoint.binder.js\";\n\n/**\n * Responsive component attribute breakpoint binder\n * This binder is used to pass attributes to an Riba Component (directly) that should only be set at certain breakpoints (viewport widths).\n * @example\n * ```html\n *  <custom-image-component\n *    rv-bs5-co-xxs-src=\"'https://picsum.photos/100'\"\n *    rv-bs5-co-xs-src=\"'https://picsum.photos/200'\"\n *    rv-bs5-co-sm-src=\"'https://picsum.photos/500/200'\"\n *    rv-bs5-co-md-src=\"'https://picsum.photos/1000/500'\"\n *\n *    rv-bs5-co-xxs-alt=\"'Image for very small displays'\"\n *    rv-bs5-co-xs-src=\"'Image for small displays'\"\n *    rv-bs5-co-sm-src=\"'Image for smartphones'\"\n *    rv-bs5-co-md-src=\"'Image for tablets and small laptops'\"\n *  />\n * ```\n */\nexport class Bs5ComponentAttributeBreakpointBinder extends Bs5AbstractBreakpointBinder<BasicComponent> {\n  static key = \"bs5-co-*-*\";\n\n  defaultAttributeBinder: ComponentAttributeBinder;\n\n  constructor(\n    view: View,\n    el: BasicComponent,\n    type: string | null,\n    name: string,\n    keypath: string | undefined,\n    formatters: string[] | null,\n    identifier: string | null\n  ) {\n    super(view, el, type, name, keypath, formatters, identifier);\n    this.defaultAttributeBinder = new ComponentAttributeBinder(\n      view,\n      el,\n      `co-${this.attributeName}`,\n      name,\n      keypath,\n      formatters,\n      ComponentAttributeBinder.key\n    );\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { Collapse } from \"../services/collapse.js\";\n\n/**\n *\n */\nexport class ToggleCollapseOnEventBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-toggle-collapse-on-*\";\n\n  private targets = new Map<HTMLElement, Collapse>();\n\n  private _onEvent(event: Event) {\n    event.preventDefault();\n    for (const collapseService of this.targets.values()) {\n      collapseService.toggle();\n    }\n  }\n\n  private onEvent = this._onEvent.bind(this);\n\n  bind(el: HTMLElement) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    const eventName = this.args[0] as string;\n    el.addEventListener(eventName, this.onEvent);\n  }\n\n  unbind() {\n    const eventName = this.args[0] as string;\n    this.el.removeEventListener(eventName, this.onEvent);\n  }\n\n  routine(el: HTMLElement, targetSelector: string) {\n    const newTargets = Array.from(\n      document.querySelectorAll<HTMLElement>(targetSelector)\n    );\n\n    if (newTargets.length <= 0) {\n      console.warn(\n        `[toggleCollapseOnEventBinder] No element with selector \"${targetSelector}\" found.`\n      );\n    }\n\n    for (const target of this.targets.keys()) {\n      if (!newTargets.find((x) => x === target)) {\n        this.targets.get(target)?.dispose();\n        this.targets.delete(target);\n      }\n    }\n\n    for (const target of newTargets) {\n      if (!this.targets.has(target)) {\n        this.targets.set(target, new Collapse(target, { toggle: false }));\n      }\n    }\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { Dropdown } from \"../services/dropdown.js\";\nimport { Dropdown as BSDropdown } from \"bootstrap\";\n\n/**\n *\n * @see https://getbootstrap.com/docs/5.0/components/dropdowns/#via-javascript\n */\nexport class DropdownBinder extends Binder<\n  Partial<BSDropdown.Options>,\n  HTMLInputElement\n> {\n  static key = \"bs5-dropdown\";\n\n  private toggler?: HTMLButtonElement | HTMLAnchorElement;\n\n  private dropdownService?: Dropdown;\n\n  bind(el: HTMLElement) {\n    this.toggler = ((el.classList.contains(\"dropdown-toggle\")\n      ? el\n      : el.querySelector(\".dropdown-toggle\")) || el) as\n      | HTMLButtonElement\n      | HTMLAnchorElement;\n  }\n\n  routine(el: HTMLElement, option = {}) {\n    if (!this.toggler) {\n      throw new Error(\"No dropdown toggle element found!\");\n    }\n    if (this.dropdownService) {\n      const dropdownService: Dropdown = this.dropdownService;\n      dropdownService.dispose();\n      // To detect this element as an dropdown by the bootstrap logic\n      this.toggler.dataset.bsToggle = \"\";\n    }\n    const dropdownService = new Dropdown(this.toggler, option);\n    // To detect this element as an dropdown by the bootstrap logic\n    this.toggler.dataset.bsToggle = \"dropdown\";\n    this.dropdownService = dropdownService;\n    this.dropdownService.hide();\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Collapse } from \"../services/collapse.js\";\nimport { onRoute } from \"@ribajs/utils/src/url.js\";\n\n/**\n *\n * @see https://getbootstrap.com/docs/4.1/components/collapse/\n * @see https://github.com/twbs/bootstrap/blob/v4-dev/js/src/collapse.js\n */\nexport class ExpandOnUrlBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-expand-on-url\";\n\n  routine(el: HTMLElement, url: string) {\n    const collapseService = new Collapse(el, { toggle: false });\n    const dispatcher = new EventDispatcher(\"main\");\n\n    const checkURL = (urlToCheck?: string) => {\n      if (urlToCheck && onRoute(urlToCheck)) {\n        collapseService.show();\n        return true;\n      }\n      collapseService.hide();\n      return false;\n    };\n\n    dispatcher.on(\"newPageReady\", () => checkURL(url));\n\n    checkURL(url);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { Popover, PopoverOptions } from \"@ribajs/bs5\";\n\n/**\n *\n */\nexport class PopoverBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-popover\";\n\n  private popover?: Popover;\n  private listeners: { [key: string]: EventListener } = {};\n\n  routine(el: HTMLElement, optionsOrContent: string | PopoverOptions) {\n    let options: Partial<PopoverOptions> = {};\n\n    if (typeof optionsOrContent === \"string\") {\n      options.content = optionsOrContent;\n    } else if (typeof optionsOrContent === \"object\") {\n      options = { ...optionsOrContent };\n    }\n    options.placement = options.placement || \"auto\";\n\n    const popover = new Popover(el, {\n      ...Popover.Default,\n      ...options,\n    });\n\n    // destroy previous popover if it already exists\n    if (this.popover) {\n      this.popover.dispose();\n    }\n\n    this.popover = popover;\n\n    /*\n     * Methods \"show\", \"hide\", etc. of the Popover can be called by dispatching an\n     * event `trigger-${methodName}` on the bound element.\n     * All these methods have no arguments.\n     */\n    const methodNames: (keyof typeof popover)[] = [\n      \"show\",\n      \"hide\",\n      \"toggle\",\n      \"dispose\",\n      \"enable\",\n      \"disable\",\n      \"update\", // render update\n    ];\n\n    // remove listeners of previous Popover if there already was one\n    if (this.listeners) {\n      for (const [trigger, listener] of Object.entries(this.listeners)) {\n        this.el.removeEventListener(trigger, listener as EventListener);\n      }\n    }\n\n    this.listeners = Object.create(null);\n    for (const methodName of methodNames) {\n      if (popover[methodName] && typeof popover[methodName] === \"function\") {\n        const trigger = `trigger-${String(methodName)}`;\n        const listener = (popover[methodName] as any).bind(popover);\n        this.el.addEventListener(trigger, listener);\n        this.listeners[trigger] = listener;\n      } else {\n        console.warn(\"Unknown method \" + methodName);\n      }\n    }\n  }\n\n  bind(el: HTMLElement) {\n    // inform ancestors that this popover was bound\n    // Event name in same style as the other popover CustomEvents from Bootstrap\n    el.dispatchEvent(\n      new CustomEvent(\"bound.bs.popover\", { bubbles: true, cancelable: true })\n    );\n  }\n\n  unbind() {\n    // destroy Popover if it already exists\n    if (this.popover) {\n      this.popover.dispose();\n    }\n    // remove listeners if there are any\n    if (this.listeners) {\n      for (const [trigger, listener] of Object.entries(this.listeners)) {\n        this.el.removeEventListener(trigger, listener as EventListener);\n      }\n    }\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { ToastNotification } from \"@ribajs/bs5\";\n\nexport class ShowToastOnEventBinder extends Binder<\n  ToastNotification,\n  HTMLElement\n> {\n  static key = \"show-toast-on-*\";\n\n  private toastData?: ToastNotification;\n\n  private _onEvent(event: CustomEvent) {\n    if (!this.toastData) {\n      throw new Error(\"Toast data not set!\");\n    }\n    this.toastData.$event = event;\n    this.toastData.$context = this.view.models;\n    const toastData: ToastNotification = new ToastNotification(this.toastData);\n    const notificationDispatcher = new EventDispatcher(\n      toastData.channel || \"toast\"\n    );\n    notificationDispatcher.trigger(\"show-notification\", toastData);\n  }\n\n  private onEvent = this._onEvent.bind(this);\n\n  bind(el: HTMLUnknownElement) {\n    const eventName = this.args[0] as string;\n    el.addEventListener(eventName as any, this.onEvent);\n  }\n\n  routine(el: HTMLUnknownElement, toastData: ToastNotification) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    this.toastData = toastData;\n  }\n\n  unbind(el: HTMLElement) {\n    const eventName = this.args[0] as string;\n    el.removeEventListener(eventName as any, this.onEvent);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { debounce } from \"@ribajs/utils/src/control\";\nimport { isInViewport } from \"@ribajs/utils/src/dom.js\";\n\n/**\n * scrollspy-class\n * @see https://getbootstrap.com/docs/4.1/components/scrollspy/\n */\nexport class ScrollspyClassBinder extends Binder<string, HTMLInputElement> {\n  static key = \"bs5-scrollspy-*\";\n\n  private target?: HTMLElement;\n  private className?: string;\n\n  private _onScroll() {\n    if (!this.target) {\n      throw new Error(\"No target element found!\");\n    }\n\n    if (!this.className) {\n      throw new Error(\"className not set!\");\n    }\n\n    if (this.isInViewport(this.target)) {\n      this.el.classList.add(this.className);\n      if (this.el.type === \"radio\") {\n        this.el.checked = true;\n      }\n    } else {\n      this.el.classList.remove(this.className);\n      if (this.el.type === \"radio\") {\n        this.el.checked = false;\n      }\n    }\n  }\n\n  private onScroll = debounce(this._onScroll.bind(this));\n\n  /**\n   * Determine if an element is in the viewport\n   * @param elem The element\n   * @return Returns true if element is in the viewport\n   */\n  private _isInViewport(elem: Element) {\n    if (!elem) {\n      return false;\n    }\n    const offsetTop = Number(this.el.dataset.offset || 0);\n    const offsetBottom = Number(this.el.dataset.offsetBottom || 0);\n    return isInViewport(elem, { top: offsetTop, bottom: offsetBottom });\n  }\n\n  private isInViewport = this._isInViewport.bind(this);\n\n  bind() {\n    window.addEventListener(\"scroll\", this.onScroll, {\n      passive: true,\n    });\n    this.onScroll();\n  }\n\n  routine(el: HTMLElement, targetSelector: string) {\n    const nativeIDTargetSelector = targetSelector.replace(\"#\", \"\");\n    this.target = document.getElementById(nativeIDTargetSelector) || undefined;\n    this.className = this.args[0] as string;\n  }\n\n  unbind() {\n    window.removeEventListener(\"scroll\", this.onScroll);\n  }\n}\n","import { createPopper, Options } from \"@popperjs/core\";\nimport { Binder } from \"@ribajs/core\";\n\nconst template = document.createElement(\"div\");\ntemplate.classList.add(\"tooltip\");\ntemplate.setAttribute(\"role\", \"tooltip\");\n\nconst arrow = document.createElement(\"div\");\narrow.classList.add(\"arrow\");\ntemplate.appendChild(arrow);\n\nconst inner = document.createElement(\"div\");\ninner.classList.add(\"tooltip-inner\");\ntemplate.appendChild(inner);\n\n/**\n *\n */\nexport class TooltipBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-tooltip\";\n\n  private popper?: ReturnType<typeof createPopper>;\n\n  private tip = template.cloneNode(true) as HTMLElement;\n\n  private _show() {\n    const placement: Options[\"placement\"] = (this.el.dataset.placement ||\n      \"start\") as Options[\"placement\"];\n\n    const offset = 0;\n    this.popper = createPopper(this.el, this.tip, {\n      placement,\n      modifiers: [\n        {\n          name: \"flip\",\n          options: {\n            altBoundary: true,\n            // fallbackPlacements: this.config.fallbackPlacements\n            behavior: \"flip\",\n          },\n        },\n        {\n          name: \"offset\",\n          options: {\n            offset: offset,\n          },\n        },\n        {\n          name: \"arrow\",\n          options: {\n            element: `.arrow`,\n          },\n        },\n        {\n          name: \"preventOverflow\",\n          options: {\n            boundariesElement: \"scrollParent\",\n          },\n        },\n      ],\n      strategy: undefined,\n    });\n    document.body.appendChild(this.tip);\n    this.tip.classList.add(\"show\");\n    this.tip.classList.add(\"bs-tooltip-\" + placement);\n  }\n\n  private show = this._show.bind(this);\n\n  private _hide() {\n    this.tip.classList.remove(\"show\");\n    if (this.popper) {\n      this.popper.destroy();\n    }\n  }\n\n  private hide = this._hide.bind(this);\n\n  bind(el: HTMLUnknownElement) {\n    el.addEventListener(\"mouseenter\", this.show);\n    el.addEventListener(\"mouseleave\", this.hide);\n  }\n\n  routine(el: HTMLElement, text: string) {\n    const innerEl = this.tip.querySelector(\".tooltip-inner\") as HTMLDivElement;\n    innerEl.innerHTML = text;\n  }\n\n  unbind() {\n    this.hide();\n    this.el.removeEventListener(\"mouseenter\", this.show);\n    this.el.removeEventListener(\"mouseleave\", this.hide);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { scrollTo } from \"@ribajs/utils/src/dom.js\";\n\nexport class ScrollToOnEventBinder extends Binder<string, HTMLElement> {\n  static key = \"scroll-to-on-*\";\n\n  private target?: HTMLElement;\n\n  private _onEvent(event: Event) {\n    const offset = Number(this.el.dataset.offset || 0);\n    const scrollElement = this.el.dataset.scrollElement\n      ? document.querySelector<HTMLElement>(this.el.dataset.scrollElement)\n      : window;\n    if (this.target) {\n      scrollTo(this.target, offset, scrollElement);\n      event.preventDefault();\n    }\n  }\n\n  private onEvent = this._onEvent.bind(this);\n\n  bind(el: HTMLUnknownElement) {\n    this.onEvent = this.onEvent.bind(this);\n    const eventName = this.args[0] as string;\n    el.addEventListener(eventName, this.onEvent);\n  }\n\n  routine(el: HTMLUnknownElement, targetSelector: string) {\n    this.target =\n      document.querySelector<HTMLElement>(targetSelector) || undefined;\n  }\n\n  unbind(el: HTMLElement) {\n    const eventName = this.args[0] as string;\n    el.removeEventListener(eventName, this.onEvent);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { TOGGLE_BUTTON, TOGGLE_ATTRIBUTE } from \"../constants/index.js\";\n\n/**\n * Adds / removes the attribute on click on the bs5-toggle-button with the same id\n * E.g. with this binder you can toggle a hidden attribute to show / hide the element\n * Events\n * * `off`\n * * `on`\n */\nexport class ToggleAttributeBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-toggle-attribute-*\";\n\n  private toggleButtonEvents?: EventDispatcher;\n  private state = \"off\";\n\n  private _triggerState() {\n    this.toggleButtonEvents?.trigger(\n      TOGGLE_BUTTON.eventNames.state,\n      this.state\n    );\n  }\n\n  private triggerState = this._triggerState.bind(this);\n\n  private _onToggle() {\n    this.toggle.bind(this)(this.el);\n  }\n\n  private onToggle = this._onToggle.bind(this);\n\n  private toggle(el: HTMLElement) {\n    if (this.state === \"removed\") {\n      this.add.bind(this)(el);\n    } else {\n      this.remove.bind(this)(el);\n    }\n  }\n\n  private remove(el: HTMLElement) {\n    const attributeName = this.args[0] as string;\n    el.removeAttribute(attributeName);\n    this.state = \"removed\";\n    el.dispatchEvent(\n      new CustomEvent(TOGGLE_ATTRIBUTE.elEventNames.removed, {\n        detail: { attributeName },\n      })\n    );\n    this.triggerState();\n  }\n\n  private add(el: HTMLElement) {\n    const attributeName = this.args[0] as string;\n\n    el.setAttribute(attributeName, attributeName);\n    this.state = \"added\";\n    el.dispatchEvent(\n      new CustomEvent(TOGGLE_ATTRIBUTE.elEventNames.added, {\n        detail: { attributeName },\n      })\n    );\n    this.triggerState();\n  }\n\n  bind(el: HTMLElement) {\n    const attributeName = this.args[0] as string;\n    this.state = el.hasAttribute(attributeName) ? \"added\" : \"removed\";\n  }\n\n  unbind() {\n    this.toggleButtonEvents?.off(\n      TOGGLE_BUTTON.eventNames.toggle,\n      this.onToggle,\n      this\n    );\n    this.toggleButtonEvents?.off(\n      TOGGLE_BUTTON.eventNames.init,\n      this.triggerState,\n      this\n    );\n  }\n\n  routine(el: HTMLElement, newId: string) {\n    const oldId = this._getValue(el);\n    let toggleButton = this.toggleButtonEvents;\n    if (oldId && toggleButton) {\n      toggleButton.off(TOGGLE_BUTTON.eventNames.toggle, this.onToggle, this);\n      toggleButton.off(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n\n    if (!this.toggleButtonEvents) {\n      this.toggleButtonEvents = new EventDispatcher(\n        TOGGLE_BUTTON.nsPrefix + newId\n      );\n      toggleButton = this.toggleButtonEvents as EventDispatcher;\n      toggleButton.on(TOGGLE_BUTTON.eventNames.toggle, this.onToggle, this);\n      toggleButton.on(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { TOGGLE_BUTTON, TOGGLE_CLASS } from \"../constants/index.js\";\n\n/**\n * Adds / removes the class on click on the bs5-toggle-button with the same id\n *\n * Events\n * * `off`\n * * `on`\n */\nexport class ToggleClassBinder extends Binder<string, HTMLButtonElement> {\n  static key = \"bs5-toggle-class-*\";\n\n  private toggleButtonEvents?: EventDispatcher;\n  private state = \"off\";\n\n  private _triggerState() {\n    this.toggleButtonEvents?.trigger(\n      TOGGLE_BUTTON.eventNames.state,\n      this.state\n    );\n  }\n\n  private triggerState = this._triggerState.bind(this);\n\n  private _onToggle() {\n    this.toggle.bind(this)(this.el);\n  }\n\n  private onToggle = this._onToggle.bind(this);\n\n  private toggle(el: HTMLButtonElement) {\n    if (this.state === \"removed\") {\n      this.add.bind(this)(el);\n    } else {\n      this.remove.bind(this)(el);\n    }\n  }\n\n  private remove(el: HTMLButtonElement) {\n    const className = this.args[0] as string;\n    el.classList.remove(className);\n    this.state = \"removed\";\n    el.dispatchEvent(\n      new CustomEvent(TOGGLE_CLASS.elEventNames.removed, {\n        detail: { className },\n      })\n    );\n    this.triggerState();\n  }\n\n  private add(el: HTMLButtonElement) {\n    const className = this.args[0] as string;\n\n    el.classList.add(className, className);\n    this.state = \"added\";\n    el.dispatchEvent(\n      new CustomEvent(TOGGLE_CLASS.elEventNames.added, {\n        detail: { className },\n      })\n    );\n    this.triggerState();\n  }\n\n  bind(el: HTMLButtonElement) {\n    const className = this.args[0] as string;\n    this.state = el.classList.contains(className) ? \"added\" : \"removed\";\n  }\n\n  unbind() {\n    this.toggleButtonEvents?.off(\n      TOGGLE_BUTTON.eventNames.toggle,\n      this.onToggle,\n      this\n    );\n    this.toggleButtonEvents?.off(\n      TOGGLE_BUTTON.eventNames.init,\n      this.triggerState,\n      this\n    );\n  }\n\n  routine(el: HTMLButtonElement, newId: string) {\n    const oldId = this._getValue(el);\n    let toggleButton = this.toggleButtonEvents;\n    if (oldId && toggleButton) {\n      toggleButton.off(TOGGLE_BUTTON.eventNames.toggle, this.onToggle, this);\n      toggleButton.off(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n\n    if (!this.toggleButtonEvents) {\n      this.toggleButtonEvents = new EventDispatcher(\n        TOGGLE_BUTTON.nsPrefix + newId\n      );\n      toggleButton = this.toggleButtonEvents as EventDispatcher;\n      toggleButton.on(TOGGLE_BUTTON.eventNames.toggle, this.onToggle, this);\n      toggleButton.on(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n  }\n}\n","import {\n  handleizeFormatter,\n  FormatterFn,\n  TemplatesComponent,\n  ScopeBase,\n} from \"@ribajs/core\";\nimport { Collapse } from \"../../services/collapse.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport {\n  JsxBs5AccordionProps,\n  CollapseEvents,\n  AccordionItem,\n} from \"../../types/index.js\";\n\nconst handleize = handleizeFormatter.read as FormatterFn;\n\ninterface Scope extends ScopeBase {\n  items: AccordionItem[];\n  toggle: Bs5AccordionComponent[\"toggle\"];\n  show: Bs5AccordionComponent[\"show\"];\n  hide: Bs5AccordionComponent[\"hide\"];\n  collapseIconSrc?: string;\n  collapseIconSize: number;\n  showOnlyOne: boolean;\n}\n\nexport class Bs5AccordionComponent extends TemplatesComponent {\n  public static tagName = \"bs5-accordion\";\n\n  protected autobind = true;\n\n  protected templateAttributes = [\n    {\n      name: \"title\",\n      required: true,\n    },\n    {\n      name: \"show\",\n      required: false,\n    },\n    {\n      name: \"icon-direction\",\n      required: false,\n    },\n  ];\n\n  // protected collapseServices: Collapse[] = [];\n\n  static get observedAttributes(): (keyof JsxBs5AccordionProps)[] {\n    return [\n      \"items\",\n      \"collapse-icon-src\",\n      \"collapse-icon-size\",\n      \"show-only-one\",\n    ];\n  }\n\n  public scope: Scope = {\n    items: [],\n    toggle: this.toggle,\n    show: this.show,\n    hide: this.hide,\n    collapseIconSize: 16,\n    showOnlyOne: true,\n  };\n\n  constructor() {\n    super();\n  }\n\n  public hide(item: AccordionItem, index: number) {\n    const target = this.querySelector<HTMLElement>(`[data-index=\"${index}\"]`);\n    if (target) {\n      this.initItemEventListeners(item, target);\n      new Collapse(target, { toggle: false }).hide();\n    }\n  }\n\n  public show(item: AccordionItem, index: number) {\n    const target = this.querySelector<HTMLElement>(`[data-index=\"${index}\"]`);\n    const others = Array.from(\n      this.querySelectorAll<HTMLElement>(\n        `[data-index]:not([data-index=\"${index}\"])`\n      )\n    );\n    if (others && this.scope.showOnlyOne) {\n      for (const other of others) {\n        new Collapse(other, { toggle: false }).hide();\n      }\n    }\n    if (target) {\n      this.initItemEventListeners(item, target);\n      new Collapse(target, { toggle: false }).show();\n    }\n  }\n\n  public toggle(item: AccordionItem, index: number) {\n    const target = this.querySelector<HTMLElement>(`[data-index=\"${index}\"]`);\n    const others = Array.from(\n      this.querySelectorAll<HTMLElement>(\n        `[data-index]:not([data-index=\"${index}\"])`\n      )\n    );\n    if (others && this.scope.showOnlyOne) {\n      for (const other of others) {\n        new Collapse(other, { toggle: false }).hide();\n      }\n    }\n    if (target) {\n      this.initItemEventListeners(item, target);\n      new Collapse(target, { toggle: false }).toggle();\n    }\n  }\n\n  protected initItemEventListeners(item: AccordionItem, element: HTMLElement) {\n    element.removeEventListener(\n      CollapseEvents.hide,\n      this.onHide.bind(this, element, item)\n    );\n    element.removeEventListener(\n      CollapseEvents.show,\n      this.onShow.bind(this, element, item)\n    );\n    element.addEventListener(\n      CollapseEvents.hide,\n      this.onHide.bind(this, element, item),\n      { once: true }\n    );\n    element.addEventListener(\n      CollapseEvents.show,\n      this.onShow.bind(this, element, item),\n      { once: true }\n    );\n  }\n\n  protected getContentChildByIndex() {\n    return this.querySelector(`.card-body > *`) || undefined;\n  }\n\n  protected onShow(element: HTMLElement, item: AccordionItem) {\n    item.show = true;\n    item.iconDirection = \"up\";\n    const firstContentChild = this.getContentChildByIndex();\n    if (firstContentChild) {\n      this.triggerVisibilityChangedForElement(firstContentChild, item.show);\n    }\n  }\n\n  protected onHide(element: HTMLElement, item: AccordionItem) {\n    item.show = false;\n    item.iconDirection = \"down\";\n    const firstContentChild = this.getContentChildByIndex();\n    if (firstContentChild) {\n      this.triggerVisibilityChangedForElement(firstContentChild, item.show);\n    }\n  }\n\n  protected transformTemplateAttributes(attributes: any) {\n    attributes.handle = attributes.handle || handleize(attributes.title);\n    attributes.show = !!attributes.show;\n    attributes.iconDirection =\n      attributes.iconDirection || attributes.show ? \"up\" : \"down\";\n\n    return attributes;\n  }\n\n  /**\n   * Trigger `visibility-changed` for components that need to update if visibility changes.\n   * Se also bsf-tabs\n   * @param element\n   * @param visible\n   */\n  protected triggerVisibilityChangedForElement(\n    element: Element,\n    visible: boolean\n  ) {\n    setTimeout(() => {\n      // Use this event to update any custom element when it becomes visible\n      element.dispatchEvent(\n        new CustomEvent(\"visibility-changed\", { detail: { visible } })\n      );\n    }, 200);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5AccordionComponent.observedAttributes);\n  }\n\n  protected async init(observedAttributes: string[]) {\n    return super.init(observedAttributes).then((view) => {\n      return view;\n    });\n  }\n\n  protected async beforeBind() {\n    return await super.beforeBind();\n  }\n\n  protected async afterBind() {\n    return await super.afterBind();\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  protected async template() {\n    // Only set the component template if there no childs or the childs are templates\n    if (!hasChildNodesTrim(this) || this.hasOnlyTemplateChilds()) {\n      const { default: template } = await import(\n        \"./bs5-accordion.component.html?raw\"\n      );\n      return template;\n    } else {\n      return null;\n    }\n  }\n}\n","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\n\ninterface Scope extends ScopeBase {\n  animationClass: string;\n  onClick: Bs5ButtonComponent[\"onClick\"];\n}\n\nexport class Bs5ButtonComponent extends Component {\n  public static tagName = \"bs5-button\";\n\n  protected autobind = true;\n\n  static get observedAttributes(): string[] {\n    return [\"animation-class\"];\n  }\n\n  public scope: Scope = {\n    animationClass: \"btn-animation-start\",\n    onClick: this.onClick.bind(this),\n  };\n\n  constructor() {\n    super();\n  }\n\n  public onClick() {\n    this.startAnimation();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ButtonComponent.observedAttributes);\n  }\n\n  protected startAnimation() {\n    this.classList.add(this.scope.animationClass);\n  }\n\n  protected onStartAnimation() {\n    //\n  }\n\n  protected onEndAnimation() {\n    setTimeout(() => {\n      this.classList.remove(this.scope.animationClass);\n    });\n  }\n\n  protected async init(observedAttributes: string[]) {\n    return super.init(observedAttributes).then((view) => {\n      this.onStartAnimation = this.onStartAnimation.bind(this);\n      this.addEventListener(\n        \"webkitAnimationStart\" as \"animationstart\",\n        this.onStartAnimation\n      );\n      this.addEventListener(\"animationstart\", this.onStartAnimation);\n      this.onEndAnimation = this.onEndAnimation.bind(this);\n      this.addEventListener(\n        \"webkitAnimationEnd\" as \"animationend\",\n        this.onEndAnimation\n      );\n      this.addEventListener(\"animationend\", this.onEndAnimation);\n      this.addEventListener(\"click\", this.scope.onClick);\n      return view;\n    });\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener(\n      \"webkitAnimationStart\" as \"animationstart\",\n      this.onStartAnimation\n    );\n    this.removeEventListener(\"animationstart\", this.onStartAnimation);\n    this.removeEventListener(\n      \"webkitAnimationEnd\" as \"animationend\",\n      this.onEndAnimation\n    );\n    this.removeEventListener(\"animationend\", this.onEndAnimation);\n    this.removeEventListener(\"click\", this.scope.onClick);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { Carousel } from \"../../services/carousel.js\";\nimport { CarouselOptions } from \"../../types/index.js\";\n\nexport interface Scope extends ScopeBase {\n  // Properties\n  interval: CarouselOptions[\"interval\"];\n  keyboard: CarouselOptions[\"keyboard\"];\n  pause: CarouselOptions[\"pause\"];\n  wrap: CarouselOptions[\"wrap\"];\n  touch: CarouselOptions[\"touch\"];\n  fade: boolean;\n  // Methods\n  next: Bs5CarouselComponent[\"next\"];\n  nextWhenVisible: Bs5CarouselComponent[\"nextWhenVisible\"];\n  prev: Bs5CarouselComponent[\"prev\"];\n  startPause: Bs5CarouselComponent[\"pause\"];\n  cycle: Bs5CarouselComponent[\"cycle\"];\n  to: Bs5CarouselComponent[\"to\"];\n  dispose: Bs5CarouselComponent[\"dispose\"];\n}\n\nexport class Bs5CarouselComponent extends Component {\n  public static tagName = \"bs5-carousel\";\n\n  static get observedAttributes(): string[] {\n    return [\"interval\", \"keyboard\", \"pause\", \"wrap\", \"touch\", \"fade\"];\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  public scope: Scope = {\n    // Properties\n    interval: Carousel.Default.interval,\n    keyboard: Carousel.Default.keyboard,\n    pause: Carousel.Default.pause || false, // changed from pause to pause\n    wrap: Carousel.Default.wrap,\n    touch: Carousel.Default.touch,\n    fade: false,\n    // Methods\n    next: this.next,\n    nextWhenVisible: this.nextWhenVisible,\n    prev: this.prev,\n    startPause: this.pause,\n    cycle: this.cycle,\n    to: this.to,\n    dispose: this.dispose,\n  };\n\n  protected autobind = true;\n\n  protected carouselService?: Carousel;\n\n  constructor() {\n    super();\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.classList.add(\"carousel\", \"slide\");\n  }\n\n  protected async afterBind() {\n    this.carouselService = new Carousel(this, {\n      interval: this.scope.interval,\n      keyboard: this.scope.keyboard,\n      pause: this.scope.pause,\n      wrap: this.scope.wrap,\n      touch: this.scope.touch,\n    });\n    if (this.scope.fade) {\n      this.classList.add(\"carousel-fade\");\n    }\n    // TODO make this configurable?\n    this.carouselService.cycle();\n    await super.afterBind();\n  }\n\n  public next() {\n    if (this.carouselService) {\n      this.carouselService.next();\n    }\n  }\n\n  public nextWhenVisible() {\n    if (this.carouselService) {\n      this.carouselService.nextWhenVisible();\n    }\n  }\n\n  public prev() {\n    if (this.carouselService) {\n      this.carouselService.prev();\n    }\n  }\n\n  public pause() {\n    if (this.carouselService) {\n      this.carouselService.pause();\n    }\n  }\n\n  public cycle() {\n    if (this.carouselService) {\n      this.carouselService.cycle();\n    }\n  }\n\n  public to() {\n    if (this.carouselService) {\n      throw new Error(\"TODO\");\n      // this.carouselService.to(index);\n    }\n  }\n\n  public dispose() {\n    if (this.carouselService) {\n      this.carouselService.dispose();\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    super.init(Bs5CarouselComponent.observedAttributes);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { Collapse } from \"../../services/collapse.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { JsxBs5CollapseProps, CollapseEvents } from \"../../types/index.js\";\n\ninterface Scope {\n  title: string;\n  content: string;\n  collapsed: boolean;\n  toggle: Bs5CollapseComponent[\"toggle\"];\n  show: Bs5CollapseComponent[\"show\"];\n  hide: Bs5CollapseComponent[\"hide\"];\n  collapseEl?: HTMLUnknownElement;\n}\n\nexport class Bs5CollapseComponent extends Component {\n  public static tagName = \"bs5-collapse\";\n\n  protected autobind = true;\n\n  protected collapse?: Collapse;\n\n  static get observedAttributes(): (keyof JsxBs5CollapseProps)[] {\n    return [\"title\", \"content\", \"collapsed\"];\n  }\n\n  protected requiredAttributes(): (keyof JsxBs5CollapseProps)[] {\n    return [\"title\"];\n  }\n\n  public scope: Scope = {\n    title: \"\",\n    content:\n      \"Please set the content of the collapse using the content attribute or just by set the content as the child of this element\",\n    collapsed: true,\n    toggle: this.toggle,\n    show: this.show,\n    hide: this.hide,\n  };\n\n  constructor() {\n    super();\n  }\n\n  public hide() {\n    console.debug(\"hide\");\n    if (this.collapse) {\n      this.scope.collapsed = true;\n      this.collapse.hide();\n    }\n  }\n\n  public show() {\n    if (this.collapse) {\n      this.scope.collapsed = false;\n      this.collapse.show();\n    }\n  }\n\n  public toggle() {\n    if (this.collapse) {\n      this.collapse.toggle();\n      this.scope.collapsed = !!this.scope.collapsed;\n    }\n  }\n\n  protected addEventListeners() {\n    if (this.scope.collapseEl) {\n      this.scope.collapseEl.addEventListener(\n        CollapseEvents.hide,\n        this.onHide.bind(this)\n      );\n      this.scope.collapseEl.addEventListener(\n        CollapseEvents.show,\n        this.onShow.bind(this)\n      );\n    }\n  }\n\n  protected removeEventListeners() {\n    if (this.scope.collapseEl) {\n      this.scope.collapseEl.removeEventListener(\n        CollapseEvents.hide,\n        this.onHide.bind(this)\n      );\n      this.scope.collapseEl.removeEventListener(\n        CollapseEvents.show,\n        this.onShow.bind(this)\n      );\n    }\n  }\n\n  protected onShow() {\n    console.debug(\"onShow\");\n    this.scope.collapsed = false;\n    this.triggerVisibilityChangedForElement(!this.scope.collapsed);\n  }\n\n  protected onHide() {\n    console.debug(\"onShow\");\n    this.scope.collapsed = true;\n    this.triggerVisibilityChangedForElement(!this.scope.collapsed);\n  }\n\n  /**\n   * Trigger `visibility-changed` for components that need to update if visibility changes.\n   * Se also bsf-tabs\n   * @param visible\n   */\n  protected triggerVisibilityChangedForElement(visible: boolean) {\n    setTimeout(() => {\n      const event = new CustomEvent(\"visibility-changed\", {\n        detail: { visible },\n      });\n\n      // Use this event to update any custom element when it becomes visible\n      this.dispatchEvent(event);\n\n      if (this.scope.collapseEl) {\n        this.scope.collapseEl.dispatchEvent(event);\n      }\n    }, 200);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5CollapseComponent.observedAttributes);\n  }\n\n  protected async afterBind() {\n    console.debug(\"afterBind\", this.scope.collapsed);\n    this.scope.collapseEl = this.querySelector(\".collapse\") || undefined;\n    // this.addEventListeners(); TODO: Fixme calls onShow every time\n    if (!this.scope.collapseEl) {\n      throw new Error(\"No collapse element found!\");\n    }\n    this.collapse = new Collapse(this.scope.collapseEl, {\n      toggle: !this.scope.collapsed,\n    });\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (hasChildNodesTrim(this)) {\n      this.scope.content = this.innerHTML;\n    }\n\n    return (\n      <div>\n        <button\n          rv-on-click=\"toggle\"\n          class=\"btn btn-primary\"\n          type=\"button\"\n          aria-expanded=\"false\"\n          rv-aria-controls=\"title | handleize\"\n          rv-text=\"title\"\n        ></button>\n        <div class=\"collapse mt-2\" rv-id=\"title\">\n          <div class=\"card card-body\" rv-template=\"content\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*global String*/\n/*global atob*/\nString.prototype.startsWith = (String.prototype.startsWith || function(needle)   { return (this.indexOf(needle) === 0); });\nString.prototype.padStart   = (String.prototype.padStart   || function(len, pad) { let str = this; while(str.length < len) { str = pad + str; }; return str; });\n\n\n/*\n    Code golfing:\n    This is a compacted list of all 148 CSS color names (from https://github.com/bahamas10/css-color-names/blob/master/css-color-names.json).\n    Every seven characters in this array is a name and its RGB value.\n\n        //3 chars name hash (rudimentary, but just enough to separate all unique colors),\n        //based on https://stackoverflow.com/a/15710692/1869660\n        hash = [].reduce.call(name.replace('ey','ay'), (h, c) => (h << 2) + c.charCodeAt(0), 0)\n                            .toString(36).slice(-3);\n\n        //4 chars base64 color value. Split the hex into [R, G, B], cast to bytes and base64-encode the byte array:\n        hex64 = btoa( hex.match(/../g).map(x => String.fromCharCode(parseInt(x, 16))).join('') );\n\nconst colorNames = '735AACA770//Xub218Pj/mo5+uvX6mdAP//gtpf//Ur258P//q1d9fXcxop/+TEq9zAAAAqfg/+vN6m1AAD/ngoiiviqt6pSoqzyo3riHxvdX56grk1f/8Aax10mkeqts/39QxbtZJXttkb//jcyxm3BQ86rmAP//wl5AACLwqqAIuL3y8uIYLwv1qampniqAGQAns5vbdrmohiwCLw5uVWsvsdd/4wAsegmTLMqagiwAAsqi6ZZ6uz6j7yPxtzSD2Lxk3L09PudbAM7RwsolADT0kz/xSTfuhAL//vfhaWlpyuxHpD/43rsiIiwn9//rw39uIosi9bp/wD/6w73Nzc9s5+Pj/6v8/9cA3b42qUg6vxgICArmaAIAAtdfrf8vf9n8P/wek3/2m0xnczVxc3bvSwCCsdt///wrvp8OaMs5i5ub6iyk//D1e8ifPwAoui//rNpyxrdjmw9c8ICAq4i4P//mx9+vrSq8t09PTx1ukO6Qqlv/7bBuuy/6B690uILKqpfdh876sd9d4iZnehsMTe0dv///g71lAP8A4nmMs0ys9u+vDmg9d/wD/4pmgAAAcurZs2qzllAADN4lkulXT6txk3Db66qPLNxozre2juokuAPqalj3SNHMgdkxxWF60pGRlwxfl9f/6hr5/+Thx6q/+S1m85/96tutd/fXmszxgIAAe4ma44j8rl/6UAmu0/0UA8so2nDWji87uiqumqmPuY9xbr+7u4rs23CTsb8/+/V95a/9q577xzYU/78z/8DL7b53aDdsu1sODmb11gACAy5nZjOZ1so/wAAlvevI+Pn09QWnhm7ui0UT94q+oBy7ei9KRg5aqLotXad5oFItasmwMDAaihh87r9fdalrN9p9cICQ7gz//r6k5uAP9/4qhRoK01te0rSM7cwAICA91x2L/Yclr/2NHcw1QODQd6w7oLuua09d6zudh////t359fX1enn//8Ao0ims0y';\nlet  colorNamesDeser;\n*/\n\n//https://github.com/bahamas10/css-color-names/blob/master/css-color-names.json\n//  const colorNames = { aliceblue:'#f0f8ff', antiquewhite:'#faebd7', aqua:'#00ffff', aquamarine:'#7fffd4', azure:'#f0ffff', beige:'#f5f5dc', bisque:'#ffe4c4', black:'#000000', blanchedalmond:'#ffebcd', blue:'#0000ff', blueviolet:'#8a2be2', brown:'#a52a2a', burlywood:'#deb887', cadetblue:'#5f9ea0', chartreuse:'#7fff00', chocolate:'#d2691e', coral:'#ff7f50', cornflowerblue:'#6495ed', cornsilk:'#fff8dc', crimson:'#dc143c', cyan:'#00ffff', darkblue:'#00008b', darkcyan:'#008b8b', darkgoldenrod:'#b8860b', darkgray:'#a9a9a9', darkgreen:'#006400', darkgrey:'#a9a9a9', darkkhaki:'#bdb76b', darkmagenta:'#8b008b', darkolivegreen:'#556b2f', darkorange:'#ff8c00', darkorchid:'#9932cc', darkred:'#8b0000', darksalmon:'#e9967a', darkseagreen:'#8fbc8f', darkslateblue:'#483d8b', darkslategray:'#2f4f4f', darkslategrey:'#2f4f4f', darkturquoise:'#00ced1', darkviolet:'#9400d3', deeppink:'#ff1493', deepskyblue:'#00bfff', dimgray:'#696969', dimgrey:'#696969', dodgerblue:'#1e90ff', firebrick:'#b22222', floralwhite:'#fffaf0', forestgreen:'#228b22', fuchsia:'#ff00ff', gainsboro:'#dcdcdc', ghostwhite:'#f8f8ff', gold:'#ffd700', goldenrod:'#daa520', gray:'#808080', green:'#008000', greenyellow:'#adff2f', grey:'#808080', honeydew:'#f0fff0', hotpink:'#ff69b4', indianred:'#cd5c5c', indigo:'#4b0082', ivory:'#fffff0', khaki:'#f0e68c', lavender:'#e6e6fa', lavenderblush:'#fff0f5', lawngreen:'#7cfc00', lemonchiffon:'#fffacd', lightblue:'#add8e6', lightcoral:'#f08080', lightcyan:'#e0ffff', lightgoldenrodyellow:'#fafad2', lightgray:'#d3d3d3', lightgreen:'#90ee90', lightgrey:'#d3d3d3', lightpink:'#ffb6c1', lightsalmon:'#ffa07a', lightseagreen:'#20b2aa', lightskyblue:'#87cefa', lightslategray:'#778899', lightslategrey:'#778899', lightsteelblue:'#b0c4de', lightyellow:'#ffffe0', lime:'#00ff00', limegreen:'#32cd32', linen:'#faf0e6', magenta:'#ff00ff', maroon:'#800000', mediumaquamarine:'#66cdaa', mediumblue:'#0000cd', mediumorchid:'#ba55d3', mediumpurple:'#9370db', mediumseagreen:'#3cb371', mediumslateblue:'#7b68ee', mediumspringgreen:'#00fa9a', mediumturquoise:'#48d1cc', mediumvioletred:'#c71585', midnightblue:'#191970', mintcream:'#f5fffa', mistyrose:'#ffe4e1', moccasin:'#ffe4b5', navajowhite:'#ffdead', navy:'#000080', oldlace:'#fdf5e6', olive:'#808000', olivedrab:'#6b8e23', orange:'#ffa500', orangered:'#ff4500', orchid:'#da70d6', palegoldenrod:'#eee8aa', palegreen:'#98fb98', paleturquoise:'#afeeee', palevioletred:'#db7093', papayawhip:'#ffefd5', peachpuff:'#ffdab9', peru:'#cd853f', pink:'#ffc0cb', plum:'#dda0dd', powderblue:'#b0e0e6', purple:'#800080', rebeccapurple:'#663399', red:'#ff0000', rosybrown:'#bc8f8f', royalblue:'#4169e1', saddlebrown:'#8b4513', salmon:'#fa8072', sandybrown:'#f4a460', seagreen:'#2e8b57', seashell:'#fff5ee', sienna:'#a0522d', silver:'#c0c0c0', skyblue:'#87ceeb', slateblue:'#6a5acd', slategray:'#708090', slategrey:'#708090', snow:'#fffafa', springgreen:'#00ff7f', steelblue:'#4682b4', tan:'#d2b48c', teal:'#008080', thistle:'#d8bfd8', tomato:'#ff6347', turquoise:'#40e0d0', violet:'#ee82ee', wheat:'#f5deb3', white:'#ffffff', whitesmoke:'#f5f5f5', yellow:'#ffff00', yellowgreen:'#9acd32' };\n//\n//More golfing, just because.. Simple hashing of the names - see nameToRgb()\nconst colorNames = {cb:'0f8ff',tqw:'aebd7',q:'-ffff',qmrn:'7fffd4',zr:'0ffff',bg:'5f5dc',bsq:'e4c4',bck:'---',nch:'ebcd',b:'--ff',bvt:'8a2be2',brwn:'a52a2a',brw:'deb887',ctb:'5f9ea0',hrt:'7fff-',chcT:'d2691e',cr:'7f50',rnw:'6495ed',crns:'8dc',crms:'dc143c',cn:'-ffff',Db:'--8b',Dcn:'-8b8b',Dgnr:'b8860b',Dgr:'a9a9a9',Dgrn:'-64-',Dkhk:'bdb76b',Dmgn:'8b-8b',Dvgr:'556b2f',Drng:'8c-',Drch:'9932cc',Dr:'8b--',Dsmn:'e9967a',Dsgr:'8fbc8f',DsTb:'483d8b',DsTg:'2f4f4f',Dtrq:'-ced1',Dvt:'94-d3',ppnk:'1493',pskb:'-bfff',mgr:'696969',grb:'1e90ff',rbrc:'b22222',rwht:'af0',stg:'228b22',chs:'-ff',gnsb:'dcdcdc',st:'8f8ff',g:'d7-',gnr:'daa520',gr:'808080',grn:'-8-0',grnw:'adff2f',hnw:'0fff0',htpn:'69b4',nnr:'cd5c5c',ng:'4b-82',vr:'0',khk:'0e68c',vnr:'e6e6fa',nrb:'0f5',wngr:'7cfc-',mnch:'acd',Lb:'add8e6',Lcr:'08080',Lcn:'e0ffff',Lgnr:'afad2',Lgr:'d3d3d3',Lgrn:'90ee90',Lpnk:'b6c1',Lsmn:'a07a',Lsgr:'20b2aa',Lskb:'87cefa',LsTg:'778899',Lstb:'b0c4de',Lw:'e0',m:'-ff-',mgrn:'32cd32',nn:'af0e6',mgnt:'-ff',mrn:'8--0',mqm:'66cdaa',mmb:'--cd',mmrc:'ba55d3',mmpr:'9370db',msg:'3cb371',mmsT:'7b68ee','':'-fa9a',mtr:'48d1cc',mmvt:'c71585',mnLb:'191970',ntc:'5fffa',mstr:'e4e1',mccs:'e4b5',vjw:'dead',nv:'--80',c:'df5e6',v:'808-0',vrb:'6b8e23',rng:'a5-',rngr:'45-',rch:'da70d6',pgnr:'eee8aa',pgrn:'98fb98',ptrq:'afeeee',pvtr:'db7093',ppwh:'efd5',pchp:'dab9',pr:'cd853f',pnk:'c0cb',pm:'dda0dd',pwrb:'b0e0e6',prp:'8-080',cc:'663399',r:'--',sbr:'bc8f8f',rb:'4169e1',sbrw:'8b4513',smn:'a8072',nbr:'4a460',sgrn:'2e8b57',ssh:'5ee',snn:'a0522d',svr:'c0c0c0',skb:'87ceeb',sTb:'6a5acd',sTgr:'708090',snw:'afa',n:'-ff7f',stb:'4682b4',tn:'d2b48c',t:'-8080',thst:'d8bfd8',tmT:'6347',trqs:'40e0d0',vt:'ee82ee',whT:'5deb3',wht:'',hts:'5f5f5',w:'-',wgrn:'9acd32'};\n\n\nfunction printNum(num, decs = 1) {\n    const str = (decs > 0) ? num.toFixed(decs).replace(/0+$/, '').replace(/\\.$/, '')\n                           : num.toString();\n    return str || '0';\n}\n\n\nclass Color {\n\n    constructor(r, g, b, a) {\n\n        const that = this;\n        function parseString(input) {\n\n            //HSL string. Examples:\n            //\thsl(120, 60%,  50%) or\n            //\thsla(240, 100%, 50%, .7)\n            if( input.startsWith('hsl') ) {\n                let [h, s, l, a] = input.match(/([\\-\\d\\.e]+)/g).map(Number);\n                if(a === undefined) { a = 1; }\n\n                h /= 360;\n                s /= 100;\n                l /= 100;\n                that.hsla = [h, s, l, a];\n            }\n\n            //RGB string. Examples:\n            //\trgb(51, 170, 51)\n            //\trgba(51, 170, 51, .7)\n            else if( input.startsWith('rgb') ) {\n                let [r, g, b, a] = input.match(/([\\-\\d\\.e]+)/g).map(Number);\n                if(a === undefined) { a = 1; }\n\n                that.rgba = [r, g, b, a];\n            }\n\n            //Hex string or color name:\n            else {\n                if( input.startsWith('#') ) {\n                    that.rgba = Color.hexToRgb(input);\n                }\n                else {\n                    that.rgba = Color.nameToRgb(input) || Color.hexToRgb(input);\n                }\n            }\n        }\n\n\n        if( r === undefined ) {\n            //No color input - the color can be set later through .hsla/.rgba/.hex\n        }\n\n        //Single input - RGB(A) array\n        else if( Array.isArray(r) ) {\n            this.rgba = r;\n        }\n\n        //Single input - CSS string\n        else if( b === undefined ) {\n            const color = r && ('' + r);\n            if(color) {\n                parseString(color.toLowerCase());\n            }\n        }\n\n        else {\n            this.rgba = [r, g, b, (a === undefined) ? 1 : a];\n        }\n    }\n\n\n    /* RGBA representation */\n\n    get rgba() {\n        if(this._rgba) { return this._rgba; }\n        if(!this._hsla) { throw new Error('No color is set'); }\n        \n        return (this._rgba = Color.hslToRgb(this._hsla));\n    }\n    set rgba(rgb) {\n        if(rgb.length === 3) { rgb[3] = 1; }\n        \n        this._rgba = rgb;\n        this._hsla = null;\n    }\n\n    printRGB(alpha) {\n        const rgb = alpha ? this.rgba : this.rgba.slice(0, 3),\n              vals = rgb.map((x, i) => printNum(x, (i === 3) ? 3 : 0));\n\n        return alpha ? `rgba(${ vals })` : `rgb(${ vals })`;\n    }\n    get rgbString()  { return this.printRGB(); }\n    get rgbaString() { return this.printRGB(true); }\n\n\n    /* HSLA representation */\n\n    get hsla() {\n        if(this._hsla) { return this._hsla; }\n        if(!this._rgba) { throw new Error('No color is set'); }\n        \n        return (this._hsla = Color.rgbToHsl(this._rgba));\n    }\n    set hsla(hsl) {\n        if(hsl.length === 3) { hsl[3] = 1; }\n        \n        this._hsla = hsl;\n        this._rgba = null;\n    }\n\n    printHSL(alpha) {\n        const mults = [360, 100, 100, 1],\n              suff =  ['', '%', '%', ''];\n\n        const hsl = alpha ? this.hsla : this.hsla.slice(0, 3),\n              //in printNum(), use enough decimals to represent all RGB colors:\n              //https://gist.github.com/mjackson/5311256#gistcomment-2336011\n              vals = hsl.map((x, i) => printNum(x * mults[i], (i === 3) ? 3 : 1) + suff[i]);\n        \n        return alpha ? `hsla(${ vals })` : `hsl(${ vals })`;\n    }\n    get hslString()  { return this.printHSL(); }\n    get hslaString() { return this.printHSL(true); }\n\n\n    /* HEX representation */\n\n    get hex() {\n        const rgb = this.rgba,\n              hex = rgb.map((x, i) => (i < 3) ? x.toString(16)\n                                              : Math.round(x * 255).toString(16));\n\n        return '#' + hex.map(x => x.padStart(2, '0')).join('');\n    }\n    set hex(hex) {\n        this.rgba = Color.hexToRgb(hex);\n    }\n\n    printHex(alpha) {\n        const hex = this.hex;\n        return alpha ? hex : hex.substring(0, 7);\n    }\n\n\n    /* Conversion utils */\n\n\n    /**\n     * Splits a HEX string into its RGB(A) components\n     */\n    static hexToRgb(input) {\n        //Normalize all hex codes (3/4/6/8 digits) to 8 digits RGBA\n        const hex = (input.startsWith('#') ? input.slice(1) : input)\n            .replace(/^(\\w{3})$/,          '$1F')                   //987      -> 987F\n            .replace(/^(\\w)(\\w)(\\w)(\\w)$/, '$1$1$2$2$3$3$4$4')      //9876     -> 99887766\n            .replace(/^(\\w{6})$/,          '$1FF');                 //987654   -> 987654FF\n\n        if(!hex.match(/^([0-9a-fA-F]{8})$/)) { throw new Error('Unknown hex color; ' + input); }\n\n        const rgba = hex\n            .match(/^(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)$/).slice(1)  //98765432 -> 98 76 54 32\n            .map(x => parseInt(x, 16));                    //Hex to decimal\n\n        rgba[3] = rgba[3]/255;\n        return rgba;\n    }\n\n\n    /**\n     * Gets the RGB value from a CSS color name\n     */\n    static nameToRgb(input) {\n        /* See comments on colorNames\n\n        if(!colorNamesDeser) {\n            colorNamesDeser = {};\n            colorNames.match(/.{7}/g).forEach(x =>\n                colorNamesDeser[x.slice(0, 3)] = atob(x.slice(-4)).split('').map(b => b.charCodeAt(0))\n            );\n        }\n        const hash = [].reduce.call(input.replace('ey', 'ay'), (h, c) => (h << 2) + c.charCodeAt(0), 0)\n                                .toString(36).slice(-3);\n\n        return colorNamesDeser[hash];\n        */\n\n        //const hex = colorNames[input];\n        //if(hex) {\n        //    return Color.hexToRgb(hex);\n        //}\n\n        const hash = input.toLowerCase()\n                          .replace('at', 'T')\n                          .replace(/[aeiouyldf]/g, '')\n                          .replace('ght', 'L')\n                          .replace('rk', 'D')\n                          .slice(-5, 4),\n              hex = colorNames[hash];\n        return (hex === undefined) ? hex\n                                   : Color.hexToRgb(hex.replace(/\\-/g, '00').padStart(6, 'f'));\n    }\n\n\n    /**\n     * https://gist.github.com/mjackson/5311256\n     * \n     * Converts an RGB color value to HSL. Conversion formula\n     * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n     * Assumes r, g, and b are contained in the set [0, 255] and\n     * returns h, s, and l in the set [0, 1].\n     */\n    static rgbToHsl([r, g, b, a]) {\n\n        r /= 255;\n        g /= 255;\n        b /= 255;\n\n        const max = Math.max(r, g, b),\n              min = Math.min(r, g, b);\n        let h,\n            s,\n            l = (max + min) / 2;\n\n        if(max === min){\n            h = s = 0; // achromatic\n        }\n        else {\n            const d = max - min;\n            s = (l > 0.5) ? d / (2 - max - min)\n                          : d / (max + min);\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n            \n            h /= 6;\n        }\n        \n        return [h, s, l, a];\n    }\n\n\n    /**\n     * https://gist.github.com/mjackson/5311256\n     * \n     * Converts an HSL color value to RGB. Conversion formula\n     * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n     * Assumes h, s, and l are contained in the set [0, 1] and\n     * returns r, g, and b in the set [0, 255].\n     */\n    static hslToRgb([h, s, l, a]) {\n\n        let r, g, b;\n        \n        if (s === 0) {\n            r = g = b = l; // achromatic\n        }\n        else {\n            const hue2rgb = function(p, q, t) {\n                if (t < 0) t += 1;\n                if (t > 1) t -= 1;\n                if (t < 1/6) return p + (q - p) * 6 * t;\n                if (t < 1/2) return q;\n                if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n                return p;\n            };\n\n            const q = (l < 0.5) ? l * (1 + s)\n                                : l + s - (l * s),\n                  p = (2 * l) - q;\n\n            r = hue2rgb(p, q, h + 1/3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1/3);\n        }\n        \n        const rgba = [r * 255, g * 255, b * 255].map(Math.round);\n        rgba[3] = a;\n        \n        return rgba;\n    }\n\n}\n\n\nexport default Color;\n","/**\n * Based on https://vanilla-picker.js.org/\n */\n\nimport Color from \"@sphinxxxx/color-conversion\";\nimport { Component } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { ColorPickerOptions } from \"../../types/index.js\";\nimport { debounce } from \"@ribajs/utils/src/control\";\n\ninterface EventBucketItem {\n  target: HTMLElement | Window;\n  type: Event[\"type\"];\n  handler: any;\n}\n\nclass EventBucket {\n  protected events: EventBucketItem[] = [];\n\n  add(target: HTMLElement | Window, type: Event[\"type\"], handler: any) {\n    target.addEventListener(type, handler, false);\n    this.events.push({\n      target,\n      type,\n      handler,\n    });\n  }\n\n  remove(target: HTMLElement, type: Event[\"type\"], handler: any) {\n    this.events = this.events.filter((e) => {\n      let isMatch = true;\n      if (target && target !== e.target) {\n        isMatch = false;\n      }\n      if (type && type !== e.type) {\n        isMatch = false;\n      }\n      if (handler && handler !== e.handler) {\n        isMatch = false;\n      }\n\n      if (isMatch) {\n        EventBucket._doRemove(e.target as HTMLElement, e.type, e.handler);\n      }\n      return !isMatch;\n    });\n  }\n  static _doRemove(target: HTMLElement, type: Event[\"type\"], handler: any) {\n    target.removeEventListener(type, handler, false);\n  }\n\n  destroy() {\n    this.events.forEach((e) =>\n      EventBucket._doRemove(e.target as HTMLElement, e.type, e.handler)\n    );\n    this.events = [];\n  }\n}\n\nconst dragTrack = (\n  eventBucket: EventBucket,\n  area: HTMLElement,\n  callback: any\n) => {\n  let dragging = false;\n\n  const clamp = (val: number, min: number, max: number) => {\n    return Math.max(min, Math.min(val, max));\n  };\n\n  const onMove = (\n    e: MouseEvent | TouchEvent,\n    info: { clientX: number; clientY: number },\n    starting: boolean\n  ) => {\n    if (starting) {\n      dragging = true;\n    }\n    if (!dragging) {\n      return;\n    }\n\n    e.preventDefault();\n\n    const bounds = area.getBoundingClientRect(),\n      w = bounds.width,\n      h = bounds.height,\n      x = info.clientX,\n      y = info.clientY;\n\n    const relX = clamp(x - bounds.left, 0, w),\n      relY = clamp(y - bounds.top, 0, h);\n\n    callback(relX / w, relY / h);\n  };\n\n  const onMouse = (e: MouseEvent, starting: boolean) => {\n    const button = e.buttons === undefined ? e.which : e.buttons;\n    if (button === 1) {\n      onMove(e, e, starting);\n    }\n    // `mouseup` outside of window:\n    else {\n      dragging = false;\n    }\n  };\n\n  function onTouch(e: TouchEvent, starting: boolean) {\n    if (e.touches.length === 1) {\n      onMove(e, e.touches[0], starting);\n    }\n    //Don't interfere with pinch-to-zoom etc:\n    else {\n      dragging = false;\n    }\n  }\n\n  // Notice how we must listen on the whole window to really keep track of mouse movements,\n  // while touch movements \"stick\" to the original target from `touchstart` (which works well for our purposes here):\n  //\n  //  https://stackoverflow.com/a/51750458/1869660\n  //  \"Mouse moves = *hover* like behavior. Touch moves = *drags* like behavior\"\n  //\n  eventBucket.add(area, \"mousedown\", (e: MouseEvent) => {\n    onMouse(e, true);\n  });\n  eventBucket.add(area, \"touchstart\", (e: TouchEvent) => {\n    onTouch(e, true);\n  });\n  eventBucket.add(window, \"mousemove\", onMouse);\n  eventBucket.add(area, \"touchmove\", onTouch);\n  eventBucket.add(window, \"mouseup\", () => {\n    dragging = false;\n  });\n  eventBucket.add(area, \"touchend\", () => {\n    dragging = false;\n  });\n  eventBucket.add(area, \"touchcancel\", () => {\n    dragging = false;\n  });\n};\n\nconst BG_TRANSP = `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")`;\nconst HUES = 360;\n// We need to use keydown instead of keypress to handle Esc from the editor textbox:\nconst EVENT_KEY = \"keydown\"; //'keypress'\n\nfunction stopEvent(e: Event) {\n  // Stop an event from bubbling up to the parent:\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction onKey(\n  bucket: EventBucket,\n  target: HTMLElement,\n  keys: string[],\n  handler: any,\n  stop = false\n) {\n  bucket.add(target, EVENT_KEY, function (e: KeyboardEvent) {\n    if (keys.indexOf(e.key) >= 0) {\n      if (stop) {\n        stopEvent(e);\n      }\n      handler(e);\n    }\n  });\n}\n\ninterface Scope extends ColorPickerOptions {\n  namespace: string;\n  hsl: number[];\n  cssHue: string;\n  cssHsl: string;\n  cssHsla: string;\n  alphaBg: string;\n}\n\nexport class Bs5ColorPickerComponent extends Component {\n  public static tagName = \"bs5-colorpicker\";\n  static get observedAttributes(): string[] {\n    return [\n      \"namespace\",\n      \"alpha\",\n      \"editor\",\n      \"editor-format\",\n      \"cancel-button\",\n      \"okay-button\",\n      \"color\",\n    ];\n  }\n\n  protected eventDispatcher?: EventDispatcher;\n\n  public color?: Color;\n  public _debug = false;\n  public scope: Scope = {\n    namespace: \"main\",\n    hsl: [],\n    cssHue: \"\",\n    cssHsl: \"\",\n    cssHsla: \"\",\n    alphaBg: \"\",\n    color: \"#0cf\",\n    alpha: true,\n    editor: true,\n    editorFormat: \"hex\",\n    cancelButton: false,\n    okayButton: false,\n  };\n\n  protected events = new EventBucket();\n\n  protected _domH: HTMLElement | null = null;\n  protected _domSL: HTMLElement | null = null;\n  protected _domA: HTMLElement | null = null;\n  protected _domEdit: HTMLInputElement | null = null;\n  protected _domSample: HTMLElement | null = null;\n  protected _domOkay: HTMLElement | null = null;\n  protected _domCancel: HTMLElement | null = null;\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    super.init(Bs5ColorPickerComponent.observedAttributes);\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.eventDispatcher = EventDispatcher.getInstance(\n      \"bs5-colorpicker:\" + this.scope.namespace\n    );\n    this.setColor(this.scope.color);\n    this.updateUI();\n    this.bindEvents();\n  }\n\n  protected async afterTemplate(\n    template: string | HTMLElement | null\n  ): Promise<any> {\n    await super.afterTemplate(template);\n    this.setElements();\n  }\n\n  /**\n   * Callback whenever the color changes.\n   */\n  protected onChange(color?: Color) {\n    this.debug(\"onChange\", color);\n    this.eventDispatcher?.trigger(\"change\", color);\n  }\n\n  /**\n   * Callback when the user clicks \"Ok\".\n   */\n  protected onDone(color?: Color) {\n    this.debug(\"onDone\", color);\n    this.eventDispatcher?.trigger(\"done\", color);\n  }\n\n  protected async template() {\n    if (hasChildNodesTrim(this)) {\n      return null;\n    } else {\n      const { default: template } = await import(\n        \"./bs5-colorpicker.component.html?raw\"\n      );\n      return template;\n    }\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName === \"color\") {\n      this.setColor(this.scope.color);\n    }\n  }\n\n  /**\n   * Set/initialize the picker's color.\n   *\n   * @param color Color name, RGBA/HSLA/HEX string, or RGBA array.\n   * @param flags If { silent: true }, won't trigger onChange.\n   */\n  protected setColor = debounce(this._setColor.bind(this));\n\n  protected _setColor(color: string, flags: any = { silent: false }) {\n    if (typeof color === \"string\") {\n      color = color.trim();\n    }\n    if (!color) {\n      return;\n    }\n\n    flags = flags || {};\n    let c;\n    try {\n      // Will throw on unknown colors:\n      c = new Color(color);\n    } catch (ex) {\n      if (flags.failSilently) {\n        return;\n      }\n      throw ex;\n    }\n\n    if (!this.scope.alpha) {\n      const hsla = c.hsla;\n      hsla[3] = 1;\n      c.hsla = hsla;\n    }\n    this.color = c;\n    this.setHSLA(null, null, null, null, flags);\n  }\n\n  protected setElements() {\n    this._domH = this.querySelector(\".picker-hue\");\n    this._domSL = this.querySelector(\".picker-sl\");\n    this._domA = this.querySelector(\".picker-alpha\");\n    this._domEdit =\n      (this.querySelector(\".picker-editor\") as HTMLInputElement) || null;\n    this._domSample = this.querySelector(\".picker-sample\");\n    this._domOkay = this.querySelector(\".picker-done\");\n    this._domCancel = this.querySelector(\".picker-cancel\");\n  }\n\n  /**\n   * Release all resources used by this picker instance.\n   */\n  protected disconnectedCallback() {\n    this.events.destroy();\n  }\n\n  /**\n   * Handle user input.\n   */\n  protected bindEvents() {\n    const events = this.events;\n\n    const addEvent = (\n      target: HTMLElement | HTMLInputElement,\n      type: Event[\"type\"],\n      handler: any\n    ) => {\n      events.add(target, type, handler);\n    };\n\n    // Prevent clicks while dragging from bubbling up to the parent:\n    addEvent(this, \"click\", (e: MouseEvent) => e.preventDefault());\n\n    // Draggable color selection\n    const _dragTrack = dragTrack.bind(this);\n\n    // Select hue\n    if (\n      !this._domH ||\n      !this._domSL ||\n      !this._domA ||\n      !this._domEdit ||\n      !this._domOkay\n    ) {\n      throw new Error(\"Not ready!\");\n    }\n    _dragTrack(events, this._domH, (x: number /*, y: number*/) =>\n      this.setHSLA(x)\n    );\n\n    // Select saturation/lightness\n    _dragTrack(events, this._domSL, (x: number, y: number) =>\n      this.setHSLA(null, x, 1 - y)\n    );\n\n    // Select alpha\n    if (this.scope.alpha) {\n      _dragTrack(events, this._domA, (x: number, y: number) =>\n        this.setHSLA(null, null, null, 1 - y)\n      );\n    }\n\n    //Always init the editor, for accessibility and screen readers (we'll hide it with CSS if `!settings.editor`)\n    addEvent(this._domEdit, \"input\", (e: InputEvent) => {\n      const input = e.target as HTMLInputElement;\n      this.setColor(input.value, {\n        fromEditor: true,\n        failSilently: true,\n      });\n    });\n    // Select all text on focus:\n    addEvent(this._domEdit, \"focus\", (e: FocusEvent) => {\n      const input = e.target as HTMLInputElement;\n      //If no current selection:\n      if (input.selectionStart === input.selectionEnd) {\n        input.select();\n      }\n    });\n\n    const onDoneProxy = () => {\n      this.onDone(this.color);\n    };\n    addEvent(this._domOkay, \"click\", onDoneProxy);\n    onKey(events, this, [\"Enter\"], onDoneProxy);\n  }\n\n  /*\n   * \"Hub\" for all color changes\n   *\n   * @private\n   */\n  protected setHSLA(\n    h: number | null = null,\n    s: number | null = null,\n    l: number | null = null,\n    a: number | null = null,\n    flags: any = {}\n  ) {\n    if (!this.color) {\n      throw new Error(\"Not ready!\");\n    }\n    const hsla = this.color.hsla;\n\n    [h, s, l, a].forEach((x, i) => {\n      if (x || x === 0) {\n        hsla[i] = x;\n      }\n    });\n    this.color.hsla = hsla;\n\n    this.updateUI(flags);\n\n    if (this.onChange && !flags.silent) {\n      this.onChange(this.color);\n    }\n  }\n\n  protected updateUI = debounce(this._updateUI.bind(this));\n\n  protected _updateUI(flags: any = {}) {\n    if (!this || !this.color) {\n      return;\n    }\n\n    this.scope.hsl = this.color.hsla;\n    this.scope.cssHue = `hsl(${this.scope.hsl[0] * HUES}, 100%, 50%)`;\n    this.scope.cssHsl = this.color.hslString;\n    this.scope.cssHsla = this.color.hslaString;\n\n    if (!this._domH || !this._domSL || !this._domA) {\n      throw new Error(\"Color ui elements not found!\");\n    }\n\n    const thumbH = this._domH.querySelector(\n      \".picker-selector\"\n    ) as HTMLElement | null;\n    const thumbSL = this._domSL.querySelector(\n      \".picker-selector\"\n    ) as HTMLElement | null;\n    const thumbA = this._domA.querySelector(\n      \".picker-selector\"\n    ) as HTMLElement | null;\n\n    if (!thumbH || !thumbSL || !thumbA || !this._domEdit || !this._domSample) {\n      console.error(\n        thumbH,\n        thumbSL,\n        thumbA,\n        this._domA,\n        this._domSL,\n        this._domH,\n        this._domEdit,\n        this._domSample\n      );\n      throw new Error(\"Not ready!\");\n    }\n\n    const posX = (parent: HTMLElement, child: HTMLElement, relX: number) => {\n      child.style.left = relX * 100 + \"%\";\n    };\n    const posY = (parent: HTMLElement, child: HTMLElement, relY: number) => {\n      child.style.top = relY * 100 + \"%\";\n    };\n\n    posX(this._domH, thumbH, this.scope.hsl[0]);\n\n    // S/L\n    posX(this._domSL, thumbSL, this.scope.hsl[1]);\n    posY(this._domSL, thumbSL, 1 - this.scope.hsl[2]);\n\n    // Alpha\n    posY(this._domA, thumbA, 1 - this.scope.hsl[3]);\n\n    const opaque = this.scope.cssHsl;\n    const transp = opaque.replace(\"hsl\", \"hsla\").replace(\")\", \", 0)\");\n    const bg = `linear-gradient(${[opaque, transp]})`;\n\n    // Let the Alpha slider fade from opaque to transparent:\n    this.scope.alphaBg = bg + \", \" + BG_TRANSP;\n\n    // Don't update the editor if the user is typing.\n    // That creates too much noise because of our auto-expansion of 3/4/6 -> 8 digit hex codes.\n    if (!flags.fromEditor) {\n      const format = this.scope.editorFormat,\n        alpha = this.scope.alpha;\n\n      let color: string;\n      switch (format) {\n        case \"rgb\":\n          color = this.color.printRGB(alpha);\n          break;\n        case \"hsl\":\n          color = this.color.printHSL(alpha);\n          break;\n        default:\n          color = this.color.printHex(alpha);\n      }\n      this.scope.color = color;\n    }\n  }\n}\n","import { Component, ScopeBase } from \"@ribajs/core\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\n\nexport interface Anchor {\n  element: HTMLHeadingElement;\n  href: string;\n  title: string;\n  childs: Anchor[];\n}\n\nexport interface Scope extends ScopeBase {\n  /**\n   * If start is `2` and depth is `2` depth starts on `h2` and ends on `h2`.\n   */\n  headersStart: number;\n  /**\n   * If start is `1` and depth is `1` only `h1` headers are detected, if depth is `2` also `h2` is detected.\n   */\n  headersDepth: number;\n  /**\n   * Depth in how many parents elements should be searched for an id for each found header element (default `1`)\n   */\n  findHeaderIdDepth: number;\n  /**\n   * Selector to search for headers insite of the element\n   */\n  headerParentSelector?: string;\n  /**\n   * Pixels to offset from top when calculating position to scroll there.\n   */\n  scrollOffset: number;\n  /**\n   * The element to scroll (default `window`)\n   */\n  scrollElement?: string;\n  /**\n   * Array of found headers / anchors\n   */\n  anchors: Anchor[];\n}\n\nexport class Bs5ContentsComponent extends Component {\n  public static tagName = \"bs5-contents\";\n\n  protected autobind = true;\n\n  protected wrapperElement?: Element;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"headers-start\",\n      \"headers-depth\",\n      \"find-header-id-depth\",\n      \"header-parent-selector\",\n      \"scroll-offset\",\n      \"scroll-element\",\n    ];\n  }\n\n  public scope: Scope = {\n    headersDepth: 1,\n    headersStart: 2,\n    findHeaderIdDepth: 1,\n    headerParentSelector: undefined,\n    scrollOffset: 0,\n    anchors: [],\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ContentsComponent.observedAttributes);\n  }\n\n  protected getIdFromElementOrParent(\n    element: HTMLElement,\n    depth = 1\n  ): string | null {\n    if (element.id) {\n      return element.id;\n    }\n    if (depth <= this.scope.findHeaderIdDepth) {\n      if (element.parentElement) {\n        return this.getIdFromElementOrParent(element.parentElement, ++depth);\n      }\n    }\n    return null;\n  }\n\n  protected pushHeaders(\n    wrapperElement: Element,\n    headersStart: number,\n    headersDepth: number,\n    pushTo: Anchor[]\n  ) {\n    const headerElements = wrapperElement.querySelectorAll(\n      \"h\" + headersStart\n    ) as NodeListOf<HTMLHeadingElement>;\n    headerElements.forEach((headerElement) => {\n      const id = this.getIdFromElementOrParent(headerElement);\n      if (!id) {\n        return;\n      }\n      pushTo.push({\n        element: headerElement,\n        href: \"#\" + id,\n        title: headerElement.innerHTML,\n        childs: [],\n      });\n      if (headerElement.parentElement && headersDepth >= headersStart + 1) {\n        this.pushHeaders(\n          headerElement.parentElement,\n          headersStart + 1,\n          headersDepth,\n          pushTo[pushTo.length - 1].childs\n        );\n      }\n    });\n  }\n\n  protected async afterBind() {\n    if (\n      this.scope.headerParentSelector &&\n      this.scope.headersStart &&\n      this.scope.headersDepth\n    ) {\n      this.wrapperElement =\n        document.querySelector(this.scope.headerParentSelector) || undefined;\n      this.scope.anchors = [];\n      if (!this.wrapperElement) {\n        console.error(\"No wrapper element found!\");\n        return;\n      }\n      this.pushHeaders(\n        this.wrapperElement,\n        this.scope.headersStart,\n        this.scope.headersDepth,\n        this.scope.anchors\n      );\n    }\n    await super.afterBind();\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"headersStart\", \"headersDepth\", \"headerParentSelector\"];\n  }\n\n  protected async attributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.attributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.scope.anchors = [];\n  }\n\n  protected async template() {\n    // Only set the component template if there no childs already\n    if (hasChildNodesTrim(this)) {\n      return null;\n    } else {\n      const { default: template } = await import(\n        \"./bs5-contents.component.html?raw\"\n      );\n      return template;\n    }\n  }\n}\n","import {\n  Component,\n  HttpService,\n  HttpMethod,\n  HttpDataType,\n  ScopeBase,\n} from \"@ribajs/core\";\nimport { stripHtml } from \"@ribajs/utils/src/type.js\";\nimport {\n  getUID,\n  hasChildNodesTrim,\n  scrollTo,\n  getViewportDimensions,\n} from \"@ribajs/utils/src/dom.js\";\n\nexport interface ValidationObject {\n  fields:\n    | {\n        [name: string]: string | boolean | string[];\n      }\n    | FormData;\n  valid: boolean;\n  error?: string;\n}\n\nexport interface SubmitSettings {\n  action: string;\n  method: HttpMethod;\n  target?: string;\n  type: HttpDataType;\n}\n\nexport interface Scope extends ScopeBase {\n  id: string;\n  form: ValidationObject;\n  onSubmit: Bs5FormComponent[\"onSubmit\"];\n\n  disableSubmitUntilChange: boolean;\n  submitDisabled: boolean;\n  /**\n   * Set this to `true` to submit the form using ajax.\n   * Set this to `false` to use the default submit request with a page reload\n   */\n  useAjax: boolean;\n  /**\n   * Used for the ajax submit request. Default is \"form\" but can also be \"script\" | \"json\" | \"xml\" | \"text\" | \"html\" | \"form\".\n   */\n  ajaxRequestType: HttpDataType;\n  /**\n   * Submitted data for the ajax submit.\n   *\n   * Set this tp `true` if you do not want to use `rv-value` on your form elements,\n   * in this case the property name is in this case the property name is determined from the name attribute:\n   *\n   * @example\n   *   `<input name=\"given-name\">` -> `scope.form.fields.givenName\n   *\n   * Set this to `false` if you if you want to use the rv-value binder,\n   * in this case the property name may be different from the name attribute:\n   * @example\n   *  `<input name=\"given-name\" rv-value=\"form.fields.name | default 'Zelda'\">`\n   *\n   **/\n  autoSetFormData: boolean;\n  stripHtml: boolean;\n  scrollToInvalidElement: true;\n  animateInvalidElement: true;\n}\n\nexport class Bs5FormComponent extends Component {\n  public static tagName = \"bs5-form\";\n  public _debug = false;\n  protected autobind = true;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"id\",\n      \"disable-submit-until-change\",\n      \"use-ajax\",\n      \"ajax-request-type\",\n      \"auto-set-form-data\",\n      \"strip-html\",\n      \"scroll-invalid-element\",\n      \"animate-invalid-element\",\n    ];\n  }\n\n  protected formEl: HTMLFormElement | null = null;\n\n  protected getDefaultScope(): Scope {\n    const scope: Scope = {\n      id: getUID(\"form\"),\n\n      form: {\n        fields: {},\n        valid: false,\n        error: undefined,\n      },\n\n      disableSubmitUntilChange: false,\n\n      submitDisabled: false,\n      onSubmit: this.onSubmit,\n\n      useAjax: true,\n      ajaxRequestType: \"form\",\n      autoSetFormData: true,\n      stripHtml: true,\n      scrollToInvalidElement: true,\n      animateInvalidElement: true,\n    };\n    return scope;\n  }\n\n  public scope: Scope = this.getDefaultScope();\n\n  constructor() {\n    super();\n    this.enableSubmit = this.enableSubmit.bind(this);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5FormComponent.observedAttributes);\n    this.addEventListeners();\n  }\n\n  protected addEventListeners() {\n    if (this.scope.disableSubmitUntilChange) {\n      this.addEventListener(\"input\", this.enableSubmit);\n    }\n  }\n\n  protected removeEventListeners() {\n    this.removeEventListener(\"input\", this.enableSubmit);\n  }\n\n  private enableSubmit() {\n    this.scope.submitDisabled = false;\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.id = this.scope.id;\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n  }\n\n  protected stripHtml() {\n    for (const key in this.scope.form.fields) {\n      if (\n        (this.scope.form.fields as any)[key] &&\n        typeof (this.scope.form.fields as any)[key] === \"string\"\n      ) {\n        (this.scope.form.fields as any)[key] = stripHtml(\n          (this.scope.form.fields as any)[key] as string\n        );\n      }\n    }\n  }\n\n  public onSubmit(event: Event, el: HTMLButtonElement) {\n    this.debug(\"onSubmit\", event, el);\n    if (!this.formEl) {\n      console.warn(\"No form found\");\n      return false;\n    }\n\n    if (this.scope.autoSetFormData) {\n      this.getFormValues();\n    }\n\n    if (this.scope.stripHtml) {\n      this.stripHtml();\n    }\n\n    this.validate(this.formEl, this.scope.form);\n\n    if (!this.scope.form.valid) {\n      this.onInvalidForm(event);\n      return;\n    }\n\n    const submitSettings = this.getSubmitSettings(event);\n    if (submitSettings?.target === \"_blank\") {\n      return true;\n    }\n\n    if (this.scope.useAjax) {\n      // stop native submit because we submit the data using javascript\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.ajaxSubmit(event, el);\n    }\n  }\n\n  /**\n   * TODO Not tested in the wild, may need to be adjusted. Also the error handling is untested\n   */\n  protected async ajaxSubmit(event?: Event, el?: HTMLButtonElement) {\n    this.debug(\"onSubmit\", event, el, this.scope);\n    const submitSettings = this.getSubmitSettings(event);\n    if (!submitSettings) {\n      console.warn(\"Can't get submit settings\");\n      return;\n    }\n\n    if (this.scope.autoSetFormData) {\n      this.getFormValues();\n    }\n\n    try {\n      // This method is untested in the wild\n      const res = await HttpService.fetch(\n        submitSettings.action,\n        submitSettings.method,\n        this.scope.form.fields,\n        submitSettings.type\n      );\n\n      if (!res || !res.body) {\n        return this.onErrorSubmit(\"500\", \"Error\", \"Empty body!\");\n      }\n\n      const message = res.body && res.body.message ? res.body.message : \"\";\n      if (Number(res.status) >= 400) {\n        // TODO generate message by status\n        this.onErrorSubmit(res.status.toString(), message, res.body);\n      }\n      return this.onSuccessSubmit(res.status.toString(), message, res.body);\n    } catch (err: any) {\n      if (err.status && err.body) {\n        this.onErrorSubmit(err.status, err.body.message, err.body);\n      } else {\n        throw this.error;\n      }\n    }\n  }\n\n  protected getSubmitSettings(event?: Event) {\n    if (!this.formEl) {\n      console.warn(\"No form found\");\n      return null;\n    }\n\n    let action = this.formEl.action;\n    let method = this.formEl.method;\n    let target = this.formEl.method;\n\n    // Overwrite action by formaction attribute: <button type=\"submit\" formaction=\"/foobar\">\n\n    // TODO submitter from vanilla event\n\n    // If this is a jquery event\n    if ((event as any)?.originalEvent?.submitter) {\n      const submitter = (event as any)?.originalEvent?.submitter;\n      action = submitter?.formAction || action;\n      method = submitter?.formMethod || method;\n      target = submitter?.formTarget || target;\n    }\n\n    const settings: SubmitSettings = {\n      action,\n      method: method.toUpperCase() as HttpMethod,\n      target,\n      type: this.scope.ajaxRequestType,\n    };\n\n    return settings;\n  }\n\n  protected onInvalidForm(event: Event): void {\n    this.debug(\"Form not valid\", this.scope);\n    // stop native submit\n    event.preventDefault();\n    event.stopPropagation();\n    if (!this.formEl) {\n      console.warn(\"No form found\");\n      return;\n    }\n    const invalidElements =\n      this.formEl.querySelectorAll<HTMLElement>(\":invalid\");\n    if (invalidElements && invalidElements.length) {\n      const invalidElement = invalidElements[0];\n      if (this.scope.scrollToInvalidElement) {\n        this.scrollToElement(invalidElement);\n      }\n      if (this.scope.animateInvalidElement) {\n        this.scrollToElement(invalidElement);\n      }\n    }\n\n    this.dispatchEvent(\n      new CustomEvent(\"invalid\", {\n        detail: { elements: invalidElements },\n      })\n    );\n  }\n\n  protected scrollToElement(invalidElement: HTMLElement) {\n    const vp = getViewportDimensions();\n    const offset = vp.h / 2;\n    scrollTo(invalidElement, offset, window);\n    this.animateInvalidElement(invalidElement);\n  }\n\n  protected animateInvalidElement(invalidElement: HTMLElement, endsOn = 3000) {\n    invalidElement.classList.add(\"invalid-flashing-animation\");\n    setTimeout(() => {\n      invalidElement.classList.remove(\"invalid-flashing-animation\");\n    }, endsOn);\n  }\n\n  protected onErrorSubmit(status: string, message: string, response: any) {\n    this.debug(\"onErrorSubmit\");\n    this.dispatchEvent(\n      new CustomEvent(\"submit-error\", {\n        detail: { status, message: message, response },\n      })\n    );\n  }\n\n  protected onSuccessSubmit(status: string, message: string, response: any) {\n    this.debug(\"onSuccessSubmit\");\n    if (this.scope.disableSubmitUntilChange) {\n      this.scope.submitDisabled = true;\n    }\n\n    this.dispatchEvent(\n      new CustomEvent(\"submit-success\", {\n        detail: { status, message: message, response },\n      })\n    );\n  }\n\n  protected validate(\n    form: HTMLFormElement,\n    validationScope: ValidationObject,\n    errorEventName = \"validation-error\"\n  ) {\n    validationScope.valid = form.checkValidity();\n    validationScope.error = form.validationMessage;\n    // only show validation if we want to give a hint to the user that something is wrong\n    if (!validationScope.valid) {\n      this.dispatchEvent(new CustomEvent(errorEventName));\n      form.classList.add(\"was-validated\");\n    }\n  }\n\n  protected getFormValues() {\n    if (!this.formEl) {\n      console.warn(\"No form found\");\n      return null;\n    }\n    // this.formEl.querySelectorAll(\"input\").forEach((element) => {\n    //   this.scope.form.fields[camelCase(element.name)] = getInputValue(element);\n    // });\n    this.scope.form.fields = new FormData(this.formEl);\n    return this.scope.form.fields;\n  }\n\n  protected initForm() {\n    const formEl = this.querySelector(\"form\");\n    if (formEl && formEl.length > 0) {\n      this.formEl = formEl;\n      this.formEl.classList.add(\"needs-validation\");\n      this.formEl.setAttribute(\"novalidate\", \"\");\n    } else {\n      console.warn(\"bs5 form without children found\");\n    }\n  }\n\n  protected async template() {\n    if (hasChildNodesTrim(this)) {\n      this.initForm();\n      return null;\n    } else {\n      const { default: template } = await import(\n        \"./bs5-form.component.html?raw\"\n      );\n      return template;\n    }\n  }\n}\n","import {\n  BasicComponent,\n  TemplateFunction,\n  HttpService,\n  HttpServiceResponse,\n} from \"@ribajs/core\";\nimport { getLocation } from \"@ribajs/utils\";\nimport { BaseCache } from \"@ribajs/cache\";\nimport { JsxBs5IconProps } from \"../../types/jsx/jsx-icon-props.js\";\n\nexport class Bs5IconComponent extends BasicComponent {\n  public static tagName = \"bs5-icon\";\n  public static cache = new BaseCache<Promise<HttpServiceResponse<string>>>();\n\n  static get observedAttributes(): (keyof JsxBs5IconProps)[] {\n    return [\"size\", \"width\", \"height\", \"src\", \"color\", \"direction\", \"alt\"];\n  }\n\n  public scope: any = {};\n\n  constructor() {\n    super();\n  }\n\n  protected getSvg() {\n    return this.querySelector(\"svg\");\n  }\n\n  protected async fetchCached(url: string) {\n    let response = Bs5IconComponent.cache.get(url);\n    if (response) {\n      return response;\n    }\n    response = HttpService.get(url);\n    if (response) {\n      Bs5IconComponent.cache.set(url, response);\n    }\n    return response;\n  }\n\n  protected async fetchIcon(src: string) {\n    let response: HttpServiceResponse<string>;\n\n    // Append hostname on ssr\n    if (\n      window?.ssr &&\n      !src.startsWith(\"http\") &&\n      !src.startsWith(\"ftp\") &&\n      !src.startsWith(\"sftp\")\n    ) {\n      let url: URL;\n\n      if (window.ssr.env.NEST_INTERN_URL) {\n        url = new URL(src, window.ssr.env.NEST_INTERN_URL);\n      } else if (window.ssr.ctx) {\n        url = new URL(\n          src,\n          window.ssr.ctx.protocol + \"://\" + window.ssr.ctx.hostname\n        );\n      } else {\n        throw new Error(\"Host for SSR not found!\");\n      }\n\n      response = await this.fetchCached(url.href);\n    } else {\n      response = await this.fetchCached(src);\n    }\n\n    if (response.status !== 200) {\n      console.error(response.status);\n      return \"\";\n    }\n\n    if (response.headers.get(\"content-type\")?.includes(\"image/svg+xml\")) {\n      return response.body;\n    }\n\n    console.error(\n      \"[bs5-icon] Only SVG's are supported! But content-type is \" +\n        response.headers.get(\"content-type\")\n    );\n    return \"\";\n  }\n\n  protected getBasename(src: string) {\n    const pathnames = getLocation(src).pathname.split(\"/\");\n    return pathnames?.[pathnames.length - 1];\n  }\n\n  protected getAlternativeText(src: string) {\n    const basename = this.getBasename(src);\n    return basename.split(\".\")[0]?.replaceAll(\"_\", \" \");\n  }\n\n  protected async onSrcChanged() {\n    let icon = \"\";\n\n    if (!this.scope.src) {\n      this.innerHTML = \"\";\n      return;\n    }\n    const alt = this.getAlternativeText(this.scope.src);\n    if (alt) this.setAttribute(\"alt\", alt);\n\n    const currentSvg = this.getSvg();\n    const oldSrc = currentSvg ? currentSvg.getAttribute(\"src\") : \"\";\n\n    // Icon already set (maybe on SSR)\n    if (oldSrc === this.scope.src) {\n      return;\n    }\n\n    try {\n      icon = await this.fetchIcon(this.scope.src);\n    } catch (error) {\n      console.warn(\n        `Error on fetch icon \"${this.scope.src}\"! Try to switch the protocol...`,\n        error\n      );\n      // Try to switch protocol on error\n      if (this.scope.src.startsWith(\"//\")) {\n        this.scope.src = location.protocol + this.scope.src;\n      }\n      const url = new URL(this.scope.src);\n      if (url.protocol === \"http:\") {\n        url.protocol = \"https:\";\n      } else {\n        url.protocol = \"http:\";\n      }\n      try {\n        icon = await this.fetchIcon(url.href);\n      } catch (error2) {\n        console.error(\n          `Error on fetch icon \"${this.scope.src}\"!`,\n          error,\n          error2\n        );\n        return;\n      }\n    }\n\n    if (!icon) {\n      console.error(`Error on fetch icon \"${this.scope.src}\"!`);\n      return;\n    }\n\n    this.innerHTML = icon;\n    const newSvg = this.getSvg();\n    if (newSvg) {\n      newSvg.setAttribute(\"src\", this.scope.src);\n    }\n  }\n\n  protected removeColor() {\n    this.className = this.className.replace(/(^|\\s)color-\\S+/g, \"\");\n    this.style.color = \"\";\n  }\n\n  protected setColor(color?: string) {\n    if (!color) {\n      return this.removeColor();\n    }\n    if (color.includes(\",\")) {\n      const colorArr = color.split(\",\");\n      if (colorArr.length > 0) {\n        this.className = this.className.replace(/(^|\\s)color-\\S+/g, \"\");\n        for (let i = 0; i < colorArr.length; i++) {\n          const newColor: string = colorArr[i];\n          if (newColor.startsWith(\"#\") || newColor.startsWith(\"rgb\")) {\n            this.style.color = newColor;\n          }\n          this.classList.add(`color-${newColor}`);\n        }\n      }\n    } else {\n      this.style.color = color;\n      this.className = this.className.replace(/(^|\\s)color-\\S+/g, \"\");\n      this.classList.add(`color-${color}`);\n    }\n  }\n\n  protected setSize(size: number) {\n    this.style.height = size + \"px\";\n    this.style.width = size + \"px\";\n    this.className = this.className.replace(/(^|\\s)size-\\S+/g, \"\");\n    this.classList.add(`size-${size}`);\n  }\n\n  protected setWidth(width: number) {\n    this.style.width = width + \"px\";\n    this.className = this.className.replace(/(^|\\s)width-\\S+/g, \"\");\n    this.classList.add(`width-${width}`);\n  }\n\n  protected setHeight(height: number) {\n    this.style.height = height + \"px\";\n    this.className = this.className.replace(/(^|\\s)height-\\S+/g, \"\");\n    this.classList.add(`height-${height}`);\n  }\n\n  protected setDirection(direction: string) {\n    let classString = `direction-${direction}`;\n    if (direction === \"left\") {\n      classString += \" rotate-270\";\n    } else if (\n      direction === \"left-top\" ||\n      direction === \"left-up\" ||\n      direction === \"top-left\" ||\n      direction === \"up-left\"\n    ) {\n      classString += \" rotate-315\";\n    } else if (direction === \"top\" || direction === \"up\") {\n      classString += \" rotate-0\";\n    } else if (\n      direction === \"top-right\" ||\n      direction === \"up-right\" ||\n      direction === \"right-top\" ||\n      direction === \"right-up\"\n    ) {\n      classString += \" rotate-45\";\n    } else if (direction === \"right\") {\n      classString += \" rotate-90\";\n    } else if (\n      direction === \"right-bottom\" ||\n      direction === \"right-down\" ||\n      direction === \"bottom-right\" ||\n      direction === \"down-right\"\n    ) {\n      classString += \" rotate-135\";\n    } else if (direction === \"bottom\" || direction === \"down\") {\n      classString += \" rotate-180\";\n    } else if (\n      direction === \"left-bottom\" ||\n      direction === \"left-down\" ||\n      direction === \"bottom-left\" ||\n      direction === \"down-left\"\n    ) {\n      classString += \" rotate-225\";\n    }\n\n    this.className = this.className.replace(/(^|\\s)direction-\\S+/g, \"\");\n    this.className = this.className.replace(/(^|\\s)rotate-\\S+/g, \"\");\n    this.className += \" \" + classString;\n  }\n\n  protected async attributeChangedCallback(\n    name: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    // injects the changed attributes to scope\n    super.attributeChangedCallback(name, oldValue, newValue, namespace);\n\n    if (name === \"src\") {\n      // if (!newValue) {\n      //   console.warn(\"The src attribute must have a value!\", this.scope);\n      //   return \"\";\n      // }\n      this.onSrcChanged();\n    }\n\n    if (name === \"color\") {\n      this.setColor(newValue);\n    }\n\n    if (name === \"size\") {\n      this.setSize(newValue);\n    }\n\n    if (name === \"width\") {\n      this.setWidth(newValue);\n    }\n\n    if (name === \"height\") {\n      this.setHeight(newValue);\n    }\n\n    if (name === \"direction\") {\n      this.setDirection(newValue);\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute(\"aria-hidden\", \"true\");\n    this.setAttribute(\"role\", \"icon\");\n    this.setAttribute(\"alt\", \"icon\");\n    this.classList.add(\"iconset\");\n    this.init(Bs5IconComponent.observedAttributes);\n    // set default values\n    if (!this.scope.direction) {\n      this.scope.direction = \"up\";\n      this.attributeChangedCallback(\n        \"direction\",\n        null,\n        this.scope.direction,\n        null\n      );\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","export default \"<div class=\\\"modal fade\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" rv-add-class=\\\"modal.contextualClass | prepend 'modal-'\\\">\\n  <div class=\\\"modal-dialog\\\">\\n    <div class=\\\"modal-content\\\">\\n      <div class=\\\"modal-header\\\" rv-show=\\\"modal.title\\\">\\n        <h5 class=\\\"modal-title\\\" rv-template=\\\"modal.title\\\"></h5>\\n        <button type=\\\"button\\\" class=\\\"btn-close\\\" aria-label=\\\"Close\\\" rv-on-click=\\\"dismiss\\\"></button>\\n      </div>\\n      <div class=\\\"modal-body\\\">\\n        <p rv-template=\\\"modal.message\\\"></p>\\n      </div>\\n      <div class=\\\"modal-footer\\\" rv-show=\\\"modal.buttons | size | gt 0\\\">\\n        <div rv-each-button=\\\"modal.buttons\\\">\\n          <button type=\\\"button\\\" class=\\\"btn\\\" rv-add-class=\\\"button.class\\\" rv-on-click=\\\"button.action\\\" rv-template=\\\"modal.label\\\"></button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","import { Component, ScopeBase } from \"@ribajs/core\";\n\nimport { getElementFromEvent } from \"@ribajs/utils/src/dom.js\";\nimport { Modal, ModalNotification } from \"../../services/index.js\";\nimport { Scope as Bs5NotificationContainerScope } from \"../bs5-notification-container/bs5-notification-container.component.js\";\nimport template from \"./bs5-modal-item.component.html?raw\";\n\ninterface Scope extends ScopeBase {\n  iconUrl?: string;\n  modal?: ModalNotification;\n  onHidden: Bs5ModalItemComponent[\"onHidden\"];\n  dismiss: Bs5ModalItemComponent[\"dismiss\"];\n  index: number;\n  $parent?: any;\n  $event?: CustomEvent;\n}\n\n/**\n * Use this component to show a modal inside a bs5-notification-container\n */\nexport class Bs5ModalItemComponent extends Component {\n  public static tagName = \"bs5-modal-item\";\n\n  public _debug = false;\n  protected autobind = true;\n\n  protected modalService?: Modal;\n\n  static get observedAttributes(): string[] {\n    return [\"modal\", \"index\"];\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"modal\"];\n  }\n\n  public scope: Scope = {\n    onHidden: this.onHidden.bind(this),\n    index: -1,\n    dismiss: this.dismiss.bind(this),\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ModalItemComponent.observedAttributes);\n  }\n\n  protected async afterBind() {\n    this.initModal();\n    await super.afterBind();\n  }\n\n  protected initModal() {\n    const modal = this.scope.modal;\n    const modalEl = this.firstElementChild as HTMLElement | null;\n    if (modal && modalEl) {\n      this.modalService = new Modal(modalEl, {\n        focus: modal.focus !== undefined ? modal.focus : true,\n        keyboard: modal.keyboard !== undefined ? modal.keyboard : true,\n        backdrop: modal.backdrop !== undefined ? modal.backdrop : true,\n      });\n\n      // Call onHidden on hidden event once\n      modalEl.addEventListener(Modal.EVENT_HIDDEN, this.scope.onHidden, {\n        once: true,\n      });\n\n      // show modal using the modal service\n      this.modalService.show();\n    }\n  }\n\n  // Can be called if modal should be removed\n  public dismiss() {\n    this.modalService?.hide();\n  }\n\n  // Remove modal from dom once shown\n  public onHidden(event: Event, el?: HTMLElement) {\n    if (!el) {\n      el = getElementFromEvent(event);\n    }\n    const notificationContainer: Bs5NotificationContainerScope | null =\n      this.scope.$parent?.$parent || null;\n    if (\n      typeof notificationContainer?.onItemHide === \"function\" &&\n      this.scope.modal &&\n      el\n    ) {\n      notificationContainer.onItemHide(\n        event,\n        el,\n        this.scope.index,\n        this.scope.modal\n      );\n    }\n  }\n  protected async template() {\n    // const { default: template } = await import(\n    //   \"./bs5-modal-item.component.html?raw\"\n    // );\n    return template;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Collapse } from \"../../services/collapse.js\";\n\nexport class Bs5NavbarComponent extends Component {\n  public static tagName = \"bs5-navbar\";\n\n  public scope: any = {\n    toggle: this.toggle,\n    show: this.show,\n    hide: this.hide,\n    isCollapsed: true,\n    collapseSelector: \".navbar-collapse\",\n  };\n\n  protected collapseTargets: Map<HTMLElement, Collapse> = new Map();\n  protected routerEvents?: EventDispatcher;\n\n  static get observedAttributes(): string[] {\n    return [\"collapse-selector\"];\n  }\n\n  constructor() {\n    super();\n    this.onStateChange = this.onStateChange.bind(this);\n  }\n\n  protected async afterBind() {\n    this.hide();\n    await super.afterBind();\n  }\n\n  public toggle(event?: Event) {\n    for (const collapseService of this.collapseTargets.values()) {\n      collapseService.toggle();\n    }\n\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  public show(event?: Event) {\n    for (const collapseService of this.collapseTargets.values()) {\n      collapseService.show();\n    }\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  public hide(event?: Event) {\n    for (const collapseService of this.collapseTargets.values()) {\n      collapseService.hide();\n    }\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.routerEvents = new EventDispatcher(\"main\");\n    this.routerEvents.on(\"newPageReady\", this.onNewPageReady, this);\n\n    this.setCollapseElement();\n\n    this.onStateChange();\n\n    this.init(Bs5NavbarComponent.observedAttributes);\n  }\n\n  protected setCollapseElement() {\n    const collapseElements = Array.from(\n      this.querySelectorAll<HTMLElement>(this.scope.collapseSelector) || []\n    );\n\n    // remove old collapse targets\n    for (const collapseElement of this.collapseTargets.keys()) {\n      if (!collapseElements.find((ce) => ce === collapseElement)) {\n        this.disposeCollapseTarget(collapseElement);\n      }\n    }\n\n    // add new collapse targets\n    for (const collapseElement of collapseElements) {\n      if (!this.collapseTargets.has(collapseElement)) {\n        this.collapseTargets.set(\n          collapseElement,\n          new Collapse(collapseElement, { toggle: false })\n        );\n        collapseElement.addEventListener(\n          Collapse.Events.shown,\n          this.onStateChange\n        );\n        collapseElement.addEventListener(\n          Collapse.Events.hidden,\n          this.onStateChange\n        );\n      }\n    }\n\n    this.hide();\n  }\n\n  protected disposeCollapseTargets() {\n    for (const collapseElement of this.collapseTargets.keys()) {\n      this.disposeCollapseTarget(collapseElement);\n    }\n  }\n\n  protected disposeCollapseTarget(collapseElement: HTMLElement) {\n    const collapseService = this.collapseTargets.get(collapseElement);\n    if (collapseService) {\n      collapseService.dispose();\n    }\n    this.collapseTargets.delete(collapseElement);\n    collapseElement.removeEventListener(\n      Collapse.Events.shown,\n      this.onStateChange\n    );\n    collapseElement.removeEventListener(\n      Collapse.Events.hidden,\n      this.onStateChange\n    );\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.disposeCollapseTargets();\n    if (this.routerEvents) {\n      this.routerEvents.off(\"newPageReady\", this.onNewPageReady, this);\n    }\n  }\n\n  protected onStateChange() {\n    this.scope.isCollapsed = this.collapseTargets\n      .values()\n      .next()\n      .value?.isCollapsed();\n\n    if (this.scope.isCollapsed) {\n      this.classList.add(Collapse.CLASS_NAME_COLLAPSED);\n      this.setAttribute(\"aria-expanded\", \"false\");\n    } else {\n      this.classList.remove(Collapse.CLASS_NAME_COLLAPSED);\n      this.setAttribute(\"aria-expanded\", \"true\");\n    }\n  }\n\n  protected onNewPageReady() {\n    this.hide();\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName === \"collapseSelector\") {\n      this.setCollapseElement();\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","export default \"<div class=\\\"toast-container\\\">\\n  <div aria-live=\\\"polite\\\" aria-atomic=\\\"true\\\" class=\\\"toast-item-container\\\" rv-add-class=\\\"positionClass\\\">\\n    <div rv-each-toast=\\\"notifications\\\" >\\n      <div rv-if=\\\"toast.type | eq 'toast'\\\">\\n        <bs5-toast-item rv-index=\\\"%toast%\\\" rv-parent rv-icon-url=\\\"iconUrl\\\" rv-co-toast=\\\"toast\\\"></bs5-toast-item>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n<div rv-each-modal=\\\"notifications\\\">\\n  <div rv-if=\\\"modal.type | eq 'modal'\\\">\\n    <bs5-modal-item rv-index=\\\"%modal%\\\" rv-parent rv-icon-url=\\\"iconUrl\\\" rv-co-modal=\\\"modal\\\"></bs5-modal-item>\\n  </div>\\n</div>\"","import { Component, ScopeBase } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { Notification } from \"../../types/index.js\";\n\nimport template from \"./bs5-notification-container.component.html?raw\";\n\nexport interface Scope extends ScopeBase {\n  iconUrl?: string;\n  positionClass: string;\n  notifications: Notification[];\n  channelName: string;\n  onItemHide: Bs5NotificationContainerComponent[\"onItemHide\"];\n}\n\nexport class Bs5NotificationContainerComponent extends Component {\n  public static tagName = \"bs5-notification-container\";\n\n  protected autobind = true;\n  public _debug = false;\n\n  protected notificationDispatcher?: EventDispatcher;\n\n  static get observedAttributes(): string[] {\n    return [\"icon-url\", \"position-class\", \"channel-name\"];\n  }\n\n  public scope: Scope = {\n    notifications: [],\n    positionClass: \"absolute-bottom absolute-center\",\n    channelName: \"toast\",\n    onItemHide: this.onItemHide,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5NotificationContainerComponent.observedAttributes);\n  }\n\n  // Called by child if notification item wants to be removed\n  public onItemHide(\n    this: Scope,\n    event: Event,\n    el: HTMLElement,\n    index: number,\n    notification: Notification\n  ) {\n    if (index > -1) {\n      this.notifications.splice(index, 1);\n    } else {\n      console.warn(\"Notification not found\", notification);\n    }\n  }\n\n  protected onShowNotification(notification: Notification) {\n    this.debug(\n      \"Received notification container on \" + this.scope.channelName,\n      this.scope,\n      notification\n    );\n    this.scope.notifications.push(notification);\n  }\n\n  protected async afterBind() {\n    // Add event dispatcher to listen for toast notifications\n    this.notificationDispatcher = new EventDispatcher(this.scope.channelName);\n    this.notificationDispatcher.on(\n      \"show-notification\",\n      this.onShowNotification,\n      this\n    );\n    await super.afterBind();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    (this.notificationDispatcher as EventDispatcher).off(\n      \"show-notification\",\n      this.onShowNotification,\n      this\n    );\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected async template() {\n    // Only set the component template if there no childs or the childs are templates\n    if (!hasChildNodesTrim(this)) {\n      // TODO this is not working if multiple components are used on the same page\n      // const { default: template } = await import(\n      //   \"./bs5-notification-container.component.html?raw\"\n      // );\n      return template;\n    }\n    return null;\n  }\n}\n","import {\n  Bs5ContentsComponent,\n  Scope as Bs5ContentsComponentScope,\n} from \"../bs5-contents/bs5-contents.component.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\n\nexport interface Anchor {\n  element: HTMLHeadingElement;\n  href: string;\n  title: string;\n  childs: Anchor[];\n}\n\nexport interface Scope extends Bs5ContentsComponentScope {\n  /**\n   * Pixels to offset from top when calculating position of scroll.\n   */\n  offset: number;\n  /**\n   * Pixels to offset from bottom when calculating position of scroll.\n   */\n  offsetBottom: number;\n}\n\nexport class Bs5ScrollspyComponent extends Bs5ContentsComponent {\n  public static tagName = \"bs5-scrollspy\";\n\n  protected autobind = true;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"headers-start\",\n      \"headers-depth\",\n      \"find-header-id-depth\",\n      \"header-parent-selector\",\n      \"offset\",\n      \"offset-bottom\",\n      \"scroll-offset\",\n    ];\n  }\n\n  public scope: Scope = {\n    headersDepth: 1,\n    headersStart: 2,\n    findHeaderIdDepth: 1,\n    headerParentSelector: undefined,\n    offset: 0,\n    offsetBottom: 0,\n    scrollOffset: 0,\n    anchors: [],\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ScrollspyComponent.observedAttributes);\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"headersStart\", \"headersDepth\", \"headerParentSelector\"];\n  }\n\n  protected async template() {\n    // Only set the component template if there no childs already\n    if (hasChildNodesTrim(this)) {\n      return null;\n    } else {\n      const { default: template } = await import(\n        \"./bs5-scrollspy.component.html?raw\"\n      );\n      return template;\n    }\n  }\n}\n","export default \"<div rv-add-class=\\\"'drop' | append dropdownDirection\\\">\\n  <button class=\\\"btn btn-icon dropdown-toggle dropdown-toggle-share d-flex align-items-center\\\" rv-id=\\\"dropdownId\\\"\\n    rv-template=\\\"labelTemplate\\\" aria-label=\\\"Toggle dropdown share menu\\\"></button>\\n  <div class=\\\"dropdown-menu\\\" rv-aria-labelledby=\\\"dropdownId\\\" rv-add-class=\\\"'dropdown-menu-' | append dropdownAlignment\\\">\\n\\n    <div rv-each-item=\\\"shareItems\\\">\\n      <div rv-if=\\\"item.available\\\" rv-on-click=\\\"shareOnService | args item\\\">\\n        <a rv-if=\\\"item.type | eq 'download'\\\" class=\\\"dropdown-item no-barba cursor-pointer\\\" rv-type=\\\"item.type\\\"\\n          target=\\\"_blank\\\" rv-download=\\\"getFilename | call item\\\" rv-href=\\\"item.url\\\" rv-html=\\\"item.label\\\">\\n        </a>\\n        <div class=\\\"dropdown-item cursor-pointer\\\" rv-unless=\\\"item.type | eq 'download'\\\" rv-type=\\\"item.type\\\"\\n          rv-html=\\\"item.label\\\"></div>\\n      </div>\\n\\n    </div>\\n\\n  </div>\\n</div>\"","export default \"<div class=\\\"share-label\\\" rv-on-click=\\\"share\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" rv-text=\\\"label\\\"></div>\\n\"","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { getUrl } from \"@ribajs/utils/src/url\";\nimport template from \"./bs5-share.component.html?raw\";\nimport labelTemplate from \"./bs5-share.label.html?raw\";\nimport { ShareItem, ShareUrlType } from \"../../types/index.js\";\nimport { Dropdown } from \"@ribajs/bs5\";\nimport {\n  hasChildNodesTrim,\n  copyTextToClipboard,\n  stripHtml,\n} from \"@ribajs/utils\";\n\nexport interface Scope extends ScopeBase {\n  type: ShareUrlType;\n  title: string;\n  text: string;\n  /** Page url to share */\n  url?: string;\n  label: string;\n  labelTemplate: string;\n  filename?: string;\n\n  /** true if the browser runs on Android */\n  isAndroid: boolean;\n  /** true if the browser runs on iOS */\n  isIos: boolean;\n  /** true if the browser runs on a desktop computer */\n  isDesktop: boolean;\n  /** true if the browser supports native share */\n  isNative: boolean;\n  dropdownId: string;\n  /**\n   * Object with share urls like WhatsApp, Telegram, instagram etc used if the native share is not available\n   * Only used if the browser has not an native share support like on android and iOS\n   * */\n  shareItems: ShareItem[];\n\n  dropdownDirection: \"up\" | \"down\" | \"start\" | \"end\";\n  dropdownAlignment: \"end\" | \"start\" | \"auto\";\n\n  labelFacebook: string;\n  labelTwitter: string;\n  labelPinterest: string;\n  labelWhatsapp: string;\n  labelTelegram: string;\n  labelEmail: string;\n  labelDownload: string;\n  labelClipboard: string;\n\n  // Methods\n  shareOnService: Bs5ShareComponent[\"shareOnService\"];\n  share: Bs5ShareComponent[\"share\"];\n  getFilename: Bs5ShareComponent[\"getFilename\"];\n}\n\nexport interface NavigatorShareParam {\n  url: string;\n  text: string;\n  title: string;\n}\n\ndeclare global {\n  // tslint:disable: interface-name\n  interface Navigator {\n    share: (data?: ShareData) => Promise<void>;\n  }\n}\n\n/**\n * Component to share the a link\n * Similar projects which are can share stuff:\n *  * https://github.com/nimiq/web-share-shim\n *  * http://webintents.org/\n *  * http://chriswren.github.io/native-social-interactions/\n *  * https://github.com/dimsemenov/PhotoSwipe/blob/master/src/js/ui/photoswipe-ui-default.js\n *\n */\nexport class Bs5ShareComponent extends Component {\n  public static tagName = \"bs5-share\";\n\n  public _debug = false;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"type\",\n      \"title\",\n      \"text\",\n      \"url\",\n      \"media-url\",\n      \"filename\",\n      \"label\",\n      \"dropdown-direction\",\n      \"dropdown-alignment\",\n      \"label-facebook\",\n      \"label-twitter\",\n      \"label-pinterest\",\n      \"label-whatsapp\",\n      \"label-telegram\",\n      \"label-email\",\n      \"label-download\",\n      \"label-clipboard\",\n    ];\n  }\n\n  protected dropdown?: Dropdown;\n\n  // Count of Bs5ShareComponent components\n  static count = 0;\n\n  public scope: Scope;\n\n  constructor() {\n    super();\n    this.scope = this.getScopeDefaults();\n    // this.debug(\"constructor\", this.scope);\n    Bs5ShareComponent.count++;\n    this.onExternalOpenEvent = this.onExternalOpenEvent.bind(this);\n    this.onExternalCloseEvent = this.onExternalCloseEvent.bind(this);\n  }\n\n  public getFilename(item: ShareItem) {\n    if (item.filename) {\n      return item.filename;\n    }\n    const url = this.getMediaUrlForShare();\n    const filename = url.split(\"/\").pop();\n    return filename;\n  }\n\n  protected getDefaultShareServices() {\n    const newLine = \"%0A\";\n    const shareItems: ShareItem[] = [\n      {\n        id: \"facebook\",\n        label: this.scope.labelFacebook,\n        // It is not possible to add a message on facebook sharer.php but with the Dialog API, see https://developers.facebook.com/docs/javascript/reference/FB.ui\n        urlTemplate: \"https://www.facebook.com/sharer/sharer.php?u={{url}}\",\n        mediaUrlTemplate:\n          \"https://www.facebook.com/sharer/sharer.php?u={{media_url}}\",\n        type: \"popup\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      {\n        id: \"twitter\",\n        label: this.scope.labelTwitter,\n        urlTemplate:\n          \"https://twitter.com/intent/tweet?text={{text}}&url={{url}}\",\n        mediaUrlTemplate: `https://twitter.com/intent/tweet?text={{text}}&url={{media_url}}${newLine}({{url}})`,\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      {\n        id: \"pinterest\",\n        label: this.scope.labelPinterest,\n        urlTemplate:\n          \"http://www.pinterest.com/pin/create/button/\" +\n          \"?url={{url}}&media={{media_url}}&description={{text}}\",\n        type: \"popup\",\n        url: \"\",\n\n        availableFor: [\"image\", \"video\"],\n      },\n      {\n        id: \"whatsapp\",\n        label: this.scope.labelWhatsapp,\n        urlTemplate: `https://api.whatsapp.com/send?text={{text}}${newLine}${newLine}{{url}}`,\n        mediaUrlTemplate: `https://api.whatsapp.com/send?text={{text}}${newLine}${newLine}{{media_url}}${newLine}({{url}})`,\n        type: \"popup\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      {\n        id: \"telegram\",\n        label: this.scope.labelTelegram,\n        urlTemplate: `https://telegram.me/share/url?url={{url}}&text={{text}}`,\n        mediaUrlTemplate: `https://telegram.me/share/url?url={{media_url}}&text={{text}}${newLine}({{url}})`,\n        type: \"popup\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      {\n        id: \"email\",\n        label: this.scope.labelEmail,\n        urlTemplate: `mailto:?subject={{title}}&body={{text}}${newLine}${newLine}{{url}}`,\n        mediaUrlTemplate: `mailto:?subject={{title}}&body={{text}}${newLine}${newLine}{{media_url}}${newLine}({{url}})`,\n        type: \"href\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      // {\n      //   id: \"sms\",\n      //   label: \"SMS\",\n      //   urlTemplate: \"sms:?body={{text}}\",\n      //   type: 'href',\n      //   url: \"\",\n      //   canPassUrl: false,\n      //   availableFor: ['page', 'image', 'video'],\n      // },\n      {\n        id: \"download\",\n        label: this.scope.labelDownload,\n        urlTemplate: \"{{raw_media_url}}\",\n        type: \"download\",\n        url: \"\",\n        availableFor: [\"image\", \"video\"],\n        filename: this.scope.filename,\n      },\n      {\n        id: \"clipboard\",\n        label: this.scope.labelClipboard,\n        urlTemplate: \"{{url}}\",\n        mediaUrlTemplate: `{{media_url}}`,\n        type: \"clipboard\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n    ];\n    return shareItems;\n  }\n\n  protected isIos() {\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i) !== null;\n  }\n\n  protected isAndroid() {\n    return navigator.userAgent.match(/Android/i) !== null;\n  }\n\n  protected browserSupportsNativeShare() {\n    return typeof navigator.share === \"function\";\n  }\n\n  protected getScopeDefaults(): Scope {\n    const scope: Scope = {\n      type: \"page\",\n      title: document.title,\n      text: \"Look at this! 👀🤩\",\n      url: undefined,\n      label: \"Share\",\n      labelTemplate,\n      isAndroid: this.isAndroid(),\n      isIos: this.isIos(),\n      isDesktop: false,\n      isNative: this.browserSupportsNativeShare(),\n      dropdownId: \"dropdownShare\" + Bs5ShareComponent.count,\n      shareItems: [],\n      dropdownDirection: \"down\",\n      dropdownAlignment: \"auto\",\n      // Service labels\n      labelFacebook: \"Facebook\",\n      labelTwitter: \"Twitter\",\n      labelPinterest: \"Pinterest\",\n      labelWhatsapp: \"Whatsapp\",\n      labelTelegram: \"Telegram\",\n      labelEmail: \"Email\",\n      labelDownload: \"Download\",\n      labelClipboard: \"Copy to clipboard\",\n      // Methods\n      share: this.share,\n      shareOnService: this.shareOnService,\n      getFilename: this.getFilename,\n    };\n\n    // on those two support \"mobile deep links\", so HTTP based fallback for all others.\n    scope.isDesktop = !scope.isIos && !scope.isAndroid;\n\n    return scope;\n  }\n\n  protected onExternalOpenEvent() {\n    this.dropdown?.show();\n  }\n\n  protected onExternalCloseEvent() {\n    this.dropdown?.hide();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ShareComponent.observedAttributes);\n    this.addEventListeners();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListeners();\n  }\n\n  protected addEventListeners() {\n    this.addEventListener(\"open\", this.onExternalOpenEvent);\n    this.addEventListener(\"btn-close\", this.onExternalCloseEvent);\n  }\n\n  protected removeEventListeners() {\n    this.removeEventListener(\"open\", this.onExternalOpenEvent);\n    this.removeEventListener(\"btn-close\", this.onExternalOpenEvent);\n  }\n\n  protected getURLForShare() {\n    if (this.scope.type === \"page\" && this.scope.url) {\n      return getUrl(this.scope.url);\n    }\n    return window.location.href;\n  }\n\n  protected getMediaUrlForShare() {\n    if (this.scope.type !== \"page\" && this.scope.url) {\n      return getUrl(this.scope.url);\n    }\n    return \"\";\n  }\n\n  protected getTextForShare() {\n    return stripHtml(this.scope.text);\n  }\n\n  /**\n   * Currently only used for email\n   * @param appendUrl\n   */\n  protected getTitleForShare() {\n    return stripHtml(this.scope.title);\n  }\n\n  protected updateShareURLs() {\n    for (const shareItem of this.scope.shareItems) {\n      const url = this.getURLForShare();\n      const mediaUrl = this.getMediaUrlForShare();\n      const shareText = this.getTextForShare();\n      const shareTitle = this.getTitleForShare();\n      let urlTemplate = shareItem.urlTemplate;\n\n      if (this.scope.type !== \"page\" && shareItem.mediaUrlTemplate) {\n        urlTemplate = shareItem.mediaUrlTemplate;\n      }\n\n      const encode = shareItem.type === \"clipboard\" ? false : true;\n\n      const shareURL = urlTemplate\n        .replace(\"{{url}}\", encode ? encodeURIComponent(url) : url)\n        .replace(\n          \"{{media_url}}\",\n          encode ? encodeURIComponent(mediaUrl) : mediaUrl\n        )\n        .replace(\"{{raw_media_url}}\", mediaUrl)\n        .replace(\"{{text}}\", encode ? encodeURIComponent(shareText) : shareText)\n        .replace(\n          \"{{title}}\",\n          encode ? encodeURIComponent(shareTitle) : shareTitle\n        );\n\n      shareItem.available = shareItem.availableFor.includes(this.scope.type);\n      shareItem.url = shareURL;\n    }\n  }\n\n  protected initDropdown() {\n    const dropDownButtonElement = this.querySelector(\n      \".dropdown-toggle-share\"\n    ) as HTMLButtonElement | HTMLAnchorElement;\n    if (!dropDownButtonElement) {\n      console.warn(\n        'Element with selector \".dropdown-toggle-share\" not found!',\n        this\n      );\n      return;\n    }\n    this.dropdown = new Dropdown(dropDownButtonElement);\n  }\n\n  /**\n   * New browser popup with the external site (e.g. Facebook) on you want to share your url\n   * @param binding\n   * @param event\n   * @param controller\n   * @param el\n   */\n  public async shareOnService(item: ShareItem, event: Event) {\n    this.dropdown?.hide();\n\n    if (item.type === \"clipboard\") {\n      event.preventDefault();\n      event.stopPropagation();\n      await copyTextToClipboard(item.url);\n      return false;\n    }\n\n    // We use the default browser anchor href logic for download and href\n    if (item.type === \"download\") {\n      return true;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    window.open(\n      item.url,\n      \"Share\",\n      \"scrollbars=yes,resizable=yes,toolbar=no,\" +\n        \"location=yes,width=550,height=420,top=100,left=\" +\n        (window.screen ? Math.round(screen.width / 2 - 275) : 100)\n    );\n\n    return false;\n  }\n\n  public async share(event: Event): Promise<any> {\n    this.debug(\"share\", this.scope);\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.scope.isNative && !this.scope.isDesktop) {\n      try {\n        await navigator.share({\n          title: this.scope.title,\n          text: `${this.scope.text}\\r\\n\\r\\n`,\n          url: this.scope.url || window.location.href,\n        });\n      } catch (error: any) {\n        if (error.name === \"AbortError\") {\n          // TODO show flash message\n          // this.debug(error.message);\n          return;\n        }\n        console.error(`Error ${error.name}: ${error.message}`, error);\n      }\n    } else {\n      this.updateShareURLs();\n      return this.dropdown?.toggle();\n    }\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    // this.debug('beforeBind');\n  }\n\n  protected async afterBind() {\n    this.initDropdown();\n    this.debug(\"afterBind\", this.scope);\n    this.scope.shareItems = this.getDefaultShareServices();\n    await super.afterBind();\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (this && hasChildNodesTrim(this)) {\n      this.scope.labelTemplate = this.innerHTML;\n    }\n    return template;\n  }\n}\n","import { ScrollPosition } from \"../types/scroll-position.js\";\n\nexport const getScrollPosition = (\n  element: HTMLUnknownElement | Window\n): ScrollPosition => {\n  const window = element as Window;\n  const el = element as HTMLUnknownElement;\n  // If element is window\n  if (window.document && window.location) {\n    const scrollPosition: ScrollPosition = {\n      /** horizontal: left / right / width */\n      x: window.pageXOffset,\n      /** vertical: top / bottom / height */\n      y: window.pageYOffset,\n      /** horizontal: left / right / width */\n      maxX:\n        document.documentElement.scrollWidth -\n        document.documentElement.clientWidth,\n      /** vertical: top / bottom / height */\n      maxY:\n        document.documentElement.scrollHeight -\n        document.documentElement.clientHeight,\n    };\n    return scrollPosition;\n  }\n  const scrollPosition: ScrollPosition = {\n    /** horizontal: left / right / width */\n    x: el.scrollLeft,\n    /** vertical: top / bottom / height */\n    y: el.scrollTop,\n    /** horizontal: left / right / width */\n    maxX: el.scrollWidth - el.clientWidth,\n    /** vertical: top / bottom / height */\n    maxY: el.scrollHeight - el.clientHeight,\n  };\n\n  return scrollPosition;\n};\n\nexport const isScrollable = (element: HTMLUnknownElement) => {\n  const scrollPosition = getScrollPosition(element);\n  return scrollPosition.maxX > 0 || scrollPosition.maxY > 0;\n};\n","import { EventDispatcher } from \"@ribajs/events\";\n\nexport interface GameloopOptions {\n  maxFPS?: number;\n}\n\n/**\n * @see https://www.sitepoint.com/quick-tip-game-loop-in-javascript/\n * @see https://isaacsukin.com/news/2015/01/detailed-explanation-javascript-game-loops-and-timing#fps-control\n */\nexport class Gameloop {\n  public static events = new EventDispatcher(\"gameloop\");\n\n  public static maxFPS = 60;\n\n  public static getFps() {\n    return this.fps;\n  }\n\n  public static startLoop(options: GameloopOptions = {}) {\n    this.setOptions(options);\n\n    if (!this.loopStarted) {\n      this.loopStarted = true;\n      window.requestAnimationFrame(this.loop.bind(this));\n    }\n  }\n\n  public static fps = 60;\n\n  // We want to simulate 1000 ms / 60 FPS = 16.667 ms per frame every time we run scroll()\n  protected static timestep = 1000 / 60;\n\n  protected static loopStarted = false;\n\n  protected static lastFrameTimeMs = 0;\n\n  protected static delta = 0;\n\n  protected static framesThisSecond = 0;\n\n  protected static lastFpsUpdate = 0;\n\n  protected static frameID = 0;\n\n  protected static setOptions(options: GameloopOptions) {\n    this.maxFPS =\n      typeof options.maxFPS === \"number\" ? options.maxFPS : this.maxFPS;\n  }\n\n  /**\n   * The main / game loop\n   * @param timestamp\n   */\n  protected static loop(timestamp: number) {\n    // Throttle the frame rate.\n    if (timestamp < this.lastFrameTimeMs + 1000 / this.maxFPS) {\n      this.frameID = window.requestAnimationFrame(this.loop.bind(this));\n      return;\n    }\n\n    const progress = timestamp - this.lastFrameTimeMs;\n    this.delta += progress;\n    this.lastFrameTimeMs = timestamp;\n\n    this.begin(timestamp, this.delta);\n\n    if (timestamp > this.lastFpsUpdate + 1000) {\n      this.fps = 0.25 * this.framesThisSecond + 0.75 * this.fps;\n\n      this.lastFpsUpdate = timestamp;\n      this.framesThisSecond = 0;\n    }\n    this.framesThisSecond++;\n\n    let numUpdateSteps = 0;\n    while (this.delta >= this.timestep) {\n      this.update(this.timestep);\n      this.delta -= this.timestep;\n      if (++numUpdateSteps >= 240) {\n        this.panic();\n        break;\n      }\n    }\n\n    this.render(this.delta / this.timestep);\n\n    this.end(this.fps);\n\n    this.frameID = window.requestAnimationFrame(this.loop.bind(this));\n  }\n\n  protected static begin(timestamp: number, delta: number) {\n    this.events.trigger(\"begin\", timestamp, delta);\n  }\n\n  protected static render(interp: number) {\n    this.events.trigger(\"render\", interp);\n  }\n\n  protected static update(delta: number) {\n    this.events.trigger(\"update\", delta);\n  }\n\n  protected static end(delta: number) {\n    this.events.trigger(\"end\", delta);\n  }\n\n  protected static panic() {\n    this.delta = 0; // discard the unsimulated time\n  }\n\n  constructor(options: GameloopOptions = {}) {\n    Gameloop.setOptions(options);\n  }\n}\n","import { getScrollPosition } from \"../helper/scroll.js\";\nimport { Gameloop } from \"./gameloop.service.js\";\nimport { throttle } from \"@ribajs/utils/src/control\";\n\nexport interface AutoscrollOptions {\n  angle?: \"vertical\" | \"horizontal\";\n  direction?: 1 | -1;\n  velocity?: number;\n  width?: string;\n  pauseOnHover?: boolean;\n}\n\nexport class Autoscroll {\n  protected touchCapable = \"ontouchstart\" in window;\n\n  protected direction = 1;\n\n  protected limit: number;\n\n  protected options: AutoscrollOptions;\n\n  protected el: HTMLElement;\n\n  protected _pause = false;\n\n  protected velocity = 0.008;\n\n  protected move = 0;\n\n  protected lastMove = 0;\n\n  protected angle: \"horizontal\" | \"vertical\" = \"horizontal\";\n\n  protected pauseOnHover = true;\n\n  protected resumeTimer: number | null = null;\n\n  constructor(el: HTMLElement, options: AutoscrollOptions = {}) {\n    this.el = el;\n    this.options = options;\n    this.direction = this.options.direction || this.direction;\n    this.velocity = this.options.velocity || this.velocity;\n    this.angle = this.options.angle || this.angle;\n    this.pauseOnHover =\n      typeof this.options.pauseOnHover === \"boolean\"\n        ? this.options.pauseOnHover\n        : this.pauseOnHover;\n\n    this.limit = this.getLimit(this.el);\n    this.move = this.getPosition();\n\n    if (this.direction === -1) {\n      // start right\n      this.el.scrollLeft = this.limit;\n    } else {\n      // start left\n      this.el.scrollLeft = 0;\n    }\n\n    this.addEventListeners();\n\n    Gameloop.startLoop({ maxFPS: 60 });\n  }\n\n  /**\n   * @note this is not the gameloop update method!\n   */\n  public update() {\n    this.limit = this.getLimit(this.el);\n    this.setPosition();\n  }\n\n  public destroy() {\n    this.removeEventListeners();\n  }\n\n  public pause() {\n    this.el.style.scrollBehavior = \"\";\n    this._pause = true;\n  }\n\n  /** Resume autoscrolling if this method was not called up for [delay] milliseconds */\n  public resume(delay = 0) {\n    if (!this._pause) {\n      return;\n    }\n\n    this.stopResumeTimeout();\n\n    this.resumeTimer = window.setTimeout(() => {\n      this.setPosition();\n      this._pause = false;\n      // Disable smooth scrolling on autoscroll if set\n      this.el.style.scrollBehavior = \"auto\";\n    }, delay);\n  }\n\n  protected addEventListeners() {\n    this.removeEventListeners();\n    this.onResize = this.onResize.bind(this);\n    this.onMouseIn = this.onMouseIn.bind(this);\n    this.onMouseOut = this.onMouseOut.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n    this.render = this.render.bind(this);\n    this.updateMove = this.updateMove.bind(this);\n\n    window.addEventListener(\"resize\", this.onResize, {\n      passive: true,\n    });\n\n    this.el.addEventListener(\"mouseenter\", this.onMouseIn, {\n      passive: true,\n    });\n    this.el.addEventListener(\"mouseover\", this.onMouseIn, {\n      passive: true,\n    });\n    this.el.addEventListener(\"focusin\", this.onMouseIn, {\n      passive: true,\n    });\n    this.el.addEventListener(\"touchstart\", this.onMouseIn, {\n      passive: true,\n    });\n\n    this.el.addEventListener(\"mouseleave\", this.onMouseOut, {\n      passive: true,\n    });\n    this.el.addEventListener(\"focusout\", this.onMouseOut, {\n      passive: true,\n    });\n\n    this.el.addEventListener(\"mouseup\", this.onMouseUp, {\n      passive: true,\n    });\n    this.el.addEventListener(\"touchend\", this.onMouseUp, {\n      passive: true,\n    });\n\n    if (this.touchCapable) {\n      this.el.addEventListener(\"scroll\", this.onMouseUp, {\n        passive: true,\n      });\n      this.el.addEventListener(\"scrollend\", this.onMouseUp, {\n        passive: true,\n      });\n      // See ScrollEventsService for \"scrollended\" event\n      this.el.addEventListener(\"scrollended\", this.onMouseUp, {\n        passive: true,\n      });\n    } else {\n      this.el.addEventListener(\"scroll\", this.onScroll, {\n        passive: true,\n      });\n      this.el.addEventListener(\"scrollend\", this.onScroll, {\n        passive: true,\n      });\n      this.el.addEventListener(\"scrollended\", this.onScroll, {\n        passive: true,\n      });\n    }\n\n    Gameloop.events.on(\"render\", this.render);\n    Gameloop.events.on(\"update\", this.updateMove);\n  }\n\n  protected removeEventListeners() {\n    window.removeEventListener(\"resize\", this.onResize);\n\n    this.el.removeEventListener(\"mouseenter\", this.onMouseIn);\n    this.el.removeEventListener(\"mouseover\", this.onMouseIn);\n    this.el.removeEventListener(\"focusin\", this.onMouseIn);\n    this.el.removeEventListener(\"touchstart\", this.onMouseIn);\n\n    this.el.removeEventListener(\"mouseleave\", this.onMouseOut);\n    this.el.removeEventListener(\"focusout\", this.onMouseOut);\n\n    this.el.removeEventListener(\"mouseup\", this.onMouseUp);\n    this.el.removeEventListener(\"touchend\", this.onMouseUp);\n\n    if (this.touchCapable) {\n      this.el.removeEventListener(\"scroll\", this.onMouseUp);\n      this.el.removeEventListener(\"scrollend\", this.onMouseUp);\n      this.el.removeEventListener(\"scrollended\", this.onMouseUp);\n    } else {\n      this.el.removeEventListener(\"scroll\", this.onScroll);\n      this.el.removeEventListener(\"scrollend\", this.onScroll);\n      this.el.removeEventListener(\"scrollended\", this.onScroll);\n    }\n\n    Gameloop.events.off(\"render\", this.render);\n    Gameloop.events.off(\"update\", this.updateMove);\n  }\n\n  protected onMouseIn() {\n    if (this.pauseOnHover) {\n      this.pause();\n    }\n  }\n\n  protected onMouseOut() {\n    this.resume(200);\n  }\n\n  protected onMouseUp() {\n    this.resume(1000);\n  }\n\n  protected _onResize() {\n    this.limit = this.getLimit(this.el);\n    this.resume(200);\n  }\n\n  protected onResize = throttle(this._onResize.bind(this));\n\n  protected _onScroll() {\n    this.stopResumeTimeout();\n  }\n\n  protected onScroll = throttle(this._onScroll.bind(this));\n\n  protected stopResumeTimeout() {\n    if (this.resumeTimer !== null) {\n      clearTimeout(this.resumeTimer);\n      this.resumeTimer = null;\n    }\n  }\n\n  protected getPosition() {\n    return (\n      (this.angle === \"vertical\" ? this.el.scrollTop : this.el.scrollLeft) || 0\n    );\n  }\n\n  protected setPosition() {\n    this.move = this.getPosition();\n  }\n\n  protected getLimit(el: HTMLElement) {\n    return this.angle === \"vertical\"\n      ? getScrollPosition(el).maxY\n      : getScrollPosition(el).maxX;\n  }\n\n  /**\n   * This Interpolation:\n   * ```\n   * protected render(Interpolation: number) {\n   * ...\n   * this.move = (this.lastMove + (this.move - this.lastMove) * Interpolation);\n   * ```\n   * is not working here for some reason\n   * like it works in the demos/extras-game-loop demo or here:\n   * https://isaacsukin.com/news/2015/01/detailed-explanation-javascript-game-loops-and-timing\n   *\n   * Without this the scrollbar scrolls smooth, need to find out why.\n   */\n  protected render() {\n    if (this._pause) {\n      return;\n    }\n\n    this.scroll(this.move);\n  }\n\n  protected updateMove(delta: number) {\n    if (this._pause) {\n      return;\n    }\n\n    this.lastMove = this.move;\n    const append = this.velocity * this.direction * delta;\n    this.move += append;\n\n    // Switch directions if we go too far\n    if (this.move <= 0 && this.direction !== 1) {\n      this.direction = 1;\n    }\n\n    if (this.move >= this.limit && this.direction !== -1) {\n      this.direction = -1;\n    }\n  }\n\n  protected scroll(move: number) {\n    if (this.angle === \"vertical\") {\n      this.el.scrollTop = move;\n    } else {\n      this.el.scrollLeft = move;\n    }\n  }\n}\n","import { isScrollable } from \"../helper/scroll.js\";\nimport { throttle } from \"@ribajs/utils/src/control\";\n\nexport interface DragscrollOptions {\n  detectGlobalMove?: boolean;\n}\n\n/**\n * Scroll an scrollable element by dragging and moving your mouse.\n * inspired by https://github.com/asvd/dragscroll\n */\nexport class Dragscroll {\n  protected options: DragscrollOptions;\n  protected lastClientX = 0;\n  protected lastClientY = 0;\n  protected el: HTMLElement;\n  protected pushed = false;\n  protected touchCapable = \"ontouchstart\" in window;\n\n  constructor(\n    el: HTMLElement,\n    options: DragscrollOptions = { detectGlobalMove: true }\n  ) {\n    this.el = el;\n    this.options = options;\n\n    if (this.touchCapable) {\n      // Do noting on touch devices\n      return this;\n    }\n\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.checkDraggable = this.checkDraggable.bind(this);\n\n    el.removeEventListener(\"mousedown\", this.onMouseDown);\n    el.addEventListener(\"mousedown\", this.onMouseDown, {\n      passive: true,\n    });\n\n    window.addEventListener(\"resize\", this.checkDraggable);\n\n    // Use global move if your element does not use the full width / height\n    if (this.options.detectGlobalMove) {\n      window.removeEventListener(\"mouseup\", this.onMouseUp);\n      window.removeEventListener(\"mousemove\", this.onMouseMove);\n\n      window.addEventListener(\"mouseup\", this.onMouseUp, {\n        passive: true,\n      });\n      window.addEventListener(\"mousemove\", this.onMouseMove, {\n        passive: true,\n      });\n    } else {\n      el.removeEventListener(\"mouseup\", this.onMouseUp);\n      el.removeEventListener(\"mousemove\", this.onMouseMove);\n\n      el.addEventListener(\"mouseup\", this.onMouseUp, {\n        passive: true,\n      });\n      el.addEventListener(\"mousemove\", this.onMouseMove, {\n        passive: true,\n      });\n    }\n\n    // initial\n    this.checkDraggable();\n  }\n\n  public destroy() {\n    this.removeEventListeners();\n    this.el.classList.remove(\"draggable\");\n  }\n\n  protected _checkDraggable() {\n    if (isScrollable(this.el)) {\n      this.el.classList.add(\"draggable\");\n    } else {\n      this.el.classList.remove(\"draggable\");\n    }\n  }\n\n  public checkDraggable = throttle(this._checkDraggable.bind(this));\n\n  protected onMouseDown(e: MouseEvent) {\n    this.pushed = true;\n    this.lastClientX = e.clientX;\n    this.lastClientY = e.clientY;\n  }\n\n  protected onMouseUp() {\n    this.pushed = false;\n  }\n\n  protected onMouseMove(e: MouseEvent) {\n    let newScrollX = 0;\n    let newScrollY = 0;\n    if (this.pushed) {\n      this.el.scrollLeft -= newScrollX =\n        -this.lastClientX + (this.lastClientX = e.clientX);\n      this.el.scrollTop -= newScrollY =\n        -this.lastClientY + (this.lastClientY = e.clientY);\n      if (this.el === document.body) {\n        if (document.documentElement) {\n          this.el = document.documentElement;\n        }\n        this.el.scrollLeft -= newScrollX;\n        this.el.scrollTop -= newScrollY;\n      }\n    }\n  }\n\n  protected removeEventListeners() {\n    window.removeEventListener(\"resize\", this.checkDraggable);\n    this.el.removeEventListener(\"mousedown\", this.onMouseDown);\n    this.el.removeEventListener(\"mouseup\", this.onMouseUp);\n    this.el.removeEventListener(\"mousemove\", this.onMouseMove);\n  }\n}\n","import type { BaseEventDetail } from \"../../types/index.js\";\n\nexport abstract class BaseEventsService {\n  protected touchCapable = \"ontouchstart\" in window;\n  /** The element to trigger the events on */\n  protected el: HTMLUnknownElement | HTMLElement | Window;\n  public get isTouchCapable() {\n    return this.touchCapable;\n  }\n  constructor(el: HTMLUnknownElement | HTMLElement | Window) {\n    this.el = el;\n  }\n\n  protected triggerCustomEvent<T = any>(\n    eventName: string,\n    originalEvent: Event,\n    extraParameters: T & BaseEventDetail\n  ) {\n    extraParameters.originalEvent = originalEvent;\n    extraParameters.target = originalEvent.target;\n    // create and dispatch the event\n    const event = new CustomEvent<T>(eventName, {\n      detail: extraParameters,\n    });\n    this.el.dispatchEvent(event);\n  }\n}\n","import {\n  ScrollPosition,\n  ScrollEventsOptions,\n  ScrollDirection,\n  ScrollEventDetail,\n} from \"../../types/index.js\";\nimport { getScrollPosition } from \"../../helper/scroll.js\";\nimport { BaseEventsService } from \"./base-events.service.js\";\n\nexport class ScrollEventsService extends BaseEventsService {\n  public isScrolling = false;\n\n  protected _scrollEvent: Array<\"touchmove\" | \"scroll\" | \"scrollend\">;\n\n  protected delay = 300;\n\n  protected startPosition: ScrollPosition | null = null;\n\n  protected endPosition: ScrollPosition | null = null;\n\n  protected scrollTimer: number | null = null;\n\n  constructor(\n    el: HTMLUnknownElement | Window,\n    options: Partial<ScrollEventsOptions> = {}\n  ) {\n    super(el);\n    this.el = el;\n    this.delay = options.delay || this.delay;\n    this.startPosition = getScrollPosition(this.el);\n    // Watch also native scrollend to not trigger scrollended before scrollend was triggered\n    this._scrollEvent = this.touchCapable\n      ? [\"touchmove\", \"scrollend\", \"scroll\"]\n      : [\"scroll\", \"scrollend\"];\n    this.removeEventListeners();\n    this.addEventListeners();\n  }\n\n  public destroy() {\n    this.removeEventListeners();\n  }\n\n  public get scrollEvent() {\n    return this._scrollEvent;\n  }\n\n  protected getScrollDir(\n    start: ScrollPosition | null,\n    end: ScrollPosition | null\n  ): ScrollDirection {\n    if (!start || !end) {\n      return \"unknown\";\n    }\n    if (start.x > end.x) {\n      return \"right\";\n    }\n    if (start.x < end.x) {\n      return \"left\";\n    }\n    if (start.y > end.y) {\n      return \"down\";\n    }\n    if (start.y < end.y) {\n      return \"up\";\n    }\n    return \"none\";\n  }\n\n  protected removeEventListeners() {\n    for (const eventName of this._scrollEvent) {\n      this.el.removeEventListener(eventName, this.onScrollEvent);\n    }\n  }\n\n  protected addEventListeners() {\n    for (const eventName of this._scrollEvent) {\n      this.el.addEventListener(eventName, this.onScrollEvent, {\n        passive: true,\n      });\n    }\n  }\n\n  protected _onScrollEvent(event: TouchEvent | MouseEvent) {\n    if (!event.target) {\n      return false;\n    }\n\n    if (this.scrollTimer !== null) {\n      clearTimeout(this.scrollTimer);\n      this.scrollTimer = null;\n    }\n\n    if (!this.isScrolling) {\n      this.scrollstart(event);\n    }\n\n    if (this.isScrolling) {\n      this.scroll(event);\n    }\n\n    this.scrollTimer = window.setTimeout(() => {\n      this.scrollended(event);\n    }, this.delay);\n\n    return true;\n  }\n\n  protected onScrollEvent = this._onScrollEvent.bind(\n    this\n  ) as any as EventListener;\n\n  /**\n   * scrollended Event\n   */\n  protected scrollended(event: TouchEvent | MouseEvent) {\n    this.isScrolling = false;\n    this.endPosition = getScrollPosition(this.el);\n    const direction = this.getScrollDir(this.startPosition, this.endPosition);\n    this.triggerCustomEvent<ScrollEventDetail>(\"scrollended\", event, {\n      startPosition: this.startPosition,\n      endPosition: this.endPosition,\n      direction,\n    });\n  }\n\n  /**\n   * scrollstart Event\n   */\n  protected scrollstart(event: TouchEvent | MouseEvent) {\n    this.isScrolling = true;\n    this.startPosition = getScrollPosition(this.el);\n    this.triggerCustomEvent<ScrollEventDetail>(\"scrollstart\", event, {\n      startPosition: this.startPosition,\n    });\n  }\n\n  /**\n   * scrolling, scrollup, scrolldown, scrollleft and scrollright Events\n   */\n  protected _scroll(event: TouchEvent | MouseEvent) {\n    const currentPosition = getScrollPosition(this.el);\n    const direction = this.getScrollDir(this.startPosition, currentPosition);\n    this.triggerCustomEvent<ScrollEventDetail>(\"scroll\" + direction, event, {\n      startPosition: this.startPosition,\n      currentPosition,\n      direction,\n    });\n    this.triggerCustomEvent<ScrollEventDetail>(\"scrolling\", event, {\n      startPosition: this.startPosition,\n      currentPosition,\n      direction,\n    });\n  }\n\n  protected scroll = this._scroll.bind(this);\n}\n","/**\n * Represents the ready state of the audio/video element\n * @see https://www.w3schools.com/TAgs/av_prop_readystate.asp\n */\nexport enum MediaReadyState {\n  /** no information whether or not the audio/video is ready */\n  HAVE_NOTHING,\n  /** metadata for the audio/video is ready */\n  HAVE_METADATA,\n  /** data for the current playback position is available, but not enough data to play next frame/millisecond */\n  HAVE_CURRENT_DATA,\n  /** data for the current and at least the next frame is available */\n  HAVE_FUTURE_DATA,\n  /** enough data available to start playing */\n  HAVE_ENOUGH_DATA,\n}\n","export enum TouchType {\n  DEFAULT,\n  TARGET,\n  CHANGED,\n}\n","import { getElementIndex } from \"@ribajs/utils/src/dom.js\";\nimport {\n  Position,\n  TouchData,\n  TouchEventData,\n  TouchOffset,\n  TouchSettings,\n  TouchType,\n  TouchSwipeData,\n  TouchDirection,\n} from \"../../types/index.js\";\n\nimport { BaseEventsService } from \"./base-events.service.js\";\n\n/**\n * Vanilla version of jQuery Mobile Events\n * @see https://github.com/benmajor/jQuery-Touch-Events\n *\n * Copyright 2011-2019, Ben Major\n * Copyright 2019-2021, Pascal Garber\n * Licensed under the MIT License:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nexport class TouchEventsService extends BaseEventsService {\n  // GETTERS:\n\n  public get isTouchCapable() {\n    return this.settings.touchCapable;\n  }\n\n  public get startEvent() {\n    return this.settings.startevent;\n  }\n\n  public get endEvent() {\n    return this.settings.endevent;\n  }\n\n  public get moveEvent() {\n    return this.settings.moveevent;\n  }\n\n  public get tapEvent() {\n    return this.settings.tapevent;\n  }\n\n  // public get scrollEvent() {\n  //   return this.scrollEvents.scrollEvent;\n  // }\n\n  // SETTERS:\n\n  /** Set the X threshold of swipe events */\n  public set swipeThresholdX(threshold: number) {\n    if (typeof threshold !== \"number\") {\n      throw new Error(\"Threshold parameter must be a type of number\");\n    }\n    this.settings.swipeHThreshold = threshold;\n  }\n\n  /** Set the Y threshold of swipe events */\n  public set swipeThresholdY(threshold: number) {\n    if (typeof threshold !== \"number\") {\n      throw new Error(\"Threshold parameter must be a type of number\");\n    }\n    this.settings.swipeVThreshold = threshold;\n  }\n\n  /** Set the double tap interval */\n  public set doubleTapInt(interval: number) {\n    if (typeof interval !== \"number\") {\n      throw new Error(\"Interval parameter must be a type of number\");\n    }\n    this.settings.doubletapInterval = interval;\n  }\n\n  /** Set the taphold threshold */\n  public set tapHoldThreshold(threshold: number) {\n    if (typeof threshold !== \"number\") {\n      throw new Error(\"Threshold parameter must be a type of number\");\n    }\n    this.settings.tapholdThreshold = threshold;\n  }\n\n  /** Set the pixel range for tapas */\n  public set tapRange(range: number) {\n    if (typeof range !== \"number\") {\n      throw new Error(\"Ranger parameter must be a type of number\");\n    }\n    this.settings.tapPixelRange = range;\n  }\n\n  // PROPERTIES:\n\n  /** Used internally for `taphold` */\n  protected startPosition: Position = {\n    x: 0,\n    y: 0,\n  };\n\n  /** Used internally for `taphold` */\n  protected endPosition: Position = {\n    x: 0,\n    y: 0,\n  };\n\n  /** Used internally for `swipe` */\n  protected originalCoord: Position = {\n    x: 0,\n    y: 0,\n  };\n\n  /** Used internally for `swipe` */\n  protected finalCoord: Position = {\n    x: 0,\n    y: 0,\n  };\n\n  /** Used internally for `swipe` */\n  protected startEvnt: TouchData | null = null;\n\n  /** Used internally for `taphold` and `singletap` */\n  protected tapheld = false;\n\n  /** Used internally for `doubletap` */\n  protected firstTap: TouchData | null = null;\n\n  /** Used internally for `doubletap` */\n  protected cooling = false;\n\n  /** Used internally for `doubletap` and `singletap` */\n  protected doubletapped = false;\n\n  /** Used internally for `doubletap` */\n  protected lastTouch = 0;\n\n  /** Used internally for `swipe` */\n  protected hasSwiped = false;\n\n  /** Used internally for `tap` */\n  protected tapStarted = false;\n\n  /** Used internally for `swipe` */\n  protected swipeStarted = false;\n\n  /** Used internally for `tap`, `taphold` and `singletap` */\n  protected startTime = 0;\n\n  // TIMERS:\n\n  protected holdTimer = -1;\n  protected tapTimer = -1;\n\n  /** Used internally for `doubletap` */\n  protected actionTimer = -1;\n\n  protected settings: TouchSettings;\n\n  // protected scrollEvents: ScrollEventsService;\n\n  constructor(\n    el: HTMLElement,\n    settings: TouchSettings = {\n      tapPixelRange: 5,\n      swipeHThreshold: 50,\n      swipeVThreshold: 50,\n      tapholdThreshold: 750,\n      doubletapInterval: 500,\n      shakeThreshold: 15,\n      touchCapable: \"ontouchstart\" in window,\n\n      startevent: [\"touchstart\"],\n      endevent: [\"touchend\"],\n      moveevent: [\"touchmove\"],\n      tapevent: [\"tap\"],\n    }\n  ) {\n    super(el);\n    this.el = el;\n\n    // Set settings by device type (if device is touch capable)\n    settings.startevent = settings.touchCapable\n      ? [\"touchstart\"]\n      : [\"mousedown\"];\n    settings.endevent = settings.touchCapable ? [\"touchend\"] : [\"mouseup\"];\n    settings.moveevent = settings.touchCapable ? [\"touchmove\"] : [\"mousemove\"];\n    settings.tapevent = settings.touchCapable ? [\"tap\"] : [\"click\"];\n\n    this.settings = settings;\n\n    // this.scrollEvents = new ScrollEventsService(this.el);\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.onMoveEvent = this.onMoveEvent.bind(this);\n    this.onEndEvent = this.onEndEvent.bind(this);\n    this.addEventListeners();\n  }\n\n  public destroy() {\n    this.removeEventListeners();\n    // this.scrollEvents.destroy();\n  }\n\n  protected removeEventListeners() {\n    for (const eventName of this.settings.startevent) {\n      this.el.removeEventListener(\n        eventName,\n        this.onStartEvent as any as EventListener\n      );\n    }\n    for (const eventName of this.settings.moveevent) {\n      this.el.removeEventListener(\n        eventName,\n        this.onMoveEvent as any as EventListener\n      );\n    }\n    for (const eventName of this.settings.endevent) {\n      this.el.removeEventListener(\n        eventName,\n        this.onEndEvent as any as EventListener\n      );\n    }\n    // this.scrollEvents.destroy();\n  }\n\n  // HELPER METHODS:\n\n  protected getSwipeDir(\n    startPosition: Position,\n    endPosition: Position,\n    hThreshold: number = this.settings.swipeHThreshold,\n    vThreshold: number = this.settings.swipeVThreshold\n  ) {\n    let swipeDir = \"\";\n    if (\n      startPosition.y > endPosition.y &&\n      startPosition.y - endPosition.y > vThreshold\n    ) {\n      swipeDir = \"swipeup\";\n    }\n    if (\n      startPosition.x < endPosition.x &&\n      endPosition.x - startPosition.x > hThreshold\n    ) {\n      swipeDir = \"swiperight\";\n    }\n    if (\n      startPosition.y < endPosition.y &&\n      endPosition.y - startPosition.y > vThreshold\n    ) {\n      swipeDir = \"swipedown\";\n    }\n    if (\n      startPosition.x > endPosition.x &&\n      startPosition.x - endPosition.x > hThreshold\n    ) {\n      swipeDir = \"swipeleft\";\n    }\n    return swipeDir;\n  }\n\n  protected getPosition(\n    event: TouchEvent | MouseEvent,\n    type: TouchType = TouchType.DEFAULT,\n    index = 0\n  ): Position {\n    let touchesTypes: TouchList;\n    switch (type) {\n      case TouchType.CHANGED:\n        touchesTypes = (event as TouchEvent).changedTouches;\n        break;\n      case TouchType.TARGET:\n        touchesTypes = (event as TouchEvent).targetTouches;\n        break;\n      default:\n        touchesTypes = (event as TouchEvent).touches;\n        break;\n    }\n    const position = {\n      x: this.settings.touchCapable\n        ? touchesTypes[index].pageX\n        : (event as MouseEvent).pageX,\n      y: this.settings.touchCapable\n        ? touchesTypes[index].pageY\n        : (event as MouseEvent).pageY,\n    };\n    return position;\n  }\n\n  protected getOffset(\n    event: TouchEvent | MouseEvent,\n    type: TouchType = TouchType.DEFAULT,\n    index = 0\n  ): TouchOffset {\n    const boundingClientRect = (this.el as HTMLElement).getBoundingClientRect();\n    let touchesTypes: TouchList;\n    switch (type) {\n      case TouchType.CHANGED:\n        touchesTypes = (event as TouchEvent).changedTouches;\n        break;\n      case TouchType.TARGET:\n        touchesTypes = (event as TouchEvent).targetTouches;\n        break;\n      default:\n        touchesTypes = (event as TouchEvent).touches;\n        break;\n    }\n    const offset = {\n      x: this.settings.touchCapable\n        ? Math.round(\n            touchesTypes[index].pageX -\n              (boundingClientRect ? boundingClientRect.left : 0)\n          )\n        : Math.round(\n            (event as any as MouseEvent).pageX -\n              (boundingClientRect ? boundingClientRect.left : 0)\n          ),\n      y: this.settings.touchCapable\n        ? Math.round(\n            touchesTypes[index].pageY -\n              (boundingClientRect ? boundingClientRect.top : 0)\n          )\n        : Math.round(\n            (event as any as MouseEvent).pageY -\n              (boundingClientRect ? boundingClientRect.top : 0)\n          ),\n    };\n    return offset;\n  }\n\n  protected getTouchData(\n    event: TouchEvent | MouseEvent,\n    withIndex = false,\n    positionType = TouchType.DEFAULT,\n    offsetType = TouchType.CHANGED\n  ): TouchData {\n    const touchData: TouchData = {\n      position: this.getPosition(event, positionType),\n      offset: this.getOffset(event, offsetType),\n      time: Date.now(),\n    };\n    if (withIndex) {\n      touchData.index = getElementIndex(event.target as Element | null);\n    }\n    return touchData;\n  }\n\n  protected addEventListeners() {\n    for (const eventName of this.settings.startevent) {\n      this.el.addEventListener(\n        eventName,\n        this.onStartEvent as any as EventListener,\n        {\n          passive: true,\n        }\n      );\n    }\n    for (const eventName of this.settings.moveevent) {\n      this.el.addEventListener(\n        eventName,\n        this.onMoveEvent as any as EventListener,\n        {\n          passive: true,\n        }\n      );\n    }\n    for (const eventName of this.settings.endevent) {\n      this.el.addEventListener(\n        eventName,\n        this.onEndEvent as any as EventListener,\n        {\n          passive: true,\n        }\n      );\n    }\n  }\n\n  // EVENT HANDLERS:\n\n  protected onStartEvent(event: TouchEvent | MouseEvent) {\n    if (event.which && event.which !== 1) {\n      return false;\n    }\n    this.startPosition = this.getPosition(event, TouchType.TARGET);\n    this.endPosition = {\n      x: this.startPosition.x,\n      y: this.startPosition.y,\n    };\n    this.startTime = Date.now();\n\n    // For `doubletap`\n    this.doubletapped = false;\n    if (!this.firstTap) {\n      this.firstTap = this.getTouchData(\n        event,\n        true,\n        TouchType.DEFAULT,\n        TouchType.CHANGED\n      );\n    }\n\n    // For `tap`, `swipe`\n    this.tapStarted = true;\n    this.swipeStarted = true;\n\n    // For `swipe`\n    this.originalCoord = this.getPosition(event, TouchType.TARGET);\n    this.finalCoord = this.getPosition(event, TouchType.TARGET);\n    this.startEvnt = this.getTouchData(\n      event,\n      false,\n      TouchType.DEFAULT,\n      TouchType.CHANGED\n    );\n\n    this.tapstart(event);\n    this.taphold(event);\n    return true;\n  }\n\n  protected onEndEvent(event: TouchEvent | MouseEvent) {\n    this.endPosition = this.getPosition(event, TouchType.CHANGED);\n    this.tapheld = false;\n\n    window.clearTimeout(this.holdTimer);\n    this.tapend(event);\n    this.swipeend(event);\n    this.tap(event);\n    this.doubletap(event);\n    this.singletap(event);\n\n    this.tapStarted = false;\n    this.swipeStarted = false;\n    this.hasSwiped = false;\n\n    return true;\n  }\n\n  protected onMoveEvent(event: TouchEvent | MouseEvent) {\n    this.endPosition = this.getPosition(event, TouchType.TARGET);\n    this.finalCoord = this.getPosition(event, TouchType.TARGET);\n    this.tapmove(event);\n    this.swipe(event);\n    return true;\n  }\n\n  // CUSTOM EVENT METHODS:\n\n  /** tapstart Event */\n  protected tapstart(event: TouchEvent | MouseEvent) {\n    this.triggerCustomEvent(\n      \"tapstart\",\n      event,\n      this.getTouchData(event, false, TouchType.DEFAULT, TouchType.CHANGED)\n    );\n    return true;\n  }\n\n  /** tapmove Event */\n  protected tapmove(event: TouchEvent | MouseEvent) {\n    this.triggerCustomEvent(\n      \"tapmove\",\n      event,\n      this.getTouchData(event, false, TouchType.DEFAULT, TouchType.CHANGED)\n    );\n    return true;\n  }\n\n  /** tapend Event */\n  protected tapend(event: TouchEvent | MouseEvent) {\n    this.triggerCustomEvent(\n      \"tapend\",\n      event,\n      this.getTouchData(event, false, TouchType.CHANGED, TouchType.CHANGED)\n    );\n    return true;\n  }\n\n  /** taphold Event */\n  protected taphold(event: TouchEvent | MouseEvent) {\n    this.holdTimer = window.setTimeout(() => {\n      const diffPosition: Position = {\n        x: this.startPosition.x - this.endPosition.x,\n        y: this.startPosition.y - this.endPosition.y,\n      };\n\n      // helded?\n      if (\n        (this.startPosition.x === this.endPosition.x &&\n          this.startPosition.y === this.endPosition.y) ||\n        (diffPosition.x >= -this.settings.tapPixelRange &&\n          diffPosition.x <= this.settings.tapPixelRange &&\n          diffPosition.y >= -this.settings.tapPixelRange &&\n          diffPosition.y <= this.settings.tapPixelRange)\n      ) {\n        this.tapheld = true;\n        const endTime = Date.now();\n        const duration = endTime - this.startTime;\n        const touchesLength: number = (event as TouchEvent).targetTouches\n          ? (event as TouchEvent).targetTouches.length\n          : 1;\n        const touches = new Array<Partial<TouchData>>();\n\n        for (let i = 0; i < touchesLength; i++) {\n          const elOffset = (this.el as HTMLElement).getBoundingClientRect();\n          const touch = {\n            position: {\n              x: this.settings.touchCapable\n                ? (event as TouchEvent).changedTouches[i].pageX\n                : (event as MouseEvent).pageX,\n              y: this.settings.touchCapable\n                ? (event as TouchEvent).changedTouches[i].pageY\n                : (event as MouseEvent).pageY,\n            },\n            offset: {\n              x: this.settings.touchCapable\n                ? Math.round(\n                    (event as TouchEvent).changedTouches[i].pageX -\n                      (elOffset ? elOffset.left : 0)\n                  )\n                : Math.round(\n                    (event as MouseEvent).pageX - (elOffset ? elOffset.left : 0)\n                  ),\n              y: this.settings.touchCapable\n                ? Math.round(\n                    (event as TouchEvent).changedTouches[i].pageY -\n                      (elOffset ? elOffset.top : 0)\n                  )\n                : Math.round(\n                    (event as MouseEvent).pageY - (elOffset ? elOffset.top : 0)\n                  ),\n            },\n          };\n\n          touches.push(touch);\n        }\n        const eventName =\n          touchesLength > 1 ? \"taphold\" + touchesLength : \"taphold\";\n\n        const touchData: TouchEventData = {\n          touches,\n          time: Date.now(),\n          duration,\n        };\n\n        this.triggerCustomEvent(eventName, event, touchData);\n      }\n    }, this.settings.tapholdThreshold);\n\n    return true;\n  }\n\n  /** doubletap Event */\n  protected doubletap(event: TouchEvent | MouseEvent) {\n    const now = Date.now();\n    const lastTouch = Number(this.lastTouch) || now + 1;\n    const delta = now - lastTouch;\n    if (this.actionTimer !== -1) {\n      window.clearTimeout(this.actionTimer);\n    }\n\n    if (\n      delta < this.settings.doubletapInterval &&\n      delta > 100 &&\n      this.firstTap &&\n      getElementIndex(event.target as Element | null) === this.firstTap.index\n    ) {\n      this.doubletapped = true;\n      window.clearTimeout(this.tapTimer);\n      const lastTap = this.getTouchData(\n        event,\n        true,\n        TouchType.CHANGED,\n        TouchType.CHANGED\n      );\n      const touchData: TouchEventData = {\n        firstTap: this.firstTap,\n        secondTap: lastTap,\n        interval: lastTap.time - this.firstTap.time,\n      };\n      if (!this.cooling) {\n        this.triggerCustomEvent(\"doubletap\", event, touchData);\n        this.firstTap = null;\n      }\n      this.cooling = true;\n      window.setTimeout(() => {\n        this.cooling = false;\n      }, this.settings.doubletapInterval);\n    } else {\n      this.actionTimer = window.setTimeout(\n        () => {\n          this.firstTap = null;\n          window.clearTimeout(this.actionTimer);\n        },\n        this.settings.doubletapInterval,\n        [event]\n      );\n    }\n    this.lastTouch = now;\n  }\n\n  /**\n   * singletap Event\n   * This is used in conjunction with doubletap when both events are needed on the same element\n   */\n  protected singletap(event: TouchEvent | MouseEvent) {\n    this.tapTimer = window.setTimeout(() => {\n      const diffPosition: Position = {\n        x: this.startPosition.x - this.endPosition.x,\n        y: this.startPosition.y - this.endPosition.y,\n      };\n      if (\n        !this.doubletapped &&\n        !this.tapheld &&\n        ((this.startPosition.x === this.endPosition.x &&\n          this.startPosition.y === this.endPosition.y) ||\n          (diffPosition.x >= -this.settings.tapPixelRange &&\n            diffPosition.x <= this.settings.tapPixelRange &&\n            diffPosition.y >= -this.settings.tapPixelRange &&\n            diffPosition.y <= this.settings.tapPixelRange))\n      ) {\n        const touchData = this.getTouchData(\n          event,\n          false,\n          TouchType.CHANGED,\n          TouchType.CHANGED\n        );\n\n        // Was it a taphold?\n        if (touchData.time - this.startTime < this.settings.tapholdThreshold) {\n          this.triggerCustomEvent(\"singletap\", event, touchData);\n        }\n      }\n    }, this.settings.doubletapInterval);\n  }\n\n  /** tap Event */\n  protected tap(event: TouchEvent | MouseEvent) {\n    const diffPosition: Position = {\n      x: this.startPosition.x - this.endPosition.x,\n      y: this.startPosition.y - this.endPosition.y,\n    };\n\n    if (\n      this.tapStarted &&\n      Date.now() - this.startTime < this.settings.tapholdThreshold &&\n      ((this.startPosition.x === this.endPosition.x &&\n        this.startPosition.y === this.endPosition.y) ||\n        (diffPosition.x >= -this.settings.tapPixelRange &&\n          diffPosition.x <= this.settings.tapPixelRange &&\n          diffPosition.y >= -this.settings.tapPixelRange &&\n          diffPosition.y <= this.settings.tapPixelRange))\n    ) {\n      const touchesLength: number = (event as TouchEvent).targetTouches\n        ? (event as TouchEvent).targetTouches.length\n        : 1;\n      const touches = new Array<Partial<TouchData>>();\n\n      for (let i = 0; i < touchesLength; i++) {\n        const elOffset = (this.el as HTMLElement).getBoundingClientRect();\n        const touch = {\n          position: {\n            x: this.settings.touchCapable\n              ? (event as TouchEvent).changedTouches[i].pageX\n              : (event as MouseEvent).pageX,\n            y: this.settings.touchCapable\n              ? (event as TouchEvent).changedTouches[i].pageY\n              : (event as MouseEvent).pageY,\n          },\n          offset: {\n            x: this.settings.touchCapable\n              ? Math.round(\n                  (event as TouchEvent).changedTouches[i].pageX -\n                    (elOffset ? elOffset.left : 0)\n                )\n              : Math.round(\n                  (event as MouseEvent).pageX - (elOffset ? elOffset.left : 0)\n                ),\n            y: this.settings.touchCapable\n              ? Math.round(\n                  (event as TouchEvent).changedTouches[i].pageY -\n                    (elOffset ? elOffset.top : 0)\n                )\n              : Math.round(\n                  (event as MouseEvent).pageY - (elOffset ? elOffset.top : 0)\n                ),\n          },\n        };\n\n        touches.push(touch);\n      }\n\n      const touchData = {\n        touches,\n        time: Date.now(),\n      };\n\n      const eventName = touchesLength > 1 ? \"tap\" + touchesLength : \"tap\";\n      this.triggerCustomEvent(eventName, event, touchData);\n    }\n  }\n\n  /**\n   * swipe Event\n   * (also handles swipeup, swiperight, swipedown and swipeleft)\n   *\n   * (similar to `touchMove` method in jquery touch events)\n   */\n  protected swipe(event: TouchEvent | MouseEvent) {\n    const swipeDir = this.getSwipeDir(this.originalCoord, this.finalCoord);\n\n    if (swipeDir && this.swipeStarted && this.startEvnt) {\n      this.originalCoord.x = 0;\n      this.originalCoord.y = 0;\n      this.finalCoord.x = 0;\n      this.finalCoord.y = 0;\n      this.swipeStarted = false;\n\n      const endEvnt: TouchData = this.getTouchData(\n        event,\n        false,\n        TouchType.DEFAULT,\n        TouchType.CHANGED\n      );\n\n      // Calculate the swipe amount (normalized):\n      const xAmount = Math.abs(this.startEvnt.position.x - endEvnt.position.x);\n      const yAmount = Math.abs(this.startEvnt.position.y - endEvnt.position.y);\n\n      const touchData: TouchSwipeData = {\n        startEvnt: this.startEvnt,\n        endEvnt,\n        direction: swipeDir.replace(\"swipe\", \"\") as TouchDirection,\n        xAmount,\n        yAmount,\n        duration: endEvnt.time - this.startEvnt.time,\n      };\n      this.hasSwiped = true;\n      this.triggerCustomEvent(\"swipe\", event, touchData);\n      this.triggerCustomEvent(swipeDir, event, touchData);\n    }\n  }\n\n  /**\n   * swipeend Event\n   * (similar `touchEnd` method in jquery touch events)\n   */\n  protected swipeend(event: TouchEvent | MouseEvent) {\n    const endEvnt: TouchData = this.getTouchData(\n      event,\n      false,\n      TouchType.CHANGED,\n      TouchType.CHANGED\n    );\n    if (this.hasSwiped && this.startEvnt) {\n      const swipeDir = this.getSwipeDir(\n        this.startEvnt.position,\n        endEvnt.position\n      );\n\n      // Calculate the swipe amount (normalized):\n      const xAmount = Math.abs(this.startEvnt.position.x - endEvnt.position.x);\n      const yAmount = Math.abs(this.startEvnt.position.y - endEvnt.position.y);\n\n      const touchData: TouchSwipeData = {\n        startEvnt: this.startEvnt,\n        endEvnt,\n        direction: swipeDir.replace(\"swipe\", \"\") as TouchDirection,\n        xAmount,\n        yAmount,\n        duration: endEvnt.time - this.startEvnt.time,\n      };\n      this.triggerCustomEvent(\"swipeend\", event, touchData);\n    }\n  }\n}\n","/**\n * EvEmitter v2.1.1\n * Lil' event emitter\n * MIT License\n */\n\n( function( global, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\nfunction EvEmitter() {}\n\nlet proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) return this;\n\n  // set events hash\n  let events = this._events = this._events || {};\n  // set listeners array\n  let listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( !listeners.includes( listener ) ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) return this;\n\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  let onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  let onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  let listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) return this;\n\n  let index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  let listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) return this;\n\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice( 0 );\n  args = args || [];\n  // once stuff\n  let onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( let listener of listeners ) {\n    let isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n  return this;\n};\n\nreturn EvEmitter;\n\n} ) );\n","/*!\n * imagesLoaded v5.0.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory( window, require('ev-emitter') );\n  } else {\n    // browser global\n    window.imagesLoaded = factory( window, window.EvEmitter );\n  }\n\n} )( typeof window !== 'undefined' ? window : this,\n    function factory( window, EvEmitter ) {\n\nlet console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  // use object if already an array\n  if ( Array.isArray( obj ) ) return obj;\n\n  let isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  // convert nodeList to array\n  if ( isArrayLike ) return [ ...obj ];\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {[Array, Element, NodeList, String]} elem\n * @param {[Object, Function]} options - if function, use as callback\n * @param {Function} onAlways - callback function\n * @returns {ImagesLoaded}\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  let queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error(`Bad element for imagesLoaded ${queryElem || elem}`);\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = {};\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    Object.assign( this.options, options );\n  }\n\n  if ( onAlways ) this.on( 'always', onAlways );\n\n  this.getImages();\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\nconst elementNodeTypes = [ 1, 9, 11 ];\n\n/**\n * @param {Node} elem\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName === 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  let { nodeType } = elem;\n  if ( !nodeType || !elementNodeTypes.includes( nodeType ) ) return;\n\n  let childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( let img of childImgs ) {\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    let children = elem.querySelectorAll( this.options.background );\n    for ( let child of children ) {\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nconst reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  let style = getComputedStyle( elem );\n  // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n  if ( !style ) return;\n\n  // get url inside url(\"...\")\n  let matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    let url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  let loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  let background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  /* eslint-disable-next-line func-style */\n  let onProgress = ( image, elem, message ) => {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( () => {\n      this.progress( image, elem, message );\n    } );\n  };\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  } );\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n\n  // check if completed\n  if ( this.progressedCount === this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( `progress: ${message}`, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  let eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // Continue only if there is a non empty src\n  const src = this.img.currentSrc || this.img.src;\n  if ( !src ) {\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  // add crossOrigin attribute. #204\n  if ( this.img.crossOrigin ) {\n    this.proxyImage.crossOrigin = this.img.crossOrigin;\n  }\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  let { parentNode } = this.img;\n  // emit progress with parent <picture> or self <img>\n  let elem = parentNode.nodeName === 'PICTURE' ? parentNode : this.img;\n  this.emitEvent( 'progress', [ this, elem, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  let method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\nreturn ImagesLoaded;\n\n} );\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { TouchEventsService, TouchSwipeData } from \"@ribajs/extras\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { TOGGLE_BUTTON } from \"../../constants/index.js\";\nimport { Bs5Service } from \"../../services/index.js\";\nimport {\n  JsxBs5SidebarProps,\n  Bs5SidebarComponentScope,\n  SidebarState,\n  // Breakpoint,\n} from \"../../types/index.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { debounce } from \"@ribajs/utils/src/control\";\n\nexport class Bs5SidebarComponent extends Component {\n  public static tagName = \"bs5-sidebar\";\n\n  public static states = [\n    \"hidden\",\n    \"side-left\",\n    \"side-right\",\n    \"overlap-left\",\n    \"overlap-right\",\n    \"move-left\",\n    \"move-right\",\n  ];\n\n  protected computedStyle?: CSSStyleDeclaration;\n\n  protected autobind = true;\n\n  public _debug = false;\n\n  protected bs5: Bs5Service;\n\n  protected touch: TouchEventsService = new TouchEventsService(this);\n\n  static get observedAttributes(): (keyof JsxBs5SidebarProps)[] {\n    return [\n      \"id\",\n      \"container-selector\",\n      \"position\",\n      \"mode\",\n      \"width\",\n      \"auto-show\",\n      \"auto-hide\",\n      \"force-hide-on-location-pathnames\",\n      \"force-show-on-location-pathnames\",\n      \"watch-new-page-ready-event\",\n      \"close-on-swipe\",\n      \"prevent-scrolling-on-overlap\",\n    ];\n  }\n\n  public events?: EventDispatcher;\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public defaults: Bs5SidebarComponentScope = {\n    // Template properties\n    containerSelector: undefined,\n    state: \"hidden\",\n    oldState: \"hidden\",\n    id: undefined,\n    width: \"250px\",\n\n    // Options\n    position: \"left\",\n    mode: \"overlap\",\n    autoShow: false,\n    autoHide: false,\n    watchNewPageReadyEvent: true,\n    forceHideOnLocationPathnames: [],\n    forceShowOnLocationPathnames: [],\n    closeOnSwipe: true,\n    preventScrollingOnOverlap: true,\n\n    // Template methods\n    hide: this.hide,\n    show: this.show,\n    toggle: this.toggle,\n  };\n\n  public scope: Bs5SidebarComponentScope = {\n    ...this.defaults,\n  };\n\n  constructor() {\n    super();\n    this.bs5 = Bs5Service.getSingleton();\n    // assign this to bound version, so we can remove window EventListener later without problem\n    this.onEnvironmentChanges = this.onEnvironmentChanges.bind(this);\n  }\n\n  public setState(state: SidebarState) {\n    this.scope.oldState = this.scope.state;\n    this.scope.state = state;\n    this.onStateChange();\n  }\n\n  public getState() {\n    return this.scope.state;\n  }\n\n  public getShowMode() {\n    const mode: SidebarState =\n      `${this.scope.mode}-${this.scope.position}` as SidebarState;\n    return mode;\n  }\n\n  public hide() {\n    this.setState(\"hidden\");\n  }\n\n  public show() {\n    const state = this.getShowMode();\n    this.setState(state);\n  }\n\n  public toggle() {\n    this.debug(\"toggle state: \" + this.scope.state);\n    if (this.scope.state === \"hidden\") {\n      this.show();\n    } else {\n      this.hide();\n    }\n    this.debug(\"toggled state: \" + this.scope.state);\n  }\n\n  protected preventScrolling(scrollEl = document.body) {\n    scrollEl.style.overflow = \"hidden\";\n  }\n\n  protected allowScrolling(scrollEl = document.body) {\n    if (scrollEl.style.overflow === \"hidden\") {\n      scrollEl.style.overflow = \"\";\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5SidebarComponent.observedAttributes);\n    this.computedStyle = window.getComputedStyle(this);\n    this.addEventListeners();\n    // initial\n    this.onEnvironmentChanges();\n  }\n\n  protected onBreakpoint(/*breakpoint: Breakpoint | null*/) {\n    this.onEnvironmentChanges();\n  }\n\n  protected addEventListeners() {\n    // window.addEventListener(\"resize\", this.onEnvironmentChanges, {\n    //   passive: true,\n    // });\n    this.addEventListener(\"swipe\" as any, this.onSwipe);\n    this.bs5.events.on(\"breakpoint:changed\", this.onBreakpoint, this);\n  }\n\n  protected removeEventListeners() {\n    this.events?.off(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    this.events?.off(TOGGLE_BUTTON.eventNames.toggle, this.toggle, this);\n    this.routerEvents.off(\"newPageReady\", this.onEnvironmentChanges, this);\n    // window.removeEventListener(\"resize\", this.onEnvironmentChanges);\n    this.bs5.events.off(\"breakpoint:changed\", this.onBreakpoint, this);\n  }\n\n  protected initToggleButtonEventDispatcher() {\n    if (this.events) {\n      this.events.off(TOGGLE_BUTTON.eventNames.toggle, this.toggle, this);\n      this.events.off(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n    const namespace = TOGGLE_BUTTON.nsPrefix + this.scope.id;\n    this.debug(`Init event dispatcher for namespace  ${namespace}`);\n    this.events = new EventDispatcher(namespace);\n    this.events.on(TOGGLE_BUTTON.eventNames.toggle, this.toggle, this);\n    this.events.on(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n  }\n\n  protected initRouterEventDispatcher() {\n    if (this.scope.watchNewPageReadyEvent) {\n      this.routerEvents.on(\"newPageReady\", this.onEnvironmentChanges, this);\n    }\n  }\n\n  protected _onSwipe(event: CustomEvent<TouchSwipeData>) {\n    if (!this.scope.closeOnSwipe) {\n      return;\n    }\n    if (this.scope.state === \"side-left\" || this.scope.state === \"side-right\") {\n      return;\n    }\n    if (this.scope.position === \"left\" && event.detail.direction === \"left\") {\n      this.hide();\n    }\n\n    if (this.scope.position === \"right\" && event.detail.direction === \"right\") {\n      this.hide();\n    }\n  }\n\n  protected onSwipe = this._onSwipe.bind(this);\n\n  protected onHidden() {\n    const translateX = this.scope.position === \"left\" ? \"-100%\" : \"100%\";\n    this.style.transform = `translateX(${translateX})`;\n    this.width = this.scope.width;\n    this.setContainersStyle(this.scope.state);\n    if (this.scope.preventScrollingOnOverlap) {\n      this.allowScrolling();\n    }\n  }\n\n  protected onMove(state: SidebarState) {\n    this.style.transform = `translateX(0)`;\n    this.style.width = this.scope.width;\n    this.width = this.scope.width;\n    this.setContainersStyle(state);\n    if (this.scope.preventScrollingOnOverlap) {\n      this.allowScrolling();\n    }\n  }\n\n  protected onSide(state: SidebarState) {\n    this.style.transform = `translateX(0)`;\n    this.style.width = this.scope.width;\n    this.width = this.scope.width;\n    this.setContainersStyle(state);\n    if (this.scope.preventScrollingOnOverlap) {\n      this.allowScrolling();\n    }\n  }\n\n  protected onOverlap(state: SidebarState) {\n    this.style.transform = `translateX(0)`;\n    this.width = this.scope.width;\n    this.setContainersStyle(state);\n    if (this.scope.preventScrollingOnOverlap) {\n      this.preventScrolling();\n    }\n  }\n\n  protected triggerState() {\n    // Global event\n    this.events?.trigger(\"state\", this.scope.state);\n  }\n\n  protected onStateChange() {\n    switch (this.scope.state) {\n      case \"side-left\":\n      case \"side-right\":\n        this.onSide(this.scope.state);\n        break;\n      case \"overlap-left\":\n      case \"overlap-right\":\n        this.onOverlap(this.scope.state);\n        break;\n      case \"move-left\":\n      case \"move-right\":\n        this.onMove(this.scope.state);\n        break;\n      default:\n        this.onHidden();\n        break;\n    }\n\n    this.classList.remove(...Bs5SidebarComponent.states);\n    this.classList.add(this.scope.state);\n\n    if (this.events) {\n      this.events.trigger(TOGGLE_BUTTON.eventNames.toggled, this.scope.state);\n    }\n    this.dispatchEvent(\n      new CustomEvent(TOGGLE_BUTTON.eventNames.toggled, {\n        detail: this.scope.state,\n      })\n    );\n  }\n\n  protected get width() {\n    if (this.scope.width === this.defaults.width) {\n      return this.offsetWidth + \"px\";\n    }\n    return this.scope.width;\n  }\n\n  protected set width(width: string) {\n    this.scope.width = width;\n    this.style.width = width;\n  }\n\n  protected setStateByEnvironment() {\n    if (\n      this.scope.forceHideOnLocationPathnames.includes(window.location.pathname)\n    ) {\n      return this.hide();\n    }\n    if (\n      this.scope.forceShowOnLocationPathnames.includes(window.location.pathname)\n    ) {\n      return this.show();\n    }\n    if (this.scope.autoHide) {\n      return this.hide();\n    }\n    if (this.scope.autoShow) {\n      return this.show();\n    }\n  }\n\n  /**\n   * Internal (not debounced) version of `onEnvironmentChanges`.\n   */\n  protected _onEnvironmentChanges() {\n    this.setStateByEnvironment();\n  }\n\n  /**\n   * If viewport size changes, location url changes or something else.\n   */\n  protected onEnvironmentChanges = debounce(\n    this._onEnvironmentChanges.bind(this)\n  );\n\n  protected getContainers() {\n    return this.scope.containerSelector\n      ? document.querySelectorAll<HTMLUnknownElement>(\n          this.scope.containerSelector\n        )\n      : undefined;\n  }\n\n  protected initContainers(state: SidebarState) {\n    this.setContainersStyle(state);\n  }\n\n  protected setContainersStyle(state: SidebarState) {\n    const containers:\n      | NodeListOf<HTMLUnknownElement>\n      | Array<HTMLUnknownElement> = this.getContainers() || [];\n\n    if (containers) {\n      for (let i = 0; i < containers.length; i++) {\n        const container = containers[i];\n        this.setContainerStyle(container, state);\n      }\n    }\n  }\n\n  /**\n   * Sets the container style, takes overs always the transition style of this sidebar\n   * @param container\n   * @param style\n   * @param state\n   */\n  protected setContainerStyle(\n    container: HTMLUnknownElement,\n    state: SidebarState\n  ) {\n    const currStyle = container.style;\n    if (state) {\n      const width = this.width;\n      const conStyle = window.getComputedStyle(container);\n\n      if (this.scope.mode === \"move\" && state.startsWith(\"overlap-\")) {\n        switch (conStyle.position) {\n          case \"fixed\":\n          case \"absolute\":\n            currStyle.left = \"0\";\n            currStyle.right = \"0\";\n            break;\n          default:\n            currStyle.marginLeft = \"0\";\n            currStyle.marginRight = \"0\";\n            break;\n        }\n      }\n\n      switch (state) {\n        case \"side-left\":\n          switch (conStyle.position) {\n            case \"fixed\":\n            case \"absolute\":\n              currStyle.left = width;\n              break;\n            default:\n              currStyle.marginLeft = width;\n              break;\n          }\n          break;\n        case \"side-right\":\n          switch (conStyle.position) {\n            case \"fixed\":\n            case \"absolute\":\n              currStyle.right = width;\n              break;\n            default:\n              currStyle.marginRight = width;\n              break;\n          }\n          break;\n        case \"move-left\":\n          switch (conStyle.position) {\n            case \"fixed\":\n            case \"absolute\":\n              currStyle.left = width;\n              currStyle.right = `-${width}`;\n              break;\n            default:\n              currStyle.marginLeft = width;\n              currStyle.marginRight = `-${width}`;\n              break;\n          }\n          break;\n        case \"move-right\":\n          switch (conStyle.position) {\n            case \"fixed\":\n            case \"absolute\":\n              currStyle.right = width;\n              currStyle.left = `-${width}`;\n              break;\n            default:\n              currStyle.marginRight = width;\n              currStyle.marginLeft = `-${width}`;\n              break;\n          }\n          break;\n        case \"hidden\":\n          switch (this.scope.oldState) {\n            case \"side-left\":\n              switch (conStyle.position) {\n                case \"fixed\":\n                case \"absolute\":\n                  currStyle.left = \"0\";\n                  break;\n                default:\n                  currStyle.marginLeft = \"0\";\n                  break;\n              }\n              break;\n            case \"side-right\":\n              switch (conStyle.position) {\n                case \"fixed\":\n                case \"absolute\":\n                  currStyle.right = \"0\";\n                  break;\n                default:\n                  currStyle.marginRight = \"0\";\n                  break;\n              }\n              break;\n            case \"move-left\":\n              switch (conStyle.position) {\n                case \"fixed\":\n                case \"absolute\":\n                  currStyle.left = \"0\";\n                  currStyle.right = \"0\";\n                  break;\n                default:\n                  currStyle.marginRight = \"0\";\n                  currStyle.marginLeft = \"0\";\n                  break;\n              }\n              break;\n            case \"move-right\":\n              switch (conStyle.position) {\n                case \"fixed\":\n                case \"absolute\":\n                  currStyle.right = \"0\";\n                  currStyle.left = \"0\";\n                  break;\n                default:\n                  currStyle.marginRight = \"0\";\n                  currStyle.marginLeft = \"0\";\n                  break;\n              }\n              break;\n            default:\n              break;\n          }\n\n        default:\n          break;\n      }\n    }\n    container.style.transition = this.computedStyle\n      ? this.computedStyle.transition\n      : \"\";\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.scope.oldState = this.getShowMode();\n    this.initRouterEventDispatcher();\n    return this.onEnvironmentChanges();\n  }\n\n  protected async afterBind() {\n    this.onEnvironmentChanges();\n    await super.afterBind();\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"id\"];\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName === \"containerSelector\") {\n    }\n    if (attributeName === \"id\") {\n      this.initToggleButtonEventDispatcher();\n    }\n    switch (attributeName) {\n      case \"containerSelector\":\n        this.initContainers(this.scope.state);\n        break;\n      case \"id\":\n        this.initToggleButtonEventDispatcher();\n        break;\n      case \"width\":\n        this.width = newValue;\n      case \"mode\":\n        this.onStateChange();\n        this.initContainers(this.scope.state);\n        break;\n      case \"autoHide\":\n      case \"autoShow\":\n        this.setStateByEnvironment();\n        break;\n      default:\n        break;\n    }\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListeners();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (!hasChildNodesTrim(this)) {\n      console.warn(\n        \"No child elements found, this component as no template so you need to define your own as child of this component.\"\n      );\n    }\n    return null;\n  }\n}\n","export default \"<div class=\\\"row slideshow-row\\\">\\n  <div rv-each-slide=\\\"items\\\" rv-class=\\\"slide.class\\\" rv-class-active=\\\"slide.active\\\" rv-id=\\\"'slide-' | append slide.handle\\\" rv-index=\\\"slide.index\\\" rv-template=\\\"slide.content\\\"></div>\\n</div>\\n\"","export default \"<button rv-show=\\\"controls\\\" class=\\\"btn btn-link slideshow-controls slideshow-control-prev\\\" rv-add-class=\\\"controlsPositionClass\\\" role=\\\"button\\\" data-slide=\\\"prev\\\" rv-on-click=\\\"prev\\\">\\n  <bs5-icon rv-if=\\\"controlPrevIconSrc\\\" rv-src=\\\"controlPrevIconSrc\\\" direction=\\\"left\\\" size=\\\"24\\\"></bs5-icon>\\n  <span rv-hide=\\\"controlPrevIconSrc\\\" class=\\\"btn btn-link slideshow-control-fallback-prev-icon\\\" aria-hidden=\\\"true\\\"></span>\\n  <span class=\\\"visually-hidden\\\">Previous</span>\\n</button>\\n<button rv-show=\\\"controls\\\" class=\\\"btn btn-link slideshow-controls slideshow-control-next\\\" rv-add-class=\\\"controlsPositionClass\\\" role=\\\"button\\\" data-slide=\\\"next\\\" rv-on-click=\\\"next\\\">\\n  <bs5-icon rv-if=\\\"controlNextIconSrc\\\" rv-src=\\\"controlNextIconSrc\\\" direction=\\\"right\\\" size=\\\"24\\\"></bs5-icon>\\n  <span rv-hide=\\\"controlNextIconSrc\\\" class=\\\"slideshow-control-fallback-next-icon\\\" aria-hidden=\\\"true\\\"></span>\\n  <span class=\\\"visually-hidden\\\">Next</span>\\n</button>\\n\"","export default \"<ol rv-if=\\\"indicators\\\" class=\\\"slideshow-indicators\\\" rv-add-class=\\\"indicatorsPositionClass\\\">\\n  <li rv-each-slide=\\\"items\\\" rv-class-active=\\\"slide.active\\\" rv-on-click=\\\"goTo | args slide.index\\\">\\n    <bs5-icon rv-hide=\\\"slide.active\\\" rv-src=\\\"indicatorInactiveIconSrc\\\" size=\\\"16\\\"></bs5-icon>\\n    <bs5-icon rv-show=\\\"slide.active\\\" rv-src=\\\"indicatorActiveIconSrc\\\" size=\\\"16\\\"></bs5-icon>\\n  </li>\\n</ol>\\n\"","export default \"<img lazyload=\\\"lazy\\\" class=\\\"img-fluid w-100\\\" rv-src=\\\"slide.src\\\" rv-alt=\\\"slide.title\\\">\"","import { TemplatesComponent, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { hasChildNodesTrim, scrollTo } from \"@ribajs/utils/src/dom.js\";\nimport { throttle, debounce } from \"@ribajs/utils/src/control\";\nimport { Bs5Service } from \"../../services/index.js\";\nimport {\n  SlideshowControlsPosition,\n  SlideshowIndicatorsPosition,\n  SlideshowSlidePosition,\n  Bs5SlideshowComponentScope,\n  JsxBs5SlideshowProps,\n} from \"../../types/index.js\";\nimport {\n  Dragscroll,\n  DragscrollOptions,\n  Autoscroll,\n  AutoscrollOptions,\n  ScrollPosition,\n  ScrollEventsService,\n  getScrollPosition,\n} from \"@ribajs/extras\";\nimport templateSlides from \"./bs5-slideshow-slides.component.html?raw\";\nimport templateControls from \"./bs5-slideshow-controls.component.html?raw\";\nimport templateIndicators from \"./bs5-slideshow-indicators.component.html?raw\";\nimport templateImage from \"./bs5-slideshow-image.component.html?raw\";\n\nconst SLIDESHOW_INNER_SELECTOR = \".slideshow-row\";\n\nconst SLIDES_SELECTOR = `${SLIDESHOW_INNER_SELECTOR} .slide`;\n\nexport class Bs5SlideshowComponent extends TemplatesComponent {\n  protected resizeObserver?: ResizeObserver;\n  protected bs5: Bs5Service;\n\n  protected get slideshowInner() {\n    return this.querySelector<HTMLElement>(SLIDESHOW_INNER_SELECTOR);\n  }\n\n  protected get slideElements() {\n    return this.querySelectorAll<HTMLElement>(SLIDES_SELECTOR);\n  }\n\n  protected get controlsElements() {\n    return this.querySelectorAll(\n      \".slideshow-control-prev, .slideshow-control-next\"\n    );\n  }\n\n  protected get indicatorsElement() {\n    return this.querySelector(\".slideshow-indicators\");\n  }\n\n  static get observedAttributes(): (keyof JsxBs5SlideshowProps)[] {\n    return [\n      \"items\",\n      \"slides-to-scroll\",\n      \"controls\",\n      \"controls-position\",\n      \"drag\",\n      \"autoplay\",\n      \"autoplay-interval\",\n      \"autoplay-velocity\",\n      \"control-prev-icon-src\",\n      \"control-next-icon-src\",\n      \"indicator-inactive-icon-src\",\n      \"indicator-active-icon-src\",\n      \"angle\",\n      \"pause-on-hover\",\n      \"sticky\",\n      \"indicators\",\n      \"indicators-position\",\n      \"pause\",\n      \"infinite\",\n    ];\n  }\n\n  protected defaultScope: Bs5SlideshowComponentScope = {\n    // Options\n    slidesToScroll: 1,\n    controls: true,\n    controlsPosition: \"inside-middle\",\n    pauseOnHover: true,\n    sticky: false,\n    indicators: true,\n    indicatorsPosition: \"inside-bottom\",\n    pause: false,\n    drag: true,\n    touchScroll: true,\n    autoplay: false,\n    autoplayInterval: 0,\n    autoplayVelocity: 0.8,\n    controlPrevIconSrc: \"\",\n    controlNextIconSrc: \"\",\n    indicatorActiveIconSrc: \"\",\n    indicatorInactiveIconSrc: \"\",\n    angle: \"horizontal\",\n    infinite: true,\n\n    // Template methods\n    next: this.next.bind(this),\n    prev: this.prev.bind(this),\n    goTo: this.goTo.bind(this),\n    enableTouchScroll: this.enableTouchScroll.bind(this),\n    disableTouchScroll: this.disableTouchScroll.bind(this),\n\n    // Template properties\n    items: undefined,\n\n    // Classes\n    controlsPositionClass: \"\",\n    indicatorsPositionClass: \"\",\n    intervalCount: 0,\n    intervalProgress: 0,\n    nextIndex: -1,\n    prevIndex: -1,\n    activeIndex: 0,\n  };\n\n  public static tagName = \"bs5-slideshow\";\n\n  protected templateAttributes = [\n    {\n      name: \"class\",\n      required: false,\n    },\n    {\n      name: \"handle\",\n      required: false,\n    },\n    {\n      name: \"type\",\n      required: true,\n    },\n    {\n      name: \"active\",\n      type: \"boolean\",\n      required: false,\n    },\n    {\n      name: \"index\",\n      type: \"number\",\n      required: false,\n    },\n    {\n      name: \"src\",\n      type: \"string\",\n      required: false,\n    },\n  ];\n\n  protected autobind = true;\n\n  protected dragscrollService?: Dragscroll;\n\n  protected continuousAutoplayService?: Autoscroll;\n\n  protected scrollEventsService?: ScrollEventsService;\n\n  protected templateControls = templateControls;\n\n  protected templateIndicators = templateIndicators;\n\n  protected autoplayIntervalIndex: number | null = null;\n\n  protected continuousAutoplayIntervalIndex: number | null = null;\n\n  protected resumeTimer: number | null = null;\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: Bs5SlideshowComponentScope = {\n    ...this.defaultScope,\n  };\n\n  constructor() {\n    super();\n    this.bs5 = Bs5Service.getSingleton();\n\n    // set event listeners to the this-bound version once, so we can easily pass them to DOM event handlers and remove them again later\n    this.onViewChanges = this.onViewChanges.bind(this);\n    this.onVisibilityChanged = this.onVisibilityChanged.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n    this.onScrollend = this.onScrollend.bind(this);\n    this.onMouseIn = this.onMouseIn.bind(this);\n    this.onMouseOut = this.onMouseOut.bind(this);\n  }\n\n  /**\n   * Go to next slide\n   */\n  public next() {\n    this.scrollToNextSlide();\n  }\n\n  /**\n   * Go to prev slide\n   */\n  public prev() {\n    this.scrollToPrevSlide();\n  }\n\n  /**\n   * Go to slide by index\n   * @param index\n   */\n  public goTo(index: number) {\n    if (\n      index < 0 ||\n      !this.scope.items?.[index] ||\n      !this.slideElements[index] ||\n      !this.slideshowInner\n    ) {\n      this.throw(new Error(`Can't go to slide of index ${index}`));\n      console.error(\"items\", this.scope.items);\n      console.error(\"this.slideElements\", this.slideElements);\n      console.error(\"this.slideshowInner\", this.slideshowInner);\n      return;\n    }\n    this.setSlidePositions();\n\n    if (!this.slideElements[index]) {\n      this.throw(new Error(`Slide element with index \"${index}\" not found!`));\n    } else {\n      scrollTo(\n        this.slideElements[index],\n        0,\n        this.slideshowInner,\n        this.scope.angle\n      );\n      this.setSlideActive(index);\n    }\n  }\n\n  public getNextIndex(centeredIndex: number) {\n    let nextIndex = centeredIndex + this.scope.slidesToScroll;\n\n    if (nextIndex >= this.slideElements.length) {\n      if (!this.scope.infinite) {\n        return this.slideElements.length - 1;\n      }\n      nextIndex = nextIndex - this.slideElements.length;\n    }\n\n    return nextIndex;\n  }\n\n  public getPrevIndex(centeredIndex: number) {\n    let prevIndex = centeredIndex - this.scope.slidesToScroll;\n\n    if (prevIndex < 0) {\n      if (!this.scope.infinite) {\n        return 0;\n      }\n      prevIndex = this.slideElements.length - 1 + (prevIndex + 1);\n    }\n    return prevIndex;\n  }\n\n  public scrollToNearestSlide() {\n    this.setSlidePositions();\n    const nearestIndex = this.getMostCenteredSlideIndex();\n    return this.goTo(nearestIndex);\n  }\n\n  protected scrollToNextSlide() {\n    this.setSlidePositions();\n    const centeredIndex = this.getMostCenteredSlideIndex();\n    const nextIndex = this.getNextIndex(centeredIndex);\n\n    return this.goTo(nextIndex);\n  }\n\n  protected scrollToPrevSlide() {\n    this.setSlidePositions();\n    const centeredIndex = this.getMostCenteredSlideIndex();\n    const prevIndex = this.getPrevIndex(centeredIndex);\n    return this.goTo(prevIndex);\n  }\n\n  protected initOptions() {\n    this.setOptions();\n  }\n\n  protected setOptions() {\n    if (this.scope.autoplay) {\n      this.enableAutoplay();\n    } else {\n      this.disableAutoplay();\n    }\n    if (this.scope.drag) {\n      this.enableDesktopDragscroll();\n    } else {\n      this.disableDesktopDragscroll();\n    }\n    if (this.scope.touchScroll) {\n      this.enableTouchScroll();\n    } else {\n      this.disableTouchScroll();\n    }\n    this.setControlsOptions();\n    this.setIndicatorsOptions();\n  }\n\n  protected setControlsOptions() {\n    const position = this.scope.controlsPosition?.split(\n      \"-\"\n    ) as SlideshowControlsPosition[];\n    if (this.scope.controls && position.length === 2) {\n      this.scope.controlsPositionClass = `control-${position[0]} control-${position[1]}`;\n    } else {\n      this.scope.controlsPositionClass = \"\";\n    }\n  }\n\n  protected setIndicatorsOptions() {\n    const positions = this.scope.indicatorsPosition?.split(\n      \"-\"\n    ) as SlideshowIndicatorsPosition[];\n    if (this.scope.indicators && positions.length === 2) {\n      this.scope.indicatorsPositionClass = `indicators-${positions[0]} indicators-${positions[1]}`;\n    } else {\n      this.scope.indicatorsPositionClass = \"\";\n    }\n  }\n\n  protected _onViewChanges() {\n    this.debug(\"onViewChanges\");\n    if (!this.scope.items?.length || !this.slideElements?.length) {\n      return;\n    }\n    try {\n      this.setSlidePositions();\n      const index = this.setCenteredSlideActive();\n      if (this.scope.sticky) {\n        this.goTo(index);\n      }\n    } catch (error: any) {\n      this.throw(error);\n    }\n  }\n\n  protected onViewChanges = debounce(this._onViewChanges.bind(this));\n\n  protected onVisibilityChanged(event: CustomEvent) {\n    if (event.detail.visible) {\n      this.dragscrollService?.checkDraggable();\n      this.continuousAutoplayService?.update();\n    }\n  }\n\n  protected _onScroll() {\n    //\n  }\n\n  protected onScroll = debounce(this._onScroll.bind(this));\n\n  protected onScrollend() {\n    if (!this.scope.items?.length) {\n      return;\n    }\n    try {\n      this.setSlidePositions();\n      this.setCenteredSlideActive();\n      if (this.scope.sticky) {\n        this.scrollToNearestSlide();\n      }\n    } catch (error: any) {\n      this.throw(error);\n    }\n  }\n\n  protected onMouseIn() {\n    if (this.scope.pauseOnHover) {\n      this.scope.pause = true;\n    }\n  }\n\n  protected onMouseOut() {\n    this.resume();\n  }\n\n  protected _onMouseUp() {\n    //\n  }\n\n  protected onMouseUp = throttle(this._onMouseUp.bind(this));\n\n  protected _resume() {\n    this.setSlidePositions();\n    this.scope.pause = false;\n  }\n\n  /** Resume if this method was not called up for [delay] milliseconds */\n  protected resume = throttle(this._resume.bind(this), 500);\n\n  protected connectedCallback() {\n    // If slides not added by template or attribute\n    if (!this.scope.items?.length && this.slideElements) {\n      this.addItemsByChilds();\n    }\n    super.connectedCallback();\n    this.init(Bs5SlideshowComponent.observedAttributes);\n    this.addEventListeners();\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"newPageReady\", this.onViewChanges);\n\n    // If sidebar itself resizes\n    if (window.ResizeObserver) {\n      this.resizeObserver = new window.ResizeObserver(this.onViewChanges);\n      this.resizeObserver?.observe(this);\n    }\n\n    // If window resizes\n    window.addEventListener(\"resize\", this.onViewChanges, { passive: true });\n\n    // Custom event triggered by some parent components when this component changes his visibility, e.g. triggered in the bs5-tabs component\n    this.addEventListener(\n      \"visibility-changed\" as any,\n      this.onVisibilityChanged\n    );\n\n    this.slideshowInner?.addEventListener(\"scroll\", this.onScroll, {\n      passive: true,\n    });\n    this.slideshowInner?.addEventListener(\"scrollended\", this.onScrollend, {\n      passive: true,\n    });\n\n    this.addEventListener(\"mouseenter\", this.onMouseIn, { passive: true });\n    this.addEventListener(\"mouseover\", this.onMouseIn, { passive: true });\n    this.addEventListener(\"focusin\", this.onMouseIn, { passive: true });\n    this.addEventListener(\"touchstart\", this.onMouseIn, { passive: true });\n\n    this.addEventListener(\"mouseleave\", this.onMouseOut, { passive: true });\n    this.addEventListener(\"focusout\", this.onMouseOut, { passive: true });\n\n    this.addEventListener(\"mouseup\", this.onMouseUp, { passive: true });\n    this.addEventListener(\"touchend\", this.onMouseUp, { passive: true });\n    this.addEventListener(\"scroll\", this.onMouseUp, { passive: true });\n    this.addEventListener(\"scrollend\", this.onMouseUp, { passive: true });\n    // See ScrollEventsService for this event\n    this.addEventListener(\"scrollended\", this.onMouseUp, { passive: true });\n  }\n\n  protected removeEventListeners() {\n    this.routerEvents.off(\"newPageReady\", this.onViewChanges, this);\n\n    window.removeEventListener(\"resize\", this.onViewChanges);\n\n    this.resizeObserver?.unobserve(this);\n\n    this.bs5.events.off(\"breakpoint:changed\", this.onViewChanges, this);\n\n    this.removeEventListener(\n      \"visibility-changed\" as any,\n      this.onVisibilityChanged\n    );\n\n    this.slideshowInner?.removeEventListener(\"scroll\", this.onScroll);\n    this.slideshowInner?.removeEventListener(\"scrollended\", this.onScrollend);\n\n    this.removeEventListener(\"mouseenter\", this.onMouseIn);\n    this.removeEventListener(\"mouseover\", this.onMouseIn);\n    this.removeEventListener(\"focusin\", this.onMouseIn);\n    this.removeEventListener(\"touchstart\", this.onMouseIn);\n\n    this.removeEventListener(\"mouseleave\", this.onMouseOut);\n    this.removeEventListener(\"focusout\", this.onMouseOut);\n\n    this.removeEventListener(\"mouseup\", this.onMouseUp);\n    this.removeEventListener(\"touchend\", this.onMouseUp);\n    this.removeEventListener(\"scroll\", this.onMouseUp);\n    this.removeEventListener(\"scrollend\", this.onMouseUp);\n    // See ScrollEventsService for this event\n    this.removeEventListener(\"scrollended\", this.onMouseUp);\n  }\n\n  protected initAll() {\n    this.initSlideshowInner();\n    this.initOptions();\n    this.addEventListeners();\n    // initial\n    this.onViewChanges();\n    this.onScrollend();\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.validateItems();\n  }\n\n  protected async afterBind() {\n    this.initAll();\n    await super.afterBind();\n  }\n\n  protected initSlideshowInner() {\n    if (!this.slideshowInner) {\n      this.throw(new Error(\"Can't init slideshow inner!\"));\n      return;\n    }\n\n    this.scrollEventsService = new ScrollEventsService(this.slideshowInner);\n  }\n\n  protected enableDesktopDragscroll() {\n    if (!this.dragscrollService) {\n      if (!this.slideshowInner) {\n        return;\n      }\n      const dragscrollOptions: DragscrollOptions = { detectGlobalMove: true };\n      this.dragscrollService = new Dragscroll(\n        this.slideshowInner,\n        dragscrollOptions\n      );\n    }\n  }\n\n  protected disableDesktopDragscroll() {\n    if (this.dragscrollService) {\n      this.dragscrollService.destroy();\n      this.dragscrollService = undefined;\n    }\n  }\n\n  public enableTouchScroll() {\n    this.classList.remove(\"touchscroll-disabled\");\n  }\n\n  public disableTouchScroll() {\n    this.classList.add(\"touchscroll-disabled\");\n  }\n\n  protected enableContinuousAutoplay() {\n    if (!this.continuousAutoplayService && this.slideshowInner) {\n      const autoscrollOptions: AutoscrollOptions = {\n        velocity: this.scope.autoplayVelocity,\n        angle: this.scope.angle,\n        pauseOnHover: this.scope.pauseOnHover,\n      };\n      this.continuousAutoplayService = new Autoscroll(\n        this.slideshowInner,\n        autoscrollOptions\n      );\n    }\n    // on continuous autoplay the scrollended event is never triggered, so call this method all `intervalsTimeMs` milliseconds as a WORKAROUND\n    if (this.continuousAutoplayIntervalIndex === null) {\n      // intervals are depending on the autoscrolling speed (autoplayVelocity)\n      const intervalsTimeMs = this.scope.autoplayVelocity * 10000;\n      // this.debug('intervalsTimeMs', intervalsTimeMs);\n      this.continuousAutoplayIntervalIndex = window.setInterval(\n        this.onScrollend.bind(this),\n        intervalsTimeMs\n      );\n    }\n  }\n\n  protected disableContinuousAutoplay() {\n    if (this.continuousAutoplayService) {\n      this.continuousAutoplayService.pause();\n      this.continuousAutoplayService.destroy();\n      this.continuousAutoplayService = undefined;\n    }\n    if (this.continuousAutoplayIntervalIndex !== null) {\n      window.clearInterval(this.continuousAutoplayIntervalIndex);\n      this.continuousAutoplayIntervalIndex = null;\n    }\n  }\n\n  protected resetIntervalAutoplay() {\n    this.scope.intervalCount = 0;\n    this.scope.intervalProgress = 0;\n  }\n\n  protected enableIntervalAutoplay() {\n    const steps = 100;\n    if (this.autoplayIntervalIndex === null) {\n      this.autoplayIntervalIndex = window.setInterval(() => {\n        if (!this.scope.pause) {\n          this.scope.intervalCount += steps;\n          this.scope.intervalProgress =\n            (this.scope.intervalCount / this.scope.autoplayInterval) * 100;\n          if (this.scope.intervalProgress >= 100) {\n            this.next();\n          }\n        }\n      }, steps);\n    }\n  }\n\n  protected disableIntervalAutoplay() {\n    this.resetIntervalAutoplay();\n    console.debug(\"disableIntervalAutoplay\", this.autoplayIntervalIndex);\n    if (this.autoplayIntervalIndex !== null) {\n      window.clearInterval(this.autoplayIntervalIndex);\n      this.autoplayIntervalIndex = null;\n    }\n  }\n\n  protected disableAutoplay() {\n    this.disableIntervalAutoplay();\n    this.disableContinuousAutoplay();\n  }\n\n  protected enableAutoplay() {\n    this.disableAutoplay();\n    // continuous scrolling\n    if (this.scope.autoplayInterval <= 0) {\n      this.enableContinuousAutoplay();\n    } else {\n      this.enableIntervalAutoplay();\n    }\n  }\n\n  protected transformTemplateAttributes(attributes: any, index: number) {\n    attributes = super.transformTemplateAttributes(attributes, index);\n    attributes.handle = attributes.handle || index.toString();\n    attributes.index = index;\n    attributes.class = attributes.class || \"\";\n    attributes.class += \" slide\";\n    return attributes;\n  }\n\n  protected validateItems() {\n    if (!this.scope.items) {\n      this.throw(new Error(\"No items to validate!\"));\n      return;\n    }\n    for (let i = 0; i < this.scope.items.length; i++) {\n      const item = this.scope.items[i];\n      item.index = item.index || i;\n      item.active = item.active || false;\n      item.title = item.title || \"\";\n      item.handle = item.handle || item.index.toString();\n      item.position =\n        item.position ||\n        ({\n          centerX: 0,\n          centerY: 0,\n        } as SlideshowSlidePosition);\n\n      item.class = item.class || \"\";\n      item.class += \" slide\";\n\n      item.content = item.content || templateImage;\n    }\n  }\n\n  /**\n   * Add slide by template element\n   * @param tpl template element\n   */\n  protected addItemByTemplate(tpl: HTMLTemplateElement, index: number) {\n    const attributes = this.getTemplateAttributes(tpl, index);\n    const content = tpl.innerHTML;\n    if (attributes.type) {\n      if (attributes.type === \"slide\") {\n        if (!this.scope.items) {\n          this.scope.items = [];\n        }\n        this.scope.items.push({ ...attributes, content });\n      }\n      if (attributes.type === \"controls\") {\n        this.templateControls = content;\n      }\n      if (attributes.type === \"indicators\") {\n        this.templateIndicators = content;\n      }\n    }\n  }\n\n  /**\n   * Add slides by child elements (not as template elements)\n   * @param tpl template element\n   */\n  protected addItemsByChilds() {\n    if (!this.slideElements) {\n      this.throw(\n        new Error(\n          \"Can't not add items by child's because no slide child's are found!\"\n        )\n      );\n    }\n\n    this.slideElements.forEach((slideElement, index) => {\n      const handle =\n        slideElement.getAttribute(\"handle\") ||\n        slideElement.getAttribute(\"id\") ||\n        index.toString();\n      slideElement.setAttribute(\"index\", index.toString());\n      const attributes = {\n        handle,\n        active: false,\n        content: slideElement.innerHTML,\n        index,\n        position: {\n          ...slideElement.getBoundingClientRect(),\n          centerY: 0,\n          centerX: 0,\n        },\n      };\n      if (!this.scope.items) {\n        this.scope.items = [];\n      }\n      this.scope.items.push(attributes);\n    });\n  }\n\n  protected getScrollPosition(): ScrollPosition | null {\n    if (!this.slideshowInner) {\n      return null;\n    }\n    const scrollPosition = getScrollPosition(this.slideshowInner);\n    return scrollPosition;\n  }\n\n  /**\n   * get closest number\n   * @see https://stackoverflow.com/a/35000557\n   * @param goal the number which this number should be closest to\n   * @param curr current number in loop\n   * @param prev previous number or closest value found so far\n   */\n  protected getCurrentClosestNumber(goal: number, curr: number, prev: number) {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  }\n\n  protected getMostCenteredSlideIndex() {\n    if (!this.scope.items?.length) {\n      this.throw(new Error(\"No slide items found!\"));\n      return -1;\n    }\n\n    let nearZero = Math.abs(\n      this.scope.angle === \"vertical\"\n        ? this.scope.items[0].position.centerY\n        : this.scope.items[0].position.centerX\n    );\n    let minIndex = 0;\n\n    for (let i = 1; i < this.scope.items.length; i++) {\n      const position = Math.abs(\n        this.scope.angle === \"vertical\"\n          ? this.scope.items[i].position.centerY\n          : this.scope.items[i].position.centerX\n      );\n      nearZero = this.getCurrentClosestNumber(0, position, nearZero);\n      if (nearZero === position) {\n        minIndex = i;\n      }\n    }\n    return minIndex;\n  }\n\n  protected setAllSlidesInactive(excludeIndex = -1) {\n    if (!this.slideElements || !this.scope.items?.length) {\n      return;\n    }\n    for (let index = 0; index < this.scope.items.length; index++) {\n      if (index !== excludeIndex) {\n        if (this.scope.items[index]) {\n          this.scope.items[index].active = false;\n        }\n        if (this.slideElements[index] && this.slideElements[index].classList) {\n          this.slideElements[index].classList.remove(\"active\");\n        }\n      }\n    }\n  }\n\n  protected setSlideActive(index: number) {\n    if (index === -1 || !this.scope.items?.length) {\n      console.warn(new Error(\"Most centered slide not found!\"));\n      index = 0;\n    }\n\n    if (!this.scope.items?.[index]) {\n      index = 0;\n    }\n    if (!this.scope.items?.[index]) {\n      this.throw(new Error(\"Slide item to set active not found!\"));\n      return 0;\n    }\n    this.setAllSlidesInactive(index);\n    this.scope.items[index].active = true;\n    this.scope.activeIndex = index;\n    this.scope.nextIndex = this.getNextIndex(index);\n    this.scope.prevIndex = this.getPrevIndex(index);\n    this.resetIntervalAutoplay();\n\n    if (this.slideElements && this.slideElements[index].classList) {\n      this.slideElements[index].classList.add(\"active\");\n    }\n  }\n\n  protected setCenteredSlideActive(): number {\n    const index = this.getMostCenteredSlideIndex();\n    this.setSlideActive(index);\n    return index;\n  }\n\n  protected isScrollableToIndex(index: number) {\n    const scrollPosition = this.getScrollPosition();\n    if (!this.scope.items?.[index] || !this.slideshowInner || !scrollPosition) {\n      return false;\n    }\n    const maxScrollTo =\n      this.scope.angle === \"vertical\"\n        ? scrollPosition.maxY\n        : scrollPosition.maxX;\n    const scrollTo =\n      this.scope.angle === \"vertical\"\n        ? this.slideshowInner.scrollTop +\n          this.scope.items[index].position.centerY\n        : this.slideshowInner.scrollLeft +\n          this.scope.items[index].position.centerX;\n    return scrollTo <= maxScrollTo && scrollTo >= 0;\n  }\n\n  protected setSlidePositions() {\n    if (!this.bound) {\n      return;\n    }\n\n    if (this.scope.items?.length !== this.slideElements?.length) {\n      console.warn(\n        new Error(\n          `The slide objects must be the same size as the slide elements! items (${this.scope.items?.length}) !== slideElements (${this.slideElements?.length})`\n        ),\n        this.slideElements,\n        this\n      );\n      return;\n    }\n    if (!this.slideshowInner) {\n      return;\n    }\n\n    const mainBoundingClient = this.slideshowInner.getBoundingClientRect();\n    for (let i = 0; i < this.scope.items.length; i++) {\n      const slideElement = this.slideElements[i];\n      const item = this.scope.items[i];\n      const rect = slideElement.getBoundingClientRect();\n\n      rect.x -= mainBoundingClient.x;\n      rect.y -= mainBoundingClient.y;\n\n      item.position = {\n        ...rect,\n        // 0 if element is in the middle / center\n        centerY: rect.y + rect.height / 2 - mainBoundingClient.height / 2,\n        // 0 if element is in the middle / center\n        centerX: rect.x + rect.width / 2 - mainBoundingClient.width / 2,\n      };\n    }\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"items\"];\n  }\n\n  /**\n   * Similar to attributeChangedCallback but attribute arguments are already parsed as they are stored in the scope\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected parsedAttributeChangedCallback(\n    attributeName: keyof Bs5SlideshowComponentScope,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n\n    if (attributeName === \"items\") {\n      this.validateItems();\n    }\n\n    if (attributeName === \"autoplay\") {\n      if (this.scope.autoplay) {\n        this.enableAutoplay();\n      } else {\n        this.disableAutoplay();\n      }\n    }\n\n    if (attributeName === \"drag\") {\n      if (this.scope.drag) {\n        this.enableDesktopDragscroll();\n      } else {\n        this.disableDesktopDragscroll();\n      }\n    }\n\n    if (attributeName === \"touchScroll\") {\n      if (this.scope.touchScroll) {\n        this.enableTouchScroll();\n      } else {\n        this.disableTouchScroll();\n      }\n    }\n    if (attributeName === \"controls\" || attributeName === \"controlsPosition\") {\n      this.setControlsOptions();\n    }\n\n    if (\n      attributeName === \"indicators\" ||\n      attributeName === \"indicatorsPosition\"\n    ) {\n      this.setIndicatorsOptions();\n    }\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    this.removeEventListeners();\n    // this.scrollEventsService?.destroy();\n    // this.disableAutoplay();\n    // this.disableDesktopDragscroll();\n    // return super.disconnectedCallback();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    // Only set the component template if there no childs or the childs are templates\n    if (!hasChildNodesTrim(this) || this.hasOnlyTemplateChilds()) {\n      // ('Full template!', this.templateIndicators);\n      return templateSlides + this.templateControls + this.templateIndicators;\n    } else {\n      // this.debug('Append to template!');\n      // Prepend control elements if no custom control elements in template are found\n      if (this.controlsElements.length <= 0) {\n        this.innerHTML += this.templateControls;\n      }\n\n      if (!this.indicatorsElement) {\n        this.innerHTML += this.templateIndicators;\n      }\n\n      return null;\n    }\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { scrollTo } from \"@ribajs/utils/src/dom.js\";\nimport { debounce } from \"@ribajs/utils/src/control\";\nimport { Bs5Service } from \"../../services/index.js\";\nimport {\n  Bs5SliderControlsPosition,\n  Bs5SliderIndicatorsPosition,\n  Bs5SliderComponentScope,\n  JsxBs5SliderProps,\n  Bs5SliderSlide,\n} from \"../../types/index.js\";\nimport {\n  Dragscroll,\n  DragscrollOptions,\n  Autoscroll,\n  ScrollPosition,\n  ScrollEventsService,\n  getScrollPosition,\n  ScrollEventDetail,\n} from \"@ribajs/extras\";\n\nconst SLIDER_INNER_SELECTOR = \".slider-row\";\n\nconst SLIDES_SELECTOR = `${SLIDER_INNER_SELECTOR} .slide`;\n\n/**\n * @event scrolling - Fires when the slider is scrolling\n * @event scrollended - Fires when the slider has scrolled\n */\nexport class Bs5SliderComponent extends Component {\n  protected resizeObserver?: ResizeObserver;\n  protected bs5: Bs5Service;\n\n  protected get sliderInner() {\n    return this.querySelector<HTMLElement>(SLIDER_INNER_SELECTOR);\n  }\n\n  protected get slideElements() {\n    return Array.from(this.querySelectorAll<HTMLElement>(SLIDES_SELECTOR));\n  }\n\n  protected get controlsElements() {\n    return this.querySelectorAll(\".slider-control-prev, .slider-control-next\");\n  }\n\n  protected get indicatorsElement() {\n    return this.querySelector(\".slider-indicators\");\n  }\n\n  public static EVENTS = {\n    scrolling: \"scrolling\",\n    scrollended: \"scrollended\",\n  };\n\n  static get observedAttributes(): (keyof JsxBs5SliderProps)[] {\n    return [\n      \"items\",\n      \"slides-to-scroll\",\n      \"controls\",\n      \"controls-position\",\n      \"drag\",\n      \"sticky\",\n      \"indicators\",\n      \"indicators-position\",\n      \"infinite\",\n      \"columns\",\n    ];\n  }\n\n  protected defaultScope: Bs5SliderComponentScope = {\n    // Options\n    slidesToScroll: 1,\n    controls: true,\n    controlsPosition: \"inside-middle\",\n    sticky: false,\n    indicators: true,\n    indicatorsPosition: \"inside-bottom\",\n    drag: false,\n    touchScroll: true,\n    angle: \"horizontal\",\n    infinite: false,\n    columns: 0,\n\n    // States\n    items: [],\n    nextIndex: -1,\n    prevIndex: -1,\n    enableNextControl: false,\n    enablePrevControl: false,\n    showControls: false,\n    showIndicators: false,\n    activeSlides: [],\n    isScrolling: false,\n    slideItemStyle: {},\n\n    // Template methods\n    next: this.next.bind(this),\n    prev: this.prev.bind(this),\n    goTo: this.goTo.bind(this),\n    enableTouchScroll: this.enableTouchScroll.bind(this),\n    disableTouchScroll: this.disableTouchScroll.bind(this),\n\n    // Classes\n    controlsPositionClass: \"\",\n    indicatorsPositionClass: \"\",\n  };\n\n  public static tagName = \"bs5-slider\";\n\n  protected autobind = true;\n\n  protected dragscrollService?: Dragscroll;\n\n  protected continuousAutoplayService?: Autoscroll;\n\n  protected scrollEventsService?: ScrollEventsService;\n\n  protected autoplayIntervalIndex: number | null = null;\n\n  protected continuousAutoplayIntervalIndex: number | null = null;\n\n  protected resumeTimer: number | null = null;\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: Bs5SliderComponentScope = {\n    ...this.defaultScope,\n  };\n\n  constructor() {\n    super();\n    this.bs5 = Bs5Service.getSingleton();\n\n    // set event listeners to the this-bound version once, so we can easily pass them to DOM event handlers and remove them again later\n    this.onViewChanges = this.onViewChanges.bind(this);\n    this.onVisibilityChanged = this.onVisibilityChanged.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n    this.onScrollEnd = this.onScrollEnd.bind(this);\n\n    // this.onScroll = debounce(this.onScroll.bind(this), 100)\n  }\n\n  /**\n   * Go to next slide\n   */\n  public next() {\n    this.scrollToNextSlide();\n  }\n\n  /**\n   * Go to prev slide\n   */\n  public prev() {\n    this.scrollToPrevSlide();\n  }\n\n  /**\n   * Go to slide by index\n   * @param index The index of the slide you want to go to\n   * @param fromRight If true, the index is calculated from the right side of the slider, set this to true if you slide to the right\n   * @returns The index of the slide you went to or -1 if the end of the slider is reached\n   */\n  protected goTo(index: number, fromRight = false) {\n    if (index === -1 && !this.scope.infinite) {\n      console.warn(`End of slider reached!`);\n      return -1;\n    }\n\n    // The `scrollTo` method scrolls to the left, so we need to calculate the index of the right slide item\n    if (index !== -1 && fromRight && this.scope.activeSlides.length > 1) {\n      index = index - this.scope.activeSlides.length + 1;\n      if (index < 0) {\n        index = 0;\n      }\n    }\n\n    const item = this.scope.items[index];\n\n    if (!item || !this.sliderInner || !item.el) {\n      console.warn(`Slide element with index \"${index}\" not found!`);\n      return -1;\n    }\n\n    scrollTo(item.el, 0, this.sliderInner, this.scope.angle);\n    return index;\n  }\n\n  /**\n   * Calculate the next index to scroll to\n   * @param currentActive The current active index\n   * @returns The next index or -1 if there is no next index\n   */\n  protected getNextIndex(currentActive: number) {\n    let nextIndex = currentActive + this.scope.slidesToScroll;\n\n    if (nextIndex > this.scope.items.length - 1) {\n      if (this.scope.infinite) {\n        nextIndex = nextIndex - this.scope.items.length;\n      } else {\n        // return this.scope.items.length - 1\n        return -1;\n      }\n    }\n    return nextIndex;\n  }\n\n  /**\n   * Calculate the previous index to scroll to\n   * @param currentActive The current active index\n   * @returns The previous index or -1 if there is no previous index\n   */\n  protected getPrevIndex(currentActive: number) {\n    let prevIndex = currentActive - this.scope.slidesToScroll;\n\n    if (prevIndex < 0) {\n      if (this.scope.infinite) {\n        prevIndex = this.scope.items.length - 1 + (prevIndex + 1);\n      } else {\n        // return 0\n        return -1;\n      }\n    }\n    return prevIndex;\n  }\n\n  /**\n   * Scroll to the next slide\n   */\n  protected scrollToNextSlide() {\n    // Skip slide if already scrolling\n    if (this.scope.isScrolling) {\n      this.scope.nextIndex = this.getNextIndex(this.scope.nextIndex);\n      this.updateControls();\n    }\n    return this.goTo(this.scope.nextIndex, true);\n  }\n\n  /**\n   * Scroll to the previous slide\n   */\n  protected scrollToPrevSlide() {\n    // Skip slide if already scrolling\n    if (this.scope.isScrolling) {\n      this.scope.prevIndex = this.getPrevIndex(this.scope.prevIndex);\n      this.updateControls();\n    }\n    return this.goTo(this.scope.prevIndex, false);\n  }\n\n  protected initOptions() {\n    this.setOptions();\n  }\n\n  protected setOptions() {\n    if (this.scope.drag) {\n      this.enableDesktopDragscroll();\n    } else {\n      this.disableDesktopDragscroll();\n    }\n    if (this.scope.touchScroll) {\n      this.enableTouchScroll();\n    } else {\n      this.disableTouchScroll();\n    }\n    this.updateColumns();\n    this.setControlsOptions();\n    this.setIndicatorsOptions();\n  }\n\n  protected updateColumns() {\n    this.scope.slideItemStyle ||= {};\n\n    if (this.scope.columns > 0) {\n      this.scope.slideItemStyle.flex = `0 0 ${100 / this.scope.columns}%`;\n    } else {\n      this.scope.slideItemStyle.flex = \"\";\n    }\n  }\n\n  protected setControlsOptions() {\n    const position = this.scope.controlsPosition?.split(\n      \"-\"\n    ) as Bs5SliderControlsPosition[];\n    if (this.scope.controls && position.length === 2) {\n      this.scope.controlsPositionClass = `control-${position[0]} control-${position[1]}`;\n    } else {\n      this.scope.controlsPositionClass = \"\";\n    }\n  }\n\n  protected setIndicatorsOptions() {\n    const positions = this.scope.indicatorsPosition?.split(\n      \"-\"\n    ) as Bs5SliderIndicatorsPosition[];\n    if (this.scope.indicators && positions.length === 2) {\n      this.scope.indicatorsPositionClass = `indicators-${positions[0]} indicators-${positions[1]}`;\n    } else {\n      this.scope.indicatorsPositionClass = \"\";\n    }\n  }\n\n  protected _onViewChanges() {\n    this.debug(\"onViewChanges\");\n    if (!this.scope.items?.length || !this.slideElements?.length) {\n      return;\n    }\n    try {\n      this.updateSlides();\n    } catch (error: any) {\n      this.throw(error);\n    }\n  }\n\n  protected onViewChanges = debounce(this._onViewChanges.bind(this));\n\n  protected onVisibilityChanged(event: CustomEvent) {\n    if (event.detail.visible) {\n      this.dragscrollService?.checkDraggable();\n      this.continuousAutoplayService?.update();\n    }\n  }\n\n  protected onScroll(event: CustomEvent<ScrollEventDetail>) {\n    this.scope.isScrolling = true;\n    // Forward the event to this component, so that other components can listen to it\n    this.dispatchEvent(\n      new CustomEvent<ScrollEventDetail>(event.type, { detail: event.detail })\n    );\n  }\n\n  protected onScrollEnd(event: CustomEvent<ScrollEventDetail>) {\n    this.scope.isScrolling = false;\n    if (!this.scope.items?.length) {\n      return;\n    }\n\n    if (event.detail.direction === \"none\") {\n      return;\n    }\n\n    try {\n      this.updateSlides();\n    } catch (error: any) {\n      this.throw(error);\n    }\n\n    // Forward the event to this component, so that other components can listen to it\n    this.dispatchEvent(\n      new CustomEvent<ScrollEventDetail>(event.type, { detail: event.detail })\n    );\n  }\n\n  protected connectedCallback() {\n    if (this.scope.items.length || this.scope.slideTemplate) {\n      this.updateItems();\n    } else {\n      this.initItemsByChildren();\n    }\n\n    super.connectedCallback();\n    this.init(Bs5SliderComponent.observedAttributes);\n    this.addEventListeners();\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"newPageReady\", this.onViewChanges);\n\n    // If sidebar itself resizes\n    if (window.ResizeObserver) {\n      this.resizeObserver = new window.ResizeObserver(this.onViewChanges);\n      this.resizeObserver?.observe(this);\n    }\n\n    // If window resizes\n    window.addEventListener(\"resize\", this.onViewChanges, { passive: true });\n\n    // Custom event triggered by some parent components when this component changes his visibility, e.g. triggered in the bs5-tabs component\n    this.addEventListener(\n      \"visibility-changed\" as any,\n      this.onVisibilityChanged\n    );\n\n    this.sliderInner?.addEventListener(\n      Bs5SliderComponent.EVENTS.scrolling,\n      this.onScroll as EventListener,\n      {\n        passive: true,\n      }\n    );\n    this.sliderInner?.addEventListener(\n      Bs5SliderComponent.EVENTS.scrollended,\n      this.onScrollEnd as EventListener,\n      {\n        passive: true,\n      }\n    );\n  }\n\n  protected removeEventListeners() {\n    this.routerEvents.off(\"newPageReady\", this.onViewChanges, this);\n\n    window.removeEventListener(\"resize\", this.onViewChanges);\n\n    this.resizeObserver?.unobserve(this);\n\n    this.bs5.events.off(\"breakpoint:changed\", this.onViewChanges, this);\n\n    this.removeEventListener(\n      \"visibility-changed\" as any,\n      this.onVisibilityChanged\n    );\n\n    this.sliderInner?.removeEventListener(\n      Bs5SliderComponent.EVENTS.scrolling,\n      this.onScroll as EventListener\n    );\n    this.sliderInner?.removeEventListener(\n      Bs5SliderComponent.EVENTS.scrollended,\n      this.onScrollEnd as EventListener\n    );\n  }\n\n  protected initAll() {\n    this.initSlideshowInner();\n    this.initOptions();\n    this.addEventListeners();\n    // initial\n    this.updateSlides();\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.validateItems();\n  }\n\n  protected async afterBind() {\n    this.initAll();\n    this.updateItems();\n    this.classList.add(`${Bs5SliderComponent.tagName}-ready`);\n    await super.afterBind();\n  }\n\n  protected async afterAllBind() {\n    this.updateItems();\n    await super.afterAllBind();\n  }\n\n  protected initSlideshowInner() {\n    if (!this.sliderInner) {\n      this.throw(new Error(\"Can't init slider inner!\"));\n      return;\n    }\n\n    this.scrollEventsService = new ScrollEventsService(this.sliderInner);\n  }\n\n  protected enableDesktopDragscroll() {\n    if (!this.dragscrollService) {\n      if (!this.sliderInner) {\n        return;\n      }\n      const dragscrollOptions: DragscrollOptions = { detectGlobalMove: true };\n      this.dragscrollService = new Dragscroll(\n        this.sliderInner,\n        dragscrollOptions\n      );\n    }\n  }\n\n  protected disableDesktopDragscroll() {\n    if (this.dragscrollService) {\n      this.dragscrollService.destroy();\n      this.dragscrollService = undefined;\n    }\n  }\n\n  public enableTouchScroll() {\n    this.classList.remove(\"touchscroll-disabled\");\n  }\n\n  public disableTouchScroll() {\n    this.classList.add(\"touchscroll-disabled\");\n  }\n\n  protected validateItems() {\n    if (!this.scope.items) {\n      this.throw(new Error(\"No items to validate!\"));\n      return;\n    }\n    for (let i = 0; i < this.scope.items.length; i++) {\n      const item = this.scope.items[i];\n      item.index = item.index || i;\n      item.active = item.active || false;\n    }\n  }\n\n  public updateItems() {\n    let hasChange = false;\n    const slideEls = this.slideElements;\n\n    // Check if items are missing only if there is no slide template\n    if (!this.scope.slideTemplate) {\n      slideEls.forEach((slideEl, index) => {\n        const exists = this.scope.items.find((item) => item.el === slideEl);\n        if (!exists) {\n          this.addItemByElement(slideEl, index);\n          hasChange = true;\n        }\n      });\n    }\n\n    // Check if items are not existing anymore\n    for (const item of this.scope.items) {\n      const exists = slideEls.find((slideEl) => slideEl === item.el);\n      if (!exists) {\n        this.removeItem(item.index, false);\n        hasChange = true;\n      }\n    }\n\n    if (hasChange) {\n      this.updateItemIndexes();\n      this.updateSlides();\n    }\n\n    return hasChange;\n  }\n\n  /**\n   * Remove slide item\n   * @param index The index of the item to remove\n   */\n  protected removeItem(index: number, updateIndex = true) {\n    const item = this.scope.items[index];\n    if (!item) {\n      return;\n    }\n    item.el?.remove();\n    this.scope.items.splice(index, 1);\n    if (updateIndex) this.updateItemIndexes();\n  }\n\n  protected updateItemIndexes() {\n    for (let i = 0; i < this.scope.items.length; i++) {\n      const item = this.scope.items[i];\n      item.index = i;\n    }\n  }\n\n  protected addItemByElement(slideElement: HTMLElement, index: number) {\n    slideElement.setAttribute(\"index\", index.toString());\n    const attributes: Bs5SliderSlide = {\n      active: false,\n      index,\n      el: slideElement,\n    };\n    this.scope.items.push(attributes);\n  }\n\n  /**\n   * Add slides by child elements\n   * @param tpl template element\n   */\n  protected initItemsByChildren() {\n    if (!this.slideElements) {\n      this.throw(\n        new Error(\n          \"Can't not add items by child's because no slide child's are found!\"\n        )\n      );\n    }\n    this.scope.items = [];\n    this.slideElements.forEach(this.addItemByElement.bind(this));\n  }\n\n  protected getScrollPosition(): ScrollPosition | null {\n    if (!this.sliderInner) {\n      return null;\n    }\n    const scrollPosition = getScrollPosition(this.sliderInner);\n    return scrollPosition;\n  }\n\n  /**\n   * get closest number\n   * @see https://stackoverflow.com/a/35000557\n   * @param goal the number which this number should be closest to\n   * @param curr current number in loop\n   * @param prev previous number or closest value found so far\n   */\n  protected getCurrentClosestNumber(goal: number, curr: number, prev: number) {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  }\n\n  protected setAllSlidesInactive(excludeIndex = -1) {\n    for (const item of this.scope.items) {\n      if (item.index !== excludeIndex) {\n        item.active = false;\n        item.el?.classList.remove(\"active\");\n      }\n    }\n  }\n\n  protected setSlideActive(index: number) {\n    if (index === -1 || !this.scope.items?.length) {\n      console.warn(new Error(\"Most centered slide not found!\"));\n      index = 0;\n    }\n    if (!this.scope.items?.[index]) {\n      index = 0;\n    }\n    if (!this.scope.items?.[index]) {\n      this.throw(new Error(\"Slide item to set active, not found!\"));\n      return 0;\n    }\n\n    const item = this.scope.items[index];\n\n    item.active = true;\n    item.el?.classList.add(\"active\");\n  }\n\n  protected setSlidesActive(slides: number[]) {\n    this.setAllSlidesInactive();\n    for (const slideIndex of slides) {\n      this.setSlideActive(slideIndex);\n    }\n  }\n\n  protected isScrollable() {\n    if (!this.sliderInner) {\n      return false;\n    }\n\n    // Compare the height to see if the element has scrollable content\n    const hasScrollableContent =\n      this.scope.angle === \"horizontal\"\n        ? this.sliderInner.scrollWidth > this.sliderInner.clientWidth\n        : this.sliderInner.scrollHeight > this.sliderInner.clientHeight;\n\n    return hasScrollableContent;\n  }\n\n  protected getSlideElementByIndex(index: number) {\n    if (!this.sliderInner) {\n      return undefined;\n    }\n    const slideEl = this.sliderInner.querySelector(\n      `[index=\"${index}\"]`\n    ) as HTMLElement;\n    return slideEl;\n  }\n\n  protected isSlideVisible(item: Bs5SliderSlide, offset: number) {\n    if (!this.sliderInner) {\n      return false;\n    }\n    const containerRect = this.sliderInner.getBoundingClientRect();\n    item.el ||= this.getSlideElementByIndex(item.index);\n    const slideEl = item.el;\n    if (!slideEl) {\n      console.warn(\"Slide element not found!\");\n      return false;\n    }\n    const slideRect = slideEl.getBoundingClientRect();\n\n    // Check if the element is visible by comparing its position with the container\n    const isVisible =\n      this.scope.angle === \"horizontal\"\n        ? slideRect.left + offset >= containerRect.left &&\n          slideRect.right - offset <= containerRect.right\n        : slideRect.top + offset >= containerRect.top &&\n          slideRect.bottom - offset <= containerRect.bottom;\n\n    return isVisible;\n  }\n\n  protected getVisibleSlides(offset: number) {\n    const activeSlides: number[] = [];\n\n    if (!this.scope.items?.length) {\n      return activeSlides;\n    }\n\n    for (const item of this.scope.items) {\n      if (this.isSlideVisible(item, offset)) {\n        activeSlides.push(item.index);\n      }\n    }\n\n    return activeSlides.sort((a, b) => a - b);\n  }\n\n  protected setVisibleSlidesActive(offset: number) {\n    this.setAllSlidesInactive();\n    const activeSlides = this.getVisibleSlides(offset);\n    this.setSlidesActive(activeSlides);\n    return activeSlides;\n  }\n\n  updateActiveSlides(offset = 8) {\n    const activeSlides = this.setVisibleSlidesActive(offset);\n    const firstIndex = activeSlides[0] || 0;\n    const lastIndex = activeSlides[activeSlides.length - 1] || 0;\n    const prevIndex = this.getPrevIndex(firstIndex);\n    const nextIndex = this.getNextIndex(lastIndex);\n    return {\n      firstIndex,\n      lastIndex,\n      activeSlides,\n      prevIndex,\n      nextIndex,\n    };\n  }\n\n  protected updateSlides(offset = 8, isRetry = false): number[] {\n    if (!this.scope.items.length) {\n      return [];\n    }\n    const { activeSlides, firstIndex, prevIndex, nextIndex } =\n      this.updateActiveSlides(offset);\n\n    // Try again with a bigger offset if no slides are found\n    if (!activeSlides.length && !isRetry) {\n      let fallbackOffset = offset * 2;\n      if (this.scope.angle === \"horizontal\") {\n        const slideWidth = this.scope.items[0]?.el?.clientWidth || 0;\n        if (slideWidth) {\n          fallbackOffset = Math.round(slideWidth / 2 - 0.5);\n        }\n      } else {\n        const slideHeight = this.scope.items[0]?.el?.clientHeight || 0;\n        if (slideHeight) {\n          fallbackOffset = Math.round(slideHeight / 2 - 0.5);\n        }\n      }\n      return this.updateSlides(fallbackOffset, true);\n    }\n\n    // const oldActiveSlides = this.scope.activeSlides;\n    this.scope.activeSlides = activeSlides;\n    this.scope.prevIndex = prevIndex;\n    this.scope.nextIndex = nextIndex;\n\n    this.updateControls();\n    this.updateIndicators();\n\n    if (this.scope.sticky) {\n      this.goTo(firstIndex);\n    }\n\n    return activeSlides;\n  }\n\n  protected updateControls() {\n    const isScrollable = this.isScrollable();\n    this.scope.showControls =\n      this.scope.controls && isScrollable && this.scope.items.length > 1;\n\n    if (this.scope.infinite) {\n      this.scope.enableNextControl = true;\n      this.scope.enablePrevControl = true;\n      return;\n    }\n\n    this.scope.enableNextControl =\n      isScrollable &&\n      this.scope.nextIndex !== -1 &&\n      this.scope.nextIndex <= this.scope.items.length - 1;\n    this.scope.enablePrevControl =\n      isScrollable && this.scope.prevIndex !== -1 && this.scope.prevIndex >= 0;\n  }\n\n  protected updateIndicators() {\n    const isScrollable = this.isScrollable();\n    this.scope.showIndicators =\n      this.scope.indicators && isScrollable && this.scope.items.length > 1;\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  /**\n   * Similar to attributeChangedCallback but attribute arguments are already parsed as they are stored in the scope\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected parsedAttributeChangedCallback(\n    attributeName: keyof Bs5SliderComponentScope,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n\n    if (attributeName === \"items\") {\n      this.validateItems();\n    }\n\n    if (attributeName === \"drag\") {\n      if (this.scope.drag) {\n        this.enableDesktopDragscroll();\n      } else {\n        this.disableDesktopDragscroll();\n      }\n    }\n\n    if (attributeName === \"touchScroll\") {\n      if (this.scope.touchScroll) {\n        this.enableTouchScroll();\n      } else {\n        this.disableTouchScroll();\n      }\n    }\n    if (attributeName === \"controls\" || attributeName === \"controlsPosition\") {\n      this.setControlsOptions();\n    }\n\n    if (\n      attributeName === \"indicators\" ||\n      attributeName === \"indicatorsPosition\"\n    ) {\n      this.setIndicatorsOptions();\n    }\n\n    if (attributeName === \"columns\") {\n      this.updateColumns();\n    }\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    this.removeEventListeners();\n    // this.scrollEventsService?.destroy();\n    // this.disableDesktopDragscroll();\n    // return super.disconnectedCallback();\n  }\n\n  protected async beforeTemplate(): Promise<void> {\n    const templates = Array.from(this.querySelectorAll(\"template\"));\n    for (const template of templates) {\n      const type = template.getAttribute(\"type\");\n      switch (type) {\n        case \"slide-item\":\n          this.scope.slideTemplate =\n            template.content.children.item(0)?.outerHTML || undefined;\n          this.debug(\"Slide template found!\", this.scope.slideTemplate);\n          break;\n\n        default:\n          console.warn(`Unknown template type: ${type}`, template);\n          break;\n      }\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { VideoComponentScope, MediaReadyState } from \"../../types/index.js\";\nimport { justDigits } from \"@ribajs/utils\";\n\nexport class VideoComponent extends Component {\n  public static tagName = \"rv-video\";\n\n  protected autobind = true;\n  protected alreadyStartedPlaying = false;\n  protected wasPaused = false;\n  public _debug = false;\n\n  static get observedAttributes(): string[] {\n    return [\"video-src\", \"autoplay-on-min-buffer\", \"autoplay-media-query\"];\n  }\n\n  public get muted() {\n    return this.video && this.video.muted;\n  }\n\n  public set muted(muted: boolean) {\n    this.video.muted = muted;\n    this.scope.muted = this.video.muted;\n    if (muted) {\n      this.video.setAttribute(\"muted\", \"\");\n    } else {\n      this.video.removeAttribute(\"muted\");\n    }\n    this.onUpdate();\n  }\n\n  /**\n   * * 1.0 is highest volume (100%. This is default)\n   * * 0.5 is half volume (50%)\n   * * 0.0 is silent (same as mute)\n   */\n  public get volume() {\n    return this.video?.volume || 0;\n  }\n\n  public set volume(volume: number) {\n    this.video.volume = volume;\n    this.onUpdate();\n  }\n\n  public get loop() {\n    return this.video?.loop;\n  }\n\n  public set loop(loop: boolean) {\n    this.video.loop = loop;\n    if (loop) {\n      this.video.setAttribute(\"loop\", \"\");\n    } else {\n      this.video.removeAttribute(\"loop\");\n    }\n    this.onUpdate();\n  }\n\n  public get controls() {\n    return this.video?.controls;\n  }\n\n  public set controls(controls: boolean) {\n    this.video.controls = controls;\n    this.scope.controls = this.video.controls;\n    if (controls) {\n      this.video.setAttribute(\"controls\", \"\");\n      // show controls\n      this.video.dispatchEvent(new Event(\"mouseover\"));\n      this.video.dispatchEvent(new Event(\"mouseenter\"));\n      this.video.dispatchEvent(new Event(\"mousemove\"));\n    } else {\n      this.video.removeAttribute(\"controls\");\n    }\n    this.onUpdate();\n  }\n\n  public get currentTime() {\n    return this.video?.currentTime || 0;\n  }\n\n  public set currentTime(currentTime: number) {\n    this.video.currentTime = currentTime;\n    this.onUpdate();\n  }\n\n  public get autoplay() {\n    return this.video?.autoplay || false;\n  }\n\n  public set autoplay(autoplay: boolean) {\n    this.video.autoplay = autoplay;\n    this.onUpdate();\n  }\n\n  public get height() {\n    return this.video?.height || 0;\n  }\n\n  public set height(height: number) {\n    this.video.height = height;\n    this.onUpdate();\n  }\n\n  public get width() {\n    return this.video?.width || 0;\n  }\n\n  public set width(width: number) {\n    this.video.width = width;\n    this.onUpdate();\n  }\n\n  public get poster() {\n    return this.video?.poster;\n  }\n\n  public set poster(poster: string) {\n    this.video.poster = poster;\n    this.onUpdate();\n  }\n\n  public get preload() {\n    return this.video?.preload as \"\" | \"none\" | \"metadata\" | \"auto\";\n  }\n\n  public set preload(preload: \"\" | \"none\" | \"metadata\" | \"auto\") {\n    this.video.preload = preload;\n    this.onUpdate();\n  }\n\n  public get disablePictureInPicture() {\n    return (\n      (this.video as any)?.disablePictureInPicture ||\n      this.video?.hasAttribute(\"disablePictureInPicture\") ||\n      false\n    );\n  }\n\n  public set disablePictureInPicture(disablePictureInPicture: boolean) {\n    if (typeof (this.video as any)?.disablePictureInPicture !== \"undefined\") {\n      (this.video as any).disablePictureInPicture = disablePictureInPicture;\n    }\n\n    if (disablePictureInPicture) {\n      this.video.setAttribute(\"disablePictureInPicture\", \"\");\n    } else {\n      this.video.removeAttribute(\"disablePictureInPicture\");\n    }\n\n    this.onUpdate();\n  }\n\n  /**\n   * @readonly\n   */\n  public get paused() {\n    return this.video?.paused ?? true;\n  }\n\n  protected video: HTMLVideoElement;\n\n  public scope: VideoComponentScope = {\n    // properties\n    muted: this.muted,\n    volume: this.volume,\n    loop: this.loop,\n    controls: this.controls,\n    currentTime: this.currentTime,\n\n    videoSrc: undefined,\n    autoplayOnMinBuffer: 0,\n    autoplayMediaQuery: \"\",\n    disablePictureInPicture: this.disablePictureInPicture,\n    /**\n     * @readonly\n     */\n    paused: this.paused,\n    loading: false,\n    duration: 0,\n    readyState: MediaReadyState.HAVE_NOTHING,\n    buffer: 0,\n    // methods\n    toggleMute: this.toggleMute,\n    toggleControls: this.toggleControls,\n    play: this.play,\n    pause: this.pause,\n    togglePlay: this.togglePlay,\n    togglePause: this.togglePause,\n    reset: this.reset,\n  };\n\n  constructor() {\n    super();\n    this.video = this.getVideoEl();\n  }\n\n  protected getVideoEl() {\n    const video = this.querySelector<HTMLVideoElement>(\"video\");\n    if (!video) {\n      throw new Error(\"No video element found\");\n    }\n    return video;\n  }\n\n  public load() {\n    this.video.load();\n  }\n\n  public toggleMute() {\n    this.debug(\"toggleMute\");\n    this.muted = !this.muted;\n    this.onUpdate();\n  }\n\n  public toggleControls() {\n    this.debug(\"toggleControls\");\n    this.controls = !this.controls;\n    this.onUpdate();\n  }\n\n  public async play() {\n    this.debug(\"play\");\n    try {\n      this.video.play();\n    } catch (error) {\n      this.error(error);\n    }\n  }\n\n  public pause() {\n    this.debug(\"pause\");\n    this.video.pause();\n    this.onUpdate();\n  }\n\n  public async togglePlay() {\n    if (this.paused) {\n      return this.play();\n    } else {\n      return this.pause();\n    }\n  }\n\n  public togglePause() {\n    this.debug(\"togglePause\");\n    return this.togglePlay();\n  }\n\n  public reset() {\n    this.debug(\"reset\");\n    this.video.currentTime = 0;\n    this.onUpdate();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(VideoComponent.observedAttributes);\n    this.video = this.getVideoEl();\n    if (this.preload === \"auto\" || this.preload === \"metadata\") {\n      this.load();\n    }\n  }\n\n  protected initVideoElement() {\n    const video = this.querySelector(\"video\");\n    if (!video) {\n      throw new Error(\"The video child element is required!\");\n    }\n    this.video = video;\n    this.addEventListeners();\n    this.onUpdate();\n  }\n\n  /**\n   * Used to load new video source file\n   */\n  public resetVideo() {\n    this.video.innerHTML = \"\";\n    const videoEl = this.video.cloneNode(true) as HTMLVideoElement;\n    const videoWrapperEl = this.querySelector(\".video-wrapper\");\n    this.removeEventListeners();\n    this.video.remove();\n    if (videoWrapperEl) {\n      videoWrapperEl.appendChild(videoEl);\n    } else {\n      this.appendChild(videoEl);\n    }\n\n    this.video = videoEl;\n\n    if (this.video.hasAttribute(\"muted\")) {\n      this.muted = true;\n    } else {\n      this.muted = false;\n    }\n\n    if (this.video.hasAttribute(\"controls\")) {\n      this.controls = true;\n    } else {\n      this.controls = false;\n    }\n\n    if (this.video.hasAttribute(\"autoplay\")) {\n      this.autoplay = true;\n    } else {\n      this.autoplay = false;\n    }\n\n    if (this.video.hasAttribute(\"height\")) {\n      this.height = justDigits(this.video.getAttribute(\"height\") || 0);\n    }\n\n    if (this.video.hasAttribute(\"width\")) {\n      this.width = justDigits(this.video.getAttribute(\"width\") || 0);\n    }\n\n    if (this.video.hasAttribute(\"loop\")) {\n      this.loop = true;\n    } else {\n      this.loop = false;\n    }\n\n    if (this.video.hasAttribute(\"muted\")) {\n      this.muted = true;\n    } else {\n      this.muted = false;\n    }\n\n    if (this.video.hasAttribute(\"poster\")) {\n      this.poster = this.video.getAttribute(\"poster\") || \"\";\n    }\n\n    if (this.video.hasAttribute(\"preload\")) {\n      this.preload = (this.video.getAttribute(\"preload\") || \"\") as\n        | \"\"\n        | \"none\"\n        | \"metadata\"\n        | \"auto\";\n    }\n\n    if (this.video.hasAttribute(\"disablePictureInPicture\")) {\n      this.disablePictureInPicture = true;\n    } else {\n      this.disablePictureInPicture = false;\n    }\n\n    this.scope.readyState = MediaReadyState.HAVE_NOTHING;\n    this.alreadyStartedPlaying = false;\n    this.scope.loading = false;\n\n    this.initVideoElement();\n\n    this.reset();\n  }\n\n  protected setVideoSource() {\n    if (this.scope.videoSrc) {\n      this.resetVideo();\n      let sourceElement = this.video.querySelector(\"source\");\n      if (!sourceElement) {\n        sourceElement = document.createElement(\"source\");\n        this.video.appendChild(sourceElement);\n      }\n      sourceElement.setAttribute(\"src\", this.scope.videoSrc);\n    }\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    this.debug(\"parsedAttributeChangedCallback\", attributeName);\n    if (attributeName === \"videoSrc\") {\n      this.setVideoSource();\n    }\n  }\n\n  protected addEventListeners() {\n    if (this.scope.autoplayMediaQuery) {\n      // autoplay-media-query attribute\n      const mediaQueryList = window.matchMedia(this.scope.autoplayMediaQuery);\n      mediaQueryList.addEventListener(\"change\", this.onMediaQueryListEvent);\n      // Initial check\n      if (mediaQueryList.matches) {\n        this.startAutoplay();\n      }\n    }\n\n    this.video.addEventListener(\"progress\", this.onVideoProgress);\n    this.video.addEventListener(\"loadstart\", this.onLoadStart);\n    this.video.addEventListener(\"canplay\", this.onCanPlay);\n    this.video.addEventListener(\"canplaythrough\", this.onCanPlayThrough);\n    this.video.addEventListener(\"waiting\", this.onWaiting);\n    this.video.addEventListener(\"durationchange\", this.onDurationChange);\n    this.video.addEventListener(\"timeupdate\", this.onTimeUpdate);\n    this.video.addEventListener(\"play\", this.onPlay);\n    this.video.addEventListener(\"pause\", this.onPause);\n  }\n\n  protected removeEventListeners() {\n    if (this.scope.autoplayMediaQuery) {\n      // autoplay-media-query attribute\n      const mediaQueryList = window.matchMedia(this.scope.autoplayMediaQuery);\n      mediaQueryList.removeEventListener(\"change\", this.onMediaQueryListEvent);\n    }\n\n    this.video.removeEventListener(\"progress\", this.onVideoProgress);\n    this.video.removeEventListener(\"loadstart\", this.onLoadStart);\n    this.video.removeEventListener(\"canplay\", this.onCanPlay);\n    this.video.removeEventListener(\"canplaythrough\", this.onCanPlayThrough);\n    this.video.removeEventListener(\"waiting\", this.onWaiting);\n    this.video.removeEventListener(\"durationchange\", this.onDurationChange);\n    this.video.removeEventListener(\"timeupdate\", this.onTimeUpdate);\n    this.video.removeEventListener(\"play\", this.onPlay);\n    this.video.removeEventListener(\"pause\", this.onPause);\n  }\n\n  protected _onUpdate() {\n    if (this.scope.muted !== this.video.muted) {\n      this.scope.muted = this.video.muted;\n    }\n\n    if (this.scope.volume !== this.video.volume) {\n      this.scope.volume = this.video.volume;\n    }\n\n    if (this.scope.loop !== this.video.loop) {\n      this.scope.loop = this.video.loop;\n    }\n\n    if (this.scope.controls !== this.video.controls) {\n      this.scope.controls = this.video.controls;\n    }\n\n    if (this.scope.currentTime !== this.video.currentTime) {\n      this.scope.currentTime = this.video.currentTime;\n    }\n\n    if (this.scope.paused !== this.video.paused) {\n      this.scope.paused = this.video.paused;\n    }\n\n    if (this.scope.duration !== this.video.duration) {\n      this.scope.duration = this.video.duration;\n    }\n\n    if (this.scope.readyState !== this.video.readyState) {\n      this.scope.readyState = this.video.readyState;\n    }\n  }\n\n  protected onUpdate = this._onUpdate.bind(this);\n\n  protected async beforeBind() {\n    this.initVideoElement();\n  }\n\n  protected async afterBind() {\n    // Workaround for Firefox\n    this.video.load();\n  }\n\n  /**\n   * Loads the media and checks if the autoplay-on-min-buffer is set\n   */\n  public startAutoplay() {\n    if (this.scope.autoplayOnMinBuffer) {\n      this.forceLoad();\n    } else {\n      this.forceAutoplay();\n    }\n  }\n\n  public forceLoad() {\n    this.video.setAttribute(\"preload\", \"auto\");\n    this.video.load();\n  }\n\n  /**\n   * Forces autoplay without checking for the autoplay-on-min-buffer event\n   */\n  protected _forceAutoplay() {\n    if (!this.alreadyStartedPlaying) {\n      this.alreadyStartedPlaying = true;\n      this.video.muted = true; //video is required to be muted if autoplay video is supposed to autoplay\n      this.forceLoad();\n      this.play();\n    }\n  }\n\n  /**\n   * Forces autoplay without checking for the autoplay-on-min-buffer event\n   */\n  public forceAutoplay = this._forceAutoplay.bind(this);\n\n  /*********************\n   * Event listener start\n   *********************/\n  protected _onMediaQueryListEvent(event: MediaQueryListEvent) {\n    if (event.matches) {\n      //if mediaquery matches, play video or start autoplay\n      if (this.alreadyStartedPlaying) {\n        if (!this.wasPaused) {\n          this.play();\n        }\n      } else {\n        this.startAutoplay();\n      }\n    } else {\n      //if mediaquery stops matching, pause video if not already paused\n      this.wasPaused = this.video.paused;\n      this.pause();\n    }\n  }\n\n  protected onMediaQueryListEvent = this._onMediaQueryListEvent.bind(this);\n\n  protected _onVideoProgress() {\n    this.debug(\"_onVideoProgress\");\n    if (this.alreadyStartedPlaying) return;\n    if (isNaN(this.video.duration)) {\n      console.warn(\"Video duration is NaN\");\n      return;\n    }\n\n    // Calculate already buffered amount\n    let bufferedAmount = 0;\n    for (let i = 0; i < this.video.buffered.length; i++) {\n      bufferedAmount +=\n        this.video.buffered.end(i) - this.video.buffered.start(i);\n    }\n\n    this.scope.buffer = bufferedAmount / this.video.duration;\n\n    // If buffered amount is over given percentage in scope, force autoplay\n    if (\n      this.scope.autoplayOnMinBuffer &&\n      this.scope.buffer > this.scope.autoplayOnMinBuffer\n    ) {\n      this.forceAutoplay();\n    }\n  }\n\n  protected onVideoProgress = this._onVideoProgress.bind(this);\n\n  protected _onLoadStart() {\n    this.debug(\"_onLoadStart\");\n    this.scope.loading = true;\n    this.onUpdate();\n  }\n\n  protected onLoadStart = this._onLoadStart.bind(this);\n\n  protected _onCanPlay() {\n    this.debug(\"_onCanPlay\");\n    // this.scope.loading = false;\n    this.onUpdate();\n  }\n\n  protected onCanPlay = this._onCanPlay.bind(this);\n\n  protected _onCanPlayThrough() {\n    this.scope.loading = false;\n    if (this.scope.autoplayOnMinBuffer) {\n      this.forceAutoplay(); // trust browser more than ourselves\n    }\n    this.onUpdate();\n  }\n\n  protected onCanPlayThrough = this._onCanPlayThrough.bind(this);\n\n  protected _onWaiting() {\n    this.debug(\"_onPlay\");\n    this.scope.loading = true;\n    this.onUpdate();\n  }\n\n  protected onWaiting = this._onWaiting.bind(this);\n\n  protected _onDurationChange() {\n    this.onUpdate();\n  }\n\n  protected onDurationChange = this._onDurationChange.bind(this);\n\n  protected _onTimeUpdate() {\n    this.onUpdate();\n  }\n\n  protected onTimeUpdate = this._onTimeUpdate.bind(this);\n\n  protected _onPlay() {\n    this.debug(\"_onPlay\");\n    this.scope.loading = false;\n    this.alreadyStartedPlaying = true;\n    this.scope.paused = false;\n    this.onUpdate();\n  }\n\n  protected onPlay = this._onPlay.bind(this);\n\n  protected _onPause() {\n    this.scope.paused = true;\n    this.onUpdate();\n  }\n\n  protected onPause = this._onPause.bind(this);\n\n  /*********************\n   * Event listener end\n   *********************/\n\n  protected async init(observedAttributes: string[]) {\n    return super.init(observedAttributes).then((view) => {\n      return view;\n    });\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { Bs5SliderComponent } from \"../bs5-slider/bs5-slider.component.js\";\nimport { VideoComponent } from \"@ribajs/extras/src/components/index.js\";\n\nimport type { ScrollEvent } from \"@ribajs/extras\";\n\ninterface Scope {\n  /** Set to true to play the video automatically when the slide is active */\n  autoplay: boolean;\n}\n\n/**\n * A slide with a video, used to play the video when the slide is active\n */\nexport class Bs5SlideVideoComponent extends Component {\n  public static tagName = \"bs5-slide-video\";\n\n  public scope: Scope = {\n    autoplay: false,\n  };\n\n  slider: Bs5SliderComponent | null = null;\n  videoCo: VideoComponent | null = null;\n  videoEl: HTMLVideoElement | null = null;\n  slideEl: HTMLElement | null = null;\n\n  static get observedAttributes(): string[] {\n    return [\"autoplay\"];\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5SlideVideoComponent.observedAttributes);\n    this.onSlideEnd = this.onSlideEnd.bind(this);\n  }\n\n  protected onSlideEnd(event: ScrollEvent) {\n    this.debug(\n      \"[Bs5SlideVideoComponent] onSlideEnd\",\n      event,\n      this.slideEl?.classList\n    );\n\n    if (this.scope.autoplay) {\n      this.playIfActive();\n    }\n  }\n\n  protected playIfActive() {\n    if (this.slideEl?.classList.contains(\"active\")) {\n      if (this.videoCo) {\n        this.videoCo.play();\n      } else if (this.videoEl) {\n        this.videoEl.play();\n      }\n    }\n  }\n\n  protected addEventListeners() {\n    this.slider?.addEventListener(\n      Bs5SliderComponent.EVENTS.scrollended,\n      this.onSlideEnd as EventListener\n    );\n  }\n\n  protected removeEventListeners() {\n    this.slider?.removeEventListener(\n      Bs5SliderComponent.EVENTS.scrollended,\n      this.onSlideEnd as EventListener\n    );\n  }\n\n  protected async beforeBind(): Promise<void> {\n    await super.beforeBind();\n    this.addEventListeners();\n  }\n\n  protected async afterBind(): Promise<void> {\n    if (this.scope.autoplay) {\n      this.playIfActive();\n    }\n    await super.beforeBind();\n  }\n\n  protected async beforeTemplate(): Promise<void> {\n    this.slider = this.closest<Bs5SliderComponent>(Bs5SliderComponent.tagName);\n    this.videoCo = this.querySelector<VideoComponent>(VideoComponent.tagName);\n    this.videoEl = this.querySelector<HTMLVideoElement>(\"video\");\n    this.slideEl = this.closest<HTMLElement>(\".slide\");\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","export default \"<ul rv-scrollbar-draggable rv-aria-orientation=\\\"optionTabsAngle\\\" role=\\\"tablist\\\" class=\\\"nav nav-tabs flex-scrollbar-x-auto scrollbar-y-hidden\\\">\\n  <li class=\\\"nav-item\\\" rv-each-tab=\\\"items\\\">\\n    <button role=\\\"tab\\\" class=\\\"btn btn-link nav-link\\\" rv-class-active=\\\"tab.active\\\" rv-id=\\\"'tab-title-' | append tab.handle\\\" rv-aria-controls=\\\"'tab-content-' | append tab.handle\\\" rv-on-click=\\\"activate | args tab\\\" rv-html=\\\"tab.title\\\"></button>\\n  </li>\\n</ul>\\n<div class=\\\"tab-content\\\">\\n  <div rv-each-tab=\\\"items\\\" role=\\\"tabpanel\\\" class=\\\"tab-pane\\\" rv-class-show=\\\"tab.active\\\" rv-class-active=\\\"tab.active\\\" rv-id=\\\"'tab-content-' | append tab.handle\\\" rv-aria-labelledby=\\\"'tab-title-' | append tab.handle\\\" rv-template=\\\"tab.content\\\"></div>\\n</div>  \\n\"","export default \"<div class=\\\"row\\\">\\n  <div class=\\\"col-auto\\\">\\n    <div class=\\\"nav flex-column nav-pills\\\" role=\\\"tablist\\\" rv-aria-orientation=\\\"optionTabsAngle\\\">\\n      <div class=\\\"nav-item\\\" rv-each-tab=\\\"items\\\">\\n        <button class=\\\"btn btn-link nav-link\\\" role=\\\"tab\\\" rv-class-active=\\\"tab.active\\\" rv-id=\\\"'tab-title-' | append tab.handle\\\" rv-aria-controls=\\\"'tab-content-' | append tab.handle\\\" rv-on-click=\\\"activate | args tab\\\" rv-html=\\\"tab.title\\\"></button>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"col-auto\\\">\\n    <div class=\\\"tab-content\\\">\\n      <div rv-each-tab=\\\"items\\\" role=\\\"tabpanel\\\" class=\\\"tab-pane\\\" rv-class-show=\\\"tab.active\\\" rv-class-active=\\\"tab.active\\\" rv-id=\\\"'tab-content-' | append tab.handle\\\" rv-aria-labelledby=\\\"'tab-title-' | append tab.handle\\\" rv-template=\\\"tab.content\\\"></div>\\n    </div>  \\n  </div>\\n</div>\\n\"","import {\n  handleizeFormatter,\n  FormatterFn,\n  TemplateFunction,\n  TemplatesComponent,\n  ScopeBase,\n} from \"@ribajs/core\";\nimport templateHorizontal from \"./bs5-tabs-horizontal.component.html?raw\";\nimport templateVertical from \"./bs5-tabs-vertical.component.html?raw\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { throttle } from \"@ribajs/utils/src/control\";\n\nconst handleize = handleizeFormatter.read as FormatterFn;\n\nexport interface Tab {\n  title: string;\n  content: string;\n  handle: string;\n  active: boolean;\n  type?: string;\n  index: number;\n}\n\nexport interface Scope extends ScopeBase {\n  items: Tab[];\n  activate: Bs5TabsComponent[\"activate\"];\n  deactivate: Bs5TabsComponent[\"activate\"];\n  deactivateAll: Bs5TabsComponent[\"deactivateAll\"];\n  optionTabsAutoHeight: boolean;\n  optionTabsAngle: \"vertical\" | \"horizontal\";\n}\n\nexport class Bs5TabsComponent extends TemplatesComponent {\n  public static tagName = \"bs5-tabs\";\n\n  protected templateAttributes = [\n    {\n      name: \"title\",\n      required: true,\n    },\n    {\n      name: \"handle\",\n      required: false,\n    },\n    {\n      name: \"type\",\n      required: false,\n    },\n    {\n      name: \"active\",\n      required: false,\n    },\n    {\n      name: \"index\",\n      required: false,\n    },\n  ];\n\n  public scope: Scope = {\n    items: new Array<Tab>(),\n    activate: this.activate,\n    deactivate: this.deactivate,\n    deactivateAll: this.deactivateAll,\n    optionTabsAutoHeight: false,\n    optionTabsAngle: \"horizontal\",\n  };\n\n  protected tabs?: NodeListOf<Element>;\n  protected tabPanes?: NodeListOf<Element>;\n  protected scrollable?: Element | null;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"option-tabs-auto-height\",\n      \"option-tabs-angle\",\n      \"tab-0-title\",\n      \"tab-0-content\",\n      \"tab-0-handle\",\n      \"tab-1-title\",\n      \"tab-1-content\",\n      \"tab-1-handle\",\n      \"tab-2-title\",\n      \"tab-2-content\",\n      \"tab-2-handle\",\n      \"tab-3-title\",\n      \"tab-3-content\",\n      \"tab-3-handle\",\n      \"tab-4-title\",\n      \"tab-4-content\",\n      \"tab-4-handle\",\n      \"tab-5-title\",\n      \"tab-5-content\",\n      \"tab-5-handle\",\n      \"tab-6-title\",\n      \"tab-6-content\",\n      \"tab-6-handle\",\n      \"tab-7-title\",\n      \"tab-7-content\",\n      \"tab-7-handle\",\n      \"tab-8-title\",\n      \"tab-8-content\",\n      \"tab-8-handle\",\n      \"tab-9-title\",\n      \"tab-9-content\",\n      \"tab-9-handle\",\n      \"tab-10-title\",\n      \"tab-10-content\",\n      \"tab-10-handle\",\n      \"tab-11-title\",\n      \"tab-11-content\",\n      \"tab-11-handle\",\n      \"tab-12-title\",\n      \"tab-12-content\",\n      \"tab-12-handle\",\n      \"tab-13-title\",\n      \"tab-13-content\",\n      \"tab-13-handle\",\n      \"tab-14-title\",\n      \"tab-14-content\",\n      \"tab-14-handle\",\n      \"tab-15-title\",\n      \"tab-15-content\",\n      \"tab-15-handle\",\n      \"tab-16-title\",\n      \"tab-16-content\",\n      \"tab-16-handle\",\n      \"tab-17-title\",\n      \"tab-17-content\",\n      \"tab-17-handle\",\n      \"tab-18-title\",\n      \"tab-18-content\",\n      \"tab-18-handle\",\n      \"tab-19-title\",\n      \"tab-19-content\",\n      \"tab-19-handle\",\n    ];\n  }\n\n  constructor() {\n    super();\n  }\n\n  protected _onResize() {\n    this.setHeight();\n  }\n\n  protected onResize = throttle(this._onResize.bind(this));\n\n  /**\n   * Make all tabs panes as height as the highest tab pane\n   */\n  public setHeight() {\n    if (this.scope.optionTabsAutoHeight) {\n      return;\n    }\n    // Bind static template\n    this.setElements();\n\n    let highest = 0;\n    if (!this.tabPanes) {\n      return;\n    }\n    this.tabPanes.forEach((tabPane) => {\n      if (!(tabPane as unknown as HTMLElement).style) {\n        return;\n      }\n      (tabPane as unknown as HTMLElement).style.height = \"auto\";\n      (tabPane as unknown as HTMLElement).style.display = \"block\";\n      const height = (tabPane as unknown as HTMLElement).offsetHeight || 0;\n      if (height > highest) {\n        highest = height;\n      }\n    });\n    this.tabPanes.forEach((tabPane) => {\n      if (!(tabPane as unknown as HTMLElement).style) {\n        return;\n      }\n      // Reset display style property\n      (tabPane as unknown as HTMLElement).style.display = \"\";\n      if (highest > 0) {\n        (tabPane as unknown as HTMLElement).style.height = highest + \"px\";\n      }\n    });\n  }\n\n  public deactivateAll() {\n    for (let index = 0; index < this.scope.items.length; index++) {\n      const tab = this.scope.items[index];\n      this.deactivate(tab);\n    }\n  }\n\n  public deactivate(tab: Tab) {\n    tab.active = false;\n\n    const firstTabContentChild = this.getTabContentChildByIndex(tab.index);\n    if (firstTabContentChild) {\n      this.triggerVisibilityChangedForElement(firstTabContentChild, tab.active);\n    }\n  }\n\n  public activate(tab: Tab) {\n    this.deactivateAll();\n    tab.active = true;\n\n    const firstTabContentChild = this.getTabContentChildByIndex(tab.index);\n    if (firstTabContentChild) {\n      this.triggerVisibilityChangedForElement(\n        firstTabContentChild as Element,\n        tab.active\n      );\n    }\n  }\n\n  protected activateFirstTab() {\n    if (this.scope.items.length > 0) {\n      this.activate(this.scope.items[0]);\n    }\n  }\n\n  protected getTabContentChildByIndex(index: number) {\n    return (\n      this.querySelector(\n        `.tab-content .tab-pane:nth-child(${index + 1}) > *`\n      ) || undefined\n    );\n  }\n\n  /**\n   * Trigger `visibility-changed` for components that need to update if visibility changes.\n   * E.g. this event is used the bs5-slideshow component\n   * @param element\n   * @param visible\n   */\n  protected triggerVisibilityChangedForElement(\n    element: Element,\n    visible: boolean\n  ) {\n    setTimeout(() => {\n      // Use this event to update any custom element when it becomes visible\n      element.dispatchEvent(\n        new CustomEvent(\"visibility-changed\", { detail: { visible } })\n      );\n    }, 200);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.initTabs();\n    this.activateFirstTab();\n    this.init(Bs5TabsComponent.observedAttributes);\n  }\n\n  protected disconnectedCallback() {\n    if (this.tabs) {\n      this.tabs.forEach((tab) => {\n        tab.removeEventListener(\"shown.bs.tab\", this.onTabShownEventHandler);\n      });\n    }\n    window.removeEventListener(\"resize\", this.onResize);\n  }\n\n  protected setElements() {\n    this.tabs = this.querySelectorAll('[role=\"tab\"]');\n    this.tabPanes = this.querySelectorAll('[role=\"tabpanel\"]');\n    this.scrollable = this.querySelector(\"[scrollable]\");\n  }\n\n  protected resizeTabsArray(newSize: number) {\n    while (newSize > this.scope.items.length) {\n      this.scope.items.push({\n        handle: \"\",\n        title: \"\",\n        content: \"\",\n        active: false,\n        index: this.scope.items.length - 1,\n      });\n    }\n  }\n\n  protected onTabShownEventHandler(event: Event) {\n    const curTab = (event.target || event.srcElement) as Element | null;\n    if (!curTab) {\n      return;\n    }\n    if (this.scrollable) {\n      const tabScrollPosition = curTab.getBoundingClientRect();\n      const scrollLeftTo =\n        this.scrollable.scrollLeft || 0 + tabScrollPosition.left;\n      // TODO animate\n      // this.scrollable.animate({ scrollLeft: scrollLeftTo}, 'slow');\n      this.scrollable.scrollLeft = scrollLeftTo;\n    }\n  }\n\n  protected initTabs() {\n    // Bind static template\n    this.setElements();\n\n    if (this.tabs) {\n      this.tabs.forEach((tab) => {\n        tab.removeEventListener(\"shown.bs.tab\", this.onTabShownEventHandler);\n        tab.addEventListener(\"shown.bs.tab\", this.onTabShownEventHandler);\n      });\n    }\n\n    if (this.scope.optionTabsAutoHeight) {\n      window.removeEventListener(\"resize\", this.onResize);\n      window.addEventListener(\"resize\", this.onResize, { passive: true });\n      this.setHeight();\n    }\n  }\n\n  protected addTabByAttribute(attributeName: string, newValue: string) {\n    const index = Number(attributeName.replace(/[^0-9]/g, \"\"));\n    if (index >= this.scope.items.length) {\n      this.resizeTabsArray(index + 1);\n    }\n    this.scope.items[index].index = index;\n    if (attributeName.endsWith(\"Content\")) {\n      this.scope.items[index].content = newValue;\n    }\n    if (attributeName.endsWith(\"Title\")) {\n      this.scope.items[index].title = newValue;\n      this.scope.items[index].handle =\n        this.scope.items[index].handle ||\n        handleize(this.scope.items[index].title);\n    }\n    if (attributeName.endsWith(\"Handle\")) {\n      this.scope.items[index].handle = newValue;\n    }\n\n    // if is first tab\n    if (\n      this.scope.items.length > 0 &&\n      this.scope.items[0] &&\n      this.scope.items[0].content.length > 0 &&\n      this.scope.items[0].title.length > 0 &&\n      this.scope.items[0].handle.length > 0\n    ) {\n      this.activateFirstTab();\n    }\n  }\n\n  /**\n   * Extends TemplatesComponent.transformTemplateAttributes to set the handle by the title if no handle is set\n   */\n  protected transformTemplateAttributes(attributes: any, index: number) {\n    attributes = super.transformTemplateAttributes(attributes, index);\n    if (!attributes.handle && attributes.title) {\n      attributes.handle = handleize(attributes.title);\n    }\n    attributes.active = attributes.active || false;\n    return attributes;\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName.startsWith(\"tab\")) {\n      this.addTabByAttribute(attributeName, newValue);\n      this.initTabs();\n    }\n  }\n\n  protected async afterBind(): Promise<any> {\n    // Workaround\n    setTimeout(() => {\n      if (this.scope.optionTabsAutoHeight) {\n        this.setHeight();\n      }\n    }, 500);\n    await super.afterBind();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    // Only set the component template if there no childs or the childs are templates\n    if (!hasChildNodesTrim(this) || this.hasOnlyTemplateChilds()) {\n      if (this.scope.optionTabsAngle === \"horizontal\") {\n        return templateHorizontal;\n      } else {\n        return templateVertical;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n","export default \"<img>\\n<tag\\n  rv-each-tag=\\\"tags\\\"\\n  rv-index=\\\"tag.index\\\"\\n  rv-style-left=\\\"tag.left\\\"\\n  rv-style-top=\\\"tag.top\\\"\\n  rv-shape=\\\"tag.shape\\\"\\n  rv-color=\\\"tag.color\\\"\\n  rv-style---tag-color=\\\"tag.color\\\"\\n  rv-style---tag-border-radius=\\\"tag.borderRadius\\\"\\n  rv-style---tag-full-size=\\\"tag.fullSize\\\"\\n  rv-style---tag-small-size=\\\"tag.smallSize\\\"\\n  rv-bs5-popover=\\\"fillPopoverOptions | call tag.popoverOptions\\\"\\n  rv-on-bound.bs.popover=\\\"onPopoverBound\\\"\\n  rv-on-shown.bs.popover=\\\"onPopoverShown\\\"\\n  rv-on-hidden.bs.popover=\\\"onPopoverHidden\\\"\\n  rv-tabindex=\\\"triggerOnFocus | call tag.popoverOptions\\\"\\n>\\n</tag>\\n\"","import { extend } from \"@ribajs/utils\";\n\nimport { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { PopoverOptions } from \"@ribajs/bs5\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { TaggedImageTag as Tag } from \"../../types/index.js\";\nimport template from \"./bs5-tagged-image.component.html?raw\";\nimport { debounce } from \"@ribajs/utils/src/control\";\n\ninterface Options {\n  popoverOptions: Partial<PopoverOptions>;\n  tagOptions: Partial<Tag>;\n  multiPopover?: boolean;\n}\n\ninterface Scope extends ScopeBase {\n  debug: boolean;\n  options: Options;\n  tags: Tag[];\n  fillPopoverOptions: (\n    options: Partial<PopoverOptions>\n  ) => Partial<PopoverOptions>;\n  triggerOnFocus: (options: Partial<PopoverOptions>) => any;\n  onPopoverBound: EventListener;\n  onPopoverShown: EventListener;\n  onPopoverHidden: EventListener;\n  onClick: EventListener;\n  updateTagPositions: EventListener;\n}\n\nexport class Bs5TaggedImageComponent extends Component {\n  /**\n   * ATTRIBUTES AND SCOPE\n   */\n  public static tagName = \"bs5-tagged-image\";\n\n  protected autobind = true;\n  public _debug = true;\n\n  static get observedAttributes(): string[] {\n    return [\"tags\", \"options\", \"debug\"];\n  }\n\n  image?: HTMLImageElement;\n\n  public scope: Scope = {\n    debug: false,\n    tags: [],\n    options: {\n      popoverOptions: {}, // set container = this in constructor\n      multiPopover: false,\n      tagOptions: {},\n    },\n    fillPopoverOptions: (options: Partial<PopoverOptions>) => {\n      return {\n        ...this.scope.options.popoverOptions,\n        ...this.scope.options.tagOptions.popoverOptions,\n        ...options,\n      };\n    },\n    triggerOnFocus: (options: Partial<PopoverOptions>) => {\n      return this.scope.fillPopoverOptions(options).trigger ? 0 : null;\n    },\n    onClick: this.onClick.bind(this),\n    onPopoverBound: this.onPopoverBound.bind(this),\n    onPopoverShown: this.onPopoverShown.bind(this),\n    onPopoverHidden: this.onPopoverHidden.bind(this),\n    updateTagPositions: debounce(this.updateTagPositions.bind(this)),\n  };\n\n  /**\n   * CONSTRUCTOR AND LIFECYCLE HANDLERS\n   */\n\n  constructor() {\n    super();\n    this.scope.options.popoverOptions.container = this;\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any\n  ) {\n    if (attributeName === \"options\") {\n      // before the component is bound, we just want to extend the default options\n      if (this.bound) {\n        this.scope.options = newValue;\n      } else {\n        this.scope.options = extend({ deep: true }, oldValue, newValue);\n      }\n      const po = this.scope.options.popoverOptions;\n      if (po && typeof po.container === \"string\") {\n        po.container = document.querySelector(po.container) || undefined;\n      }\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (hasChildNodesTrim(this)) {\n      this.parseChildTags();\n    }\n    return template;\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    // Template has been loaded. So the <img> tag should be there now.\n    this.image = this.querySelector(\"img\") as HTMLImageElement;\n    this.addEventListeners();\n    this.initTags();\n  }\n\n  protected addEventListeners() {\n    const img = this.image as HTMLImageElement;\n    img.addEventListener(\"load\", this.scope.updateTagPositions);\n    window.addEventListener(\"resize\", this.scope.updateTagPositions);\n    img.addEventListener(\"click\", this.scope.onClick);\n  }\n\n  protected async afterBind() {\n    this.passImageAttributes();\n    await super.afterBind();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5TaggedImageComponent.observedAttributes);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"click\", this.scope.onClick);\n    window.removeEventListener(\"resize\", this.updateTagPositions);\n  }\n\n  /**\n   * LIFECYCLE HELPERS\n   */\n\n  protected parseColor(color: string) {\n    // Is css variable\n    if (color.startsWith(\"--\")) {\n      return `var(${color})`;\n    }\n    // Is bootstrap color variable\n    if (color.startsWith(\"bs-\")) {\n      return `var(--${color})`;\n    }\n    return color;\n  }\n\n  protected parseChildTags() {\n    this.debug(`parseChildTags()`);\n    for (const tagEl of Array.from(\n      this.querySelectorAll(\"tag\") as NodeListOf<HTMLElement>\n    )) {\n      const title = tagEl.getAttribute(\"title\") || \"\";\n      const content = tagEl.innerHTML;\n\n      const x = ((v) => (isNaN(v) ? Math.random() : v))(\n        parseFloat(tagEl.getAttribute(\"x\") || \"\")\n      );\n      const y = ((v) => (isNaN(v) ? Math.random() : v))(\n        parseFloat(tagEl.getAttribute(\"y\") || \"\")\n      );\n\n      const shape = tagEl.getAttribute(\"shape\") || undefined;\n      let color = tagEl.getAttribute(\"color\") || undefined;\n      if (color) {\n        color = this.parseColor(color);\n      }\n      const borderRadius = tagEl.getAttribute(\"border-radius\") || undefined;\n      const fullSize = tagEl.getAttribute(\"full-size\") || undefined;\n      const smallSize = tagEl.getAttribute(\"small-size\") || undefined;\n      const tagData = {\n        ...this.scope.options.tagOptions,\n        popoverOptions: this.scope.fillPopoverOptions({\n          title,\n          content,\n          html: true,\n        }),\n        x,\n        y,\n        shape,\n        color,\n        borderRadius,\n        fullSize,\n        smallSize,\n      };\n      this.scope.tags.push(tagData);\n    }\n  }\n\n  protected initTags() {\n    const scopeTagOptions = this.scope.options.tagOptions;\n    for (const [index, tag] of this.scope.tags.entries()) {\n      tag.index = index;\n      tag.shape = tag.shape || scopeTagOptions.shape;\n      tag.borderRadius = tag.borderRadius || scopeTagOptions.borderRadius;\n      tag.smallSize = tag.smallSize || scopeTagOptions.smallSize;\n      tag.fullSize = tag.fullSize || scopeTagOptions.fullSize;\n      tag.color = tag.color || scopeTagOptions.color;\n    }\n  }\n\n  /**\n   * Pass all attributes starting with \"img-\" down to the <img> Tag, without the prefix.\n   */\n  protected passImageAttributes() {\n    const img = this.image as HTMLImageElement;\n    const attrs = this.attributes;\n    for (let i = attrs.length - 1; i >= 0; i--) {\n      if (attrs[i].name.startsWith(\"img-\")) {\n        img.setAttribute(attrs[i].name.substr(4), attrs[i].value);\n      }\n    }\n  }\n\n  /**\n   * EVENT LISTENERS\n   */\n  onClick(e: Event) {\n    if (this.scope.debug) {\n      // adapted from here: https://stackoverflow.com/a/42111623/7048200\n      // TODO: avoid using \"as any\"\n      const img = this.image as HTMLImageElement;\n      const {\n        clientTop,\n        clientLeft,\n        width,\n        height,\n        naturalWidth,\n        naturalHeight,\n      } = img;\n      const { clientX, clientY } = e as any;\n      let x = clientX - clientLeft;\n      let y = clientY - clientTop;\n      const wRatio = width / naturalWidth;\n      const hRatio = height / naturalHeight;\n      let actualWidth = width;\n      let actualHeight = height;\n      if (wRatio < hRatio) {\n        // left, right cut off\n        actualWidth = (width * hRatio) / wRatio;\n        x += (actualWidth - width) / 2;\n      } else if (hRatio < wRatio) {\n        // left, right cut off\n        actualHeight = (height * wRatio) / hRatio;\n        y += (actualHeight - height) / 2;\n      }\n      x *= 100 / actualWidth;\n      y *= 100 / actualHeight;\n      console.log({ x, y });\n    }\n  }\n  onPopoverBound(event: Event) {\n    /*\n     *  We get the anchor `el` for each tag here, after they have been bound in the rv-each,\n     *  so we can trigger events on them later.\n     */\n    const boundIndexAttr = (event.target as HTMLElement).getAttribute(\"index\");\n    if (boundIndexAttr === null) {\n      throw new Error(\"popup bound on no index\");\n    }\n    const boundIndex = parseInt(boundIndexAttr);\n    if (isNaN(boundIndex)) {\n      throw new Error(`boundIndex \"${boundIndexAttr}\" is not a number!`);\n    }\n    const foundTag = this.scope.tags.find((tag) => tag.index === boundIndex);\n    if (foundTag) {\n      foundTag.el = event.target as HTMLElement;\n    } else {\n      throw new Error(\n        `Tag with index (${boundIndex}, \"${boundIndexAttr}\") not found`\n      );\n    }\n  }\n  onPopoverShown(event: Event) {\n    for (const tag of this.scope.tags) {\n      if (tag.el === event.target) {\n        // Set shown popover's anchor as active.\n        tag.el.classList.add(\"active\");\n      } else {\n        // Hide all other popovers and remove active class from other tags if multiPopover option is false.\n        if (!this.scope.options.multiPopover) {\n          tag.el?.classList.remove(\"active\");\n          tag.el?.dispatchEvent(new CustomEvent(\"trigger-hide\"));\n        }\n      }\n    }\n  }\n  onPopoverHidden(event: Event) {\n    const found = this.scope.tags.find((tag) => tag.el === event.target);\n    if (found) {\n      found.el?.classList.remove(\"active\");\n    }\n  }\n\n  protected updateTagPositions() {\n    /*\n     * Currently working for object-fit: cover, contain or fill, and object-position: 50% 50% (default)\n     * TODO: make this work for all CSS values of \"object-position\" and \"object-fit\"!\n     */\n    const img = this.image as HTMLImageElement;\n    const { width, height, naturalWidth, naturalHeight } = img;\n    const wRatio = naturalWidth / width;\n    const hRatio = naturalHeight / height;\n    const fit = window.getComputedStyle(img).getPropertyValue(\"object-fit\");\n    if (\n      (fit === \"cover\" && wRatio > hRatio) ||\n      (fit === \"contain\" && hRatio > wRatio)\n    ) {\n      for (const tag of this.scope.tags) {\n        tag.top = tag.y * 100 + \"%\";\n        tag.left = ((wRatio / hRatio) * (tag.x - 0.5) + 0.5) * 100 + \"%\";\n      }\n    } else if (fit === \"cover\" || fit === \"contain\") {\n      for (const tag of this.scope.tags) {\n        tag.left = tag.x * 100 + \"%\";\n        tag.top = ((hRatio / wRatio) * (tag.y - 0.5) + 0.5) * 100 + \"%\";\n      }\n    } else {\n      for (const tag of this.scope.tags) {\n        tag.left = tag.x * 100 + \"%\";\n        tag.top = tag.y * 100 + \"%\";\n      }\n    }\n  }\n}\n","export default \"<select class=\\\"form-select form-select\\\" id=\\\"theme\\\" rv-if=\\\"mode | eq 'dropdown'\\\" rv-on-change=\\\"selectTheme\\\"\\n  rv-value=\\\"selected\\\" aria-label=\\\"Select a theme\\\">\\n  <option rv-each-choice=\\\"choices\\\" rv-value=\\\"choice\\\" rv-html=\\\"labels | get choice\\\"></option>\\n</select>\\n<button class=\\\"btn btn-icon\\\" rv-if=\\\"mode | eq 'icon'\\\" rv-on-click=\\\"toggleTheme\\\" aria-label=\\\"Toggle light/dark theme\\\">\\n  <bs5-icon class=\\\"d-td-none\\\" rv-co-src=\\\"lightIconSrc\\\" rv-co-size=\\\"iconSize\\\"></bs5-icon>\\n  <bs5-icon class=\\\"d-tl-none\\\" rv-co-src=\\\"darkIconSrc\\\" rv-co-size=\\\"iconSize\\\"></bs5-icon>\\n</button>\"","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { ThemeService } from \"../../services/theme.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils\";\nimport template from \"./bs5-theme-button.component.html?raw\";\nimport { themeChoices } from \"../../constants/index.js\";\n\nimport type {\n  Bs5ThemeButtonComponentScope,\n  ThemeChoice,\n  ThemeChangedData,\n  JsxBs5ThemeButtonProps,\n} from \"../../types/index.js\";\n\n/**\n * @see https://github.com/TypeStrong/typedoc/blob/master/src/lib/output/themes/default/assets/typedoc/Theme.ts\n */\nexport class Bs5ThemeButtonComponent extends Component {\n  public static tagName = \"bs5-theme-button\";\n\n  protected theme: ThemeService;\n\n  static get observedAttributes(): (keyof JsxBs5ThemeButtonProps)[] {\n    return [\"mode\", \"labels\", \"light-icon-src\", \"icon-size\", \"dark-icon-src\"];\n  }\n\n  public scope: Bs5ThemeButtonComponentScope = {\n    // Options // Attributes\n    mode: \"dropdown\",\n    labels: {\n      os: \"OS\",\n      light: \"Light\",\n      dark: \"Dark\",\n    },\n    lightIconSrc: \"/iconset/svg/icon_sun.svg\",\n    darkIconSrc: \"/iconset/svg/icon_moon.svg\",\n    iconSize: 32,\n    // Methods / Properties\n    setTheme: this.setTheme.bind(this),\n    selectTheme: this.selectTheme.bind(this),\n    toggleTheme: this.toggleTheme.bind(this),\n    selected: undefined,\n    choices: themeChoices,\n  };\n\n  constructor() {\n    super();\n    this.theme = ThemeService.getSingleton();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ThemeButtonComponent.observedAttributes);\n    this.addEventListeners();\n    this.initTheme();\n  }\n\n  protected addEventListeners() {\n    this.theme.onChange((data) => {\n      this.onChange(data);\n    });\n  }\n\n  protected onChange(data: ThemeChangedData) {\n    this.scope.selected = data.newValue.choice;\n  }\n\n  protected async beforeBind() {\n    this.initTheme();\n  }\n\n  initTheme() {\n    const selectEl = this.getElementsByTagName(\"select\")?.item(0);\n    const data = this.theme.init();\n    this.scope.selected = data.choice || undefined;\n    if (selectEl) this.theme.select(this.scope.selected, selectEl);\n  }\n\n  public setTheme(theme: ThemeChoice) {\n    this.theme.set(theme);\n  }\n\n  /**\n   * Used in `dropdown` mode (which uses a select element)\n   */\n  public selectTheme() {\n    if (this.scope.selected) this.theme.set(this.scope.selected);\n  }\n\n  /**\n   * Used in `icon` mode (which uses a button element)\n   */\n  public toggleTheme() {\n    const current = this.theme.getScheme();\n    if (current.bySystem) {\n      if (current.systemIsLight) {\n        this.theme.set(\"dark\");\n      } else {\n        this.theme.set(\"light\");\n      }\n    } else if (current.isDark) {\n      if (current.supported && current.systemIsLight) {\n        this.theme.set(\"os\");\n      } else {\n        this.theme.set(\"light\");\n      }\n    } else {\n      if (current.supported && current.systemIsDark) {\n        this.theme.set(\"os\");\n      } else {\n        this.theme.set(\"dark\");\n      }\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (!hasChildNodesTrim(this)) {\n      return template;\n    } else {\n      return null;\n    }\n  }\n}\n","export default \"<div class=\\\"toast my-1\\\" rv-add-class=\\\"toast.contextualClass | prepend 'toast-'\\\" role=\\\"alert\\\" aria-live=\\\"assertive\\\" aria-atomic=\\\"true\\\">\\n  <div class=\\\"toast-header\\\" rv-show=\\\"toast.title\\\">\\n    <bs5-icon rv-if=\\\"iconUrl\\\" rv-src=\\\"iconUrl\\\" size=\\\"16\\\" rv-color=\\\"toast.contextualClass\\\" class=\\\"me-2\\\" alt=\\\"toast icon\\\"></bs5-icon>\\n    <strong class=\\\"me-auto\\\" rv-template=\\\"toast.title\\\"></strong>\\n    <button type=\\\"button\\\" class=\\\"ms-2 mb-1 btn-close\\\" rv-on-click=\\\"dismiss\\\" aria-label=\\\"Close\\\"></button>\\n  </div>\\n  <div class=\\\"toast-body\\\" rv-template=\\\"toast.message\\\"></div>\\n</div>\"","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\n\nimport template from \"./bs5-toast-item.component.html?raw\";\nimport { Toast, ToastNotification } from \"../../services/index.js\";\nimport { Scope as Bs5NotificationContainerScope } from \"../bs5-notification-container/bs5-notification-container.component.js\";\nimport { getElementFromEvent } from \"@ribajs/utils/src/dom.js\";\n\ninterface Scope extends ScopeBase {\n  iconUrl?: string;\n  toast?: ToastNotification;\n  onHidden: Bs5ToastItemComponent[\"onHidden\"];\n  dismiss: Bs5ToastItemComponent[\"dismiss\"];\n  index: number;\n  $parent?: any;\n  $event?: CustomEvent;\n}\n\n/**\n * Use this component to show a toast inside a bs5-notification-container\n */\nexport class Bs5ToastItemComponent extends Component {\n  public static tagName = \"bs5-toast-item\";\n\n  public _debug = false;\n  protected autobind = true;\n\n  protected toastService?: Toast;\n\n  static get observedAttributes(): string[] {\n    return [\"toast\", \"icon-url\", \"index\"];\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"toast\"];\n  }\n\n  public scope: Scope = {\n    onHidden: this.onHidden.bind(this),\n    index: -1,\n    dismiss: this.dismiss.bind(this),\n    toast: undefined,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ToastItemComponent.observedAttributes);\n  }\n\n  protected async afterBind() {\n    this.initToast();\n    await super.afterBind();\n  }\n\n  protected initToast() {\n    const toast = this.scope.toast;\n    const toastEl = this.firstElementChild as HTMLElement | null;\n    if (toast && toastEl) {\n      this.toastService = new Toast(toastEl, {\n        delay: toast.delay !== undefined ? toast.delay : 5000,\n        autohide: toast.autoHide !== undefined ? toast.autoHide : true,\n        animation: toast.animation !== undefined ? toast.animation : true,\n      });\n\n      // Call onHidden on hidden event once\n      toastEl.addEventListener(Toast.EVENT_HIDDEN, this.scope.onHidden, {\n        once: true,\n      });\n\n      // show toast using the `ToastService`\n      this.toastService.show();\n    }\n  }\n\n  // can be called if toast should be removed\n  public dismiss() {\n    this.toastService?.hide();\n  }\n\n  // remove toast from dom once shown\n  public onHidden(event: Event, el?: HTMLElement) {\n    if (!el) {\n      el = getElementFromEvent(event);\n    }\n    const toastContainer: Bs5NotificationContainerScope | null =\n      this.scope.$parent?.$parent || null;\n    if (\n      typeof toastContainer?.onItemHide === \"function\" &&\n      this.scope.toast &&\n      el\n    ) {\n      toastContainer.onItemHide(event, el, this.scope.index, this.scope.toast);\n    }\n  }\n  protected template(): ReturnType<TemplateFunction> {\n    return template;\n  }\n}\n","/**\n * This components is used to trigger a toggle event used in other components or parts of your project. This site itself uses the bs5-toggle-button to open or close the sidebar.\n * @attribute \"target-id\" (Required) The id with which the toggle event is triggered\n * @method toggle\t Triggeres the toggle event\n * @property state Can be 'hidden' or something else\n * @property isClosed Is true if the state is 'hidden'\n * @property targetId Passed attribute value, see `target-id` attribute\n */\n\nimport { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { JsxBs5ToggleButtonProps } from \"../../types/index.js\";\nimport { TOGGLE_BUTTON } from \"../../constants/index.js\";\n\ntype State =\n  | \"undefined\"\n  | \"overlay-left\"\n  | \"overlay-right\"\n  | \"side-left\"\n  | \"side-right\"\n  | \"hidden\"\n  | \"added\"\n  | \"removed\";\n\ninterface Scope extends ScopeBase {\n  targetId?: string;\n  toggle: Bs5ToggleButtonComponent[\"toggle\"];\n  state: State;\n  isActive: boolean;\n  /** @deprecated use !isActive instead */\n  isClosed: boolean;\n}\n\n// TODO extend from Bs5ButtonComponent\nexport class Bs5ToggleButtonComponent extends Component {\n  static get observedAttributes(): (keyof JsxBs5ToggleButtonProps)[] {\n    return [\"target-id\"];\n  }\n\n  protected requiredAttributes(): (keyof JsxBs5ToggleButtonProps)[] {\n    return [\"target-id\"];\n  }\n\n  public static tagName = \"bs5-toggle-button\";\n\n  protected autobind = true;\n\n  public _debug = false;\n\n  protected eventDispatcher?: EventDispatcher;\n\n  protected lifecycleEvents = EventDispatcher.getInstance(\"lifecycle\");\n\n  public scope: Scope = {\n    targetId: undefined,\n    toggle: this.toggle,\n    state: \"undefined\",\n    isActive: true,\n    isClosed: false,\n  };\n\n  constructor() {\n    super();\n    this.lifecycleEvents.once(\n      \"ComponentLifecycle:allBound\",\n      this.onAllComponentsReady,\n      this\n    );\n  }\n\n  public toggle() {\n    this.debug(\"toggle\", this.eventDispatcher);\n    if (this.eventDispatcher) {\n      this.eventDispatcher.trigger(\n        TOGGLE_BUTTON.eventNames.toggle,\n        this.scope.targetId\n      );\n    }\n  }\n\n  protected onAllComponentsReady() {\n    this.debug(\"onAllComponentsReady\");\n    // Trigger init to trigger there current state of all the components that are connected to this component\n    this.eventDispatcher?.trigger(\n      TOGGLE_BUTTON.eventNames.init,\n      this.scope.targetId\n    );\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ToggleButtonComponent.observedAttributes);\n  }\n\n  protected onToggledEvent(state: State) {\n    this.scope.state = state;\n    this.scope.isActive = state !== \"hidden\" && state !== \"removed\";\n    this.scope.isClosed = !this.scope.isActive;\n  }\n\n  protected initEventDispatcher(id: string) {\n    if (this.eventDispatcher) {\n      this.eventDispatcher.off(\n        TOGGLE_BUTTON.eventNames.toggled,\n        this.onToggledEvent,\n        this\n      );\n    }\n    const namespace = TOGGLE_BUTTON.nsPrefix + id;\n    this.debug(`Init event dispatcher for namespace  ${namespace}`);\n    this.eventDispatcher = new EventDispatcher(namespace);\n    this.eventDispatcher.on(\n      TOGGLE_BUTTON.eventNames.toggled,\n      this.onToggledEvent,\n      this\n    );\n    // Triggered state triggered by `..trigger('init', ...`\n    this.eventDispatcher.on(\n      TOGGLE_BUTTON.eventNames.state,\n      this.onToggledEvent,\n      this\n    );\n  }\n\n  protected async attributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.attributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName === \"targetId\" && newValue) {\n      this.initEventDispatcher(newValue);\n    }\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this.eventDispatcher) {\n      this.eventDispatcher.off(\n        TOGGLE_BUTTON.eventNames.toggled,\n        this.onToggledEvent,\n        this\n      );\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (!hasChildNodesTrim(this)) {\n      console.warn(\n        \"No child elements found, this component as no template so you need to define your own as child of this component.\"\n      );\n    }\n    return null;\n  }\n}\n","import { RibaModule } from \"@ribajs/core\";\nimport { extend } from \"@ribajs/utils/src/type.js\";\nimport { Bs5ModuleOptions } from \"./types/index.js\";\n\nimport * as binders from \"./binders/index.js\";\nimport * as components from \"./components/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as constants from \"./constants/index.js\";\n\nexport const bs5Module: RibaModule<Partial<Bs5ModuleOptions>> = {\n  binders,\n  services,\n  formatters,\n  components,\n  constants,\n  init(partialOptions = {}) {\n    const options = extend(\n      { deep: true, keepValues: true },\n      partialOptions,\n      constants.DEFAULT_MODULE_OPTIONS\n    ) as Bs5ModuleOptions;\n    services.Bs5Service.setSingleton(options);\n    return this;\n  },\n};\n","/**\n * Fuse.js v6.6.2 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2022 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      totalWeight += obj.weight;\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, includeMatches } = this.options;\n\n    if (!isCaseSensitive) {\n      text = text.toLowerCase();\n    }\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// ❗Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '6.6.2';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","import Fuse from \"fuse.js\";\nimport { Component, TemplateFunction } from \"@ribajs/core\";\nimport {\n  FuseSearchComponentScope,\n  JsxFuseSearchProps,\n} from \"../../types/index.js\";\n\nexport class FuseSearchComponent<T = any> extends Component {\n  public static tagName = \"fuse-search\";\n\n  public fuse?: Fuse<any>;\n\n  static get observedAttributes(): (keyof JsxFuseSearchProps)[] {\n    return [\"items\", \"options\", \"limit\", \"search-pattern\"];\n  }\n\n  requiredAttributes(): (keyof JsxFuseSearchProps)[] {\n    return [\"items\"];\n  }\n\n  public scope: FuseSearchComponentScope<T> = {\n    items: [],\n    searchPattern: \"\",\n    options: {},\n    limit: -1,\n    results: [],\n    search: this.search,\n  };\n\n  constructor() {\n    super();\n  }\n\n  public search() {\n    if (!this.fuse) {\n      console.warn(\"fuse is not ready! Did you forget to call initFuse?\");\n      return [];\n    }\n    this.scope.results = this.fuse?.search<T>(this.scope.searchPattern) || [];\n    console.debug(\"on search\", this.scope.searchPattern, this.scope.results);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(FuseSearchComponent.observedAttributes);\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n\n    if (attributeName === \"items\") {\n      console.debug(\"parsedAttributeChangedCallback items\", newValue);\n      this.initFuse();\n    }\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    this.initFuse();\n  }\n\n  protected getAllFuseKeys(items?: any) {\n    let testItem: any;\n    if (Array.isArray(items) && items.length > 0) {\n      testItem = items[0];\n    } else {\n      testItem = items;\n    }\n    if (!testItem) {\n      return [];\n    }\n    const keys: string[] = [];\n    for (const key of Object.keys(testItem)) {\n      if (\n        testItem[key] &&\n        (typeof testItem[key] === \"object\" || Array.isArray(testItem[key]))\n      ) {\n        const childKeys = this.getAllFuseKeys(testItem[key]);\n        for (const childKey of childKeys) {\n          keys.push(`${key}.${childKey}`);\n        }\n      } else {\n        keys.push(key);\n      }\n    }\n    return keys;\n  }\n\n  protected initFuse() {\n    if (!this.scope.items?.length) {\n      return;\n    }\n    if (!this.scope.options.keys?.length) {\n      this.scope.options.keys = this.getAllFuseKeys(this.scope.items);\n    }\n    this.fuse = new Fuse(this.scope.items, this.scope.options);\n    console.debug(\"initFuse\", this.scope.items, this.scope.options, this.fuse);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { RibaModule } from \"@ribajs/core\";\nimport * as binders from \"./binders/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as components from \"./components/index.js\";\nimport { FuseModuleOptions } from \"./types/index.js\";\n\nexport const fuseModule: RibaModule<FuseModuleOptions> = {\n  binders,\n  services,\n  formatters,\n  components,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  init(options = {}) {\n    return this;\n  },\n};\n","import { TypedocModuleOptions } from \"../types/index.js\";\n\nexport class TypedocService {\n  protected static _options: TypedocModuleOptions = {};\n  public static instance?: TypedocService;\n\n  public static get options() {\n    return this._options;\n  }\n\n  protected constructor() {\n    /**/\n  }\n\n  public static getSingleton() {\n    if (this.instance) {\n      return this.instance;\n    }\n\n    throw new Error(\n      `Singleton of TypedocService not defined, please call setSingleton first!`\n    );\n  }\n\n  public static setSingleton(options: TypedocModuleOptions = {}) {\n    if (this.instance) {\n      throw new Error(`Singleton of TypedocService already defined!`);\n    }\n\n    if (!options.serverBaseUrl) {\n      options.serverBaseUrl = window.remoteSearchOptions?.serverBaseUrl;\n    }\n\n    this._options = options;\n    this.instance = new this();\n    return this.instance;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\n\nimport type { MemberSignaturesComponentScope } from \"../../types/index.js\";\n\nexport class MemberSignaturesComponent extends Component {\n  public static tagName = \"tsd-member-signatures\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  public scope: MemberSignaturesComponentScope = {\n    signatureEls: [],\n    descriptionEls: [],\n    showDescByIndex: this.showDescByIndex,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(MemberSignaturesComponent.observedAttributes);\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    this.initMemberSignatures();\n  }\n\n  public showDescByIndex(index: number) {\n    for (const [i, signatureEl] of this.scope.signatureEls.entries()) {\n      if (i === index) {\n        signatureEl.classList.add(\"current\");\n      } else {\n        signatureEl.classList.remove(\"current\");\n      }\n    }\n\n    for (const [i, descriptionEl] of this.scope.descriptionEls.entries()) {\n      if (i === index) {\n        descriptionEl.classList.add(\"current\");\n      } else {\n        descriptionEl.classList.remove(\"current\");\n      }\n    }\n  }\n\n  initMemberSignatures() {\n    this.scope.signaturesEl?.classList.add(\"active\");\n    this.scope.descriptionsEl?.classList.add(\"active\");\n\n    this.scope.signatureEls = Array.from(\n      this.querySelectorAll<HTMLLIElement>(\n        \"tsd-member-signatures > .tsd-signatures > .tsd-signature\"\n      ) || []\n    );\n    this.scope.descriptionEls = Array.from(\n      this.querySelectorAll<HTMLLIElement>(\n        \"tsd-member-signatures > .tsd-descriptions > .tsd-description\"\n      ) || []\n    );\n\n    this.showDescByIndex(0);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { Pjax } from \"@ribajs/router\";\nimport { hasChildNodesTrim, debounce, normalizeUrl } from \"@ribajs/utils\";\nimport { NavbarComponent } from \"../navbar/navbar.component.js\";\n\nimport type {\n  SearchComponentScope,\n  SearchResult,\n  SearchOptions,\n} from \"../../types/index.js\";\n\ndeclare global {\n  interface Window {\n    remoteSearchOptions?: Partial<SearchOptions>;\n  }\n}\n\nexport class SearchComponent extends Component {\n  public static tagName = \"tsd-search\";\n\n  static get observedAttributes() {\n    return [\"server-base-url\"];\n  }\n\n  public scope: SearchComponentScope = {\n    serverBaseUrl: location.href,\n    isLoading: false,\n    isReady: false,\n    hasFailure: false,\n    results: [],\n    query: \"\",\n    preventPress: false,\n    setFocus: this.setFocus,\n    onBlur: this.onBlur,\n    onFocus: this.onFocus,\n    onInput: this.onInput,\n    onKeydown: this.onKeydown,\n    onKeypress: this.onKeypress,\n    onSearchResultHover: this.onSearchResultHover,\n    onSearchResultClick: this.onSearchResultClick,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(SearchComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.initSettings();\n    this.initSearch();\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    this.scope.navbarEl =\n      (\n        document.getElementsByTagName(\n          NavbarComponent.tagName\n        ) as HTMLCollectionOf<NavbarComponent>\n      ).item(0) || undefined;\n  }\n\n  initSettings() {\n    if (\n      this.scope.serverBaseUrl === location.href &&\n      window.remoteSearchOptions?.serverBaseUrl\n    ) {\n      this.scope.serverBaseUrl = window.remoteSearchOptions.serverBaseUrl;\n    }\n  }\n\n  initSearch() {\n    this.initSearchHotkey();\n  }\n\n  public setFocus() {\n    this.scope.fieldEl?.focus();\n  }\n\n  public hasFocus() {\n    return this.scope.fieldEl?.matches(\":focus\");\n  }\n\n  protected onFocus() {\n    this.classList.add(\"has-focus\");\n    this.dispatchEvent(new Event(\"focus\"));\n  }\n\n  protected onBlur() {\n    this.classList.remove(\"has-focus\");\n    this.dispatchEvent(new Event(\"blur\"));\n  }\n\n  protected onInput() {\n    this.updateResults();\n  }\n\n  protected onKeydown(\n    e: KeyboardEvent,\n    scope: SearchComponentScope,\n    field: HTMLInputElement\n  ) {\n    this.scope.preventPress = true;\n\n    if (e.key == \"Enter\") {\n      this.gotoCurrentResult();\n    } else if (e.key == \"Escape\") {\n      field.blur();\n    } else if (e.key == \"ArrowUp\") {\n      this.setCurrentResult(-1);\n    } else if (e.key === \"ArrowDown\") {\n      this.setCurrentResult(1);\n    } else {\n      this.scope.preventPress = false;\n    }\n  }\n\n  public onKeypress(e: KeyboardEvent) {\n    if (this.scope.preventPress) {\n      e.preventDefault();\n    }\n  }\n\n  public onSearchResultHover(\n    e: MouseEvent,\n    scope: SearchComponentScope,\n    newActive: HTMLLIElement\n  ) {\n    const oldActive = this.getActiveSearchResult();\n    oldActive?.classList.remove(\"active\");\n    newActive.classList.add(\"active\");\n  }\n\n  // Workaround\n  public onSearchResultClick(\n    e: MouseEvent | TouchEvent,\n    scope: SearchComponentScope,\n    el: HTMLAnchorElement\n  ) {\n    // Ignore right click\n    if (e.type === \"mousedown\" && (e as MouseEvent).button !== 0) {\n      return;\n    }\n    const anchor = el.firstChild as HTMLAnchorElement | null;\n    if (anchor?.href) {\n      this.goTo(anchor.href);\n    }\n  }\n\n  initSearchHotkey() {\n    /**\n     * Start searching by pressing slash.\n     */\n    document.body.addEventListener(\"keydown\", (e) => {\n      if (e.altKey || e.ctrlKey || e.metaKey) return;\n      if (!this.hasFocus() && e.key === \"/\") {\n        this.setFocus();\n        e.preventDefault();\n      }\n    });\n  }\n\n  protected async _updateResults() {\n    this.scope.results = [];\n\n    const searchText = this.scope.query.trim();\n    if (searchText.length < 2) {\n      return;\n    }\n\n    this.scope.isLoading = true;\n    this.scope.isReady = false;\n\n    const url = new URL(this.scope.serverBaseUrl);\n    const separator = url.pathname.endsWith(\"/\") ? \"\" : \"/\";\n\n    // Perform a wildcard search\n    url.pathname += `${separator}search/*${searchText}*`;\n    const results: SearchResult[] = [];\n\n    try {\n      const response = await fetch(url.toString());\n      results.push(...(await response.json()));\n    } catch (error) {\n      console.error(error);\n      this.scope.isLoading = false;\n      this.scope.hasFailure = true;\n    }\n\n    this.validateResult(results);\n    this.transformResult(results);\n\n    this.scope.results = results;\n    this.scope.isLoading = false;\n    this.scope.isReady = !this.scope.isLoading && !this.scope.hasFailure;\n  }\n\n  public updateResults = debounce(async () => {\n    await this._updateResults();\n  }, 500);\n\n  protected validateResult(results: SearchResult[]) {\n    for (const result of results) {\n      if (typeof result.classes !== \"string\")\n        throw new Error(\"Property classes must be of type string!\");\n      if (typeof result.name !== \"string\")\n        throw new Error(\"Property name must be of type string!\");\n      if (typeof result.url !== \"string\")\n        throw new Error(\"Property url must be of type string!\");\n    }\n  }\n\n  protected transformResult(results: SearchResult[]) {\n    const separator = this.scope.serverBaseUrl.endsWith(\"/\") ? \"\" : \"/\";\n    for (const result of results) {\n      if (!result.url.startsWith(\"http\")) {\n        result.url = this.scope.serverBaseUrl + separator + result.url;\n      }\n      result.url = normalizeUrl(result.url).url;\n    }\n  }\n\n  getActiveSearchResult(dir = 1, fallbackByDir = false) {\n    let active = this.scope.resultsEl?.querySelector(\".active:not(.disabled)\");\n    if (fallbackByDir && !active) {\n      active = this.scope.resultsEl?.querySelector(\n        dir == 1 ? \"li:first-child\" : \"li:last-child\"\n      );\n      if (active) {\n        active.classList.add(\"active\");\n      }\n    }\n    return active || null;\n  }\n\n  /**\n   * Move the highlight within the result set.\n   */\n  setCurrentResult(dir: number) {\n    const active = this.getActiveSearchResult(dir, true);\n    if (active) {\n      let rel: Element | undefined = active;\n      // Tricky: We have to check that rel has an offsetParent so that users can't mark a hidden result as\n      // active with the arrow keys.\n      if (dir === 1) {\n        do {\n          rel = rel.nextElementSibling || undefined;\n        } while (rel instanceof HTMLElement && rel.offsetParent == null);\n      } else {\n        do {\n          rel = rel.previousElementSibling || undefined;\n        } while (rel instanceof HTMLElement && rel.offsetParent == null);\n      }\n\n      // Restart on last or first element\n      if (!rel) {\n        if (dir === -1 && !active.previousElementSibling) {\n          // If active element is the first, restart on the end\n          rel =\n            this.scope.resultsEl?.querySelector(\"li:last-child\") || undefined;\n        } else if (dir === 1 && !active.nextElementSibling) {\n          // If active element is the first, restart on the last\n          rel =\n            this.scope.resultsEl?.querySelector(\"li:first-child\") || undefined;\n        }\n      }\n\n      if (rel) {\n        active.classList.remove(\"active\");\n        rel.classList.add(\"active\");\n      }\n    }\n  }\n\n  /**\n   * Navigate to the highlighted result.\n   */\n  gotoCurrentResult() {\n    let active = this.scope.resultsEl?.querySelector(\".active:not(.disabled)\");\n\n    if (!active) {\n      active = this.scope.resultsEl?.querySelector(\n        \"li:not(.disabled):first-child\"\n      );\n    }\n\n    if (active) {\n      const link = active.querySelector(\"a\");\n      if (link?.href) {\n        this.goTo(link.href);\n      }\n      this.scope.fieldEl?.blur();\n    }\n  }\n\n  protected goTo(href: string) {\n    const pjax = Pjax.getInstance(\"main\");\n    if (!pjax) {\n      window.location.href = href;\n    } else {\n      pjax.goTo(href, false);\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (!hasChildNodesTrim(this)) {\n      return (\n        <div class=\"hello\">\n          <div class=\"search-group flex-nowrap d-flex\">\n            <button\n              class=\"btn btn-icon ps-4\"\n              id=\"tsd-search-field-addon\"\n              rv-on-click=\"setFocus\"\n            >\n              <bs5-icon\n                src=\"/assets/iconset/svg/icon_search2.svg\"\n                size={16}\n                direction=\"left\"\n              ></bs5-icon>\n            </button>\n            <input\n              class=\"form-control rounded-pill\"\n              id=\"tsd-search-field\"\n              type=\"search\"\n              aria-label=\"Search\"\n              aria-describedby=\"tsd-search-field-addon\"\n              autocomplete=\"off\"\n              spellcheck={false}\n              rv-element=\"fieldEl\"\n              rv-value=\"query\"\n              rv-on-input=\"onInput\"\n              rv-on-focus=\"onFocus\"\n              rv-on-blur=\"onBlur\"\n              rv-on-keydown=\"onKeydown\"\n              rv-on-keypress=\"onKeypress\"\n            />\n          </div>\n          <ul\n            class=\"list-group results card px-0 border-top-0\"\n            rv-if=\"isReady\"\n            rv-element=\"resultsEl\"\n          >\n            <li\n              class=\"list-group-item\"\n              rv-show=\"results | size | gt 0\"\n              rv-each-item=\"results\"\n              rv-add-class=\"item.classes\"\n              rv-on-mouseover=\"onSearchResultHover\"\n              rv-on-mousedown=\"onSearchResultClick\"\n              rv-on-ontouchend=\"onSearchResultClick\"\n            >\n              <a\n                class=\"tsd-kind-icon\"\n                rv-href=\"item.url\"\n                rv-html=\"item.name\"\n              ></a>\n            </li>\n            <li class=\"list-group-item disabled\" rv-if=\"results | size | eq 0\">\n              No results...\n            </li>\n          </ul>\n          <ul\n            class=\"list-group results card px-0 border-top-0\"\n            rv-unless=\"isReady\"\n          >\n            <li\n              class=\"list-group-item disabled\"\n              rv-show=\"isLoading\"\n              aria-disabled=\"true\"\n            >\n              Preparing remote search server...\n            </li>\n            <li\n              class=\"list-group-item disabled\"\n              rv-show=\"hasFailure\"\n              aria-disabled=\"true\"\n            >\n              The remote search server is not available\n            </li>\n          </ul>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\n\nimport type { NavbarComponentScope } from \"../../types/index.js\";\nimport type { Bs5SidebarComponent } from \"@ribajs/bs5\";\nimport { SearchComponent } from \"../search/search.component.js\";\n\nexport class NavbarComponent extends Component {\n  public static tagName = \"tsd-navbar\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  public scope: NavbarComponentScope = {\n    searchHasFocus: false,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(NavbarComponent.observedAttributes);\n  }\n\n  protected async afterAllBind() {\n    const sidebarEls = document.getElementsByTagName(\n      \"bs5-sidebar\"\n    ) as HTMLCollectionOf<Bs5SidebarComponent>;\n    const sidebar = sidebarEls.item(0);\n    if (sidebar) {\n      sidebar.style.marginTop = this.offsetHeight + \"px\";\n      sidebar.style.maxHeight = `calc(100vh - ${this.offsetHeight}px)`;\n    }\n\n    this.scope.searchEl =\n      (this.getElementsByTagName(SearchComponent.tagName)?.item(\n        0\n      ) as SearchComponent | null) || undefined;\n\n    this.scope.searchEl?.addEventListener(\"focus\", () => {\n      this.onSearchFocus();\n    });\n\n    this.scope.searchEl?.addEventListener(\"blur\", () => {\n      this.onSearchBlur();\n    });\n  }\n\n  public onSearchFocus() {\n    console.debug(\"onSearchFocus\");\n    this.classList.add(\"search-has-focus\");\n    this.scope.searchHasFocus = true;\n  }\n\n  public onSearchBlur() {\n    this.classList.remove(\"search-has-focus\");\n    this.scope.searchHasFocus = false;\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { hasChildNodesTrim } from \"@ribajs/utils\";\nimport { EventDispatcher } from \"@ribajs/events\";\n\nimport type { NavigationSecondaryComponentScope } from \"../../types/index.js\";\n\nexport class NavigationComponent extends Component {\n  public static tagName = \"tsd-navigation-secondary\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: NavigationSecondaryComponentScope = {};\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(NavigationComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.addEventListeners();\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"transitionCompleted\", this.onNewPage, this);\n  }\n\n  protected onNewPage() {\n    const templateEl = document.getElementById(\n      \"tsd-navigation-secondary-template\"\n    ) as HTMLTemplateElement | null;\n    if (!templateEl) {\n      console.warn(\"[NavigationComponent] No template found!\");\n      return;\n    }\n    this.scope.template = templateEl.innerHTML;\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (hasChildNodesTrim(this)) {\n      this.scope.template = this.innerHTML;\n    }\n    return <div rv-template=\"template\"></div>;\n  }\n}\n","export default \"<a rv-href=\\\"mod.href\\\" rv-text=\\\"mod.parent.name\\\"></a>\\n<ul rv-each-mod=\\\"mod.children\\\">\\n  <li rv-add-class=\\\"mod.classNames\\\" rv-route-class-active=\\\"mod.href\\\" rv-route-class-parent-active=\\\"mod.parent.href\\\" rv-template=\\\"childTemplateList\\\"></li>\\n</ul>\"","export default \"<a rv-href=\\\"mod.href\\\" rv-text=\\\"mod.parent.name\\\"></a>\\n<ul rv-each-mod=\\\"mod.children\\\">\\n  <li class=\\\"dropdown-item cursor-pointer\\\" rv-add-class=\\\"mod.classNames\\\" rv-route-class-active=\\\"mod.href\\\" rv-route-class-parent-active=\\\"mod.parent.href\\\" rv-template=\\\"childTemplateDropdown\\\"></li>\\n</ul>\\n\"","import { Component, HttpService, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Dropdown } from \"@ribajs/bs5\";\nimport { Pjax } from \"@ribajs/router\";\nimport type {} from \"@ribajs/fuse\";\nimport childTemplateList from \"./child-template-list.html?raw\";\nimport childTemplateDropdown from \"./child-template-dropdown.html?raw\";\n\nimport type {\n  NavigationPrimaryComponentScope,\n  NavigationFlat,\n  JsxTsdNavigationPrimaryProps,\n  Dataset,\n} from \"../../types/index.js\";\n\nexport class NavigationPrimaryComponent extends Component {\n  public static tagName = \"tsd-navigation-primary\";\n\n  static get observedAttributes(): (keyof JsxTsdNavigationPrimaryProps)[] {\n    return [\"type\"];\n  }\n\n  protected requiredAttributes(): (keyof JsxTsdNavigationPrimaryProps)[] {\n    return [\"type\"];\n  }\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: NavigationPrimaryComponentScope = {\n    childTemplateList,\n    childTemplateDropdown,\n    type: \"list\",\n    selectedModule: \"Modules\",\n    onModuleSelect: this.onModuleSelect,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(NavigationPrimaryComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.addEventListeners();\n    await this.fetchData();\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    if (this.scope.$root?.dataset) {\n      this.setSelectedModule(this.scope.$root?.dataset);\n    }\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"newPageReady\", this.onNewPage, this);\n  }\n\n  protected async onNewPage() {\n    if (this.scope.$root?.dataset) {\n      this.setSelectedModule(this.scope.$root?.dataset);\n    }\n  }\n\n  public onModuleSelect(mod: NavigationFlat) {\n    console.debug(\"onModuleSelect\");\n    this.scope.selectedModule = mod.parent?.name || mod.name;\n    const pjax = Pjax.getInstance(\"main\");\n    if (!pjax || !mod.href) {\n      console.warn(\"No module with href or no pjax instance found!\");\n      return;\n    }\n    Dropdown.hideAll();\n    pjax.goTo(mod.href);\n  }\n\n  protected setSelectedModule(dataset: Dataset) {\n    let selectedModule =\n      this.scope.$root?.dataset?.module?.parent?.name ||\n      this.scope.$root?.dataset?.module?.name ||\n      \"Modules\";\n    if (selectedModule === dataset.projectName) {\n      selectedModule = this.scope.$root?.dataset?.module?.name || \"Modules\";\n    }\n    this.scope.selectedModule = selectedModule;\n  }\n\n  protected async fetchData() {\n    const data = await HttpService.getJSON<NavigationFlat>(\n      \"/assets/primary-navigation.json\"\n    );\n    this.scope.primaryNav = data.body;\n    console.debug(\"NavigationPrimaryComponent\", this.scope.primaryNav);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (this.scope.type === \"list\") {\n      return (\n        <nav class=\"tsd-navigation primary\" rv-if=\"data.extern.length | empty\">\n          <ul>\n            <li\n              rv-each-mod=\"primaryNav\"\n              rv-add-class=\"mod.classNames\"\n              rv-route-class-active=\"mod.href\"\n              rv-route-class-parent-active=\"mod.parent.href\"\n              rv-template=\"childTemplateList\"\n            ></li>\n          </ul>\n        </nav>\n      );\n    } else {\n      return (\n        <div class=\"dropdown\">\n          <button\n            rv-bs5-dropdown=\"\"\n            class=\"btn btn-outline-primary dropdown-toggle d-flex justify-content-between align-items-center\"\n            id=\"dropdownMenuModules\"\n            aria-haspopup=\"true\"\n            aria-expanded=\"false\"\n          >\n            <span rv-text=\"selectedModule\">Modules</span>{\" \"}\n            <bs5-icon\n              src=\"/assets/iconset/svg/arrow_carrot_thin.svg\"\n              size={16}\n              direction=\"down\"\n            ></bs5-icon>\n          </button>\n          <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuModules\">\n            <fuse-search\n              rv-parent\n              rv-co-items=\"primaryNav\"\n              options=\"{'keys': ['name', 'parent.name']}\"\n            >\n              <div class=\"mx-2 mb-2\">\n                <input\n                  type=\"search\"\n                  class=\"form-control\"\n                  placeholder=\"Filter...\"\n                  aria-label=\"Filter\"\n                  rv-value=\"searchPattern\"\n                  rv-on-input=\"search\"\n                  rv-on-cut=\"search\"\n                  rv-on-paste=\"search\"\n                />\n              </div>\n              <div class=\"scrollbar-y-scroll scrollbar-primary\">\n                <div class=\"dropdown-header\">Modules</div>\n                <div rv-show=\"searchPattern | size\" rv-each-result=\"results\">\n                  <div\n                    class=\"dropdown-item cursor-pointer\"\n                    rv-add-class=\"result.item.classNames\"\n                    rv-route-class-active=\"result.item.href\"\n                    rv-route-class-parent-active=\"result.item.parent.href\"\n                    rv-on-click=\"$parent.$parent.onModuleSelect | args result.item\"\n                  >\n                    <a\n                      rv-href=\"result.item.href\"\n                      rv-text=\"result.item.parent.name\"\n                    ></a>\n                  </div>\n                </div>\n                <div\n                  rv-if=\"results | size | eq 0\"\n                  rv-show=\"searchPattern | size\"\n                >\n                  <div class=\"dropdown-item\">No result</div>\n                </div>\n                <div rv-hide=\"searchPattern | size\" rv-each-item=\"items\">\n                  <div\n                    class=\"dropdown-item cursor-pointer\"\n                    rv-add-class=\"item.classNames\"\n                    rv-route-class-active=\"item.href\"\n                    rv-route-class-parent-active=\"item.parent.href\"\n                    rv-on-click=\"$parent.$parent.onModuleSelect | args item\"\n                  >\n                    <a rv-href=\"item.href\" rv-text=\"item.parent.name\"></a>\n                  </div>\n                </div>\n              </div>\n            </fuse-search>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n","import type { RibaModule } from \"@ribajs/core\";\nimport * as binders from \"./binders/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as components from \"./components/index.js\";\nimport { TypedocModuleOptions } from \"./types/index.js\";\n\nexport const typedocModule: RibaModule<TypedocModuleOptions> = {\n  binders,\n  services,\n  formatters,\n  components,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  init(options = {}) {\n    services.TypedocService.setSingleton(options);\n    return this;\n  },\n};\n","import { Component, TemplateFunction } from \"@ribajs/core\";\n\nimport type { FooterComponentScope } from \"../../types\";\n\nexport class FooterComponent extends Component {\n  public static tagName = \"tsd-footer\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  public scope: FooterComponentScope = {};\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(FooterComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.initFooter();\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n  }\n\n  initFooter() {\n    //\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\n\nimport type { HeaderComponentScope } from \"../../types\";\n\nexport class HeaderComponent extends Component {\n  public static tagName = \"tsd-header\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  public scope: HeaderComponentScope = {};\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(HeaderComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.initHeader();\n  }\n\n  initHeader() {\n    //\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { RibaModule } from \"@ribajs/core\";\nimport * as binders from \"./binders/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as components from \"./components/index.js\";\nimport { GjsifyTypedocModuleOptions } from \"./types/index.js\";\n\nexport const gjsifyTypedocModule: RibaModule<GjsifyTypedocModuleOptions> = {\n  binders,\n  services,\n  formatters,\n  components,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  init(options = {}) {\n    return this;\n  }\n};\n","import type { IComponentOptions } from \"./Component\";\n\n/**\n * Component definition.\n */\nexport interface IComponent {\n  constructor: new (options: IComponentOptions) => unknown;\n  selector: string;\n}\n\n/**\n * List of all known components.\n */\nconst components: IComponent[] = [];\n\n/**\n * Register a new component.\n */\nexport function registerComponent(\n  constructor: IComponent[\"constructor\"],\n  selector: string\n) {\n  components.push({\n    selector: selector,\n    constructor: constructor,\n  });\n}\n\n/**\n * TypeDoc application class.\n */\nexport class Application {\n  alwaysVisibleMember: HTMLElement | null = null;\n\n  /**\n   * Create a new Application instance.\n   */\n  constructor() {\n    this.createComponents(document.body);\n    this.ensureActivePageVisible();\n    this.ensureFocusedElementVisible();\n    this.listenForCodeCopies();\n    window.addEventListener(\"hashchange\", () =>\n      this.ensureFocusedElementVisible()\n    );\n  }\n\n  /**\n   * Create all components beneath the given element.\n   */\n  private createComponents(context: HTMLElement) {\n    components.forEach((c) => {\n      context.querySelectorAll<HTMLElement>(c.selector).forEach((el) => {\n        if (!el.dataset[\"hasInstance\"]) {\n          new c.constructor({ el, app: this });\n          el.dataset[\"hasInstance\"] = String(true);\n        }\n      });\n    });\n  }\n\n  public filterChanged() {\n    this.ensureFocusedElementVisible();\n  }\n\n  private ensureActivePageVisible() {\n    const pageLink = document.querySelector(\".tsd-navigation .current\");\n    let iter = pageLink?.parentElement;\n    while (iter && !iter.classList.contains(\".tsd-navigation\")) {\n      // Expand parent namespaces if collapsed, and this module\n      if (iter instanceof HTMLDetailsElement) {\n        iter.open = true;\n      }\n      iter = iter.parentElement;\n    }\n\n    if (pageLink) {\n      const top =\n        pageLink.getBoundingClientRect().top -\n        document.documentElement.clientHeight / 4;\n      // If we are showing three columns, this will scroll the site menu down to\n      // show the page we just loaded in the navigation.\n      document.querySelector(\".site-menu\")!.scrollTop = top;\n    }\n  }\n\n  /**\n   * Ensures that if a user was linked to a reflection which is hidden because of filter\n   * settings, that reflection is still shown.\n   */\n  private ensureFocusedElementVisible() {\n    if (this.alwaysVisibleMember) {\n      this.alwaysVisibleMember.classList.remove(\"always-visible\");\n      this.alwaysVisibleMember.firstElementChild!.remove();\n      this.alwaysVisibleMember = null;\n    }\n\n    if (!location.hash) return;\n\n    const reflAnchor = document.getElementById(location.hash.substring(1));\n    if (!reflAnchor) return;\n\n    let reflContainer = reflAnchor.parentElement!;\n    while (reflContainer && reflContainer.tagName !== \"SECTION\") {\n      reflContainer = reflContainer.parentElement!;\n    }\n\n    if (!reflContainer) {\n      // This is probably a link in the readme, doesn't have a containing section\n      return;\n    }\n\n    if (reflContainer.offsetParent == null) {\n      this.alwaysVisibleMember = reflContainer;\n\n      reflContainer.classList.add(\"always-visible\");\n\n      const warning = document.createElement(\"p\");\n      warning.classList.add(\"warning\");\n      warning.textContent =\n        \"This member is normally hidden due to your filter settings.\";\n\n      reflContainer.prepend(warning);\n    }\n  }\n\n  private listenForCodeCopies() {\n    document.querySelectorAll(\"pre > button\").forEach((button) => {\n      let timeout: ReturnType<typeof setTimeout>;\n      button.addEventListener(\"click\", () => {\n        if (button.previousElementSibling instanceof HTMLElement) {\n          navigator.clipboard.writeText(\n            button.previousElementSibling.innerText.trim()\n          );\n        }\n        button.textContent = \"Copied!\";\n        button.classList.add(\"visible\");\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n          button.classList.remove(\"visible\");\n          timeout = setTimeout(() => {\n            button.textContent = \"Copy\";\n          }, 100);\n        }, 1000);\n      });\n    });\n  }\n}\n","export const debounce = (fn: () => void, wait: number = 100) => {\n    let timeout: ReturnType<typeof setTimeout>;\n    return () => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => fn(), wait);\n    };\n};\n","/**\n * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.9\n * Copyright (C) 2020 Oliver Nightingale\n * @license MIT\n */\n\n;(function(){\n\n/**\n * A convenience function for configuring and constructing\n * a new lunr Index.\n *\n * A lunr.Builder instance is created and the pipeline setup\n * with a trimmer, stop word filter and stemmer.\n *\n * This builder object is yielded to the configuration function\n * that is passed as a parameter, allowing the list of fields\n * and other builder parameters to be customised.\n *\n * All documents _must_ be added within the passed config function.\n *\n * @example\n * var idx = lunr(function () {\n *   this.field('title')\n *   this.field('body')\n *   this.ref('id')\n *\n *   documents.forEach(function (doc) {\n *     this.add(doc)\n *   }, this)\n * })\n *\n * @see {@link lunr.Builder}\n * @see {@link lunr.Pipeline}\n * @see {@link lunr.trimmer}\n * @see {@link lunr.stopWordFilter}\n * @see {@link lunr.stemmer}\n * @namespace {function} lunr\n */\nvar lunr = function (config) {\n  var builder = new lunr.Builder\n\n  builder.pipeline.add(\n    lunr.trimmer,\n    lunr.stopWordFilter,\n    lunr.stemmer\n  )\n\n  builder.searchPipeline.add(\n    lunr.stemmer\n  )\n\n  config.call(builder, builder)\n  return builder.build()\n}\n\nlunr.version = \"2.3.9\"\n/*!\n * lunr.utils\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * A namespace containing utils for the rest of the lunr library\n * @namespace lunr.utils\n */\nlunr.utils = {}\n\n/**\n * Print a warning message to the console.\n *\n * @param {String} message The message to be printed.\n * @memberOf lunr.utils\n * @function\n */\nlunr.utils.warn = (function (global) {\n  /* eslint-disable no-console */\n  return function (message) {\n    if (global.console && console.warn) {\n      console.warn(message)\n    }\n  }\n  /* eslint-enable no-console */\n})(this)\n\n/**\n * Convert an object to a string.\n *\n * In the case of `null` and `undefined` the function returns\n * the empty string, in all other cases the result of calling\n * `toString` on the passed object is returned.\n *\n * @param {Any} obj The object to convert to a string.\n * @return {String} string representation of the passed object.\n * @memberOf lunr.utils\n */\nlunr.utils.asString = function (obj) {\n  if (obj === void 0 || obj === null) {\n    return \"\"\n  } else {\n    return obj.toString()\n  }\n}\n\n/**\n * Clones an object.\n *\n * Will create a copy of an existing object such that any mutations\n * on the copy cannot affect the original.\n *\n * Only shallow objects are supported, passing a nested object to this\n * function will cause a TypeError.\n *\n * Objects with primitives, and arrays of primitives are supported.\n *\n * @param {Object} obj The object to clone.\n * @return {Object} a clone of the passed object.\n * @throws {TypeError} when a nested object is passed.\n * @memberOf Utils\n */\nlunr.utils.clone = function (obj) {\n  if (obj === null || obj === undefined) {\n    return obj\n  }\n\n  var clone = Object.create(null),\n      keys = Object.keys(obj)\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i],\n        val = obj[key]\n\n    if (Array.isArray(val)) {\n      clone[key] = val.slice()\n      continue\n    }\n\n    if (typeof val === 'string' ||\n        typeof val === 'number' ||\n        typeof val === 'boolean') {\n      clone[key] = val\n      continue\n    }\n\n    throw new TypeError(\"clone is not deep and does not support nested objects\")\n  }\n\n  return clone\n}\nlunr.FieldRef = function (docRef, fieldName, stringValue) {\n  this.docRef = docRef\n  this.fieldName = fieldName\n  this._stringValue = stringValue\n}\n\nlunr.FieldRef.joiner = \"/\"\n\nlunr.FieldRef.fromString = function (s) {\n  var n = s.indexOf(lunr.FieldRef.joiner)\n\n  if (n === -1) {\n    throw \"malformed field ref string\"\n  }\n\n  var fieldRef = s.slice(0, n),\n      docRef = s.slice(n + 1)\n\n  return new lunr.FieldRef (docRef, fieldRef, s)\n}\n\nlunr.FieldRef.prototype.toString = function () {\n  if (this._stringValue == undefined) {\n    this._stringValue = this.fieldName + lunr.FieldRef.joiner + this.docRef\n  }\n\n  return this._stringValue\n}\n/*!\n * lunr.Set\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * A lunr set.\n *\n * @constructor\n */\nlunr.Set = function (elements) {\n  this.elements = Object.create(null)\n\n  if (elements) {\n    this.length = elements.length\n\n    for (var i = 0; i < this.length; i++) {\n      this.elements[elements[i]] = true\n    }\n  } else {\n    this.length = 0\n  }\n}\n\n/**\n * A complete set that contains all elements.\n *\n * @static\n * @readonly\n * @type {lunr.Set}\n */\nlunr.Set.complete = {\n  intersect: function (other) {\n    return other\n  },\n\n  union: function () {\n    return this\n  },\n\n  contains: function () {\n    return true\n  }\n}\n\n/**\n * An empty set that contains no elements.\n *\n * @static\n * @readonly\n * @type {lunr.Set}\n */\nlunr.Set.empty = {\n  intersect: function () {\n    return this\n  },\n\n  union: function (other) {\n    return other\n  },\n\n  contains: function () {\n    return false\n  }\n}\n\n/**\n * Returns true if this set contains the specified object.\n *\n * @param {object} object - Object whose presence in this set is to be tested.\n * @returns {boolean} - True if this set contains the specified object.\n */\nlunr.Set.prototype.contains = function (object) {\n  return !!this.elements[object]\n}\n\n/**\n * Returns a new set containing only the elements that are present in both\n * this set and the specified set.\n *\n * @param {lunr.Set} other - set to intersect with this set.\n * @returns {lunr.Set} a new set that is the intersection of this and the specified set.\n */\n\nlunr.Set.prototype.intersect = function (other) {\n  var a, b, elements, intersection = []\n\n  if (other === lunr.Set.complete) {\n    return this\n  }\n\n  if (other === lunr.Set.empty) {\n    return other\n  }\n\n  if (this.length < other.length) {\n    a = this\n    b = other\n  } else {\n    a = other\n    b = this\n  }\n\n  elements = Object.keys(a.elements)\n\n  for (var i = 0; i < elements.length; i++) {\n    var element = elements[i]\n    if (element in b.elements) {\n      intersection.push(element)\n    }\n  }\n\n  return new lunr.Set (intersection)\n}\n\n/**\n * Returns a new set combining the elements of this and the specified set.\n *\n * @param {lunr.Set} other - set to union with this set.\n * @return {lunr.Set} a new set that is the union of this and the specified set.\n */\n\nlunr.Set.prototype.union = function (other) {\n  if (other === lunr.Set.complete) {\n    return lunr.Set.complete\n  }\n\n  if (other === lunr.Set.empty) {\n    return this\n  }\n\n  return new lunr.Set(Object.keys(this.elements).concat(Object.keys(other.elements)))\n}\n/**\n * A function to calculate the inverse document frequency for\n * a posting. This is shared between the builder and the index\n *\n * @private\n * @param {object} posting - The posting for a given term\n * @param {number} documentCount - The total number of documents.\n */\nlunr.idf = function (posting, documentCount) {\n  var documentsWithTerm = 0\n\n  for (var fieldName in posting) {\n    if (fieldName == '_index') continue // Ignore the term index, its not a field\n    documentsWithTerm += Object.keys(posting[fieldName]).length\n  }\n\n  var x = (documentCount - documentsWithTerm + 0.5) / (documentsWithTerm + 0.5)\n\n  return Math.log(1 + Math.abs(x))\n}\n\n/**\n * A token wraps a string representation of a token\n * as it is passed through the text processing pipeline.\n *\n * @constructor\n * @param {string} [str=''] - The string token being wrapped.\n * @param {object} [metadata={}] - Metadata associated with this token.\n */\nlunr.Token = function (str, metadata) {\n  this.str = str || \"\"\n  this.metadata = metadata || {}\n}\n\n/**\n * Returns the token string that is being wrapped by this object.\n *\n * @returns {string}\n */\nlunr.Token.prototype.toString = function () {\n  return this.str\n}\n\n/**\n * A token update function is used when updating or optionally\n * when cloning a token.\n *\n * @callback lunr.Token~updateFunction\n * @param {string} str - The string representation of the token.\n * @param {Object} metadata - All metadata associated with this token.\n */\n\n/**\n * Applies the given function to the wrapped string token.\n *\n * @example\n * token.update(function (str, metadata) {\n *   return str.toUpperCase()\n * })\n *\n * @param {lunr.Token~updateFunction} fn - A function to apply to the token string.\n * @returns {lunr.Token}\n */\nlunr.Token.prototype.update = function (fn) {\n  this.str = fn(this.str, this.metadata)\n  return this\n}\n\n/**\n * Creates a clone of this token. Optionally a function can be\n * applied to the cloned token.\n *\n * @param {lunr.Token~updateFunction} [fn] - An optional function to apply to the cloned token.\n * @returns {lunr.Token}\n */\nlunr.Token.prototype.clone = function (fn) {\n  fn = fn || function (s) { return s }\n  return new lunr.Token (fn(this.str, this.metadata), this.metadata)\n}\n/*!\n * lunr.tokenizer\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * A function for splitting a string into tokens ready to be inserted into\n * the search index. Uses `lunr.tokenizer.separator` to split strings, change\n * the value of this property to change how strings are split into tokens.\n *\n * This tokenizer will convert its parameter to a string by calling `toString` and\n * then will split this string on the character in `lunr.tokenizer.separator`.\n * Arrays will have their elements converted to strings and wrapped in a lunr.Token.\n *\n * Optional metadata can be passed to the tokenizer, this metadata will be cloned and\n * added as metadata to every token that is created from the object to be tokenized.\n *\n * @static\n * @param {?(string|object|object[])} obj - The object to convert into tokens\n * @param {?object} metadata - Optional metadata to associate with every token\n * @returns {lunr.Token[]}\n * @see {@link lunr.Pipeline}\n */\nlunr.tokenizer = function (obj, metadata) {\n  if (obj == null || obj == undefined) {\n    return []\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map(function (t) {\n      return new lunr.Token(\n        lunr.utils.asString(t).toLowerCase(),\n        lunr.utils.clone(metadata)\n      )\n    })\n  }\n\n  var str = obj.toString().toLowerCase(),\n      len = str.length,\n      tokens = []\n\n  for (var sliceEnd = 0, sliceStart = 0; sliceEnd <= len; sliceEnd++) {\n    var char = str.charAt(sliceEnd),\n        sliceLength = sliceEnd - sliceStart\n\n    if ((char.match(lunr.tokenizer.separator) || sliceEnd == len)) {\n\n      if (sliceLength > 0) {\n        var tokenMetadata = lunr.utils.clone(metadata) || {}\n        tokenMetadata[\"position\"] = [sliceStart, sliceLength]\n        tokenMetadata[\"index\"] = tokens.length\n\n        tokens.push(\n          new lunr.Token (\n            str.slice(sliceStart, sliceEnd),\n            tokenMetadata\n          )\n        )\n      }\n\n      sliceStart = sliceEnd + 1\n    }\n\n  }\n\n  return tokens\n}\n\n/**\n * The separator used to split a string into tokens. Override this property to change the behaviour of\n * `lunr.tokenizer` behaviour when tokenizing strings. By default this splits on whitespace and hyphens.\n *\n * @static\n * @see lunr.tokenizer\n */\nlunr.tokenizer.separator = /[\\s\\-]+/\n/*!\n * lunr.Pipeline\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * lunr.Pipelines maintain an ordered list of functions to be applied to all\n * tokens in documents entering the search index and queries being ran against\n * the index.\n *\n * An instance of lunr.Index created with the lunr shortcut will contain a\n * pipeline with a stop word filter and an English language stemmer. Extra\n * functions can be added before or after either of these functions or these\n * default functions can be removed.\n *\n * When run the pipeline will call each function in turn, passing a token, the\n * index of that token in the original list of all tokens and finally a list of\n * all the original tokens.\n *\n * The output of functions in the pipeline will be passed to the next function\n * in the pipeline. To exclude a token from entering the index the function\n * should return undefined, the rest of the pipeline will not be called with\n * this token.\n *\n * For serialisation of pipelines to work, all functions used in an instance of\n * a pipeline should be registered with lunr.Pipeline. Registered functions can\n * then be loaded. If trying to load a serialised pipeline that uses functions\n * that are not registered an error will be thrown.\n *\n * If not planning on serialising the pipeline then registering pipeline functions\n * is not necessary.\n *\n * @constructor\n */\nlunr.Pipeline = function () {\n  this._stack = []\n}\n\nlunr.Pipeline.registeredFunctions = Object.create(null)\n\n/**\n * A pipeline function maps lunr.Token to lunr.Token. A lunr.Token contains the token\n * string as well as all known metadata. A pipeline function can mutate the token string\n * or mutate (or add) metadata for a given token.\n *\n * A pipeline function can indicate that the passed token should be discarded by returning\n * null, undefined or an empty string. This token will not be passed to any downstream pipeline\n * functions and will not be added to the index.\n *\n * Multiple tokens can be returned by returning an array of tokens. Each token will be passed\n * to any downstream pipeline functions and all will returned tokens will be added to the index.\n *\n * Any number of pipeline functions may be chained together using a lunr.Pipeline.\n *\n * @interface lunr.PipelineFunction\n * @param {lunr.Token} token - A token from the document being processed.\n * @param {number} i - The index of this token in the complete list of tokens for this document/field.\n * @param {lunr.Token[]} tokens - All tokens for this document/field.\n * @returns {(?lunr.Token|lunr.Token[])}\n */\n\n/**\n * Register a function with the pipeline.\n *\n * Functions that are used in the pipeline should be registered if the pipeline\n * needs to be serialised, or a serialised pipeline needs to be loaded.\n *\n * Registering a function does not add it to a pipeline, functions must still be\n * added to instances of the pipeline for them to be used when running a pipeline.\n *\n * @param {lunr.PipelineFunction} fn - The function to check for.\n * @param {String} label - The label to register this function with\n */\nlunr.Pipeline.registerFunction = function (fn, label) {\n  if (label in this.registeredFunctions) {\n    lunr.utils.warn('Overwriting existing registered function: ' + label)\n  }\n\n  fn.label = label\n  lunr.Pipeline.registeredFunctions[fn.label] = fn\n}\n\n/**\n * Warns if the function is not registered as a Pipeline function.\n *\n * @param {lunr.PipelineFunction} fn - The function to check for.\n * @private\n */\nlunr.Pipeline.warnIfFunctionNotRegistered = function (fn) {\n  var isRegistered = fn.label && (fn.label in this.registeredFunctions)\n\n  if (!isRegistered) {\n    lunr.utils.warn('Function is not registered with pipeline. This may cause problems when serialising the index.\\n', fn)\n  }\n}\n\n/**\n * Loads a previously serialised pipeline.\n *\n * All functions to be loaded must already be registered with lunr.Pipeline.\n * If any function from the serialised data has not been registered then an\n * error will be thrown.\n *\n * @param {Object} serialised - The serialised pipeline to load.\n * @returns {lunr.Pipeline}\n */\nlunr.Pipeline.load = function (serialised) {\n  var pipeline = new lunr.Pipeline\n\n  serialised.forEach(function (fnName) {\n    var fn = lunr.Pipeline.registeredFunctions[fnName]\n\n    if (fn) {\n      pipeline.add(fn)\n    } else {\n      throw new Error('Cannot load unregistered function: ' + fnName)\n    }\n  })\n\n  return pipeline\n}\n\n/**\n * Adds new functions to the end of the pipeline.\n *\n * Logs a warning if the function has not been registered.\n *\n * @param {lunr.PipelineFunction[]} functions - Any number of functions to add to the pipeline.\n */\nlunr.Pipeline.prototype.add = function () {\n  var fns = Array.prototype.slice.call(arguments)\n\n  fns.forEach(function (fn) {\n    lunr.Pipeline.warnIfFunctionNotRegistered(fn)\n    this._stack.push(fn)\n  }, this)\n}\n\n/**\n * Adds a single function after a function that already exists in the\n * pipeline.\n *\n * Logs a warning if the function has not been registered.\n *\n * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.\n * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.\n */\nlunr.Pipeline.prototype.after = function (existingFn, newFn) {\n  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)\n\n  var pos = this._stack.indexOf(existingFn)\n  if (pos == -1) {\n    throw new Error('Cannot find existingFn')\n  }\n\n  pos = pos + 1\n  this._stack.splice(pos, 0, newFn)\n}\n\n/**\n * Adds a single function before a function that already exists in the\n * pipeline.\n *\n * Logs a warning if the function has not been registered.\n *\n * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.\n * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.\n */\nlunr.Pipeline.prototype.before = function (existingFn, newFn) {\n  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)\n\n  var pos = this._stack.indexOf(existingFn)\n  if (pos == -1) {\n    throw new Error('Cannot find existingFn')\n  }\n\n  this._stack.splice(pos, 0, newFn)\n}\n\n/**\n * Removes a function from the pipeline.\n *\n * @param {lunr.PipelineFunction} fn The function to remove from the pipeline.\n */\nlunr.Pipeline.prototype.remove = function (fn) {\n  var pos = this._stack.indexOf(fn)\n  if (pos == -1) {\n    return\n  }\n\n  this._stack.splice(pos, 1)\n}\n\n/**\n * Runs the current list of functions that make up the pipeline against the\n * passed tokens.\n *\n * @param {Array} tokens The tokens to run through the pipeline.\n * @returns {Array}\n */\nlunr.Pipeline.prototype.run = function (tokens) {\n  var stackLength = this._stack.length\n\n  for (var i = 0; i < stackLength; i++) {\n    var fn = this._stack[i]\n    var memo = []\n\n    for (var j = 0; j < tokens.length; j++) {\n      var result = fn(tokens[j], j, tokens)\n\n      if (result === null || result === void 0 || result === '') continue\n\n      if (Array.isArray(result)) {\n        for (var k = 0; k < result.length; k++) {\n          memo.push(result[k])\n        }\n      } else {\n        memo.push(result)\n      }\n    }\n\n    tokens = memo\n  }\n\n  return tokens\n}\n\n/**\n * Convenience method for passing a string through a pipeline and getting\n * strings out. This method takes care of wrapping the passed string in a\n * token and mapping the resulting tokens back to strings.\n *\n * @param {string} str - The string to pass through the pipeline.\n * @param {?object} metadata - Optional metadata to associate with the token\n * passed to the pipeline.\n * @returns {string[]}\n */\nlunr.Pipeline.prototype.runString = function (str, metadata) {\n  var token = new lunr.Token (str, metadata)\n\n  return this.run([token]).map(function (t) {\n    return t.toString()\n  })\n}\n\n/**\n * Resets the pipeline by removing any existing processors.\n *\n */\nlunr.Pipeline.prototype.reset = function () {\n  this._stack = []\n}\n\n/**\n * Returns a representation of the pipeline ready for serialisation.\n *\n * Logs a warning if the function has not been registered.\n *\n * @returns {Array}\n */\nlunr.Pipeline.prototype.toJSON = function () {\n  return this._stack.map(function (fn) {\n    lunr.Pipeline.warnIfFunctionNotRegistered(fn)\n\n    return fn.label\n  })\n}\n/*!\n * lunr.Vector\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * A vector is used to construct the vector space of documents and queries. These\n * vectors support operations to determine the similarity between two documents or\n * a document and a query.\n *\n * Normally no parameters are required for initializing a vector, but in the case of\n * loading a previously dumped vector the raw elements can be provided to the constructor.\n *\n * For performance reasons vectors are implemented with a flat array, where an elements\n * index is immediately followed by its value. E.g. [index, value, index, value]. This\n * allows the underlying array to be as sparse as possible and still offer decent\n * performance when being used for vector calculations.\n *\n * @constructor\n * @param {Number[]} [elements] - The flat list of element index and element value pairs.\n */\nlunr.Vector = function (elements) {\n  this._magnitude = 0\n  this.elements = elements || []\n}\n\n\n/**\n * Calculates the position within the vector to insert a given index.\n *\n * This is used internally by insert and upsert. If there are duplicate indexes then\n * the position is returned as if the value for that index were to be updated, but it\n * is the callers responsibility to check whether there is a duplicate at that index\n *\n * @param {Number} insertIdx - The index at which the element should be inserted.\n * @returns {Number}\n */\nlunr.Vector.prototype.positionForIndex = function (index) {\n  // For an empty vector the tuple can be inserted at the beginning\n  if (this.elements.length == 0) {\n    return 0\n  }\n\n  var start = 0,\n      end = this.elements.length / 2,\n      sliceLength = end - start,\n      pivotPoint = Math.floor(sliceLength / 2),\n      pivotIndex = this.elements[pivotPoint * 2]\n\n  while (sliceLength > 1) {\n    if (pivotIndex < index) {\n      start = pivotPoint\n    }\n\n    if (pivotIndex > index) {\n      end = pivotPoint\n    }\n\n    if (pivotIndex == index) {\n      break\n    }\n\n    sliceLength = end - start\n    pivotPoint = start + Math.floor(sliceLength / 2)\n    pivotIndex = this.elements[pivotPoint * 2]\n  }\n\n  if (pivotIndex == index) {\n    return pivotPoint * 2\n  }\n\n  if (pivotIndex > index) {\n    return pivotPoint * 2\n  }\n\n  if (pivotIndex < index) {\n    return (pivotPoint + 1) * 2\n  }\n}\n\n/**\n * Inserts an element at an index within the vector.\n *\n * Does not allow duplicates, will throw an error if there is already an entry\n * for this index.\n *\n * @param {Number} insertIdx - The index at which the element should be inserted.\n * @param {Number} val - The value to be inserted into the vector.\n */\nlunr.Vector.prototype.insert = function (insertIdx, val) {\n  this.upsert(insertIdx, val, function () {\n    throw \"duplicate index\"\n  })\n}\n\n/**\n * Inserts or updates an existing index within the vector.\n *\n * @param {Number} insertIdx - The index at which the element should be inserted.\n * @param {Number} val - The value to be inserted into the vector.\n * @param {function} fn - A function that is called for updates, the existing value and the\n * requested value are passed as arguments\n */\nlunr.Vector.prototype.upsert = function (insertIdx, val, fn) {\n  this._magnitude = 0\n  var position = this.positionForIndex(insertIdx)\n\n  if (this.elements[position] == insertIdx) {\n    this.elements[position + 1] = fn(this.elements[position + 1], val)\n  } else {\n    this.elements.splice(position, 0, insertIdx, val)\n  }\n}\n\n/**\n * Calculates the magnitude of this vector.\n *\n * @returns {Number}\n */\nlunr.Vector.prototype.magnitude = function () {\n  if (this._magnitude) return this._magnitude\n\n  var sumOfSquares = 0,\n      elementsLength = this.elements.length\n\n  for (var i = 1; i < elementsLength; i += 2) {\n    var val = this.elements[i]\n    sumOfSquares += val * val\n  }\n\n  return this._magnitude = Math.sqrt(sumOfSquares)\n}\n\n/**\n * Calculates the dot product of this vector and another vector.\n *\n * @param {lunr.Vector} otherVector - The vector to compute the dot product with.\n * @returns {Number}\n */\nlunr.Vector.prototype.dot = function (otherVector) {\n  var dotProduct = 0,\n      a = this.elements, b = otherVector.elements,\n      aLen = a.length, bLen = b.length,\n      aVal = 0, bVal = 0,\n      i = 0, j = 0\n\n  while (i < aLen && j < bLen) {\n    aVal = a[i], bVal = b[j]\n    if (aVal < bVal) {\n      i += 2\n    } else if (aVal > bVal) {\n      j += 2\n    } else if (aVal == bVal) {\n      dotProduct += a[i + 1] * b[j + 1]\n      i += 2\n      j += 2\n    }\n  }\n\n  return dotProduct\n}\n\n/**\n * Calculates the similarity between this vector and another vector.\n *\n * @param {lunr.Vector} otherVector - The other vector to calculate the\n * similarity with.\n * @returns {Number}\n */\nlunr.Vector.prototype.similarity = function (otherVector) {\n  return this.dot(otherVector) / this.magnitude() || 0\n}\n\n/**\n * Converts the vector to an array of the elements within the vector.\n *\n * @returns {Number[]}\n */\nlunr.Vector.prototype.toArray = function () {\n  var output = new Array (this.elements.length / 2)\n\n  for (var i = 1, j = 0; i < this.elements.length; i += 2, j++) {\n    output[j] = this.elements[i]\n  }\n\n  return output\n}\n\n/**\n * A JSON serializable representation of the vector.\n *\n * @returns {Number[]}\n */\nlunr.Vector.prototype.toJSON = function () {\n  return this.elements\n}\n/* eslint-disable */\n/*!\n * lunr.stemmer\n * Copyright (C) 2020 Oliver Nightingale\n * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt\n */\n\n/**\n * lunr.stemmer is an english language stemmer, this is a JavaScript\n * implementation of the PorterStemmer taken from http://tartarus.org/~martin\n *\n * @static\n * @implements {lunr.PipelineFunction}\n * @param {lunr.Token} token - The string to stem\n * @returns {lunr.Token}\n * @see {@link lunr.Pipeline}\n * @function\n */\nlunr.stemmer = (function(){\n  var step2list = {\n      \"ational\" : \"ate\",\n      \"tional\" : \"tion\",\n      \"enci\" : \"ence\",\n      \"anci\" : \"ance\",\n      \"izer\" : \"ize\",\n      \"bli\" : \"ble\",\n      \"alli\" : \"al\",\n      \"entli\" : \"ent\",\n      \"eli\" : \"e\",\n      \"ousli\" : \"ous\",\n      \"ization\" : \"ize\",\n      \"ation\" : \"ate\",\n      \"ator\" : \"ate\",\n      \"alism\" : \"al\",\n      \"iveness\" : \"ive\",\n      \"fulness\" : \"ful\",\n      \"ousness\" : \"ous\",\n      \"aliti\" : \"al\",\n      \"iviti\" : \"ive\",\n      \"biliti\" : \"ble\",\n      \"logi\" : \"log\"\n    },\n\n    step3list = {\n      \"icate\" : \"ic\",\n      \"ative\" : \"\",\n      \"alize\" : \"al\",\n      \"iciti\" : \"ic\",\n      \"ical\" : \"ic\",\n      \"ful\" : \"\",\n      \"ness\" : \"\"\n    },\n\n    c = \"[^aeiou]\",          // consonant\n    v = \"[aeiouy]\",          // vowel\n    C = c + \"[^aeiouy]*\",    // consonant sequence\n    V = v + \"[aeiou]*\",      // vowel sequence\n\n    mgr0 = \"^(\" + C + \")?\" + V + C,               // [C]VC... is m>0\n    meq1 = \"^(\" + C + \")?\" + V + C + \"(\" + V + \")?$\",  // [C]VC[V] is m=1\n    mgr1 = \"^(\" + C + \")?\" + V + C + V + C,       // [C]VCVC... is m>1\n    s_v = \"^(\" + C + \")?\" + v;                   // vowel in stem\n\n  var re_mgr0 = new RegExp(mgr0);\n  var re_mgr1 = new RegExp(mgr1);\n  var re_meq1 = new RegExp(meq1);\n  var re_s_v = new RegExp(s_v);\n\n  var re_1a = /^(.+?)(ss|i)es$/;\n  var re2_1a = /^(.+?)([^s])s$/;\n  var re_1b = /^(.+?)eed$/;\n  var re2_1b = /^(.+?)(ed|ing)$/;\n  var re_1b_2 = /.$/;\n  var re2_1b_2 = /(at|bl|iz)$/;\n  var re3_1b_2 = new RegExp(\"([^aeiouylsz])\\\\1$\");\n  var re4_1b_2 = new RegExp(\"^\" + C + v + \"[^aeiouwxy]$\");\n\n  var re_1c = /^(.+?[^aeiou])y$/;\n  var re_2 = /^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;\n\n  var re_3 = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;\n\n  var re_4 = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;\n  var re2_4 = /^(.+?)(s|t)(ion)$/;\n\n  var re_5 = /^(.+?)e$/;\n  var re_5_1 = /ll$/;\n  var re3_5 = new RegExp(\"^\" + C + v + \"[^aeiouwxy]$\");\n\n  var porterStemmer = function porterStemmer(w) {\n    var stem,\n      suffix,\n      firstch,\n      re,\n      re2,\n      re3,\n      re4;\n\n    if (w.length < 3) { return w; }\n\n    firstch = w.substr(0,1);\n    if (firstch == \"y\") {\n      w = firstch.toUpperCase() + w.substr(1);\n    }\n\n    // Step 1a\n    re = re_1a\n    re2 = re2_1a;\n\n    if (re.test(w)) { w = w.replace(re,\"$1$2\"); }\n    else if (re2.test(w)) { w = w.replace(re2,\"$1$2\"); }\n\n    // Step 1b\n    re = re_1b;\n    re2 = re2_1b;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      re = re_mgr0;\n      if (re.test(fp[1])) {\n        re = re_1b_2;\n        w = w.replace(re,\"\");\n      }\n    } else if (re2.test(w)) {\n      var fp = re2.exec(w);\n      stem = fp[1];\n      re2 = re_s_v;\n      if (re2.test(stem)) {\n        w = stem;\n        re2 = re2_1b_2;\n        re3 = re3_1b_2;\n        re4 = re4_1b_2;\n        if (re2.test(w)) { w = w + \"e\"; }\n        else if (re3.test(w)) { re = re_1b_2; w = w.replace(re,\"\"); }\n        else if (re4.test(w)) { w = w + \"e\"; }\n      }\n    }\n\n    // Step 1c - replace suffix y or Y by i if preceded by a non-vowel which is not the first letter of the word (so cry -> cri, by -> by, say -> say)\n    re = re_1c;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      w = stem + \"i\";\n    }\n\n    // Step 2\n    re = re_2;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      suffix = fp[2];\n      re = re_mgr0;\n      if (re.test(stem)) {\n        w = stem + step2list[suffix];\n      }\n    }\n\n    // Step 3\n    re = re_3;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      suffix = fp[2];\n      re = re_mgr0;\n      if (re.test(stem)) {\n        w = stem + step3list[suffix];\n      }\n    }\n\n    // Step 4\n    re = re_4;\n    re2 = re2_4;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      re = re_mgr1;\n      if (re.test(stem)) {\n        w = stem;\n      }\n    } else if (re2.test(w)) {\n      var fp = re2.exec(w);\n      stem = fp[1] + fp[2];\n      re2 = re_mgr1;\n      if (re2.test(stem)) {\n        w = stem;\n      }\n    }\n\n    // Step 5\n    re = re_5;\n    if (re.test(w)) {\n      var fp = re.exec(w);\n      stem = fp[1];\n      re = re_mgr1;\n      re2 = re_meq1;\n      re3 = re3_5;\n      if (re.test(stem) || (re2.test(stem) && !(re3.test(stem)))) {\n        w = stem;\n      }\n    }\n\n    re = re_5_1;\n    re2 = re_mgr1;\n    if (re.test(w) && re2.test(w)) {\n      re = re_1b_2;\n      w = w.replace(re,\"\");\n    }\n\n    // and turn initial Y back to y\n\n    if (firstch == \"y\") {\n      w = firstch.toLowerCase() + w.substr(1);\n    }\n\n    return w;\n  };\n\n  return function (token) {\n    return token.update(porterStemmer);\n  }\n})();\n\nlunr.Pipeline.registerFunction(lunr.stemmer, 'stemmer')\n/*!\n * lunr.stopWordFilter\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * lunr.generateStopWordFilter builds a stopWordFilter function from the provided\n * list of stop words.\n *\n * The built in lunr.stopWordFilter is built using this generator and can be used\n * to generate custom stopWordFilters for applications or non English languages.\n *\n * @function\n * @param {Array} token The token to pass through the filter\n * @returns {lunr.PipelineFunction}\n * @see lunr.Pipeline\n * @see lunr.stopWordFilter\n */\nlunr.generateStopWordFilter = function (stopWords) {\n  var words = stopWords.reduce(function (memo, stopWord) {\n    memo[stopWord] = stopWord\n    return memo\n  }, {})\n\n  return function (token) {\n    if (token && words[token.toString()] !== token.toString()) return token\n  }\n}\n\n/**\n * lunr.stopWordFilter is an English language stop word list filter, any words\n * contained in the list will not be passed through the filter.\n *\n * This is intended to be used in the Pipeline. If the token does not pass the\n * filter then undefined will be returned.\n *\n * @function\n * @implements {lunr.PipelineFunction}\n * @params {lunr.Token} token - A token to check for being a stop word.\n * @returns {lunr.Token}\n * @see {@link lunr.Pipeline}\n */\nlunr.stopWordFilter = lunr.generateStopWordFilter([\n  'a',\n  'able',\n  'about',\n  'across',\n  'after',\n  'all',\n  'almost',\n  'also',\n  'am',\n  'among',\n  'an',\n  'and',\n  'any',\n  'are',\n  'as',\n  'at',\n  'be',\n  'because',\n  'been',\n  'but',\n  'by',\n  'can',\n  'cannot',\n  'could',\n  'dear',\n  'did',\n  'do',\n  'does',\n  'either',\n  'else',\n  'ever',\n  'every',\n  'for',\n  'from',\n  'get',\n  'got',\n  'had',\n  'has',\n  'have',\n  'he',\n  'her',\n  'hers',\n  'him',\n  'his',\n  'how',\n  'however',\n  'i',\n  'if',\n  'in',\n  'into',\n  'is',\n  'it',\n  'its',\n  'just',\n  'least',\n  'let',\n  'like',\n  'likely',\n  'may',\n  'me',\n  'might',\n  'most',\n  'must',\n  'my',\n  'neither',\n  'no',\n  'nor',\n  'not',\n  'of',\n  'off',\n  'often',\n  'on',\n  'only',\n  'or',\n  'other',\n  'our',\n  'own',\n  'rather',\n  'said',\n  'say',\n  'says',\n  'she',\n  'should',\n  'since',\n  'so',\n  'some',\n  'than',\n  'that',\n  'the',\n  'their',\n  'them',\n  'then',\n  'there',\n  'these',\n  'they',\n  'this',\n  'tis',\n  'to',\n  'too',\n  'twas',\n  'us',\n  'wants',\n  'was',\n  'we',\n  'were',\n  'what',\n  'when',\n  'where',\n  'which',\n  'while',\n  'who',\n  'whom',\n  'why',\n  'will',\n  'with',\n  'would',\n  'yet',\n  'you',\n  'your'\n])\n\nlunr.Pipeline.registerFunction(lunr.stopWordFilter, 'stopWordFilter')\n/*!\n * lunr.trimmer\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * lunr.trimmer is a pipeline function for trimming non word\n * characters from the beginning and end of tokens before they\n * enter the index.\n *\n * This implementation may not work correctly for non latin\n * characters and should either be removed or adapted for use\n * with languages with non-latin characters.\n *\n * @static\n * @implements {lunr.PipelineFunction}\n * @param {lunr.Token} token The token to pass through the filter\n * @returns {lunr.Token}\n * @see lunr.Pipeline\n */\nlunr.trimmer = function (token) {\n  return token.update(function (s) {\n    return s.replace(/^\\W+/, '').replace(/\\W+$/, '')\n  })\n}\n\nlunr.Pipeline.registerFunction(lunr.trimmer, 'trimmer')\n/*!\n * lunr.TokenSet\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * A token set is used to store the unique list of all tokens\n * within an index. Token sets are also used to represent an\n * incoming query to the index, this query token set and index\n * token set are then intersected to find which tokens to look\n * up in the inverted index.\n *\n * A token set can hold multiple tokens, as in the case of the\n * index token set, or it can hold a single token as in the\n * case of a simple query token set.\n *\n * Additionally token sets are used to perform wildcard matching.\n * Leading, contained and trailing wildcards are supported, and\n * from this edit distance matching can also be provided.\n *\n * Token sets are implemented as a minimal finite state automata,\n * where both common prefixes and suffixes are shared between tokens.\n * This helps to reduce the space used for storing the token set.\n *\n * @constructor\n */\nlunr.TokenSet = function () {\n  this.final = false\n  this.edges = {}\n  this.id = lunr.TokenSet._nextId\n  lunr.TokenSet._nextId += 1\n}\n\n/**\n * Keeps track of the next, auto increment, identifier to assign\n * to a new tokenSet.\n *\n * TokenSets require a unique identifier to be correctly minimised.\n *\n * @private\n */\nlunr.TokenSet._nextId = 1\n\n/**\n * Creates a TokenSet instance from the given sorted array of words.\n *\n * @param {String[]} arr - A sorted array of strings to create the set from.\n * @returns {lunr.TokenSet}\n * @throws Will throw an error if the input array is not sorted.\n */\nlunr.TokenSet.fromArray = function (arr) {\n  var builder = new lunr.TokenSet.Builder\n\n  for (var i = 0, len = arr.length; i < len; i++) {\n    builder.insert(arr[i])\n  }\n\n  builder.finish()\n  return builder.root\n}\n\n/**\n * Creates a token set from a query clause.\n *\n * @private\n * @param {Object} clause - A single clause from lunr.Query.\n * @param {string} clause.term - The query clause term.\n * @param {number} [clause.editDistance] - The optional edit distance for the term.\n * @returns {lunr.TokenSet}\n */\nlunr.TokenSet.fromClause = function (clause) {\n  if ('editDistance' in clause) {\n    return lunr.TokenSet.fromFuzzyString(clause.term, clause.editDistance)\n  } else {\n    return lunr.TokenSet.fromString(clause.term)\n  }\n}\n\n/**\n * Creates a token set representing a single string with a specified\n * edit distance.\n *\n * Insertions, deletions, substitutions and transpositions are each\n * treated as an edit distance of 1.\n *\n * Increasing the allowed edit distance will have a dramatic impact\n * on the performance of both creating and intersecting these TokenSets.\n * It is advised to keep the edit distance less than 3.\n *\n * @param {string} str - The string to create the token set from.\n * @param {number} editDistance - The allowed edit distance to match.\n * @returns {lunr.Vector}\n */\nlunr.TokenSet.fromFuzzyString = function (str, editDistance) {\n  var root = new lunr.TokenSet\n\n  var stack = [{\n    node: root,\n    editsRemaining: editDistance,\n    str: str\n  }]\n\n  while (stack.length) {\n    var frame = stack.pop()\n\n    // no edit\n    if (frame.str.length > 0) {\n      var char = frame.str.charAt(0),\n          noEditNode\n\n      if (char in frame.node.edges) {\n        noEditNode = frame.node.edges[char]\n      } else {\n        noEditNode = new lunr.TokenSet\n        frame.node.edges[char] = noEditNode\n      }\n\n      if (frame.str.length == 1) {\n        noEditNode.final = true\n      }\n\n      stack.push({\n        node: noEditNode,\n        editsRemaining: frame.editsRemaining,\n        str: frame.str.slice(1)\n      })\n    }\n\n    if (frame.editsRemaining == 0) {\n      continue\n    }\n\n    // insertion\n    if (\"*\" in frame.node.edges) {\n      var insertionNode = frame.node.edges[\"*\"]\n    } else {\n      var insertionNode = new lunr.TokenSet\n      frame.node.edges[\"*\"] = insertionNode\n    }\n\n    if (frame.str.length == 0) {\n      insertionNode.final = true\n    }\n\n    stack.push({\n      node: insertionNode,\n      editsRemaining: frame.editsRemaining - 1,\n      str: frame.str\n    })\n\n    // deletion\n    // can only do a deletion if we have enough edits remaining\n    // and if there are characters left to delete in the string\n    if (frame.str.length > 1) {\n      stack.push({\n        node: frame.node,\n        editsRemaining: frame.editsRemaining - 1,\n        str: frame.str.slice(1)\n      })\n    }\n\n    // deletion\n    // just removing the last character from the str\n    if (frame.str.length == 1) {\n      frame.node.final = true\n    }\n\n    // substitution\n    // can only do a substitution if we have enough edits remaining\n    // and if there are characters left to substitute\n    if (frame.str.length >= 1) {\n      if (\"*\" in frame.node.edges) {\n        var substitutionNode = frame.node.edges[\"*\"]\n      } else {\n        var substitutionNode = new lunr.TokenSet\n        frame.node.edges[\"*\"] = substitutionNode\n      }\n\n      if (frame.str.length == 1) {\n        substitutionNode.final = true\n      }\n\n      stack.push({\n        node: substitutionNode,\n        editsRemaining: frame.editsRemaining - 1,\n        str: frame.str.slice(1)\n      })\n    }\n\n    // transposition\n    // can only do a transposition if there are edits remaining\n    // and there are enough characters to transpose\n    if (frame.str.length > 1) {\n      var charA = frame.str.charAt(0),\n          charB = frame.str.charAt(1),\n          transposeNode\n\n      if (charB in frame.node.edges) {\n        transposeNode = frame.node.edges[charB]\n      } else {\n        transposeNode = new lunr.TokenSet\n        frame.node.edges[charB] = transposeNode\n      }\n\n      if (frame.str.length == 1) {\n        transposeNode.final = true\n      }\n\n      stack.push({\n        node: transposeNode,\n        editsRemaining: frame.editsRemaining - 1,\n        str: charA + frame.str.slice(2)\n      })\n    }\n  }\n\n  return root\n}\n\n/**\n * Creates a TokenSet from a string.\n *\n * The string may contain one or more wildcard characters (*)\n * that will allow wildcard matching when intersecting with\n * another TokenSet.\n *\n * @param {string} str - The string to create a TokenSet from.\n * @returns {lunr.TokenSet}\n */\nlunr.TokenSet.fromString = function (str) {\n  var node = new lunr.TokenSet,\n      root = node\n\n  /*\n   * Iterates through all characters within the passed string\n   * appending a node for each character.\n   *\n   * When a wildcard character is found then a self\n   * referencing edge is introduced to continually match\n   * any number of any characters.\n   */\n  for (var i = 0, len = str.length; i < len; i++) {\n    var char = str[i],\n        final = (i == len - 1)\n\n    if (char == \"*\") {\n      node.edges[char] = node\n      node.final = final\n\n    } else {\n      var next = new lunr.TokenSet\n      next.final = final\n\n      node.edges[char] = next\n      node = next\n    }\n  }\n\n  return root\n}\n\n/**\n * Converts this TokenSet into an array of strings\n * contained within the TokenSet.\n *\n * This is not intended to be used on a TokenSet that\n * contains wildcards, in these cases the results are\n * undefined and are likely to cause an infinite loop.\n *\n * @returns {string[]}\n */\nlunr.TokenSet.prototype.toArray = function () {\n  var words = []\n\n  var stack = [{\n    prefix: \"\",\n    node: this\n  }]\n\n  while (stack.length) {\n    var frame = stack.pop(),\n        edges = Object.keys(frame.node.edges),\n        len = edges.length\n\n    if (frame.node.final) {\n      /* In Safari, at this point the prefix is sometimes corrupted, see:\n       * https://github.com/olivernn/lunr.js/issues/279 Calling any\n       * String.prototype method forces Safari to \"cast\" this string to what\n       * it's supposed to be, fixing the bug. */\n      frame.prefix.charAt(0)\n      words.push(frame.prefix)\n    }\n\n    for (var i = 0; i < len; i++) {\n      var edge = edges[i]\n\n      stack.push({\n        prefix: frame.prefix.concat(edge),\n        node: frame.node.edges[edge]\n      })\n    }\n  }\n\n  return words\n}\n\n/**\n * Generates a string representation of a TokenSet.\n *\n * This is intended to allow TokenSets to be used as keys\n * in objects, largely to aid the construction and minimisation\n * of a TokenSet. As such it is not designed to be a human\n * friendly representation of the TokenSet.\n *\n * @returns {string}\n */\nlunr.TokenSet.prototype.toString = function () {\n  // NOTE: Using Object.keys here as this.edges is very likely\n  // to enter 'hash-mode' with many keys being added\n  //\n  // avoiding a for-in loop here as it leads to the function\n  // being de-optimised (at least in V8). From some simple\n  // benchmarks the performance is comparable, but allowing\n  // V8 to optimize may mean easy performance wins in the future.\n\n  if (this._str) {\n    return this._str\n  }\n\n  var str = this.final ? '1' : '0',\n      labels = Object.keys(this.edges).sort(),\n      len = labels.length\n\n  for (var i = 0; i < len; i++) {\n    var label = labels[i],\n        node = this.edges[label]\n\n    str = str + label + node.id\n  }\n\n  return str\n}\n\n/**\n * Returns a new TokenSet that is the intersection of\n * this TokenSet and the passed TokenSet.\n *\n * This intersection will take into account any wildcards\n * contained within the TokenSet.\n *\n * @param {lunr.TokenSet} b - An other TokenSet to intersect with.\n * @returns {lunr.TokenSet}\n */\nlunr.TokenSet.prototype.intersect = function (b) {\n  var output = new lunr.TokenSet,\n      frame = undefined\n\n  var stack = [{\n    qNode: b,\n    output: output,\n    node: this\n  }]\n\n  while (stack.length) {\n    frame = stack.pop()\n\n    // NOTE: As with the #toString method, we are using\n    // Object.keys and a for loop instead of a for-in loop\n    // as both of these objects enter 'hash' mode, causing\n    // the function to be de-optimised in V8\n    var qEdges = Object.keys(frame.qNode.edges),\n        qLen = qEdges.length,\n        nEdges = Object.keys(frame.node.edges),\n        nLen = nEdges.length\n\n    for (var q = 0; q < qLen; q++) {\n      var qEdge = qEdges[q]\n\n      for (var n = 0; n < nLen; n++) {\n        var nEdge = nEdges[n]\n\n        if (nEdge == qEdge || qEdge == '*') {\n          var node = frame.node.edges[nEdge],\n              qNode = frame.qNode.edges[qEdge],\n              final = node.final && qNode.final,\n              next = undefined\n\n          if (nEdge in frame.output.edges) {\n            // an edge already exists for this character\n            // no need to create a new node, just set the finality\n            // bit unless this node is already final\n            next = frame.output.edges[nEdge]\n            next.final = next.final || final\n\n          } else {\n            // no edge exists yet, must create one\n            // set the finality bit and insert it\n            // into the output\n            next = new lunr.TokenSet\n            next.final = final\n            frame.output.edges[nEdge] = next\n          }\n\n          stack.push({\n            qNode: qNode,\n            output: next,\n            node: node\n          })\n        }\n      }\n    }\n  }\n\n  return output\n}\nlunr.TokenSet.Builder = function () {\n  this.previousWord = \"\"\n  this.root = new lunr.TokenSet\n  this.uncheckedNodes = []\n  this.minimizedNodes = {}\n}\n\nlunr.TokenSet.Builder.prototype.insert = function (word) {\n  var node,\n      commonPrefix = 0\n\n  if (word < this.previousWord) {\n    throw new Error (\"Out of order word insertion\")\n  }\n\n  for (var i = 0; i < word.length && i < this.previousWord.length; i++) {\n    if (word[i] != this.previousWord[i]) break\n    commonPrefix++\n  }\n\n  this.minimize(commonPrefix)\n\n  if (this.uncheckedNodes.length == 0) {\n    node = this.root\n  } else {\n    node = this.uncheckedNodes[this.uncheckedNodes.length - 1].child\n  }\n\n  for (var i = commonPrefix; i < word.length; i++) {\n    var nextNode = new lunr.TokenSet,\n        char = word[i]\n\n    node.edges[char] = nextNode\n\n    this.uncheckedNodes.push({\n      parent: node,\n      char: char,\n      child: nextNode\n    })\n\n    node = nextNode\n  }\n\n  node.final = true\n  this.previousWord = word\n}\n\nlunr.TokenSet.Builder.prototype.finish = function () {\n  this.minimize(0)\n}\n\nlunr.TokenSet.Builder.prototype.minimize = function (downTo) {\n  for (var i = this.uncheckedNodes.length - 1; i >= downTo; i--) {\n    var node = this.uncheckedNodes[i],\n        childKey = node.child.toString()\n\n    if (childKey in this.minimizedNodes) {\n      node.parent.edges[node.char] = this.minimizedNodes[childKey]\n    } else {\n      // Cache the key for this node since\n      // we know it can't change anymore\n      node.child._str = childKey\n\n      this.minimizedNodes[childKey] = node.child\n    }\n\n    this.uncheckedNodes.pop()\n  }\n}\n/*!\n * lunr.Index\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * An index contains the built index of all documents and provides a query interface\n * to the index.\n *\n * Usually instances of lunr.Index will not be created using this constructor, instead\n * lunr.Builder should be used to construct new indexes, or lunr.Index.load should be\n * used to load previously built and serialized indexes.\n *\n * @constructor\n * @param {Object} attrs - The attributes of the built search index.\n * @param {Object} attrs.invertedIndex - An index of term/field to document reference.\n * @param {Object<string, lunr.Vector>} attrs.fieldVectors - Field vectors\n * @param {lunr.TokenSet} attrs.tokenSet - An set of all corpus tokens.\n * @param {string[]} attrs.fields - The names of indexed document fields.\n * @param {lunr.Pipeline} attrs.pipeline - The pipeline to use for search terms.\n */\nlunr.Index = function (attrs) {\n  this.invertedIndex = attrs.invertedIndex\n  this.fieldVectors = attrs.fieldVectors\n  this.tokenSet = attrs.tokenSet\n  this.fields = attrs.fields\n  this.pipeline = attrs.pipeline\n}\n\n/**\n * A result contains details of a document matching a search query.\n * @typedef {Object} lunr.Index~Result\n * @property {string} ref - The reference of the document this result represents.\n * @property {number} score - A number between 0 and 1 representing how similar this document is to the query.\n * @property {lunr.MatchData} matchData - Contains metadata about this match including which term(s) caused the match.\n */\n\n/**\n * Although lunr provides the ability to create queries using lunr.Query, it also provides a simple\n * query language which itself is parsed into an instance of lunr.Query.\n *\n * For programmatically building queries it is advised to directly use lunr.Query, the query language\n * is best used for human entered text rather than program generated text.\n *\n * At its simplest queries can just be a single term, e.g. `hello`, multiple terms are also supported\n * and will be combined with OR, e.g `hello world` will match documents that contain either 'hello'\n * or 'world', though those that contain both will rank higher in the results.\n *\n * Wildcards can be included in terms to match one or more unspecified characters, these wildcards can\n * be inserted anywhere within the term, and more than one wildcard can exist in a single term. Adding\n * wildcards will increase the number of documents that will be found but can also have a negative\n * impact on query performance, especially with wildcards at the beginning of a term.\n *\n * Terms can be restricted to specific fields, e.g. `title:hello`, only documents with the term\n * hello in the title field will match this query. Using a field not present in the index will lead\n * to an error being thrown.\n *\n * Modifiers can also be added to terms, lunr supports edit distance and boost modifiers on terms. A term\n * boost will make documents matching that term score higher, e.g. `foo^5`. Edit distance is also supported\n * to provide fuzzy matching, e.g. 'hello~2' will match documents with hello with an edit distance of 2.\n * Avoid large values for edit distance to improve query performance.\n *\n * Each term also supports a presence modifier. By default a term's presence in document is optional, however\n * this can be changed to either required or prohibited. For a term's presence to be required in a document the\n * term should be prefixed with a '+', e.g. `+foo bar` is a search for documents that must contain 'foo' and\n * optionally contain 'bar'. Conversely a leading '-' sets the terms presence to prohibited, i.e. it must not\n * appear in a document, e.g. `-foo bar` is a search for documents that do not contain 'foo' but may contain 'bar'.\n *\n * To escape special characters the backslash character '\\' can be used, this allows searches to include\n * characters that would normally be considered modifiers, e.g. `foo\\~2` will search for a term \"foo~2\" instead\n * of attempting to apply a boost of 2 to the search term \"foo\".\n *\n * @typedef {string} lunr.Index~QueryString\n * @example <caption>Simple single term query</caption>\n * hello\n * @example <caption>Multiple term query</caption>\n * hello world\n * @example <caption>term scoped to a field</caption>\n * title:hello\n * @example <caption>term with a boost of 10</caption>\n * hello^10\n * @example <caption>term with an edit distance of 2</caption>\n * hello~2\n * @example <caption>terms with presence modifiers</caption>\n * -foo +bar baz\n */\n\n/**\n * Performs a search against the index using lunr query syntax.\n *\n * Results will be returned sorted by their score, the most relevant results\n * will be returned first.  For details on how the score is calculated, please see\n * the {@link https://lunrjs.com/guides/searching.html#scoring|guide}.\n *\n * For more programmatic querying use lunr.Index#query.\n *\n * @param {lunr.Index~QueryString} queryString - A string containing a lunr query.\n * @throws {lunr.QueryParseError} If the passed query string cannot be parsed.\n * @returns {lunr.Index~Result[]}\n */\nlunr.Index.prototype.search = function (queryString) {\n  return this.query(function (query) {\n    var parser = new lunr.QueryParser(queryString, query)\n    parser.parse()\n  })\n}\n\n/**\n * A query builder callback provides a query object to be used to express\n * the query to perform on the index.\n *\n * @callback lunr.Index~queryBuilder\n * @param {lunr.Query} query - The query object to build up.\n * @this lunr.Query\n */\n\n/**\n * Performs a query against the index using the yielded lunr.Query object.\n *\n * If performing programmatic queries against the index, this method is preferred\n * over lunr.Index#search so as to avoid the additional query parsing overhead.\n *\n * A query object is yielded to the supplied function which should be used to\n * express the query to be run against the index.\n *\n * Note that although this function takes a callback parameter it is _not_ an\n * asynchronous operation, the callback is just yielded a query object to be\n * customized.\n *\n * @param {lunr.Index~queryBuilder} fn - A function that is used to build the query.\n * @returns {lunr.Index~Result[]}\n */\nlunr.Index.prototype.query = function (fn) {\n  // for each query clause\n  // * process terms\n  // * expand terms from token set\n  // * find matching documents and metadata\n  // * get document vectors\n  // * score documents\n\n  var query = new lunr.Query(this.fields),\n      matchingFields = Object.create(null),\n      queryVectors = Object.create(null),\n      termFieldCache = Object.create(null),\n      requiredMatches = Object.create(null),\n      prohibitedMatches = Object.create(null)\n\n  /*\n   * To support field level boosts a query vector is created per\n   * field. An empty vector is eagerly created to support negated\n   * queries.\n   */\n  for (var i = 0; i < this.fields.length; i++) {\n    queryVectors[this.fields[i]] = new lunr.Vector\n  }\n\n  fn.call(query, query)\n\n  for (var i = 0; i < query.clauses.length; i++) {\n    /*\n     * Unless the pipeline has been disabled for this term, which is\n     * the case for terms with wildcards, we need to pass the clause\n     * term through the search pipeline. A pipeline returns an array\n     * of processed terms. Pipeline functions may expand the passed\n     * term, which means we may end up performing multiple index lookups\n     * for a single query term.\n     */\n    var clause = query.clauses[i],\n        terms = null,\n        clauseMatches = lunr.Set.empty\n\n    if (clause.usePipeline) {\n      terms = this.pipeline.runString(clause.term, {\n        fields: clause.fields\n      })\n    } else {\n      terms = [clause.term]\n    }\n\n    for (var m = 0; m < terms.length; m++) {\n      var term = terms[m]\n\n      /*\n       * Each term returned from the pipeline needs to use the same query\n       * clause object, e.g. the same boost and or edit distance. The\n       * simplest way to do this is to re-use the clause object but mutate\n       * its term property.\n       */\n      clause.term = term\n\n      /*\n       * From the term in the clause we create a token set which will then\n       * be used to intersect the indexes token set to get a list of terms\n       * to lookup in the inverted index\n       */\n      var termTokenSet = lunr.TokenSet.fromClause(clause),\n          expandedTerms = this.tokenSet.intersect(termTokenSet).toArray()\n\n      /*\n       * If a term marked as required does not exist in the tokenSet it is\n       * impossible for the search to return any matches. We set all the field\n       * scoped required matches set to empty and stop examining any further\n       * clauses.\n       */\n      if (expandedTerms.length === 0 && clause.presence === lunr.Query.presence.REQUIRED) {\n        for (var k = 0; k < clause.fields.length; k++) {\n          var field = clause.fields[k]\n          requiredMatches[field] = lunr.Set.empty\n        }\n\n        break\n      }\n\n      for (var j = 0; j < expandedTerms.length; j++) {\n        /*\n         * For each term get the posting and termIndex, this is required for\n         * building the query vector.\n         */\n        var expandedTerm = expandedTerms[j],\n            posting = this.invertedIndex[expandedTerm],\n            termIndex = posting._index\n\n        for (var k = 0; k < clause.fields.length; k++) {\n          /*\n           * For each field that this query term is scoped by (by default\n           * all fields are in scope) we need to get all the document refs\n           * that have this term in that field.\n           *\n           * The posting is the entry in the invertedIndex for the matching\n           * term from above.\n           */\n          var field = clause.fields[k],\n              fieldPosting = posting[field],\n              matchingDocumentRefs = Object.keys(fieldPosting),\n              termField = expandedTerm + \"/\" + field,\n              matchingDocumentsSet = new lunr.Set(matchingDocumentRefs)\n\n          /*\n           * if the presence of this term is required ensure that the matching\n           * documents are added to the set of required matches for this clause.\n           *\n           */\n          if (clause.presence == lunr.Query.presence.REQUIRED) {\n            clauseMatches = clauseMatches.union(matchingDocumentsSet)\n\n            if (requiredMatches[field] === undefined) {\n              requiredMatches[field] = lunr.Set.complete\n            }\n          }\n\n          /*\n           * if the presence of this term is prohibited ensure that the matching\n           * documents are added to the set of prohibited matches for this field,\n           * creating that set if it does not yet exist.\n           */\n          if (clause.presence == lunr.Query.presence.PROHIBITED) {\n            if (prohibitedMatches[field] === undefined) {\n              prohibitedMatches[field] = lunr.Set.empty\n            }\n\n            prohibitedMatches[field] = prohibitedMatches[field].union(matchingDocumentsSet)\n\n            /*\n             * Prohibited matches should not be part of the query vector used for\n             * similarity scoring and no metadata should be extracted so we continue\n             * to the next field\n             */\n            continue\n          }\n\n          /*\n           * The query field vector is populated using the termIndex found for\n           * the term and a unit value with the appropriate boost applied.\n           * Using upsert because there could already be an entry in the vector\n           * for the term we are working with. In that case we just add the scores\n           * together.\n           */\n          queryVectors[field].upsert(termIndex, clause.boost, function (a, b) { return a + b })\n\n          /**\n           * If we've already seen this term, field combo then we've already collected\n           * the matching documents and metadata, no need to go through all that again\n           */\n          if (termFieldCache[termField]) {\n            continue\n          }\n\n          for (var l = 0; l < matchingDocumentRefs.length; l++) {\n            /*\n             * All metadata for this term/field/document triple\n             * are then extracted and collected into an instance\n             * of lunr.MatchData ready to be returned in the query\n             * results\n             */\n            var matchingDocumentRef = matchingDocumentRefs[l],\n                matchingFieldRef = new lunr.FieldRef (matchingDocumentRef, field),\n                metadata = fieldPosting[matchingDocumentRef],\n                fieldMatch\n\n            if ((fieldMatch = matchingFields[matchingFieldRef]) === undefined) {\n              matchingFields[matchingFieldRef] = new lunr.MatchData (expandedTerm, field, metadata)\n            } else {\n              fieldMatch.add(expandedTerm, field, metadata)\n            }\n\n          }\n\n          termFieldCache[termField] = true\n        }\n      }\n    }\n\n    /**\n     * If the presence was required we need to update the requiredMatches field sets.\n     * We do this after all fields for the term have collected their matches because\n     * the clause terms presence is required in _any_ of the fields not _all_ of the\n     * fields.\n     */\n    if (clause.presence === lunr.Query.presence.REQUIRED) {\n      for (var k = 0; k < clause.fields.length; k++) {\n        var field = clause.fields[k]\n        requiredMatches[field] = requiredMatches[field].intersect(clauseMatches)\n      }\n    }\n  }\n\n  /**\n   * Need to combine the field scoped required and prohibited\n   * matching documents into a global set of required and prohibited\n   * matches\n   */\n  var allRequiredMatches = lunr.Set.complete,\n      allProhibitedMatches = lunr.Set.empty\n\n  for (var i = 0; i < this.fields.length; i++) {\n    var field = this.fields[i]\n\n    if (requiredMatches[field]) {\n      allRequiredMatches = allRequiredMatches.intersect(requiredMatches[field])\n    }\n\n    if (prohibitedMatches[field]) {\n      allProhibitedMatches = allProhibitedMatches.union(prohibitedMatches[field])\n    }\n  }\n\n  var matchingFieldRefs = Object.keys(matchingFields),\n      results = [],\n      matches = Object.create(null)\n\n  /*\n   * If the query is negated (contains only prohibited terms)\n   * we need to get _all_ fieldRefs currently existing in the\n   * index. This is only done when we know that the query is\n   * entirely prohibited terms to avoid any cost of getting all\n   * fieldRefs unnecessarily.\n   *\n   * Additionally, blank MatchData must be created to correctly\n   * populate the results.\n   */\n  if (query.isNegated()) {\n    matchingFieldRefs = Object.keys(this.fieldVectors)\n\n    for (var i = 0; i < matchingFieldRefs.length; i++) {\n      var matchingFieldRef = matchingFieldRefs[i]\n      var fieldRef = lunr.FieldRef.fromString(matchingFieldRef)\n      matchingFields[matchingFieldRef] = new lunr.MatchData\n    }\n  }\n\n  for (var i = 0; i < matchingFieldRefs.length; i++) {\n    /*\n     * Currently we have document fields that match the query, but we\n     * need to return documents. The matchData and scores are combined\n     * from multiple fields belonging to the same document.\n     *\n     * Scores are calculated by field, using the query vectors created\n     * above, and combined into a final document score using addition.\n     */\n    var fieldRef = lunr.FieldRef.fromString(matchingFieldRefs[i]),\n        docRef = fieldRef.docRef\n\n    if (!allRequiredMatches.contains(docRef)) {\n      continue\n    }\n\n    if (allProhibitedMatches.contains(docRef)) {\n      continue\n    }\n\n    var fieldVector = this.fieldVectors[fieldRef],\n        score = queryVectors[fieldRef.fieldName].similarity(fieldVector),\n        docMatch\n\n    if ((docMatch = matches[docRef]) !== undefined) {\n      docMatch.score += score\n      docMatch.matchData.combine(matchingFields[fieldRef])\n    } else {\n      var match = {\n        ref: docRef,\n        score: score,\n        matchData: matchingFields[fieldRef]\n      }\n      matches[docRef] = match\n      results.push(match)\n    }\n  }\n\n  /*\n   * Sort the results objects by score, highest first.\n   */\n  return results.sort(function (a, b) {\n    return b.score - a.score\n  })\n}\n\n/**\n * Prepares the index for JSON serialization.\n *\n * The schema for this JSON blob will be described in a\n * separate JSON schema file.\n *\n * @returns {Object}\n */\nlunr.Index.prototype.toJSON = function () {\n  var invertedIndex = Object.keys(this.invertedIndex)\n    .sort()\n    .map(function (term) {\n      return [term, this.invertedIndex[term]]\n    }, this)\n\n  var fieldVectors = Object.keys(this.fieldVectors)\n    .map(function (ref) {\n      return [ref, this.fieldVectors[ref].toJSON()]\n    }, this)\n\n  return {\n    version: lunr.version,\n    fields: this.fields,\n    fieldVectors: fieldVectors,\n    invertedIndex: invertedIndex,\n    pipeline: this.pipeline.toJSON()\n  }\n}\n\n/**\n * Loads a previously serialized lunr.Index\n *\n * @param {Object} serializedIndex - A previously serialized lunr.Index\n * @returns {lunr.Index}\n */\nlunr.Index.load = function (serializedIndex) {\n  var attrs = {},\n      fieldVectors = {},\n      serializedVectors = serializedIndex.fieldVectors,\n      invertedIndex = Object.create(null),\n      serializedInvertedIndex = serializedIndex.invertedIndex,\n      tokenSetBuilder = new lunr.TokenSet.Builder,\n      pipeline = lunr.Pipeline.load(serializedIndex.pipeline)\n\n  if (serializedIndex.version != lunr.version) {\n    lunr.utils.warn(\"Version mismatch when loading serialised index. Current version of lunr '\" + lunr.version + \"' does not match serialized index '\" + serializedIndex.version + \"'\")\n  }\n\n  for (var i = 0; i < serializedVectors.length; i++) {\n    var tuple = serializedVectors[i],\n        ref = tuple[0],\n        elements = tuple[1]\n\n    fieldVectors[ref] = new lunr.Vector(elements)\n  }\n\n  for (var i = 0; i < serializedInvertedIndex.length; i++) {\n    var tuple = serializedInvertedIndex[i],\n        term = tuple[0],\n        posting = tuple[1]\n\n    tokenSetBuilder.insert(term)\n    invertedIndex[term] = posting\n  }\n\n  tokenSetBuilder.finish()\n\n  attrs.fields = serializedIndex.fields\n\n  attrs.fieldVectors = fieldVectors\n  attrs.invertedIndex = invertedIndex\n  attrs.tokenSet = tokenSetBuilder.root\n  attrs.pipeline = pipeline\n\n  return new lunr.Index(attrs)\n}\n/*!\n * lunr.Builder\n * Copyright (C) 2020 Oliver Nightingale\n */\n\n/**\n * lunr.Builder performs indexing on a set of documents and\n * returns instances of lunr.Index ready for querying.\n *\n * All configuration of the index is done via the builder, the\n * fields to index, the document reference, the text processing\n * pipeline and document scoring parameters are all set on the\n * builder before indexing.\n *\n * @constructor\n * @property {string} _ref - Internal reference to the document reference field.\n * @property {string[]} _fields - Internal reference to the document fields to index.\n * @property {object} invertedIndex - The inverted index maps terms to document fields.\n * @property {object} documentTermFrequencies - Keeps track of document term frequencies.\n * @property {object} documentLengths - Keeps track of the length of documents added to the index.\n * @property {lunr.tokenizer} tokenizer - Function for splitting strings into tokens for indexing.\n * @property {lunr.Pipeline} pipeline - The pipeline performs text processing on tokens before indexing.\n * @property {lunr.Pipeline} searchPipeline - A pipeline for processing search terms before querying the index.\n * @property {number} documentCount - Keeps track of the total number of documents indexed.\n * @property {number} _b - A parameter to control field length normalization, setting this to 0 disabled normalization, 1 fully normalizes field lengths, the default value is 0.75.\n * @property {number} _k1 - A parameter to control how quickly an increase in term frequency results in term frequency saturation, the default value is 1.2.\n * @property {number} termIndex - A counter incremented for each unique term, used to identify a terms position in the vector space.\n * @property {array} metadataWhitelist - A list of metadata keys that have been whitelisted for entry in the index.\n */\nlunr.Builder = function () {\n  this._ref = \"id\"\n  this._fields = Object.create(null)\n  this._documents = Object.create(null)\n  this.invertedIndex = Object.create(null)\n  this.fieldTermFrequencies = {}\n  this.fieldLengths = {}\n  this.tokenizer = lunr.tokenizer\n  this.pipeline = new lunr.Pipeline\n  this.searchPipeline = new lunr.Pipeline\n  this.documentCount = 0\n  this._b = 0.75\n  this._k1 = 1.2\n  this.termIndex = 0\n  this.metadataWhitelist = []\n}\n\n/**\n * Sets the document field used as the document reference. Every document must have this field.\n * The type of this field in the document should be a string, if it is not a string it will be\n * coerced into a string by calling toString.\n *\n * The default ref is 'id'.\n *\n * The ref should _not_ be changed during indexing, it should be set before any documents are\n * added to the index. Changing it during indexing can lead to inconsistent results.\n *\n * @param {string} ref - The name of the reference field in the document.\n */\nlunr.Builder.prototype.ref = function (ref) {\n  this._ref = ref\n}\n\n/**\n * A function that is used to extract a field from a document.\n *\n * Lunr expects a field to be at the top level of a document, if however the field\n * is deeply nested within a document an extractor function can be used to extract\n * the right field for indexing.\n *\n * @callback fieldExtractor\n * @param {object} doc - The document being added to the index.\n * @returns {?(string|object|object[])} obj - The object that will be indexed for this field.\n * @example <caption>Extracting a nested field</caption>\n * function (doc) { return doc.nested.field }\n */\n\n/**\n * Adds a field to the list of document fields that will be indexed. Every document being\n * indexed should have this field. Null values for this field in indexed documents will\n * not cause errors but will limit the chance of that document being retrieved by searches.\n *\n * All fields should be added before adding documents to the index. Adding fields after\n * a document has been indexed will have no effect on already indexed documents.\n *\n * Fields can be boosted at build time. This allows terms within that field to have more\n * importance when ranking search results. Use a field boost to specify that matches within\n * one field are more important than other fields.\n *\n * @param {string} fieldName - The name of a field to index in all documents.\n * @param {object} attributes - Optional attributes associated with this field.\n * @param {number} [attributes.boost=1] - Boost applied to all terms within this field.\n * @param {fieldExtractor} [attributes.extractor] - Function to extract a field from a document.\n * @throws {RangeError} fieldName cannot contain unsupported characters '/'\n */\nlunr.Builder.prototype.field = function (fieldName, attributes) {\n  if (/\\//.test(fieldName)) {\n    throw new RangeError (\"Field '\" + fieldName + \"' contains illegal character '/'\")\n  }\n\n  this._fields[fieldName] = attributes || {}\n}\n\n/**\n * A parameter to tune the amount of field length normalisation that is applied when\n * calculating relevance scores. A value of 0 will completely disable any normalisation\n * and a value of 1 will fully normalise field lengths. The default is 0.75. Values of b\n * will be clamped to the range 0 - 1.\n *\n * @param {number} number - The value to set for this tuning parameter.\n */\nlunr.Builder.prototype.b = function (number) {\n  if (number < 0) {\n    this._b = 0\n  } else if (number > 1) {\n    this._b = 1\n  } else {\n    this._b = number\n  }\n}\n\n/**\n * A parameter that controls the speed at which a rise in term frequency results in term\n * frequency saturation. The default value is 1.2. Setting this to a higher value will give\n * slower saturation levels, a lower value will result in quicker saturation.\n *\n * @param {number} number - The value to set for this tuning parameter.\n */\nlunr.Builder.prototype.k1 = function (number) {\n  this._k1 = number\n}\n\n/**\n * Adds a document to the index.\n *\n * Before adding fields to the index the index should have been fully setup, with the document\n * ref and all fields to index already having been specified.\n *\n * The document must have a field name as specified by the ref (by default this is 'id') and\n * it should have all fields defined for indexing, though null or undefined values will not\n * cause errors.\n *\n * Entire documents can be boosted at build time. Applying a boost to a document indicates that\n * this document should rank higher in search results than other documents.\n *\n * @param {object} doc - The document to add to the index.\n * @param {object} attributes - Optional attributes associated with this document.\n * @param {number} [attributes.boost=1] - Boost applied to all terms within this document.\n */\nlunr.Builder.prototype.add = function (doc, attributes) {\n  var docRef = doc[this._ref],\n      fields = Object.keys(this._fields)\n\n  this._documents[docRef] = attributes || {}\n  this.documentCount += 1\n\n  for (var i = 0; i < fields.length; i++) {\n    var fieldName = fields[i],\n        extractor = this._fields[fieldName].extractor,\n        field = extractor ? extractor(doc) : doc[fieldName],\n        tokens = this.tokenizer(field, {\n          fields: [fieldName]\n        }),\n        terms = this.pipeline.run(tokens),\n        fieldRef = new lunr.FieldRef (docRef, fieldName),\n        fieldTerms = Object.create(null)\n\n    this.fieldTermFrequencies[fieldRef] = fieldTerms\n    this.fieldLengths[fieldRef] = 0\n\n    // store the length of this field for this document\n    this.fieldLengths[fieldRef] += terms.length\n\n    // calculate term frequencies for this field\n    for (var j = 0; j < terms.length; j++) {\n      var term = terms[j]\n\n      if (fieldTerms[term] == undefined) {\n        fieldTerms[term] = 0\n      }\n\n      fieldTerms[term] += 1\n\n      // add to inverted index\n      // create an initial posting if one doesn't exist\n      if (this.invertedIndex[term] == undefined) {\n        var posting = Object.create(null)\n        posting[\"_index\"] = this.termIndex\n        this.termIndex += 1\n\n        for (var k = 0; k < fields.length; k++) {\n          posting[fields[k]] = Object.create(null)\n        }\n\n        this.invertedIndex[term] = posting\n      }\n\n      // add an entry for this term/fieldName/docRef to the invertedIndex\n      if (this.invertedIndex[term][fieldName][docRef] == undefined) {\n        this.invertedIndex[term][fieldName][docRef] = Object.create(null)\n      }\n\n      // store all whitelisted metadata about this token in the\n      // inverted index\n      for (var l = 0; l < this.metadataWhitelist.length; l++) {\n        var metadataKey = this.metadataWhitelist[l],\n            metadata = term.metadata[metadataKey]\n\n        if (this.invertedIndex[term][fieldName][docRef][metadataKey] == undefined) {\n          this.invertedIndex[term][fieldName][docRef][metadataKey] = []\n        }\n\n        this.invertedIndex[term][fieldName][docRef][metadataKey].push(metadata)\n      }\n    }\n\n  }\n}\n\n/**\n * Calculates the average document length for this index\n *\n * @private\n */\nlunr.Builder.prototype.calculateAverageFieldLengths = function () {\n\n  var fieldRefs = Object.keys(this.fieldLengths),\n      numberOfFields = fieldRefs.length,\n      accumulator = {},\n      documentsWithField = {}\n\n  for (var i = 0; i < numberOfFields; i++) {\n    var fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),\n        field = fieldRef.fieldName\n\n    documentsWithField[field] || (documentsWithField[field] = 0)\n    documentsWithField[field] += 1\n\n    accumulator[field] || (accumulator[field] = 0)\n    accumulator[field] += this.fieldLengths[fieldRef]\n  }\n\n  var fields = Object.keys(this._fields)\n\n  for (var i = 0; i < fields.length; i++) {\n    var fieldName = fields[i]\n    accumulator[fieldName] = accumulator[fieldName] / documentsWithField[fieldName]\n  }\n\n  this.averageFieldLength = accumulator\n}\n\n/**\n * Builds a vector space model of every document using lunr.Vector\n *\n * @private\n */\nlunr.Builder.prototype.createFieldVectors = function () {\n  var fieldVectors = {},\n      fieldRefs = Object.keys(this.fieldTermFrequencies),\n      fieldRefsLength = fieldRefs.length,\n      termIdfCache = Object.create(null)\n\n  for (var i = 0; i < fieldRefsLength; i++) {\n    var fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),\n        fieldName = fieldRef.fieldName,\n        fieldLength = this.fieldLengths[fieldRef],\n        fieldVector = new lunr.Vector,\n        termFrequencies = this.fieldTermFrequencies[fieldRef],\n        terms = Object.keys(termFrequencies),\n        termsLength = terms.length\n\n\n    var fieldBoost = this._fields[fieldName].boost || 1,\n        docBoost = this._documents[fieldRef.docRef].boost || 1\n\n    for (var j = 0; j < termsLength; j++) {\n      var term = terms[j],\n          tf = termFrequencies[term],\n          termIndex = this.invertedIndex[term]._index,\n          idf, score, scoreWithPrecision\n\n      if (termIdfCache[term] === undefined) {\n        idf = lunr.idf(this.invertedIndex[term], this.documentCount)\n        termIdfCache[term] = idf\n      } else {\n        idf = termIdfCache[term]\n      }\n\n      score = idf * ((this._k1 + 1) * tf) / (this._k1 * (1 - this._b + this._b * (fieldLength / this.averageFieldLength[fieldName])) + tf)\n      score *= fieldBoost\n      score *= docBoost\n      scoreWithPrecision = Math.round(score * 1000) / 1000\n      // Converts 1.23456789 to 1.234.\n      // Reducing the precision so that the vectors take up less\n      // space when serialised. Doing it now so that they behave\n      // the same before and after serialisation. Also, this is\n      // the fastest approach to reducing a number's precision in\n      // JavaScript.\n\n      fieldVector.insert(termIndex, scoreWithPrecision)\n    }\n\n    fieldVectors[fieldRef] = fieldVector\n  }\n\n  this.fieldVectors = fieldVectors\n}\n\n/**\n * Creates a token set of all tokens in the index using lunr.TokenSet\n *\n * @private\n */\nlunr.Builder.prototype.createTokenSet = function () {\n  this.tokenSet = lunr.TokenSet.fromArray(\n    Object.keys(this.invertedIndex).sort()\n  )\n}\n\n/**\n * Builds the index, creating an instance of lunr.Index.\n *\n * This completes the indexing process and should only be called\n * once all documents have been added to the index.\n *\n * @returns {lunr.Index}\n */\nlunr.Builder.prototype.build = function () {\n  this.calculateAverageFieldLengths()\n  this.createFieldVectors()\n  this.createTokenSet()\n\n  return new lunr.Index({\n    invertedIndex: this.invertedIndex,\n    fieldVectors: this.fieldVectors,\n    tokenSet: this.tokenSet,\n    fields: Object.keys(this._fields),\n    pipeline: this.searchPipeline\n  })\n}\n\n/**\n * Applies a plugin to the index builder.\n *\n * A plugin is a function that is called with the index builder as its context.\n * Plugins can be used to customise or extend the behaviour of the index\n * in some way. A plugin is just a function, that encapsulated the custom\n * behaviour that should be applied when building the index.\n *\n * The plugin function will be called with the index builder as its argument, additional\n * arguments can also be passed when calling use. The function will be called\n * with the index builder as its context.\n *\n * @param {Function} plugin The plugin to apply.\n */\nlunr.Builder.prototype.use = function (fn) {\n  var args = Array.prototype.slice.call(arguments, 1)\n  args.unshift(this)\n  fn.apply(this, args)\n}\n/**\n * Contains and collects metadata about a matching document.\n * A single instance of lunr.MatchData is returned as part of every\n * lunr.Index~Result.\n *\n * @constructor\n * @param {string} term - The term this match data is associated with\n * @param {string} field - The field in which the term was found\n * @param {object} metadata - The metadata recorded about this term in this field\n * @property {object} metadata - A cloned collection of metadata associated with this document.\n * @see {@link lunr.Index~Result}\n */\nlunr.MatchData = function (term, field, metadata) {\n  var clonedMetadata = Object.create(null),\n      metadataKeys = Object.keys(metadata || {})\n\n  // Cloning the metadata to prevent the original\n  // being mutated during match data combination.\n  // Metadata is kept in an array within the inverted\n  // index so cloning the data can be done with\n  // Array#slice\n  for (var i = 0; i < metadataKeys.length; i++) {\n    var key = metadataKeys[i]\n    clonedMetadata[key] = metadata[key].slice()\n  }\n\n  this.metadata = Object.create(null)\n\n  if (term !== undefined) {\n    this.metadata[term] = Object.create(null)\n    this.metadata[term][field] = clonedMetadata\n  }\n}\n\n/**\n * An instance of lunr.MatchData will be created for every term that matches a\n * document. However only one instance is required in a lunr.Index~Result. This\n * method combines metadata from another instance of lunr.MatchData with this\n * objects metadata.\n *\n * @param {lunr.MatchData} otherMatchData - Another instance of match data to merge with this one.\n * @see {@link lunr.Index~Result}\n */\nlunr.MatchData.prototype.combine = function (otherMatchData) {\n  var terms = Object.keys(otherMatchData.metadata)\n\n  for (var i = 0; i < terms.length; i++) {\n    var term = terms[i],\n        fields = Object.keys(otherMatchData.metadata[term])\n\n    if (this.metadata[term] == undefined) {\n      this.metadata[term] = Object.create(null)\n    }\n\n    for (var j = 0; j < fields.length; j++) {\n      var field = fields[j],\n          keys = Object.keys(otherMatchData.metadata[term][field])\n\n      if (this.metadata[term][field] == undefined) {\n        this.metadata[term][field] = Object.create(null)\n      }\n\n      for (var k = 0; k < keys.length; k++) {\n        var key = keys[k]\n\n        if (this.metadata[term][field][key] == undefined) {\n          this.metadata[term][field][key] = otherMatchData.metadata[term][field][key]\n        } else {\n          this.metadata[term][field][key] = this.metadata[term][field][key].concat(otherMatchData.metadata[term][field][key])\n        }\n\n      }\n    }\n  }\n}\n\n/**\n * Add metadata for a term/field pair to this instance of match data.\n *\n * @param {string} term - The term this match data is associated with\n * @param {string} field - The field in which the term was found\n * @param {object} metadata - The metadata recorded about this term in this field\n */\nlunr.MatchData.prototype.add = function (term, field, metadata) {\n  if (!(term in this.metadata)) {\n    this.metadata[term] = Object.create(null)\n    this.metadata[term][field] = metadata\n    return\n  }\n\n  if (!(field in this.metadata[term])) {\n    this.metadata[term][field] = metadata\n    return\n  }\n\n  var metadataKeys = Object.keys(metadata)\n\n  for (var i = 0; i < metadataKeys.length; i++) {\n    var key = metadataKeys[i]\n\n    if (key in this.metadata[term][field]) {\n      this.metadata[term][field][key] = this.metadata[term][field][key].concat(metadata[key])\n    } else {\n      this.metadata[term][field][key] = metadata[key]\n    }\n  }\n}\n/**\n * A lunr.Query provides a programmatic way of defining queries to be performed\n * against a {@link lunr.Index}.\n *\n * Prefer constructing a lunr.Query using the {@link lunr.Index#query} method\n * so the query object is pre-initialized with the right index fields.\n *\n * @constructor\n * @property {lunr.Query~Clause[]} clauses - An array of query clauses.\n * @property {string[]} allFields - An array of all available fields in a lunr.Index.\n */\nlunr.Query = function (allFields) {\n  this.clauses = []\n  this.allFields = allFields\n}\n\n/**\n * Constants for indicating what kind of automatic wildcard insertion will be used when constructing a query clause.\n *\n * This allows wildcards to be added to the beginning and end of a term without having to manually do any string\n * concatenation.\n *\n * The wildcard constants can be bitwise combined to select both leading and trailing wildcards.\n *\n * @constant\n * @default\n * @property {number} wildcard.NONE - The term will have no wildcards inserted, this is the default behaviour\n * @property {number} wildcard.LEADING - Prepend the term with a wildcard, unless a leading wildcard already exists\n * @property {number} wildcard.TRAILING - Append a wildcard to the term, unless a trailing wildcard already exists\n * @see lunr.Query~Clause\n * @see lunr.Query#clause\n * @see lunr.Query#term\n * @example <caption>query term with trailing wildcard</caption>\n * query.term('foo', { wildcard: lunr.Query.wildcard.TRAILING })\n * @example <caption>query term with leading and trailing wildcard</caption>\n * query.term('foo', {\n *   wildcard: lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING\n * })\n */\n\nlunr.Query.wildcard = new String (\"*\")\nlunr.Query.wildcard.NONE = 0\nlunr.Query.wildcard.LEADING = 1\nlunr.Query.wildcard.TRAILING = 2\n\n/**\n * Constants for indicating what kind of presence a term must have in matching documents.\n *\n * @constant\n * @enum {number}\n * @see lunr.Query~Clause\n * @see lunr.Query#clause\n * @see lunr.Query#term\n * @example <caption>query term with required presence</caption>\n * query.term('foo', { presence: lunr.Query.presence.REQUIRED })\n */\nlunr.Query.presence = {\n  /**\n   * Term's presence in a document is optional, this is the default value.\n   */\n  OPTIONAL: 1,\n\n  /**\n   * Term's presence in a document is required, documents that do not contain\n   * this term will not be returned.\n   */\n  REQUIRED: 2,\n\n  /**\n   * Term's presence in a document is prohibited, documents that do contain\n   * this term will not be returned.\n   */\n  PROHIBITED: 3\n}\n\n/**\n * A single clause in a {@link lunr.Query} contains a term and details on how to\n * match that term against a {@link lunr.Index}.\n *\n * @typedef {Object} lunr.Query~Clause\n * @property {string[]} fields - The fields in an index this clause should be matched against.\n * @property {number} [boost=1] - Any boost that should be applied when matching this clause.\n * @property {number} [editDistance] - Whether the term should have fuzzy matching applied, and how fuzzy the match should be.\n * @property {boolean} [usePipeline] - Whether the term should be passed through the search pipeline.\n * @property {number} [wildcard=lunr.Query.wildcard.NONE] - Whether the term should have wildcards appended or prepended.\n * @property {number} [presence=lunr.Query.presence.OPTIONAL] - The terms presence in any matching documents.\n */\n\n/**\n * Adds a {@link lunr.Query~Clause} to this query.\n *\n * Unless the clause contains the fields to be matched all fields will be matched. In addition\n * a default boost of 1 is applied to the clause.\n *\n * @param {lunr.Query~Clause} clause - The clause to add to this query.\n * @see lunr.Query~Clause\n * @returns {lunr.Query}\n */\nlunr.Query.prototype.clause = function (clause) {\n  if (!('fields' in clause)) {\n    clause.fields = this.allFields\n  }\n\n  if (!('boost' in clause)) {\n    clause.boost = 1\n  }\n\n  if (!('usePipeline' in clause)) {\n    clause.usePipeline = true\n  }\n\n  if (!('wildcard' in clause)) {\n    clause.wildcard = lunr.Query.wildcard.NONE\n  }\n\n  if ((clause.wildcard & lunr.Query.wildcard.LEADING) && (clause.term.charAt(0) != lunr.Query.wildcard)) {\n    clause.term = \"*\" + clause.term\n  }\n\n  if ((clause.wildcard & lunr.Query.wildcard.TRAILING) && (clause.term.slice(-1) != lunr.Query.wildcard)) {\n    clause.term = \"\" + clause.term + \"*\"\n  }\n\n  if (!('presence' in clause)) {\n    clause.presence = lunr.Query.presence.OPTIONAL\n  }\n\n  this.clauses.push(clause)\n\n  return this\n}\n\n/**\n * A negated query is one in which every clause has a presence of\n * prohibited. These queries require some special processing to return\n * the expected results.\n *\n * @returns boolean\n */\nlunr.Query.prototype.isNegated = function () {\n  for (var i = 0; i < this.clauses.length; i++) {\n    if (this.clauses[i].presence != lunr.Query.presence.PROHIBITED) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * Adds a term to the current query, under the covers this will create a {@link lunr.Query~Clause}\n * to the list of clauses that make up this query.\n *\n * The term is used as is, i.e. no tokenization will be performed by this method. Instead conversion\n * to a token or token-like string should be done before calling this method.\n *\n * The term will be converted to a string by calling `toString`. Multiple terms can be passed as an\n * array, each term in the array will share the same options.\n *\n * @param {object|object[]} term - The term(s) to add to the query.\n * @param {object} [options] - Any additional properties to add to the query clause.\n * @returns {lunr.Query}\n * @see lunr.Query#clause\n * @see lunr.Query~Clause\n * @example <caption>adding a single term to a query</caption>\n * query.term(\"foo\")\n * @example <caption>adding a single term to a query and specifying search fields, term boost and automatic trailing wildcard</caption>\n * query.term(\"foo\", {\n *   fields: [\"title\"],\n *   boost: 10,\n *   wildcard: lunr.Query.wildcard.TRAILING\n * })\n * @example <caption>using lunr.tokenizer to convert a string to tokens before using them as terms</caption>\n * query.term(lunr.tokenizer(\"foo bar\"))\n */\nlunr.Query.prototype.term = function (term, options) {\n  if (Array.isArray(term)) {\n    term.forEach(function (t) { this.term(t, lunr.utils.clone(options)) }, this)\n    return this\n  }\n\n  var clause = options || {}\n  clause.term = term.toString()\n\n  this.clause(clause)\n\n  return this\n}\nlunr.QueryParseError = function (message, start, end) {\n  this.name = \"QueryParseError\"\n  this.message = message\n  this.start = start\n  this.end = end\n}\n\nlunr.QueryParseError.prototype = new Error\nlunr.QueryLexer = function (str) {\n  this.lexemes = []\n  this.str = str\n  this.length = str.length\n  this.pos = 0\n  this.start = 0\n  this.escapeCharPositions = []\n}\n\nlunr.QueryLexer.prototype.run = function () {\n  var state = lunr.QueryLexer.lexText\n\n  while (state) {\n    state = state(this)\n  }\n}\n\nlunr.QueryLexer.prototype.sliceString = function () {\n  var subSlices = [],\n      sliceStart = this.start,\n      sliceEnd = this.pos\n\n  for (var i = 0; i < this.escapeCharPositions.length; i++) {\n    sliceEnd = this.escapeCharPositions[i]\n    subSlices.push(this.str.slice(sliceStart, sliceEnd))\n    sliceStart = sliceEnd + 1\n  }\n\n  subSlices.push(this.str.slice(sliceStart, this.pos))\n  this.escapeCharPositions.length = 0\n\n  return subSlices.join('')\n}\n\nlunr.QueryLexer.prototype.emit = function (type) {\n  this.lexemes.push({\n    type: type,\n    str: this.sliceString(),\n    start: this.start,\n    end: this.pos\n  })\n\n  this.start = this.pos\n}\n\nlunr.QueryLexer.prototype.escapeCharacter = function () {\n  this.escapeCharPositions.push(this.pos - 1)\n  this.pos += 1\n}\n\nlunr.QueryLexer.prototype.next = function () {\n  if (this.pos >= this.length) {\n    return lunr.QueryLexer.EOS\n  }\n\n  var char = this.str.charAt(this.pos)\n  this.pos += 1\n  return char\n}\n\nlunr.QueryLexer.prototype.width = function () {\n  return this.pos - this.start\n}\n\nlunr.QueryLexer.prototype.ignore = function () {\n  if (this.start == this.pos) {\n    this.pos += 1\n  }\n\n  this.start = this.pos\n}\n\nlunr.QueryLexer.prototype.backup = function () {\n  this.pos -= 1\n}\n\nlunr.QueryLexer.prototype.acceptDigitRun = function () {\n  var char, charCode\n\n  do {\n    char = this.next()\n    charCode = char.charCodeAt(0)\n  } while (charCode > 47 && charCode < 58)\n\n  if (char != lunr.QueryLexer.EOS) {\n    this.backup()\n  }\n}\n\nlunr.QueryLexer.prototype.more = function () {\n  return this.pos < this.length\n}\n\nlunr.QueryLexer.EOS = 'EOS'\nlunr.QueryLexer.FIELD = 'FIELD'\nlunr.QueryLexer.TERM = 'TERM'\nlunr.QueryLexer.EDIT_DISTANCE = 'EDIT_DISTANCE'\nlunr.QueryLexer.BOOST = 'BOOST'\nlunr.QueryLexer.PRESENCE = 'PRESENCE'\n\nlunr.QueryLexer.lexField = function (lexer) {\n  lexer.backup()\n  lexer.emit(lunr.QueryLexer.FIELD)\n  lexer.ignore()\n  return lunr.QueryLexer.lexText\n}\n\nlunr.QueryLexer.lexTerm = function (lexer) {\n  if (lexer.width() > 1) {\n    lexer.backup()\n    lexer.emit(lunr.QueryLexer.TERM)\n  }\n\n  lexer.ignore()\n\n  if (lexer.more()) {\n    return lunr.QueryLexer.lexText\n  }\n}\n\nlunr.QueryLexer.lexEditDistance = function (lexer) {\n  lexer.ignore()\n  lexer.acceptDigitRun()\n  lexer.emit(lunr.QueryLexer.EDIT_DISTANCE)\n  return lunr.QueryLexer.lexText\n}\n\nlunr.QueryLexer.lexBoost = function (lexer) {\n  lexer.ignore()\n  lexer.acceptDigitRun()\n  lexer.emit(lunr.QueryLexer.BOOST)\n  return lunr.QueryLexer.lexText\n}\n\nlunr.QueryLexer.lexEOS = function (lexer) {\n  if (lexer.width() > 0) {\n    lexer.emit(lunr.QueryLexer.TERM)\n  }\n}\n\n// This matches the separator used when tokenising fields\n// within a document. These should match otherwise it is\n// not possible to search for some tokens within a document.\n//\n// It is possible for the user to change the separator on the\n// tokenizer so it _might_ clash with any other of the special\n// characters already used within the search string, e.g. :.\n//\n// This means that it is possible to change the separator in\n// such a way that makes some words unsearchable using a search\n// string.\nlunr.QueryLexer.termSeparator = lunr.tokenizer.separator\n\nlunr.QueryLexer.lexText = function (lexer) {\n  while (true) {\n    var char = lexer.next()\n\n    if (char == lunr.QueryLexer.EOS) {\n      return lunr.QueryLexer.lexEOS\n    }\n\n    // Escape character is '\\'\n    if (char.charCodeAt(0) == 92) {\n      lexer.escapeCharacter()\n      continue\n    }\n\n    if (char == \":\") {\n      return lunr.QueryLexer.lexField\n    }\n\n    if (char == \"~\") {\n      lexer.backup()\n      if (lexer.width() > 0) {\n        lexer.emit(lunr.QueryLexer.TERM)\n      }\n      return lunr.QueryLexer.lexEditDistance\n    }\n\n    if (char == \"^\") {\n      lexer.backup()\n      if (lexer.width() > 0) {\n        lexer.emit(lunr.QueryLexer.TERM)\n      }\n      return lunr.QueryLexer.lexBoost\n    }\n\n    // \"+\" indicates term presence is required\n    // checking for length to ensure that only\n    // leading \"+\" are considered\n    if (char == \"+\" && lexer.width() === 1) {\n      lexer.emit(lunr.QueryLexer.PRESENCE)\n      return lunr.QueryLexer.lexText\n    }\n\n    // \"-\" indicates term presence is prohibited\n    // checking for length to ensure that only\n    // leading \"-\" are considered\n    if (char == \"-\" && lexer.width() === 1) {\n      lexer.emit(lunr.QueryLexer.PRESENCE)\n      return lunr.QueryLexer.lexText\n    }\n\n    if (char.match(lunr.QueryLexer.termSeparator)) {\n      return lunr.QueryLexer.lexTerm\n    }\n  }\n}\n\nlunr.QueryParser = function (str, query) {\n  this.lexer = new lunr.QueryLexer (str)\n  this.query = query\n  this.currentClause = {}\n  this.lexemeIdx = 0\n}\n\nlunr.QueryParser.prototype.parse = function () {\n  this.lexer.run()\n  this.lexemes = this.lexer.lexemes\n\n  var state = lunr.QueryParser.parseClause\n\n  while (state) {\n    state = state(this)\n  }\n\n  return this.query\n}\n\nlunr.QueryParser.prototype.peekLexeme = function () {\n  return this.lexemes[this.lexemeIdx]\n}\n\nlunr.QueryParser.prototype.consumeLexeme = function () {\n  var lexeme = this.peekLexeme()\n  this.lexemeIdx += 1\n  return lexeme\n}\n\nlunr.QueryParser.prototype.nextClause = function () {\n  var completedClause = this.currentClause\n  this.query.clause(completedClause)\n  this.currentClause = {}\n}\n\nlunr.QueryParser.parseClause = function (parser) {\n  var lexeme = parser.peekLexeme()\n\n  if (lexeme == undefined) {\n    return\n  }\n\n  switch (lexeme.type) {\n    case lunr.QueryLexer.PRESENCE:\n      return lunr.QueryParser.parsePresence\n    case lunr.QueryLexer.FIELD:\n      return lunr.QueryParser.parseField\n    case lunr.QueryLexer.TERM:\n      return lunr.QueryParser.parseTerm\n    default:\n      var errorMessage = \"expected either a field or a term, found \" + lexeme.type\n\n      if (lexeme.str.length >= 1) {\n        errorMessage += \" with value '\" + lexeme.str + \"'\"\n      }\n\n      throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n  }\n}\n\nlunr.QueryParser.parsePresence = function (parser) {\n  var lexeme = parser.consumeLexeme()\n\n  if (lexeme == undefined) {\n    return\n  }\n\n  switch (lexeme.str) {\n    case \"-\":\n      parser.currentClause.presence = lunr.Query.presence.PROHIBITED\n      break\n    case \"+\":\n      parser.currentClause.presence = lunr.Query.presence.REQUIRED\n      break\n    default:\n      var errorMessage = \"unrecognised presence operator'\" + lexeme.str + \"'\"\n      throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n  }\n\n  var nextLexeme = parser.peekLexeme()\n\n  if (nextLexeme == undefined) {\n    var errorMessage = \"expecting term or field, found nothing\"\n    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n  }\n\n  switch (nextLexeme.type) {\n    case lunr.QueryLexer.FIELD:\n      return lunr.QueryParser.parseField\n    case lunr.QueryLexer.TERM:\n      return lunr.QueryParser.parseTerm\n    default:\n      var errorMessage = \"expecting term or field, found '\" + nextLexeme.type + \"'\"\n      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n  }\n}\n\nlunr.QueryParser.parseField = function (parser) {\n  var lexeme = parser.consumeLexeme()\n\n  if (lexeme == undefined) {\n    return\n  }\n\n  if (parser.query.allFields.indexOf(lexeme.str) == -1) {\n    var possibleFields = parser.query.allFields.map(function (f) { return \"'\" + f + \"'\" }).join(', '),\n        errorMessage = \"unrecognised field '\" + lexeme.str + \"', possible fields: \" + possibleFields\n\n    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n  }\n\n  parser.currentClause.fields = [lexeme.str]\n\n  var nextLexeme = parser.peekLexeme()\n\n  if (nextLexeme == undefined) {\n    var errorMessage = \"expecting term, found nothing\"\n    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n  }\n\n  switch (nextLexeme.type) {\n    case lunr.QueryLexer.TERM:\n      return lunr.QueryParser.parseTerm\n    default:\n      var errorMessage = \"expecting term, found '\" + nextLexeme.type + \"'\"\n      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n  }\n}\n\nlunr.QueryParser.parseTerm = function (parser) {\n  var lexeme = parser.consumeLexeme()\n\n  if (lexeme == undefined) {\n    return\n  }\n\n  parser.currentClause.term = lexeme.str.toLowerCase()\n\n  if (lexeme.str.indexOf(\"*\") != -1) {\n    parser.currentClause.usePipeline = false\n  }\n\n  var nextLexeme = parser.peekLexeme()\n\n  if (nextLexeme == undefined) {\n    parser.nextClause()\n    return\n  }\n\n  switch (nextLexeme.type) {\n    case lunr.QueryLexer.TERM:\n      parser.nextClause()\n      return lunr.QueryParser.parseTerm\n    case lunr.QueryLexer.FIELD:\n      parser.nextClause()\n      return lunr.QueryParser.parseField\n    case lunr.QueryLexer.EDIT_DISTANCE:\n      return lunr.QueryParser.parseEditDistance\n    case lunr.QueryLexer.BOOST:\n      return lunr.QueryParser.parseBoost\n    case lunr.QueryLexer.PRESENCE:\n      parser.nextClause()\n      return lunr.QueryParser.parsePresence\n    default:\n      var errorMessage = \"Unexpected lexeme type '\" + nextLexeme.type + \"'\"\n      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n  }\n}\n\nlunr.QueryParser.parseEditDistance = function (parser) {\n  var lexeme = parser.consumeLexeme()\n\n  if (lexeme == undefined) {\n    return\n  }\n\n  var editDistance = parseInt(lexeme.str, 10)\n\n  if (isNaN(editDistance)) {\n    var errorMessage = \"edit distance must be numeric\"\n    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n  }\n\n  parser.currentClause.editDistance = editDistance\n\n  var nextLexeme = parser.peekLexeme()\n\n  if (nextLexeme == undefined) {\n    parser.nextClause()\n    return\n  }\n\n  switch (nextLexeme.type) {\n    case lunr.QueryLexer.TERM:\n      parser.nextClause()\n      return lunr.QueryParser.parseTerm\n    case lunr.QueryLexer.FIELD:\n      parser.nextClause()\n      return lunr.QueryParser.parseField\n    case lunr.QueryLexer.EDIT_DISTANCE:\n      return lunr.QueryParser.parseEditDistance\n    case lunr.QueryLexer.BOOST:\n      return lunr.QueryParser.parseBoost\n    case lunr.QueryLexer.PRESENCE:\n      parser.nextClause()\n      return lunr.QueryParser.parsePresence\n    default:\n      var errorMessage = \"Unexpected lexeme type '\" + nextLexeme.type + \"'\"\n      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n  }\n}\n\nlunr.QueryParser.parseBoost = function (parser) {\n  var lexeme = parser.consumeLexeme()\n\n  if (lexeme == undefined) {\n    return\n  }\n\n  var boost = parseInt(lexeme.str, 10)\n\n  if (isNaN(boost)) {\n    var errorMessage = \"boost must be numeric\"\n    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n  }\n\n  parser.currentClause.boost = boost\n\n  var nextLexeme = parser.peekLexeme()\n\n  if (nextLexeme == undefined) {\n    parser.nextClause()\n    return\n  }\n\n  switch (nextLexeme.type) {\n    case lunr.QueryLexer.TERM:\n      parser.nextClause()\n      return lunr.QueryParser.parseTerm\n    case lunr.QueryLexer.FIELD:\n      parser.nextClause()\n      return lunr.QueryParser.parseField\n    case lunr.QueryLexer.EDIT_DISTANCE:\n      return lunr.QueryParser.parseEditDistance\n    case lunr.QueryLexer.BOOST:\n      return lunr.QueryParser.parseBoost\n    case lunr.QueryLexer.PRESENCE:\n      parser.nextClause()\n      return lunr.QueryParser.parsePresence\n    default:\n      var errorMessage = \"Unexpected lexeme type '\" + nextLexeme.type + \"'\"\n      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n  }\n}\n\n  /**\n   * export the module via AMD, CommonJS or as a browser global\n   * Export code from https://github.com/umdjs/umd/blob/master/returnExports.js\n   */\n  ;(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      // AMD. Register as an anonymous module.\n      define(factory)\n    } else if (typeof exports === 'object') {\n      /**\n       * Node. Does not work with strict CommonJS, but\n       * only CommonJS-like enviroments that support module.exports,\n       * like Node.\n       */\n      module.exports = factory()\n    } else {\n      // Browser globals (root is window)\n      root.lunr = factory()\n    }\n  }(this, function () {\n    /**\n     * Just return a value to define the module export.\n     * This example returns an object, but the module\n     * can return a function as the exported value.\n     */\n    return lunr\n  }))\n})();\n","import { debounce } from \"../utils/debounce\";\nimport { Index } from \"lunr\";\n\n/**\n * Keep this in sync with the interface in src/lib/output/plugins/JavascriptIndexPlugin.ts\n * It's not imported because these are separate TS projects today.\n */\ninterface SearchDocument {\n  id: number;\n\n  kind: number;\n  name: string;\n  url: string;\n  classes?: string;\n  parent?: string;\n}\n\ninterface IData {\n  rows: SearchDocument[];\n  index: object;\n}\n\ndeclare global {\n  interface Window {\n    searchData?: IData;\n  }\n}\n\ninterface SearchState {\n  base: string;\n  data?: IData;\n  index?: Index;\n}\n\nexport function initSearch() {\n  const searchEl = document.getElementById(\"tsd-search\");\n  if (!searchEl) return;\n\n  const searchScript = document.getElementById(\n    \"tsd-search-script\"\n  ) as HTMLScriptElement | null;\n  searchEl.classList.add(\"loading\");\n  if (searchScript) {\n    searchScript.addEventListener(\"error\", () => {\n      searchEl.classList.remove(\"loading\");\n      searchEl.classList.add(\"failure\");\n    });\n    searchScript.addEventListener(\"load\", () => {\n      searchEl.classList.remove(\"loading\");\n      searchEl.classList.add(\"ready\");\n    });\n    if (window.searchData) {\n      searchEl.classList.remove(\"loading\");\n    }\n  }\n\n  const field = document.querySelector<HTMLInputElement>(\"#tsd-search input\");\n  const results = document.querySelector<HTMLElement>(\"#tsd-search .results\");\n\n  if (!field || !results) {\n    throw new Error(\"The input field or the result list wrapper was not found\");\n  }\n\n  let resultClicked = false;\n  results.addEventListener(\"mousedown\", () => (resultClicked = true));\n  results.addEventListener(\"mouseup\", () => {\n    resultClicked = false;\n    searchEl.classList.remove(\"has-focus\");\n  });\n\n  field.addEventListener(\"focus\", () => searchEl.classList.add(\"has-focus\"));\n  field.addEventListener(\"blur\", () => {\n    if (!resultClicked) {\n      resultClicked = false;\n      searchEl.classList.remove(\"has-focus\");\n    }\n  });\n\n  const state: SearchState = {\n    base: searchEl.dataset[\"base\"] + \"/\",\n  };\n\n  bindEvents(searchEl, results, field, state);\n}\n\nfunction bindEvents(\n  searchEl: HTMLElement,\n  results: HTMLElement,\n  field: HTMLInputElement,\n  state: SearchState\n) {\n  field.addEventListener(\n    \"input\",\n    debounce(() => {\n      updateResults(searchEl, results, field, state);\n    }, 200)\n  );\n\n  let preventPress = false;\n  field.addEventListener(\"keydown\", (e) => {\n    preventPress = true;\n    if (e.key == \"Enter\") {\n      gotoCurrentResult(results, field);\n    } else if (e.key == \"Escape\") {\n      field.blur();\n    } else if (e.key == \"ArrowUp\") {\n      setCurrentResult(results, -1);\n    } else if (e.key === \"ArrowDown\") {\n      setCurrentResult(results, 1);\n    } else {\n      preventPress = false;\n    }\n  });\n  field.addEventListener(\"keypress\", (e) => {\n    if (preventPress) e.preventDefault();\n  });\n\n  /**\n   * Start searching by pressing slash.\n   */\n  document.body.addEventListener(\"keydown\", (e) => {\n    if (e.altKey || e.ctrlKey || e.metaKey) return;\n    if (!field.matches(\":focus\") && e.key === \"/\") {\n      field.focus();\n      e.preventDefault();\n    }\n  });\n}\n\nfunction checkIndex(state: SearchState, searchEl: HTMLElement) {\n  if (state.index) return;\n\n  if (window.searchData) {\n    searchEl.classList.remove(\"loading\");\n    searchEl.classList.add(\"ready\");\n    state.data = window.searchData;\n    state.index = Index.load(window.searchData.index);\n  }\n}\n\nfunction updateResults(\n  searchEl: HTMLElement,\n  results: HTMLElement,\n  query: HTMLInputElement,\n  state: SearchState\n) {\n  checkIndex(state, searchEl);\n  // Don't clear results if loading state is not ready,\n  // because loading or error message can be removed.\n  if (!state.index || !state.data) return;\n\n  results.textContent = \"\";\n\n  const searchText = query.value.trim();\n\n  // Perform a wildcard search\n  // Set empty `res` to prevent getting random results with wildcard search\n  // when the `searchText` is empty.\n  const res = searchText ? state.index.search(`*${searchText}*`) : [];\n\n  for (let i = 0; i < res.length; i++) {\n    const item = res[i];\n    const row = state.data.rows[Number(item.ref)];\n    let boost = 1;\n\n    // boost by exact match on name\n    if (row.name.toLowerCase().startsWith(searchText.toLowerCase())) {\n      boost *= 1 + 1 / (1 + Math.abs(row.name.length - searchText.length));\n    }\n\n    item.score *= boost;\n  }\n\n  res.sort((a, b) => b.score - a.score);\n\n  for (let i = 0, c = Math.min(10, res.length); i < c; i++) {\n    const row = state.data.rows[Number(res[i].ref)];\n\n    // Bold the matched part of the query in the search results\n    let name = boldMatches(row.name, searchText);\n    if ((globalThis as any).DEBUG_SEARCH_WEIGHTS) {\n      name += ` (score: ${res[i].score.toFixed(2)})`;\n    }\n    if (row.parent) {\n      name = `<span class=\"parent\">${boldMatches(\n        row.parent,\n        searchText\n      )}.</span>${name}`;\n    }\n\n    const item = document.createElement(\"li\");\n    item.classList.value = row.classes ?? \"\";\n\n    const anchor = document.createElement(\"a\");\n    anchor.href = state.base + row.url;\n    anchor.innerHTML = name;\n    item.append(anchor);\n\n    results.appendChild(item);\n  }\n}\n\n/**\n * Move the highlight within the result set.\n */\nfunction setCurrentResult(results: HTMLElement, dir: number) {\n  let current = results.querySelector(\".current\");\n  if (!current) {\n    current = results.querySelector(\n      dir == 1 ? \"li:first-child\" : \"li:last-child\"\n    );\n    if (current) {\n      current.classList.add(\"current\");\n    }\n  } else {\n    let rel: Element | undefined = current;\n    // Tricky: We have to check that rel has an offsetParent so that users can't mark a hidden result as\n    // current with the arrow keys.\n    if (dir === 1) {\n      do {\n        rel = rel.nextElementSibling ?? undefined;\n      } while (rel instanceof HTMLElement && rel.offsetParent == null);\n    } else {\n      do {\n        rel = rel.previousElementSibling ?? undefined;\n      } while (rel instanceof HTMLElement && rel.offsetParent == null);\n    }\n\n    if (rel) {\n      current.classList.remove(\"current\");\n      rel.classList.add(\"current\");\n    }\n  }\n}\n\n/**\n * Navigate to the highlighted result.\n */\nfunction gotoCurrentResult(results: HTMLElement, field: HTMLInputElement) {\n  let current = results.querySelector(\".current\");\n\n  if (!current) {\n    current = results.querySelector(\"li:first-child\");\n  }\n\n  if (current) {\n    const link = current.querySelector(\"a\");\n    if (link) {\n      window.location.href = link.href;\n    }\n    field.blur();\n  }\n}\n\nfunction boldMatches(text: string, search: string) {\n  if (search === \"\") {\n    return text;\n  }\n\n  const lowerText = text.toLocaleLowerCase();\n  const lowerSearch = search.toLocaleLowerCase();\n\n  const parts: string[] = [];\n  let lastIndex = 0;\n  let index = lowerText.indexOf(lowerSearch);\n  while (index != -1) {\n    parts.push(\n      escapeHtml(text.substring(lastIndex, index)),\n      `<b>${escapeHtml(text.substring(index, index + lowerSearch.length))}</b>`\n    );\n\n    lastIndex = index + lowerSearch.length;\n    index = lowerText.indexOf(lowerSearch, lastIndex);\n  }\n\n  parts.push(escapeHtml(text.substring(lastIndex)));\n\n  return parts.join(\"\");\n}\n\nconst SPECIAL_HTML = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  \"'\": \"&#039;\",\n  '\"': \"&quot;\",\n} as const;\n\nfunction escapeHtml(text: string) {\n  return text.replace(\n    /[&<>\"'\"]/g,\n    (match) => SPECIAL_HTML[match as keyof typeof SPECIAL_HTML]\n  );\n}\n","import { Application } from \"./Application\";\n\nexport interface IComponentOptions {\n  app: Application;\n  el: HTMLElement;\n}\n\n/**\n * TypeDoc component class.\n */\nexport class Component {\n  protected el: HTMLElement;\n  protected app: Application;\n\n  constructor(options: IComponentOptions) {\n    this.el = options.el;\n    this.app = options.app;\n  }\n}\n","/**\n * Simple point interface.\n */\nexport interface Point {\n    x: number;\n    y: number;\n}\n\n/**\n * Event name of the pointer down event.\n */\nexport let pointerDown: string = \"mousedown\";\n\n/**\n * Event name of the pointer move event.\n */\nexport let pointerMove: string = \"mousemove\";\n\n/**\n * Event name of the pointer up event.\n */\nexport let pointerUp: string = \"mouseup\";\n\n/**\n * Position the pointer was pressed at.\n */\nexport const pointerDownPosition: Point = { x: 0, y: 0 };\n\n/**\n * Should the next click on the document be suppressed?\n */\nexport let preventNextClick: boolean = false;\n\n/**\n * Is the pointer down?\n */\nexport let isPointerDown: boolean = false;\n\n/**\n * Is the pointer a touch point?\n */\nexport let isPointerTouch: boolean = false;\n\n/**\n * Did the pointer move since the last down event?\n */\nexport let hasPointerMoved: boolean = false;\n\n/**\n * Is the user agent a mobile agent?\n */\nexport const isMobile: boolean =\n    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n    );\ndocument.documentElement.classList.add(isMobile ? \"is-mobile\" : \"not-mobile\");\n\nif (isMobile && \"ontouchstart\" in document.documentElement) {\n    isPointerTouch = true;\n    pointerDown = \"touchstart\";\n    pointerMove = \"touchmove\";\n    pointerUp = \"touchend\";\n}\n\ndocument.addEventListener(pointerDown, (e) => {\n    isPointerDown = true;\n    hasPointerMoved = false;\n    const t =\n        pointerDown == \"touchstart\"\n            ? (e as TouchEvent).targetTouches[0]\n            : (e as MouseEvent);\n    pointerDownPosition.y = t.pageY || 0;\n    pointerDownPosition.x = t.pageX || 0;\n});\n\ndocument.addEventListener(pointerMove, (e) => {\n    if (!isPointerDown) return;\n    if (!hasPointerMoved) {\n        const t =\n            pointerDown == \"touchstart\"\n                ? (e as TouchEvent).targetTouches[0]\n                : (e as MouseEvent);\n        const x = pointerDownPosition.x - (t.pageX || 0);\n        const y = pointerDownPosition.y - (t.pageY || 0);\n        hasPointerMoved = Math.sqrt(x * x + y * y) > 10;\n    }\n});\n\ndocument.addEventListener(pointerUp, () => {\n    isPointerDown = false;\n});\n\ndocument.addEventListener(\"click\", (e) => {\n    if (preventNextClick) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        preventNextClick = false;\n    }\n});\n","import { Component, IComponentOptions } from \"../Component\";\nimport { hasPointerMoved, pointerDown, pointerUp } from \"../utils/pointer\";\n\nexport class Toggle extends Component {\n  active?: boolean;\n\n  className: string;\n\n  constructor(options: IComponentOptions) {\n    super(options);\n\n    this.className = this.el.dataset[\"toggle\"] || \"\";\n    this.el.addEventListener(pointerUp, (e) => this.onPointerUp(e));\n    this.el.addEventListener(\"click\", (e) => e.preventDefault());\n    document.addEventListener(pointerDown, (e) =>\n      this.onDocumentPointerDown(e)\n    );\n    document.addEventListener(pointerUp, (e) => this.onDocumentPointerUp(e));\n  }\n\n  setActive(value: boolean) {\n    if (this.active == value) return;\n    this.active = value;\n\n    document.documentElement.classList.toggle(\"has-\" + this.className, value);\n    this.el.classList.toggle(\"active\", value);\n\n    const transition = (this.active ? \"to-has-\" : \"from-has-\") + this.className;\n    document.documentElement.classList.add(transition);\n    setTimeout(\n      () => document.documentElement.classList.remove(transition),\n      500\n    );\n  }\n\n  onPointerUp(event: Event) {\n    if (hasPointerMoved) return;\n    this.setActive(true);\n    event.preventDefault();\n  }\n\n  onDocumentPointerDown(e: Event) {\n    if (this.active) {\n      if (\n        (e.target as HTMLElement).closest(\".col-sidebar, .tsd-filter-group\")\n      ) {\n        return;\n      }\n\n      this.setActive(false);\n    }\n  }\n\n  onDocumentPointerUp(e: Event) {\n    if (hasPointerMoved) return;\n    if (this.active) {\n      if ((e.target as HTMLElement).closest(\".col-sidebar\")) {\n        const link = (e.target as HTMLElement).closest(\"a\");\n        if (link) {\n          let href = window.location.href;\n          if (href.indexOf(\"#\") != -1) {\n            href = href.substring(0, href.indexOf(\"#\"));\n          }\n          if (link.href.substring(0, href.length) == href) {\n            setTimeout(() => this.setActive(false), 250);\n          }\n        }\n      }\n    }\n  }\n}\n","// This exists to abstract away the horrible fact that accessing localStorage can throw\n// an exception depending on a user's browser settings. Can't even check typeof localStorage\n// so we're stuck with a try..catch.\n\nexport interface MinimalStorage {\n    getItem(key: string): string | null;\n    setItem(key: string, value: string): void;\n}\n\nlet _storage: MinimalStorage;\n\ntry {\n    _storage = localStorage;\n} catch {\n    _storage = {\n        getItem() {\n            return null;\n        },\n        setItem() {},\n    };\n}\n\nexport const storage = _storage;\n","import { Component, IComponentOptions } from \"../Component\";\nimport { storage } from \"../utils/storage\";\n\nconst style = document.head.appendChild(document.createElement(\"style\"));\nstyle.dataset.for = \"filters\";\n\n/**\n * Handles sidebar filtering functionality.\n */\nexport class Filter extends Component {\n  override el: HTMLInputElement;\n\n  /**\n   * The class name & ID by which to store the filter value.\n   */\n  private readonly key: string;\n\n  /**\n   * Current filter value, to keep in sync with checkbox state.\n   */\n  private value: boolean;\n\n  constructor(options: IComponentOptions) {\n    super(options);\n    this.el = options.el as HTMLInputElement;\n    this.key = `filter-${this.el.name}`;\n    this.value = this.el.checked;\n    this.el.addEventListener(\"change\", () => {\n      this.setLocalStorage(this.el.checked);\n    });\n    this.setLocalStorage(this.fromLocalStorage());\n\n    style.innerHTML += `html:not(.${this.key}) .tsd-is-${this.el.name} { display: none; }\\n`;\n  }\n\n  /**\n   * Retrieve value from storage.\n   */\n  private fromLocalStorage(): boolean {\n    const fromStorage = storage.getItem(this.key);\n    return fromStorage ? fromStorage === \"true\" : this.el.checked;\n  }\n\n  /**\n   * Set value to local storage.\n   *\n   * @param value  Value to set.\n   */\n  private setLocalStorage(value: boolean): void {\n    storage.setItem(this.key, value.toString());\n    this.value = value;\n    this.handleValueChange();\n  }\n\n  /**\n   * Synchronize DOM based on value change.\n   */\n  private handleValueChange(): void {\n    this.el.checked = this.value;\n    document.documentElement.classList.toggle(this.key, this.value);\n\n    this.app.filterChanged();\n\n    // Hide index headings where all index items are hidden.\n    // offsetParent == null checks for display: none\n    document\n      .querySelectorAll<HTMLElement>(\".tsd-index-section\")\n      .forEach((el) => {\n        el.style.display = \"block\";\n        const allChildrenHidden = Array.from(\n          el.querySelectorAll<HTMLElement>(\".tsd-index-link\")\n        ).every((child) => child.offsetParent == null);\n\n        el.style.display = allChildrenHidden ? \"none\" : \"block\";\n      });\n  }\n}\n","import { Component, IComponentOptions } from \"../Component\";\nimport { storage } from \"../utils/storage\";\n\n/**\n * Handles accordion dropdown behavior.\n */\nexport class Accordion extends Component {\n  override el: HTMLDetailsElement;\n\n  /**\n   * The heading container for this accordion.\n   */\n  private summary: HTMLElement;\n\n  /**\n   * The chevron icon next to this accordion's heading.\n   */\n  private icon: SVGElement;\n\n  /**\n   * The key by which to store this accordion's state in storage.\n   */\n  private readonly key: string;\n\n  constructor(options: IComponentOptions) {\n    super(options);\n    this.el = options.el as HTMLDetailsElement;\n    if (!this.el) {\n      console.warn(`Accordion element with selector ${options.el} not found`);\n    }\n    this.summary = this.el.querySelector(\".tsd-accordion-summary\")!;\n    this.icon = this.summary.querySelector(\"svg\")!;\n    this.key = `tsd-accordion-${\n      this.summary.dataset.key ??\n      this.summary.textContent!.trim().replace(/\\s+/g, \"-\").toLowerCase()\n    }`;\n\n    const stored = storage.getItem(this.key);\n    this.el.open = stored ? stored === \"true\" : this.el.open;\n\n    this.el.addEventListener(\"toggle\", () => this.update());\n\n    this.update();\n  }\n\n  private update() {\n    this.icon.style.transform = `rotate(${this.el.open ? 0 : -90}deg)`;\n    storage.setItem(this.key, this.el.open.toString());\n  }\n}\n","import { storage } from \"./utils/storage\";\n\ntype ThemeChoice = \"os\" | \"light\" | \"dark\";\n\nexport function initTheme(choices: HTMLOptionElement) {\n  const savedTheme = (storage.getItem(\"tsd-theme\") as ThemeChoice) || \"os\";\n  choices.value = savedTheme;\n  setTheme(savedTheme);\n\n  choices.addEventListener(\"change\", () => {\n    storage.setItem(\"tsd-theme\", choices.value);\n    setTheme(choices.value as ThemeChoice);\n  });\n}\n\n// Also see:\n// - src/lib/output/themes/defaults/layouts/default.tsx\n// - src/lib/utils/highlighter.tsx\nfunction setTheme(theme: ThemeChoice) {\n  document.documentElement.dataset.theme = theme;\n}\n","import { Application, registerComponent } from \"./typedoc/Application\";\nimport { initSearch } from \"./typedoc/components/Search\";\nimport { Toggle } from \"./typedoc/components/Toggle\";\nimport { Filter } from \"./typedoc/components/Filter\";\nimport { Accordion } from \"./typedoc/components/Accordion\";\nimport { initTheme } from \"./typedoc/Theme\";\n\nconsole.debug(\"bootstrap original...\");\n\ninitSearch();\n\nregisterComponent(Toggle, \"a[data-toggle]\");\nregisterComponent(Accordion, \".tsd-index-accordion\");\nregisterComponent(Filter, \".tsd-filter-item input[type=checkbox]\");\n\nconst themeChoice = document.getElementById(\"tsd-theme\");\nif (themeChoice) {\n  initTheme(themeChoice as HTMLOptionElement);\n}\n\nconst app = new Application();\n\nObject.defineProperty(window, \"app\", { value: app });\n\n// Safari is broken and doesn't let you click on a link within\n// a <summary> tag, so we have to manually handle clicks there.\ndocument.querySelectorAll(\"summary a\").forEach((el) => {\n  el.addEventListener(\"click\", () => {\n    location.assign((el as HTMLAnchorElement).href);\n  });\n});\n","import { ready } from \"@ribajs/utils\";\nimport { Riba, coreModule } from \"@ribajs/core\";\nimport { routerModule, FadeTransition } from \"@ribajs/router\";\nimport { bs5Module, ThemeService } from \"@ribajs/bs5\";\nimport { fuseModule } from \"@ribajs/fuse\";\nimport { typedocModule } from \"@ribajs/typedoc\";\nimport { gjsifyTypedocModule } from \"./module\";\n\n// Import original typedoc bootstrap\nimport \"./original/bootstrap.js\";\n\ndeclare global {\n  interface Window {\n    model: any;\n  }\n}\n\nconst bootstrap = () => {\n  console.debug(\"bootstrap...\");\n  const riba = new Riba();\n  window.model = {};\n\n  riba.configure({\n    prefix: [\"rv\", \"csr-rv\"],\n    blockUnknownCustomElements: false,\n    templateDelimiters: [\"{\", \"}\"],\n  });\n\n  // Register modules\n  riba.module.register(coreModule.init());\n  riba.module.register(\n    routerModule.init({\n      defaultTransition: new FadeTransition(),\n    })\n  );\n  riba.module.register(bs5Module.init());\n  riba.module.register(fuseModule.init());\n  riba.module.register(typedocModule.init());\n  riba.module.register(gjsifyTypedocModule.init());\n\n  const theme = ThemeService.getSingleton();\n  const view = riba.bind(document.body, window.model);\n\n  view.registerComponents();\n\n  riba.lifecycle.events.on(\"ComponentLifecycle:error\", (error: Error) => {\n    console.error(error);\n  });\n\n  // Also add theme class to body for TypeDoc Theme backward compatibility\n  theme.onChange((data) => {\n    document.body.classList.remove(\"os\", \"dark\", \"light\");\n    if (data.newValue.bySystem) {\n      document.body.classList.add(\"os\");\n    }\n    if (data.newValue.byUser) {\n      if (data.newValue.isDark) {\n        document.body.classList.add(\"dark\");\n      } else {\n        document.body.classList.add(\"light\");\n      }\n    }\n  });\n};\n\nready(() => {\n  bootstrap();\n});\n"],"file":"main.bundle.js"}