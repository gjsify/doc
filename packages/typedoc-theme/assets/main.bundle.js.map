{"version":3,"mappings":"4KAIO,MAAMA,GAAiB,IAAM,CAClC,MAAMC,EAAU,mBAChB,IAAIC,EAAQ,IACZ,QAASC,EAAI,EAAGA,EAAI,EAAGA,IACrBD,GAASD,EAAQ,KAAK,MAAM,KAAK,OAAO,EAAI,EAAE,CAAC,EAE1C,OAAAC,CACT,EAEaE,GAAkB,CAC7BC,KAKGC,IACA,CACH,MAAMC,EAAuB,GACzBF,EAAQ,OACNA,EAAQ,UACAE,EAAA,KACR,MAAMF,EAAQ,cAAcA,EAAQ,KAAK,YAAY,OAGvDE,EAAU,KAAK,KAAKF,EAAQ,KAAK,iBAAiB,EAE1CE,EAAA,KAAK,UAAUF,EAAQ,OAAO,GAEpCA,EAAQ,UACVE,EAAU,KAAK,IAAIF,EAAQ,cAAcA,EAAQ,KAAK,iBAAiB,EAEvEE,EAAU,KAAK,GAAGF,EAAQ,KAAK,YAAiB,OAI1CE,EAAA,KAAK,GAAGD,CAAI,EAEtB,QAAQD,EAAQ,IAAI,EAAE,GAAGE,CAAS,CACpC,EC1CaC,GAAgB,UAKtB,MAAMC,GAAa,gBCCbC,GAAQ,CAACC,EAAWC,IAAmB,CAClD,QAAST,EAAI,EAAGA,EAAIQ,EAAGR,IAClBS,GAEP,EAuBaC,GAAW,IAAe,CACrC,MAAMC,EAA4B,GAC5BC,EAAO,IAAI,QAAW,CAACC,EAASC,IAAW,CAC/CH,EAAI,QAAUE,EACdF,EAAI,OAASG,CAAA,CACd,EACD,OAAAH,EAAI,QAAUC,EACPD,CACT,EAYaI,GAAa,CAAUC,EAA2BC,EAAO,MAAQ,CACxE,IAAAC,EACJ,MAAO,IAAIC,IAAkB,CAC3B,aAAaD,CAAO,EACpBA,EAAU,WAAW,IAAMF,EAAG,GAAGG,CAAM,EAAGF,CAAI,EAElD,EAUaG,GAAY,CAAUJ,EAA6BC,EAAO,MAAQ,CACzE,IAAAJ,EACAC,EACJ,MAAMO,EAAU,IAAI,QAAW,CAACC,EAAKC,IAAQ,CACjCV,EAAAS,EACDR,EAAAS,CAAA,CACV,EACD,IAAIC,EAEJ,MAAO,IAAIL,KACJK,IACHA,EAAWT,GAAW,IAAM,CACtB,IACMF,EAAAG,EAAG,GAAGG,CAAM,CAAC,EAErBK,EAAW,aACJC,GACPX,EAAOW,CAAK,CACd,GACCR,CAAI,GACTO,EAAS,GAAGL,CAAM,EAEXE,EAEX,EAYaK,GAAaV,GAAgC,CAExD,IAAIW,EAAuB,KACvBd,EACAC,EACAO,EAAU,IAAI,QAAQ,CAACC,EAAKC,IAAQ,CAC5BV,EAAAS,EACDR,EAAAS,CAAA,CACV,EAGD,MAAO,IAAIJ,KAELQ,GACF,qBAAqBA,CAAK,EAIpBA,EAAA,OAAO,sBAAsB,IAAM,CAErC,IACMd,EAAAG,EAAG,GAAGG,CAAM,CAAC,QACdM,GACPX,EAAOW,CAAc,CACvB,CAEQE,EAAA,KACRN,EAAU,IAAI,QAAQ,CAACC,EAAKC,IAAQ,CACxBV,EAAAS,EACDR,EAAAS,CAAA,CACV,EACF,EAEMF,EAEX,EAUaG,GAAW,CAACR,EAA6BC,IAChD,OAAOA,GAAS,SACXG,GAAUJ,EAAIC,CAAI,EAElBS,GAAUV,CAAE,EAYVY,GAAW,CAACZ,EAA+BC,EAAO,MAAQ,CACrE,IAAIY,EAAyB,KACzBhB,EACAC,EACAO,EAAU,IAAI,QAAQ,CAACC,EAAKC,IAAQ,CAC5BV,EAAAS,EACDR,EAAAS,CAAA,CACV,EAED,MAAO,IAAIJ,IAAkB,CAC3B,GAAIU,IAAY,KAAM,CACVA,EAAA,OAAO,WAAW,IAAM,CAEtBA,EAAA,KACVR,EAAU,IAAI,QAAQ,CAACC,EAAKC,IAAQ,CACxBV,EAAAS,EACDR,EAAAS,CAAA,CACV,GACAN,CAAI,EACH,IACMJ,EAAAG,EAAG,GAAGG,CAAM,CAAC,QACdM,GACPX,EAAOW,CAAc,CACvB,EAEK,OAAAJ,CAAA,CAEX,EC3KaS,GAAgB,CAC3BC,EACAC,EAAQ,EACRC,EAAqB,KAClB,CACH,MAAMC,EAAS,KAAK,UAAUH,EAAQ,KAAMC,CAAK,EACjD,OAAIC,GAAsBC,EACjBA,EAAO,QAAQ,KAAM,OAAO,EAE9BA,CACT,EAOaC,GAAmBC,GAA0B,CACxD,IAAIL,EAAS,KAMT,GAJA,CAACK,GAID,CAACC,GAAYD,CAAK,EACb,OAAAL,EAEL,GAAAO,GAAOF,CAAK,EACLL,EAAA,KAAK,MAAMK,CAAK,GAAK,SAE1B,KAEFL,EAAS,KAAK,MAAMK,EAAM,QAAQ,KAAM,GAAG,CAAC,GAAK,WAC1CX,GACC,aAAK,+BAA+BW,MAAWX,CAAK,CAC9D,CAEK,OAAAM,CACT,EAEaM,GAAeE,GACtB,CAACA,GAAO,OAAOA,GAAQ,SAClB,IAETA,EAAMA,EAAI,OAEPA,EAAI,OAAO,CAAC,IAAM,KAAOA,EAAI,OAAOA,EAAI,OAAS,CAAC,IAAM,KACxDA,EAAI,OAAO,CAAC,IAAM,KAAOA,EAAI,OAAOA,EAAI,OAAS,CAAC,IAAM,KAShDC,GAAYD,GACnB,CAACA,GACD,OAAOA,GAAQ,SAAiB,GAC7BA,EAAI,WAAWlC,EAAa,EASxBoC,GAAYC,GAAc,CACjC,IAAA/B,EACA,OAAAgC,EAASD,CAAI,EACf/B,EAAM,KAAK,UAAU+B,EAAM,KAAM,CAAC,EAElC/B,EAAM+B,EAAK,WAENrC,GAAgB,KAAK,mBAAmBM,CAAG,CAAC,CACrD,EAQaiC,GAAcC,GAA2B,CAChD,UAAOA,GAAW,SACb,6BAGLA,EAAO,WAAWxC,EAAa,IACxBwC,IAAO,UAAUxC,GAAc,MAAM,GAG1C,MAAAyC,EAAkB,KAAKD,CAAM,EAC/B,IAAAE,EACA,IACFA,EAAU,mBAAmBD,CAAe,QAElCC,EAAAD,CACZ,CAEO,OAAAE,GAAUD,EAAS,EAAK,EAAE,KACnC,EAMaT,GAAUC,GAAwB,CAC7C,GAAI,CAACA,GAAO,CAACF,GAAYE,CAAG,EACnB,SAEL,IACI,MAAAU,EAAM,KAAK,MAAMV,CAAG,EAC1B,MAAO,SAAM,QAAQU,CAAG,GAAK,OAAOA,GAAQ,gBAErC,QACT,CACF,EAOaD,GAAY,CAACE,EAAuBC,EAAc,KAAU,CACvE,IAAIC,EAAO,EACPhB,EAAac,EACjB,GAAIA,IAAU,OACL,OAAE,KAAAE,EAAM,MAAO,MAAU,EAElC,GAAIF,IAAU,KACL,OAAE,KAAAE,EAAM,MAAO,MAEpB,GAAA9C,GAAW,KAAK4C,CAAK,EACvBd,EAAQY,GAAUE,EAAM,MAAM,EAAG,EAAE,EAAGC,CAAW,EAAE,cAC1CD,IAAU,OACXd,EAAA,WACCc,IAAU,QACXd,EAAA,WACCc,IAAU,OACXd,EAAA,aACCc,IAAU,YACXd,EAAA,eACCc,EAAM,WAAW,SAAS,GAAKA,EAAM,WAAW,UAAU,EAC3Dd,EAAAc,UACCA,IAAU,GAEfC,EACMf,EAAA,GAEAA,EAAA,WAED,CAAC,MAAM,OAAOc,CAAK,CAAC,EAC7Bd,EAAQ,OAAOc,CAAK,EAEhBd,GAAS,OAAO,mBACVA,EAAAc,WAEDV,GAASJ,CAAK,EACvBA,EAAQQ,GAAWR,CAAK,UACfC,GAAYD,CAAK,EAAG,CACvB,MAAAiB,EAAalB,GAAgBC,CAAK,EACxCA,EAAQiB,GAA0BjB,OAE3BgB,EAAA,EAEF,OAAE,KAAAA,EAAM,MAAAhB,EACjB,EAKakB,GAAelB,GACnB,OAAOA,EAAU,IAMbmB,GAAanB,GACjB,CAACkB,GAAYlB,CAAK,EAOdO,EAAYhC,GAChB4C,GAAU5C,CAAG,GAAK,OAAOA,GAAQ,UAAYA,IAAQ,KAOjD6C,GAAapB,GACjBA,GAAA,MAAAA,EAAO,SAAWA,EAAM,SAAa,SAOjCqB,GAAarB,GACjBA,EAAQ,WAAWA,CAAK,EAAI,OAcxBsB,GAAYtB,GAChB,CAAC,MAAM,WAAWA,CAAK,CAAC,GAAK,CAAC,MAAMA,EAAQ,CAAC,EAOzCuB,GAAavB,GACjB,OAAOA,GAAU,UAMbwB,GAAYxB,GAChB,OAAOA,GAAU,SA6BbyB,GAActB,GAAyB,CAC9C,UAAOA,GAAQ,SACV,OAAAA,EAET,MAAMuB,EAAMvB,EAAI,QAAQ,WAAY,EAAE,EAClC,OAACmB,GAASI,CAAG,EAGR,OAAOA,CAAG,EAFV,CAIX,EAEaC,GAAcC,GAClBA,EAAK,QACV,WACCC,IACE,CACC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UACLA,CAAU,GASLC,GAAuB3B,IAE5BA,IAAI,QAAQ,0CAA2C,EAAE,EACxDA,GAOI4B,GAAsB5B,IAC3BA,IACH,QAAQ,KAAM,IAAI,EAClB,QAAQ,KAAM,IAAI,EAClB,QAAQ,KAAM,IAAI,EAClB,QAAQ,KAAM,IAAI,EAClB,QAAQ,KAAM,IAAI,EAClB,QAAQ,KAAM,IAAI,EAClB,QAAQ,KAAM,IAAI,EACdA,GAOI6B,GAA0B7B,IAC/BA,IAAI,QAAQ,SAAU,GAAG,EACxBA,GAQI8B,GAAa9B,IACxBA,EAAMA,EAAI,OACVA,EAAMA,EAAI,cACVA,EAAM6B,GAAuB7B,CAAG,EAChCA,EAAM2B,GAAoB3B,CAAG,EAC7BA,EAAM4B,GAAmB5B,CAAG,EACtBA,IAAI,QAAQ,KAAM,GAAG,EACpBA,GAGI+B,GAAaN,GAAiB,CACnC,MAAAO,EAAM,SAAS,cAAc,KAAK,EACxC,OAAAA,EAAI,UAAYP,EACTO,EAAI,aAAeA,EAAI,WAAa,EAC7C,EAQaC,GAAajC,GACjBA,EAAI,QAAQ,eAAiBkC,GAC3BA,EAAQ,CAAC,EAAE,aACnB,EAMUC,GAAanC,GACjBA,EAAI,QAAQ,SAAWoC,GAAW,IAAIA,EAAO,eAAe,EAOxDC,GAAcrC,GACrB,OAAOA,GAAQ,SAAiB,GAC7BA,EAAI,OAAO,CAAC,EAAE,cAAgBA,EAAI,MAAM,CAAC,EAWrCsC,GAAS,CACpB3E,EASI,GACJ4E,EAAgB,MACbC,IACA,CAEG,MAAAC,EAASrE,GAAa,CAC1B,UAAWsE,KAAQtE,EACb,OAAO,eAAe,KAAKA,CAAG,EAAEsE,CAAI,IAEpC/E,EAAQ,MACR,OAAO,UAAU,SAAS,KAAKS,EAAIsE,CAAI,CAAC,IAAM,kBAGrCH,EAAAG,CAAI,EAAIJ,GAAO3E,EAAS4E,EAASG,CAAI,EAAGtE,EAAIsE,CAAI,CAAC,EAGtD/E,EAAQ,WAEN,OAAO4E,EAASG,CAAI,EAAM,MACnBH,EAAAG,CAAI,EAAItE,EAAIsE,CAAI,GAElB/E,EAAQ,YAEb,OAAOS,EAAIsE,CAAI,EAAM,MACdH,EAAAG,CAAI,EAAItE,EAAIsE,CAAI,GAElB/E,EAAQ,aAEb,MAAM,QAAQ4E,EAASG,CAAI,CAAC,GAAK,MAAM,QAAQtE,EAAIsE,CAAI,CAAC,EACjDH,EAAAG,CAAI,EAAI,CAAC,GAAGH,EAASG,CAAI,EAAG,GAAGtE,EAAIsE,CAAI,CAAC,EAK1CH,EAAAG,CAAI,EAAItE,EAAIsE,CAAI,EAIjC,EAIF,QAASjF,EAAI,EAAGA,EAAI+E,EAAQ,OAAQ/E,IAC5BgF,EAAAD,EAAQ/E,CAAC,CAAC,EAGX,OAAA8E,CACT,EAOaI,GAAQ,CAAUC,EAAelC,IACxC,MAAM,QAAQA,CAAG,EACfkC,EACMlC,EAAY,IAAKmC,GAAWF,GAAW,GAAME,CAAC,CAAC,EAE/CnC,EAAY,QAGpBN,EAASM,CAAG,EACP4B,GAAO,CAAE,KAAAM,CAAQ,KAAIlC,CAAG,EAG1BA,ECpdF,MAAMoC,GAAe,CAC1BC,EACAC,EACAC,IACG,CACH,GAAI,CAACD,EACG,UAAI,MAAM,0BAA4BA,CAAa,EAGrD,MAAAE,EAAWH,EAAG,aAAaC,CAAa,EAC1C,IAAAG,EACAC,EAAU,GACd,OAAQ,OAAOH,EAAU,CACvB,IAAK,SACL,IAAK,SACL,IAAK,UACHE,EAAoB,OAAOF,CAAQ,EACnC,MACF,IAAK,YACiBE,EAAA,OACtB,IAAK,SACCF,IAAa,KACKE,EAAA,KAEAA,EAAA5D,GAAc0D,EAAU,CAAC,EAE/C,MACF,QACEE,EAAoB,OAAOF,CAAQ,EACnC,KACJ,CAEI,OAAAE,GAAsB,MACxBJ,EAAG,gBAAgBC,CAAa,EACtBI,EAAA,IAENF,IAAaC,IACZJ,EAAA,aAAaC,EAAeG,CAAiB,EACtCC,EAAA,IAGP,CACL,KAAMJ,EACN,SAAUG,EACV,SAAAD,EACA,QAAAE,CAAA,CAEJ,EAEaC,GAAcC,GAAyB,CAClD,MAAMC,EAAUZ,GAAM,GAAOW,EAAQ,OAAO,EAC5C,UAAWE,KAAQD,EACbA,EAAQC,CAAI,IACdD,EAAQC,CAAI,EAAI/C,GAAU8C,EAAQC,CAAI,EAAG,EAAI,EAAE,OAG5C,OAAAD,CACT,EAOaE,EAAqBV,GAA2B,CJzEtD,IAAAW,EI0ED,IAACX,EAAG,gBACC,SAET,MAAMY,EAAaZ,EAAG,WACtB,MAAI,EAAAY,EAAW,SAAW,GAAKA,EAAW,CAAC,EAAE,WAAa,IACpD,CAACA,EAAW,CAAC,EAAE,aAAaD,EAAAC,EAAW,CAAC,EAAE,YAAd,YAAAD,EAAyB,UAAW,IAKxE,EAKaE,GACXb,GAMG,CACH,MAAMc,EAAoB,GACrB,GAAAd,EAAyB,OAAS,WACrC,OAAQA,EAAwB,QAClC,GAAYA,EAAyB,OAAS,kBAAmB,CAC/D,MAAMpF,EAAkCoF,EAAyB,QAEjE,UAAWe,KAAOnG,EACZ,GAAAA,EAAQmG,CAAG,EAAG,CACV,MAAAC,EAASpG,EAAQmG,CAAG,EACtBC,EAAO,UACDF,EAAA,KAAKE,EAAO,KAAK,EAKxB,OAAAF,cAENd,EAAmB,cACnBA,EAAmB,aAAa,iBAAiB,EAE1CA,EAAmB,UAEnBA,EAAwB,KAEpC,EAqBaiB,GAAY,MACvBC,GAEO,IAAI,QAAe3F,GAAY,CAChC,IAAA4F,EACJ,MAAMC,EAAc,IAAM,CACpBD,IAAkB,QACpB,aAAaA,CAAa,EAG5BA,EAAgB,WAAW,IAAM,CACvB5F,KACP,GAAG,GAEM2F,EAAA,oBAAoB,SAAUE,CAAW,EACvDF,EAAc,iBAAiB,SAAUE,EAAa,CAAE,QAAS,GAAM,EAC3DA,GAAA,CACb,EAYUC,GAAW,MACtBC,EACAC,EAAS,EACTL,EAAmE,OACnEM,EAAmC,WACnCC,EAA0C,WACvC,CACEP,IACaA,EAAA,QAGZ,MAAAQ,EAAgBT,GAAUC,CAAa,EAE7C,IAAIS,EAAM,EACNC,EAAO,EAGX,GAAKV,EAAyB,SAC5B,GAAIM,IAAU,WAAY,CAClB,MAAAK,EACHX,EAAyB,SACzBA,EAAyB,YAC5BS,EAAM,KAAK,MAAML,EAAG,wBAAwB,IAAMO,EAAUN,CAAM,MAC7D,CACC,MAAAO,EACHZ,EAAyB,SACzBA,EAAyB,YAC5BU,EAAO,KAAK,MAAMN,EAAG,wBAAwB,KAAOQ,EAAUP,CAAM,UAGlEC,IAAU,WAAY,CACxB,MAAMO,EAAYxD,GAChB,OAAO,iBAAiB2C,CAA4B,EAAE,WAExDS,EAAM,KAAK,MAAML,EAAG,UAAYC,EAASQ,CAAS,MAC7C,CACL,MAAMC,EAAazD,GACjB,OAAO,iBAAiB2C,CAA4B,EAAE,YAExDU,EAAO,KAAK,MAAMN,EAAG,WAAaC,EAASS,CAAU,EAIzD,OAAAd,EAAc,OAAO,CACnB,SAAAO,EACA,KAAAG,EACA,IAAAD,CAAA,CACD,EAEMD,CACT,EAEaO,GACXf,GACW,CAEX,GAAKA,EAAyB,SAAU,CACtC,MAAMgB,EAAMhB,EACNiB,EAAMD,EAAI,SAEb,OAAAA,EAAY,YACb,KAAK,IACHC,EAAI,KAAK,aACTA,EAAI,KAAK,aACTA,EAAI,gBAAgB,aACpBA,EAAI,gBAAgB,aACpBA,EAAI,gBAAgB,aACpB,GAIN,OAAQjB,EAA8B,YACxC,EAEakB,GACXlB,GACW,CAEX,GAAKA,EAAyB,SAAU,CACtC,MAAMgB,EAAMhB,EACNiB,EAAMD,EAAI,SAEb,OAAAA,EAAY,YACb,KAAK,IACHC,EAAI,KAAK,YACTA,EAAI,KAAK,YACTA,EAAI,gBAAgB,YACpBA,EAAI,gBAAgB,YACpBA,EAAI,gBAAgB,aAI1B,OAAQjB,EAA8B,WACxC,EAEamB,GAAmB,MAC9BnB,EACAoB,EACAd,EAA4C,WAC5CC,EAA0C,WACvC,CJ/QE,IAAAd,EAAA4B,EIgRD,IAAAZ,EACAC,EAEJ,GAAI,CAACV,EACH,OAGI,MAAAQ,EAAgBT,GAAUC,CAAa,EAEzC,GAAAM,IAAU,YAAcA,IAAU,OACpC,OAAQc,EAAU,CAChB,IAAK,QACGX,EAAA,EACN,MACF,IAAK,MACHA,EAAMM,GAAgBf,CAAa,EACnC,MACF,IAAK,SACHS,EAAMM,GAAgBf,CAAa,EAC/BS,IACKA,GAAA,EAEFT,EAAyB,SACnBS,MAAAhB,EAAAO,EAAyB,iBAAzB,YAAAP,EAAyC,SAAU,GAAK,EAEjEgB,GAAQT,EAA8B,aAAe,GAGzD,MACF,QACQS,EAAAW,EACN,KACJ,CAGE,GAAAd,IAAU,cAAgBA,IAAU,OACtC,OAAQc,EAAU,CAChB,IAAK,QACIV,EAAA,EACP,MACF,IAAK,MACHA,EAAOQ,GAAelB,CAAa,EACnC,MACF,IAAK,SACHU,EAAOQ,GAAelB,CAAa,EAC/BU,IACMA,GAAA,EAEHV,EAAyB,SAClBU,MAAAW,EAAArB,EAAyB,iBAAzB,YAAAqB,EAAyC,QAAS,GAAK,EAEjEX,GAASV,EAA8B,YAAc,GAGzD,MACF,QACSU,EAAAU,EACP,KACJ,CAGF,OAAApB,EAAc,OAAO,CACnB,SAAAO,EACA,IAAAE,EACA,KAAAC,CAAA,CACD,EAEMF,CACT,EAEac,GACXC,GAGIA,EAAgB,QAChBA,EAAc,eACdA,EAAqB,eAErBA,EAAc,gBACdA,EAAc,YAIPC,GAAwB,IAAM,CACzC,MAAMC,EAAI,KAAK,IACb,SAAS,gBAAkB,SAAS,gBAAgB,YAAc,EAClE,OAAO,YAAc,GAMhB,OACL,EALQ,KAAK,IACb,SAAS,gBAAkB,SAAS,gBAAgB,aAAe,EACnE,OAAO,aAAe,GAItB,EAAAA,CAAA,CAEJ,EASaC,GAAe,CAC1BC,EACAtB,EAKI,KACD,CACH,GAAI,CAACsB,EACI,SAGH,MAAAC,EAAWD,EAAK,wBAEhBE,EAAKL,KAEXnB,EAAO,MAAPA,EAAO,IAAQ,GACfA,EAAO,OAAPA,EAAO,KAAS,GAChBA,EAAO,SAAPA,EAAO,OAAW,GAClBA,EAAO,QAAPA,EAAO,MAAU,GAEVA,EAAA,KAAOwB,EAAG,EAAID,EAAS,OACvBvB,EAAA,MAAQwB,EAAG,EAAID,EAAS,MAEzB,MAAAE,EACJF,EAAS,IAAMA,EAAS,QAAUvB,EAAO,QACzCuB,EAAS,OAASA,EAAS,QAAUvB,EAAO,IAExC0B,EACJH,EAAS,KAAOA,EAAS,OAASvB,EAAO,OACzCuB,EAAS,MAAQA,EAAS,OAASvB,EAAO,KAE5C,OAAOyB,GAAYC,CACrB,EAkDaC,GAASC,GAAyB,CAC7C,GAAI,CAACA,GAAY,OAAOA,GAAa,WAC5B,WAAI,MAAM,2BAA2B,EAmBxC,MAAAC,EAAcX,GAAuC,CAErDA,GAAA,MAAAA,EAAO,MAEP,SAAS,aAAe,YACjBU,IACJ,SAAiB,aACnB,SAAiB,YAAY,qBAAsBC,CAAU,EAEvD,6BAAoB,mBAAoBA,CAAU,EAC7D,EAGG,SAAiB,aACnB,SAAiB,YAAY,qBAAsBA,CAAU,EAE5D,SAAS,kBACF,0BAAiB,mBAAoBA,CAAU,EAE/CA,GACb,EAEaC,GAAa,MACxBC,EACAC,EACAC,EAAQ,GACRC,EAAQ,KAEO,MAAM,IAAI,QAA2B,CAAClI,EAASC,IAAW,CACnEkI,MAAS,SAAS,eAAeH,CAAE,EACvC,GAAIG,GAEEA,GADJ,QAAQ,KAAK,oCAAoC,EAC7CA,EAAO,aAAa,QAAQ,EAC9B,OAAOnI,EAAQmI,CAAM,OAGvBA,EAAS,SAAS,cAAc,QAAQ,EACxCA,EAAO,KAAO,kBACdA,EAAO,GAAKH,EACZG,EAAO,IAAMJ,EACTE,IACFE,EAAO,MAAQ,IAEbD,IACFC,EAAO,MAAQ,KAEJ,SAAS,MAAQ,SAAS,qBAAqB,MAAM,EAAE,CAAC,GAChE,YAAYA,CAAM,EAIpBA,EAAe,aACjBA,EAAe,mBAAqB,UAAY,EAE5CA,EAAe,aAAe,UAC9BA,EAAe,aAAe,cAE9BA,EAAe,mBAAqB,KACrCA,WAAQ,aAAa,SAAU,QAC/BnI,EAAQmI,CAA2B,EACrC,GAKJA,EAAO,iBAAiB,OAAQ,IAAM,CACpCA,WAAQ,aAAa,SAAU,QAC/BnI,EAAQmI,CAA2B,EACpC,EACDA,EAAO,iBAAiB,QAAS,IAAI7I,IAAS,CAC5C,MAAMsB,EAAQ,IAAI,MAAM,yBAA0BuH,iBAAQ,IAAG,EAC7D,QAAQ,MAAMvH,CAAK,EACX,cAAM,GAAGtB,CAAI,EACrBW,EAAOW,CAAK,EACb,EACF,EAKUwH,GAAUC,GAA2B,CAC7C,GACDA,GAAU,CAAC,EAAE,KAAK,OAAW,EAAAC,WACtB,SAAS,eAAeD,CAAM,GAEhC,OAAAA,CACT,EASaE,GAAkB,CAC7BvD,EACAwD,EAAe,GACfC,EAAa,KACV,CAEH,MAAMC,EAAY,OAAO1D,GAAY,SAAWA,EAAUA,EAAQ,UAC5DuD,EAAkBG,EAAU,SAAS,GAAG,EAC1CH,MAAmBC,GAAgB,eAAgB,CAC/C,MAAAG,EAAoB,eAAe,IAAID,CAAS,EACtD,OAAKC,EAIDF,EACKE,IAAsB3D,EAAQ,YAGhC,GAPE,GASJuD,QACT,EAOaK,GAAuB,MAAO5D,IACnC,qBAAe,YAAYA,EAAQ,SAAS,EAC3CA,GA8EI6D,GAAmBpE,GAAuB,CACrD,GAAI,CAACA,EACI,SAET,IAAItF,EAAI,EACL,GACDA,IACAsF,EAAMA,EAAmB,6BAClBA,GACF,OAAAtF,CACT,EChrBM2J,GACJ,OAAO,QAAY,KACnB,QAAQ,UAAY,MACpB,QAAQ,SAAS,MAAQ,KAGzB,CAACA,IACe,OAAO,kBAAvB,KACe,OAAO,eAAtB,YACA,qBAAqB,gBAUpB,OAAO,OAAW,KAAe,OAAO,OAAS,UACjD,OAAO,UAAc,MACnB,UAAU,UAAU,SAAS,SAAS,GACrC,UAAU,UAAU,SAAS,OAAO,GAS3B,OAAO,KAAS,KAAe,OAAO,KAAK,KAAS,IC/BnE,MAAMC,GAAyC,GAC/C,IAAIC,GAAwB,GAC5B,MAAMC,GAAgB,gBAAkB,KAAK,SAAW,IAElDC,GAAkB,SAAUhC,EAAqB,CAEnDA,EAAM,SAAW,QACjB,OAAOA,EAAM,MAAS,UACtBA,EAAM,KAAK,QAAQ+B,EAAa,IAAM,GAEtCE,GAAa,CAACjC,EAAM,KAAK,MAAM+B,GAAc,MAAM,CAAC,CAExD,EAEI,QACK,wBAAiB,UAAWC,GAAiB,EAAK,EAoB3D,SAASE,GAAgBC,EAAgB,CACvC,OAAON,GAAcM,CAAM,CAC7B,CAEA,SAASC,GAAIC,EAAY,CACvB,MAAM3B,EAAW2B,EAAK,SAChBjK,EAAOiK,EAAK,KAClB3B,EAAS,GAAGtI,CAAI,CAClB,CAEA,SAAS6J,GAAaE,EAAa,CAGjC,GAAIL,GAGS,WAAAG,GAAc,EAAGE,CAAM,MAC7B,CACC,MAAAE,EAAOR,GAAcM,CAAM,EACjC,GAAIE,EAAM,CACgBP,GAAA,GACpB,IACFM,GAAIC,CAAI,SACR,CACAH,GAAgBC,CAAM,EACEL,GAAA,EAC1B,GAGN,CC3EA,MAAMQ,GAA+BC,GAAiB,CAC9C,MAAAC,EAAW,SAAS,cAAc,UAAU,EAClDA,EAAS,MAAQD,EAGjBC,EAAS,MAAM,IAAM,IACrBA,EAAS,MAAM,KAAO,IACtBA,EAAS,MAAM,SAAW,QAEjB,cAAK,YAAYA,CAAQ,EAClCA,EAAS,MAAM,EACfA,EAAS,OAAO,EAEZ,IAEI,MAAAC,EADa,SAAS,YAAY,MAAM,EACrB,aAAe,eAChC,YAAI,sCAAsCA,MAAQF,GAAM,QACzDG,GACC,cAAM,iCAAkCA,CAAG,CACrD,CAES,cAAK,YAAYF,CAAQ,CACpC,EAMaG,GAAsB,MAAOJ,GAAiB,CACrD,IAAC,UAAU,UAAW,CACxBD,GAA4BC,CAAI,EAChC,OAEE,IACI,gBAAU,UAAU,UAAUA,CAAI,EAChC,YAAI,wCAA0CA,CAAI,QACnD7I,GACC,cAAM,wBAAyBA,CAAK,CAC9C,CACF,EAQakJ,GAAQ,IAAM,CACzB,MAAMC,EAAK,UAAU,UACfC,EAAW,OAAO,UAAU,SAE5BC,EAAM,CACV,SAAU,iBACV,SAAU,iBACV,UAAW,iBACX,UAAW,kBACX,QAAS,WACT,aAAc,WACd,QAAS,WACT,IAAK,sBACL,MAAO,WACP,KAAM,4BACN,YAAa,yBACb,UAAW,wCACX,IAAK,aACL,IAAK,QAGDC,EAAY,CAChB,MAAO,SAEP,KAAM,+BACN,MAAO,SAEP,aAAc,iBACd,aAAc,iBACd,oBAAqB,OAErB,eAAgB,oBAChB,YAAa,gBACb,YAAa,gBACb,YAAa,gBACb,aAAc,iBAEd,OAAQ,UAER,QAAS,kCAGX,UAAWC,KAAS,OAAO,KAAKF,CAAG,EAE7B,GADUA,EAAIE,CAAK,EACb,KAAKJ,CAAE,EAEX,OAAAI,IAAU,OAAS,eAAgB,SAC9B,MAEFA,EAIX,UAAWC,KAAe,OAAO,KAAKF,CAAS,EAIzC,GADUA,EAAUE,CAAW,EACzB,KAAKJ,CAAQ,EACd,OAAAI,EAIJ,eACT,EAGaC,GAAY,IAAM,CAC7B,MAAMC,EAAKR,KAEX,IAAIS,EAAW,GACXC,EAAY,GACZC,EAAgB,GAEpB,OAAQH,EAAI,CACV,IAAK,UACL,IAAK,YACL,IAAK,WACL,IAAK,WACL,IAAK,YACL,IAAK,YACL,IAAK,cACL,IAAK,MACL,IAAK,MACL,IAAK,QACL,IAAK,OACHE,EAAY,GACZ,MAEF,IAAK,MACL,IAAK,UACL,IAAK,eACL,IAAK,UACHD,EAAW,GACX,KACJ,CAEA,OAAID,EAAG,SAAS,aAAa,GAAKA,EAAG,SAAS,UAAU,KACtDG,EAAgB,IAGX,CACL,SAAAF,EACA,UAAAC,EACA,cAAAC,CAAA,CAEJ,EAEaF,GAAW,IACfF,GAAY,WAGRG,GAAY,IAChBH,GAAY,YC5HRK,GAAeC,GAA2B,CACrD,GAAI,CAACA,EACH,OAAO,OAAO,SAEV,MAAAC,EAAI,SAAS,cAAc,GAAG,EACpC,OAAAA,EAAE,KAAOD,EACFC,CACT,EAQaC,GACXF,GACwC,CAClC,MAAAG,EAAWJ,GAAYC,CAAG,EAC1BI,EAAcL,GAAc,WAC9B,OAAAI,EAAS,WAAaC,EACjB,CACL,IAAKD,EAAS,SAAWA,EAAS,OAASA,EAAS,KACpD,SAAAA,CAAA,EAGK,CACL,IAAKE,GAAOL,CAAG,EACf,SAAAG,CAAA,CAGN,EAOaE,GAAUL,GAAyB,CACxC,MAAAG,EAAWJ,GAAYC,CAAG,EAE9B,OAAAG,EAAS,SACT,KACAA,EAAS,KACTA,EAAS,SACTA,EAAS,OACTA,EAAS,IAEb,EAKaG,GAAU,CAACC,EAAmBC,EAAoB,KAAU,CACvE,GAAID,EAAU,CACZ,MAAME,EAAYV,KACZW,EAAYX,GAAYQ,CAAQ,EAEtC,OAAIC,GAEEC,EAAU,SAAWC,EAAU,OAC1B,GAKTD,EAAU,WAAaC,EAAU,UACjCD,EAAU,WAAaC,EAAU,SAG9B,QACT,EAKaC,GAAiBJ,GAAsB,CAClD,GAAIA,EAAU,CACZ,MAAMJ,EAAWJ,KACXa,EAAWT,EAAS,SACpBU,EAAWV,EAAS,SACpBW,EAAgBf,GAAYQ,CAAQ,EACpCQ,EAAgBD,EAAc,SAC9BE,EAAgBF,EAAc,SACpC,OAAOD,IAAaG,GAAiBJ,EAAS,WAAWG,CAAa,EAEjE,QACT,EAQaE,GAAajB,GACjBA,EAAI,QAAQ,MAAO,EAAE,EASjBkB,GAAU,CAACC,EAAYnB,IAAiB,CAC7C,MAAAG,EAAWJ,GAAYC,CAAG,EAC1BoB,EAAO,OAAOD,EAAM,IAAcA,EAAIhB,EAAS,KAC/CkB,EAAWlB,EAAS,SAE1B,GAAIiB,IAAS,GACX,OAAO,OAAOA,CAAI,EAEpB,GAAIC,IAAa,QACR,UAGT,GAAIA,IAAa,SACR,UAEX,EAMaC,GAAiBtB,GACvBA,EAGe,IAAI,OAAO,kBAAmB,GAAG,EAEvC,KAAKA,CAAG,GACpBA,EAAI,WAAW,SAAS,GACxBA,EAAI,WAAW,MAAM,GACrBA,EAAI,WAAW,MAAM,EAPd,GAWEuB,GAAiBC,GAAwB,CAChD,GAAAF,GAAcE,CAAW,EAAG,CAC9B,MAAMrB,EAAWJ,KACX0B,EAAOtB,EAAS,SAAW,KAAOA,EAAS,SACjD,IAAIuB,EAAa,GACb,OAAAF,EAAY,WAAWC,CAAI,IAChBC,EAAA,IAERA,EAEF,QACT,ECtLO,MAAeC,EAA8B,CASlD,YAAYC,EAAoB,CARtBC,EAAA,iBASR,KAAK,SAAWD,CAClB,CAaO,YAAYA,EAA8B,CAC3C,IAACzK,EAASyK,CAAQ,EACd,UAAI,MAAM,oDAAoD,EAEtE,UAAW/G,KAAO+G,EAChB,GAAIA,EAAS/G,CAAG,GAAKA,IAAQ,aAAc,CACnC,MAAAR,EAAUuH,EAAS/G,CAAG,EACvB,cAASR,EAASQ,CAAG,EAG9B,OAAO,KAAK,QACd,CACF,CC5BO,MAAMiH,EAAN,KAAe,CAwFpB,YAAYC,EAAYC,EAAiB/E,EAAgC,CAdlE4E,EAAA,gBACAA,EAAA,iBACAA,EAAA,mBACAA,EAAA,YACAA,EAAA,eACAA,EAAA,YACAA,EAAA,eASL,KAAK,QAAUG,EACf,KAAK,SAAW/E,EAChB,KAAK,WAAa,GACZ,MAAAgF,EAAc,KAAK,QACzB,KAAK,IAAMA,EAAY,IACvB,KAAK,OAASA,EAAY,OACrB,SAAM,KAAK,cAAcF,CAAK,EAC9B,YAAS,KAAK,UACf5K,EAAS,KAAK,MAAM,GACtB2K,EAAS,IAAI,GAAM,KAAK,IAAK,KAAK,OAAQ,KAAK,QAAQ,CAE3D,CA/FA,OAAc,cAAcpN,EAAiC,CACvD,IAACA,EAAQ,SACL,UAAI,MAAM,wBAAwB,EAUtC,GAPAA,EAAQ,WACVoN,EAAS,SAAW,CAAE,GAAGA,EAAS,SAAU,GAAGpN,EAAQ,UACvDoN,EAAS,WAAa,OAAO,KAAKA,EAAS,QAAQ,GAGrDA,EAAS,cAAgBpN,EAAQ,eAAiBoN,EAAS,WAAW,CAAC,EAEnE,CAACA,EAAS,cACN,UAAI,MAAM,4BAA4B,CAEhD,CAMA,OAAc,SAASE,EAAiBE,EAAmB,CACzD,MAAMC,EAAgB,GACtB,IAAIC,EAAe,CAAE,EAAGF,EAAM,KAAM,EAAG,EACnCG,EACAC,EAEJ,IAAKD,EAAQ,EAAGA,EAAQL,EAAQ,OAAQK,IAChCC,EAAAN,EAAQ,OAAOK,CAAK,EACtB,CAACP,EAAS,WAAW,QAAQQ,CAAG,GAClCH,EAAO,KAAKC,CAAO,EACnBA,EAAU,CAAE,EAAGE,EAAK,KAAM,EAAG,GAE7BF,EAAQ,MAAQE,EAGpB,OAAAH,EAAO,KAAKC,CAAO,EACZD,CACT,CAOA,OAAc,IAAItH,EAAU1F,EAAU,CAC7B,OAAA2M,EAAS,SAASjH,EAAI,CAAC,EAAE,IAAI1F,EAAK0F,EAAI,IAAI,CACnD,CASA,OAAc,IACZ0H,EACA1H,EACA1F,EACA8H,EACA,CACIsF,EACOT,EAAA,SAASjH,EAAI,CAAC,EAAE,QAAQ1F,EAAK0F,EAAI,KAAMoC,CAAQ,EAE/C6E,EAAA,SAASjH,EAAI,CAAC,EAAE,UAAU1F,EAAK0F,EAAI,KAAMoC,CAAQ,CAE9D,CAkCO,OAAQ,CACT,IAAAuF,EACAN,EAEJ,GAAI,CAACJ,EAAS,YAAc,CAACA,EAAS,WAAW,OAC/C,MAAM,IAAI,MACR,uEAAuE,KAAK,UAC1EA,EAAS,2BACM,KAAK,UAAUA,EAAS,QAAQ,MAcjD,GAVA,CAACA,EAAS,WAAW,QAAQ,KAAK,QAAQ,CAAC,CAAC,GACvCI,EAAA,KAAK,QAAQ,CAAC,EACdM,EAAA,KAAK,QAAQ,OAAO,CAAC,IAE5BN,EAAOJ,EAAS,cAChBU,EAAO,KAAK,SAGd,KAAK,OAASV,EAAS,SAASU,EAAMN,CAAI,EAEtC,CAAC,KAAK,OAAO,OACT,UAAI,MAAM,sBAAsB,EAGnC,gBAAM,KAAK,OAAO,IAAI,EAEpB,CACL,IAAK,KAAK,IACV,OAAQ,KAAK,OAEjB,CAMO,SAAU,CACf,IAAIE,EAAe,KAAK,IACpBK,EAAY,GACZC,EACAC,EAEJ,QAASN,EAAQ,EAAGA,EAAQ,KAAK,OAAO,OAAQA,IACtCM,EAAA,KAAK,OAAON,CAAK,EACrBlL,EAASiL,CAAO,GACd,OAAO,KAAK,WAAWC,CAAK,EAAM,KAC7BK,EAAA,KAAK,WAAWL,CAAK,EACxBD,IAAYM,IACdZ,EAAS,IAAI,GAAOa,EAAOD,EAAM,IAAI,EACrCZ,EAAS,IAAI,GAAMa,EAAOP,EAAS,IAAI,EAClC,gBAAWC,CAAK,EAAID,KAG3BN,EAAS,IAAI,GAAMa,EAAOP,EAAS,IAAI,EAClC,gBAAWC,CAAK,EAAID,GAEjBA,EAAAN,EAAS,IAAIa,EAAOP,CAAO,IAEjCK,IAAc,KACJA,EAAAJ,GAEPK,EAAA,KAAK,WAAWL,CAAK,EACxBK,GACFZ,EAAS,IAAI,GAAOa,EAAOD,EAAM,IAAI,GAI3C,OAAID,IAAc,IACX,gBAAW,OAAOA,CAAS,EAE3BL,CACT,CAKO,MAAO,CACR,IAAAnI,EACAD,EACE,MAAA4I,EAAO,KAAK,UACdA,IAAS,KAAK,QACZzL,EAAS,KAAK,MAAM,GACtB2K,EAAS,IAAI,GAAO,KAAK,IAAK,KAAK,OAAQ,KAAK,QAAQ,EAGtD3K,EAASyL,CAAI,GACfd,EAAS,IAAI,GAAM,KAAK,IAAKc,EAAM,KAAK,QAAQ,EAGlD3I,EAAW,KAAK,QAChB,KAAK,OAAS2I,EACd5I,EAAW,KAAK,SACZA,IAAaC,GAAY,MAAM,QAAQD,CAAQ,IACjD,KAAK,SAAS,QAEP,MAAM,QAAQ4I,CAAI,GAC3B,KAAK,SAAS,MAElB,CAMO,OAAQ,CACT,GAAAzL,EAAS,KAAK,MAAM,EACtB,OAAO2K,EAAS,IAAI,KAAK,IAAK,KAAK,MAAM,CAE7C,CAOO,SAASlL,EAAY,CACtBO,EAAS,KAAK,MAAM,GACb2K,EAAA,SAAS,KAAK,IAAI,CAAC,EAAE,IAAI,KAAK,OAAQ,KAAK,IAAI,KAAMlL,CAAK,CAEvE,CAKO,WAAY,CACb,IAAAzB,EACAwN,EAEJ,QAASN,EAAQ,EAAGA,EAAQ,KAAK,OAAO,OAAQA,IACtCM,EAAA,KAAK,OAAON,CAAK,EACnBlN,EAAA,KAAK,WAAWkN,CAAK,EACvBlN,GACF2M,EAAS,IAAI,GAAOa,EAAOxN,EAAK,IAAI,EAIpCgC,EAAS,KAAK,MAAM,GACtB2K,EAAS,IAAI,GAAO,KAAK,IAAK,KAAK,OAAQ,KAAK,QAAQ,CAE5D,CAOO,cAAc3M,EAAU,CACzB,IAAA0N,EACAT,EACA,IAACjN,EAAI,QACA,OAAAA,EAUT,IAPI,KAAK,OAAO,OACH0N,EAAA,KAAK,OAAO,CAAC,EAAE,KAE1BA,EAAW,KAAK,IAAI,KAGZT,EAAAjN,EACHiN,EAAQ,SAAWA,EAAQS,CAAQ,IAAM,QAC9CT,EAAUA,EAAQ,QAEb,OAAAA,CACT,CACF,EAjRO,IAAMU,GAANhB,EACLD,EADWiB,GACG,YACdjB,EAFWiB,GAEG,aAAuB,IACrCjB,EAHWiB,GAGG,iBCLT,MAAMC,WACHpB,EAEV,CAME,YAAYqB,EAAoB,CAC9B,MAAMA,CAAQ,EANNnB,EAAA,YAA0B,UAOpC,CAKO,SACLoB,EACAC,EACAC,EAAgB,GACN,CACV,MAAMC,EAAOD,EACTD,GAAgBD,EAAQ,KACxBA,EAAQ,MAAQC,EACpB,GAAI,CAACE,EACG,UAAI,MAAM,yBAAyB,EAEtC,cAASA,CAAI,EAAIH,EACtB,MAAMvO,EAAU,CAAE,SAAU,KAAK,QAA4B,EAC7D,OAAAoO,GAAS,cAAcpO,CAAO,EACvB,KAAK,QACd,CACF,CCnCO,MAAM2O,WAAuB1B,EAAoC,CAOtE,YAAY2B,EAAkB,CAC5B,MAAMA,CAAO,EAPLzB,EAAA,YAA0B,SAQpC,CAKO,SACL0B,EACAL,EACAC,EAAgB,GAChB,CACA,GAAI,CAACI,EACG,UAAI,MAAM,+BAA+B,EAGjD,MAAMH,EAAOD,EACTD,GAAgBK,EAAO,IACvBA,EAAO,KAAOL,EAElB,GAAI,CAACE,EACG,UAAI,MAAM,wBAAwB,EAGrC,qBAASA,CAAI,EAAIG,EACf,KAAK,QACd,CACF,CCxCO,MAAMC,GAAN,KAAsB,CAyCzB,YAAYC,EAAW,CANvB5B,EAAA,cAAS,IACTA,EAAA,kBAAa,IACbA,EAAA,kBAAa,aAKT,GAAI4B,EACA,OAAID,GAAgB,UAAUC,CAAS,IAGvC,KAAK,WAAaA,EAClBD,GAAgB,UAAUC,CAAS,EAAI,MAChCD,GAAgB,UAAUC,CAAS,CAEjD,CAhDD,OAAO,eAAgB,CACnB,OAAO,OAAO,KAAK,KAAK,SAAS,CACpC,CACD,OAAO,YAAYA,EAAY,OAAQ,CACnC,MAAM/M,EAAS8M,GAAgB,UAAUC,CAAS,EAClD,OAAK/M,GACM,IAAI,KAAK+M,CAAS,CAGhC,CACD,OAAO,iBAAkB,CACrB,OAAOD,GAAgB,SAC1B,CACD,OAAO,cAAcC,EAAY,OAAQ,CACrC,MAAMC,EAAWF,GAAgB,UAAUC,CAAS,EACpD,OAAAC,EAAS,OAAS,GAClBA,EAAS,WAAa,GACfA,CACV,CACD,OAAO,eAAeD,EAAY,OAAQ,CACtC,KAAK,cAAcA,CAAS,EAC5B,OAAO,KAAK,UAAUA,CAAS,CAClC,CACD,OAAO,mBAAoB,CACvB,MAAME,EAAa,KAAK,gBACxB,UAAWF,KAAaE,EACpB,KAAK,cAAcF,CAAS,CAEnC,CACD,OAAO,oBAAqB,CACxB,KAAK,kBAAiB,EACtB,KAAK,UAAY,EACpB,CAID,IAAI,WAAY,CACZ,OAAO,KAAK,UACf,CAWD,KAAKG,EAAW3O,EAAI4O,EAAa,CAC7B,YAAK,WAAWD,CAAS,EAAI,KAAK,WAAWA,CAAS,GAAK,GACvD,OAAOC,EAAgB,IACvB,KAAK,WAAWD,CAAS,EAAE,KAAK,CAC5B,GAAI3O,EAAG,KAAK4O,CAAW,EACvB,MAAO5O,EACP,YAAA4O,CAChB,CAAa,EAGD,KAAK,WAAWD,CAAS,EAAE,KAAK3O,CAAE,EAE/B,IACV,CACD,GAAG2O,EAAW3O,EAAI4O,EAAa,CAC3B,YAAK,OAAOD,CAAS,EAAI,KAAK,OAAOA,CAAS,GAAK,GAC/C,OAAOC,EAAgB,IACvB,KAAK,OAAOD,CAAS,EAAE,KAAK,CACxB,GAAI3O,EAAG,KAAK4O,CAAW,EACvB,MAAO5O,EACP,YAAA4O,CAChB,CAAa,EAGD,KAAK,OAAOD,CAAS,EAAE,KAAK3O,CAAE,EAE3B,IACV,CACD,IAAI2O,EAAW3O,EAAI4O,EAAa,CAC5B,GAAID,IAAc,OACd,YAAK,OAAS,GACd,KAAK,WAAa,GACX,KAEX,GAAI3O,IAAO,OACP,GAAI4O,IAAgB,OAAW,CAC3B,GAAID,KAAa,KAAK,OAClB,SAAW,CAACpP,EAAG+H,CAAK,IAAK,KAAK,OAAOqH,CAAS,EAAE,UAAW,CACvD,MAAME,EAAWvH,EACbuH,EAAS,QAAU7O,GAAM6O,EAAS,cAAgBD,GAClD,KAAK,OAAOD,CAAS,EAAE,OAAOpP,EAAG,CAAC,EAI9C,GAAIoP,KAAa,KAAK,WAClB,SAAW,CAACpP,EAAG+H,CAAK,IAAK,KAAK,WAAWqH,CAAS,EAAE,UAAW,CAC3D,MAAME,EAAWvH,EACbuH,EAAS,QAAU7O,GAAM6O,EAAS,cAAgBD,GAClD,KAAK,WAAWD,CAAS,EAAE,OAAOpP,EAAG,CAAC,OAKjD,CACD,GAAIoP,KAAa,KAAK,OAClB,SAAW,CAACpP,EAAG+H,CAAK,IAAK,KAAK,OAAOqH,CAAS,EAAE,UAC3BrH,IACAtH,GACb,KAAK,OAAO2O,CAAS,EAAE,OAAOpP,EAAG,CAAC,EAI9C,GAAIoP,KAAa,KAAK,WAClB,SAAW,CAACpP,EAAG+H,CAAK,IAAK,KAAK,WAAWqH,CAAS,EAAE,UAC/BrH,IACAtH,GACb,KAAK,WAAW2O,CAAS,EAAE,OAAOpP,EAAG,CAAC,OAOtD,KAAK,OAAOoP,CAAS,EAAI,GACzB,KAAK,WAAWA,CAAS,EAAI,GAEjC,OAAO,IACV,CACD,QAAQA,KAAcjP,EAAM,CACxB,GAAIiP,KAAa,KAAK,OAClB,UAAWrH,KAAS,KAAK,OAAOqH,CAAS,EACjCrH,GAAA,MAAAA,EAAO,GACPA,EAAM,GAAG,GAAG5H,CAAI,EAGhB4H,EAAM,GAAG5H,CAAI,EAIzB,GAAIiP,KAAa,KAAK,WAClB,SAAW,CAACpP,EAAG+H,CAAK,IAAK,KAAK,WAAWqH,CAAS,EAAE,UAC5CrH,GAAA,MAAAA,EAAO,IACPA,EAAM,GAAG,GAAG5H,CAAI,EAChB,KAAK,WAAWiP,CAAS,EAAE,OAAOpP,EAAG,CAAC,IAGtC+H,EAAM,GAAG5H,CAAI,EACb,KAAK,WAAWiP,CAAS,EAAE,OAAOpP,EAAG,CAAC,GAIlD,OAAO,IACV,CACL,EA1JO,IAAMuP,EAANP,GACH3B,EADSkC,EACF,YAAY,ICChB,MAAMC,EAAY,CAIvB,WAAkB,SAAU,CAC1B,OAAO,KAAK,QACd,CAEU,aAAc,CAExB,CAEA,OAAc,cAAe,CAC3B,GAAI,KAAK,SACP,OAAO,KAAK,SAGd,MAAM,IAAI,MACR,wEAEJ,CAEA,OAAc,aAAatP,EAA6B,GAAI,CAC1D,GAAI,KAAK,SACD,UAAI,MAAM,2CAA2C,EAE7D,YAAK,SAAWA,EACX,cAAW,IAAI,KACb,KAAK,QACd,CAEA,OAAc,aAAc,CACnB,OAAC,CAAC,KAAK,QAChB,CACF,CAjCEmN,EADWmC,GACM,WAA8B,IAC/CnC,EAFWmC,GAEM,YCSZ,MAAMC,GAAN,KAAuB,CAYlB,aAAc,CAXjBpC,EAAA,cAASkC,EAAgB,YAAY,WAAW,GAC7ClC,EAAA,aAAQ,IACRA,EAAA,oBAAekC,EAAgB,eAC/BlC,EAAA,eAAyB,MACzBA,EAAA,gBAAW,IAGXA,EAAA,kBAEN,IAGF,KAAK,kBAAkB,EACvB,KAAK,MAAM,EACXoC,GAAiB,SAAW,IAC9B,CAEA,OAAc,aAAc,CAC1B,OAAIA,GAAiB,WAGJA,GAAA,SAAW,IAAIA,IACzBA,GAAiB,QAC1B,CAEU,UAAqC,CACtC,OACL,WAAY,CAAC,EAEjB,CAEU,mBAAoB,CAC5B,KAAK,OAAO,GACV,sBACCC,GAAsC,CACjCA,EAAK,QAAQ,SAGjB,KAAK,aAAa,EAEb,gBAAWA,EAAK,OAAO,EAC1B,KAAK,WAAWA,EAAK,OAAO,GAAK,KAAK,SAAS,EACjD,KAAK,WAAWA,EAAK,OAAO,EAAE,WAAW,KAAKA,EAAK,SAAS,EAC9D,GAGF,KAAK,OAAO,GACV,yBACCA,GAAsC,CACjCA,EAAK,QAAQ,SAGjB,KAAK,aAAa,EAClB,KAAK,YAAY,EACnB,GAGF,KAAK,OAAO,GACV,sBACCA,GAAsC,CACjCA,EAAK,QAAQ,SAGjB,KAAK,aAAa,EAClB,KAAK,YAAY,EACnB,GAGF,KAAK,OAAO,GACV,kBACA,CAACjO,EAAciO,IAAsC,CAC9C,aAAQjO,EAAOiO,CAAI,CAC1B,GAKF,KAAK,aAAa,GAChB,eACA,CACEC,EACAC,EACAC,EACAC,EACAC,EACAjK,EACAkK,IACG,CACC,KAAK,OACC,cACN,eACAL,EACAC,EACAC,EACA,gBACAG,CAAA,EAECA,GACH,KAAK,MAAM,CAEf,EAEJ,CAEU,SAASC,EAAiB,CAClC,IAAIC,EAAY,EACZC,EAAQ,EAEZ,UAAWC,KAAa,KAAK,WAAWH,CAAO,EAAE,WAC3CG,EAAU,YACZF,IAEIE,EAAU,OACZD,KAKC,OACL,UAAAD,EACA,MAAAC,CAAA,CAEJ,CAEU,WAAY,CACpB,MAAME,EAEF,GAEO,UAAAJ,KAAW,KAAK,WAAY,CAC/B,MAAAK,EAAQ,KAAK,SAASL,CAAO,EAEnCI,EAAOJ,CAAO,EAAI,CAChB,MAAAK,EACA,WAAY,KAAK,WAAWL,CAAO,EAAE,YAIlC,OAAAI,CACT,CAEU,aAAc,CACtB,IAAIE,EAAW,GACT,MAAAF,EAAS,KAAK,YACpB,UAAWJ,KAAWI,EAAQ,CACtB,MAAAC,EAAQD,EAAOJ,CAAO,EAAE,MAC1B,GAAAK,EAAM,YAAcA,EAAM,MAAO,CACxBC,EAAA,GACX,OAGA,OAAAA,GAAY,CAAC,KAAK,UACpB,KAAK,WAAW,EAElB,KAAK,SAAWA,EACT,CACL,OAAAF,EACA,SAAAE,CAAA,CAEJ,CAEU,YAAa,CACrB,KAAK,aAAa,EAClB,KAAK,OAAO,QAAQ,8BAA+B,KAAK,UAAU,EAC9D,KAAK,OAAO,QAAQ,MAAM,4CAA4C,CAC5E,CAEU,QAAQ9O,EAAciO,EAAmC,CACjE,KAAK,aAAa,EACV,cACN,kBAAkBA,EAAK,gCACvBjO,CAAA,EAEF,KAAK,OAAO,QAAQ,2BAA4BA,EAAOiO,CAAI,CAC7D,CAEU,WAAY,CACpB,KAAK,aAAa,EACZ,MAAAW,EAAS,KAAK,YAEpB,IAAIG,EACF;AAAA;AAAA,EACEC,EAAQ,EACZ,UAAWR,KAAWI,EAAQ,CACtB,MAAAC,EAAQD,EAAOJ,CAAO,EAAE,MAC1BK,EAAM,YAAcA,EAAM,QAC5BG,IACgBD,GAAA,GAAGP,iBAAuBI,EAAOJ,CAAO,EAAE,MAAM,qBAAqBI,EAAOJ,CAAO,EAAE,MAAM;AAAA,GAI/G,GAAIQ,GAAS,EAAG,CACd,QAAQ,KAAK,oBAAoB,EAC5B,YAAO,QAAQ,iCAAiC,EACrD,OAGFD,EAAeA,EAAa,QAAQ,UAAWC,EAAM,UAAU,EAC/D,KAAK,OAAO,QACV,2BACA,IAAI,MAAMD,CAAY,EACtB,CAAC,EAEL,CAEU,cAAe,CACnB,KAAK,SACA,oBAAa,KAAK,OAAO,CAEpC,CAEU,cAAe,Cf7NpB,IAAAvK,Ee8NH,OAAI,KAAK,OAAO,QAAQ,MAAM,sCAAsC,EACpE,KAAK,aAAa,EAClB,KAAK,QAAU,OAAO,WACpB,KAAK,UAAU,KAAK,IAAI,IACxBA,EAAAuJ,GAAY,QAAQ,YAApB,YAAAvJ,EAA+B,UAAW,KAErC,KAAK,OACd,CAEU,OAAQ,CACZ,KAAK,OAAO,QAAQ,MAAM,6BAA6B,EAC3D,KAAK,SAAW,GAChB,KAAK,WAAa,GAClB,KAAK,aAAa,CACpB,CACF,EApOO,IAAMyK,GAANjB,GAMLpC,EANWqD,GAMM,YCfZ,MAAMC,WAAyBxD,EAAqB,CAOzD,YAAYyD,EAAwB,CAClC,MAAMA,CAAU,EAPRvD,EAAA,YAA0B,aAQpC,CAKO,SACL+C,EACA1B,EACAC,EAAgB,GACJ,CACZ,MAAMC,EAAOD,EACTD,GAAgB0B,EAAU,QAC1BA,EAAU,SAAW1B,EAEzB,OAAKE,GAKA,cAASA,CAAI,EAAIwB,EACf,KAAK,WALV,QAAQ,KAAK,IAAI,MAAM,2BAA2B,EAAGA,CAAS,EACvD,KAAK,SAKhB,CACF,CChCO,MAAMS,WAAyB1D,EAAqB,CAOzD,YAAY2D,EAAwB,CAClC,MAAMA,CAAU,EAPRzD,EAAA,YACR,YAOF,CAKO,SACL0D,EACArC,EACAC,EAAgB,GACJ,CACZ,MAAMC,EAAOD,EACTD,GAAgBqC,EAAU,KAC1BA,EAAU,MAAQrC,EAEtB,GAAI,CAACE,EACG,UAAI,MAAM,2BAA2B,EAGxC,qBAASA,CAAI,EAAImC,EACf,KAAK,QACd,CACF,CC7BO,MAAMC,EAAY,CAMvB,OAAc,4BAA4BpC,EAAcxM,EAAe,CACrE,KAAK,2BAA2B,KAAK,CACnC,KAAAwM,EACA,MAAAxM,CAAA,CACD,CACH,CAQA,aAAoB,QAClBoJ,EACAkE,EACAuB,EAAe,CAAC,EAChB/Q,EAA8B,GAC9B,CACA,OAAO,KAAK,MAASsL,EAAK,MAAOkE,EAAM,OAAQuB,EAAS/Q,CAAO,CACjE,CASA,aAAoB,KAClBsL,EACAkE,EACAwB,EACAD,EAAe,CAAC,EAChB/Q,EAA8B,GAC9B,CACA,OAAO,KAAK,MAASsL,EAAK,OAAQkE,EAAMwB,EAAUD,EAAS/Q,CAAO,CACpE,CAEA,aAAoB,OAClBsL,EACAkE,EACAwB,EACAD,EAAe,CAAC,EAChB/Q,EAA8B,GAC9B,CACA,OAAO,KAAK,MAASsL,EAAK,SAAUkE,EAAMwB,EAAUD,EAAS/Q,CAAO,CACtE,CAEA,aAAoB,IAClBsL,EACAkE,EACAwB,EACAD,EAAe,CAAC,EAChB/Q,EAA8B,GAC9B,CACA,OAAO,KAAK,MAASsL,EAAK,MAAOkE,EAAMwB,EAAUD,EAAS/Q,CAAO,CACnE,CASA,aAAoB,IAClBsL,EACAkE,EACAwB,EACAD,EAAe,CAAC,EAChB/Q,EAA8B,GAC9B,CACA,OAAO,KAAK,MAASsL,EAAK,MAAOkE,EAAMwB,EAAUD,EAAS/Q,CAAO,CACnE,CAMA,OAAc,cAAcgR,EAAkB,CAC5C,MAAMD,EAAwD,GAC9D,IAAIE,EAAc,oCACdC,EAAS,MACb,OAAQF,EAAU,CAChB,IAAK,SACWC,EAAA,yBACd,MACF,IAAK,OACWA,EAAA,mBACLC,EAAA,oCACT,MACF,IAAK,MACWD,EAAA,kBACLC,EAAA,4BACT,MACF,IAAK,OACWD,EAAA,aACLC,EAAA,aACT,MACF,IAAK,OACWD,EAAA,YACLC,EAAA,YACT,MACF,IAAK,OACWD,EAAA,oCACd,KAIJ,CACA,OAAIA,IACFF,EAAQ,cAAc,EAAIE,EAE1BF,EAAQ,OAAYG,GAEfH,CACT,CAEA,aAAoB,MAClBzF,EACA6F,EAAqB,MACrB3B,EAAY,GACZwB,EACAD,EAAe,GACf/Q,EAA8B,GACG,CACjC,GAAI,CAAC,MACH,MAAM,IAAI,MACR,uFAIA,IAAAoR,EAEO,UAAAC,KAAU,KAAK,2BAChBN,EAAAM,EAAO,IAAI,EAAIA,EAAO,MAG5BL,IACQD,EAAApM,GAAO,CAAE,KAAM,IAASoM,EAAS,KAAK,cAAcC,CAAQ,CAAC,GAGrE,CAAChR,EAAQ,aAAe,CAAC+Q,EAAQ,kBAAkB,IACrDA,EAAQ,kBAAkB,EAAI,kBAGhC,MAAMO,EAAQtR,EAAQ,MAAQA,EAAQ,MAAQ,UAE1C,GAAAmR,IAAW,OAAS3B,GAEtB,GADiB,IAAI,gBAAgBA,CAAI,EAAE,SAAS,EACtC,CACZ,MAAM+B,EAAYjG,EAAI,SAAS,GAAG,EAAI,IAAM,IAC5CA,EAAMA,EAAMiG,EAAY,IAAI,gBAAgB/B,CAAI,EAAE,iBAE3CA,IACLwB,IAAa,OACRI,EAAA,IAAI,gBAAgB5B,CAAI,EAExB4B,EAAA,KAAK,UAAU5B,CAAI,GAGxB,MAAAgC,EAAW,MAAM,MAAMlG,EAAK,CAChC,YAAa,cACb,MAAAgG,EACA,OAAAH,EACA,KAAAC,EACA,QAAAL,EACA,KAAM/Q,EAAQ,MAAQ,OACvB,EAEG,IAAAyR,EAAc,MAAMD,EAAS,OAK7B,GAJA,OAAOC,GAAe,UAAYrP,GAAOqP,CAAU,IACxCA,EAAA,KAAK,MAAMA,CAAU,GAGhC,OAAOA,GAAe,SACxB,OAAQA,EAAY,CAClB,IAAK,OACUA,EAAA,KACb,MACF,IAAK,OACUA,EAAA,GACb,MACF,IAAK,QACUA,EAAA,GACb,MACF,IAAK,YACUA,EAAA,OACb,KACJ,CAoBK,MAjBgC,CACrC,OAAQD,EAAS,OACjB,QAASA,EAAS,QAClB,GAAIA,EAAS,GACb,WAAYA,EAAS,WACrB,WAAYA,EAAS,WAErB,KAAMA,EAAS,KACf,IAAKA,EAAS,IACd,YAAaA,EAAS,YACtB,KAAMA,EAAS,KACf,SAAUA,EAAS,SACnB,MAAOA,EAAS,MAChB,SAAUA,EAAS,SACnB,KAAMA,EAAS,KACf,KAAMC,CAAA,CAGV,CASF,CAJEtE,EA9NW2D,GA8NM,6BAGX,sOC7NKY,GAAN,KAAoC,CAApC,cAWEvE,EAAA,YAAO,KAEPA,EAAA,eAAU,GACVA,EAAA,eAAe,IAEf,cAAc1M,EAAU,CAC7B,GAAI,CAAC,OAAO,eAAe,KAAKA,CAAG,EAAE,MAAM,EAAG,CAC5C,MAAMkI,EAAK,KAAK,UAET,sBAAelI,EAAK,OAAQ,CACjC,MAAOkI,CAAA,CACR,EAGH,OAAK,KAAK,QAAQlI,EAAI,IAAI,IACnB,aAAQA,EAAI,IAAI,EAAI,CACvB,UAAW,CAAC,IAIT,KAAK,QAAQA,EAAI,IAAI,CAC9B,CAEO,qBAAqBkR,EAAUhJ,EAAY,CAC3C,OAAO,KAAKgJ,EAAI,SAAS,EAAE,QACxBA,EAAI,UAAY,OAAO,KAAKA,EAAI,QAAQ,EAAE,QACvC,YAAK,QAAQhJ,CAAE,CAG5B,CAEO,aAAalI,EAAUK,EAAY,CAClC,MAAA8Q,EAAWnR,EAAIK,CAAE,EACjB+Q,EAAM,KAAK,cAAcpR,CAAG,EAC5BqR,EAAU,KAAK,QAEjBrR,EAAAK,CAAE,EAAI,IAAIb,IAAiC,CAC7C,MAAMuR,EAAWI,EAAS,MAAMnR,EAAKR,CAAI,EAEzC,cAAO,KAAK4R,EAAI,QAAQ,EAAE,QAASE,GAAM,CACjC,MAAAC,EAAIH,EAAI,SAASE,CAAC,EAEpBD,EAAQC,CAAC,GACP,MAAM,QAAQD,EAAQC,CAAC,EAAE,UAAUC,CAAC,CAAC,GACvCF,EAAQC,CAAC,EAAE,UAAUC,CAAC,EAAE,QACrBzJ,GAAmC,CAClCA,EAAS,KAAK,CAChB,EAGN,CACD,EAEMiJ,CAAA,CAEX,CAEO,iBAAiB/Q,EAAUkR,EAAarE,EAAiB,CAC1D,SAAM,QAAQ7M,CAAG,EAAG,CAChB,MAAAoR,EAAM,KAAK,cAAcpR,CAAG,EAE7BoR,EAAI,WACPA,EAAI,SAAW,GAEJH,GAAA,cAAc,QAAS5Q,GAAO,CAClC,kBAAaL,EAAKK,CAAE,EAC1B,GAGE+Q,EAAI,SAASF,CAAG,IACfE,EAAA,SAASF,CAAG,EAAI,IAGlBE,EAAI,SAASF,CAAG,EAAE,QAAQrE,CAAO,IAAM,IACzCuE,EAAI,SAASF,CAAG,EAAE,KAAKrE,CAAO,EAGpC,CAEO,mBAAmB7M,EAAckR,EAAarE,EAAiB,CACpE,GAAI,MAAM,QAAQ7M,CAAG,GAAKA,EAAI,MAAQ,KAAM,CAC1C,MAAMoR,EAAM,KAAK,QAAQpR,EAAI,IAAI,EAEjC,GAAIoR,EAAK,CACD,MAAAI,EAAWJ,EAAI,SAASF,CAAG,EAEjC,GAAIM,EAAU,CACN,MAAAC,EAAMD,EAAS,QAAQ3E,CAAO,EAEhC4E,EAAM,IACCD,EAAA,OAAOC,EAAK,CAAC,EAGnBD,EAAS,QACL,OAAAJ,EAAI,SAASF,CAAG,EAGpB,0BAAqBE,EAAKpR,EAAI,IAAI,IAI/C,CAEO,QAAQA,EAAU6M,EAAiB/E,EAAgC,CACpE,IAAArG,EAEJ,MAAMiQ,EAAY,KAAK,cAAc1R,CAAG,EAAE,UAEtC,IAAC0R,EAAU7E,CAAO,EAAG,CACb6E,EAAA7E,CAAO,EAAI,GACrB,MAAM8E,EAAO,OAAO,yBAAyB3R,EAAK6M,CAAO,GAErD,CAAC8E,GAAQ,EAAEA,EAAK,KAAOA,EAAK,KAAO,CAACA,EAAK,iBAC3ClQ,EAAQzB,EAAI6M,CAAO,EAEZ,sBAAe7M,EAAK6M,EAAS,CAClC,WAAY,GAEZ,IAAK,IACIpL,EAGT,IAAMoD,GAAa,CACjB,GAAIA,IAAapD,EAAO,CACtB,KAAK,mBAAmBA,EAAOzB,EAAI,KAAM6M,CAAO,EACxCpL,EAAAoD,EACR,MAAMuM,EAAM,KAAK,QAAQpR,EAAI,IAAI,EAEjC,GAAIoR,EAAK,CACD,MAAAQ,EAAaR,EAAI,UAAUvE,CAAO,EAEpC+E,GACSA,EAAA,QAAS9R,GAA6B,CAC/CA,EAAG,KAAK,EACT,EAGH,KAAK,iBAAiB+E,EAAU7E,EAAI,KAAM6M,CAAO,GAGvD,EACD,GAID6E,EAAU7E,CAAO,EAAE,QAAQ/E,CAAQ,IAAM,IACjC4J,EAAA7E,CAAO,EAAE,KAAK/E,CAAQ,EAGlC,KAAK,iBAAiB9H,EAAI6M,CAAO,EAAG7M,EAAI,KAAM6M,CAAO,CACvD,CAEO,UAAU7M,EAAU6M,EAAiB/E,EAAgC,CAC1E,MAAMsJ,EAAM,KAAK,QAAQpR,EAAI,IAAI,EAEjC,GAAIoR,EAAK,CACD,MAAAM,EAAYN,EAAI,UAAUvE,CAAO,EAEvC,GAAI6E,EAAW,CACP,MAAAD,EAAMC,EAAU,QAAQ5J,CAAQ,EAElC2J,EAAM,KACEC,EAAA,OAAOD,EAAK,CAAC,EAElBC,EAAU,SACN,OAAAN,EAAI,UAAUvE,CAAO,EAC5B,KAAK,mBAAmB7M,EAAI6M,CAAO,EAAG7M,EAAI,KAAM6M,CAAO,IAItD,0BAAqBuE,EAAKpR,EAAI,IAAI,GAG7C,CAEO,IAAIA,EAAU6M,EAAiB,CACpC,OAAO7M,EAAI6M,CAAO,CACpB,CAEO,IAAI7M,EAAU6M,EAAiBpL,EAAY,CAChDzB,EAAI6M,CAAO,EAAIpL,CACjB,CACF,EAjMO,IAAMoQ,GAANZ,GACLvE,EADWmF,GACG,gBAAgB,CAC5B,OACA,MACA,QACA,UACA,OACA,UACA,WA2LJ,MAAMC,GAAa,IAAID,+GC3MVE,GAAiB,6CACjBC,GAAkB,MCcxB,MAAe5D,CAEtB,CA2FE,YACE6D,EACAtN,EACAlC,EACAwL,EACApB,EACAsD,EACA+B,EACA,CArFFxF,EAAA,aAKAA,EAAA,iBAAY,IAIZA,EAAA,gBAAW,GA4BJA,EAAA,cACAA,EAAA,iBACAA,EAAA,aACAA,EAAA,WAKAA,EAAA,aACAA,EAAA,mBACAA,EAAA,0BAAyC,IACzCA,EAAA,gBAKAA,EAAA,aAKAA,EAAA,cAKAA,EAAA,eAuBL,KAAK,KAAOuF,EACZ,KAAK,GAAKtN,EACV,KAAK,KAAOlC,EACZ,KAAK,KAAOwL,EACZ,KAAK,QAAUpB,EACf,KAAK,WAAasD,EAClB,KAAK,MAAQ,OAET+B,GAAczP,EAChB,KAAK,KAAO,KAAK,iBAAiByP,EAAYzP,CAAI,EAE7C,UAAO,IAAI,KAEpB,CAOO,QACLmK,EACAC,EACA/E,EACU,CACV,OAAO,IAAI6F,GAASf,EAAOC,EAAS/E,CAAQ,CAC9C,CAEO,aAAc,CACnB,GAAI,KAAK,QAAS,CAChB,MAAM0F,EAAQnL,GAAU,KAAK,QAAS,EAAI,EACtC,GAAAmL,EAAM,OAAS,EACjB,KAAK,MAAQA,EAAM,cACVA,EAAM,OAAS,EACnB,cAAW,KAAK,QAAQ,KAAK,KAAK,OAAQ,KAAK,QAAS,IAAI,EAC5D,WAAQ,KAAK,SAAS,WAE3B,OAAM,IAAI,MAAM,IAAI,KAAK,6BAA6B,OAGxD,KAAK,MAAQ,MAEjB,CAQO,kBAAkB2E,EAAmB,CAC1C,MAAO,IAAMA,EAAY,GAC3B,CAEO,wBACL3S,EACA4S,EACU,CACV,OAAO5S,EACJ,IAAK6S,GAAQhQ,GAAUgQ,EAAK,EAAI,CAAC,EACjC,IAAI,CAAC,CAAE,KAAA5P,EAAM,MAAAhB,CAAA,EAAS6Q,IAAO,CAC5B,GAAI7P,IAAS,EAEJ,OADgBhB,EAEzB,GAAWgB,IAAS,EAAS,CAE3B,MAAMoK,EAAUpL,EACX,KAAK,mBAAmB2Q,CAAc,IACpC,wBAAmBA,CAAc,EAAI,IAG5C,IAAIG,EAAW,KAAK,mBAAmBH,CAAc,EAAEE,CAAE,EAEzD,OAAKC,IACHA,EAAW,KAAK,QAAQ,KAAK,KAAK,OAAQ1F,EAAS,IAAI,EACvD,KAAK,mBAAmBuF,CAAc,EAAEE,CAAE,EAAIC,GAEzCA,EAAS,YAEhB,OAAM,IAAI,MAAM,IAAI,KAAK,6BAA6B,CACxD,CACD,CACL,CAMO,eAAe9Q,EAAY+Q,EAAa,EAAQ,CACjD,QAAK,aAAe,KACtB,MAAM,IAAI,MAAM,IAAI,KAAK,yBAAyB,EAIpD,IAAIC,EAAW,GACf,MAAMtC,EAAaqC,EACf,KAAK,WAAW,MAAMA,CAAU,EAChC,KAAK,WAET,OAAOrC,EAAW,OAChB,CAAC5O,EAAamR,EAAqBxF,IAAkB,CACnD,GAAIuF,EACK,OAAAlR,EAGH,MAAA/B,EAAOkT,EAAY,MAAMX,EAAc,EAC7C,GAAIvS,IAAS,KACH,oBACN,IAAI,MACF,IACE,KAAK;AAAA,SACmD,KAAK,UAC7DiC,CAAA;AAAA,UACY,KAAK,UACjBF,CAAA;AAAA,eACiB,KAAK,UACtBmR,CAAA;AAAA,SACWxF;AAAA,CACf,GAEK3L,EAEH,MAAA2G,EAAK1I,EAAK,QAEhB,GAAI,CAAC0I,EACH,MAAM,IAAI,MAAM,IAAI,KAAK,sCAAsC,EAGjE,GAAI,CAAC,KAAK,KAAK,QAAQ,WACrB,MAAM,IAAI,MAAM,IAAI,KAAK,kCAAkC,EAG7D,MAAMkI,EAAY,KAAK,KAAK,QAAQ,WAAWlI,CAAE,EAEjD,GAAI,CAACkI,EACH,MAAM,IAAI,MACR,IAAI,KAAK,gCAAgClI,WAAA,EAI7C,MAAMyK,EAAgB,KAAK,wBAAwBnT,EAAM0N,CAAK,EAQ9D,OALIkD,GAAa,OAAOA,EAAU,MAAS,aAChC7O,EAAA6O,EAAU,KAAK,MAAM,KAAK,MAAO,CAAC7O,EAAQ,GAAGoR,CAAa,CAAC,GAKpEzF,EAAQiD,EAAW,OAAS,GAC5B5O,GACA,OAAOA,EAAO,MAAS,YACvB,OAAOA,EAAO,OAAU,YAEbkR,EAAA,GACJlR,EAAO,KAAME,GAClB,KAAK,eAAeA,EAAOyL,EAAQ,CAAC,IAGjC3L,CACT,EACAE,CAAA,CAEJ,CAQO,aACLpB,EACAsE,EACoB,CACd,MAAAiO,EAAU,KAAK,KAAK,QAAQ,QAClC,OAAQC,GAAO,CACb,GAAI,CAACD,EACG,UAAI,MAAM,oDAAoD,EAEtEA,EAAQ,KAAKvS,EAAI,KAAMwS,EAAI,KAAMlO,CAAE,EAEvC,CAMO,IAAIlD,EAAY,CACjB,IACMA,EAAA,KAAK,eAAeA,CAAK,QAC1BX,GACP,eAAQ,MAAMA,CAAK,EACZW,CACT,CAEI,OAAO,KAAK,SAAY,aAGxBA,GACA,OAAOA,EAAM,MAAS,YACtB,OAAOA,EAAM,OAAU,WAGpBA,EAAA,KAAMqR,GAAmB,CACnB,aAAQ,KAAK,GAAIA,CAAS,EAChC,EACA,MAAOhS,GAAiB,CACvB,QAAQ,MAAMA,CAAK,EACpB,EAEE,aAAQ,KAAK,GAAIW,CAAK,EAGjC,CAKO,MAAO,CACR,KAAK,UACF,WAAQ,KAAK,SAAS,OAC3B,KAAK,IAAI,KAAK,SAAS,MAAO,IAEzB,SAAI,KAAK,KAAK,CAEvB,CASO,SAAU,CACf,GAAI,KAAK,SAAU,CACb,QAAK,aAAe,KAChB,UAAI,MAAM,oBAAoB,EAGhC,MAAAA,EAAQ,KAAK,WAAW,YAC5B,CACEF,EACAmR,EACAxF,IACG,CACG,MAAA1N,EAAOkT,EAAY,MAAMV,EAAe,EACxC9J,EAAK1I,EAAK,QAChB,GAAI,CAAC0I,EACG,UAAI,MAAM,gBAAgB,EAGlC,GAAI,CAAC,KAAK,KAAK,QAAQ,WACd,OAGT,MAAMkI,EAAY,KAAK,KAAK,QAAQ,WAAWlI,CAAE,EAC3CyK,EAAgB,KAAK,wBAAwBnT,EAAM0N,CAAK,EAE9D,OAAIkD,GAAa,OAAOA,EAAU,SAAY,aAC5C7O,EAAS6O,EAAU,QAAQ7O,EAAQ,GAAGoR,CAAa,GAE9CpR,CACT,EACA,KAAK,UAAU,KAAK,EAAE,GAGnB,cAAS,SAASE,CAAK,EAEhC,CAOO,OAAQ,CAGb,GAFA,KAAK,YAAY,EAEb,KAAK,KAAM,CACT,UAAO,KAAK,MAAS,WACjB,UAAI,MAAM,mCAAmC,EAEhD,UAAK,KAAK,EAAE,EAGf,KAAK,KAAK,QAAQ,aACpB,KAAK,KAAK,CAEd,CAKO,SAAU,CACX,KAAK,QACF,YAAO,KAAK,EAAE,EAGjB,KAAK,UACP,KAAK,SAAS,YAGhB,OAAO,KAAK,KAAK,kBAAkB,EAAE,QAASsR,GAAO,CAC7C,MAAAvT,EAAO,KAAK,mBAAmBuT,CAAE,EAEvC,OAAO,KAAKvT,CAAI,EAAE,QAAS8S,GAAO,CAC3B9S,EAAA8S,CAAE,EAAE,WAAU,CACpB,EACF,EAED,KAAK,mBAAqB,EAC5B,CAOO,QAAQU,EAAc,GAAI,CAC3B,KAAK,WACF,WAAQ,KAAK,SAAS,QAEzB,OAAO,KAAK,QAAW,YACzB,KAAK,OAAOA,CAAM,CAEtB,CAMO,UAAUrO,EAAO,CAClB,cAAO,KAAK,UAAa,WACpB,KAAK,SAASA,CAAE,EAEhBa,GAAcb,CAAS,CAElC,CAEU,iBAAiBuN,EAAoBzP,EAAwB,CrBtclE,IAAA6C,EqBucH,MAAM2N,EAAS,KAAK,KAAK,YAAYf,CAAU,EAExC,QADO5M,EAAA7C,EAAK,MAAMwQ,CAAM,IAAjB,YAAA3N,EAAoB,MAAM,KAAM,EAEhD,CACF,CA1bEoH,EANoB0B,EAMb,MAAM,IAKb1B,EAXoB0B,EAWb,QAAQ,ICpBV,MAAM8E,WAA0B9E,CAAoC,CAApE,kCAEL1B,EAAA,gBAAW,IACXA,EAAA,gBAAW,KAEX,KAAK/H,EAAwB,CACrB,MAAAwO,EAAoB,KAAa,KAAK,CAAC,EAC1CxO,EAAA,UAAU,IAAIwO,CAAgB,CACnC,CAEA,QAAQxO,EAAwByO,EAAgB,CACxC,MAAAD,EAAoB,KAAa,KAAK,CAAC,EACzCC,GACCzO,EAAA,UAAU,IAAIwO,EAAmB,QAAQ,EACzCxO,EAAA,UAAU,OAAOwO,EAAmB,OAAO,IAE3CxO,EAAA,UAAU,OAAOwO,EAAmB,QAAQ,EAC5CxO,EAAA,UAAU,IAAIwO,EAAmB,OAAO,EAE/C,CACF,CAnBEzG,EADWwG,GACJ,MAAM,aCOR,MAAMG,WAAuBjF,CAA4B,CAAzD,kCAEL1B,EAAA,gBAAW,IACXA,EAAA,gBAAW,KACHA,EAAA,sBAER,KAAK/H,EAA8B,CAEjC,MAAM2O,EAAY3O,EAAG,aAAa,OAAO,GAAK,GACzC,mBAAgB2O,EAAU,MAAM,GAAG,CAC1C,CAEA,QAAS,CACP,OAAO,KAAK,aACd,CAEA,QAAQ3O,EAAiBE,EAAkB,CvB1BtC,IAAAS,EuB2BCT,IACES,EAAA,KAAK,gBAAL,YAAAA,EAAoB,QAAQT,MAAc,IACzCF,EAAA,aAAa,QAAS,KAAK,cAAc,KAAK,GAAG,EAAI,IAAME,CAAQ,EAGpE,KAAK,eACPF,EAAG,aAAa,QAAS,KAAK,cAAc,KAAK,GAAG,CAAC,EAGnD,MAAA2O,EAAY3O,EAAG,aAAa,OAAO,EACrC2O,GACF3O,EAAG,aAAa,QAAS2O,EAAU,KAAM,EAE7C,CACF,CA9BE5G,EADW2G,GACJ,MAAM,aCLR,MAAME,WAA6BnF,CAAgC,CAExE,QAAQzJ,EAAwBlD,EAAY,CAC1C,MAAM+R,EAAe3P,GAAW,KAAK,KAAK,CAAC,EAAa,MAAM,EAGzD,UAAK,OAAO2P,CAAY,EAAI/R,CACnC,CACF,CAPEiL,EADW6G,GACJ,MAAM,YCAR,MAAME,WAAqBrF,CAAmC,CAEnE,QAAQzJ,EAAwBlD,EAAY,CACtC,UAAOA,GAAU,SACZ,OAAAyC,GAAO,CAAE,KAAM,IAAS,KAAK,KAAK,OAAQzC,CAAK,EAExD,QAAQ,KAAK,qDAAqD,CACpE,CACF,CAPEiL,EADW+G,GACJ,MAAM,UCJR,MAAMC,WAAwBtF,CAAyB,CAG5D,QAAQzJ,EAAiBE,EAAe,C1BPnC,IAAAS,E0BQC,IAAC,KAAK,KACR,MAAM,IAAI,MAAM,0BAA4B,KAAK,IAAI,EAGjD,MACJ,SAAUP,EACV,SAAAD,EACA,QAAAE,CACE,EAAAN,GAAaC,EAAI,KAAK,KAAME,CAAQ,EAItC,KAAK,OAAS,OACbF,EAAyB,QAAQ,gBAAkB,YAEjDW,EAAAX,EAAyB,gBAAzB,YAAAW,EACA,QAAQ,iBAAkB,SAE3BX,EAAyB,cAAmC,OAG5DK,GACCL,EAAA,cACD,IAAI,YAAY,iBAAkB,CAChC,OAAQ,CAAE,KAAM,KAAK,KAAM,SAAUI,EAAmB,SAAAD,CAAS,EACnC,EAGtC,CACF,CAhCE4H,EADWgH,GACJ,MAAM,UCIR,MAAMC,WAAoBvF,CAAgB,CAG/C,SAAU,CAEV,CACF,CALE1B,EADWiH,GACJ,MAAM,SACbjH,EAFWiH,GAEJ,QAAQ,ICNV,MAAMC,WAAsBxF,CAA2C,CAAvE,kCAEL1B,EAAA,iBAAY,IACZA,EAAA,gBAAW,KAEXA,EAAA,gBAAW,KAAK,QAAQ,KAAK,IAAI,GAEjC,KAAK/H,EAAsB,CACtBA,EAAA,iBAAiB,SAAU,KAAK,QAAQ,CAC7C,CAEA,OAAOA,EAAsB,CACxBA,EAAA,oBAAoB,SAAU,KAAK,QAAQ,CAChD,CAEA,QAAQA,EAAsBE,EAA4B,CACpD,IAAAC,EACC,KAAK,UAIGA,EAAA,KAAK,UAAUH,CAAE,GAHpB,aAAK,2CAA4C,IAAI,EAC7DG,EAAWU,GAAcb,CAAE,GAIzBA,EAAG,OAAS,QACdA,EAAG,QAAU9B,GAAUiC,CAAQ,IAAMjC,GAAUgC,CAAQ,EAEnDC,IAAaD,IACZF,EAAA,QAAU,CAAC,CAACE,EAGrB,CAEA,SAASF,EAAsB,CAC7B,OAAOa,GAAcb,CAAE,CACzB,CACF,CAlCE+H,EADWkH,GACJ,MAAM,WCER,MAAMC,WAAwBzF,CAA0C,CAE7E,QAAQzJ,EAA8BlD,EAAgB,CAChD,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAGhC,MAAM6R,EAAY3O,EAAG,aAAa,OAAO,GAAK,GACxCmP,EAAYR,EAAU,MAAM,GAAG,EAAE,OAAQS,GAAgBA,IAAQ,EAAE,EACnE1B,EAAO,KAAK,KAAK,CAAC,EAAa,KAAK,EACpCZ,EAAMqC,EAAU,QAAQzB,CAAG,EAC7BZ,IAAQ,GACNhQ,GACFkD,EAAG,aAAa,QAAS,GAAG2O,KAAajB,GAAK,EAEtC5Q,GACVkD,EAAG,aAAa,QAASmP,EAAU,OAAO,CAACE,EAAG3U,IAAMA,IAAMoS,CAAG,EAAE,KAAK,GAAG,CAAC,CAE5E,CACF,CAlBE/E,EADWmH,GACJ,MAAM,WCRf,MAAMI,GACJ,0HAMK,MAAMC,WAAiC9F,CAA4B,CAAnE,kCAEL1B,EAAA,iBAAY,IAEFA,EAAA,mCACAA,EAAA,sBAEA,UAAU/H,EAAoBlD,EAAY,CAClD,MAAM0S,EAAY,KAAK,KAAK,CAAC,EAAa,KAAK,EAC3CxP,EAAG,mBACFA,EAAA,mBAAmBwP,EAAU1S,CAAK,EAE7B,aACNwS,GAAgC,QAAQ,YAAatP,EAAG,OAAO,EAC/DA,CAAA,CAGN,CAEA,MAAM,QAAQA,EAAoBlD,EAAY,CACxCgH,GAAgB9D,EAAI,GAAM,EAAI,EAC3B,eAAUA,EAAIlD,CAAK,EACfgH,GAAgB9D,EAAI,EAAI,GACjC,MAAMmE,GAAqBnE,CAAE,EACxB,eAAUA,EAAIlD,CAAK,GAEhB,aACNwS,GAAgC,QAAQ,YAAatP,EAAG,OAAO,EAC/DA,CAAA,CAGN,CAEU,OAAOA,EAAoB,CAE/B,GADJ,KAAK,cAAgB,KAAK,KAAK,CAAC,EAAE,WAAW,OACzC,OAAOA,EAAG,kBAAqB,WAAY,CACrC,aACNsP,GAAgC,QAAQ,YAAatP,EAAG,OAAO,EAC/DA,CAAA,EAEF,OAEF,KAAK,2BAA6BA,EAAG,iBAAiB,KAAK,cAAe,CACxE,KAAM,IAAM,CACV,KAAK,QAAQ,CACf,EACD,CACH,CAEA,MAAM,KAAKA,EAAoB,CACzB8D,GAAgB9D,EAAI,GAAM,EAAI,EAChC,KAAK,OAAOA,CAAE,EACL8D,GAAgB9D,EAAI,EAAI,GACjC,MAAMmE,GAAqBnE,CAAE,EAC7B,KAAK,OAAOA,CAAE,GAEN,aACNsP,GAAgC,QAAQ,YAAatP,EAAG,OAAO,EAC/DA,CAAA,CAGN,CAEA,QAAS,C9BvEJ,IAAAW,G8BwEHA,EAAA,KAAK,6BAAL,MAAAA,EAAiC,WACnC,CAEA,SAASX,EAAoB,CAC3B,MAAMwP,EAAY,KAAK,KAAK,CAAC,EAAa,KAAK,EAExC,OADKxP,EAAG,mBAAmBwP,CAAQ,CAE5C,CACF,CAvEEzH,EADWwH,GACJ,MAAM,QCRR,MAAME,WAAuBhG,CAGlC,CAEA,QAAQzJ,EAA0ClD,EAAgB,CAC7DkD,EAAA,SAAW,CAAC,CAAClD,CAClB,CACF,CAJEiL,EAJW0H,GAIJ,MAAM,YCHR,MAAMC,WAAqBjG,CAA6B,CAAxD,kCAGL1B,EAAA,cAAS,IASTA,EAAA,cAAS,KAAK,QAAQ,KAAK,IAAI,GAP/B,QAAQtF,EAAc,CACf,KAAK,QAERA,EAAM,eAAe,CAEzB,CAKA,QAAQzC,EAAiB2P,EAAiB,CACxC,KAAK,OAASA,EACd3P,EAAG,aAAa,YAAa2P,EAAS,OAAS,OAAO,CACxD,CAGA,KAAK3P,EAAiB,CACpBA,EAAG,iBAAiB,YAAa,KAAK,OAAQ,EAAI,CACpD,CAGA,OAAOA,EAAiB,CACtBA,EAAG,gBAAgB,WAAW,EAC9BA,EAAG,oBAAoB,YAAa,KAAK,OAAQ,EAAI,CACvD,CACF,CA7BE+H,EADW2H,GACJ,MAAM,aCJR,MAAME,WAA2BnG,CAA4B,CAElE,QAAQoG,EAAmB/S,EAAe,CACnC+S,EAAA,KAAO/S,GAAwB,EACtC,CACF,CAJEiL,EADW6H,GACJ,MAAM,iBCJR,MAAME,GAAO,EACPC,GAAU,EAEVC,GACX,4DCMc,SAAAC,GAAcC,EAAkBC,EAAsB,CACpE,IAAI9H,EAA0B,KAC9B,MAAM+H,EAASF,EAAS,OACxB,IAAI3H,EAAQ,EACR8H,EAAY,EACV,MAAAC,EAAOH,EAAW,CAAC,EACnBI,EAAQJ,EAAW,CAAC,EAE1B,KAAOE,EAAYD,GAGjB,GAFQ7H,EAAA2H,EAAS,QAAQI,EAAMD,CAAS,EAEpC9H,EAAQ,EAAG,CACTF,GACFA,EAAO,KAAK,CACV,KAAMyH,GACN,MAAOI,EAAS,MAAMG,CAAS,EAChC,EAGH,UACK,CAYL,GAXAhI,EAASA,GAAU,GACfE,EAAQ,GAAK8H,EAAY9H,GAC3BF,EAAO,KAAK,CACV,KAAMyH,GACN,MAAOI,EAAS,MAAMG,EAAW9H,CAAK,EACvC,EAGH8H,EAAY9H,EAAQ+H,EAAK,OACjB/H,EAAA2H,EAAS,QAAQK,EAAOF,CAAS,EAErC9H,EAAQ,EAAG,CACb,MAAMiI,EAAYN,EAAS,MAAMG,EAAYC,EAAK,MAAM,EAClDG,EAAYpI,EAAOA,EAAO,OAAS,CAAC,EAEtCoI,GAAaA,EAAU,OAASX,GAClCW,EAAU,OAASD,EAEnBnI,EAAO,KAAK,CACV,KAAMyH,GACN,MAAOU,CAAA,CACR,EAGH,MAGF,MAAM1T,EAAQoT,EAAS,MAAMG,EAAW9H,CAAK,EAAE,OAE/CF,EAAO,KAAK,CACV,KAAM0H,GACN,MAAAjT,CAAA,CACD,EAEDuT,EAAY9H,EAAQgI,EAAM,OAIvB,OAAAlI,CACT,CChEgB,SAAAqI,GACdpD,EACAuC,EACAc,EACA,CAEA,IAAIC,EAAiB,GAGjB,GADGf,IACHA,EAAK,WAAa,KAAK,UAAW,CACpC,IAAIxH,EAAS,KAMT,GAJAwH,EAAK,OACExH,EAAA4H,GAAcJ,EAAK,KAAMc,CAAkB,GAGlDtI,GAAUA,EAAO,OAAQ,CAC3B,QAAS3N,EAAI,EAAGA,EAAI2N,EAAO,OAAQ3N,IAAK,CAChC,MAAAmO,EAAQR,EAAO3N,CAAC,EAChBsK,EAAO,SAAS,eAAe6D,EAAM,KAAK,EAC5CgH,EAAK,YAAc7K,GAAQ6K,GACxBA,EAAA,WAAW,aAAa7K,EAAM6K,CAAI,EAErChH,EAAM,OAASkH,IAEjBzC,EAAK,aAAatI,EAAM,KAAM6D,EAAM,MAAO+G,GAAoB,IAAI,EAGnEC,EAAK,YACFA,EAAA,WAAW,YAAYA,CAAI,EAGnBe,EAAA,QACRf,EAAK,WAAa,KAAK,eAEfe,EAAAtD,EAAK,SAASuC,CAAI,GAErC,GAAI,CAACe,GACCf,EAAK,YAAcA,EAAK,WAAW,OAAS,EAC9C,QAASnV,EAAI,EAAGA,EAAImV,EAAK,WAAW,OAAQnV,IAAK,CACzC,MAAAmW,EAAYhB,EAAK,WAAWnV,CAAC,EAC/BmW,GACQH,GAAApD,EAAMuD,EAA0BF,CAAkB,EAKtE,CCjCO,SAASG,GAAiB/C,EAAyC,CAClE,MAAAgD,EAAUhD,EAAY,MAAMiC,EAAiB,EACnD,GAAIe,IAAY,KACR,UAAI,MAAM,mBAAmB,EAErC,MAAMC,EAAQD,EAAQ,IAAK9T,GAClBA,EAAI,MACZ,EAGM,OACL,QAHc+T,EAAM,MAAW,UAI/B,MAAAA,CAAA,CAEJ,CCZO,MAAMC,GAAN,KAAW,CA+ChB,YACEC,EAMA7C,EACAzT,EACA,CAxBKmN,EAAA,YACAA,EAAA,eACAA,EAAA,gBACAA,EAAA,gBAA0B,IAC1BA,EAAA,qBAAmD,IA8BpD,GATA,MAAM,QAAQmJ,CAAG,EACnB,KAAK,IAAMA,EAEN,SAAM,CAACA,CAAG,EAGjB,KAAK,OAAS7C,EAGV,KAAK,OAAO,MACd,UAAWtN,KAAO,OAAO,KAAK,KAAK,OAAO,KAAK,EAC7CkQ,GAAK,WAAWlQ,CAAG,EAAI,KAAK,OAAO,MAAMA,CAAG,EAI3C,YAAO,MAAQkQ,GAAK,WAEzB,KAAK,QAAUrW,EAEf,KAAK,MAAM,CACb,CA7DA,OAAc,OACZuW,EACA9C,EACA+C,EACA,CtCtCG,IAAAzQ,EsCuCH,MAAMuP,EAAWiB,EAAO,GAAG,UAAU,EAAI,EACnC7D,EAAO,IAAI2D,GAAKf,EAAU7B,EAAQ8C,EAAO,KAAK,OAAO,EAC3D,OAAA7D,EAAK,KAAK,GACL3M,EAAAwQ,GAAA,YAAAA,EAAQ,SAAR,MAAAxQ,EAAgB,WAGnBwQ,EAAO,OAAO,WAAW,aAAajB,EAAUkB,CAAQ,EAFxD,QAAQ,KAAK,qCAAqC,EAI7C9D,CACT,CAoDO,MAAO,CACP,cAAS,QAAS+D,GAAY,CACjCA,EAAQ,MAAM,EACf,CACH,CAKO,QAAS,CACV,MAAM,QAAQ,KAAK,QAAQ,GACxB,cAAS,QAASA,GAAY,CACjCA,EAAQ,QAAQ,EACZ,OAAOA,EAAQ,IAAM,KAAK,QAAQ,sBAGtC,CACD,EAIC,MAAM,QAAQ,KAAK,aAAa,GAC7B,mBAAc,QAASC,GAAiB,CACvC,OAAQA,EAA2B,QAAW,YAC/CA,EAA2B,OAAO,CACrC,CACD,CAEL,CAKO,MAAO,CACP,cAAS,QAASD,GAAY,CAC7BA,EAAQ,MACVA,EAAQ,KAAK,CACf,CACD,CACH,CAKO,SAAU,CACV,cAAS,QAASF,GAAW,CAC5BA,EAAO,WAAaA,EAAO,SAC7BA,EAAO,QAAQ,CACjB,CACD,CACH,CAMO,OAAO9C,EAAc,GAAI,CAC9B,OAAO,KAAKA,CAAM,EAAE,QAAStN,GAAQ,CACnC,KAAK,OAAOA,CAAG,EAAIsN,EAAOtN,CAAG,EAC9B,EAEU,UAAAsQ,KAAW,KAAK,SACrBA,EAAQ,SACVA,EAAQ,QAAQhD,CAAM,CAG5B,CAMO,OAAQ,CAGT,GAFJ,KAAK,SAAW,GAEZ,CAAC,KAAK,QAAQ,mBACV,UAAI,MAAM,6BAA6B,EAG/C,MAAMvG,EAAW,KAAK,IACtB,QAASpN,EAAI,EAAGA,EAAIoN,EAAS,OAAQpN,IAAK,CAClC,MAAA6F,EAAUuH,EAASpN,CAAC,EACtB6F,GACFmQ,GACE,KACAnQ,EACA,KAAK,QAAQ,oBAKd,cAAS,KAAK0Q,GAAK,iBAAiB,CAC3C,CAEU,iBAAiB3H,EAAc,CACjC,MAAAiI,EAAsB,KAAK,QAAQ,WACzC,GAAI,CAACA,EACG,UAAI,MAAM,oBAAoB,EAGtC,UAAWC,KAAcD,EACnB,GAAAjI,EAAK,WAAWkI,CAAU,EACrB,OAAAA,CAKb,CAEO,YAAYjE,EAAoB,CtCjNlC,IAAA5M,EsCkNH,MAAM8Q,IAAY9Q,EAAA4M,EAAW,MAAM,KAAK,IAAtB,YAAA5M,EAAyB,SAAU,EACjD,IAAA2N,EACJ,OAAImD,EAAY,EACdnD,EAAS,IAAI,OACX,IAAIf,EAAW,QAAQ,IAAK,SAAS,EAAE,WAAW,KAAM,OAAO,MAGjEe,EAAS,IAAI,OAAO,IAAIf,EAAW,WAAW,IAAK,MAAM,IAAI,EAExDe,CACT,CAKQ,YACNoD,EACA7B,EACA8B,EAAmB,KAAK,QAAQ,iBAChC,CACA,IAAIC,EAAQ,GACR,IAAC,KAAK,QAAQ,QACT,OAAAA,EAET,MAAMC,EAAY,GAClB,QAASnX,EAAI,EAAGoX,EAAMJ,EAAW,OAAQhX,EAAIoX,EAAKpX,IAAK,CACrD,IAAIqX,EAAW,GACXtI,EAA+B,KAC7B,MAAAuI,EAAYN,EAAWhX,CAAC,EAExBuX,EAAiB,KAAK,iBAAiBD,EAAU,IAAI,EAC3D,GAAIC,EAAgB,CAClB,IAAI1E,EAAa,GAQjB,GAPAwE,EAAWC,EAAU,KAAK,MAAMC,EAAe,MAAM,EAGjD,KAAK,QAAQ,QAAQF,CAAQ,IAC/BtI,EAAS,KAAK,QAAQ,QAAQsI,CAAQ,GAGpCtI,IAAW,MAGb,QAASmD,EAAI,EAAGA,EAAI+E,EAAiB,OAAQ/E,IAGvC,GAFJW,EAAaoE,EAAiB/E,CAAC,EAChB,KAAK,YAAYW,CAAU,EAC/B,KAAKwE,CAAQ,EAAG,CACzBtI,EAAS,KAAK,QAAQ,QAAQ8D,CAAU,EACxC,OAeN,GAVI9D,IAAW,OACT,KAAK,QAAQ,QAAQ,GAAG,GAC1BA,EAAS,KAAK,QAAQ,QAAQ,GAAG,EACpB8D,EAAA,KAEb9D,EAASsF,IAKTtF,EAAO,MACJ,yBACHoG,EACAkC,EACAC,EAAU,MACVvI,EACA8D,CAAA,EAEEsC,EAAK,iBAAmB,KAAK,QAAQ,wBAClCA,EAAA,gBAAgBmC,EAAU,IAAI,EAE7BJ,EAAA,GACDA,EAGCC,EAAA,KAAK,CAAE,KAAMG,EAAW,OAAAvI,EAAQ,SAAAsI,EAAU,WAAAxE,EAAY,GAIpE,QAAS7S,EAAI,EAAGA,EAAImX,EAAU,OAAQnX,IAAK,CACnC,MAAAwX,EAAWL,EAAUnX,CAAC,EACvB,kBACHmV,EACAqC,EAAS,SACTA,EAAS,KAAK,MACdA,EAAS,OACTA,EAAS,YAEPrC,EAAK,iBAAmB,KAAK,QAAQ,wBAClCA,EAAA,gBAAgBqC,EAAS,KAAK,IAAI,EAGpC,OAAAN,CACT,CAEQ,cAAc/B,EAAuB,CAC3C,IAAI+B,EAAQ,GACR,IAAC,KAAK,QAAQ,WACT,OAAAA,EAGH,MAAAG,EAAWlC,EAAK,SAAS,YAAY,EACrCsC,EAAY,KAAK,QAAQ,WAAWJ,CAAQ,EAClD,OAAII,GAEG,uBAAkBA,EAAWJ,CAAQ,EAClCH,EAAA,IAIR,KAAK,QAAQ,4BACb9N,GAAgB+L,CAAI,GACpB,CAACkC,EAAS,SAAS,OAAO,IAElBH,EAAA,IAEHA,CACT,CAEO,SAAS/B,EAAgC,CAE9C,IAAI+B,EAAQ,KAAK,QAAQ,eAAe,SAAS/B,EAAK,QAAQ,EAC9D,GAAI+B,EACK,OAAAA,EAET,MAAMF,EAAa7B,EAAK,WAGpB,OAAA6B,GAAc,KAAK,QAAQ,UACrBE,EAAA,KAAK,YAAYF,EAAY7B,CAAI,EACrC+B,IAMF,CAACA,GAAS,CAAC/B,EAAK,QAAU,KAAK,QAAQ,aACjC+B,EAAA,KAAK,cAAc/B,CAAI,GAE1B+B,CACT,CAEO,aACL/B,EACA/R,EACAiQ,EACAtE,EACA8D,EACA,CACM,MAAA6E,EAAoBtB,GAAiB/C,CAAW,EAChD7F,EAAUkK,EAAkB,QAC5BpB,EAAQoB,EAAkB,MAChC,KAAK,SAAS,KACZ,IAAI3I,EAAO,KAAMoG,EAAM/R,EAAM2L,EAAO,IAAKvB,EAAS8I,EAAOzD,CAAU,EAEvE,CASO,oBAAqB,CACf,UAAAwE,KAAY,KAAK,QAAQ,WAClC,GAAI,KAAK,QAAQ,WAAWA,CAAQ,GAE9B,CAAC,eAAe,IAAIA,CAAQ,EAAG,CACjC,MAAMI,EAAY,KAAK,QAAQ,WAAWJ,CAAQ,EAC7C,uBAAkBI,EAAWJ,CAAQ,EAIlD,CAOO,kBAAkBI,EAA6BJ,EAAmB,CACvE,GAAI,CAAC,eACH,cAAQ,MAAM,+CAA+C,EACvD,IAAI,MAAM,+CAA+C,EAG3D,MAAAM,EAAkBN,GAAYI,EAAU,QACzC,eAAe,IAAIE,CAAe,GACtB,sBAAOF,EAAU,QAASA,CAAS,CAEtD,CACF,EAnYO,IAAMG,GAANrB,GAELlJ,EAFWuK,GAEG,aAAkB,IAEhCvK,EAJWuK,GAIG,oBAAoB,CAACC,EAAWC,IAAc,CACpD,MAAAC,EAAYF,EAAE,UAAY,EAEhC,OADkBC,EAAE,UAAY,GACbC,CAAA,GCpBhB,MAAMC,WAAuBjJ,CAA2B,CAAxD,kCAGL1B,EAAA,gBAAW,KAEXA,EAAA,gBAAmB,IAEnB,KAAK/H,EAAiB,CvCZjB,IAAAW,EAAA4B,EuCaE,KAAK,OASH,cAAS,QAAS+K,GAAe,CACpCA,EAAK,KAAK,EACX,GAVD,KAAK,QAAS3M,EAAA,2BAAQ,WAAR,YAAAA,EAAkB,cAAc,UAAU,KAAK,SACzD,GAAC4B,EAAAvC,EAAG,aAAH,MAAAuC,EAAe,eAAgB,CAAC,KAAK,SAGxCvC,EAAG,WAAW,aAAa,KAAK,OAAQA,CAAE,EACvCA,EAAA,WAAW,YAAYA,CAAE,GAOlC,CAEA,QAAS,CACH,KAAK,UACF,cAAS,QAASsN,GAAe,CACpCA,EAAK,OAAO,EACb,CAEL,CAEA,QAAQtN,EAAiB2S,EAAmB,CACtC,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAEhC,IAAItV,EAAW,GACf,MAAMmQ,EAAYtO,GAAU,KAAK,KAAK,CAAC,EAAE,UAAU,EAenD,GAdAyT,EAAaA,GAAc,GAIzB,CAAC,MAAM,QAAQA,CAAU,GACzB,OAAOA,GAAe,UACtBA,IAAe,OAEFA,EAAA,OAAO,QAAQA,CAAU,EAAE,IAAI,CAAC,CAAC5R,EAAKjE,CAAK,KAC/C,CAAE,IAAAiE,EAAK,MAAAjE,GACf,EACUO,EAAA,IAGT,CAAC,MAAM,QAAQsV,CAAU,EAC3B,MAAM,IAAI,MACR,QACE,KAAK,KAAK,CAAC,yDAC2C,OAAOA,GAAA,EAKnE,MAAMC,EACJ5S,EAAG,aAAa,gBAAgB,GAAK,KAAK,kBAAkBwN,CAAS,EAE5DmF,EAAA,QAAQ,CAAC1K,EAAOM,IAAU,CvCpElC,IAAA5H,EuCqED,MAAMkS,EAAa,CAAE,QAAS,KAAK,KAAK,MAAO,EAE3CxV,GACIwV,EAAAD,CAAS,EAAI3K,EAAM,IACnB4K,EAAArF,CAAS,EAAIvF,EAAM,QAIzB4K,EAAMD,CAAS,EAAIrK,EACnBsK,EAAMrF,CAAS,EAAIvF,GAGjB,IAAAqF,EAAO,KAAK,SAAS/E,CAAK,EAE9B,GAAK+E,EAeH,GAAIA,EAAK,OAAOE,CAAS,IAAMvF,EAAO,CAEhC,IAAA6K,EACAC,EAAiB,KAAK,SAASxK,CAAK,EACxC,QACMyK,EAAYzK,EAAQ,EACxByK,EAAY,KAAK,SAAS,OAC1BA,IAGA,GADWD,EAAA,KAAK,SAASC,CAAS,EAC9BD,EAAS,OAAOvF,CAAS,IAAMvF,EAAO,CAC3B6K,EAAAE,EACb,MAGJ,GAAIF,IAAe,OAAW,CAK5B,GADK,cAAS,OAAOA,EAAY,CAAC,EAC9B,CAAC,KAAK,QAAU,GAACnS,EAAA,KAAK,OAAO,aAAZ,MAAAA,EAAwB,cACrC,UAAI,MAAM,2BAA2B,EAEzCoS,GAAYA,EAAS,IAAI,CAAC,GAAKzF,EAAK,IAAI,CAAC,GACtC,YAAO,WAAW,aAAayF,EAAS,IAAI,CAAC,EAAGzF,EAAK,IAAI,CAAC,CAAC,EAGzDyF,EAAA,OAAOH,CAAS,EAAIrK,OAG7BwK,EAAWT,GAAK,OAAO,KAAMO,EAAOvF,EAAK,IAAI,CAAC,CAAC,EAEjD,KAAK,SAAS,OAAO/E,EAAO,EAAGwK,CAAQ,OAElCzF,EAAA,OAAOsF,CAAS,EAAIrK,MAjDlB,CACL,IAAA0K,EAQJ,GANI,KAAK,SAAS,OACLA,EAAA,KAAK,SAAS,KAAK,SAAS,OAAS,CAAC,EAAE,IAAI,CAAC,EAC/C,KAAK,SACdA,EAAW,KAAK,QAGd,CAACA,EACH,OAEF3F,EAAOgF,GAAK,OAAO,KAAMO,EAAOI,EAAS,WAAW,EAC/C,cAAS,KAAK3F,CAAI,EAsCzB,CACD,EAEG,KAAK,SAAS,OAASqF,EAAW,QACpC1X,GAAM,KAAK,SAAS,OAAS0X,EAAW,OAAQ,IAAM,CAC9C,MAAArF,EAAO,KAAK,SAAS,IAAI,EAC/B,GAAI,CAACA,EACG,UAAI,MAAM,oBAAoB,EAGtC,GADAA,EAAK,OAAO,EACR,CAAC,KAAK,QAAU,CAAC,KAAK,OAAO,WACzB,UAAI,MAAM,2BAA2B,EAE7C,KAAK,OAAO,WAAW,YAAYA,EAAK,IAAI,CAAC,CAAC,EAC/C,EAGCtN,EAAG,WAAa,UAAY,KAAK,KAAK,UACxC,KAAK,KAAK,SAAS,QAASqR,GAAsB,CAE9C,KAAK,QACLA,EAAQ,KAAO,KAAK,OAAO,YAC3BA,EAAQ,OAAS,SACjBA,EAAQ,MAERA,EAAQ,KAAK,CACf,CACD,CAEL,CAEA,OAAOhD,EAAa,CAClB,MAAMjE,EAAY,GAElB,OAAO,KAAKiE,CAAM,EAAE,QAAStN,GAAQ,CAC/B,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAE5BA,IAAQ,KAAK,KAAK,CAAC,IAChBqJ,EAAArJ,CAAG,EAAIsN,EAAOtN,CAAG,EACxB,CACD,EAEI,cAAS,QAASuM,GAAe,CACpCA,EAAK,OAAOlD,CAAI,EACjB,CACH,CACF,CA/KErC,EADW2K,GACJ,MAAM,UACb3K,EAFW2K,GAEJ,QAAQ,ICNV,MAAMQ,WAAsBzJ,CAAiC,CAA7D,kCAEL1B,EAAA,iBAAY,IAEZ,MAAO,CACL,KAAK,QAAQ,CACf,CAEA,SAAU,CAEV,CAEA,SAAS/H,EAAiB,CACjB,OAAAA,CACT,CACF,CAdE+H,EADWmL,GACJ,MAAM,WCDR,MAAMC,WAAsB1J,CAGjC,CAEA,QAAQzJ,EAA0ClD,EAAgB,CAChEkD,EAAG,SAAW,CAAClD,CACjB,CACF,CAJEiL,EAJWoL,GAIJ,MAAM,WCJR,MAAMC,WAA6B3J,CAA6B,CAAhE,kCAEL1B,EAAA,gBAAW,KAEX,QAAQ/H,EAAiBqT,EAAqB,CAC5C,MAAMC,EAAY,MAAM,KAAKtT,EAAG,QAAQ,EAC9BsT,EAAA,KAAK,CAACf,EAAGC,IACb,CAACD,EAAE,QAAQ,QAAU,CAACC,EAAE,QAAQ,OAC3B,EAELD,EAAE,QAAQ,OAASC,EAAE,QAAQ,OACxBa,EAAa,EAAI,GAEtBd,EAAE,QAAQ,OAASC,EAAE,QAAQ,OACxBa,EAAa,GAAK,EAEpB,CACR,EACD,QAAS3Y,EAAI,EAAGA,EAAI4Y,EAAU,OAAQ5Y,IAAK,CACnC,MAAA6Y,EAAQD,EAAU5Y,CAAC,EACnB6Y,EAAA,MAAM,MAAQ7Y,EAAE,SAAS,EAEnC,CACF,CAtBEqN,EADWqL,GACJ,MAAM,oBCDR,MAAMI,WAAmB/J,CAA6B,CAE3D,QAAQzJ,EAAiBlD,EAAgB,CACpCkD,EAAA,MAAM,QAAUlD,EAAQ,OAAS,GAChCA,EACCkD,EAAA,aAAa,SAAU,MAAM,EAEhCA,EAAG,gBAAgB,QAAQ,CAE/B,CACF,CATE+H,EADWyL,GACJ,MAAM,QCDR,MAAMC,WAAmBhK,CAA+C,CAE7E,QAAQzJ,EAAiBlD,EAAkC,CACrD,OAAOA,GAAU,WACQA,GAAU,KAC3BA,EAAA,GACC,OAAOA,GAAA,YAAAA,EAAO,WAAa,WACpCA,EAAQA,EAAM,YAEN,aAAK,qCAAsCA,CAAK,EAChDA,EAAA,KAAK,UAAUA,CAAK,IAIhCkD,EAAG,UAAYlD,GAAS,EAC1B,CACF,CAfEiL,EADW0L,GACJ,MAAM,QCCR,MAAMC,WAAiBjK,CAAgB,CAAvC,kCAGL1B,EAAA,gBAAW,KAEXA,EAAA,gBAAW,IACXA,EAAA,eAEA,KAAK/H,EAAwB,C7CXxB,IAAAW,EAAA4B,E6CYE,KAAK,OAWC,KAAK,QACd,KAAK,OAAO,QAXP,aAAS5B,EAAA,2BAAQ,WAAR,YAAAA,EAAkB,cAC9B,UAAY,KAAK,KAAO,IAAM,KAAK,QAAU,KAE/C,KAAK,SAAW,IACX4B,EAAAvC,EAAG,aAAH,MAAAuC,EAAe,eAGlBvC,EAAG,WAAW,aAAa,KAAK,OAAQA,CAAE,EACvCA,EAAA,WAAW,YAAYA,CAAE,GAKlC,CAEA,QAAS,CACH,KAAK,QACP,KAAK,OAAO,QAEhB,CAEA,QAAQA,EAAiBlD,EAAgB,CACvCA,EAAQ,CAAC,CAACA,EACNA,IAAU,KAAK,WACbA,GACG,KAAK,SACH,YAAS,IAAIwV,GAAKtS,EAAI,KAAK,KAAK,OAAQ,KAAK,KAAK,OAAO,EAC9D,KAAK,OAAO,QAEV,CAAC,KAAK,QAAU,CAAC,KAAK,OAAO,YAG/B,KAAK,OAAO,WAAW,aAAaA,EAAI,KAAK,OAAO,WAAW,EAEjE,KAAK,SAAW,KAEXA,EAAG,YAGHA,EAAA,WAAW,YAAYA,CAAE,EAE9B,KAAK,SAAW,IAGtB,CAEA,OAAOqO,EAAa,CACd,KAAK,QACF,YAAO,OAAOA,CAAM,CAE7B,CACF,CA5DEtG,EADW2L,GACJ,MAAM,MACb3L,EAFW2L,GAEJ,QAAQ,ICJV,MAAMC,WAAwBlK,CAA4B,CAG/D,QAAQzJ,EAAiB4T,EAAoB,CACvC,OAAOA,GAAc,UACtB5T,EAAwB,aAAa,YAAa4T,EAAU,SAAU,GACtE5T,EAAwB,UAAY4T,GAEpC5T,EAAwB,gBAAgB,WAAW,CAExD,CACF,CAVE+H,EADW4L,GACJ,MAAM,aCAR,MAAME,WAAsBpK,CAA0C,CAAtE,kCAEL1B,EAAA,gBAAW,IACXA,EAAA,gBAAW,KAEXA,EAAA,gBAEA,OAAO/H,EAAiB,CACtB,GAAI,KAAK,QAAS,CACZ,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAE1B,MAAA8J,EAAY,KAAK,KAAK,CAAC,EAC1B9J,EAAA,oBAAoB8J,EAAW,KAAK,OAAO,EAElD,CAEA,QAAQ9J,EAAiBlD,EAA6B,CAChD,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAE1B,MAAAgN,EAAY,KAAK,KAAK,CAAC,EAGvBlP,EAA0D,CAC9D,QAAS,KAAK,GAAG,QAAQ,UAAY,QAEnC,KAAK,SACPoF,EAAG,oBAAoB8J,EAAW,KAAK,QAASlP,CAAO,EAEzD,KAAK,QAAU,KAAK,aAAakC,EAAOkD,CAAE,EAAE,KAAK,IAAI,EAErDA,EAAG,iBAAiB8J,EAAW,KAAK,QAASlP,CAAO,CACtD,CACF,CAjCEmN,EADW8L,GACJ,MAAM,QCCR,MAAMC,WAAqBrK,CAA4B,CAE5D,SAAU,CAEV,CACQ,WAAWzJ,EAAoB,CACjCA,EAAG,mBACLA,EAAG,mBAAmB,UAAW,KAAK,KAAK,MAAM,EAEzC,aACN,iEACAA,EAAG,UACH,eAAe,IAAIA,EAAG,SAAS,EAGrC,CAEA,MAAM,KAAKA,EAAoB,CACzB8D,GAAgB9D,EAAI,GAAM,EAAI,EAChC,KAAK,WAAWA,CAAE,EACT8D,GAAgB9D,EAAI,EAAI,GACzB,aACN,gCAAgCA,EAAG,6EACnCA,CAAA,EAEF,MAAMmE,GAAqBnE,CAAE,EAC7B,KAAK,WAAWA,CAAE,GAEV,aACN,iEACAA,EAAG,UAGT,CACF,CAjCE+H,EADW+L,GACJ,MAAM,UCJR,MAAMC,WAAuBtK,CAAkC,CAGpE,QAAQzJ,EAAsBgU,EAAmB,CAC/CA,EAAW,CAAC,CAACA,EACbhU,EAAG,SAAWgU,EACVA,EACChU,EAAA,aAAa,WAAY,EAAE,EAE9BA,EAAG,gBAAgB,UAAU,CAEjC,CACF,CAXE+H,EADWgM,GACJ,MAAM,YCIR,MAAME,WAA0BxK,CAA4B,CAA5D,kCAEG1B,EAAA,4BACR,KAAK/H,EAAiB,CACpB,KAAK,oBAAsBA,EAAG,SAChC,CACA,QAAQA,EAAiBlD,EAAe,CACtC,MAAMoX,EAAQ,IAAI,OAAO,MAAMpX,OAAY,GAAG,EAC1C,IAAC,KAAK,oBACF,UAAI,MAAM,mCAAmC,EAErDkD,EAAG,UAAY,KAAK,oBAAoB,QAAQkU,EAAO,EAAE,EAAE,MAC7D,CACF,CAZEnM,EADWkM,GACJ,MAAM,gBCNR,MAAME,WAAmB1K,CAA6B,CAE3D,QAAQzJ,EAAiBlD,EAAgB,CACpCkD,EAAA,MAAM,QAAUlD,EAAQ,GAAK,OAC5BA,EACFkD,EAAG,gBAAgB,QAAQ,EAExBA,EAAA,aAAa,SAAU,MAAM,CAEpC,CACF,CATE+H,EADWoM,GACJ,MAAM,QCAR,MAAMC,WAAyB3K,CAA4B,CAGhE,QAAQzJ,EAAwBkG,EAAa,CACrC,MAAAmO,EAAe,KAAK,KAAK,CAAC,EAC5B,IAAAC,EAAStU,EAAG,aAAa,QAAQ,EAIrC,GAHI,OAAOsU,GAAW,WACXA,EAAA,IAEP,OAAOpO,GAAQ,UAAYA,EAAI,OAAS,EAAG,CAC7C,MAAMqO,EAAYD,EAAO,OAAS,EAAI,KAAO,GAEnCA,GAAA,GAAGC,IAAYrO,KAAOmO,QAC3B,CAED,IAAAG,EAAQF,EAAO,MAAM,GAAG,EAC5BE,EAAQA,EAAM,IAAKC,GAAaA,EAAS,MAAM,EACvCD,IAAM,OAAQC,GAAa,CAACA,EAAS,SAASJ,CAAI,CAAC,EAClDC,EAAAE,EAAM,KAAK,IAAI,GAAK,GAE5BxU,EAAA,aAAa,SAAUsU,CAAM,CAClC,CACF,CArBEvM,EADWqM,GACJ,MAAM,YCGR,MAAMM,WAAmCjL,CAA4B,CAE1E,QAAQzJ,EAAiBlD,EAAe,CACtC,MAAM6C,EAAO,mBACT7C,GAAU,MAA+BA,IAAU,GAClDkD,EAAA,MAAM,eAAeL,CAAI,EAE5BK,EAAG,MAAM,YAAYL,EAAM,OAAO7C,IAAQ,CAE9C,CACF,CATEiL,EADW2M,GACJ,MAAM,0BCDR,MAAMC,WAAwBlL,CAA4B,CAE/D,QAAQzJ,EAAiBlD,EAAe,CAChC,MAAA+R,EAAe,KAAK,KAAK,CAAC,EAC5B/R,GAAU,MAA+BA,IAAU,GACrDkD,EAAG,MAAM,eAAe6O,EAAa,SAAU,GAE/C7O,EAAG,MAAM,YAAY6O,EAAa,WAAY/R,CAAK,CAEvD,CACF,CATEiL,EADW4M,GACJ,MAAM,WCAR,MAAMC,WAAoBnL,CAG/B,CAEA,QAAQzJ,EAAiBlD,EAA8C,CACrE,GAAIA,EACE,UAAOA,GAAU,SAChBkD,EAAA,aAAa,QAASlD,CAAK,MAE9B,WAAWiE,KAAO,OAAO,KAAKjE,CAAK,EAC9BkD,EAAA,MAAM,YAAYZ,GAAU2B,CAAG,EAAGjE,EAAMiE,CAAU,GAAK,IAAI,MAIlE,WAAWA,KAAO,OAAO,KAAKf,EAAG,KAAK,EACnCA,EAAG,MAAc,eAAee,CAAG,CAG1C,CACF,CAhBEgH,EAJW6M,GAIJ,MAAM,SCDR,MAAMC,WAAsBpL,CAA6B,CAAzD,kCAEL1B,EAAA,gBAAW,MAEHA,EAAA,oBAER,KAAK/H,EAAwB,CACtB,iBAAcA,EAAG,QAAQ,YAAY,CAC5C,CAEA,QAAQ8U,EAA2BhY,EAAgB,CAC7C,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAGhC,MAAMiY,EAAa,KAAK,GAAG,QAAQ,YAAY,EAC3C,IAAApK,EACJ,GAAI7N,EACF6N,EAAW,KAAK,KAAK,CAAC,EAAa,OAAO,sBACjC,KAAK,YACJA,EAAA,KAAK,YAAY,kBAErB,WAAI,MAAM,qBAAqB,EAGvC,GAAIoK,IAAepK,EAAS,CACpB,MAAAqK,EAAQ,SAAS,cAAcrK,CAAO,EAGrC,KAAAmK,EAAM,WAAW,OAAS,GAC3BA,EAAM,YACFE,EAAA,YAAYF,EAAM,UAAU,EAKtC,MAAMpD,EAAa,MAAM,UAAU,MAAM,KAAKoD,EAAM,UAAU,EAC9D,UAAW9C,KAAaN,EACtBsD,EAAM,aAAahD,EAAU,KAAMA,EAAU,KAAK,EAIhD8C,EAAM,WACFA,EAAA,WAAW,aAAaE,EAAOF,CAAK,EAE1C,QAAQ,KAAK,WAAW,EAG1B,KAAK,GAAKE,EAEd,CACF,CAlDEjN,EADW8M,GACJ,MAAM,SCRR,MAAMI,WAAuBxL,CAA4B,CAAzD,kCAGG1B,EAAA,eAER,KAAK/H,EAAwB,CACtB,YAAS,IAAIsS,GAAKtS,EAAI,KAAK,KAAK,OAAQ,KAAK,KAAK,OAAO,CAChE,CAEA,QAAQA,EAAwBlD,EAAe,CzDZ1C,IAAA6D,EAAA4B,GyDaH5B,EAAA,KAAK,SAAL,MAAAA,EAAa,SACVX,EAAA,UAAYlD,GAAgB,GAC1B,YAAS,IAAIwV,GAAKtS,EAAI,KAAK,KAAK,OAAQ,KAAK,KAAK,OAAO,GAC9DuC,EAAA,KAAK,SAAL,MAAAA,EAAa,MACf,CAEA,QAAS,CzDnBJ,IAAA5B,GyDoBHA,EAAA,KAAK,SAAL,MAAAA,EAAa,QACf,CAEA,OAAO0N,EAAa,CzDvBf,IAAA1N,GyDwBEA,EAAA,oBAAAA,EAAQ,OAAO0N,EACtB,CACF,CAtBEtG,EADWkN,GACJ,MAAM,YCHR,MAAMC,WAAmBzL,CAA4B,CAE1D,QAAQzJ,EAAiBlD,EAAY,CAC/B,OAAOA,GAAU,UACf,OAAOA,GAAA,YAAAA,EAAO,WAAa,aAC7BA,EAAQA,EAAM,YASlBkD,EAAG,YAAclD,GAAS,EAC5B,CACF,CAfEiL,EADWmN,GACJ,MAAM,QCDR,MAAMC,WAA4B1L,CAAmC,CAArE,kCAGG1B,EAAA,oBAER,QAAS,CACH,KAAK,cACF,UAAK,OAAO,KAAK,WAAW,EAAI,CAAC,KAAK,KAAK,OAAO,KAAK,WAAW,EAE3E,CAEA,KAAK/H,EAAwB,CACrB,MAAA8J,EAAY,KAAK,KAAK,CAAC,EACvBsL,EAAU,KAAK,GAAG,QAAQ,UAAY,OAC5CpV,EAAG,iBAAiB8J,EAAW,KAAK,OAAQ,CAAE,QAAAsL,EAAS,CACzD,CAEA,OAAOpV,EAAwB,CACzB,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAE1B,MAAA8J,EAAY,KAAK,KAAK,CAAC,EAC1B9J,EAAA,oBAAoB8J,EAAW,KAAK,MAAM,CAC/C,CAEA,QAAQ9J,EAAwBqV,EAAqB,CAC/C,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAEhC,KAAK,YAAcA,CACrB,CACF,CA9BEtN,EADWoN,GACJ,MAAM,eCIR,MAAMG,WAAwB7L,CAGnC,CAHK,kCAKL1B,EAAA,iBAAY,IACZA,EAAA,gBAAW,KAEXA,EAAA,gBAAW,KAAK,QAAQ,KAAK,IAAI,GAEjC,KAAK/H,EAAsB,CACtBA,EAAA,iBAAiB,SAAU,KAAK,QAAQ,CAC7C,CAEA,OAAOA,EAAsB,CACxBA,EAAA,oBAAoB,SAAU,KAAK,QAAQ,CAChD,CAEA,QAAQA,EAAsBlD,EAAyB,CACjDkD,EAAG,OAAS,QACdA,EAAG,QAAU9B,GAAU8B,EAAG,KAAK,IAAM9B,GAAUpB,CAAK,EAEpDkD,EAAG,QAAU,CAAClD,CAElB,CAEA,SAASkD,EAAsB,CAC7B,OAAOa,GAAcb,CAAE,CACzB,CACF,CAzBE+H,EAJWuN,GAIJ,MAAM,aCPR,MAAMC,WAAqB7B,EAAS,CAGzC,QAAQ1T,EAAiBlD,EAAgB,CACvC,OAAO,MAAM,QAAQkD,EAAI,CAAClD,CAAK,CACjC,CACF,CALEiL,EADWwN,GACJ,MAAM,UCLf,MAAMC,GAAiB,gCAMhB,MAAMC,WAAoBhM,CAAyB,CAAnD,kCAEL1B,EAAA,iBAAY,IACZA,EAAA,gBAAW,KAEXA,EAAA,cAeAA,EAAA,gBAAW,KAAK,QAAQ,KAAK,IAAI,GAbjC,QAAQ/H,EAAiB,CACvB,MAAMoK,EAAO,CACX,KAAOpK,EAAwB,KAC/B,QAASA,EAAG,QACZ,gBAAiB,EAAAA,EAAG,aAAa,iBAAiB,EAClD,QAAS,GACT,SAAU,IAEZ,OAAAoK,EAAK,QAAUA,EAAK,UAAY,SAAWA,EAAK,OAAS,QACpDA,EAAA,SAAWA,EAAK,UAAY,SAC1BA,CACT,CAIA,KAAKpK,EAAiB,CAChB,GAAAA,EAAG,UAAY,SACjB,OAGE,IADS,KAAK,QAAQA,CAAE,EAClB,QAAS,CACjB,KAAK,MAAQA,EAAG,aAAa,YAAY,GAAKwV,GAE9C,MAAME,EAAS,KAAK,MAAM,MAAM,GAAG,EACnC,UAAWjT,KAASiT,EAClB1V,EAAG,iBAAiByC,EAAM,KAAQ,OAAK,SAAU,EAAK,EAG5D,CAEA,OAAOzC,EAAwB,CAC7B,GAAI,KAAK,MAAO,CACd,MAAM0V,EAAS,KAAK,MAAM,MAAM,GAAG,EACnC,UAAWjT,KAASiT,EAClB1V,EAAG,oBAAoByC,EAAM,KAAK,EAAG,KAAK,QAAQ,EAGxD,CAEA,QACEzC,EACAE,EACA,CACI,IAAAC,EAAW,KAAK,SAASH,CAAE,EAiB/B,GAfK,MAAM,QAAQE,CAAQ,IACrBA,GAAY,KACdA,EAAWhC,GAAUgC,CAAQ,EAElBA,EAAA,IAGV,MAAM,QAAQC,CAAQ,IACrBA,GAAY,KACdA,EAAWjC,GAAUiC,CAAQ,EAElBA,EAAA,IAIXA,IAAaD,EAEf,OAGI,MAAAkK,EAAO,KAAK,QAAQpK,CAAE,EAExB,GAAAoK,EAAK,SAAWA,EAAK,SAChB,OAAArK,GAAaC,EAAI,QAASE,CAAQ,EAGtC,GAAAF,EAAyB,OAAS,mBACjC,SAAM,QAAQE,CAAQ,EACxB,QAASxF,EAAI,EAAGA,EAAKsF,EAAyB,QAAQ,OAAQtF,IAAK,CAC3D,MAAAsG,EAAUhB,EAAyB,QACvCtF,CACF,EACAsG,EAAO,SAAWd,EAAS,QAAQc,EAAO,KAAK,EAAI,SAG9ChB,EAAG,aAAa,iBAAiB,EAC1CA,EAAG,UAAYE,EAEdF,EAAwB,MAAQE,CAErC,CAEA,SAASF,EAAiB,CACxB,OAAOa,GAAcb,CAAE,CACzB,CACF,CAhGE+H,EADW0N,GACJ,MAAM,2uBCER,MAAME,EAAe,CAa1B,YACEnM,EACA8B,EACAE,EACAtC,EACA,CAjBKnB,EAAA,eACAA,EAAA,kBACAA,EAAA,kBACAA,EAAA,gBAeA,YAAS,IAAIwB,GAAeC,CAAO,EACnC,eAAY,IAAI6B,GAAiBC,CAAU,EAC3C,eAAY,IAAIC,GAAiBC,CAAU,EAC3C,aAAU,IAAIvC,GAAeC,CAAQ,CAC5C,CAEO,SAAS0M,EAAoB,CAClC,GAAI,CAACA,EACH,cAAQ,MAAMA,CAAM,EACd,IAAI,MAAM,2BAA2B,EAEzCA,EAAO,SACJ,YAAO,YAAYA,EAAO,OAAO,EAEpCA,EAAO,YACJ,eAAU,YAAYA,EAAO,UAAU,EAE1CA,EAAO,YACJ,eAAU,YAAYA,EAAO,UAAU,EAE1CA,EAAO,UACJ,aAAQ,YAAYA,EAAO,QAAQ,CAE5C,CACF,CCvCO,MAAMC,GAAN,KAAW,CA2FhB,aAAc,CAjEP9N,EAAA,eAEAA,EAAA,iBAAYqD,GAAiB,eAG7BrD,EAAA,eAAwB,IAGxBA,EAAA,kBAAyB,IAGzBA,EAAA,kBAAyB,IAGzBA,EAAA,gBAAqB,IAErBA,EAAA,qBAAgBkI,IAEhBlI,EAAA,iBAAYrK,IAGZqK,EAAA,0BAAqB,CAAC,IAAK,GAAG,GAG9BA,EAAA,qBAAgB,KAGhBA,EAAA,mBAAc,IAGdA,EAAA,8BAAyB,IAGzBA,EAAA,sBAAiB,CAAC,SAAU,QAAS,WAAY,MAAM,GAEvDA,EAAA,kCAA6B,IAG5BA,EAAA,eAAoB,CAAC,IAAI,GAGzBA,EAAA,mBAAwB,CAAC,KAAK,GA+BpC,GANA,KAAK,OAAS,IAAI4N,GAChB,KAAK,QACL,KAAK,WACL,KAAK,WACL,KAAK,UAEHE,GAAK,SACP,OAAOA,GAAK,SAEdA,GAAK,SAAW,IAClB,CAhGA,OAAc,QAEZC,EACA5H,EACAiD,EACAnR,EACA,CACA,GAAI,CAAC,MAAQ,CAAC,KAAK,KAAM,CACvB,MAAM7D,EAAQ,IAAI,MAChB,OAAOgV,EAAO,SAASA,EAAO,4BAA4BA,EAAO,wBAEnE,cAAQ,MAAMhV,EAAOgV,EAAQnR,EAAImR,EAAO,KAAK,MAAM,EAC7ChV,EAER,KAAK,KAAK2Z,EAAS5H,EAAIiD,EAAO,KAAK,OAAQnR,CAAE,CAC/C,CAgDA,IAAI,OAAOlD,EAAiB,CACtB,SAAM,QAAQA,CAAK,EAAG,CACxB,KAAK,QAAU,GACf,KAAK,YAAc,GACnB,UAAWa,KAAOb,EACX,aAAQ,KAAKa,CAAG,EAChB,iBAAY,KAAKA,EAAM,GAAG,EAGrC,CAEA,IAAI,QAAmB,CACrB,OAAO,KAAK,OACd,CAEA,IAAI,YAAuB,CACzB,OAAO,KAAK,WACd,CAsBO,UAAU/C,EAA2B,CAC1C,GAAKA,EAIL,SAAW,CAACoG,EAAQlE,CAAK,IAAK,OAAO,QAAQlC,CAAO,EAClD,OAAQoG,EAAQ,CACd,IAAK,UACH,KAAK,QAAU,CAAE,GAAG,KAAK,QAAS,GAAIlE,GACtC,MACF,IAAK,aACH,KAAK,WAAa,CAAE,GAAG,KAAK,WAAY,GAAIA,GAC5C,MACF,IAAK,aACH,KAAK,WAAa,CAAE,GAAG,KAAK,WAAY,GAAIA,GAC5C,MACF,IAAK,WACH,KAAK,SAAW,CAAE,GAAG,KAAK,SAAU,GAAIA,GACxC,MACF,IAAK,SACH,KAAK,OAASA,EACd,MACF,IAAK,gBACH,KAAK,cAAgBA,EACrB,MACF,IAAK,YACH,KAAK,UAAYA,EACjB,MACF,IAAK,qBACH,KAAK,mBAAqBA,EAC1B,MACF,IAAK,gBACH,KAAK,cAAgBA,EACrB,MACF,IAAK,cACH,KAAK,YAAcA,EACnB,MACF,IAAK,iBACH,KAAK,eAAiBA,EACtB,MACF,IAAK,6BACE,gCAA6B,EAAQA,EAC1C,MACF,QACU,aAAK,uBAAwBkE,EAAQlE,CAAK,EAClD,KACJ,CAEJ,CAEO,eAAelC,EAA4B,CAChD,MAAMmb,EAAgC,CAEpC,SAAU,CAAC,EACX,QAAS,CAAC,EACV,WAAY,CAAC,EACb,WAAY,CAAC,EAGb,iBAAkB,CAAC,EAGnB,cAAe,CAAC,GAoBlB,GAjBInb,IACFmb,EAAY,QAAU,CAAE,GAAGA,EAAY,QAAS,GAAGnb,EAAQ,SAC3Dmb,EAAY,WAAa,CACvB,GAAGA,EAAY,WACf,GAAGnb,EAAQ,YAEbmb,EAAY,WAAa,CACvB,GAAGA,EAAY,WACf,GAAGnb,EAAQ,YAEbmb,EAAY,SAAW,CACrB,GAAGA,EAAY,SACf,GAAGnb,EAAQ,WAKXA,GAAA,MAAAA,EAAS,QAAU,MAAM,QAAQA,GAAA,YAAAA,EAAS,MAAM,EAAG,CACrDmb,EAAY,OAAS,GACrBA,EAAY,WAAa,GACd,UAAAnS,KAAUhJ,EAAQ,OACfmb,EAAA,OAAO,KAAKnS,CAAM,EAClBmS,EAAA,WAAW,KAAKnS,EAAS,GAAG,OAG1CmS,EAAY,OAAS,KAAK,OAC1BA,EAAY,WAAa,KAAK,WA4BhC,GAzBYA,EAAA,oBACVnb,GAAA,YAAAA,EAAS,qBAAsB,KAAK,mBAC1Bmb,EAAA,eAAgBnb,GAAA,YAAAA,EAAS,gBAAiB,KAAK,cAC3Dmb,EAAY,uBACV,OAAOnb,GAAA,YAAAA,EAAS,yBAA2B,UACvCA,EAAQ,uBACR,KAAK,uBACCmb,EAAA,gBAAiBnb,GAAA,YAAAA,EAAS,iBAAkB,KAAK,eAC7Dmb,EAAY,YACV,OAAOnb,GAAA,YAAAA,EAAS,cAAgB,UAC5BA,EAAQ,YACR,KAAK,YACCmb,EAAA,SAAUnb,GAAA,YAAAA,EAAS,UAAWib,GAAK,QAG/CE,EAAY,QAAU,CAAE,GAAG,KAAK,QAAS,GAAGA,EAAY,SACxDA,EAAY,WAAa,CAAE,GAAG,KAAK,WAAY,GAAGA,EAAY,YAC9DA,EAAY,WAAa,CAAE,GAAG,KAAK,WAAY,GAAGA,EAAY,YAC9DA,EAAY,SAAW,CAAE,GAAG,KAAK,SAAU,GAAGA,EAAY,UAErDA,EAAY,mBACfA,EAAY,iBAAmB,IAI7BA,EAAY,QAAS,CACvB,MAAMpE,EAAmB,OAAO,KAAKoE,EAAY,OAAO,EAAE,OACvDhV,GAAQA,EAAI,QAAQ,GAAG,GAAK,GAEnBgV,EAAA,iBAAiB,KAAK,GAAGpE,CAAgB,EAGhD,OAAAoE,CACT,CASO,KACL/V,EACAqO,EAAc,GACdzT,EACA,CACM,MAAAmb,EAAuB,KAAK,eAAenb,CAAO,EAExDoO,GAAS,cAAc+M,CAAW,EAElC,MAAMzI,EAAO,IAAIgF,GAAKtS,EAAIqO,EAAQ0H,CAAW,EAC7C,OAAAzI,EAAK,KAAK,EACHA,CACT,CACF,EAjQO,IAAM0I,GAANH,GAwBL9N,EAxBWiO,GAwBI,YA2OhB,OAAe,KAAOA,GCnRhB,MAAMC,GAAc,OAAO,ECI3B,SAASC,GAAIC,EAA0B,CAIrC,WACT,CCoBa,MAAAC,OAAuB,IAAI,CACtC,OACA,OACA,KACA,MACA,QACA,KACA,MACA,QACA,OACA,OACA,QACA,SACA,QACA,KACF,CAAC,EAQe,SAAAC,GACdC,EACAC,KACGC,EACS,CACL,OAAE,IAAAF,EAAK,MAAAC,EAAO,SAAAC,EACvB,CAEO,SAASC,GAAclW,EAAgD,CAC5E,GAAI,CAACA,EACI,SAGT,KAAM,CAAE,IAAA+V,EAAK,MAAAC,EAAO,SAAAC,CAAA,EAAajW,EAE7B,UAAO+V,GAAQ,WACjB,OAAIA,IAAQJ,GACH,OAAQK,EAAc,IAAI,EAE5BE,GAAcH,EAAI,OAAO,OAAO,CAAE,SAAAE,CAAS,EAAGD,CAAK,CAAC,CAAC,EAG9D,MAAM7X,EAAiB,GAEvB,GAAI4X,IAAQL,GAAa,CAClBvX,EAAA,KAAK,IAAK4X,CAAG,EAEP,UAACvV,EAAKpD,CAAG,IAAK,OAAO,QAAQ4Y,GAAS,EAAE,EAC7C5Y,GAAO,OAEP,OAAOA,GAAO,WAAa,CAACmG,GAAgBwS,CAAG,EAC7C3Y,GACGe,EAAA,KAAK,IAAKqC,CAAG,EAGpBrC,EAAK,KAAK,IAAKqC,EAAK,IAAKvE,GAAcmB,CAAG,CAAC,GAKjD,IAAI+Y,EAAc,GAClB,OAAIF,EAAS,SACGE,EAAA,GACVJ,IAAQL,IAAavX,EAAK,KAAK,GAAG,EACtCiY,EAAeH,CAAQ,GAGrBF,IAAQL,KACLS,EAOEhY,EAAA,KAAK,KAAM4X,EAAK,GAAG,EANpBF,GAAiB,IAAIE,CAAG,EAC1B5X,EAAK,KAAK,IAAI,EAETA,EAAA,KAAK,MAAO4X,EAAK,GAAG,GAOxB5X,EAAK,KAAK,EAAE,EAEnB,SAASiY,EAAeH,EAAyB,CAC/C,UAAWjD,KAASiD,EACbjD,IAED,MAAM,QAAQA,CAAK,EACrBoD,EAAepD,CAAK,EACX,OAAOA,GAAU,UAAY,OAAOA,GAAU,SACvD7U,EAAK,KAAKD,GAAW8U,EAAM,UAAU,CAAC,EAEjC7U,EAAA,KAAK+X,GAAclD,CAAK,CAAC,EAGpC,CACF,CAwBA,WAAW,iBAAmB8C,GAC9B,WAAW,YAAcJ,GCpIlB,MAAeW,WAAuB,WAAY,CAiBvD,aAAc,CACN,QAfD7O,EAAA,cAAS,IACTA,EAAA,eAEGA,EAAA,sBAAiB,IAKjBA,EAAA,iCAAuD,IAEvDA,EAAA,0BAA+B,IAOnC,KAAK,SACP,KAAK,OAASxN,KAElB,CAKO,QAAS,CACV,MAAQ,KAAK,eACV,mBAAc,YAAY,IAAI,CAEvC,CAIU,KAAKsc,KAA6Chc,EAAiB,CAC3E,MAAM8O,EAAY,KAAK,YAAY,MAAQ,KAAK,QAC3C,KAAK,SACR,KAAK,OAASpP,MAEAI,GAAA,CAAE,UAAAgP,EAAW,MAAO,KAAK,OAAQ,KAAAkN,CAAK,EAAG,GAAGhc,CAAI,CAClE,CAEU,QAAQA,EAAiB,CACjC,OAAO,KAAK,KAAK,OAAQ,GAAGA,CAAI,CAClC,CAEU,SAASA,EAAiB,CAC9B,GAAC,KAAK,OAIV,OAAO,KAAK,KAAK,QAAS,GAAGA,CAAI,CACnC,CAEU,SAASA,EAAiB,CAC1B,cAAM,GAAGA,CAAI,CACvB,CAKU,oBAA+B,CACvC,MAAO,EACT,CAEA,MAAgB,KAAKic,EAA8B,CACjD,KAAK,eAAeA,CAAkB,EACtC,KAAK,4BAA4BA,CAAkB,CAErD,CAEU,OAAQ,CAChB,OACE,KAAK,6CACL,KAAK,wBAAwB,CAEjC,CAMU,kBAAkBC,EAA2B,CAC9C,YAAK,aAAaA,CAAiB,CAC5C,CAMU,4BAA4BD,EAA8B,CAClE,MAAME,EAAO,KAAK,0BAClB,UAAWD,KAAqBD,EACzBE,EAAKD,CAAiB,EAGpBC,EAAKD,CAAiB,EAAE,SAC3BC,EAAKD,CAAiB,EAAE,OACtB,KAAK,kBAAkBA,CAAiB,GAJ5CC,EAAKD,CAAiB,EAAI,CAAE,OAAQ,GAAO,YAAa,GAQ9D,CAKU,2CAA4C,CACpD,OAAO,OAAO,KAAK,KAAK,yBAAyB,EAAE,MAChDhW,GACC,CpE/HD,IAAAJ,EAAA4B,EoE+HC,SAAC5B,EAAA,KAAK,0BAA0BI,CAAG,IAAlC,MAAAJ,EAAqC,WACtC4B,EAAA,KAAK,0BAA0BxB,CAAG,IAAlC,YAAAwB,EAAqC,cAE3C,CASU,yBAA0B,CAClC,OAAO,KAAK,qBAAqB,MAAO0U,IACtCA,EAAoB/X,GAAU+X,CAAiB,EAE7C,KAAK,MAAM,eAAeA,CAAiB,GAC3C,OAAO,KAAK,MAAMA,CAAiB,EAAM,IAE5C,CACH,CAEU,eAAexW,EAAqB,CAC5C,IAAI3D,EAAa2D,EACb,UAAOA,GAAS,SACX,OAAAA,EAGT,GAAIA,IAAS,OACH3D,EAAA,WACC2D,IAAS,QACV3D,EAAA,WACC2D,IAAS,OACV3D,EAAA,aACC2D,IAAS,YACV3D,EAAA,eACC2D,IAAS,GACV3D,EAAA,eACC,CAAC,MAAM,OAAO2D,CAAI,CAAC,EAC5B3D,EAAQ,OAAO2D,CAAI,EAEf3D,GAAS,OAAO,mBACVA,EAAA2D,OAEL,CACC,MAAA1C,EAAalB,GAAgBC,CAAK,EACxCA,EAAQiB,GAA0BjB,EAG7B,OAAAA,CACT,CAKU,aAAaoa,EAAoC,CAEzD,OAAO,SACLpB,EACArT,EACA4O,EACArR,EACA,CACA,GAAI,CAAC,MAAQ,CAAC,KAAK,KAAM,CACvB,MAAM7D,EAAQ,IAAI,MAChB,OAAOkV,EAAQ,SAASA,EAAQ,4BAA4BA,EAAQ,wBAE9D,oBAAMA,EAASrR,CAAE,EACnB7D,EAGR,KAAK,KAAK+a,EAAMzU,EAAO4O,EAAQ,KAAK,OAAQrR,CAAE,EAElD,CAMU,mBAAoB,CAE9B,CAMU,sBAAuB,CAQjC,CAUA,MAAgB,yBACdC,EACAE,EACAD,EACAyJ,EACA,CAGE,KAAK,2BACL,KAAK,0BAA0B1J,CAAa,IAEvC,+BAA0BA,CAAa,EAAE,YAAc,IAGnDC,EAAA,KAAK,eAAeA,CAAQ,EAEjC,MAAAiX,EAAsBjY,GAAUe,CAAa,EAE/C,KAAK,OAAS,KAAK,MAAMkX,CAAmB,IACnChX,EAAA,KAAK,MAAMgX,CAAmB,GAItC,WAAMA,CAAmB,EAAIjX,EAG7B,oCACHiX,EACAhX,EACAD,EACAyJ,CAAA,CAEJ,CASU,+BACR1J,EACAE,EACAD,EACAyJ,EACA,CACK,WACH,wCACA1J,EACAE,EACAD,EACAyJ,CAAA,CAEJ,CASU,gBAAgByN,EAAuBC,EAAuB,CACjE,WAAM,yBAA0BD,EAAaC,CAAW,CAC/D,CAEA,MAAgB,cAEd,CACI,QAAK,iBAAmB,GAEnB,YAGL,IAAC,KAAK,0BACR,YAAK,MAAM,0DAA0D,EAC9D,KAGT,KAAK,eAAiB,GAEhB,MAAAnH,EAAW,MAAM,KAAK,WAGxB,IACF,OAAIA,IACEA,aAAoB,aACtB,KAAK,UAAY,GACjB,KAAK,YAAYA,CAAuB,GAC/B,OAAOA,GAAa,SAC7B,KAAK,UAAYA,EACPA,EAAwB,MAC7B,eAAYuG,GAAcvG,CAAsB,IAGlDA,QACA/T,GACP,WAAK,eAAiB,GAChBA,CACR,CACF,CAEA,MAAgB,gBAA+B,CAE/C,CAEA,MAAgB,cACd+T,EACc,CACT,WAAM,gBAAiBA,CAAQ,CACtC,CAEA,MAAgB,SAAwB,CAExC,CAOO,QAAQhI,EAAiB/E,EAA0C,CACxE,OAAO,IAAI6F,GAAS,KAAK,MAAOd,EAAS/E,CAAQ,CACnD,CAOO,iBACLlD,EACAkD,EACU,CACJ,MAAAgU,EAAsBjY,GAAUe,CAAa,EAC5C,YAAK,QAAQkX,EAAqBhU,CAAQ,CACnD,CAUO,mBACLlD,EACAC,EACAyJ,EAA2B,KAC3B,CACM,MAAAwN,EAAsBjY,GAAUe,CAAa,EAC7CE,EAAW,KAAK,MAAMgX,CAAmB,EAC/C,KAAK,yBAAyBlX,EAAeE,EAAUD,EAAUyJ,CAAS,CAC5E,CASO,mBAAmB1J,EAAuB,CACzC,MAAAkX,EAAsBjY,GAAUe,CAAa,EAE5C,OADO,KAAK,MAAMkX,CAAmB,CAE9C,CAMU,eAAeL,EAA8B,CACrD,MAAMpF,EAAa,KAAK,WACxB,UAAWhX,KAAKgX,EAAY,CACpB,MAAAM,EAAkBN,EAAWhX,CAAC,EAC9B4O,EAAO0I,EAAU,SACvB,GAAI8E,EAAmB,QAAQxN,CAAI,IAAM,GAAI,CAC3C,MAAMpJ,EAAW8R,EAAU,UAC3B,KAAK,yBAAyB1I,EAAM,OAAWpJ,EAAU,IAAI,GAGnE,CACF,CAjZE6H,EADoB6O,GACN,iBCJT,cAAiCA,EAAe,CAwCrD,aAAc,CACN,QAxCE7O,EAAA,YAAqB,MACrBA,EAAA,aAEAA,EAAA,cAAS,IAETA,EAAA,cAAS,IAETA,EAAA,kBAAa,IAEbA,EAAA,qBAAgB,IAChBA,EAAA,uBAAkBkC,EAAgB,YAAY,WAAW,GAEzDlC,EAAA,wBAA8C,IAyB9CA,EAAA,gBAAW,IAInB,KAAK,gBAAgB,QACnB,wBACA,KAAK,sBAAsB,GAE7B,KAAK,gBAAgB,GACnB,8BACA,KAAK,aACL,KAEJ,CAnCA,IAAW,OAAQ,CACjB,OAAO,KAAK,MACd,CAGA,IAAW,OAAQ,CACjB,OAAO,KAAK,MACd,CAGA,IAAW,WAAY,CACrB,OAAO,KAAK,UACd,CAGA,IAAW,cAAe,CACxB,OAAO,KAAK,aACd,CAoBA,MAAgB,KAAK+O,EAA8B,CAC7C,IACI,mBAAM,KAAKA,CAAkB,EACnC,KAAK,gBAAgB,QACnB,iBACA,KAAK,sBAAsB,GAEtB,MAAM,KAAK,oBACX3a,GACP,KAAK,MAAMA,CAAc,CAC3B,CACF,CASU,MAAMA,EAAY,CACtBA,EAAM,SACR,QAAQ,MAAM,IAAI,KAAK,YAAYA,EAAM,SAAS,EAEpD,KAAK,gBAAgB,QACnB,kBACAA,EACA,KAAK,sBAAsB,GAE7B,KAAK,MAAMA,CAAK,CAClB,CAKA,MAAgB,aAAc,CAIxB,QAAK,QAAS,CAChB,MAAM,KAAK,iBACL,MAAA+T,EAAW,MAAM,KAAK,eACtB,WAAK,cAAcA,CAAQ,EAC7B,KAAK,UACP,MAAM,KAAK,OAEb,MAAM,KAAK,UACX,OAEG,WACH,8EACA,KAAK,0BACL,KAAK,MAGT,CAGA,MAAc,aAA4B,CACxC,KAAK,OAAS,GACd,KAAK,MAAM,oBAAoB,EAC/B,KAAK,gBAAgB,QACnB,uBACA,KAAK,sBAAsB,EAE/B,CAGA,MAAgB,YAA2B,CAE3C,CAGA,MAAc,YAA2B,CACvC,KAAK,OAAS,GACd,KAAK,OAAS,GACd,KAAK,gBAAgB,QACnB,sBACA,KAAK,sBAAsB,EAE/B,CAGA,MAAgB,WAA0B,CAE1C,CAMA,MAAgB,cAA6B,CAE7C,CAEU,uBAAwB,CAQzB,MAPmC,CACxC,QAAS,KAAK,QAAQ,YAAY,EAElC,UAAW,KAEX,QAAS,KAAK,iBAGlB,CAqBU,sBAAuB,CAC3B,IACF,KAAK,cAAgB,GACrB,KAAK,WAAa,GAClB,MAAM,qBAAqB,EAQ3B,KAAK,gBAAgB,QACnB,yBACA,KAAK,sBAAsB,GAE7B,KAAK,gBAAgB,IACnB,8BACA,KAAK,aACL,MAEF,KAAK,gBAAgB,IACnB,2BACA,KAAK,aACL,YAEK/T,GACP,KAAK,MAAMA,CAAc,CAC3B,CACF,CAMU,mBAAoB,CACxB,IACF,KAAK,cAAgB,GACrB,KAAK,WAAa,GAClB,MAAM,kBAAkB,EACxB,KAAK,gBAAgB,QACnB,sBACA,KAAK,sBAAsB,SAEtBA,GACP,KAAK,MAAMA,CAAc,CAC3B,CACF,CAUA,MAAgB,yBACd8D,EACAE,EACAD,EACAyJ,EACA,CACI,IACI,+BACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAEF,MAAM,KAAK,oBACJxN,GACP,KAAK,MAAMA,CAAc,CAC3B,CACF,CAKU,qBAAqB+a,EAAiB,CACvC,OACL,KAAM,OACN,KAAM,CAACxb,KAAgCb,IAAgB,CACrD,GAAI,CAACa,EACH,MAAM,IAAI,MACR,IAAIwb,EAAK,2DAGN,OAAAxb,EAAG,MAAMwb,EAAMrc,CAAI,CAC5B,EAEJ,CASU,qBAAqBqc,EAAuB,CAC7C,OACL,KAAM,OACN,KAAM,CAACxb,KAAgC4b,IAC9B,CAAC7U,EAAcoQ,EAAY7S,EAAiBqR,IAAoB,CACrE,GAAI,CAAC3V,EACH,MAAM,IAAI,MACR,IAAIwb,EAAK,2DAKb,OAAAI,EAAO,KAAK7U,CAAK,EACjB6U,EAAO,KAAKzE,CAAK,EACjByE,EAAO,KAAKtX,CAAE,EACdsX,EAAO,KAAKjG,CAAO,EACZ3V,EAAG,MAAMwb,EAAMI,CAAM,EAEhC,CAEJ,CAEA,MAAgB,MAAO,CACjB,QAAK,OAAS,KAAK,MAErB,OAAO,KAAK,KAGV,IAAC,KAAK,0BAA2B,CACnC,KAAK,MAAM,8CAA8C,EACzD,OAGE,IACF,MAAM,KAAK,cACX,MAAM,KAAK,aAEN,UAAO,IAAItB,GACX,UAAO,KAAK,UACb,KAAK,OACF,WAAQ,KAAK,KAAK,OACvB,KAAK,KAAK,QAGZ,MAAM,KAAK,aACX,MAAM,KAAK,kBACJ7Z,GACP,KAAK,OAAS,GACd,KAAK,OAAS,GACd,KAAK,MAAMA,CAAc,CAC3B,CAEA,OAAO,KAAK,IACd,CAEU,SAAU,CrEzVf,IAAAwE,EqE0VC,IACI,MAAAoV,GAAcpV,EAAA,KAAK,OAAL,YAAAA,EAAW,eAAe,CAC5C,QAAS,KAAK,aAAa,IAAI,EAC/B,WAAY,CACV,KAAM,KAAK,qBAAqB,IAAI,EACpC,KAAM,KAAK,qBAAqB,IAAI,CACtC,IAGF,OAAIoV,EACW,IAAIzD,GACf,MAAM,UAAU,MAAM,KAAK,KAAK,UAAU,EAC1C,KAAK,MACLyD,CAAA,EAIG,WACA5Z,GACP,KAAK,MAAMA,CAAc,CAC3B,CACF,CAEA,MAAa,QAAS,CAChB,IACE,KAAK,OACP,KAAK,OAAS,GACd,KAAK,OAAS,GACd,KAAK,KAAK,SACV,KAAK,KAAO,YAEPA,GACP,KAAK,MAAMA,CAAc,CAC3B,CACF,CAEA,MAAgB,OAAQ,CAClB,IACE,KAAK,MACP,KAAK,KAAK,cAELA,GACP,KAAK,MAAMA,CAAc,CAC3B,CACF,CACF,sGC1XO,MAAeob,WAA2BC,CAAU,CAApD,kCACKzP,EAAA,0BAAyC,IAEzCA,EAAA,qBAAgB,IAIhB,mBAAoB,CAC5B,KAAK,mBAAmB,EACxB,MAAM,kBAAkB,EACxB,KAAK,gBAAgB,EACrB,KAAK,YAAY,CACnB,CAEU,OAAQ,CACT,aAAM,SAAW,KAAK,aAC/B,CAOU,2BACRuB,EACAxM,EACAgB,EACA,CACA,OAAQA,EAAM,CACZ,IAAK,SACH,OAAO,OAAOhB,CAAK,EACrB,IAAK,UACH,OAAOA,IAAU,OACnB,IAAK,SACC,UAAOA,GAAU,SACZ,OAAAA,EAEL,UAAOA,GAAA,YAAAA,EAAO,WAAa,WAC7B,OAAOA,EAAM,WAEjB,IAAK,SACH,OAAOD,GAAgBC,CAAK,CAChC,CACO,OAAAY,GAAUZ,CAAK,EAAE,KAC1B,CAMU,4BAA4B4U,EAAiBnJ,EAAe,CACzD,OAAAmJ,EAAA,MAAQA,EAAW,OAASnJ,EAChCmJ,CACT,CAEU,sBACR+F,EACAlP,EACA,CACA,MAAMmJ,EAAkB,GACb,UAAAM,KAAa,KAAK,mBAEvB,OADcyF,EAAI,aAAazF,EAAU,IAAI,GACxB,UAAYA,EAAU,SACrC,cACN,IAAI,MAAM,aAAaA,EAAU,8BAA8B,GAGjEN,EAAWxS,GAAU8S,EAAU,IAAI,CAAC,EAAI,KAAK,2BAC3CA,EAAU,KACVyF,EAAI,aAAazF,EAAU,IAAI,GAI9B,YAAK,4BAA4BN,EAAYnJ,CAAK,CAC3D,CAEU,kBACRkP,EACAlP,EACA,CACA,MAAMmJ,EAAa,KAAK,sBAAsB+F,EAAKlP,CAAK,EAClDmP,EAAUD,EAAI,UACf,KAAK,MAAM,QACT,WAAM,MAAQ,IAErB,KAAK,MAAM,MAAM,KAAK,CAAE,GAAG/F,EAAY,QAAAgG,EAAS,CAClD,CAEU,oBAAqB,CAC7B,MAAMC,EAAY,KAAK,iBACrB,uBAEF,QAASpP,EAAQ,EAAGA,EAAQoP,EAAU,OAAQpP,IAAS,CAC/C,MAAAkP,EAAME,EAAUpP,CAAK,EAEtB,uBAAkBkP,EAAKlP,CAAK,EAEnC,KAAK,cAAgB,EACvB,CAEU,iBAAkB,CAC1B,MAAMoP,EAAY,KAAK,iBACrB,uBAEF,QAASpP,EAAQ,EAAGA,EAAQoP,EAAU,OAAQpP,IAAS,CAC/C,MAAAkP,EAAME,EAAUpP,CAAK,EAC3B,KAAK,YAAYkP,CAAG,EAExB,CAEU,uBAAwB,CAChC,MAAO,CAAC,MAAM,KAAK,KAAK,QAAQ,EAAE,KAC/BlE,GACC,CtE9HD,IAAA5S,EsE8HC,OAAA4S,EAAM,WAAa,YACnB,GAAC5S,EAAA4S,EAAM,YAAN,MAAA5S,EAAiB,SAAS,cAC3B4S,EAAM,WAAa,SAEzB,CACF,CC5HO,MAAMqE,GAAoB,CAC/B,KAAM,WACN,KAAK9a,EAA6B2D,EAAuBoX,EAAgB,CACnE,GAAAvZ,GAASxB,CAAK,EACT,OAAAA,EAAM,QAAQ2D,CAAI,EAAI,GACpB,SAAM,QAAQ3D,CAAK,GAQxB,GAPCsB,GAASqC,CAAI,GACR,aACN,qFACE,OAAOA,CAAA,EAGbA,EAAO,OAAOA,CAAI,EACdxC,GAAUwC,CAAI,EACZ,OAAAxC,GAAU4Z,CAAM,EACX/a,EAAM2D,CAAI,IAAMoX,EAEhB/a,EAAM,SAAS2D,CAAI,UAGrBpD,EAASP,CAAK,GACnBmB,GAAUwC,CAAI,EACZ,OAAAxC,GAAU4Z,CAAM,EACX/a,EAAM2D,CAAI,IAAMoX,GAElBvZ,GAASmC,CAAI,GACR,aACN,8EACE,OAAOA,CAAA,EAIN,OAAO,KAAK3D,CAAK,EAAE,SAAS,OAAO2D,CAAI,CAAC,GAI9C,QACT,CACF,EC7CaqX,GAAgB,CAC3B,KAAM,OACN,KAAKhb,EAAuB,CAC1B,OAAOA,GAASA,EAAM,OAASA,EAAM,OAAS,CAChD,CACF,ECPaib,GAAiB,CAC5B,KAAM,QACN,KAAKxF,EAAmB,CACf,OAAAuF,GAAc,KAAKvF,CAAC,GAAK,CAClC,CACF,ECDayF,GAAe,CAC1B,KAAM,MACN,KAAKlb,EAA6BiE,EAAsB,CACtD,OAAI1D,EAASP,CAAK,GAAK,MAAM,QAAQA,CAAK,EACjCA,EAAMiE,CAAG,EAEdzC,GAASxB,CAAK,GACZsB,GAAS2C,CAAG,EACNjE,EAAiB,OAAOiE,CAAa,EAG1C,IACT,CACF,ECdakX,GAAiB,CAC5B,KAAM,QACN,KAAKnb,EAA6B,CACzB,OAAAkb,GAAa,KAAKlb,EAAO,CAAC,CACnC,CACF,ECHaob,GAAkB,CAC7B,KAAM,SACN,KAAKC,EAAczd,EAAW,CACrB,OAAAyd,EAAM,SAAWzd,EAAI,CAC9B,CACF,ECPa0d,GAAgB,CAC3B,KAAM,OACN,KAAKD,EAAc,CACjB,OAAOH,GAAa,KAAKG,EAAOA,EAAM,OAAS,CAAC,CAClD,CACF,ECEaE,GAAkB,CAC7B,KAAM,SACN,KAAKC,EAAuBC,EAAM,EAAG,CAE/B,SAAM,QAAQD,CAAgB,EACzB,OAAAA,EACL,KAAK,MAAM,KAAK,SAAWA,EAAiB,MAAM,CACpD,EAGE,GAAAla,GAASka,CAAgB,EAAG,CAC9B,MAAME,EAAMF,EACL,YAAK,MAAM,KAAK,UAAYE,EAAMD,EAAM,GAAKA,CAAG,EAElD,WACT,CACF,ECvBaE,GAAiB,CAC5B,KAAM,QACN,KAAKC,EAAYjK,EAAekK,EAAa,CAM3C,OALAlK,EAAQ,OAAOrQ,GAASqQ,CAAK,EAAIA,EAAQ,CAAC,EAC1CkK,EAAM,OAAOva,GAASua,CAAG,EAAIA,EAAMD,EAAI,OAAS,CAAC,EAC7CC,EAAMD,EAAI,OAAS,IACrBC,EAAMD,EAAI,OAAS,GAEjBjK,EAAQkK,EACH,GAEFD,EAAI,MAAM,OAAOjK,GAAS,CAAC,EAAG,EAAIkK,CAAG,CAC9C,CACF,ECZaC,GAAe,CAC1B,KAAM,MACN,KAAKvd,EAAkB0F,EAAsBjE,EAAa,CAExD,OAAKA,IACKA,EAAAiE,GAGN1D,EAAShC,CAAG,GAAK,MAAM,QAAQA,CAAG,EACpCA,EAAI0F,CAAG,EAAIjE,EAELzB,EAAAyB,EAEDzB,CACT,CACF,ECjBawd,GAAoB,CAC/B,KAAM,WACN,KAAK/b,EAAc+a,EAAe,CAChC,UAAWtF,KAAKzV,EACd,UAAW0V,KAAKqF,EAId,GAHItF,EAAE,QAAUA,EAAE,OAAOC,CAAC,GAGtBD,IAAMC,EACD,SAIN,QACT,CACF,EChBasG,GAAgB,CAC3B,KAAM,OACN,KAAKhc,EAAcic,EAA+B,CACzC,OAAAjc,EAAM,KAAKic,CAAS,CAC7B,CACF,ECJaC,GAA0B,CACrC,KAAM,MACN,KAAKzG,EAAYC,EAAY,CAC3B,OAAOD,GAAKC,CACd,CACF,ECLayG,GAA8B,CACzC,KAAM,UACN,KAAKza,KAAgB0a,EAAa,CAChC,OAAO1a,GAAO0a,EAAK,CAAC,GAAK1a,GAAO0a,EAAK,CAAC,CACxC,CACF,ECJaC,GAA0B,CACrC,KAAM,MACN,KAAK5G,EAAWC,EAAW,CACzB,OAAOD,GAAKC,CACd,CACF,ECNa4G,GAAyB,CACpC,KAAM,KACN,KAAK7G,EAAQC,EAAQ,CACnB,OAAOD,IAAMC,CACf,CACF,ECJa6G,GAAyB,CACpC,KAAM,KACN,KAAK9G,EAAWC,EAAW,CACzB,OAAOD,EAAIC,CACb,CACF,ECNa8G,GAAyB,CACpC,KAAM,KACN,KAAK/G,EAAQC,EAAQ,CACnB,OAAOD,IAAMC,CACf,CACF,ECJa+G,GAAyB,CACpC,KAAM,KACN,KAAKhH,EAAWC,EAAW,CACzB,OAAOD,EAAIC,CACb,CACF,ECLagH,GAA0B,CACrC,KAAM,MACN,KAAKjH,EAAWC,EAAW,CACzB,OAAOD,GAAKC,CACd,CACF,ECNaiH,GAAyB,CACpC,KAAM,KACN,KAAKlH,EAAYC,EAAY,CAC3B,OAAOD,GAAKC,CACd,CACF,ECLakH,GAA0B,CACrC,KAAM,MACN,KAAKnH,EAAY,CACf,MAAO,CAACA,CACV,CACF,ECLaoH,GAAgB,CAC3B,KAAM,OACN,KAAKpH,EAAoBC,EAAoB,CAC3C,OAAO,OAAOD,CAAC,EAAI,OAAOC,CAAC,CAC7B,CACF,ECLaoH,GAAiB,CAC5B,KAAM,QACN,KAAKrH,EAAoBC,EAAoB,CAC3C,OAAO,OAAOD,CAAC,EAAI,OAAOC,CAAC,CAC7B,CACF,ECLaqH,GAAiB,CAC5B,KAAM,QACN,KAAKtH,EAAoBC,EAAoB,CAC3C,OAAO,OAAOD,CAAC,EAAI,OAAOC,CAAC,CAC7B,CACF,ECLasH,GAAqB,CAChC,KAAM,YACN,KAAKvH,EAAoBC,EAAoB,CAC3C,OAAO,OAAOD,CAAC,EAAI,OAAOC,CAAC,CAC7B,CACF,ECLauH,GAAkB,CAC7B,KAAM,SACN,KAAKxH,EAAoBC,EAAoB,CAC3C,OAAO,OAAOD,CAAC,EAAI,OAAOC,CAAC,CAC7B,CACF,ECLMwH,GAAO,CAACzH,EAAWC,IAChBA,IAAM,EAAID,EAAIyH,GAAKxH,EAAGD,EAAIC,CAAC,EAGvByH,GAAe,CAC1B,KAAM,MACN,KAAMD,EACR,ECRaE,GAAgB,CAC3B,KAAM,OACN,KAAK1b,EAAa,CAChB,OAAOA,EAAM,IAAM,CACrB,CACF,ECRa2b,GAAkB,CAC7B,KAAM,SACN,KAAK3b,EAAa,CAChB,OAAOA,EAAM,IAAM,CACrB,CACF,ECCa4b,GAAkB,CAC7B,KAAM,SACN,KAAKnd,EAAa,CACZ,OAAAmB,GAASnB,CAAG,EACPA,EAEFsB,GAAWtB,CAAG,CACvB,CACF,ECFaod,GAA2B,CACtC,KAAM,OACN,KAAK3e,KAA8B4b,EAAe,CAChD,MAAO,CAAC7U,EAAcoQ,EAAY7S,EAAiBmR,KAEjDmG,EAAO,KAAK7U,CAAK,EACjB6U,EAAO,KAAKzE,CAAK,EACjByE,EAAO,KAAKtX,CAAE,EACdsX,EAAO,KAAKnG,CAAM,EACXzV,EAAG,MAAM,KAAM4b,CAAM,EAEhC,CACF,ECtBagD,GAA4B,CACvC,KAAM,QACN,KACEC,EACAC,EAAqD,QACrD,CACQ,eAAAA,CAAK,EAAED,CAAO,EACfA,CACT,CACF,ECLaE,GAAmB,CAC9B,KAAM,UACN,KAAK3d,EAAY4d,EAAmB,CAC9B,OAAAzc,GAAUnB,CAAK,EACbwB,GAASxB,CAAK,EACZA,EAAM,OAAS,EACVA,EAEA4d,EAGP5d,IAAU,KACL4d,EAEF5d,EAEF4d,CACT,CACF,ECtBaC,GAAqB,CAChC,KAAM,aACN,MAAO,CACL,OAAO5U,GAAU,CACnB,CACF,ECLa6U,GAAoB,CAC/B,KAAM,YACN,MAAO,CACL,OAAO9U,GAAS,CAClB,CACF,ECGa+U,GAA2B,CACtC,KAAM,OACN,KAAKnf,KAA8Bb,EAAa,CACvC,OAAAa,EAAG,MAAM,KAAMb,CAAI,CAC5B,CACF,ECPaigB,GAA+B,CAC1C,KAAM,YACN,KAAM,SAAUre,EAAa6M,KAAiBzO,EAAa,CACzD,OAAO4B,EAAO6M,CAAI,EAAE,GAAGzO,CAAI,CAC7B,CACF,ECCakgB,GAA0B,CACrC,KAAM,MAcN,KAAKC,EAAa3f,EAAUsE,EAAc,CACxC,MAAM9E,EAAO,MAAM,UAAU,MAAM,KAAK,SAAS,EAC5C,OAAAA,EAAA,OAAO,EAAG,CAAC,EACTQ,EAAIsE,CAAI,EAAE,MAAMtE,EAAKR,CAAI,CAClC,CACF,EChCaogB,GAAc,CACzB,KAAM,KACN,MAAO,CACL,OAAO5V,GAAM,CACf,CACF,ECJa6V,GAAkB,CAC7B,KAAM,SACN,KAAKpe,EAAYqe,EAAkB,CACjC,OAAOA,GAAere,CACxB,CACF,ECJase,GAA8B,CACzC,KAAM,UACN,KAAKC,EAAgBC,EAAKC,EAAI,CAC5B,OAAOF,EAAYC,EAAMC,CAC3B,CACF,ECHaC,GAA6B,CACxC,KAAM,SACN,KAAKjJ,EAAWC,EAAW,CACzB,OAAOD,EAAIC,CACb,CACF,ECLaiJ,GAAiC,CAC5C,KAAM,aACN,KAAKxe,EAAa,CAChB,OAAOqC,GAAWrC,CAAG,CACvB,CACF,ECCaye,GAA0B,CACrC,KAAM,MACN,KAAKze,EAAa0e,EAAeC,EAAe,GAAI,CAClD,OAAK3e,EAGD,OAAOA,GAAQ,UACjB,QAAQ,KAAK,6CAA6C,EACnDA,GAELA,EAAI,OAAS0e,EACR1e,EAAI,UAAU0e,EAAOA,IAAU,GAAK,OAAY,EAAE,EAAIC,EAEtD3e,EATA,EAWX,CACF,ECtBa4e,GAA+B,CAC1C,KAAM,WACN,KAAK5e,EAAa,CAChB,OAAOA,EAAI,aACb,CACF,ECDa6e,GAA+B,CAC1C,KAAM,YACN,KAAK7e,EAAa8e,EAAoB,CAChC,cAAO9e,GAAQ,UACjB,QAAQ,KAAK,kDAAkD,EACxDA,GAEFA,EAAI,SAAS8e,CAAU,CAChC,CACF,ECZaC,GAA6B,CACxC,KAAM,SACN,KAAK/e,EAAa,CACT,OAAAqB,GAASrB,CAAG,GAAK,CAAC8a,GAAe,KAAK9a,EAAI,QAAQ,MAAO,EAAE,CAAC,CACrE,CACF,ECJagf,GAAgC,CAC3C,KAAM,YACN,KAAKhf,EAAa,CAChB,OAAKA,EAIE8B,GAAU9B,CAAG,GAHlB,QAAQ,KAAK,qCAAqC,EAC3C,GAGX,CACF,ECfaif,GAA4B,CACvC,KAAM,QACN,KAAK3J,EAAWjE,EAAgB6N,EAAgB,CAC1C,OAAC5J,GAAK,CAACjE,EACF,GAEFiE,EAAE,MAAM,IAAI,OAAOjE,EAAQ6N,CAAK,CAAC,CAC1C,CACF,ECHaC,GAA+B,CAC1C,KAAM,WASN,KAAKpB,EAAgB5K,EAAS,EAAGiM,EAAY,IAAK,CACzC,OAAArB,EAAO,SAAS5K,EAAQiM,CAAS,CAC1C,CACF,ECbaC,GAA6B,CACxC,KAAM,SAWN,KAAKtB,EAAgB5K,EAAS,EAAGiM,EAAY,IAAK,CACzC,OAAArB,EAAO,OAAO5K,EAAQiM,CAAS,CACxC,CACF,EChBaE,GAAgC,CAC3C,KAAM,aAKN,KAAKvB,EAAa,CAChB,MAAMwB,EAAM,SAAUxB,EAAS,EAAW,EAAE,EACrC,aAAMwB,CAAG,EAAI,EAAIA,CAC1B,CACF,ECVaC,GAA8B,CACzC,KAAM,WAKN,KAAKzB,EAAa,CACV,MAAAwB,EAAM,WAAYxB,EAAS,CAAW,EACrC,aAAMwB,CAAG,EAAI,EAAMA,CAC5B,CACF,ECZaE,GAAgC,CAC3C,KAAM,aACN,KAAK1B,EAAa,CACZ,IAACuB,GAAmB,KAChB,UAAI,MAAM,8CAA8C,EAE5D,IAACE,GAAiB,KACd,UAAI,MAAM,4CAA4C,EAE9D,MAAME,EAAOJ,GAAmB,KAAKvB,EAAS,CAAC,EACzC4B,EAAOH,GAAiB,KAAKzB,CAAM,EAClC,OAAA2B,GAAQC,EAAOD,EAAOC,CAC/B,CACF,ECXaC,GAAgC,CAC3C,KAAM,aACN,KAAK3hB,EAAW,CAKd,OAAOA,IAAM,CAACA,GAAKA,KAAOA,EAAI,EAChC,CACF,ECTM4hB,GAA4B,IAC5BC,GAA6B,IAC7BC,GAAoB,EAMbC,GAAmC,CAC9C,KAAM,eASN,KACEjC,EACAkC,EAAYF,GACZG,EAAmBL,GACnBM,EAAoBL,GACpB,CACI,IAACL,GAAmB,KAChB,UAAI,MAAM,8CAA8C,EAE5D,IAACG,GAAmB,KAChB,UAAI,MAAM,8CAA8C,EAEhE7B,EAAS5c,GAAS4c,CAAM,EAAIA,EAAS0B,GAAmB,KAAK1B,CAAM,EAE9D6B,GAAmB,KAAKK,CAAS,IACxBA,EAAAF,IAOd,IAAIK,GAAU,EACZ,KAAK,MAAM,EAAE,KAAK,IAAIrC,CAAM,EAAI,IAAMkC,EAAU,EAChD,IACA,CAACA,IACA,QAAQA,CAAS,EAChBlC,EAAS,IAAGqC,EAAS,IAAMA,GAMzB,MAAAb,EAAMa,EAAO,MAAM,GAAG,EACxB,OAAAb,EAAI,QAAU,EAEdA,EAAI,CAAC,EAAE,QAAQ,wBAAyBY,CAAiB,EACzDD,EACAX,EAAI,CAAC,EAIFA,EAAI,CAAC,EAAE,QAAQ,wBAAyBY,CAAiB,CAClE,CACF,EClEaE,GAAgC,CAC3C,KAAM,YACN,KAAK1f,EAAY2f,EAAkBC,EAAgB,CAOjD,OANIA,IAAW,OACbA,EAASD,EAAW,KAElB,MAAM,QAAQ3f,CAAK,IACrBA,EAAQA,EAAM,QAEZA,IAAU,EACL2f,EAEAC,CAEX,CACF,ECXaC,GAA8B,CACzC,KAAM,UACN,KAAKlL,EAAWC,EAAW,CACzB,OAAOA,EAAID,CACb,CACF,ECLamL,GAA6B,CACxC,KAAM,SACN,KAAKzgB,EAAa,CAChB,OAAOA,EAAI,aACb,CACF,ECLa0gB,GAA8B,CACzC,KAAM,UACN,KAAK1gB,EAAaH,EAAe8gB,EAAsB,CACrD,OAAO3gB,EAAI,QAAQ,IAAI,OAAOH,EAAO,GAAG,EAAG8gB,CAAY,CACzD,CACF,ECJaC,GAAmC,CAC9C,KAAM,eACN,KAAK5gB,EAAaH,EAAe8gB,EAAsB,CAC9C,OAAA3gB,EAAI,QAAQH,EAAO8gB,CAAY,CACxC,CACF,ECJaE,GAA4B,CACvC,KAAM,QACN,KAAKhhB,EAAY2R,EAAekK,EAAa,CACpC,OAAA7b,EAAM,MAAM2R,EAAOkK,CAAG,CAC/B,CACF,ECHaoF,GAAiC,CAC5C,KAAM,cACN,KAAK9gB,EAAa8e,EAAoB,CAChC,cAAO9e,GAAQ,UACjB,QAAQ,KAAK,oDAAoD,EAC1DA,GAEFA,EAAI,WAAW8e,CAAU,CAClC,CACF,ECbaiC,GAA4B,CACvC,KAAM,QACN,KAAK/gB,EAAa,CAChB,OAAOA,EAAI,MACb,CACF,ECJaghB,GAAgC,CAC3C,KAAM,aACN,KAAKvf,EAAc,CACjB,OAAOM,GAAUN,CAAI,CACvB,CACF,ECTawf,GAAmB,CAC9B,KAAM,UACN,KAAKphB,EAAyB,CAC5B,OAAIA,IAAU,OACL,GACEA,IAAU,QACZ,GAEA,CAAC,CAACA,CAEb,CACF,ECTaqhB,GAA8B,CACzC,KAAM,WACN,KAAM,MAAM,OACd,ECFaC,GAAgC,CAC3C,KAAM,aACN,KAAM/f,EACR,ECHaggB,GAAgC,CAC3C,KAAM,aACN,KAAMpgB,EACR,ECHaqgB,GAA+B,CAC1C,KAAM,YACN,KAAMlgB,EACR,ECHamgB,GAA+B,CAC1C,KAAM,YACN,KAAMlhB,CACR,ECJamhB,GAAoB,CAC/B,KAAM,YACN,KAAKvhB,EAAa,CAChB,OAAOqB,GAASrB,CAAG,CACrB,CACF,ECJawhB,GAAkC,CAC7C,KAAM,eACN,KAAMzgB,EACR,ECJa0gB,GAAgB,CAC3B,KAAM,OACN,KAAKjiB,EAAaC,EAAQ,EAAGC,EAAqB,GAAM,CAC/C,OAAAH,GAAcC,EAAQC,EAAOC,CAAkB,CACxD,CACF,ECJagiB,GAAiB,CAC5B,KAAM,QACN,KAAK1hB,EAAW,CACd,OACEI,EAASJ,CAAU,GACnB,MAAM,QAAQA,CAAU,GACxB,OAAOA,GAAQ,WACf,OAAOA,GAAQ,UAEP,aACN,4FAEKA,GAGL,OAAOA,GAAQ,SACVS,GAAUT,EAAK,EAAI,EAAE,MAErB,IAEX,CACF,ECtBa2hB,GAAoB,CAC/B,KAAM,WACN,KAAKniB,EAAa,CAChB,OAAOU,GAASV,CAAM,CACxB,CACF,ECHaoiB,GAAoB,CAC/B,KAAM,YACN,KAAK/hB,EAAYgiB,EAAa,CAExB,SAAM,QAAQhiB,CAAK,EACrB,UAAWpC,KAAKoC,EACVA,EAAMpC,CAAC,IACToC,EAAMpC,CAAC,EAAIwD,GAAUpB,EAAMpC,CAAC,CAAC,WAGxB2C,EAASP,CAAK,EACvB,UAAWiE,KAAOjE,EAChBA,EAAMiE,CAAG,EAAI7C,GAAUpB,EAAMiE,CAAG,CAAC,OAGnCjE,EAAQoB,GAAUpB,CAAK,EAIzB,OAAIgiB,EACKhiB,GAAgBgiB,EAGlBhiB,CACT,CACF,EC1BaiiB,GAAoB,CAC/B,KAAM,YACN,KAAK9hB,EAAa6hB,EAAa,CACvB,MAAAtgB,EAAML,GAAUlB,CAAG,EAEzB,OAAI6hB,EACKtgB,GAAYsgB,EAEdtgB,CACT,CACF,ykDCTawgB,GAA4C,YACvDxT,GAAA,QACAhC,GAAA,SACAyV,GAAA,WACA3T,GACA,SAAApC,GACA,KAAKtO,EAAU,GAAI,CACRskB,UAAY,aAAatkB,CAAO,EAEzC,OAAO,QAAU,CAACsK,EAAKgB,EAAKiZ,EAAMC,EAAKjjB,IAAU,CAC/C,QAAQ,MAAM+I,EAAKgB,EAAKiZ,EAAMC,EAAKjjB,CAAK,GAEnC,wBAAiB,QAAUsG,GAAiB,CACjD,QAAQ,MAAMA,CAAK,EACpB,EAEM,IACT,CACF,ECrBa4c,GAAN,KAAqB,CAQ1B,aAAc,CAFGtX,EAAA,eAAmB,IAGlC,OAAIsX,GAAe,WAInBA,GAAe,SAAW,MACnBA,GAAe,QACxB,CAKO,eAAuB,CAC5B,OAAO,KAAK,QAAQ,KAAK,QAAQ,OAAS,CAAC,CAC7C,CAKO,YAA2B,CAChC,MAAMC,EAAU,KAAK,QAEjB,OAAAA,EAAQ,OAAS,EACZ,KAGFA,EAAQA,EAAQ,OAAS,CAAC,CACnC,CAKO,IAAIpZ,EAAayD,EAA2B,KAAM,CACvD,KAAK,QAAQ,KAAK,CAChB,UAAAA,EACA,IAAAzD,CAAA,CACD,CACH,CACF,EA9CO,IAAMqZ,GAANF,GACLtX,EADWwX,GACI,YCFV,MAAMC,GAAoB,eAIpBC,GAAoB,WAIpBC,GAAwB,oBCL9B,MAAeC,EAAqC,CAWzD,YAAYC,EAA+B,UAAW,CAV5C7X,EAAA,qBAEAA,EAAA,qBAEAA,EAAA,4BAEAA,EAAA,gBAAW3M,GAAS,GAEpB2M,EAAA,eAGR,KAAK,OAAS6X,CAChB,CAOA,MAAa,KACXC,EACAC,EACe,CACf,KAAK,aAAeD,EAEpB,KAAK,SAAWzkB,KAChB,MAAM2kB,EAAsB3kB,KAC5B,YAAK,oBAAsB2kB,EAAoB,QAE/C,KAAK,MAAM,EAEX,KAAK,aAAe,MAAMD,EACNC,EAAA,QAAQ,KAAK,YAAY,EACtC,KAAK,SAAS,OACvB,CAKA,MAAa,MAAO,CACd,IAAC,KAAK,aACF,UAAI,MAAM,4BAA4B,EAO1C,GAJA,KAAK,SAAW,WAClB,KAAK,aAAa,SAGhB,CAAC,KAAK,aACF,UAAI,MAAM,0BAA0B,EAEvC,yBAAa,MAAM,WAAa,UAC9B,KAAK,SAAS,QAAQ,MAAS,CACxC,CAMF,CClDA,MAAMC,WAAyBL,EAAqC,CAClE,MAAa,OAAQ,CACf,IAAC,KAAK,oBACF,UAAI,MAAM,qCAAqC,EAEvD,MAAM,KAAK,oBACX,KAAK,OAAO,CAEd,CAEA,MAAa,QAAS,CACpB,gBAAS,KAAK,UAAY,EACnB,KAAK,MACd,CACF,CCpBO,MAAMM,WAAuBN,EAAqC,CAIvE,YAAYO,EAAc,GAAM,CAC9B,MAAM,SAAS,EAJPnY,EAAA,oBACAA,EAAA,kBAAa,KAIrB,KAAK,YAAcmY,CACrB,CAEA,MAAa,OAAQ,CACf,IAAC,KAAK,oBACF,UAAI,MAAM,qCAAqC,EAGnD,KAAK,eACP,KAAK,aAAa,MAAM,WAAa,WAAW,KAAK,eAChD,kBAAa,MAAM,QAAU,KAGhC,KAAK,aACP,MAAM7d,GAAiB,OAAQ,QAAS,WAAY,QAAQ,EAGxD,MAAAyd,EAAe,MAAM,KAAK,oBAEhCA,EAAa,MAAM,QAAU,IAChBA,EAAA,MAAM,WAAa,WAAW,KAAK,eAEhD,WAAW,IAAM,CACf,KAAK,OAAOA,CAAY,GACvB,KAAK,UAAU,CAGpB,CAEA,MAAa,OAAOA,EAA2B,CAC7C,OAAAA,EAAa,MAAM,QAAU,IACtB,KAAK,MACd,CACF,CCvCO,MAAMK,WAA2BR,EAAqC,CAK3E,YAAYC,EAA+B,UAAWM,EAAc,GAAM,CACxE,MAAMN,CAAM,EALJ7X,EAAA,eAEAA,EAAA,oBAIR,KAAK,OAAS6X,EACd,KAAK,YAAcM,CACrB,CAEA,MAAa,OAAQ,CACf,IAAC,KAAK,oBACF,UAAI,MAAM,qCAAqC,EAEnD,KAAK,eACF,kBAAa,MAAM,QAAU,QAGhC,KAAK,aACP,MAAM7d,GAAiB,OAAQ,QAAS,WAAY,QAAQ,EAG9D,MAAM,KAAK,oBAEX,MAAM,KAAK,SAEP,KAAK,eACF,kBAAa,MAAM,QAAU,GAItC,CAEA,MAAa,QAAS,CACpB,OAAO,KAAK,MACd,CACF,CCxCA,MAAe+d,EAAS,CAAxB,cAKYrY,EAAA,kBAEAA,EAAA,kBAEFA,EAAA,kBAAakC,EAAgB,eAK9B,OAAO5O,EAAU,CACtB,OAAOkE,GAAO,CAAE,KAAM,EAAM,EAAG,KAAMlE,CAAG,CAC1C,CAQO,MAAO,CACZ,KAAK,WAAW,GACd,kBACA,CAACgP,EAAgBC,EAAkBC,IAAqB,CAClDA,GAAaA,EAAU,YAAc,KAAK,WAC5C,KAAK,QAAQ,CAEjB,GAGF,KAAK,WAAW,GACd,eACA,CACEF,EACAC,EACAC,EACAC,IACG,CACH,KAAK,UAAYA,EACbF,EAAU,YAAc,KAAK,WAC/B,KAAK,QAAQ,CAEjB,GAGF,KAAK,WAAW,GACd,sBACA,CAACD,EAAgBC,EAAkBC,IAAqB,CAClDD,EAAU,YAAc,KAAK,WAC/B,KAAK,iBAAiB,EAGpBC,GAAaA,EAAU,YAAc,KAAK,WAC5C,KAAK,iBAAiB,CAE1B,EAEJ,CAyBF,CCvFA,MAAM8V,EAAI,CACR,OAAc,wBAAwB3I,EAAsC,CAE1E,OAAOA,EAAQ,iBACb,uLAEJ,CAEA,OAAc,WAAWA,EAAsC,CAC7D,IAAI4I,EAAQ,GAEN,MAAAC,EAAe7I,EAAQ,cAAc,OAAO,EAC9C,OAAA6I,GAAgBA,EAAa,YAC/BD,EAAQC,EAAa,WAEhBD,CACT,CAMA,OAAc,cACZE,EACAC,EACAC,EACAC,EAAgB,GACN,CACV,IAAIL,EAAQ,GACRM,EAEyB,GACvB,MAAA1Q,EAAW,SAAS,cAAc,UAAU,EAClD,OAAAA,EAAS,UAAYsQ,EAEjBC,IACMH,EAAA,KAAK,WAAWpQ,EAAS,OAAO,GAGtCyQ,IACqBC,EAAA,KAAK,wBAAwB1Q,EAAS,OAAO,GAK/D,CACL,UAHgB,KAAK,aAAaA,EAAUwQ,CAAiB,EAI7D,MAAAJ,EACA,cAAeM,CAAA,CAEnB,CAKA,OAAc,aACZH,EACAC,EACAC,EAAgB,GAChB,CACA,IAAIL,EAAQ,GACRM,EAEyB,GAK7B,MAAMpW,EAAY,KAAK,aAAa,SAAUkW,CAAiB,EAE/D,OAAID,IACMH,EAAA,KAAK,WAAW,QAAQ,GAG9BK,IACqBC,EAAA,KAAK,wBAAwB,QAAQ,GAGvD,CACL,UAAApW,EACA,MAAA8V,EACA,cAAeM,CAAA,CAEnB,CAMA,OAAc,aACZrgB,EACAmgB,EACa,CACb,GAAI,CAACngB,EACH,MAAM,IAAI,MACR,0FAIJ,MAAMiK,EAAY,KAAK,eAAejK,EAASmgB,CAAiB,EAEhE,GAAI,CAAClW,EACG,UAAI,MAAM,0BAA0B,EAGrC,OAAAA,CACT,CAKA,OAAc,aAAajK,EAAqC,CAC9D,OAAIA,GAAWA,EAAQ,SAAWA,EAAQ,QAAQ,UACzCA,EAAQ,QAAQ,UAEhB,IAEX,CAKA,OAAc,aAAaA,EAAsBsgB,EAAsB,CAC3DtgB,IACVA,EAAQ,MAAM,WAAa,SAC3BsgB,EAAQ,YAAYtgB,CAAO,CAC7B,CAKA,OAAiB,eACfugB,EACAJ,EACa,CACb,GAAI,CAACI,EAAS,CACN,MAAA3kB,EAAQ,IAAI,MAAM,sBAAsB,EACtC,oBAAMA,EAAO2kB,CAAO,EACtB3kB,EAGJ,IAAAS,EAUJ,GARKkkB,EAAgC,QACnClkB,EAAUkkB,EAAgC,QAAQ,cAChDJ,CAAA,EAGO9jB,EAAAkkB,EAAQ,cAAcJ,CAAiB,EAG9C,CAAC9jB,EAAQ,CACX,MAAMT,EAAQ,IAAI,MAChB,+BAA+BukB,WAAA,EAEzB,oBAAMvkB,EAAO2kB,CAAO,EACtB3kB,EAGD,OAAAS,CACT,CACF,CC3JA,MAAMmkB,GAAN,KAAe,CAeb,YAAqB1W,EAAgB,CAEnC,GAFmB,YAAAA,EACnB,KAAK,OAASA,EACV0W,GAAS,UAAU,KAAK,MAAM,EACzB,OAAAA,GAAS,UAAU,KAAK,MAAM,EAE9BA,GAAA,UAAU,KAAK,MAAM,EAAI,KAClC,KAAK,kBAAoB,KAAK,kBAAkB,KAAK,IAAI,CAC3D,CArBA,OAAc,YAAYxd,EAAK,OAAkB,CACzC,MAAA3G,EAASmkB,GAAS,UAAUxd,CAAE,EACpC,OAAK3G,GACI,IAAI,KAAK2G,CAAE,CAGtB,CAsBO,KAAKyd,EAAgB,GAAO,CAC7B,IAAC,OAAO,QAAQ,UACX,SAELA,IACF,KAAK,OAAO,EACZ,SAAS,KAAK,iBAAiB,YAAa,KAAK,kBAAmB,CAClE,QAAS,GACV,EACD,SAAS,KAAK,iBAAiB,aAAc,KAAK,kBAAmB,CACnE,QAAS,GACV,EAEL,CAEO,QAAS,CACd,SAAS,KAAK,oBAAoB,YAAa,KAAK,iBAAiB,EACrE,SAAS,KAAK,oBAAoB,aAAc,KAAK,iBAAiB,CACxE,CAMO,WAAWhhB,EAAuBkG,EAAa,CAChD,IAAC,OAAO,QAAQ,UACX,SAEJ,kBAAalG,EAAIkG,CAAG,EACtBlG,EAAA,iBAAiB,YAAa,KAAK,YAAY,KAAK,KAAMkG,EAAKlG,CAAE,EAAG,CACrE,QAAS,GACV,EACEA,EAAA,iBAAiB,aAAc,KAAK,YAAY,KAAK,KAAMkG,EAAKlG,CAAE,EAAG,CACtE,QAAS,GACV,CACH,CAEO,aAAaA,EAAuBkG,EAAa,CACnDlG,EAAA,oBAAoB,YAAa,KAAK,YAAY,KAAK,KAAMkG,EAAKlG,CAAE,CAAC,EACrEA,EAAA,oBAAoB,aAAc,KAAK,YAAY,KAAK,KAAMkG,EAAKlG,CAAE,CAAC,CAC3E,CAEO,YACLkG,EACAlG,EACAihB,EACA,CAEE,GAAAjhB,EAAG,YACFA,EAAG,UAAU,SAAS0f,EAAqB,GAC1C1f,EAAG,UAAU,SAASwf,EAAiB,GAEzC,OAGItZ,EAAAE,GAAaF,CAAG,EAAE,IAExB,MAAMgb,EAAeC,EAAK,aAAajb,EAAKlG,EAAIihB,CAAG,EAGnD,GAAI/a,GAAOgb,EAAc,CACvB,MAAME,EAAOD,EAAK,YAAY,KAAK,MAAM,EACrCC,EACFA,EAAK,mBAAmBlb,EAAK,GAAO,EAAK,EAAE,MAAO/J,GAAU,CACvD6D,EAAA,UAAU,IAAIwf,EAAiB,EAClC,QAAQ,MAAMtZ,CAAG,EACjB,QAAQ,MAAM/J,CAAK,EACpB,GAEO,aACN,uDAAuD,KAAK,kBAE3D6D,EAAA,UAAU,IAAIwf,EAAiB,GAGxC,CAEO,IAAItZ,EAAa,CAChBA,EAAAE,GAAaF,CAAG,EAAE,IAElB,MAAAgb,EAAeC,EAAK,aAAajb,CAAG,EAG1C,GAAIA,GAAOgb,EAAc,CACvB,MAAME,EAAOD,EAAK,YAAY,KAAK,MAAM,EACrCC,EACFA,EAAK,mBAAmBlb,EAAK,GAAO,EAAK,EAAE,MAAO/J,GAAU,CAC1D,QAAQ,MAAMA,CAAK,EACpB,EAEO,aACN,+CAA+C,KAAK,kBAI5D,CAMU,kBAAkB8kB,EAAY,CAClC,IAAAjhB,EAAKwC,GAAoBye,CAAG,EAEhC,GAAI,CAACjhB,EACG,UAAI,MAAM,sBAAsB,EAGxC,KAAOA,GAAM,CAACmhB,EAAK,QAAQnhB,CAAE,GAC3BA,EAAKA,EAAG,WAON,GAJA,CAACA,GAIDA,EAAG,WAAa,IAClB,OAGI,MAAAqhB,EAAOF,EAAK,QAAQnhB,CAAE,EAGxB,KAAAA,EAAG,UAAU,SAAS,OAAO,GAAKA,EAAG,aAAa,UAAU,GAIhE,IAAI,CAACqhB,EAAM,CACD,aACN,gKACArhB,CAAA,EAEF,OAGF,OAAO,KAAK,YAAYqhB,EAAMrhB,EAAIihB,CAAG,EACvC,CACF,EAtKA,IAAMK,GAANP,GAUEhZ,EAVIuZ,GAUa,YAA+B,2NClBlD,IAAIC,GAAI,IACJC,GAAID,GAAI,GACRE,GAAID,GAAI,GACRE,GAAID,GAAI,GACR9e,GAAI+e,GAAI,EACRC,GAAID,GAAI,OAgBZE,GAAiB,SAAUjkB,EAAK/C,EAAS,CACvCA,EAAUA,GAAW,GACrB,IAAIkD,EAAO,OAAOH,EAClB,GAAIG,IAAS,UAAYH,EAAI,OAAS,EACpC,OAAOkkB,GAAMlkB,CAAG,EACX,GAAIG,IAAS,UAAY,SAASH,CAAG,EAC1C,OAAO/C,EAAQ,KAAOknB,GAAQnkB,CAAG,EAAIokB,GAASpkB,CAAG,EAEnD,MAAM,IAAI,MACR,wDACE,KAAK,UAAUA,CAAG,CACxB,CACA,EAUA,SAASkkB,GAAM5kB,EAAK,CAElB,GADAA,EAAM,OAAOA,CAAG,EACZ,EAAAA,EAAI,OAAS,KAGjB,KAAI+kB,EAAQ,mIAAmI,KAC7I/kB,CACJ,EACE,GAAK+kB,EAGL,KAAI9mB,EAAI,WAAW8mB,EAAM,CAAC,CAAC,EACvBlkB,GAAQkkB,EAAM,CAAC,GAAK,MAAM,cAC9B,OAAQlkB,EAAI,CACV,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAO5C,EAAIymB,GACb,IAAK,QACL,IAAK,OACL,IAAK,IACH,OAAOzmB,EAAIyH,GACb,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOzH,EAAIwmB,GACb,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAOxmB,EAAIumB,GACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOvmB,EAAIsmB,GACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOtmB,EAAIqmB,GACb,IAAK,eACL,IAAK,cACL,IAAK,QACL,IAAK,OACL,IAAK,KACH,OAAOrmB,EACT,QACE,MACH,GACH,CAUA,SAAS6mB,GAASH,EAAI,CACpB,IAAIK,EAAQ,KAAK,IAAIL,CAAE,EACvB,OAAIK,GAASP,GACJ,KAAK,MAAME,EAAKF,EAAC,EAAI,IAE1BO,GAASR,GACJ,KAAK,MAAMG,EAAKH,EAAC,EAAI,IAE1BQ,GAAST,GACJ,KAAK,MAAMI,EAAKJ,EAAC,EAAI,IAE1BS,GAASV,GACJ,KAAK,MAAMK,EAAKL,EAAC,EAAI,IAEvBK,EAAK,IACd,CAUA,SAASE,GAAQF,EAAI,CACnB,IAAIK,EAAQ,KAAK,IAAIL,CAAE,EACvB,OAAIK,GAASP,GACJlE,GAAOoE,EAAIK,EAAOP,GAAG,KAAK,EAE/BO,GAASR,GACJjE,GAAOoE,EAAIK,EAAOR,GAAG,MAAM,EAEhCQ,GAAST,GACJhE,GAAOoE,EAAIK,EAAOT,GAAG,QAAQ,EAElCS,GAASV,GACJ/D,GAAOoE,EAAIK,EAAOV,GAAG,QAAQ,EAE/BK,EAAK,KACd,CAMA,SAASpE,GAAOoE,EAAIK,EAAO/mB,EAAGoO,EAAM,CAClC,IAAI4Y,EAAWD,GAAS/mB,EAAI,IAC5B,OAAO,KAAK,MAAM0mB,EAAK1mB,CAAC,EAAI,IAAMoO,GAAQ4Y,EAAW,IAAM,GAC7D,CCjKA,IAAAC,GAAA,KAAsB,CACpB,aAAc,CACZ,KAAK,MAAQ,IAAI,GAClB,CAED,IAAIphB,EAAK,CACP,OAAO,KAAK,MAAM,IAAIA,CAAG,CAC1B,CAED,IAAIA,EAAKjE,EAAO,CACd,KAAK,MAAM,IAAIiE,EAAKjE,CAAK,CAC1B,CAED,MAAO,CACL,OAAO,MAAM,KAAK,KAAK,MAAM,KAAI,CAAE,CACpC,CAED,IAAIiE,EAAK,CACP,KAAK,MAAM,OAAOA,CAAG,CACtB,CAED,OAAQ,CACN,KAAK,MAAM,MAAO,CACnB,CACH,EAEA,IAAAqhB,GAAiBC,GC1BjB,MAAMT,GAAKU,GACLD,GAAkBE,GAExB,SAASC,GAAY,CAAE,gBAAAC,EAAkB,SAAU,cAAAC,CAAa,EAAK,GAAI,CACvE,IAAIxW,EAAQwW,GAAiB,IAAIL,GAC7BM,EAEJ,MAAMC,EAAUC,GAAK,OAAOA,EAAM,IAC5BC,EAAQD,GAAK,OAAOA,EAAM,IAC1BE,EAAOF,GAAK,OAAOA,GAAM,WACzBG,EAAQH,GAAK,OAAOA,GAAM,SAE1BI,EAAkBC,GAAOA,GAAO,IAAI,KAAKA,CAAG,EAAE,QAAO,EAAK,KAAK,IAAK,EAE1E,eAAeC,EAAIpiB,EAAKjE,EAAOsmB,EAAW,CACxC,GAAIA,EAAW,CACb,MAAMC,EAAcL,EAAMI,CAAS,EAAIA,EAAYxB,GAAGwB,CAAS,EAC/D,aAAMlX,EAAM,IAAInL,EAAK,CAACjE,EAAO,IAAI,KAAK,KAAK,IAAG,EAAKumB,CAAW,EAAE,YAAa,EAAC,EACvEvmB,EAGT,aAAMoP,EAAM,IAAInL,EAAK,CAACjE,CAAK,CAAC,EACrBA,CACR,CAED,eAAevB,EAAQwF,EAAKjE,EAAOsmB,EAAW,CAC5C,MAAME,EAAc,MAAMpX,EAAM,IAAInL,CAAG,EAEvC,GAAI6hB,EAAQU,CAAW,EAAG,CACxB,GAAIR,EAAMhmB,CAAK,EAAG,CAEhB,MAAMoD,EAAW6iB,EAAKjmB,CAAK,EAAI,MAAMA,EAAO,EAAGA,EAC/C,OAAAqmB,EAAIpiB,EAAKb,EAAUkjB,CAAS,EACrBljB,EAIT,OAGF,KAAM,CAACqjB,EAAaC,CAAe,EAAIF,EAGvC,GAFmBL,EAAgBO,CAAe,EAElC,CAGd,GAAIV,EAAMhmB,CAAK,EAAG,CAChB,MAAMoD,EAAW6iB,EAAKjmB,CAAK,EAAI,MAAMA,EAAO,EAAGA,EAC/C,OAAAqmB,EAAIpiB,EAAKb,EAAUkjB,CAAS,EACrBljB,EAKTgM,EAAM,IAAInL,CAAG,EACb,OAIF,OAAOwiB,CACR,CAED,eAAeE,EAAI1iB,EAAK2iB,EAAY,CAClC,GAAIA,EAAY,EACD,MAAMxX,EAAM,KAAM,GAC1B,QAAQyX,GAAY,CACnBA,EAAS,QAAQ5iB,CAAG,IAAM,GAC5BmL,EAAM,IAAIyX,CAAQ,CAE5B,CAAO,EACD,OAGFzX,EAAM,IAAInL,CAAG,CACd,CAED,SAAS6iB,GAAQ,CACf,OAAO1X,EAAM,MAAO,CACrB,CAED,SAAS2X,GAAW,CAClB,cAAclB,CAAc,CAC7B,CAED,OAAIF,IACFE,EAAiB,YAAY,SAAY,EAC1B,MAAMzW,EAAM,KAAM,GAC1B,QAAQ,MAAMU,GAAK,CACtB,MAAM9P,EAAQ,MAAMoP,EAAM,IAAIU,CAAC,EAC/B,GAAI9P,EAAO,CACT,MAAMsmB,EAAYtmB,EAAM,CAAC,EACNmmB,EAAgBG,CAAS,GAE1ClX,EAAM,IAAIU,CAAC,EAGvB,CAAO,CACP,EAAOgV,GAAGa,CAAe,CAAC,GAGjB,CACL,QAAAlnB,EACA,IAAAkoB,EACA,MAAAG,EACA,SAAAC,CACD,CACH,CAEA,IAAAvgB,GAAiBkf,mBCzGjB,MAAMsB,EAAmB,CAMvB,aAAc,CAFP/b,EAAA,aAGL,KAAK,KAAO,EACd,CAMO,IAAIhH,EAAapD,EAAQ,CACzB,iBAAKoD,CAAG,EAAIpD,EACV,KAAK,KAAKoD,CAAG,CACtB,CAKO,IAAIA,EAA4B,CAC9B,YAAK,KAAKA,CAAG,CACtB,CAKO,OAAQ,CACb,KAAK,KAAO,EACd,CACF,CCnCA,SAASgjB,GAAiBC,EAAS,CAC/B,OAAO,IAAI,QAAQ,CAACzoB,EAASC,IAAW,CAEpCwoB,EAAQ,WAAaA,EAAQ,UAAY,IAAMzoB,EAAQyoB,EAAQ,MAAM,EAErEA,EAAQ,QAAUA,EAAQ,QAAU,IAAMxoB,EAAOwoB,EAAQ,KAAK,CACtE,CAAK,CACL,CACA,SAASC,GAAYC,EAAQC,EAAW,CACpC,MAAMH,EAAU,UAAU,KAAKE,CAAM,EACrCF,EAAQ,gBAAkB,IAAMA,EAAQ,OAAO,kBAAkBG,CAAS,EAC1E,MAAMC,EAAML,GAAiBC,CAAO,EACpC,MAAO,CAACK,EAAQlhB,IAAaihB,EAAI,KAAME,GAAOnhB,EAASmhB,EAAG,YAAYH,EAAWE,CAAM,EAAE,YAAYF,CAAS,CAAC,CAAC,CACpH,CACA,IAAII,GACJ,SAASC,IAAkB,CACvB,OAAKD,KACDA,GAAsBN,GAAY,eAAgB,QAAQ,GAEvDM,EACX,CAOA,SAASE,GAAI1jB,EAAK2jB,EAAcF,KAAmB,CAC/C,OAAOE,EAAY,WAAaC,GAAUZ,GAAiBY,EAAM,IAAI5jB,CAAG,CAAC,CAAC,CAC9E,CAQA,SAASoiB,GAAIpiB,EAAKjE,EAAO4nB,EAAcF,GAAe,EAAI,CACtD,OAAOE,EAAY,YAAcC,IAC7BA,EAAM,IAAI7nB,EAAOiE,CAAG,EACbgjB,GAAiBY,EAAM,WAAW,EAC5C,CACL,CAqDA,SAASlB,GAAI1iB,EAAK2jB,EAAcF,KAAmB,CAC/C,OAAOE,EAAY,YAAcC,IAC7BA,EAAM,OAAO5jB,CAAG,EACTgjB,GAAiBY,EAAM,WAAW,EAC5C,CACL,CAkBA,SAASf,GAAMc,EAAcF,KAAmB,CAC5C,OAAOE,EAAY,YAAcC,IAC7BA,EAAM,MAAK,EACJZ,GAAiBY,EAAM,WAAW,EAC5C,CACL,CACA,SAASC,GAAWD,EAAOxhB,EAAU,CACjC,OAAAwhB,EAAM,aAAa,UAAY,UAAY,CAClC,KAAK,SAEVxhB,EAAS,KAAK,MAAM,EACpB,KAAK,OAAO,WACpB,EACW4gB,GAAiBY,EAAM,WAAW,CAC7C,CAMA,SAASE,GAAKH,EAAcF,KAAmB,CAC3C,OAAOE,EAAY,WAAaC,GAAU,CAEtC,GAAIA,EAAM,WACN,OAAOZ,GAAiBY,EAAM,WAAU,CAAE,EAE9C,MAAMG,EAAQ,GACd,OAAOF,GAAWD,EAAQI,GAAWD,EAAM,KAAKC,EAAO,GAAG,CAAC,EAAE,KAAK,IAAMD,CAAK,CACrF,CAAK,CACL,CC/IO,MAAME,GAAsB,KACjCP,GACA,IAAAtB,GACA,KAAA0B,GACA,IAAApB,GACA,MAAO,IACEG,GAAM,CAEjB,EAEwBpB,GAAY,CAElC,cAAgB,OAAe,IAAM,OAAYwC,EACnD,CAAC,ECgBD,MAAMC,EAAN,KAAW,CAkLT,YAAY,CACV,GAAA1hB,EACA,OAAAqc,EAAS,UACT,QAAAiB,EACA,kBAAAH,EAAoB,mBACpB,eAAAwE,EAAiB,GACjB,eAAAC,EAAiB,GACjB,WAAA1E,EAAa,GACb,iBAAA2E,EAAmB,GACnB,cAAAzE,EAAgB,GAChB,YAAAT,EAAc,GACd,qBAAAmF,EAAuBC,GAAc,QAAQ,sBAC/B,CApDTvd,EAAA,eAAU,IAAIwX,IAKdxX,EAAA,oBAAe,IAKfA,EAAA,0BAAqB,IAElBA,EAAA,uBAEAA,EAAA,uBAEAA,EAAA,mBAEAA,EAAA,yBAEAA,EAAA,mBAEAA,EAAA,mBAEAA,EAAA,gBAEAA,EAAA,cAAS,QAETA,EAAA,0BAKAA,EAAA,sBAEAA,EAAA,6BAkBJxE,IACF,KAAK,OAASA,GAGhB,IAAIqG,EAAW,KAEf,YAAK,qBAAuByb,GAAwB,EAEpD,KAAK,WAAa,IAAIpb,EAAgB,KAAK,MAAM,EAEjD,KAAK,eAAiBib,EACtB,KAAK,eAAiBC,EACtB,KAAK,WAAa1E,EAClB,KAAK,iBAAmB2E,EACxB,KAAK,kBAAoB1E,EACzB,KAAK,cAAgBC,EAEjBsE,EAAK,UAAU,KAAK,MAAM,IACjBrb,EAAAqb,EAAK,UAAU,KAAK,MAAM,GAGvCrb,EAAS,WACPA,EAAS,YAAc,IAAIuW,GAAmBP,EAAQM,CAAW,EAC1DtW,EAAA,QAAUA,EAAS,SAAWiX,EAC9BjX,EAAA,kBACPA,EAAS,mBAAqB8W,EAEhC9W,EAAS,eAAiBvL,GAAUuL,EAAS,cAAc,EACvDA,EAAS,eACTsb,EACJtb,EAAS,eAAiBvL,GAAUuL,EAAS,cAAc,EACvDA,EAAS,eACTub,EACJvb,EAAS,WAAavL,GAAUuL,EAAS,UAAU,EAC/CA,EAAS,WACT6W,EACJ7W,EAAS,iBAAmBvL,GAAUuL,EAAS,gBAAgB,EAC3DA,EAAS,iBACTwb,EACJxb,EAAS,cAAgBvL,GAAUuL,EAAS,aAAa,EACrDA,EAAS,cACT+W,EAEA/W,EAAS,SACFA,EAAA,QAAQ,aAAa,YAAa,QAAQ,EAGhDqb,EAAA,UAAU,KAAK,MAAM,EAAIrb,EACvBqb,EAAK,UAAU,KAAK,MAAM,CACnC,CA7OA,OAAc,YAAY1hB,EAAK,OAA0B,CACjD,MAAA3G,EAASqoB,EAAK,UAAU1hB,CAAE,EAChC,OAAK3G,GACK,aACN,mDAAmD2G,WAAA,EAGhD3G,CACT,CAKA,OAAiB,gBAAgBykB,EAAuB,CAIhD,MAAA9gB,EAAU,SAAS,cAAc,GAAG,EAyB1C,OAxBQA,EAAA,aAAa,OAAQ8gB,CAAI,EAE7B,GAAC9gB,GAID,CAAC8gB,GAKDla,GAAUka,CAAI,IAAMla,GAAU,SAAS,IAAI,GAM7C,OAAO,SAAS,WAAc5G,EAA8B,UAC5D,OAAO,SAAS,WAAcA,EAA8B,UAM1D6G,GAAQ,IAAMA,GAAS7G,EAA8B,IAAI,EAK/D,CAKA,OAAc,aACZ2F,EACA3F,EACA0gB,EACS,CAsBT,MArBI,GAAC,OAAO,QAAQ,WAIhB,CAAC,KAAK,gBAAgB/a,CAAG,GAIzB+a,IAGCA,GAAQA,EAAY,OAAUA,EAAY,MAAQ,GAClDA,EAAY,SACZA,EAAY,SACZA,EAAY,UACZA,EAAY,SAMb1gB,IAGCA,EAA8B,QAC9BA,EAA8B,SAAW,UAO1CA,EAAQ,cACR,OAAOA,EAAQ,aAAa,UAAU,GAAM,UAK1CA,EAAQ,UAAU,SAASkf,EAAiB,GAMpD,CAMA,OAAc,QACZzf,EACoB,CACpB,GAAKA,EAIL,IAAIA,EAAG,cAAgB,OAAOA,EAAG,aAAa,YAAY,GAAM,SACvD,OAAAA,EAAG,aAAa,YAAY,GAAK,OAIxC,UAAQA,EAAyB,MAAS,UACzCA,EAAG,cAAgBA,EAAG,aAAa,MAAM,EAC1C,CACA,MAAMqhB,EAAQrhB,EAAyB,MAAQA,EAAG,aAAa,MAAM,EACrE,GAAI,CAACqhB,EACK,oBAAM,yCAA0CrhB,CAAE,EACpD,IAAI,MAAM,2BAA2B,EAEtC,OAAAqhB,GAIX,CA+GO,iBAAiBR,EAAsB,CAC5C,KAAK,QAAUA,CACjB,CAKO,OAAQ,CACb,GAAI,KAAK,QACH,IACF,KAAK,KAAK,KAAK,QAAS,KAAK,eAAgB,KAAK,cAAc,QACzD1kB,GACP,QAAQ,MAAMA,CAAK,CACrB,MAEA,QAAQ,MAAM,iCAAiC,CAEnD,CAKO,eAAgB,CACd,OAAAgL,GAAUZ,IAAQ,CAC3B,CAKO,KAAKL,EAAaqf,EAAS,GAAO,CACvC,GAAIA,EAAQ,CACV,MAAMrjB,EAAM,OAAO,KAAKgE,EAAK,QAAQ,EACrC,OAAIhE,EACKA,EAAI,QAEN,GAOT,GAJIgE,EAAI,WAAW,MAAM,IACjBA,EAAAE,GAAaF,CAAG,EAAE,KAGrBA,EAAI,WAAW,MAAM,EAOxB,KAAK,UAAUA,CAAG,MANlB,QAAI,KAAK,kBACP,OAAO,QAAQ,UAAU,KAAM,GAAIA,CAAG,EAEjC,KAAK,cAAc,OAAWA,CAAG,CAK5C,CAKO,eAA4B,CAE1B,YAAK,YAAc,IAAIia,EAChC,CAEO,aAAakB,EAAc,CAGhC,GAFOA,EAAAjb,GAAaib,CAAI,EAAE,IACX4D,EAAK,gBAAgB5D,CAAI,EAEtC,OAAO,KAAK,mBAAmBA,EAAM,GAAM,EAAK,CAEpD,CAKU,oBACRmE,EACAC,EACA,CACM,MAAAC,EAAMF,EAAY,aAAa,KAAK,EACpCnE,EAAO4D,EAAK,QAAQO,CAAW,EAEnC,GAAAE,IAAQ,kBACRrE,GACA,KAAK,cACL,CAACmE,EAAY,UAAU,SAAShG,EAAiB,EAE7C,IACF,KAAK,aAAa6B,CAAI,QACfllB,GACKqpB,EAAA,UAAU,IAAIhG,EAAiB,EAC3C,QAAQ,MAAMrjB,CAAK,CACrB,CAGFspB,EAAK,YAAYD,CAAW,CAC9B,CAEU,oBAAoBC,EAAuB,CAChBA,EAAK,iBACtC,wLAGyB,QAASD,GAAiC,CAC/DA,GAAeA,EAAY,YACjBA,EAAA,WAAW,YAAYA,CAAW,CAChD,CACD,CACH,CASU,4BACR7E,EACA,CACA,MAAM8E,EAAO,SAAS,MAAQ,SAAS,qBAAqB,MAAM,EAAE,CAAC,EACrE,KAAK,oBAAoBA,CAAI,EAEf9E,EAAA,QAAS6E,GAAiC,CACjD,yBAAoBA,EAAaC,CAAI,EAC3C,CACH,CAMA,MAAa,WAAWvf,EAAmC,CACrD,IACF,KAAM,CAAE,gBAAAyf,CAAA,EAAoB,MAAM,KAAK,mBACrCzf,EACA,GACA,IAEE,IAAC,KAAK,QACF,UAAI,MAAM,4BAA4B,EAE9C,MAAMkG,EAAW,MAAMuZ,EACvB,OAAAtF,GAAI,aAAajU,EAAS,UAAW,KAAK,OAAO,EAC7C,KAAK,aAAe,IAAQA,EAAS,QACvC,SAAS,MAAQA,EAAS,OAExB,KAAK,gBAAkB,IAAQA,EAAS,eACrC,iCAA4BA,EAAS,aAAa,EAGlDA,EAAS,gBACTjQ,GACP,cAAQ,MAAMA,CAAK,EAEnB,KAAK,UAAU+J,CAAG,EACZ/J,CACR,CACF,CAQA,MAAa,mBACX+J,EACA0f,EAAa,GACbC,EAAW,GACX,CACI,IAAAF,EACA,IACF,GAAI,KAAK,eACWA,EAAAV,EAAK,MAAM,IAAI/e,CAAG,EAChCyf,GACK,OACL,UAAW,GACX,gBAAAA,CAAA,EAIYA,EAAA,KAAK,aAAazf,EAAK0f,CAAU,EAC/C,KAAK,cAAgBD,GAClBV,EAAA,MAAM,IAAI/e,EAAKyf,CAAe,QAI9BxpB,GACP,cAAQ,MAAMA,CAAK,EACf0pB,GACF,KAAK,UAAU3f,CAAG,EAEd/J,CACR,CAEO,OACL,UAAW,GACX,gBAAAwpB,CAAA,CAEJ,CAOA,MAAa,aAAazf,EAAa0f,EAAa,GAAO,CACzD,MAAMhrB,EAA8BgrB,EAChC,CAAE,MAAO,eACT,GACExb,EAAO,MAAMsB,GAAY,IAC7BxF,EACA,OACA,OACA,CAAC,EACDtL,CAAA,EAEF,GAAI,CAACwP,GAAQ,CAACA,EAAK,KACX,UAAI,MAAM,UAAU,EAQrB,OANUiW,GAAI,cACnBjW,EAAK,KACL,KAAK,WACL,KAAK,kBACL,KAAK,cAGT,CAKU,WAAW8a,EAAyBC,EAAyB,CAEjED,GACF,SAAS,iBAAiB,QAAS,KAAK,kBAAkB,KAAK,IAAI,CAAC,EAElEC,GACF,OAAO,iBAAiB,WAAY,KAAK,cAAc,KAAK,IAAI,CAAC,CAErE,CAKO,UAAUjf,EAAwB,CAC/B,aAAK,YAAaA,CAAG,EACzBA,GAAQA,EAAiB,OAC3B,OAAO,SAAWA,GAEhB,OAAOA,GAAQ,WACjB,OAAO,SAAS,KAAOA,EAE3B,CAEU,kBAAkB+a,EAAY,CAClC,IAAAjhB,EAAKwC,GAAoBye,CAAG,EAEhC,KAAOjhB,GAAM,CAACilB,EAAK,QAAQjlB,CAAE,GAC3BA,EAAKA,EAAG,WAGV,GAAI,CAACA,GAAMA,EAAG,WAAa,IACzB,OAGI,MAAAqhB,EAAO4D,EAAK,QAAQjlB,CAAE,EAGxB,KAAAA,EAAG,UAAU,SAAS,OAAO,GAAKA,EAAG,aAAa,UAAU,GAIhE,IAAI,CAACqhB,EACH,MAAM,IAAI,MACR,iKAKA,OAAArhB,EAAG,UAAU,SAAS,OAAO,GAAKA,EAAG,aAAa,UAAU,EACvD,GAGF,KAAK,YAAYihB,EAAKjhB,EAAyBqhB,CAAI,EAC5D,CAKO,YACLJ,EACAjhB,EACAqhB,EACAkE,EAAS,GACT,CAEA,KAAM,CAAE,IAAArf,EAAK,SAAAG,CAAS,EAAID,GAAaib,CAAI,EAErC,CAAE,SAAUyE,CAAa,EAAI1f,GAAa,EAGhD,GAAIC,EAAS,MAAQyf,EAAa,WAAazf,EAAS,SAAU,CAChE,IAAI9C,EAAK8C,EAAS,KAAK,MAAM,CAAC,EAC9B9C,EAAK,UAAUA,CAAE,EACX,MAAAwiB,EAAkB,SAAS,eAAexiB,CAAE,EAClD,GAAIwiB,EACF,OAAA9E,EAAI,gBAAgB,EACpBA,EAAI,eAAe,EACf,KAAK,kBACP,OAAO,QAAQ,UAAU,KAAM,GAAI/a,CAAG,EAEjC7E,GAAS0kB,EAAiB,KAAK,oBAAoB,EAI9D,GAAI,CAAC7f,EACG,UAAI,MAAM,cAAc,EAEjB+e,EAAK,aAAa/e,EAAKlG,EAAIihB,CAAG,IAG3CA,EAAI,gBAAgB,EACpBA,EAAI,eAAe,EAEnB,KAAK,WAAW,QAAQ,cAAejhB,EAAIihB,CAAG,EAEzC,UAAK/a,EAAKqf,CAAM,EAEzB,CAKA,MAAgB,cACd9iB,EACAujB,EAAiB,KAAK,gBACtB,CAESA,EAAA5f,GAAa4f,CAAM,EAAE,IAC9B,MAAMC,EAAS7f,GAAa,KAAK,QAAQ,gBAAgB,GAAG,EAAE,IAE1D,QAAK,kBAAoB6f,IAAWD,EAC/B,SAGJ,aAAQ,IAAIA,CAAM,EAEvB,KAAK,WAAW,QACd,kBACA,KAAK,OACL,KAAK,QAAQ,cAAc,EAC3B,KAAK,QAAQ,WAAW,GAG1B,MAAMnG,EAAeQ,GAAI,aAAa,SAAU,KAAK,iBAAiB,EAChE6F,EAAsB,KAAK,WAAWF,CAAM,EAE5CG,EAAa,KAAK,gBAExB,KAAK,mBAAqB,GAE1B,MAAMC,EAAmBD,EAAW,KAAKtG,EAAcqG,CAAmB,EAErE,0BAAqB,MAAMA,CAAmB,EAE7C,MAAAE,EACN,KAAK,gBAAgB,CACvB,CAKU,qBAAqB5b,EAAwB,CAC/C,MAAA6b,EAAgB,KAAK,QAAQ,cAAc,EAEnCA,EAAA,UAAYhG,GAAI,aAAa7V,CAAS,EAE9C,MAAAhK,EAAUF,GAAWkK,CAAS,EAEpC,KAAK,WAAW,QACd,eACA,KAAK,OACL,KAAK,QAAQ,cAAc,EAC3B,KAAK,QAAQ,WAAW,EACxBA,EACAA,EAAU,UACVhK,EACA,GAEJ,CAKU,iBAAkB,CAC1B,KAAK,mBAAqB,GAE1B,KAAK,WAAW,QACd,sBACA,KAAK,OACL,KAAK,QAAQ,cAAc,EAC3B,KAAK,QAAQ,WAAW,EAE5B,CAKU,KACRqgB,EACAqE,EACAC,EACA,CACA,MAAMmB,EAAkBjG,GAAI,aAC1B,KAAK,WACL,KAAK,kBACL,KAAK,eAEDna,EAAM,OAAO,SAAS,SAE5B,GAAI,KAAK,aAAc,CACrB,MAAMqgB,EAAangB,GAAa,OAAO,SAAS,IAAI,EAAE,IACjD6e,EAAK,MAAM,IAAI/e,CAAG,GAChB,wBAAmBqgB,EAAY,GAAO,EAAK,EAI/C,iCAA4BD,EAAgB,aAAa,EAE9D,KAAK,QAAUzF,EAEf,KAAK,QAAQ,IACX,KAAK,cAAc,EACnBR,GAAI,aAAaiG,EAAgB,SAAS,GAI5C,KAAK,WAAW,QACd,kBACA,KAAK,OACL,KAAK,QAAQ,cAAc,GAGvB,MAAA9lB,EAAUF,GAAWgmB,EAAgB,SAAS,EAEpD,KAAK,WAAW,QACd,eACA,KAAK,OACL,KAAK,QAAQ,cAAc,EAC3B,CAAC,EACDA,EAAgB,UAChBA,EAAgB,UAAU,UAC1B9lB,EACA,IAGF,KAAK,WAAW,QACd,sBACA,KAAK,OACL,KAAK,QAAQ,cAAc,GAGxB,gBAAW0kB,EAAgBC,CAAc,CAChD,CACF,EApsBA,IAAMhE,EAAN8D,EACEld,EADIoZ,EACU,QAAQ,IAAI2C,IAuI1B/b,EAxIIoZ,EAwIW,YAA2B,ICtKrC,MAAMmE,EAAc,CAIzB,WAAkB,SAAU,CAC1B,OAAO,KAAK,QACd,CAEU,aAAc,CAExB,CAEA,OAAc,cAAe,CAC3B,GAAI,KAAK,SACP,OAAO,KAAK,SAGd,MAAM,IAAI,MACR,0EAEJ,CAEA,OAAc,aAAa1qB,EAAwC,GAAI,CACrE,OAAI,KAAK,UACP,QAAQ,KAAK,6CAA6C,EACnD,KAAK,WAEdA,EAAQ,kBACNA,EAAQ,mBAAqB,IAAIulB,GAC3BvlB,EAAA,qBAAuBA,EAAQ,sBAAwB,EAC/D,KAAK,SAAWA,EACX,cAAW,IAAI,KACb,KAAK,SACd,CACF,CAjCEmN,EADWud,GACM,YACjBvd,EAFWud,GAEG,qPCDVvmB,GAAYkd,GAAmB,KAK9B,MAAMuK,WAAyB/c,CAAkC,CAAjE,kCAIG1B,EAAA,cAAsB,MAE9B,MAAM,QAAQ/H,EAAiBpF,EAAc,CAC3C,MAAMimB,EAAU7gB,EAGhBpF,EAAUA,GAAW,GACrBA,EAAQ,eAAiB,GACzBA,EAAQ,eAAiB,GACzBA,EAAQ,WAAa,GACrBA,EAAQ,WAAaA,EAAQ,YAAc,IAAIulB,GACvCvlB,EAAA,OACNA,EAAQ,QAAUoF,EAAG,aAAa,IAAI,GAAKjB,GAAUnE,EAAQ,GAAG,EAC1DA,EAAA,kBAAoBA,EAAQ,mBAAqB,mBACzDA,EAAQ,iBAAmB,GAErB,MAAAwmB,EAAO,IAAID,EAAKvmB,CAAO,EAEvB,CAAE,gBAAA+qB,CAAA,EAAoB,MAAMvE,EAAK,mBACrCxmB,EAAQ,IACR,GACA,IAGIwR,EAAW,MAAMuZ,EAEf9E,EAAA,YAAYzU,EAAS,SAAS,EAE7BA,EAAA,UAAU,MAAM,WAAa,UAGjC/O,EAAS,KAAK,KAAK,MAAM,IACvB,UAAK,OAAS,IAGjB,KAAK,QACP,KAAK,OAAO,SAEd,KAAK,OAAS,IAAIiV,GAChBlG,EAAS,UACT,KAAK,KAAK,OACV,KAAK,KAAK,SAEZ,KAAK,OAAO,MACd,CAEA,QAAS,CACH,KAAK,QACP,KAAK,OAAO,QAEhB,CACF,CAtDErE,EADWye,GACJ,MAAM,eACbze,EAFWye,GAEJ,QAAQ,ICFV,MAAMC,WAAoBhd,CAAkC,CAA5D,kCAGG1B,EAAA,iBAEAA,EAAA,eAAwB,CAC9B,IAAK,GACL,OAAQ,OACR,sBAAuB,GACvB,OAAQ,GACR,eAAgB,KAiCVA,EAAA,eAAU,KAAK,SAAS,KAAK,IAAI,GA9BjC,SAAStF,EAAc,CAE7B,MAAM2e,EAAOD,EAAK,YAAY,KAAK,QAAQ,MAAM,EACjD,GAAI3a,GAAQ,KAAK,QAAQ,IAAK,EAAI,EAChC,QAAQ,KAAK,kCAAkC,EAC/C/D,EAAM,gBAAgB,EACtBA,EAAM,eAAe,UACZgF,GAAc,KAAK,QAAQ,GAAG,EAAG,CAC1C,GAAI,CAAC2Z,EACH,OAEF3e,EAAM,gBAAgB,EACtBA,EAAM,eAAe,EAErB,MAAM8iB,EAAS,KAAK,QAAQ,QAAU,KAAK,QAAQ,eACnDnE,EAAK,KAAK,KAAK,QAAQ,IAAKmE,CAAM,UAE9B,KAAK,QAAQ,IAAK,CACpB,GAAI,CAACnE,EACH,OAEGA,EAAA,YAAY3e,EAAO,KAAK,GAAI,KAAK,QAAQ,IAAK,KAAK,QAAQ,MAAM,EAGtE,KAAK,QAAQ,uBAAyB,KAAK,IAAM,KAAK,GAAG,YAE3D,KAAK,GAAG,WAAW,YAAY,KAAK,EAAE,CAE1C,CAIA,KAAKzC,EAAuB,CACvBA,EAAA,UAAU,IAAI,OAAO,EACpB,QAAO,MAGX,KAAK,QAAU,KAAK,QAAQ,KAAK,IAAI,EAClCA,EAAA,iBAAiB,QAAS,KAAK,OAAO,EAC3C,CAEA,QAAQA,EAAuB0mB,EAAsC,CAC/DpoB,GAASooB,CAAY,EACvB,KAAK,QAAQ,IAAMA,EACVrpB,EAASqpB,CAA4B,IAC9C,KAAK,QAAUA,GAEjB,KAAK,QAAQ,OAAS,KAAK,QAAQ,QAAU,OAC7C,KAAK,SAAW,IAAIpF,GAAS,KAAK,QAAQ,MAAM,EAEhD,KAAK,QAAQ,OAAS,GAChB,MAAAqF,EAAsB3mB,EAAG,UAAY,IAE3C,GAAI,CAAC,KAAK,QAAQ,KAAO2mB,EAAqB,CACtC,MAAAzgB,EAAMlG,EAAG,aAAa,MAAM,EAC9BkG,IACF,KAAK,QAAQ,IAAMA,GAInBlG,EAAG,aAAa,QAAQ,IAAM,WAChC,KAAK,QAAQ,OAAS,IAIxB,KAAK,QAAQ,IAAMoG,GAAa,KAAK,QAAQ,GAAG,EAAE,IAIhDugB,IACC,CAAE3mB,EAAyB,MAAQ,CAACA,EAAG,aAAa,MAAM,IAC3D,KAAK,QAAQ,MAEbA,EAAG,aAAa,OAAQ,KAAK,QAAQ,GAAG,EACvCA,EAAyB,KAAO,KAAK,QAAQ,KAG3C,KAAK,QAAQ,QAChB,KAAK,SAAS,WAAWA,EAAI,KAAK,QAAQ,GAAG,CAGjD,CAEA,OAAOA,EAAuB,CzKrGzB,IAAAW,GyKsGHA,EAAA,KAAK,WAAL,MAAAA,EAAe,aAAaX,EAAI,KAAK,QAAQ,KAC1CA,EAAA,oBAAoB,QAAS,KAAK,OAAO,CAC9C,CACF,CAnGE+H,EADW0e,GACJ,MAAM,SCNR,MAAMG,WAA6Bnd,CAAiC,CAApE,kCAGG1B,EAAA,kBAAa,IAAIkC,EAAgB,MAAM,GACvClC,EAAA,YACAA,EAAA,iBAAY,IAsBZA,EAAA,mBAAc,KAAK,aAAa,KAAK,IAAI,GApBzC,cAAe,CACrB,GAAI,KAAK,IAAK,CACR,GAAAvB,GAAQ,KAAK,GAAG,EAClB,YAAK,GAAG,UAAU,IAAI,KAAK,SAAS,EAEhC,KAAK,GAAG,aAAa,MAAM,IAAM,UACnC,KAAK,GAAG,QAAU,IAEb,GAEP,KAAK,GAAG,UAAU,OAAO,KAAK,SAAS,EAEnC,KAAK,GAAG,aAAa,MAAM,IAAM,UACnC,KAAK,GAAG,QAAU,IAIjB,QACT,CAIA,MAAO,CACL,KAAK,WAAW,GAAG,eAAgB,KAAK,WAAW,CACrD,CAOA,QAAQxG,EAAiBkG,EAAc,CACrC,KAAK,IAAMA,EACX,KAAK,UAAY,KAAK,KAAK,CAAC,EAAE,SAAc,YACtC,MAAA2gB,EAAkB7mB,EAAG,UAAY,IACnC,IAAC,KAAK,KAAO6mB,EAAiB,CAC1B,MAAAxF,EAAOrhB,EAAG,aAAa,MAAM,EAC/BqhB,IACF,KAAK,IAAMA,GAIf,KAAK,YAAY,CACnB,CAEA,QAAS,CACP,KAAK,WAAW,IAAI,eAAgB,KAAK,WAAW,CACtD,CACF,CAtDEtZ,EADW6e,GACJ,MAAM,iBCFR,MAAME,WAA2Brd,CAAkC,CAGxE,QAAQzJ,EAAiBkG,EAAc,C3KFlC,IAAAvF,E2KGH,GAAI,OAAO,IACT,OAEI,MAAAkmB,EAAkB7mB,EAAG,UAAY,IACnC,IAACkG,GAAO2gB,EAAiB,CACrB,MAAAxF,EAAOrhB,EAAG,aAAa,MAAM,EAC/BqhB,IACInb,EAAAmb,GAGNnb,KACGvF,EAAAwgB,EAAA,sBAAAxgB,EAAe,aAAauF,GAErC,CACF,CAjBE6B,EADW+e,GACJ,MAAM,iBCAR,MAAMC,WAAmCtd,CAG9C,CAHK,kCAMG1B,EAAA,kBAAa,IAAIkC,EAAgB,MAAM,GAEvClC,EAAA,kBAEAA,EAAA,YA4BAA,EAAA,mBAAc,KAAK,aAAa,KAAK,IAAI,GA1BzC,cAAe,CACjB,IAAC,KAAK,IACF,UAAI,MAAM,qBAAqB,EAGnC,IAAC,KAAK,UACF,UAAI,MAAM,2BAA2B,EAGzC,OAAAlB,GAAc,KAAK,GAAG,GACxB,KAAK,GAAG,UAAU,IAAI,KAAK,SAAS,EAEhC,KAAK,GAAG,aAAa,MAAM,IAAM,UAClC,KAAK,GAAwB,QAAU,IAEnC,KAEP,KAAK,GAAG,UAAU,OAAO,KAAK,SAAS,EAEnC,KAAK,GAAG,aAAa,MAAM,IAAM,UAClC,KAAK,GAAwB,QAAU,IAGrC,GACT,CASA,QAAQ7G,EAAiBkG,EAAc,CACrC,KAAK,IAAMA,EACX,KAAK,UAAY,KAAK,KAAK,CAAC,EAAE,SAAc,YACtC,MAAA8gB,EAAqBhnB,EAAG,UAAY,IACtC,IAAC,KAAK,KAAOgnB,EAAoB,CAC7B,MAAA3F,EAAOrhB,EAAG,aAAa,MAAM,EAC/BqhB,IACF,KAAK,IAAMA,GAGf,KAAK,YAAY,CACnB,CAEA,MAAO,CACL,KAAK,WAAW,GAAG,eAAgB,KAAK,WAAW,CACrD,CAEA,QAAS,CACP,KAAK,WAAW,IAAI,eAAgB,KAAK,WAAW,CACtD,CACF,CA7DEtZ,EAJWgf,GAIJ,QAAQ,wBCNjB,MAAME,GAAS,IAAM,CACnB,OAAO,QAAQ,MACjB,EAKO,MAAMC,WAA8Bzd,CAA6B,CAAjE,kCAEL1B,EAAA,gBAAW,KAEHA,EAAA,kBAER,OAAO/H,EAAiB,CAClB,KAAK,WACJA,EAAA,oBAAoB,KAAK,UAAWinB,EAAM,CAEjD,CAEA,QAAQjnB,EAAoC,CACtC,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAE5B,KAAK,WACJA,EAAA,oBAAoB,KAAK,UAAWinB,EAAM,EAE1C,eAAY,KAAK,KAAK,CAAC,EAC5BjnB,EAAG,iBAAiB,KAAK,KAAK,CAAC,EAAainB,EAAM,CACpD,CACF,CArBElf,EADWmf,GACJ,MAAM,+PCAFC,GAAN,cAAwC3P,CAAU,CAgBvD,aAAc,CACN,QAdEzP,EAAA,gBAAW,IAMdA,EAAA,aAAe,CACpB,IAAK,GACL,GAAI,GACJ,MAAO,GACP,MAAO,IAKT,CAbA,WAAW,oBAA+B,CACxC,MAAO,CAAC,MAAO,KAAM,QAAS,OAAO,CACvC,CAaU,mBAAoB,CAC5B,MAAM,kBAAkB,EAClB,WAAKof,GAA0B,kBAAkB,CACzD,CAEA,MAAgB,SAAU,CACxB,MAAM,MAAM,UACP,KAAK,MAAM,KACT,WAAM,GAAKxjB,GAAO,SAAS,GAEvBN,GAAA,KAAK,MAAM,IAAK,KAAK,MAAM,GAAI,KAAK,MAAM,KAAK,CAC5D,CAEU,oBAA+B,CACvC,MAAO,CAAC,KAAK,CACf,CAEU,UAAyC,CAC1C,WACT,CACF,EAxCO,IAAM+jB,GAAND,GACLpf,EADWqf,GACG,UAAU,sBCEnB,MAAMC,GAAN,cAAkC7P,CAAU,CAwCjD,aAAc,CACN,QAvCEzP,EAAA,cAASkC,EAAgB,YAAY,MAAM,GAC3ClC,EAAA,cAAsB,MACtBA,EAAA,eAA8B,MAC9BA,EAAA,YAAoB,MACpBA,EAAA,gBAA4B,MAmB/BA,EAAA,aAAyB,CAC9B,GAAI,OACJ,OAAQ,UACR,YAAa,GACb,eAAgB,GAChB,eAAgB,GAChB,mBAAoB,GACpB,qBAAsBud,GAAc,QAAQ,qBAC5C,mBAAoB,GACpB,WAAY,GACZ,iBAAkB,GAClB,cAAe,GACf,WAAYA,GAAc,QAAQ,mBAKpC,CAlCA,WAAW,oBAAmD,CACrD,OACL,KACA,SACA,qBACA,gBACA,mBACA,kBACA,wBACA,0BACA,wBACA,cACA,qBACA,iBAEJ,CAqBU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAK+B,GAAoB,kBAAkB,CAClD,CAEU,mBAAoB,CAC5B,KAAK,OAAO,GAAG,eAAgB,KAAK,YAAa,IAAI,EACrD,KAAK,OAAO,GAAG,kBAAmB,KAAK,iBAAkB,IAAI,EAC7D,KAAK,OAAO,GAAG,sBAAuB,KAAK,sBAAuB,IAAI,CACxE,CAEU,sBAAuB,CAC/B,KAAK,OAAO,IAAI,eAAgB,KAAK,YAAa,IAAI,EACtD,KAAK,OAAO,IAAI,kBAAmB,KAAK,iBAAkB,IAAI,EAC9D,KAAK,OAAO,IAAI,sBAAuB,KAAK,sBAAuB,IAAI,CACzE,CAEU,sBAAuB,CAC3B,YAAK,MAAM,KAAO,OACb,GAAGA,GAAoB,0BAEvB,GAAGA,GAAoB,WAAW,KAAK,MAAM,oBAExD,CAEU,kBAAmB,CACvB,IAAC,KAAK,MAAM,GAAI,CAClB,QAAQ,MAAM,2BAA2B,EACzC,OAGF,MAAMC,EAA2B,CAC/B,GAAI,KAAK,MAAM,GACf,OAAQ,KAAK,MAAM,OACnB,QAAS,KACT,kBAAmB,KAAK,qBAAqB,EAC7C,eAAgB,CAAC,CAAC,KAAK,MAAM,eAC7B,eAAgB,CAAC,CAAC,KAAK,MAAM,eAC7B,WAAY,KAAK,MAAM,WACvB,WAAY,CAAC,CAAC,KAAK,MAAM,WACzB,iBAAkB,CAAC,CAAC,KAAK,MAAM,iBAC/B,cAAe,CAAC,CAAC,KAAK,MAAM,cAC5B,YAAa,CAAC,CAAC,KAAK,MAAM,aAEvB,UAAO,IAAInG,EAAKmG,CAAW,EAC3B,UAAK,iBAAiB,IAAI,EAC/B,KAAK,SAAW,IAAIhG,GAAS,KAAK,MAAM,EAAE,EACrC,cAAS,KAAKgG,EAAY,aAAa,EAC5C,KAAK,KAAK,OACZ,CAEU,YACRjd,EACAgc,EACAkB,EACA/c,EACAgd,EACAhnB,EACAinB,EACA,CAEI,GAAApd,IAAW,KAAK,MAAM,GAAI,CAC5B,QAAQ,KAAK,qBAAsB,KAAK,MAAM,GAAIA,EAAQ7J,CAAO,EACjE,OAaF,GAVK,WAAM,kBAAmB,KAAK,SAAS,EAExC,KAAK,MAAM,qBACR,KAAK,MAAM,QACT,WAAM,MAAQ,IAEhB,WAAM,MAAM,QAAUA,GAIzB,CAAAinB,EAMA,IAFC,UAAO,KAAK,UAEb,CAAC,KAAK,KAAM,CACd,QAAQ,KAAK,qBAAqB,EAClC,OAGF,KAAK,KAAK,OACZ,CAEA,MAAgB,iBAAiBpd,EAAgB,CAC3CA,IAAW,KAAK,MAAM,IAG1B,KAAK,mBAAmB,MAAM,CAChC,CAEA,MAAgB,sBAAsBA,EAAgB,CAEhD,GAAAA,IAAW,KAAK,MAAM,GAMtB,IAFJ,KAAK,mBAAmB,UAAU,EAE9B,KAAK,MAAM,mBAAoB,CACjC,IAAI0b,EAAsC,KAE1C,GADa,OAAO,SAAS,KAAK,OAAO,CAAC,IAExCA,EAAkB,SAAS,eACzB,OAAO,SAAS,KAAK,OAAO,CAAC,GAG3BA,GACF,OAAO,MAAM1kB,GACX0kB,EACA,KAAK,MAAM,qBACX,QAMJ,QAAK,MAAM,YACb,OAAO,MAAM1jB,GAAiB,OAAQ,QAAS,WAAY,QAAQ,EAEvE,CAEU,mBAAmB2I,EAA4B,CAClD,eAAU,OAAO,iBAAiB,EAClC,eAAU,OAAO,qBAAqB,EACtC,eAAU,IAAI,cAAcA,GAAO,CAC1C,CAEU,oBAA+B,CACvC,MAAO,EACT,CAEU,+BACR/K,EACAE,EACAD,EACAyJ,EACA,CAOA,OANM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAEM1J,EAAe,CACrB,IAAK,KACH,KAAK,OAASgK,EAAgB,YAAY,KAAK,MAAM,EAAE,EACvD,KAIJ,CACF,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,kBAAkB,EACvB,KAAK,iBAAiB,CACxB,CAEU,UAAyC,CAC1C,WACT,CACF,EArNO,IAAMyd,GAANL,GACLtf,EADW2f,GACG,UAAU,uKCRbC,GAAyD,SACpEne,GAAA,WACA8B,GAAA,SACA2T,GACA,WAAY,CAAC,EACb,KAAKrkB,EAAU,GAAI,CACRgtB,UAAc,aAAahtB,CAAO,EACpC,IACT,CACF,ECbaitB,GAA8B,CAAC,KAAM,OAAQ,OAAO,ECGpDC,GAA4B,CACvC,UAAW,EACX,KAAM,IACR,EACaC,GAA4B,CACvC,UAAW,IACX,KAAM,IACR,EACaC,GAA4B,CACvC,UAAW,IACX,KAAM,IACR,EACaC,GAA4B,CACvC,UAAW,IACX,KAAM,IACR,EACaC,GAA4B,CACvC,UAAW,KACX,KAAM,IACR,EACaC,GAA6B,CACxC,UAAW,KACX,KAAM,KACR,EAEaC,GAA2C,CACtD,YAAa,CACXN,GACAC,GACAC,GACAC,GACAC,GACAC,EACF,EACA,wBAAyB,EAC3B,EAGaE,EAAgB,CAC3B,SAAU,qBACV,WAAY,CACV,OAAQ,SACR,QAAS,UACT,KAAM,OACN,MAAO,OACT,CACF,EAEaC,GAAmB,CAC9B,aAAc,CACZ,QAAS,UACT,MAAO,OACT,CACF,EAEaC,GAAe,CAC1B,aAAc,CACZ,QAAS,UACT,MAAO,OACT,CACF,qSCvDaC,GAAN,KAAiB,CAOZ,YAAY5tB,EAA2B,CANvCmN,EAAA,gBAA6BqgB,IAC7BrgB,EAAA,eAAUkC,EAAgB,YAAY,KAAK,GAC3ClC,EAAA,yBAAuC,MA2DvCA,EAAA,qBAAgB7L,GAAS,KAAK,eAAe,KAAK,IAAI,CAAC,GAtD/D,KAAK,SAAWtB,EACX,qBAAgB,KAAK,SAAS,WAAW,EAC9C,KAAK,eAAe,EACpB,KAAK,kBAAkB,CACzB,CAEA,OAAc,cAAe,CAC3B,GAAI4tB,GAAW,SACb,OAAOA,GAAW,SAGpB,MAAM,IAAI,MACR,wGAEJ,CAEA,OAAc,aACZ5tB,EAA4BwtB,GAC5B,CACA,GAAII,GAAW,SACP,UAAI,MAAM,0CAA0C,EAEjD,OAAAA,GAAA,SAAW,IAAIA,GAAW5tB,CAAO,EACrC4tB,GAAW,QACpB,CAEU,qBAAsB,CAC9B,KAAK,QAAQ,QAAQ,qBAAsB,KAAK,gBAAgB,CAClE,CAEU,oBAAoBC,EAAwB,CnL5CjD,IAAA9nB,EmL6CC8nB,GAAcA,EAAW,SAAS9nB,EAAA,KAAK,mBAAL,YAAAA,EAAuB,QAC3D,KAAK,kBAAoB8nB,EACzB,KAAK,oBAAoB,EAE7B,CAEU,mBAAoB,CAC5B,OAAO,iBAAiB,SAAU,KAAK,cAAe,CAAE,QAAS,GAAM,CACzE,CAEU,sBAAuB,CACxB,2BAAoB,SAAU,KAAK,aAAa,CACzD,CAEU,gBAAiB,CACnB,MAAAC,EACJ,KAAK,yBAAyBhmB,GAAA,EAAwB,CAAC,GACvD,KAAK,oBAAoB,IAAI,EAC3BgmB,GACF,KAAK,oBAAoBA,CAAa,CAE1C,CAIO,gBAAgBC,EAA2B,CAChDA,EAAY,KAAK,CAACpW,EAAGC,IAAMD,EAAE,UAAYC,EAAE,SAAS,CACtD,CAEA,IAAW,SAAU,CACnB,OAAO,KAAK,QACd,CAEA,IAAW,kBAAmB,CAC5B,OAAO,KAAK,iBACd,CAEA,IAAW,iBAAkB,CAC3B,OAAO,KAAK,QAAQ,YAAY,IAAKiW,GAAeA,EAAW,IAAI,CACrE,CAEA,IAAW,QAAS,CAClB,OAAO,KAAK,OACd,CAOO,GAAG3e,EAAmB3O,EAAmB4O,EAAmB,CACjE,OAAO,KAAK,OAAO,GAAGD,EAAW3O,EAAI4O,CAAW,CAClD,CAOO,KAAKD,EAAmB3O,EAAmB4O,EAAmB,CACnE,OAAO,KAAK,OAAO,KAAKD,EAAW3O,EAAI4O,CAAW,CACpD,CAOO,IAAID,EAAmB3O,EAAmB4O,EAAmB,CAClE,OAAO,KAAK,OAAO,IAAID,EAAW3O,EAAI4O,CAAW,CACnD,CAOO,yBACL6e,EACAD,EACmB,CACLA,KAAe,KAAK,QAAQ,YAE1C,QAASjuB,EAAI,EAAGA,EAAIiuB,EAAY,OAAS,EAAGjuB,IAAK,CACzC,MAAAmuB,EAAOF,EAAYjuB,CAAC,EACpBoO,EAAO6f,EAAYjuB,EAAI,CAAC,EAC9B,GACEoO,GACA+f,GACAD,EAAYC,EAAK,WACjBD,EAAY9f,EAAK,UAEV,OAAA+f,EAIX,MAAMC,EAAOH,EAAYA,EAAY,OAAS,CAAC,EAC3C,OAAAC,GAAaE,EAAK,UACbA,EAGF,IACT,CAOO,oBACLxf,EACAqf,EACmB,CACLA,KAAe,KAAK,QAAQ,YAC1C,MAAMI,EAAQJ,EAAY,KAAMF,GAAeA,EAAW,OAASnf,CAAI,EACvE,OAAKyf,GACI,IAGX,CAEO,wBAAwBzf,EAAc,CAC3C,MAAMqf,EAAc,KAAK,gBACnBpgB,EAAQogB,EAAY,QAAQrf,CAAI,EACtC,GAAIf,EAAQ,EACJ,UAAI,MAAM,mBAAmBe,oBAAuB,EAGxD,OAAAf,IAAUogB,EAAY,OAAS,EAC1B,KAEFA,EAAYpgB,EAAQ,CAAC,CAC9B,CAEO,wBAAwBe,EAAc,CAC3C,MAAMqf,EAAc,KAAK,gBACnBpgB,EAAQogB,EAAY,QAAQrf,CAAI,EACtC,GAAIf,EAAQ,EACJ,UAAI,MAAM,mBAAmBe,oBAAuB,EAG5D,OAAIf,IAAU,EACL,KAEFogB,EAAYpgB,EAAQ,CAAC,CAC9B,CAEO,wBACLygB,EACAC,EACgB,CACV,MAAAC,EAAe,KAAK,oBAAoBF,CAAgB,EACxDG,EAAoB,KAAK,oBAAoBF,CAAqB,EACxE,OAAIC,GAAgBC,EACXD,EAAa,UAAYC,EAAkB,UAE7C,IACT,CAEO,wBACLH,EACAC,EACgB,CACV,MAAAC,EAAe,KAAK,oBAAoBF,CAAgB,EACxDG,EAAoB,KAAK,oBAAoBF,CAAqB,EACxE,OAAIC,GAAgBC,EACXD,EAAa,UAAYC,EAAkB,UAE7C,IACT,CAEO,8BACLA,EACgB,CACZ,OAAC,KAAK,iBAGH,KAAK,wBACV,KAAK,iBAAiB,KACtBA,CAAA,EAJO,IAMX,CAEO,8BACLA,EACgB,CACZ,OAAC,KAAK,iBAGH,KAAK,wBACV,KAAK,iBAAiB,KACtBA,CAAA,EAJO,IAMX,CACF,EAzOO,IAAMC,GAANZ,GAKLzgB,EALWqhB,GAKG,YCfT,IAAIznB,EAAM,MACN0nB,GAAS,SACTC,GAAQ,QACR1nB,EAAO,OACP2nB,GAAO,OACPC,GAAiB,CAAC7nB,EAAK0nB,GAAQC,GAAO1nB,CAAI,EAC1C6M,GAAQ,QACRkK,GAAM,MACN8Q,GAAkB,kBAClBC,GAAW,WACXC,GAAS,SACTC,GAAY,YACZC,GAAmCL,GAAe,OAAO,SAAUM,EAAKC,EAAW,CAC5F,OAAOD,EAAI,OAAO,CAACC,EAAY,IAAMtb,GAAOsb,EAAY,IAAMpR,EAAG,CAAC,CACpE,EAAG,CAAE,GACMqR,GAA0B,GAAG,OAAOR,GAAgB,CAACD,EAAI,CAAC,EAAE,OAAO,SAAUO,EAAKC,EAAW,CACtG,OAAOD,EAAI,OAAO,CAACC,EAAWA,EAAY,IAAMtb,GAAOsb,EAAY,IAAMpR,EAAG,CAAC,CAC/E,EAAG,CAAE,GAEMsR,GAAa,aACbC,GAAO,OACPC,GAAY,YAEZC,GAAa,aACbC,GAAO,OACPC,GAAY,YAEZC,GAAc,cACdC,GAAQ,QACRC,GAAa,aACbC,GAAiB,CAACT,GAAYC,GAAMC,GAAWC,GAAYC,GAAMC,GAAWC,GAAaC,GAAOC,EAAU,EC9BtG,SAASE,GAAYpqB,EAAS,CAC3C,OAAOA,GAAWA,EAAQ,UAAY,IAAI,YAAa,EAAG,IAC5D,CCFe,SAASqqB,GAAU/a,EAAM,CACtC,GAAIA,GAAQ,KACV,OAAO,OAGT,GAAIA,EAAK,SAAU,IAAK,kBAAmB,CACzC,IAAIgb,EAAgBhb,EAAK,cACzB,OAAOgb,GAAgBA,EAAc,aAAe,OAGtD,OAAOhb,CACT,CCTA,SAASib,GAAUjb,EAAM,CACvB,IAAIkb,EAAaH,GAAU/a,CAAI,EAAE,QACjC,OAAOA,aAAgBkb,GAAclb,aAAgB,OACvD,CAEA,SAASmb,GAAcnb,EAAM,CAC3B,IAAIkb,EAAaH,GAAU/a,CAAI,EAAE,YACjC,OAAOA,aAAgBkb,GAAclb,aAAgB,WACvD,CAEA,SAASob,GAAapb,EAAM,CAE1B,GAAI,OAAO,WAAe,IACxB,MAAO,GAGT,IAAIkb,EAAaH,GAAU/a,CAAI,EAAE,WACjC,OAAOA,aAAgBkb,GAAclb,aAAgB,UACvD,CChBA,SAASqb,GAAYC,EAAM,CACzB,IAAIngB,EAAQmgB,EAAK,MACjB,OAAO,KAAKngB,EAAM,QAAQ,EAAE,QAAQ,SAAU1B,EAAM,CAClD,IAAI8hB,EAAQpgB,EAAM,OAAO1B,CAAI,GAAK,GAC9BoI,EAAa1G,EAAM,WAAW1B,CAAI,GAAK,GACvC/I,EAAUyK,EAAM,SAAS1B,CAAI,EAE7B,CAAC0hB,GAAczqB,CAAO,GAAK,CAACoqB,GAAYpqB,CAAO,IAOnD,OAAO,OAAOA,EAAQ,MAAO6qB,CAAK,EAClC,OAAO,KAAK1Z,CAAU,EAAE,QAAQ,SAAUpI,EAAM,CAC9C,IAAIxM,EAAQ4U,EAAWpI,CAAI,EAEvBxM,IAAU,GACZyD,EAAQ,gBAAgB+I,CAAI,EAE5B/I,EAAQ,aAAa+I,EAAMxM,IAAU,GAAO,GAAKA,CAAK,CAE9D,CAAK,EACL,CAAG,CACH,CAEA,SAASuuB,GAAOC,EAAO,CACrB,IAAItgB,EAAQsgB,EAAM,MACdC,EAAgB,CAClB,OAAQ,CACN,SAAUvgB,EAAM,QAAQ,SACxB,KAAM,IACN,IAAK,IACL,OAAQ,GACT,EACD,MAAO,CACL,SAAU,UACX,EACD,UAAW,CAAE,CACjB,EACE,cAAO,OAAOA,EAAM,SAAS,OAAO,MAAOugB,EAAc,MAAM,EAC/DvgB,EAAM,OAASugB,EAEXvgB,EAAM,SAAS,OACjB,OAAO,OAAOA,EAAM,SAAS,MAAM,MAAOugB,EAAc,KAAK,EAGxD,UAAY,CACjB,OAAO,KAAKvgB,EAAM,QAAQ,EAAE,QAAQ,SAAU1B,EAAM,CAClD,IAAI/I,EAAUyK,EAAM,SAAS1B,CAAI,EAC7BoI,EAAa1G,EAAM,WAAW1B,CAAI,GAAK,GACvCkiB,EAAkB,OAAO,KAAKxgB,EAAM,OAAO,eAAe1B,CAAI,EAAI0B,EAAM,OAAO1B,CAAI,EAAIiiB,EAAcjiB,CAAI,CAAC,EAE1G8hB,EAAQI,EAAgB,OAAO,SAAUJ,EAAOK,EAAU,CAC5D,OAAAL,EAAMK,CAAQ,EAAI,GACXL,CACR,EAAE,CAAE,GAED,CAACJ,GAAczqB,CAAO,GAAK,CAACoqB,GAAYpqB,CAAO,IAInD,OAAO,OAAOA,EAAQ,MAAO6qB,CAAK,EAClC,OAAO,KAAK1Z,CAAU,EAAE,QAAQ,SAAUM,EAAW,CACnDzR,EAAQ,gBAAgByR,CAAS,CACzC,CAAO,EACP,CAAK,CACL,CACA,CAGA,MAAe0Z,GAAA,CACb,KAAM,cACN,QAAS,GACT,MAAO,QACP,GAAIR,GACJ,OAAQG,GACR,SAAU,CAAC,eAAe,CAC5B,EClFe,SAASM,GAAiB5B,EAAW,CAClD,OAAOA,EAAU,MAAM,GAAG,EAAE,CAAC,CAC/B,CCHO,IAAIvR,GAAM,KAAK,IACXD,GAAM,KAAK,IACXqT,GAAQ,KAAK,MCFT,SAASC,IAAc,CACpC,IAAIC,EAAS,UAAU,cAEvB,OAAIA,GAAU,MAAQA,EAAO,QAAU,MAAM,QAAQA,EAAO,MAAM,EACzDA,EAAO,OAAO,IAAI,SAAUC,EAAM,CACvC,OAAOA,EAAK,MAAQ,IAAMA,EAAK,OACrC,CAAK,EAAE,KAAK,GAAG,EAGN,UAAU,SACnB,CCTe,SAASC,IAAmB,CACzC,MAAO,CAAC,iCAAiC,KAAKH,GAAa,EAC7D,CCCe,SAASI,GAAsB1rB,EAAS2rB,EAAcC,EAAiB,CAChFD,IAAiB,SACnBA,EAAe,IAGbC,IAAoB,SACtBA,EAAkB,IAGpB,IAAIC,EAAa7rB,EAAQ,wBACrB8rB,EAAS,EACTC,EAAS,EAETJ,GAAgBlB,GAAczqB,CAAO,IACvC8rB,EAAS9rB,EAAQ,YAAc,GAAIqrB,GAAMQ,EAAW,KAAK,EAAI7rB,EAAQ,aAAe,EACpF+rB,EAAS/rB,EAAQ,aAAe,GAAIqrB,GAAMQ,EAAW,MAAM,EAAI7rB,EAAQ,cAAgB,GAGzF,IAAI4qB,EAAOL,GAAUvqB,CAAO,EAAIqqB,GAAUrqB,CAAO,EAAI,OACjDgsB,EAAiBpB,EAAK,eAEtBqB,EAAmB,CAACR,GAAkB,GAAIG,EAC1CrsB,GAAKssB,EAAW,MAAQI,GAAoBD,EAAiBA,EAAe,WAAa,IAAMF,EAC/F1K,GAAKyK,EAAW,KAAOI,GAAoBD,EAAiBA,EAAe,UAAY,IAAMD,EAC7FG,EAAQL,EAAW,MAAQC,EAC3BK,EAASN,EAAW,OAASE,EACjC,MAAO,CACL,MAAOG,EACP,OAAQC,EACR,IAAK/K,EACL,MAAO7hB,EAAI2sB,EACX,OAAQ9K,EAAI+K,EACZ,KAAM5sB,EACN,EAAGA,EACH,EAAG6hB,CACP,CACA,CCrCe,SAASgL,GAAcpsB,EAAS,CAC7C,IAAI6rB,EAAaH,GAAsB1rB,CAAO,EAG1CksB,EAAQlsB,EAAQ,YAChBmsB,EAASnsB,EAAQ,aAErB,OAAI,KAAK,IAAI6rB,EAAW,MAAQK,CAAK,GAAK,IACxCA,EAAQL,EAAW,OAGjB,KAAK,IAAIA,EAAW,OAASM,CAAM,GAAK,IAC1CA,EAASN,EAAW,QAGf,CACL,EAAG7rB,EAAQ,WACX,EAAGA,EAAQ,UACX,MAAOksB,EACP,OAAQC,CACZ,CACA,CCvBe,SAASE,GAASC,EAAQtZ,EAAO,CAC9C,IAAIuZ,EAAWvZ,EAAM,aAAeA,EAAM,YAAW,EAErD,GAAIsZ,EAAO,SAAStZ,CAAK,EACvB,MAAO,GAEJ,GAAIuZ,GAAY7B,GAAa6B,CAAQ,EAAG,CACzC,IAAIhkB,EAAOyK,EAEX,EAAG,CACD,GAAIzK,GAAQ+jB,EAAO,WAAW/jB,CAAI,EAChC,MAAO,GAITA,EAAOA,EAAK,YAAcA,EAAK,WACxBA,GAIb,MAAO,EACT,CCrBe,SAASikB,GAAiBxsB,EAAS,CAChD,OAAOqqB,GAAUrqB,CAAO,EAAE,iBAAiBA,CAAO,CACpD,CCFe,SAASysB,GAAezsB,EAAS,CAC9C,MAAO,CAAC,QAAS,KAAM,IAAI,EAAE,QAAQoqB,GAAYpqB,CAAO,CAAC,GAAK,CAChE,CCFe,SAAS0sB,GAAmB1sB,EAAS,CAElD,QAASuqB,GAAUvqB,CAAO,EAAIA,EAAQ,cACtCA,EAAQ,WAAa,OAAO,UAAU,eACxC,CCFe,SAAS2sB,GAAc3sB,EAAS,CAC7C,OAAIoqB,GAAYpqB,CAAO,IAAM,OACpBA,EAMPA,EAAQ,cACRA,EAAQ,aACR0qB,GAAa1qB,CAAO,EAAIA,EAAQ,KAAO,OAEvC0sB,GAAmB1sB,CAAO,CAG9B,CCVA,SAAS4sB,GAAoB5sB,EAAS,CACpC,MAAI,CAACyqB,GAAczqB,CAAO,GAC1BwsB,GAAiBxsB,CAAO,EAAE,WAAa,QAC9B,KAGFA,EAAQ,YACjB,CAIA,SAAS6sB,GAAmB7sB,EAAS,CACnC,IAAI8sB,EAAY,WAAW,KAAKxB,GAAa,GACzCyB,EAAO,WAAW,KAAKzB,GAAa,GAExC,GAAIyB,GAAQtC,GAAczqB,CAAO,EAAG,CAElC,IAAIgtB,EAAaR,GAAiBxsB,CAAO,EAEzC,GAAIgtB,EAAW,WAAa,QAC1B,OAAO,KAIX,IAAIC,EAAcN,GAAc3sB,CAAO,EAMvC,IAJI0qB,GAAauC,CAAW,IAC1BA,EAAcA,EAAY,MAGrBxC,GAAcwC,CAAW,GAAK,CAAC,OAAQ,MAAM,EAAE,QAAQ7C,GAAY6C,CAAW,CAAC,EAAI,GAAG,CAC3F,IAAIC,EAAMV,GAAiBS,CAAW,EAItC,GAAIC,EAAI,YAAc,QAAUA,EAAI,cAAgB,QAAUA,EAAI,UAAY,SAAW,CAAC,YAAa,aAAa,EAAE,QAAQA,EAAI,UAAU,IAAM,IAAMJ,GAAaI,EAAI,aAAe,UAAYJ,GAAaI,EAAI,QAAUA,EAAI,SAAW,OAC5O,OAAOD,EAEPA,EAAcA,EAAY,WAI9B,OAAO,IACT,CAIe,SAASE,GAAgBntB,EAAS,CAI/C,QAHIotB,EAAS/C,GAAUrqB,CAAO,EAC1BqtB,EAAeT,GAAoB5sB,CAAO,EAEvCqtB,GAAgBZ,GAAeY,CAAY,GAAKb,GAAiBa,CAAY,EAAE,WAAa,UACjGA,EAAeT,GAAoBS,CAAY,EAGjD,OAAIA,IAAiBjD,GAAYiD,CAAY,IAAM,QAAUjD,GAAYiD,CAAY,IAAM,QAAUb,GAAiBa,CAAY,EAAE,WAAa,UACxID,EAGFC,GAAgBR,GAAmB7sB,CAAO,GAAKotB,CACxD,CCpEe,SAASE,GAAyB9D,EAAW,CAC1D,MAAO,CAAC,MAAO,QAAQ,EAAE,QAAQA,CAAS,GAAK,EAAI,IAAM,GAC3D,CCDO,SAAS+D,GAAOvV,EAAKzb,EAAO0b,EAAK,CACtC,OAAOuV,GAAQxV,EAAKyV,GAAQlxB,EAAO0b,CAAG,CAAC,CACzC,CACO,SAASyV,GAAe1V,EAAKzb,EAAO0b,EAAK,CAC9C,IAAIqK,EAAIiL,GAAOvV,EAAKzb,EAAO0b,CAAG,EAC9B,OAAOqK,EAAIrK,EAAMA,EAAMqK,CACzB,CCPe,SAASqL,IAAqB,CAC3C,MAAO,CACL,IAAK,EACL,MAAO,EACP,OAAQ,EACR,KAAM,CACV,CACA,CCNe,SAASC,GAAmBC,EAAe,CACxD,OAAO,OAAO,OAAO,GAAIF,GAAoB,EAAEE,CAAa,CAC9D,CCHe,SAASC,GAAgBvxB,EAAO+nB,EAAM,CACnD,OAAOA,EAAK,OAAO,SAAUyJ,EAASvtB,EAAK,CACzC,OAAAutB,EAAQvtB,CAAG,EAAIjE,EACRwxB,CACR,EAAE,CAAE,EACP,CCKA,IAAIC,GAAkB,SAAyBC,EAASxjB,EAAO,CAC7D,OAAAwjB,EAAU,OAAOA,GAAY,WAAaA,EAAQ,OAAO,OAAO,GAAIxjB,EAAM,MAAO,CAC/E,UAAWA,EAAM,SACrB,CAAG,CAAC,EAAIwjB,EACCL,GAAmB,OAAOK,GAAY,SAAWA,EAAUH,GAAgBG,EAAShF,EAAc,CAAC,CAC5G,EAEA,SAASiF,GAAMtD,EAAM,CACnB,IAAIuD,EAEA1jB,EAAQmgB,EAAK,MACb7hB,EAAO6hB,EAAK,KACZvwB,EAAUuwB,EAAK,QACfwD,EAAe3jB,EAAM,SAAS,MAC9B4jB,EAAgB5jB,EAAM,cAAc,cACpC6jB,EAAgBlD,GAAiB3gB,EAAM,SAAS,EAChD8jB,EAAOjB,GAAyBgB,CAAa,EAC7CE,EAAa,CAACntB,EAAM0nB,EAAK,EAAE,QAAQuF,CAAa,GAAK,EACrD/c,EAAMid,EAAa,SAAW,QAElC,GAAI,GAACJ,GAAgB,CAACC,GAItB,KAAIR,EAAgBG,GAAgB3zB,EAAQ,QAASoQ,CAAK,EACtDgkB,EAAYrC,GAAcgC,CAAY,EACtCM,EAAUH,IAAS,IAAMntB,EAAMC,EAC/BstB,EAAUJ,IAAS,IAAMzF,GAASC,GAClC6F,EAAUnkB,EAAM,MAAM,UAAU8G,CAAG,EAAI9G,EAAM,MAAM,UAAU8jB,CAAI,EAAIF,EAAcE,CAAI,EAAI9jB,EAAM,MAAM,OAAO8G,CAAG,EACjHsd,EAAYR,EAAcE,CAAI,EAAI9jB,EAAM,MAAM,UAAU8jB,CAAI,EAC5DO,EAAoB3B,GAAgBiB,CAAY,EAChDW,EAAaD,EAAoBP,IAAS,IAAMO,EAAkB,cAAgB,EAAIA,EAAkB,aAAe,EAAI,EAC3HE,EAAoBJ,EAAU,EAAIC,EAAY,EAG9C7W,EAAM6V,EAAca,CAAO,EAC3BzW,EAAM8W,EAAaN,EAAUld,CAAG,EAAIsc,EAAcc,CAAO,EACzDM,EAASF,EAAa,EAAIN,EAAUld,CAAG,EAAI,EAAIyd,EAC/ChuB,EAASusB,GAAOvV,EAAKiX,EAAQhX,CAAG,EAEhCiX,EAAWX,EACf9jB,EAAM,cAAc1B,CAAI,GAAKolB,EAAwB,GAAIA,EAAsBe,CAAQ,EAAIluB,EAAQmtB,EAAsB,aAAentB,EAASiuB,EAAQd,GAC3J,CAEA,SAASrD,GAAOC,EAAO,CACrB,IAAItgB,EAAQsgB,EAAM,MACd1wB,EAAU0wB,EAAM,QAChBoE,EAAmB90B,EAAQ,QAC3B+zB,EAAee,IAAqB,OAAS,sBAAwBA,EAErEf,GAAgB,OAKhB,OAAOA,GAAiB,WAC1BA,EAAe3jB,EAAM,SAAS,OAAO,cAAc2jB,CAAY,EAE3D,CAACA,IAKF/B,GAAS5hB,EAAM,SAAS,OAAQ2jB,CAAY,IAIjD3jB,EAAM,SAAS,MAAQ2jB,GACzB,CAGA,MAAegB,GAAA,CACb,KAAM,QACN,QAAS,GACT,MAAO,OACP,GAAIlB,GACJ,OAAQpD,GACR,SAAU,CAAC,eAAe,EAC1B,iBAAkB,CAAC,iBAAiB,CACtC,ECzFe,SAASuE,GAAa7F,EAAW,CAC9C,OAAOA,EAAU,MAAM,GAAG,EAAE,CAAC,CAC/B,CCOA,IAAI8F,GAAa,CACf,IAAK,OACL,MAAO,OACP,OAAQ,OACR,KAAM,MACR,EAIA,SAASC,GAAkB3E,EAAMjpB,EAAK,CACpC,IAAIpC,EAAIqrB,EAAK,EACTxJ,EAAIwJ,EAAK,EACT4E,EAAM7tB,EAAI,kBAAoB,EAClC,MAAO,CACL,EAAG0pB,GAAM9rB,EAAIiwB,CAAG,EAAIA,GAAO,EAC3B,EAAGnE,GAAMjK,EAAIoO,CAAG,EAAIA,GAAO,CAC/B,CACA,CAEO,SAASC,GAAY1E,EAAO,CACjC,IAAI2E,EAEAtG,EAAS2B,EAAM,OACf4E,EAAa5E,EAAM,WACnBvB,EAAYuB,EAAM,UAClB6E,EAAY7E,EAAM,UAClB8E,EAAU9E,EAAM,QAChBhpB,EAAWgpB,EAAM,SACjB+E,EAAkB/E,EAAM,gBACxBgF,EAAWhF,EAAM,SACjBiF,EAAejF,EAAM,aACrBkF,EAAUlF,EAAM,QAChBmF,EAAaL,EAAQ,EACrBtwB,EAAI2wB,IAAe,OAAS,EAAIA,EAChCC,EAAaN,EAAQ,EACrBzO,EAAI+O,IAAe,OAAS,EAAIA,EAEhCC,EAAQ,OAAOJ,GAAiB,WAAaA,EAAa,CAC5D,EAAGzwB,EACH,EAAG6hB,CACP,CAAG,EAAI,CACH,EAAG7hB,EACH,EAAG6hB,CACP,EAEE7hB,EAAI6wB,EAAM,EACVhP,EAAIgP,EAAM,EACV,IAAIC,EAAOR,EAAQ,eAAe,GAAG,EACjCS,EAAOT,EAAQ,eAAe,GAAG,EACjCU,EAAQlvB,EACRmvB,EAAQpvB,EACRO,EAAM,OAEV,GAAIouB,EAAU,CACZ,IAAI1C,EAAeF,GAAgB/D,CAAM,EACrCqH,EAAa,eACbC,EAAY,cAchB,GAZIrD,IAAiBhD,GAAUjB,CAAM,IACnCiE,EAAeX,GAAmBtD,CAAM,EAEpCoD,GAAiBa,CAAY,EAAE,WAAa,UAAYtrB,IAAa,aACvE0uB,EAAa,eACbC,EAAY,gBAKhBrD,EAAeA,EAEX7D,IAAcpoB,IAAQooB,IAAcnoB,GAAQmoB,IAAcT,KAAU6G,IAAcxX,GAAK,CACzFoY,EAAQ1H,GACR,IAAI6H,EAAUV,GAAW5C,IAAiB1rB,GAAOA,EAAI,eAAiBA,EAAI,eAAe,OACzF0rB,EAAaoD,CAAU,EACvBrP,GAAKuP,EAAUhB,EAAW,OAC1BvO,GAAK0O,EAAkB,EAAI,GAG7B,GAAItG,IAAcnoB,IAASmoB,IAAcpoB,GAAOooB,IAAcV,KAAW8G,IAAcxX,GAAK,CAC1FmY,EAAQxH,GACR,IAAI6H,EAAUX,GAAW5C,IAAiB1rB,GAAOA,EAAI,eAAiBA,EAAI,eAAe,MACzF0rB,EAAaqD,CAAS,EACtBnxB,GAAKqxB,EAAUjB,EAAW,MAC1BpwB,GAAKuwB,EAAkB,EAAI,IAI/B,IAAIe,EAAe,OAAO,OAAO,CAC/B,SAAU9uB,CACd,EAAKguB,GAAYT,EAAU,EAErBwB,EAAQd,IAAiB,GAAOT,GAAkB,CACpD,EAAGhwB,EACH,EAAG6hB,CACP,EAAKiJ,GAAUjB,CAAM,CAAC,EAAI,CACtB,EAAG7pB,EACH,EAAG6hB,CACP,EAKE,GAHA7hB,EAAIuxB,EAAM,EACV1P,EAAI0P,EAAM,EAENhB,EAAiB,CACnB,IAAIiB,EAEJ,OAAO,OAAO,OAAO,CAAE,EAAEF,GAAeE,EAAiB,CAAE,EAAEA,EAAeP,CAAK,EAAIF,EAAO,IAAM,GAAIS,EAAeR,CAAK,EAAIF,EAAO,IAAM,GAAIU,EAAe,WAAapvB,EAAI,kBAAoB,IAAM,EAAI,aAAepC,EAAI,OAAS6hB,EAAI,MAAQ,eAAiB7hB,EAAI,OAAS6hB,EAAI,SAAU2P,IAGnS,OAAO,OAAO,OAAO,CAAE,EAAEF,GAAenB,EAAkB,CAAE,EAAEA,EAAgBc,CAAK,EAAIF,EAAOlP,EAAI,KAAO,GAAIsO,EAAgBa,CAAK,EAAIF,EAAO9wB,EAAI,KAAO,GAAImwB,EAAgB,UAAY,GAAIA,EAAe,CAC7M,CAEA,SAASsB,GAAcC,EAAO,CAC5B,IAAIxmB,EAAQwmB,EAAM,MACd52B,EAAU42B,EAAM,QAChBC,EAAwB72B,EAAQ,gBAChCy1B,EAAkBoB,IAA0B,OAAS,GAAOA,EAC5DC,EAAoB92B,EAAQ,SAC5B01B,EAAWoB,IAAsB,OAAS,GAAOA,EACjDC,EAAwB/2B,EAAQ,aAChC21B,EAAeoB,IAA0B,OAAS,GAAOA,EACzDP,EAAe,CACjB,UAAWzF,GAAiB3gB,EAAM,SAAS,EAC3C,UAAW4kB,GAAa5kB,EAAM,SAAS,EACvC,OAAQA,EAAM,SAAS,OACvB,WAAYA,EAAM,MAAM,OACxB,gBAAiBqlB,EACjB,QAASrlB,EAAM,QAAQ,WAAa,OACxC,EAEMA,EAAM,cAAc,eAAiB,OACvCA,EAAM,OAAO,OAAS,OAAO,OAAO,GAAIA,EAAM,OAAO,OAAQglB,GAAY,OAAO,OAAO,GAAIoB,EAAc,CACvG,QAASpmB,EAAM,cAAc,cAC7B,SAAUA,EAAM,QAAQ,SACxB,SAAUslB,EACV,aAAcC,CACf,EAAC,CAAC,GAGDvlB,EAAM,cAAc,OAAS,OAC/BA,EAAM,OAAO,MAAQ,OAAO,OAAO,GAAIA,EAAM,OAAO,MAAOglB,GAAY,OAAO,OAAO,GAAIoB,EAAc,CACrG,QAASpmB,EAAM,cAAc,MAC7B,SAAU,WACV,SAAU,GACV,aAAculB,CACf,EAAC,CAAC,GAGLvlB,EAAM,WAAW,OAAS,OAAO,OAAO,GAAIA,EAAM,WAAW,OAAQ,CACnE,wBAAyBA,EAAM,SACnC,CAAG,CACH,CAGA,MAAe4mB,GAAA,CACb,KAAM,gBACN,QAAS,GACT,MAAO,cACP,GAAIL,GACJ,KAAM,CAAE,CACV,ECtKA,IAAInc,GAAU,CACZ,QAAS,EACX,EAEA,SAASiW,GAAOF,EAAM,CACpB,IAAIngB,EAAQmgB,EAAK,MACbvhB,EAAWuhB,EAAK,SAChBvwB,EAAUuwB,EAAK,QACf0G,EAAkBj3B,EAAQ,OAC1Bk3B,EAASD,IAAoB,OAAS,GAAOA,EAC7CE,EAAkBn3B,EAAQ,OAC1Bo3B,EAASD,IAAoB,OAAS,GAAOA,EAC7CpE,EAAS/C,GAAU5f,EAAM,SAAS,MAAM,EACxCinB,EAAgB,GAAG,OAAOjnB,EAAM,cAAc,UAAWA,EAAM,cAAc,MAAM,EAEvF,OAAI8mB,GACFG,EAAc,QAAQ,SAAUC,EAAc,CAC5CA,EAAa,iBAAiB,SAAUtoB,EAAS,OAAQwL,EAAO,CACtE,CAAK,EAGC4c,GACFrE,EAAO,iBAAiB,SAAU/jB,EAAS,OAAQwL,EAAO,EAGrD,UAAY,CACb0c,GACFG,EAAc,QAAQ,SAAUC,EAAc,CAC5CA,EAAa,oBAAoB,SAAUtoB,EAAS,OAAQwL,EAAO,CAC3E,CAAO,EAGC4c,GACFrE,EAAO,oBAAoB,SAAU/jB,EAAS,OAAQwL,EAAO,CAEnE,CACA,CAGA,MAAe+c,GAAA,CACb,KAAM,iBACN,QAAS,GACT,MAAO,QACP,GAAI,UAAc,CAAE,EACpB,OAAQ9G,GACR,KAAM,CAAE,CACV,EChDA,IAAI+G,GAAO,CACT,KAAM,QACN,MAAO,OACP,OAAQ,MACR,IAAK,QACP,EACe,SAASC,GAAqBtI,EAAW,CACtD,OAAOA,EAAU,QAAQ,yBAA0B,SAAUuI,EAAS,CACpE,OAAOF,GAAKE,CAAO,CACvB,CAAG,CACH,CCVA,IAAIF,GAAO,CACT,MAAO,MACP,IAAK,OACP,EACe,SAASG,GAA8BxI,EAAW,CAC/D,OAAOA,EAAU,QAAQ,aAAc,SAAUuI,EAAS,CACxD,OAAOF,GAAKE,CAAO,CACvB,CAAG,CACH,CCPe,SAASE,GAAgB3iB,EAAM,CAC5C,IAAI3N,EAAM0oB,GAAU/a,CAAI,EACpB4iB,EAAavwB,EAAI,YACjBwwB,EAAYxwB,EAAI,YACpB,MAAO,CACL,WAAYuwB,EACZ,UAAWC,CACf,CACA,CCNe,SAASC,GAAoBpyB,EAAS,CAQnD,OAAO0rB,GAAsBgB,GAAmB1sB,CAAO,CAAC,EAAE,KAAOiyB,GAAgBjyB,CAAO,EAAE,UAC5F,CCRe,SAASqyB,GAAgBryB,EAASsyB,EAAU,CACzD,IAAI3wB,EAAM0oB,GAAUrqB,CAAO,EACvB7B,EAAOuuB,GAAmB1sB,CAAO,EACjCgsB,EAAiBrqB,EAAI,eACrBuqB,EAAQ/tB,EAAK,YACbguB,EAAShuB,EAAK,aACdoB,EAAI,EACJ6hB,EAAI,EAER,GAAI4K,EAAgB,CAClBE,EAAQF,EAAe,MACvBG,EAASH,EAAe,OACxB,IAAIuG,EAAiB9G,MAEjB8G,GAAkB,CAACA,GAAkBD,IAAa,WACpD/yB,EAAIysB,EAAe,WACnB5K,EAAI4K,EAAe,WAIvB,MAAO,CACL,MAAOE,EACP,OAAQC,EACR,EAAG5sB,EAAI6yB,GAAoBpyB,CAAO,EAClC,EAAGohB,CACP,CACA,CCvBe,SAASoR,GAAgBxyB,EAAS,CAC/C,IAAIyyB,EAEAt0B,EAAOuuB,GAAmB1sB,CAAO,EACjC0yB,EAAYT,GAAgBjyB,CAAO,EACnCyL,GAAQgnB,EAAwBzyB,EAAQ,gBAAkB,KAAO,OAASyyB,EAAsB,KAChGvG,EAAQjU,GAAI9Z,EAAK,YAAaA,EAAK,YAAasN,EAAOA,EAAK,YAAc,EAAGA,EAAOA,EAAK,YAAc,CAAC,EACxG0gB,EAASlU,GAAI9Z,EAAK,aAAcA,EAAK,aAAcsN,EAAOA,EAAK,aAAe,EAAGA,EAAOA,EAAK,aAAe,CAAC,EAC7GlM,EAAI,CAACmzB,EAAU,WAAaN,GAAoBpyB,CAAO,EACvDohB,EAAI,CAACsR,EAAU,UAEnB,OAAIlG,GAAiB/gB,GAAQtN,CAAI,EAAE,YAAc,QAC/CoB,GAAK0Y,GAAI9Z,EAAK,YAAasN,EAAOA,EAAK,YAAc,CAAC,EAAIygB,GAGrD,CACL,MAAOA,EACP,OAAQC,EACR,EAAG5sB,EACH,EAAG6hB,CACP,CACA,CC3Be,SAASuR,GAAe3yB,EAAS,CAE9C,IAAI4yB,EAAoBpG,GAAiBxsB,CAAO,EAC5C6yB,EAAWD,EAAkB,SAC7BE,EAAYF,EAAkB,UAC9BG,EAAYH,EAAkB,UAElC,MAAO,6BAA6B,KAAKC,EAAWE,EAAYD,CAAS,CAC3E,CCLe,SAASE,GAAgB1jB,EAAM,CAC5C,MAAI,CAAC,OAAQ,OAAQ,WAAW,EAAE,QAAQ8a,GAAY9a,CAAI,CAAC,GAAK,EAEvDA,EAAK,cAAc,KAGxBmb,GAAcnb,CAAI,GAAKqjB,GAAerjB,CAAI,EACrCA,EAGF0jB,GAAgBrG,GAAcrd,CAAI,CAAC,CAC5C,CCJe,SAAS2jB,GAAkBjzB,EAASkzB,EAAM,CACvD,IAAIT,EAEAS,IAAS,SACXA,EAAO,IAGT,IAAIvB,EAAeqB,GAAgBhzB,CAAO,EACtCmzB,EAASxB,MAAmBc,EAAwBzyB,EAAQ,gBAAkB,KAAO,OAASyyB,EAAsB,MACpH9wB,EAAM0oB,GAAUsH,CAAY,EAC5BlX,EAAS0Y,EAAS,CAACxxB,CAAG,EAAE,OAAOA,EAAI,gBAAkB,GAAIgxB,GAAehB,CAAY,EAAIA,EAAe,CAAE,GAAIA,EAC7GyB,EAAcF,EAAK,OAAOzY,CAAM,EACpC,OAAO0Y,EAASC,EAChBA,EAAY,OAAOH,GAAkBtG,GAAclS,CAAM,CAAC,CAAC,CAC7D,CCzBe,SAAS4Y,GAAiBC,EAAM,CAC7C,OAAO,OAAO,OAAO,CAAE,EAAEA,EAAM,CAC7B,KAAMA,EAAK,EACX,IAAKA,EAAK,EACV,MAAOA,EAAK,EAAIA,EAAK,MACrB,OAAQA,EAAK,EAAIA,EAAK,MAC1B,CAAG,CACH,CCQA,SAASC,GAA2BvzB,EAASsyB,EAAU,CACrD,IAAIgB,EAAO5H,GAAsB1rB,EAAS,GAAOsyB,IAAa,OAAO,EACrE,OAAAgB,EAAK,IAAMA,EAAK,IAAMtzB,EAAQ,UAC9BszB,EAAK,KAAOA,EAAK,KAAOtzB,EAAQ,WAChCszB,EAAK,OAASA,EAAK,IAAMtzB,EAAQ,aACjCszB,EAAK,MAAQA,EAAK,KAAOtzB,EAAQ,YACjCszB,EAAK,MAAQtzB,EAAQ,YACrBszB,EAAK,OAAStzB,EAAQ,aACtBszB,EAAK,EAAIA,EAAK,KACdA,EAAK,EAAIA,EAAK,IACPA,CACT,CAEA,SAASE,GAA2BxzB,EAASyzB,EAAgBnB,EAAU,CACrE,OAAOmB,IAAmBtK,GAAWkK,GAAiBhB,GAAgBryB,EAASsyB,CAAQ,CAAC,EAAI/H,GAAUkJ,CAAc,EAAIF,GAA2BE,EAAgBnB,CAAQ,EAAIe,GAAiBb,GAAgB9F,GAAmB1sB,CAAO,CAAC,CAAC,CAC9O,CAKA,SAAS0zB,GAAmB1zB,EAAS,CACnC,IAAIkpB,EAAkB+J,GAAkBtG,GAAc3sB,CAAO,CAAC,EAC1D2zB,EAAoB,CAAC,WAAY,OAAO,EAAE,QAAQnH,GAAiBxsB,CAAO,EAAE,QAAQ,GAAK,EACzF4zB,EAAiBD,GAAqBlJ,GAAczqB,CAAO,EAAImtB,GAAgBntB,CAAO,EAAIA,EAE9F,OAAKuqB,GAAUqJ,CAAc,EAKtB1K,EAAgB,OAAO,SAAUuK,EAAgB,CACtD,OAAOlJ,GAAUkJ,CAAc,GAAKpH,GAASoH,EAAgBG,CAAc,GAAKxJ,GAAYqJ,CAAc,IAAM,MACpH,CAAG,EANQ,EAOX,CAIe,SAASI,GAAgB7zB,EAAS8zB,EAAUC,EAAczB,EAAU,CACjF,IAAI0B,EAAsBF,IAAa,kBAAoBJ,GAAmB1zB,CAAO,EAAI,CAAE,EAAC,OAAO8zB,CAAQ,EACvG5K,EAAkB,GAAG,OAAO8K,EAAqB,CAACD,CAAY,CAAC,EAC/DE,EAAsB/K,EAAgB,CAAC,EACvCgL,EAAehL,EAAgB,OAAO,SAAUiL,EAASV,EAAgB,CAC3E,IAAIH,EAAOE,GAA2BxzB,EAASyzB,EAAgBnB,CAAQ,EACvE,OAAA6B,EAAQ,IAAMlc,GAAIqb,EAAK,IAAKa,EAAQ,GAAG,EACvCA,EAAQ,MAAQnc,GAAIsb,EAAK,MAAOa,EAAQ,KAAK,EAC7CA,EAAQ,OAASnc,GAAIsb,EAAK,OAAQa,EAAQ,MAAM,EAChDA,EAAQ,KAAOlc,GAAIqb,EAAK,KAAMa,EAAQ,IAAI,EACnCA,CACR,EAAEX,GAA2BxzB,EAASi0B,EAAqB3B,CAAQ,CAAC,EACrE,OAAA4B,EAAa,MAAQA,EAAa,MAAQA,EAAa,KACvDA,EAAa,OAASA,EAAa,OAASA,EAAa,IACzDA,EAAa,EAAIA,EAAa,KAC9BA,EAAa,EAAIA,EAAa,IACvBA,CACT,CCjEe,SAASE,GAAexJ,EAAM,CAC3C,IAAIvB,EAAYuB,EAAK,UACjB5qB,EAAU4qB,EAAK,QACfpB,EAAYoB,EAAK,UACjB0D,EAAgB9E,EAAY4B,GAAiB5B,CAAS,EAAI,KAC1DoG,EAAYpG,EAAY6F,GAAa7F,CAAS,EAAI,KAClD6K,EAAUhL,EAAU,EAAIA,EAAU,MAAQ,EAAIrpB,EAAQ,MAAQ,EAC9Ds0B,EAAUjL,EAAU,EAAIA,EAAU,OAAS,EAAIrpB,EAAQ,OAAS,EAChE6vB,EAEJ,OAAQvB,EAAa,CACnB,KAAKltB,EACHyuB,EAAU,CACR,EAAGwE,EACH,EAAGhL,EAAU,EAAIrpB,EAAQ,MACjC,EACM,MAEF,KAAK8oB,GACH+G,EAAU,CACR,EAAGwE,EACH,EAAGhL,EAAU,EAAIA,EAAU,MACnC,EACM,MAEF,KAAKN,GACH8G,EAAU,CACR,EAAGxG,EAAU,EAAIA,EAAU,MAC3B,EAAGiL,CACX,EACM,MAEF,KAAKjzB,EACHwuB,EAAU,CACR,EAAGxG,EAAU,EAAIrpB,EAAQ,MACzB,EAAGs0B,CACX,EACM,MAEF,QACEzE,EAAU,CACR,EAAGxG,EAAU,EACb,EAAGA,EAAU,CACrB,CACG,CAED,IAAIkL,EAAWjG,EAAgBhB,GAAyBgB,CAAa,EAAI,KAEzE,GAAIiG,GAAY,KAAM,CACpB,IAAIhjB,EAAMgjB,IAAa,IAAM,SAAW,QAExC,OAAQ3E,EAAS,CACf,KAAK1hB,GACH2hB,EAAQ0E,CAAQ,EAAI1E,EAAQ0E,CAAQ,GAAKlL,EAAU9X,CAAG,EAAI,EAAIvR,EAAQuR,CAAG,EAAI,GAC7E,MAEF,KAAK6G,GACHyX,EAAQ0E,CAAQ,EAAI1E,EAAQ0E,CAAQ,GAAKlL,EAAU9X,CAAG,EAAI,EAAIvR,EAAQuR,CAAG,EAAI,GAC7E,KAGH,EAGH,OAAOse,CACT,CC3De,SAAS2E,GAAe/pB,EAAOpQ,EAAS,CACjDA,IAAY,SACdA,EAAU,IAGZ,IAAIo6B,EAAWp6B,EACXq6B,EAAqBD,EAAS,UAC9BjL,EAAYkL,IAAuB,OAASjqB,EAAM,UAAYiqB,EAC9DC,EAAoBF,EAAS,SAC7BnC,EAAWqC,IAAsB,OAASlqB,EAAM,SAAWkqB,EAC3DC,EAAoBH,EAAS,SAC7BX,EAAWc,IAAsB,OAAS1L,GAAkB0L,EAC5DC,EAAwBJ,EAAS,aACjCV,EAAec,IAA0B,OAAS1L,GAAW0L,EAC7DC,EAAwBL,EAAS,eACjCM,EAAiBD,IAA0B,OAAS1L,GAAS0L,EAC7DE,EAAuBP,EAAS,YAChCQ,EAAcD,IAAyB,OAAS,GAAQA,EACxDE,EAAmBT,EAAS,QAC5BxG,EAAUiH,IAAqB,OAAS,EAAIA,EAC5CrH,EAAgBD,GAAmB,OAAOK,GAAY,SAAWA,EAAUH,GAAgBG,EAAShF,EAAc,CAAC,EACnHkM,EAAaJ,IAAmB3L,GAASC,GAAYD,GACrDuG,EAAallB,EAAM,MAAM,OACzBzK,EAAUyK,EAAM,SAASwqB,EAAcE,EAAaJ,CAAc,EAClEK,EAAqBvB,GAAgBtJ,GAAUvqB,CAAO,EAAIA,EAAUA,EAAQ,gBAAkB0sB,GAAmBjiB,EAAM,SAAS,MAAM,EAAGqpB,EAAUC,EAAczB,CAAQ,EACzK+C,EAAsB3J,GAAsBjhB,EAAM,SAAS,SAAS,EACpE4jB,EAAgB+F,GAAe,CACjC,UAAWiB,EACX,QAAS1F,EACT,SAAU,WACV,UAAWnG,CACf,CAAG,EACG8L,EAAmBjC,GAAiB,OAAO,OAAO,GAAI1D,EAAYtB,CAAa,CAAC,EAChFkH,EAAoBR,IAAmB3L,GAASkM,EAAmBD,EAGnEG,EAAkB,CACpB,IAAKJ,EAAmB,IAAMG,EAAkB,IAAM1H,EAAc,IACpE,OAAQ0H,EAAkB,OAASH,EAAmB,OAASvH,EAAc,OAC7E,KAAMuH,EAAmB,KAAOG,EAAkB,KAAO1H,EAAc,KACvE,MAAO0H,EAAkB,MAAQH,EAAmB,MAAQvH,EAAc,KAC9E,EACM4H,EAAahrB,EAAM,cAAc,OAErC,GAAIsqB,IAAmB3L,IAAUqM,EAAY,CAC3C,IAAIz0B,EAASy0B,EAAWjM,CAAS,EACjC,OAAO,KAAKgM,CAAe,EAAE,QAAQ,SAAUh1B,EAAK,CAClD,IAAIk1B,EAAW,CAAC3M,GAAOD,EAAM,EAAE,QAAQtoB,CAAG,GAAK,EAAI,EAAI,GACnD+tB,GAAO,CAACntB,EAAK0nB,EAAM,EAAE,QAAQtoB,CAAG,GAAK,EAAI,IAAM,IACnDg1B,EAAgBh1B,CAAG,GAAKQ,EAAOutB,EAAI,EAAImH,CAC7C,CAAK,EAGH,OAAOF,CACT,CC5De,SAASG,GAAqBlrB,EAAOpQ,EAAS,CACvDA,IAAY,SACdA,EAAU,IAGZ,IAAIo6B,EAAWp6B,EACXmvB,EAAYiL,EAAS,UACrBX,EAAWW,EAAS,SACpBV,EAAeU,EAAS,aACxBxG,EAAUwG,EAAS,QACnBmB,EAAiBnB,EAAS,eAC1BoB,EAAwBpB,EAAS,sBACjCqB,EAAwBD,IAA0B,OAASE,GAAgBF,EAC3EjG,EAAYP,GAAa7F,CAAS,EAClCC,EAAamG,EAAYgG,EAAiBtM,GAAsBA,GAAoB,OAAO,SAAUE,EAAW,CAClH,OAAO6F,GAAa7F,CAAS,IAAMoG,CACpC,GAAI3G,GACD+M,EAAoBvM,EAAW,OAAO,SAAUD,EAAW,CAC7D,OAAOsM,EAAsB,QAAQtM,CAAS,GAAK,CACvD,CAAG,EAEGwM,EAAkB,SAAW,IAC/BA,EAAoBvM,GAItB,IAAIwM,EAAYD,EAAkB,OAAO,SAAUzM,EAAKC,EAAW,CACjE,OAAAD,EAAIC,CAAS,EAAIgL,GAAe/pB,EAAO,CACrC,UAAW+e,EACX,SAAUsK,EACV,aAAcC,EACd,QAAS9F,CACf,CAAK,EAAE7C,GAAiB5B,CAAS,CAAC,EACvBD,CACR,EAAE,CAAE,GACL,OAAO,OAAO,KAAK0M,CAAS,EAAE,KAAK,SAAUjkB,EAAGC,EAAG,CACjD,OAAOgkB,EAAUjkB,CAAC,EAAIikB,EAAUhkB,CAAC,CACrC,CAAG,CACH,CClCA,SAASikB,GAA8B1M,EAAW,CAChD,GAAI4B,GAAiB5B,CAAS,IAAMR,GAClC,MAAO,GAGT,IAAImN,EAAoBrE,GAAqBtI,CAAS,EACtD,MAAO,CAACwI,GAA8BxI,CAAS,EAAG2M,EAAmBnE,GAA8BmE,CAAiB,CAAC,CACvH,CAEA,SAASC,GAAKxL,EAAM,CAClB,IAAIngB,EAAQmgB,EAAK,MACbvwB,EAAUuwB,EAAK,QACf7hB,EAAO6hB,EAAK,KAEhB,GAAI,CAAAngB,EAAM,cAAc1B,CAAI,EAAE,MAoC9B,SAhCIstB,EAAoBh8B,EAAQ,SAC5Bi8B,EAAgBD,IAAsB,OAAS,GAAOA,EACtDE,EAAmBl8B,EAAQ,QAC3Bm8B,EAAeD,IAAqB,OAAS,GAAOA,EACpDE,EAA8Bp8B,EAAQ,mBACtC4zB,EAAU5zB,EAAQ,QAClBy5B,EAAWz5B,EAAQ,SACnB05B,EAAe15B,EAAQ,aACvB46B,EAAc56B,EAAQ,YACtBq8B,EAAwBr8B,EAAQ,eAChCu7B,EAAiBc,IAA0B,OAAS,GAAOA,EAC3DZ,EAAwBz7B,EAAQ,sBAChCs8B,EAAqBlsB,EAAM,QAAQ,UACnC6jB,EAAgBlD,GAAiBuL,CAAkB,EACnDC,EAAkBtI,IAAkBqI,EACpCE,EAAqBJ,IAAgCG,GAAmB,CAAChB,EAAiB,CAAC9D,GAAqB6E,CAAkB,CAAC,EAAIT,GAA8BS,CAAkB,GACvLlN,EAAa,CAACkN,CAAkB,EAAE,OAAOE,CAAkB,EAAE,OAAO,SAAUtN,GAAKC,GAAW,CAChG,OAAOD,GAAI,OAAO6B,GAAiB5B,EAAS,IAAMR,GAAO2M,GAAqBlrB,EAAO,CACnF,UAAW+e,GACX,SAAUsK,EACV,aAAcC,EACd,QAAS9F,EACT,eAAgB2H,EAChB,sBAAuBE,CAC7B,CAAK,EAAItM,EAAS,CACf,EAAE,CAAE,GACDsN,EAAgBrsB,EAAM,MAAM,UAC5BklB,EAAallB,EAAM,MAAM,OACzBssB,EAAY,IAAI,IAChBC,EAAqB,GACrBC,EAAwBxN,EAAW,CAAC,EAE/BtvB,EAAI,EAAGA,EAAIsvB,EAAW,OAAQtvB,IAAK,CAC1C,IAAIqvB,EAAYC,EAAWtvB,CAAC,EAExB+8B,EAAiB9L,GAAiB5B,CAAS,EAE3C2N,EAAmB9H,GAAa7F,CAAS,IAAMtb,GAC/CsgB,EAAa,CAACptB,EAAK0nB,EAAM,EAAE,QAAQoO,CAAc,GAAK,EACtD3lB,GAAMid,EAAa,QAAU,SAC7BqE,EAAW2B,GAAe/pB,EAAO,CACnC,UAAW+e,EACX,SAAUsK,EACV,aAAcC,EACd,YAAakB,EACb,QAAShH,CACf,CAAK,EACGmJ,GAAoB5I,EAAa2I,EAAmBpO,GAAQ1nB,EAAO81B,EAAmBrO,GAAS1nB,EAE/F01B,EAAcvlB,EAAG,EAAIoe,EAAWpe,EAAG,IACrC6lB,GAAoBtF,GAAqBsF,EAAiB,GAG5D,IAAIC,GAAmBvF,GAAqBsF,EAAiB,EACzDE,GAAS,GAUb,GARIhB,GACFgB,GAAO,KAAKzE,EAASqE,CAAc,GAAK,CAAC,EAGvCV,GACFc,GAAO,KAAKzE,EAASuE,EAAiB,GAAK,EAAGvE,EAASwE,EAAgB,GAAK,CAAC,EAG3EC,GAAO,MAAM,SAAUC,GAAO,CAChC,OAAOA,EACb,CAAK,EAAG,CACFN,EAAwBzN,EACxBwN,EAAqB,GACrB,MAGFD,EAAU,IAAIvN,EAAW8N,EAAM,EAGjC,GAAIN,EAqBF,QAnBIQ,GAAiB5B,EAAiB,EAAI,EAEtC6B,GAAQ,SAAeC,GAAI,CAC7B,IAAIC,GAAmBlO,EAAW,KAAK,SAAUD,GAAW,CAC1D,IAAI8N,GAASP,EAAU,IAAIvN,EAAS,EAEpC,GAAI8N,GACF,OAAOA,GAAO,MAAM,EAAGI,EAAE,EAAE,MAAM,SAAUH,GAAO,CAChD,OAAOA,EACnB,CAAW,CAEX,CAAO,EAED,GAAII,GACF,OAAAV,EAAwBU,GACjB,OAEf,EAEaD,GAAKF,GAAgBE,GAAK,EAAGA,KAAM,CAC1C,IAAIE,GAAOH,GAAMC,EAAE,EAEnB,GAAIE,KAAS,QAAS,MAItBntB,EAAM,YAAcwsB,IACtBxsB,EAAM,cAAc1B,CAAI,EAAE,MAAQ,GAClC0B,EAAM,UAAYwsB,EAClBxsB,EAAM,MAAQ,IAElB,CAGA,MAAeotB,GAAA,CACb,KAAM,OACN,QAAS,GACT,MAAO,OACP,GAAIzB,GACJ,iBAAkB,CAAC,QAAQ,EAC3B,KAAM,CACJ,MAAO,EACR,CACH,EC/IA,SAAS0B,GAAejF,EAAUS,EAAMyE,EAAkB,CACxD,OAAIA,IAAqB,SACvBA,EAAmB,CACjB,EAAG,EACH,EAAG,CACT,GAGS,CACL,IAAKlF,EAAS,IAAMS,EAAK,OAASyE,EAAiB,EACnD,MAAOlF,EAAS,MAAQS,EAAK,MAAQyE,EAAiB,EACtD,OAAQlF,EAAS,OAASS,EAAK,OAASyE,EAAiB,EACzD,KAAMlF,EAAS,KAAOS,EAAK,MAAQyE,EAAiB,CACxD,CACA,CAEA,SAASC,GAAsBnF,EAAU,CACvC,MAAO,CAACzxB,EAAK2nB,GAAOD,GAAQznB,CAAI,EAAE,KAAK,SAAU42B,EAAM,CACrD,OAAOpF,EAASoF,CAAI,GAAK,CAC7B,CAAG,CACH,CAEA,SAASC,GAAKtN,EAAM,CAClB,IAAIngB,EAAQmgB,EAAK,MACb7hB,EAAO6hB,EAAK,KACZkM,EAAgBrsB,EAAM,MAAM,UAC5BklB,EAAallB,EAAM,MAAM,OACzBstB,EAAmBttB,EAAM,cAAc,gBACvC0tB,EAAoB3D,GAAe/pB,EAAO,CAC5C,eAAgB,WACpB,CAAG,EACG2tB,EAAoB5D,GAAe/pB,EAAO,CAC5C,YAAa,EACjB,CAAG,EACG4tB,EAA2BP,GAAeK,EAAmBrB,CAAa,EAC1EwB,EAAsBR,GAAeM,EAAmBzI,EAAYoI,CAAgB,EACpFQ,EAAoBP,GAAsBK,CAAwB,EAClEG,EAAmBR,GAAsBM,CAAmB,EAChE7tB,EAAM,cAAc1B,CAAI,EAAI,CAC1B,yBAA0BsvB,EAC1B,oBAAqBC,EACrB,kBAAmBC,EACnB,iBAAkBC,CACtB,EACE/tB,EAAM,WAAW,OAAS,OAAO,OAAO,GAAIA,EAAM,WAAW,OAAQ,CACnE,+BAAgC8tB,EAChC,sBAAuBC,CAC3B,CAAG,CACH,CAGA,MAAeC,GAAA,CACb,KAAM,OACN,QAAS,GACT,MAAO,OACP,iBAAkB,CAAC,iBAAiB,EACpC,GAAIP,EACN,ECzDO,SAASQ,GAAwBlP,EAAWmP,EAAO33B,EAAQ,CAChE,IAAIstB,EAAgBlD,GAAiB5B,CAAS,EAC1CoP,EAAiB,CAACv3B,EAAMD,CAAG,EAAE,QAAQktB,CAAa,GAAK,EAAI,GAAK,EAEhE1D,EAAO,OAAO5pB,GAAW,WAAaA,EAAO,OAAO,OAAO,CAAE,EAAE23B,EAAO,CACxE,UAAWnP,CACZ,EAAC,EAAIxoB,EACF63B,EAAWjO,EAAK,CAAC,EACjBroB,EAAWqoB,EAAK,CAAC,EAErB,OAAAiO,EAAWA,GAAY,EACvBt2B,GAAYA,GAAY,GAAKq2B,EACtB,CAACv3B,EAAM0nB,EAAK,EAAE,QAAQuF,CAAa,GAAK,EAAI,CACjD,EAAG/rB,EACH,EAAGs2B,CACP,EAAM,CACF,EAAGA,EACH,EAAGt2B,CACP,CACA,CAEA,SAASvB,GAAO+pB,EAAO,CACrB,IAAItgB,EAAQsgB,EAAM,MACd1wB,EAAU0wB,EAAM,QAChBhiB,EAAOgiB,EAAM,KACb+N,EAAkBz+B,EAAQ,OAC1B2G,EAAS83B,IAAoB,OAAS,CAAC,EAAG,CAAC,EAAIA,EAC/CjvB,EAAO4f,GAAW,OAAO,SAAUF,EAAKC,EAAW,CACrD,OAAAD,EAAIC,CAAS,EAAIkP,GAAwBlP,EAAW/e,EAAM,MAAOzJ,CAAM,EAChEuoB,CACR,EAAE,CAAE,GACDwP,EAAwBlvB,EAAKY,EAAM,SAAS,EAC5ClL,EAAIw5B,EAAsB,EAC1B3X,EAAI2X,EAAsB,EAE1BtuB,EAAM,cAAc,eAAiB,OACvCA,EAAM,cAAc,cAAc,GAAKlL,EACvCkL,EAAM,cAAc,cAAc,GAAK2W,GAGzC3W,EAAM,cAAc1B,CAAI,EAAIc,CAC9B,CAGA,MAAemvB,GAAA,CACb,KAAM,SACN,QAAS,GACT,MAAO,OACP,SAAU,CAAC,eAAe,EAC1B,GAAIh4B,EACN,ECnDA,SAASqtB,GAAczD,EAAM,CAC3B,IAAIngB,EAAQmgB,EAAK,MACb7hB,EAAO6hB,EAAK,KAKhBngB,EAAM,cAAc1B,CAAI,EAAIqrB,GAAe,CACzC,UAAW3pB,EAAM,MAAM,UACvB,QAASA,EAAM,MAAM,OACrB,SAAU,WACV,UAAWA,EAAM,SACrB,CAAG,CACH,CAGA,MAAewuB,GAAA,CACb,KAAM,gBACN,QAAS,GACT,MAAO,OACP,GAAI5K,GACJ,KAAM,CAAE,CACV,ECxBe,SAAS6K,GAAW3K,EAAM,CACvC,OAAOA,IAAS,IAAM,IAAM,GAC9B,CCUA,SAAS4K,GAAgBvO,EAAM,CAC7B,IAAIngB,EAAQmgB,EAAK,MACbvwB,EAAUuwB,EAAK,QACf7hB,EAAO6hB,EAAK,KACZyL,EAAoBh8B,EAAQ,SAC5Bi8B,EAAgBD,IAAsB,OAAS,GAAOA,EACtDE,EAAmBl8B,EAAQ,QAC3Bm8B,EAAeD,IAAqB,OAAS,GAAQA,EACrDzC,EAAWz5B,EAAQ,SACnB05B,EAAe15B,EAAQ,aACvB46B,EAAc56B,EAAQ,YACtB4zB,EAAU5zB,EAAQ,QAClB++B,EAAkB/+B,EAAQ,OAC1Bg/B,EAASD,IAAoB,OAAS,GAAOA,EAC7CE,EAAwBj/B,EAAQ,aAChCk/B,EAAeD,IAA0B,OAAS,EAAIA,EACtDzG,EAAW2B,GAAe/pB,EAAO,CACnC,SAAUqpB,EACV,aAAcC,EACd,QAAS9F,EACT,YAAagH,CACjB,CAAG,EACG3G,EAAgBlD,GAAiB3gB,EAAM,SAAS,EAChDmlB,EAAYP,GAAa5kB,EAAM,SAAS,EACxCmsB,EAAkB,CAAChH,EACnB2E,EAAWjH,GAAyBgB,CAAa,EACjDkL,EAAUN,GAAW3E,CAAQ,EAC7BlG,EAAgB5jB,EAAM,cAAc,cACpCqsB,EAAgBrsB,EAAM,MAAM,UAC5BklB,EAAallB,EAAM,MAAM,OACzBgvB,EAAoB,OAAOF,GAAiB,WAAaA,EAAa,OAAO,OAAO,GAAI9uB,EAAM,MAAO,CACvG,UAAWA,EAAM,SACrB,CAAG,CAAC,EAAI8uB,EACFG,EAA8B,OAAOD,GAAsB,SAAW,CACxE,SAAUA,EACV,QAASA,CACb,EAAM,OAAO,OAAO,CAChB,SAAU,EACV,QAAS,CACV,EAAEA,CAAiB,EAChBE,EAAsBlvB,EAAM,cAAc,OAASA,EAAM,cAAc,OAAOA,EAAM,SAAS,EAAI,KACjGZ,EAAO,CACT,EAAG,EACH,EAAG,CACP,EAEE,GAAKwkB,EAIL,IAAIiI,EAAe,CACjB,IAAIsD,EAEAC,EAAWtF,IAAa,IAAMnzB,EAAMC,EACpCy4B,GAAUvF,IAAa,IAAMzL,GAASC,GACtCxX,EAAMgjB,IAAa,IAAM,SAAW,QACpCvzB,GAASqtB,EAAckG,CAAQ,EAC/Bvc,GAAMhX,GAAS6xB,EAASgH,CAAQ,EAChC5hB,GAAMjX,GAAS6xB,EAASiH,EAAO,EAC/BC,GAAWV,EAAS,CAAC1J,EAAWpe,CAAG,EAAI,EAAI,EAC3CyoB,GAASpK,IAAc1hB,GAAQ4oB,EAAcvlB,CAAG,EAAIoe,EAAWpe,CAAG,EAClE0oB,GAASrK,IAAc1hB,GAAQ,CAACyhB,EAAWpe,CAAG,EAAI,CAACulB,EAAcvlB,CAAG,EAGpE6c,GAAe3jB,EAAM,SAAS,MAC9BgkB,GAAY4K,GAAUjL,GAAehC,GAAcgC,EAAY,EAAI,CACrE,MAAO,EACP,OAAQ,CACd,EACQ8L,GAAqBzvB,EAAM,cAAc,kBAAkB,EAAIA,EAAM,cAAc,kBAAkB,EAAE,QAAUkjB,GAAkB,EACnIwM,GAAkBD,GAAmBL,CAAQ,EAC7CO,GAAkBF,GAAmBJ,EAAO,EAM5CO,GAAW9M,GAAO,EAAGuJ,EAAcvlB,CAAG,EAAGkd,GAAUld,CAAG,CAAC,EACvD+oB,GAAY1D,EAAkBE,EAAcvlB,CAAG,EAAI,EAAIwoB,GAAWM,GAAWF,GAAkBT,EAA4B,SAAWM,GAASK,GAAWF,GAAkBT,EAA4B,SACxMa,GAAY3D,EAAkB,CAACE,EAAcvlB,CAAG,EAAI,EAAIwoB,GAAWM,GAAWD,GAAkBV,EAA4B,SAAWO,GAASI,GAAWD,GAAkBV,EAA4B,SACzM5K,GAAoBrkB,EAAM,SAAS,OAAS0iB,GAAgB1iB,EAAM,SAAS,KAAK,EAChF+vB,GAAe1L,GAAoByF,IAAa,IAAMzF,GAAkB,WAAa,EAAIA,GAAkB,YAAc,EAAI,EAC7H2L,IAAuBb,EAAwBD,GAAuB,KAAO,OAASA,EAAoBpF,CAAQ,IAAM,KAAOqF,EAAwB,EACvJc,GAAY15B,GAASs5B,GAAYG,GAAsBD,GACvDG,GAAY35B,GAASu5B,GAAYE,GACjCG,GAAkBrN,GAAO8L,EAAS5L,GAAQzV,GAAK0iB,EAAS,EAAI1iB,GAAKhX,GAAQq4B,EAAS7L,GAAQvV,GAAK0iB,EAAS,EAAI1iB,EAAG,EACnHoW,EAAckG,CAAQ,EAAIqG,GAC1B/wB,EAAK0qB,CAAQ,EAAIqG,GAAkB55B,GAGrC,GAAIw1B,EAAc,CAChB,IAAIqE,GAEAC,GAAYvG,IAAa,IAAMnzB,EAAMC,EAErC05B,GAAWxG,IAAa,IAAMzL,GAASC,GAEvCiS,GAAU3M,EAAcmL,CAAO,EAE/ByB,GAAOzB,IAAY,IAAM,SAAW,QAEpC0B,GAAOF,GAAUnI,EAASiI,EAAS,EAEnCK,GAAOH,GAAUnI,EAASkI,EAAQ,EAElCK,GAAe,CAACh6B,EAAKC,CAAI,EAAE,QAAQitB,CAAa,IAAM,GAEtD+M,IAAwBR,GAAyBlB,GAAuB,KAAO,OAASA,EAAoBH,CAAO,IAAM,KAAOqB,GAAyB,EAEzJS,GAAaF,GAAeF,GAAOF,GAAUlE,EAAcmE,EAAI,EAAItL,EAAWsL,EAAI,EAAII,GAAuB3B,EAA4B,QAEzI6B,GAAaH,GAAeJ,GAAUlE,EAAcmE,EAAI,EAAItL,EAAWsL,EAAI,EAAII,GAAuB3B,EAA4B,QAAUyB,GAE5IK,GAAmBnC,GAAU+B,GAAe1N,GAAe4N,GAAYN,GAASO,EAAU,EAAIhO,GAAO8L,EAASiC,GAAaJ,GAAMF,GAAS3B,EAASkC,GAAaJ,EAAI,EAExK9M,EAAcmL,CAAO,EAAIgC,GACzB3xB,EAAK2vB,CAAO,EAAIgC,GAAmBR,GAGrCvwB,EAAM,cAAc1B,CAAI,EAAIc,EAC9B,CAGA,MAAe4xB,GAAA,CACb,KAAM,kBACN,QAAS,GACT,MAAO,OACP,GAAItC,GACJ,iBAAkB,CAAC,QAAQ,CAC7B,EC7Ie,SAASuC,GAAqB17B,EAAS,CACpD,MAAO,CACL,WAAYA,EAAQ,WACpB,UAAWA,EAAQ,SACvB,CACA,CCDe,SAAS27B,GAAcrsB,EAAM,CAC1C,OAAIA,IAAS+a,GAAU/a,CAAI,GAAK,CAACmb,GAAcnb,CAAI,EAC1C2iB,GAAgB3iB,CAAI,EAEpBosB,GAAqBpsB,CAAI,CAEpC,CCDA,SAASssB,GAAgB57B,EAAS,CAChC,IAAIszB,EAAOtzB,EAAQ,wBACf8rB,EAAST,GAAMiI,EAAK,KAAK,EAAItzB,EAAQ,aAAe,EACpD+rB,EAASV,GAAMiI,EAAK,MAAM,EAAItzB,EAAQ,cAAgB,EAC1D,OAAO8rB,IAAW,GAAKC,IAAW,CACpC,CAIe,SAAS8P,GAAiBC,EAAyBzO,EAAc4C,EAAS,CACnFA,IAAY,SACdA,EAAU,IAGZ,IAAI8L,EAA0BtR,GAAc4C,CAAY,EACpD2O,EAAuBvR,GAAc4C,CAAY,GAAKuO,GAAgBvO,CAAY,EAClF4O,EAAkBvP,GAAmBW,CAAY,EACjDiG,EAAO5H,GAAsBoQ,EAAyBE,EAAsB/L,CAAO,EACnFsB,EAAS,CACX,WAAY,EACZ,UAAW,CACf,EACM1B,EAAU,CACZ,EAAG,EACH,EAAG,CACP,EAEE,OAAIkM,GAA2B,CAACA,GAA2B,CAAC9L,MACtD7F,GAAYiD,CAAY,IAAM,QAClCsF,GAAesJ,CAAe,KAC5B1K,EAASoK,GAActO,CAAY,GAGjC5C,GAAc4C,CAAY,GAC5BwC,EAAUnE,GAAsB2B,EAAc,EAAI,EAClDwC,EAAQ,GAAKxC,EAAa,WAC1BwC,EAAQ,GAAKxC,EAAa,WACjB4O,IACTpM,EAAQ,EAAIuC,GAAoB6J,CAAe,IAI5C,CACL,EAAG3I,EAAK,KAAO/B,EAAO,WAAa1B,EAAQ,EAC3C,EAAGyD,EAAK,IAAM/B,EAAO,UAAY1B,EAAQ,EACzC,MAAOyD,EAAK,MACZ,OAAQA,EAAK,MACjB,CACA,CCvDA,SAAS4I,GAAMC,EAAW,CACxB,IAAIjwB,EAAM,IAAI,IACVkwB,EAAU,IAAI,IACd//B,EAAS,GACb8/B,EAAU,QAAQ,SAAUE,EAAU,CACpCnwB,EAAI,IAAImwB,EAAS,KAAMA,CAAQ,CACnC,CAAG,EAED,SAASC,EAAKD,EAAU,CACtBD,EAAQ,IAAIC,EAAS,IAAI,EACzB,IAAIE,EAAW,GAAG,OAAOF,EAAS,UAAY,GAAIA,EAAS,kBAAoB,EAAE,EACjFE,EAAS,QAAQ,SAAUC,EAAK,CAC9B,GAAI,CAACJ,EAAQ,IAAII,CAAG,EAAG,CACrB,IAAIC,EAAcvwB,EAAI,IAAIswB,CAAG,EAEzBC,GACFH,EAAKG,CAAW,EAG1B,CAAK,EACDpgC,EAAO,KAAKggC,CAAQ,CACrB,CAED,OAAAF,EAAU,QAAQ,SAAUE,EAAU,CAC/BD,EAAQ,IAAIC,EAAS,IAAI,GAE5BC,EAAKD,CAAQ,CAEnB,CAAG,EACMhgC,CACT,CAEe,SAASqgC,GAAeP,EAAW,CAEhD,IAAIQ,EAAmBT,GAAMC,CAAS,EAEtC,OAAOhS,GAAe,OAAO,SAAUZ,EAAKqT,EAAO,CACjD,OAAOrT,EAAI,OAAOoT,EAAiB,OAAO,SAAUN,EAAU,CAC5D,OAAOA,EAAS,QAAUO,CAC3B,EAAC,CACH,EAAE,CAAE,EACP,CC3Ce,SAASjhC,GAASR,EAAI,CACnC,IAAI0hC,EACJ,OAAO,UAAY,CACjB,OAAKA,IACHA,EAAU,IAAI,QAAQ,SAAU7hC,EAAS,CACvC,QAAQ,UAAU,KAAK,UAAY,CACjC6hC,EAAU,OACV7hC,EAAQG,EAAE,CAAE,CACtB,CAAS,CACT,CAAO,GAGI0hC,CACX,CACA,CCde,SAASC,GAAYX,EAAW,CAC7C,IAAIY,EAASZ,EAAU,OAAO,SAAUY,EAAQh1B,EAAS,CACvD,IAAIi1B,EAAWD,EAAOh1B,EAAQ,IAAI,EAClC,OAAAg1B,EAAOh1B,EAAQ,IAAI,EAAIi1B,EAAW,OAAO,OAAO,GAAIA,EAAUj1B,EAAS,CACrE,QAAS,OAAO,OAAO,GAAIi1B,EAAS,QAASj1B,EAAQ,OAAO,EAC5D,KAAM,OAAO,OAAO,GAAIi1B,EAAS,KAAMj1B,EAAQ,IAAI,CACpD,GAAIA,EACEg1B,CACR,EAAE,CAAE,GAEL,OAAO,OAAO,KAAKA,CAAM,EAAE,IAAI,SAAUv8B,EAAK,CAC5C,OAAOu8B,EAAOv8B,CAAG,CACrB,CAAG,CACH,CCJA,IAAIy8B,GAAkB,CACpB,UAAW,SACX,UAAW,CAAE,EACb,SAAU,UACZ,EAEA,SAASC,IAAmB,CAC1B,QAASjC,EAAO,UAAU,OAAQ3gC,EAAO,IAAI,MAAM2gC,CAAI,EAAGkC,EAAO,EAAGA,EAAOlC,EAAMkC,IAC/E7iC,EAAK6iC,CAAI,EAAI,UAAUA,CAAI,EAG7B,MAAO,CAAC7iC,EAAK,KAAK,SAAU0F,EAAS,CACnC,MAAO,EAAEA,GAAW,OAAOA,EAAQ,uBAA0B,WACjE,CAAG,CACH,CAEO,SAASo9B,GAAgBC,EAAkB,CAC5CA,IAAqB,SACvBA,EAAmB,IAGrB,IAAIC,EAAoBD,EACpBE,EAAwBD,EAAkB,iBAC1CE,EAAmBD,IAA0B,OAAS,CAAE,EAAGA,EAC3DE,EAAyBH,EAAkB,eAC3CI,EAAiBD,IAA2B,OAASR,GAAkBQ,EAC3E,OAAO,SAAsBpU,EAAWD,EAAQ/uB,EAAS,CACnDA,IAAY,SACdA,EAAUqjC,GAGZ,IAAIjzB,EAAQ,CACV,UAAW,SACX,iBAAkB,CAAE,EACpB,QAAS,OAAO,OAAO,GAAIwyB,GAAiBS,CAAc,EAC1D,cAAe,CAAE,EACjB,SAAU,CACR,UAAWrU,EACX,OAAQD,CACT,EACD,WAAY,CAAE,EACd,OAAQ,CAAE,CAChB,EACQuU,EAAmB,GACnBC,EAAc,GACdv0B,EAAW,CACb,MAAOoB,EACP,WAAY,SAAoBozB,EAAkB,CAChD,IAAIxjC,EAAU,OAAOwjC,GAAqB,WAAaA,EAAiBpzB,EAAM,OAAO,EAAIozB,EACzFC,IACArzB,EAAM,QAAU,OAAO,OAAO,GAAIizB,EAAgBjzB,EAAM,QAASpQ,CAAO,EACxEoQ,EAAM,cAAgB,CACpB,UAAW8f,GAAUlB,CAAS,EAAI4J,GAAkB5J,CAAS,EAAIA,EAAU,eAAiB4J,GAAkB5J,EAAU,cAAc,EAAI,CAAE,EAC5I,OAAQ4J,GAAkB7J,CAAM,CAC1C,EAGQ,IAAIuT,EAAmBD,GAAeI,GAAY,GAAG,OAAOU,EAAkB/yB,EAAM,QAAQ,SAAS,CAAC,CAAC,EAEvG,OAAAA,EAAM,iBAAmBkyB,EAAiB,OAAO,SAAU1b,EAAG,CAC5D,OAAOA,EAAE,OACnB,CAAS,EACD8c,IACO10B,EAAS,QACjB,EAMD,YAAa,UAAuB,CAClC,GAAI,CAAAu0B,EAIJ,KAAII,EAAkBvzB,EAAM,SACxB4e,EAAY2U,EAAgB,UAC5B5U,EAAS4U,EAAgB,OAG7B,GAAKd,GAAiB7T,EAAWD,CAAM,EAKvC,CAAA3e,EAAM,MAAQ,CACZ,UAAWoxB,GAAiBxS,EAAW8D,GAAgB/D,CAAM,EAAG3e,EAAM,QAAQ,WAAa,OAAO,EAClG,OAAQ2hB,GAAchD,CAAM,CACtC,EAMQ3e,EAAM,MAAQ,GACdA,EAAM,UAAYA,EAAM,QAAQ,UAKhCA,EAAM,iBAAiB,QAAQ,SAAU4xB,EAAU,CACjD,OAAO5xB,EAAM,cAAc4xB,EAAS,IAAI,EAAI,OAAO,OAAO,CAAE,EAAEA,EAAS,IAAI,CACrF,CAAS,EAED,QAASr0B,EAAQ,EAAGA,EAAQyC,EAAM,iBAAiB,OAAQzC,IAAS,CAClE,GAAIyC,EAAM,QAAU,GAAM,CACxBA,EAAM,MAAQ,GACdzC,EAAQ,GACR,SAGF,IAAIi2B,EAAwBxzB,EAAM,iBAAiBzC,CAAK,EACpD7M,EAAK8iC,EAAsB,GAC3BC,EAAyBD,EAAsB,QAC/CxJ,EAAWyJ,IAA2B,OAAS,CAAE,EAAGA,EACpDn1B,EAAOk1B,EAAsB,KAE7B,OAAO9iC,GAAO,aAChBsP,EAAQtP,EAAG,CACT,MAAOsP,EACP,QAASgqB,EACT,KAAM1rB,EACN,SAAUM,CACX,IAAKoB,KAGX,EAGD,OAAQ9O,GAAS,UAAY,CAC3B,OAAO,IAAI,QAAQ,SAAUX,EAAS,CACpCqO,EAAS,YAAW,EACpBrO,EAAQyP,CAAK,CACvB,CAAS,CACT,CAAO,EACD,QAAS,UAAmB,CAC1BqzB,IACAF,EAAc,EACf,CACP,EAEI,GAAI,CAACV,GAAiB7T,EAAWD,CAAM,EACrC,OAAO/f,EAGTA,EAAS,WAAWhP,CAAO,EAAE,KAAK,SAAUoQ,EAAO,CAC7C,CAACmzB,GAAevjC,EAAQ,eAC1BA,EAAQ,cAAcoQ,CAAK,CAEnC,CAAK,EAMD,SAASszB,GAAqB,CAC5BtzB,EAAM,iBAAiB,QAAQ,SAAUmgB,EAAM,CAC7C,IAAI7hB,EAAO6hB,EAAK,KACZuT,EAAevT,EAAK,QACpBvwB,EAAU8jC,IAAiB,OAAS,CAAE,EAAGA,EACzCrT,EAASF,EAAK,OAElB,GAAI,OAAOE,GAAW,WAAY,CAChC,IAAIsT,EAAYtT,EAAO,CACrB,MAAOrgB,EACP,KAAM1B,EACN,SAAUM,EACV,QAAShP,CACrB,CAAW,EAEGgkC,EAAS,UAAkB,GAE/BV,EAAiB,KAAKS,GAAaC,CAAM,EAEnD,CAAO,CACF,CAED,SAASP,GAAyB,CAChCH,EAAiB,QAAQ,SAAUxiC,EAAI,CACrC,OAAOA,EAAE,CACjB,CAAO,EACDwiC,EAAmB,EACpB,CAED,OAAOt0B,CACX,CACA,CACO,IAAIi1B,GAA4BlB,GAAe,EC/LlDI,GAAmB,CAAC5L,GAAgBvD,GAAe2C,GAAerG,EAAW,EAC7E2T,GAA4BlB,GAAgB,CAC9C,iBAAkBI,EACpB,CAAC,ECEGA,GAAmB,CAAC5L,GAAgBvD,GAAe2C,GAAerG,GAAa3pB,GAAQo1B,GAAM+C,GAAiBjL,GAAOgK,EAAI,EACzHoG,GAA4BlB,GAAgB,CAC9C,iBAAkBI,EACpB,CAAC,+lBCbD;AAAA;AAAA;AAAA;AAAA,IAkBA,MAAMe,GAAa,IAAI,IACjBC,GAAO,CACX,IAAIx+B,EAASQ,EAAK6I,EAAU,CACrBk1B,GAAW,IAAIv+B,CAAO,GACzBu+B,GAAW,IAAIv+B,EAAS,IAAI,GAAK,EAEnC,MAAMy+B,EAAcF,GAAW,IAAIv+B,CAAO,EAI1C,GAAI,CAACy+B,EAAY,IAAIj+B,CAAG,GAAKi+B,EAAY,OAAS,EAAG,CAEnD,QAAQ,MAAM,+EAA+E,MAAM,KAAKA,EAAY,KAAM,GAAE,CAAC,IAAI,EACjI,OAEFA,EAAY,IAAIj+B,EAAK6I,CAAQ,CAC9B,EACD,IAAIrJ,EAASQ,EAAK,CAChB,OAAI+9B,GAAW,IAAIv+B,CAAO,GACjBu+B,GAAW,IAAIv+B,CAAO,EAAE,IAAIQ,CAAG,GAAK,IAG9C,EACD,OAAOR,EAASQ,EAAK,CACnB,GAAI,CAAC+9B,GAAW,IAAIv+B,CAAO,EACzB,OAEF,MAAMy+B,EAAcF,GAAW,IAAIv+B,CAAO,EAC1Cy+B,EAAY,OAAOj+B,CAAG,EAGlBi+B,EAAY,OAAS,GACvBF,GAAW,OAAOv+B,CAAO,CAE5B,CACH,EASMsD,GAAU,IACVo7B,GAA0B,IAC1BC,GAAiB,gBAOjBC,GAAgBC,IAChBA,GAAY,OAAO,KAAO,OAAO,IAAI,SAEvCA,EAAWA,EAAS,QAAQ,gBAAiB,CAACpd,EAAOze,IAAO,IAAI,IAAI,OAAOA,CAAE,GAAG,GAE3E67B,GAIHC,GAAS5iC,GACTA,GAAW,KACN,GAAGA,IAEL,OAAO,UAAU,SAAS,KAAKA,CAAM,EAAE,MAAM,aAAa,EAAE,CAAC,EAAE,YAAW,EAO7EkH,GAASC,GAAU,CACvB,GACEA,GAAU,KAAK,MAAM,KAAK,OAAM,EAAKC,EAAO,QACrC,SAAS,eAAeD,CAAM,GACvC,OAAOA,CACT,EACM07B,GAAmC/+B,GAAW,CAClD,GAAI,CAACA,EACH,MAAO,GAIT,GAAI,CACF,mBAAAg/B,EACA,gBAAAC,CACJ,EAAM,OAAO,iBAAiBj/B,CAAO,EACnC,MAAMk/B,EAA0B,OAAO,WAAWF,CAAkB,EAC9DG,EAAuB,OAAO,WAAWF,CAAe,EAG9D,MAAI,CAACC,GAA2B,CAACC,EACxB,GAITH,EAAqBA,EAAmB,MAAM,GAAG,EAAE,CAAC,EACpDC,EAAkBA,EAAgB,MAAM,GAAG,EAAE,CAAC,GACtC,OAAO,WAAWD,CAAkB,EAAI,OAAO,WAAWC,CAAe,GAAKP,GACxF,EACMU,GAAuBp/B,GAAW,CACtCA,EAAQ,cAAc,IAAI,MAAM2+B,EAAc,CAAC,CACjD,EACMpU,GAAYruB,GACZ,CAACA,GAAU,OAAOA,GAAW,SACxB,IAEL,OAAOA,EAAO,OAAW,MAC3BA,EAASA,EAAO,CAAC,GAEZ,OAAOA,EAAO,SAAa,KAE9BmjC,GAAanjC,GAEbquB,GAAUruB,CAAM,EACXA,EAAO,OAASA,EAAO,CAAC,EAAIA,EAEjC,OAAOA,GAAW,UAAYA,EAAO,OAAS,EACzC,SAAS,cAAc0iC,GAAc1iC,CAAM,CAAC,EAE9C,KAEHojC,GAAYt/B,GAAW,CAC3B,GAAI,CAACuqB,GAAUvqB,CAAO,GAAKA,EAAQ,eAAgB,EAAC,SAAW,EAC7D,MAAO,GAET,MAAMu/B,EAAmB,iBAAiBv/B,CAAO,EAAE,iBAAiB,YAAY,IAAM,UAEhFw/B,EAAgBx/B,EAAQ,QAAQ,qBAAqB,EAC3D,GAAI,CAACw/B,EACH,OAAOD,EAET,GAAIC,IAAkBx/B,EAAS,CAC7B,MAAMy/B,EAAUz/B,EAAQ,QAAQ,SAAS,EAIzC,GAHIy/B,GAAWA,EAAQ,aAAeD,GAGlCC,IAAY,KACd,MAAO,GAGX,OAAOF,CACT,EACMG,GAAa1/B,GACb,CAACA,GAAWA,EAAQ,WAAa,KAAK,cAGtCA,EAAQ,UAAU,SAAS,UAAU,EAChC,GAEL,OAAOA,EAAQ,SAAa,IACvBA,EAAQ,SAEVA,EAAQ,aAAa,UAAU,GAAKA,EAAQ,aAAa,UAAU,IAAM,QAE5E2/B,GAAiB3/B,GAAW,CAChC,GAAI,CAAC,SAAS,gBAAgB,aAC5B,OAAO,KAIT,GAAI,OAAOA,EAAQ,aAAgB,WAAY,CAC7C,MAAM6H,EAAO7H,EAAQ,cACrB,OAAO6H,aAAgB,WAAaA,EAAO,KAE7C,OAAI7H,aAAmB,WACdA,EAIJA,EAAQ,WAGN2/B,GAAe3/B,EAAQ,UAAU,EAF/B,IAGX,EACM4/B,GAAO,IAAM,GAUbC,GAAS7/B,GAAW,CACxBA,EAAQ,YACV,EAEM8/B,GAAY,IACZ,OAAO,QAAU,CAAC,SAAS,KAAK,aAAa,mBAAmB,EAC3D,OAAO,OAET,KAEHC,GAA4B,GAC5BC,GAAqBp9B,GAAY,CACjC,SAAS,aAAe,WAErBm9B,GAA0B,QAC7B,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,UAAWn9B,KAAYm9B,GACrBn9B,GAEV,CAAO,EAEHm9B,GAA0B,KAAKn9B,CAAQ,GAEvCA,GAEJ,EACMq9B,GAAQ,IAAM,SAAS,gBAAgB,MAAQ,MAC/CC,GAAqBC,GAAU,CACnCH,GAAmB,IAAM,CACvB,MAAMI,EAAIN,KAEV,GAAIM,EAAG,CACL,MAAMr3B,EAAOo3B,EAAO,KACdE,EAAqBD,EAAE,GAAGr3B,CAAI,EACpCq3B,EAAE,GAAGr3B,CAAI,EAAIo3B,EAAO,gBACpBC,EAAE,GAAGr3B,CAAI,EAAE,YAAco3B,EACzBC,EAAE,GAAGr3B,CAAI,EAAE,WAAa,KACtBq3B,EAAE,GAAGr3B,CAAI,EAAIs3B,EACNF,EAAO,iBAGtB,CAAG,CACH,EACMG,EAAU,CAACC,EAAkBjmC,EAAO,GAAI6f,EAAeomB,IACpD,OAAOA,GAAqB,WAAaA,EAAiB,GAAGjmC,CAAI,EAAI6f,EAExEqmB,GAAyB,CAAC59B,EAAU69B,EAAmBC,EAAoB,KAAS,CACxF,GAAI,CAACA,EAAmB,CACtBJ,EAAQ19B,CAAQ,EAChB,OAEF,MAAM+9B,EAAkB,EAClBC,EAAmB7B,GAAiC0B,CAAiB,EAAIE,EAC/E,IAAIE,EAAS,GACb,MAAMnzB,EAAU,CAAC,CACf,OAAA+M,CACJ,IAAQ,CACAA,IAAWgmB,IAGfI,EAAS,GACTJ,EAAkB,oBAAoB9B,GAAgBjxB,CAAO,EAC7D4yB,EAAQ19B,CAAQ,EACpB,EACE69B,EAAkB,iBAAiB9B,GAAgBjxB,CAAO,EAC1D,WAAW,IAAM,CACVmzB,GACHzB,GAAqBqB,CAAiB,CAEzC,EAAEG,CAAgB,CACrB,EAWME,GAAuB,CAAC5N,EAAM6N,EAAeC,EAAeC,IAAmB,CACnF,MAAMC,EAAahO,EAAK,OACxB,IAAIlrB,EAAQkrB,EAAK,QAAQ6N,CAAa,EAItC,OAAI/4B,IAAU,GACL,CAACg5B,GAAiBC,EAAiB/N,EAAKgO,EAAa,CAAC,EAAIhO,EAAK,CAAC,GAEzElrB,GAASg5B,EAAgB,EAAI,GACzBC,IACFj5B,GAASA,EAAQk5B,GAAcA,GAE1BhO,EAAK,KAAK,IAAI,EAAG,KAAK,IAAIlrB,EAAOk5B,EAAa,CAAC,CAAC,CAAC,EAC1D,EAcMC,GAAiB,qBACjBC,GAAiB,OACjBC,GAAgB,SAChBC,GAAgB,GACtB,IAAIC,GAAW,EACf,MAAMC,GAAe,CACnB,WAAY,YACZ,WAAY,UACd,EACMC,GAAe,IAAI,IAAI,CAAC,QAAS,WAAY,UAAW,YAAa,cAAe,aAAc,iBAAkB,YAAa,WAAY,YAAa,cAAe,YAAa,UAAW,WAAY,QAAS,oBAAqB,aAAc,YAAa,WAAY,cAAe,cAAe,cAAe,YAAa,eAAgB,gBAAiB,eAAgB,gBAAiB,aAAc,QAAS,OAAQ,SAAU,QAAS,SAAU,SAAU,UAAW,WAAY,OAAQ,SAAU,eAAgB,SAAU,OAAQ,mBAAoB,mBAAoB,QAAS,QAAS,QAAQ,CAAC,EAMxmB,SAASC,GAAa1hC,EAAS2hC,EAAK,CAClC,OAAOA,GAAO,GAAGA,MAAQJ,QAAgBvhC,EAAQ,UAAYuhC,IAC/D,CACA,SAASK,GAAiB5hC,EAAS,CACjC,MAAM2hC,EAAMD,GAAa1hC,CAAO,EAChC,OAAAA,EAAQ,SAAW2hC,EACnBL,GAAcK,CAAG,EAAIL,GAAcK,CAAG,GAAK,GACpCL,GAAcK,CAAG,CAC1B,CACA,SAASE,GAAiB7hC,EAAS7E,EAAI,CACrC,OAAO,SAASuS,EAAQxL,EAAO,CAC7B,OAAA4/B,GAAW5/B,EAAO,CAChB,eAAgBlC,CACtB,CAAK,EACG0N,EAAQ,QACVq0B,EAAa,IAAI/hC,EAASkC,EAAM,KAAM/G,CAAE,EAEnCA,EAAG,MAAM6E,EAAS,CAACkC,CAAK,CAAC,CACpC,CACA,CACA,SAAS8/B,GAA2BhiC,EAAS6+B,EAAU1jC,EAAI,CACzD,OAAO,SAASuS,EAAQxL,EAAO,CAC7B,MAAM+/B,EAAcjiC,EAAQ,iBAAiB6+B,CAAQ,EACrD,OAAS,CACP,OAAApkB,CACN,EAAQvY,EAAOuY,GAAUA,IAAW,KAAMA,EAASA,EAAO,WACpD,UAAWynB,KAAcD,EACvB,GAAIC,IAAeznB,EAGnB,OAAAqnB,GAAW5/B,EAAO,CAChB,eAAgBuY,CAC1B,CAAS,EACG/M,EAAQ,QACVq0B,EAAa,IAAI/hC,EAASkC,EAAM,KAAM28B,EAAU1jC,CAAE,EAE7CA,EAAG,MAAMsf,EAAQ,CAACvY,CAAK,CAAC,CAGvC,CACA,CACA,SAASigC,GAAYhtB,EAAQitB,EAAUC,EAAqB,KAAM,CAChE,OAAO,OAAO,OAAOltB,CAAM,EAAE,KAAKjT,GAASA,EAAM,WAAakgC,GAAYlgC,EAAM,qBAAuBmgC,CAAkB,CAC3H,CACA,SAASC,GAAoBC,EAAmB70B,EAAS80B,EAAoB,CAC3E,MAAMC,EAAc,OAAO/0B,GAAY,SAEjC00B,EAAWK,EAAcD,EAAqB90B,GAAW80B,EAC/D,IAAIE,EAAYC,GAAaJ,CAAiB,EAC9C,OAAKd,GAAa,IAAIiB,CAAS,IAC7BA,EAAYH,GAEP,CAACE,EAAaL,EAAUM,CAAS,CAC1C,CACA,SAASE,GAAW5iC,EAASuiC,EAAmB70B,EAAS80B,EAAoBK,EAAQ,CACnF,GAAI,OAAON,GAAsB,UAAY,CAACviC,EAC5C,OAEF,GAAI,CAACyiC,EAAaL,EAAUM,CAAS,EAAIJ,GAAoBC,EAAmB70B,EAAS80B,CAAkB,EAIvGD,KAAqBf,KAQvBY,GAPqBjnC,GACZ,SAAU+G,EAAO,CACtB,GAAI,CAACA,EAAM,eAAiBA,EAAM,gBAAkBA,EAAM,gBAAkB,CAACA,EAAM,eAAe,SAASA,EAAM,aAAa,EAC5H,OAAO/G,EAAG,KAAK,KAAM+G,CAAK,CAEpC,GAE4BkgC,CAAQ,GAElC,MAAMjtB,EAASysB,GAAiB5hC,CAAO,EACjC8iC,EAAW3tB,EAAOutB,CAAS,IAAMvtB,EAAOutB,CAAS,EAAI,IACrDK,EAAmBZ,GAAYW,EAAUV,EAAUK,EAAc/0B,EAAU,IAAI,EACrF,GAAIq1B,EAAkB,CACpBA,EAAiB,OAASA,EAAiB,QAAUF,EACrD,OAEF,MAAMlB,EAAMD,GAAaU,EAAUG,EAAkB,QAAQpB,GAAgB,EAAE,CAAC,EAC1EhmC,EAAKsnC,EAAcT,GAA2BhiC,EAAS0N,EAAS00B,CAAQ,EAAIP,GAAiB7hC,EAASoiC,CAAQ,EACpHjnC,EAAG,mBAAqBsnC,EAAc/0B,EAAU,KAChDvS,EAAG,SAAWinC,EACdjnC,EAAG,OAAS0nC,EACZ1nC,EAAG,SAAWwmC,EACdmB,EAASnB,CAAG,EAAIxmC,EAChB6E,EAAQ,iBAAiB0iC,EAAWvnC,EAAIsnC,CAAW,CACrD,CACA,SAASO,GAAchjC,EAASmV,EAAQutB,EAAWh1B,EAAS20B,EAAoB,CAC9E,MAAMlnC,EAAKgnC,GAAYhtB,EAAOutB,CAAS,EAAGh1B,EAAS20B,CAAkB,EAChElnC,IAGL6E,EAAQ,oBAAoB0iC,EAAWvnC,EAAI,EAAQknC,CAAmB,EACtE,OAAOltB,EAAOutB,CAAS,EAAEvnC,EAAG,QAAQ,EACtC,CACA,SAAS8nC,GAAyBjjC,EAASmV,EAAQutB,EAAWt5B,EAAW,CACvE,MAAM85B,EAAoB/tB,EAAOutB,CAAS,GAAK,GAC/C,SAAW,CAACS,EAAYjhC,CAAK,IAAK,OAAO,QAAQghC,CAAiB,EAC5DC,EAAW,SAAS/5B,CAAS,GAC/B45B,GAAchjC,EAASmV,EAAQutB,EAAWxgC,EAAM,SAAUA,EAAM,kBAAkB,CAGxF,CACA,SAASygC,GAAazgC,EAAO,CAE3B,OAAAA,EAAQA,EAAM,QAAQk/B,GAAgB,EAAE,EACjCI,GAAat/B,CAAK,GAAKA,CAChC,CACA,MAAM6/B,EAAe,CACnB,GAAG/hC,EAASkC,EAAOwL,EAAS80B,EAAoB,CAC9CI,GAAW5iC,EAASkC,EAAOwL,EAAS80B,EAAoB,EAAK,CAC9D,EACD,IAAIxiC,EAASkC,EAAOwL,EAAS80B,EAAoB,CAC/CI,GAAW5iC,EAASkC,EAAOwL,EAAS80B,EAAoB,EAAI,CAC7D,EACD,IAAIxiC,EAASuiC,EAAmB70B,EAAS80B,EAAoB,CAC3D,GAAI,OAAOD,GAAsB,UAAY,CAACviC,EAC5C,OAEF,KAAM,CAACyiC,EAAaL,EAAUM,CAAS,EAAIJ,GAAoBC,EAAmB70B,EAAS80B,CAAkB,EACvGY,EAAcV,IAAcH,EAC5BptB,EAASysB,GAAiB5hC,CAAO,EACjCkjC,EAAoB/tB,EAAOutB,CAAS,GAAK,GACzCW,EAAcd,EAAkB,WAAW,GAAG,EACpD,GAAI,OAAOH,EAAa,IAAa,CAEnC,GAAI,CAAC,OAAO,KAAKc,CAAiB,EAAE,OAClC,OAEFF,GAAchjC,EAASmV,EAAQutB,EAAWN,EAAUK,EAAc/0B,EAAU,IAAI,EAChF,OAEF,GAAI21B,EACF,UAAWC,KAAgB,OAAO,KAAKnuB,CAAM,EAC3C8tB,GAAyBjjC,EAASmV,EAAQmuB,EAAcf,EAAkB,MAAM,CAAC,CAAC,EAGtF,SAAW,CAACgB,EAAarhC,CAAK,IAAK,OAAO,QAAQghC,CAAiB,EAAG,CACpE,MAAMC,EAAaI,EAAY,QAAQlC,GAAe,EAAE,GACpD,CAAC+B,GAAeb,EAAkB,SAASY,CAAU,IACvDH,GAAchjC,EAASmV,EAAQutB,EAAWxgC,EAAM,SAAUA,EAAM,kBAAkB,EAGvF,EACD,QAAQlC,EAASkC,EAAO5H,EAAM,CAC5B,GAAI,OAAO4H,GAAU,UAAY,CAAClC,EAChC,OAAO,KAET,MAAMogC,EAAIN,KACJ4C,EAAYC,GAAazgC,CAAK,EAC9BkhC,EAAclhC,IAAUwgC,EAC9B,IAAIc,EAAc,KACdC,EAAU,GACVC,EAAiB,GACjBC,EAAmB,GACnBP,GAAehD,IACjBoD,EAAcpD,EAAE,MAAMl+B,EAAO5H,CAAI,EACjC8lC,EAAEpgC,CAAO,EAAE,QAAQwjC,CAAW,EAC9BC,EAAU,CAACD,EAAY,uBACvBE,EAAiB,CAACF,EAAY,gCAC9BG,EAAmBH,EAAY,sBAEjC,MAAM9iB,EAAMohB,GAAW,IAAI,MAAM5/B,EAAO,CACtC,QAAAuhC,EACA,WAAY,EAClB,CAAK,EAAGnpC,CAAI,EACR,OAAIqpC,GACFjjB,EAAI,eAAc,EAEhBgjB,GACF1jC,EAAQ,cAAc0gB,CAAG,EAEvBA,EAAI,kBAAoB8iB,GAC1BA,EAAY,eAAc,EAErB9iB,CACR,CACH,EACA,SAASohB,GAAWhnC,EAAK8oC,EAAO,GAAI,CAClC,SAAW,CAACpjC,EAAKjE,CAAK,IAAK,OAAO,QAAQqnC,CAAI,EAC5C,GAAI,CACF9oC,EAAI0F,CAAG,EAAIjE,CACZ,MAAC,CACA,OAAO,eAAezB,EAAK0F,EAAK,CAC9B,aAAc,GACd,KAAM,CACJ,OAAOjE,CACR,CACT,CAAO,CACF,CAEH,OAAOzB,CACT,CASA,SAAS+oC,GAActnC,EAAO,CAC5B,GAAIA,IAAU,OACZ,MAAO,GAET,GAAIA,IAAU,QACZ,MAAO,GAET,GAAIA,IAAU,OAAOA,CAAK,EAAE,SAAQ,EAClC,OAAO,OAAOA,CAAK,EAErB,GAAIA,IAAU,IAAMA,IAAU,OAC5B,OAAO,KAET,GAAI,OAAOA,GAAU,SACnB,OAAOA,EAET,GAAI,CACF,OAAO,KAAK,MAAM,mBAAmBA,CAAK,CAAC,CAC5C,MAAC,CACA,OAAOA,CACR,CACH,CACA,SAASunC,GAAiBtjC,EAAK,CAC7B,OAAOA,EAAI,QAAQ,SAAUyH,GAAO,IAAIA,EAAI,eAAe,CAC7D,CACA,MAAM87B,GAAc,CAClB,iBAAiB/jC,EAASQ,EAAKjE,EAAO,CACpCyD,EAAQ,aAAa,WAAW8jC,GAAiBtjC,CAAG,IAAKjE,CAAK,CAC/D,EACD,oBAAoByD,EAASQ,EAAK,CAChCR,EAAQ,gBAAgB,WAAW8jC,GAAiBtjC,CAAG,GAAG,CAC3D,EACD,kBAAkBR,EAAS,CACzB,GAAI,CAACA,EACH,MAAO,GAET,MAAMmR,EAAa,GACb6yB,EAAS,OAAO,KAAKhkC,EAAQ,OAAO,EAAE,OAAOQ,GAAOA,EAAI,WAAW,IAAI,GAAK,CAACA,EAAI,WAAW,UAAU,CAAC,EAC7G,UAAWA,KAAOwjC,EAAQ,CACxB,IAAIC,EAAUzjC,EAAI,QAAQ,MAAO,EAAE,EACnCyjC,EAAUA,EAAQ,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAQ,MAAM,EAAGA,EAAQ,MAAM,EAC3E9yB,EAAW8yB,CAAO,EAAIJ,GAAc7jC,EAAQ,QAAQQ,CAAG,CAAC,EAE1D,OAAO2Q,CACR,EACD,iBAAiBnR,EAASQ,EAAK,CAC7B,OAAOqjC,GAAc7jC,EAAQ,aAAa,WAAW8jC,GAAiBtjC,CAAG,GAAG,CAAC,CAC9E,CACH,EAcA,IAAA0jC,GAAA,KAAa,CAEX,WAAW,SAAU,CACnB,MAAO,EACR,CACD,WAAW,aAAc,CACvB,MAAO,EACR,CACD,WAAW,MAAO,CAChB,MAAM,IAAI,MAAM,qEAAqE,CACtF,CACD,WAAWC,EAAQ,CACjB,OAAAA,EAAS,KAAK,gBAAgBA,CAAM,EACpCA,EAAS,KAAK,kBAAkBA,CAAM,EACtC,KAAK,iBAAiBA,CAAM,EACrBA,CACR,CACD,kBAAkBA,EAAQ,CACxB,OAAOA,CACR,CACD,gBAAgBA,EAAQnkC,EAAS,CAC/B,MAAMokC,EAAa7Z,GAAUvqB,CAAO,EAAI+jC,GAAY,iBAAiB/jC,EAAS,QAAQ,EAAI,GAE1F,MAAO,CACL,GAAG,KAAK,YAAY,QACpB,GAAI,OAAOokC,GAAe,SAAWA,EAAa,GAClD,GAAI7Z,GAAUvqB,CAAO,EAAI+jC,GAAY,kBAAkB/jC,CAAO,EAAI,GAClE,GAAI,OAAOmkC,GAAW,SAAWA,EAAS,EAChD,CACG,CACD,iBAAiBA,EAAQE,EAAc,KAAK,YAAY,YAAa,CACnE,SAAW,CAACnZ,EAAUoZ,CAAa,IAAK,OAAO,QAAQD,CAAW,EAAG,CACnE,MAAM9nC,EAAQ4nC,EAAOjZ,CAAQ,EACvBqZ,EAAYha,GAAUhuB,CAAK,EAAI,UAAYuiC,GAAOviC,CAAK,EAC7D,GAAI,CAAC,IAAI,OAAO+nC,CAAa,EAAE,KAAKC,CAAS,EAC3C,MAAM,IAAI,UAAU,GAAG,KAAK,YAAY,KAAK,YAAa,cAAarZ,qBAA4BqZ,yBAAiCD,KAAiB,EAG1J,CACH,EAcA,MAAME,GAAU,QAMhB,MAAMC,WAAsBC,EAAO,CACjC,YAAY1kC,EAASmkC,EAAQ,CAC3B,QACAnkC,EAAUq/B,GAAWr/B,CAAO,EACvBA,IAGL,KAAK,SAAWA,EAChB,KAAK,QAAU,KAAK,WAAWmkC,CAAM,EACrC3F,GAAK,IAAI,KAAK,SAAU,KAAK,YAAY,SAAU,IAAI,EACxD,CAGD,SAAU,CACRA,GAAK,OAAO,KAAK,SAAU,KAAK,YAAY,QAAQ,EACpDuD,EAAa,IAAI,KAAK,SAAU,KAAK,YAAY,SAAS,EAC1D,UAAWzzB,KAAgB,OAAO,oBAAoB,IAAI,EACxD,KAAKA,CAAY,EAAI,IAExB,CACD,eAAe1L,EAAU5C,EAAS2kC,EAAa,GAAM,CACnDnE,GAAuB59B,EAAU5C,EAAS2kC,CAAU,CACrD,CACD,WAAWR,EAAQ,CACjB,OAAAA,EAAS,KAAK,gBAAgBA,EAAQ,KAAK,QAAQ,EACnDA,EAAS,KAAK,kBAAkBA,CAAM,EACtC,KAAK,iBAAiBA,CAAM,EACrBA,CACR,CAGD,OAAO,YAAYnkC,EAAS,CAC1B,OAAOw+B,GAAK,IAAIa,GAAWr/B,CAAO,EAAG,KAAK,QAAQ,CACnD,CACD,OAAO,oBAAoBA,EAASmkC,EAAS,GAAI,CAC/C,OAAO,KAAK,YAAYnkC,CAAO,GAAK,IAAI,KAAKA,EAAS,OAAOmkC,GAAW,SAAWA,EAAS,IAAI,CACjG,CACD,WAAW,SAAU,CACnB,OAAOK,EACR,CACD,WAAW,UAAW,CACpB,MAAO,MAAM,KAAK,MACnB,CACD,WAAW,WAAY,CACrB,MAAO,IAAI,KAAK,UACjB,CACD,OAAO,UAAUz7B,EAAM,CACrB,MAAO,GAAGA,IAAO,KAAK,WACvB,CACH,CASA,MAAM67B,GAAc5kC,GAAW,CAC7B,IAAI6+B,EAAW7+B,EAAQ,aAAa,gBAAgB,EACpD,GAAI,CAAC6+B,GAAYA,IAAa,IAAK,CACjC,IAAIgG,EAAgB7kC,EAAQ,aAAa,MAAM,EAM/C,GAAI,CAAC6kC,GAAiB,CAACA,EAAc,SAAS,GAAG,GAAK,CAACA,EAAc,WAAW,GAAG,EACjF,OAAO,KAILA,EAAc,SAAS,GAAG,GAAK,CAACA,EAAc,WAAW,GAAG,IAC9DA,EAAgB,IAAIA,EAAc,MAAM,GAAG,EAAE,CAAC,KAEhDhG,EAAWgG,GAAiBA,IAAkB,IAAMA,EAAc,KAAM,EAAG,KAE7E,OAAOjG,GAAcC,CAAQ,CAC/B,EACMiG,EAAiB,CACrB,KAAKjG,EAAU7+B,EAAU,SAAS,gBAAiB,CACjD,MAAO,CAAE,EAAC,OAAO,GAAG,QAAQ,UAAU,iBAAiB,KAAKA,EAAS6+B,CAAQ,CAAC,CAC/E,EACD,QAAQA,EAAU7+B,EAAU,SAAS,gBAAiB,CACpD,OAAO,QAAQ,UAAU,cAAc,KAAKA,EAAS6+B,CAAQ,CAC9D,EACD,SAAS7+B,EAAS6+B,EAAU,CAC1B,MAAO,GAAG,OAAO,GAAG7+B,EAAQ,QAAQ,EAAE,OAAOgT,GAASA,EAAM,QAAQ6rB,CAAQ,CAAC,CAC9E,EACD,QAAQ7+B,EAAS6+B,EAAU,CACzB,MAAMkG,EAAU,GAChB,IAAIC,EAAWhlC,EAAQ,WAAW,QAAQ6+B,CAAQ,EAClD,KAAOmG,GACLD,EAAQ,KAAKC,CAAQ,EACrBA,EAAWA,EAAS,WAAW,QAAQnG,CAAQ,EAEjD,OAAOkG,CACR,EACD,KAAK/kC,EAAS6+B,EAAU,CACtB,IAAInsB,EAAW1S,EAAQ,uBACvB,KAAO0S,GAAU,CACf,GAAIA,EAAS,QAAQmsB,CAAQ,EAC3B,MAAO,CAACnsB,CAAQ,EAElBA,EAAWA,EAAS,uBAEtB,MAAO,EACR,EAED,KAAK1S,EAAS6+B,EAAU,CACtB,IAAIt2B,EAAOvI,EAAQ,mBACnB,KAAOuI,GAAM,CACX,GAAIA,EAAK,QAAQs2B,CAAQ,EACvB,MAAO,CAACt2B,CAAI,EAEdA,EAAOA,EAAK,mBAEd,MAAO,EACR,EACD,kBAAkBvI,EAAS,CACzB,MAAMilC,EAAa,CAAC,IAAK,SAAU,QAAS,WAAY,SAAU,UAAW,aAAc,0BAA0B,EAAE,IAAIpG,GAAY,GAAGA,wBAA+B,EAAE,KAAK,GAAG,EACnL,OAAO,KAAK,KAAKoG,EAAYjlC,CAAO,EAAE,OAAOP,GAAM,CAACigC,GAAWjgC,CAAE,GAAK6/B,GAAU7/B,CAAE,CAAC,CACpF,EACD,uBAAuBO,EAAS,CAC9B,MAAM6+B,EAAW+F,GAAY5kC,CAAO,EACpC,OAAI6+B,GACKiG,EAAe,QAAQjG,CAAQ,EAAIA,EAErC,IACR,EACD,uBAAuB7+B,EAAS,CAC9B,MAAM6+B,EAAW+F,GAAY5kC,CAAO,EACpC,OAAO6+B,EAAWiG,EAAe,QAAQjG,CAAQ,EAAI,IACtD,EACD,gCAAgC7+B,EAAS,CACvC,MAAM6+B,EAAW+F,GAAY5kC,CAAO,EACpC,OAAO6+B,EAAWiG,EAAe,KAAKjG,CAAQ,EAAI,EACnD,CACH,EASMqG,GAAuB,CAAC36B,EAAWiB,EAAS,SAAW,CAC3D,MAAM25B,EAAa,gBAAgB56B,EAAU,YACvCxB,EAAOwB,EAAU,KACvBw3B,EAAa,GAAG,SAAUoD,EAAY,qBAAqBp8B,MAAU,SAAU7G,EAAO,CAIpF,GAHI,CAAC,IAAK,MAAM,EAAE,SAAS,KAAK,OAAO,GACrCA,EAAM,eAAc,EAElBw9B,GAAW,IAAI,EACjB,OAEF,MAAMjlB,EAASqqB,EAAe,uBAAuB,IAAI,GAAK,KAAK,QAAQ,IAAI/7B,GAAM,EACpEwB,EAAU,oBAAoBkQ,CAAM,EAG5CjP,CAAM,GACnB,CAAG,CACH,EAcM45B,GAAS,QACTC,GAAa,WACbC,GAAc,IAAID,KAClBE,GAAc,QAAQD,KACtBE,GAAe,SAASF,KACxBG,GAAoB,OACpBC,GAAoB,OAM1B,MAAMC,WAAclB,EAAc,CAEhC,WAAW,MAAO,CAChB,OAAOW,EACR,CAGD,OAAQ,CAEN,GADmBrD,EAAa,QAAQ,KAAK,SAAUwD,EAAW,EACnD,iBACb,OAEF,KAAK,SAAS,UAAU,OAAOG,EAAiB,EAChD,MAAMf,EAAa,KAAK,SAAS,UAAU,SAASc,EAAiB,EACrE,KAAK,eAAe,IAAM,KAAK,gBAAiB,EAAE,KAAK,SAAUd,CAAU,CAC5E,CAGD,iBAAkB,CAChB,KAAK,SAAS,SACd5C,EAAa,QAAQ,KAAK,SAAUyD,EAAY,EAChD,KAAK,QAAO,CACb,CAGD,OAAO,gBAAgBrB,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAO87B,GAAM,oBAAoB,IAAI,EAC3C,GAAI,OAAOxB,GAAW,SAGtB,IAAIt6B,EAAKs6B,CAAM,IAAM,QAAaA,EAAO,WAAW,GAAG,GAAKA,IAAW,cACrE,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,EAAE,IAAI,EACvB,CAAK,CACF,CACH,CAMAe,GAAqBS,GAAO,OAAO,EAMnCzF,GAAmByF,EAAK,EAcxB,MAAMC,GAAS,SACTC,GAAa,YACbC,GAAc,IAAID,KAClBE,GAAiB,YACjBC,GAAsB,SACtBC,GAAyB,4BACzBC,GAAyB,QAAQJ,KAAcC,KAMrD,MAAMI,WAAe1B,EAAc,CAEjC,WAAW,MAAO,CAChB,OAAOmB,EACR,CAGD,QAAS,CAEP,KAAK,SAAS,aAAa,eAAgB,KAAK,SAAS,UAAU,OAAOI,EAAmB,CAAC,CAC/F,CAGD,OAAO,gBAAgB7B,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAOs8B,GAAO,oBAAoB,IAAI,EACxChC,IAAW,UACbt6B,EAAKs6B,CAAM,GAEnB,CAAK,CACF,CACH,CAMApC,EAAa,GAAG,SAAUmE,GAAwBD,GAAwB/jC,GAAS,CACjFA,EAAM,eAAc,EACpB,MAAMkkC,EAASlkC,EAAM,OAAO,QAAQ+jC,EAAsB,EAC7CE,GAAO,oBAAoBC,CAAM,EACzC,OAAM,CACb,CAAC,EAMDlG,GAAmBiG,EAAM,EAczB,MAAME,GAAS,QACTC,GAAc,YACdC,GAAmB,aAAaD,KAChCE,GAAkB,YAAYF,KAC9BG,GAAiB,WAAWH,KAC5BI,GAAoB,cAAcJ,KAClCK,GAAkB,YAAYL,KAC9BM,GAAqB,QACrBC,GAAmB,MACnBC,GAA2B,gBAC3BC,GAAkB,GAClBC,GAAY,CAChB,YAAa,KACb,aAAc,KACd,cAAe,IACjB,EACMC,GAAgB,CACpB,YAAa,kBACb,aAAc,kBACd,cAAe,iBACjB,EAMA,MAAMC,WAAcxC,EAAO,CACzB,YAAY1kC,EAASmkC,EAAQ,CAC3B,QACA,KAAK,SAAWnkC,EACZ,GAACA,GAAW,CAACknC,GAAM,YAAW,KAGlC,KAAK,QAAU,KAAK,WAAW/C,CAAM,EACrC,KAAK,QAAU,EACf,KAAK,sBAAwB,EAAQ,OAAO,aAC5C,KAAK,YAAW,EACjB,CAGD,WAAW,SAAU,CACnB,OAAO6C,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOZ,EACR,CAGD,SAAU,CACRtE,EAAa,IAAI,KAAK,SAAUuE,EAAW,CAC5C,CAGD,OAAOpkC,EAAO,CACZ,GAAI,CAAC,KAAK,sBAAuB,CAC/B,KAAK,QAAUA,EAAM,QAAQ,CAAC,EAAE,QAChC,OAEE,KAAK,wBAAwBA,CAAK,IACpC,KAAK,QAAUA,EAAM,QAExB,CACD,KAAKA,EAAO,CACN,KAAK,wBAAwBA,CAAK,IACpC,KAAK,QAAUA,EAAM,QAAU,KAAK,SAEtC,KAAK,aAAY,EACjBo+B,EAAQ,KAAK,QAAQ,WAAW,CACjC,CACD,MAAMp+B,EAAO,CACX,KAAK,QAAUA,EAAM,SAAWA,EAAM,QAAQ,OAAS,EAAI,EAAIA,EAAM,QAAQ,CAAC,EAAE,QAAU,KAAK,OAChG,CACD,cAAe,CACb,MAAMilC,EAAY,KAAK,IAAI,KAAK,OAAO,EACvC,GAAIA,GAAaJ,GACf,OAEF,MAAMK,EAAYD,EAAY,KAAK,QACnC,KAAK,QAAU,EACVC,GAGL9G,EAAQ8G,EAAY,EAAI,KAAK,QAAQ,cAAgB,KAAK,QAAQ,YAAY,CAC/E,CACD,aAAc,CACR,KAAK,uBACPrF,EAAa,GAAG,KAAK,SAAU2E,GAAmBxkC,GAAS,KAAK,OAAOA,CAAK,CAAC,EAC7E6/B,EAAa,GAAG,KAAK,SAAU4E,GAAiBzkC,GAAS,KAAK,KAAKA,CAAK,CAAC,EACzE,KAAK,SAAS,UAAU,IAAI4kC,EAAwB,IAEpD/E,EAAa,GAAG,KAAK,SAAUwE,GAAkBrkC,GAAS,KAAK,OAAOA,CAAK,CAAC,EAC5E6/B,EAAa,GAAG,KAAK,SAAUyE,GAAiBtkC,GAAS,KAAK,MAAMA,CAAK,CAAC,EAC1E6/B,EAAa,GAAG,KAAK,SAAU0E,GAAgBvkC,GAAS,KAAK,KAAKA,CAAK,CAAC,EAE3E,CACD,wBAAwBA,EAAO,CAC7B,OAAO,KAAK,wBAA0BA,EAAM,cAAgB2kC,IAAoB3kC,EAAM,cAAgB0kC,GACvG,CAGD,OAAO,aAAc,CACnB,MAAO,iBAAkB,SAAS,iBAAmB,UAAU,eAAiB,CACjF,CACH,CAcA,MAAMS,GAAS,WACTC,GAAa,cACbC,GAAc,IAAID,KAClBE,GAAiB,YACjBC,GAAmB,YACnBC,GAAoB,aACpBC,GAAyB,IAEzBC,GAAa,OACbC,GAAa,OACbC,GAAiB,OACjBC,GAAkB,QAClBC,GAAc,QAAQT,KACtBU,GAAa,OAAOV,KACpBW,GAAkB,UAAUX,KAC5BY,GAAqB,aAAaZ,KAClCa,GAAqB,aAAab,KAClCc,GAAmB,YAAYd,KAC/Be,GAAwB,OAAOf,KAAcC,KAC7Ce,GAAyB,QAAQhB,KAAcC,KAC/CgB,GAAsB,WACtBC,GAAsB,SACtBC,GAAmB,QACnBC,GAAiB,oBACjBC,GAAmB,sBACnBC,GAAkB,qBAClBC,GAAkB,qBAClBC,GAAkB,UAClBC,GAAgB,iBAChBC,GAAuBF,GAAkBC,GACzCE,GAAoB,qBACpBC,GAAsB,uBACtBC,GAAsB,sCACtBC,GAAqB,4BACrBC,GAAmB,CACvB,CAAC7B,EAAgB,EAAGM,GACpB,CAACL,EAAiB,EAAGI,EACvB,EACMyB,GAAY,CAChB,SAAU,IACV,SAAU,GACV,MAAO,QACP,KAAM,GACN,MAAO,GACP,KAAM,EACR,EACMC,GAAgB,CACpB,SAAU,mBAEV,SAAU,UACV,MAAO,mBACP,KAAM,mBACN,MAAO,UACP,KAAM,SACR,SAMA,MAAMC,WAAiBhF,EAAc,CACnC,YAAYzkC,EAASmkC,EAAQ,CAC3B,MAAMnkC,EAASmkC,CAAM,EACrB,KAAK,UAAY,KACjB,KAAK,eAAiB,KACtB,KAAK,WAAa,GAClB,KAAK,aAAe,KACpB,KAAK,aAAe,KACpB,KAAK,mBAAqBW,EAAe,QAAQqE,GAAqB,KAAK,QAAQ,EACnF,KAAK,mBAAkB,EACnB,KAAK,QAAQ,OAASX,IACxB,KAAK,MAAK,CAEb,CAGD,WAAW,SAAU,CACnB,OAAOe,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOnC,EACR,CAGD,MAAO,CACL,KAAK,OAAOO,EAAU,CACvB,CACD,iBAAkB,CAIZ,CAAC,SAAS,QAAUtI,GAAU,KAAK,QAAQ,GAC7C,KAAK,KAAI,CAEZ,CACD,MAAO,CACL,KAAK,OAAOuI,EAAU,CACvB,CACD,OAAQ,CACF,KAAK,YACPzI,GAAqB,KAAK,QAAQ,EAEpC,KAAK,eAAc,CACpB,CACD,OAAQ,CACN,KAAK,eAAc,EACnB,KAAK,gBAAe,EACpB,KAAK,UAAY,YAAY,IAAM,KAAK,gBAAe,EAAI,KAAK,QAAQ,QAAQ,CACjF,CACD,mBAAoB,CAClB,GAAK,KAAK,QAAQ,KAGlB,IAAI,KAAK,WAAY,CACnB2C,EAAa,IAAI,KAAK,SAAUkG,GAAY,IAAM,KAAK,MAAK,CAAE,EAC9D,OAEF,KAAK,MAAK,EACX,CACD,GAAGjgC,EAAO,CACR,MAAMuc,EAAQ,KAAK,YACnB,GAAIvc,EAAQuc,EAAM,OAAS,GAAKvc,EAAQ,EACtC,OAEF,GAAI,KAAK,WAAY,CACnB+5B,EAAa,IAAI,KAAK,SAAUkG,GAAY,IAAM,KAAK,GAAGjgC,CAAK,CAAC,EAChE,OAEF,MAAM0hC,EAAc,KAAK,cAAc,KAAK,WAAY,GACxD,GAAIA,IAAgB1hC,EAClB,OAEF,MAAMk0B,EAAQl0B,EAAQ0hC,EAAc9B,GAAaC,GACjD,KAAK,OAAO3L,EAAO3X,EAAMvc,CAAK,CAAC,CAChC,CACD,SAAU,CACJ,KAAK,cACP,KAAK,aAAa,UAEpB,MAAM,QAAO,CACd,CAGD,kBAAkBm8B,EAAQ,CACxB,OAAAA,EAAO,gBAAkBA,EAAO,SACzBA,CACR,CACD,oBAAqB,CACf,KAAK,QAAQ,UACfpC,EAAa,GAAG,KAAK,SAAUmG,GAAiBhmC,GAAS,KAAK,SAASA,CAAK,CAAC,EAE3E,KAAK,QAAQ,QAAU,UACzB6/B,EAAa,GAAG,KAAK,SAAUoG,GAAoB,IAAM,KAAK,MAAK,CAAE,EACrEpG,EAAa,GAAG,KAAK,SAAUqG,GAAoB,IAAM,KAAK,kBAAiB,CAAE,GAE/E,KAAK,QAAQ,OAASlB,GAAM,YAAW,GACzC,KAAK,wBAAuB,CAE/B,CACD,yBAA0B,CACxB,UAAWyC,KAAO7E,EAAe,KAAKoE,GAAmB,KAAK,QAAQ,EACpEnH,EAAa,GAAG4H,EAAKtB,GAAkBnmC,GAASA,EAAM,eAAc,CAAE,EAqBxE,MAAM0nC,EAAc,CAClB,aAAc,IAAM,KAAK,OAAO,KAAK,kBAAkB9B,EAAc,CAAC,EACtE,cAAe,IAAM,KAAK,OAAO,KAAK,kBAAkBC,EAAe,CAAC,EACxE,YAtBkB,IAAM,CACpB,KAAK,QAAQ,QAAU,UAY3B,KAAK,MAAK,EACN,KAAK,cACP,aAAa,KAAK,YAAY,EAEhC,KAAK,aAAe,WAAW,IAAM,KAAK,oBAAqBJ,GAAyB,KAAK,QAAQ,QAAQ,EACnH,CAKA,EACI,KAAK,aAAe,IAAIT,GAAM,KAAK,SAAU0C,CAAW,CACzD,CACD,SAAS1nC,EAAO,CACd,GAAI,kBAAkB,KAAKA,EAAM,OAAO,OAAO,EAC7C,OAEF,MAAMklC,EAAYkC,GAAiBpnC,EAAM,GAAG,EACxCklC,IACFllC,EAAM,eAAc,EACpB,KAAK,OAAO,KAAK,kBAAkBklC,CAAS,CAAC,EAEhD,CACD,cAAcpnC,EAAS,CACrB,OAAO,KAAK,UAAS,EAAG,QAAQA,CAAO,CACxC,CACD,2BAA2BgI,EAAO,CAChC,GAAI,CAAC,KAAK,mBACR,OAEF,MAAM6hC,EAAkB/E,EAAe,QAAQiE,GAAiB,KAAK,kBAAkB,EACvFc,EAAgB,UAAU,OAAOpB,EAAmB,EACpDoB,EAAgB,gBAAgB,cAAc,EAC9C,MAAMC,EAAqBhF,EAAe,QAAQ,sBAAsB98B,MAAW,KAAK,kBAAkB,EACtG8hC,IACFA,EAAmB,UAAU,IAAIrB,EAAmB,EACpDqB,EAAmB,aAAa,eAAgB,MAAM,EAEzD,CACD,iBAAkB,CAChB,MAAM9pC,EAAU,KAAK,gBAAkB,KAAK,WAAU,EACtD,GAAI,CAACA,EACH,OAEF,MAAM+pC,EAAkB,OAAO,SAAS/pC,EAAQ,aAAa,kBAAkB,EAAG,EAAE,EACpF,KAAK,QAAQ,SAAW+pC,GAAmB,KAAK,QAAQ,eACzD,CACD,OAAO7N,EAAOl8B,EAAU,KAAM,CAC5B,GAAI,KAAK,WACP,OAEF,MAAM+gC,EAAgB,KAAK,aACrBiJ,EAAS9N,IAAU0L,GACnBqC,EAAcjqC,GAAW8gC,GAAqB,KAAK,UAAS,EAAIC,EAAeiJ,EAAQ,KAAK,QAAQ,IAAI,EAC9G,GAAIC,IAAgBlJ,EAClB,OAEF,MAAMmJ,EAAmB,KAAK,cAAcD,CAAW,EACjDE,EAAe5gC,GACZw4B,EAAa,QAAQ,KAAK,SAAUx4B,EAAW,CACpD,cAAe0gC,EACf,UAAW,KAAK,kBAAkB/N,CAAK,EACvC,KAAM,KAAK,cAAc6E,CAAa,EACtC,GAAImJ,CACZ,CAAO,EAMH,GAJmBC,EAAanC,EAAW,EAC5B,kBAGX,CAACjH,GAAiB,CAACkJ,EAGrB,OAEF,MAAMG,EAAY,EAAQ,KAAK,UAC/B,KAAK,MAAK,EACV,KAAK,WAAa,GAClB,KAAK,2BAA2BF,CAAgB,EAChD,KAAK,eAAiBD,EACtB,MAAMI,EAAuBL,EAASpB,GAAmBD,GACnD2B,EAAiBN,EAASnB,GAAkBC,GAClDmB,EAAY,UAAU,IAAIK,CAAc,EACxCzK,GAAOoK,CAAW,EAClBlJ,EAAc,UAAU,IAAIsJ,CAAoB,EAChDJ,EAAY,UAAU,IAAII,CAAoB,EAC9C,MAAME,EAAmB,IAAM,CAC7BN,EAAY,UAAU,OAAOI,EAAsBC,CAAc,EACjEL,EAAY,UAAU,IAAIxB,EAAmB,EAC7C1H,EAAc,UAAU,OAAO0H,GAAqB6B,EAAgBD,CAAoB,EACxF,KAAK,WAAa,GAClBF,EAAalC,EAAU,CAC7B,EACI,KAAK,eAAesC,EAAkBxJ,EAAe,KAAK,YAAW,CAAE,EACnEqJ,GACF,KAAK,MAAK,CAEb,CACD,aAAc,CACZ,OAAO,KAAK,SAAS,UAAU,SAAS1B,EAAgB,CACzD,CACD,YAAa,CACX,OAAO5D,EAAe,QAAQmE,GAAsB,KAAK,QAAQ,CAClE,CACD,WAAY,CACV,OAAOnE,EAAe,KAAKkE,GAAe,KAAK,QAAQ,CACxD,CACD,gBAAiB,CACX,KAAK,YACP,cAAc,KAAK,SAAS,EAC5B,KAAK,UAAY,KAEpB,CACD,kBAAkB5B,EAAW,CAC3B,OAAInH,GAAK,EACAmH,IAAcU,GAAiBD,GAAaD,GAE9CR,IAAcU,GAAiBF,GAAaC,EACpD,CACD,kBAAkB3L,EAAO,CACvB,OAAI+D,GAAK,EACA/D,IAAU2L,GAAaC,GAAiBC,GAE1C7L,IAAU2L,GAAaE,GAAkBD,EACjD,CAGD,OAAO,gBAAgB3D,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAO4/B,GAAS,oBAAoB,KAAMtF,CAAM,EACtD,GAAI,OAAOA,GAAW,SAAU,CAC9Bt6B,EAAK,GAAGs6B,CAAM,EACd,OAEF,GAAI,OAAOA,GAAW,SAAU,CAC9B,GAAIt6B,EAAKs6B,CAAM,IAAM,QAAaA,EAAO,WAAW,GAAG,GAAKA,IAAW,cACrE,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,IAEnB,CAAK,CACF,CACH,EAMApC,EAAa,GAAG,SAAUwG,GAAwBa,GAAqB,SAAUlnC,EAAO,CACtF,MAAMuY,EAASqqB,EAAe,uBAAuB,IAAI,EACzD,GAAI,CAACrqB,GAAU,CAACA,EAAO,UAAU,SAAS+tB,EAAmB,EAC3D,OAEFtmC,EAAM,eAAc,EACpB,MAAMsoC,EAAWf,GAAS,oBAAoBhvB,CAAM,EAC9CgwB,EAAa,KAAK,aAAa,kBAAkB,EACvD,GAAIA,EAAY,CACdD,EAAS,GAAGC,CAAU,EACtBD,EAAS,kBAAiB,EAC1B,OAEF,GAAIzG,GAAY,iBAAiB,KAAM,OAAO,IAAM,OAAQ,CAC1DyG,EAAS,KAAI,EACbA,EAAS,kBAAiB,EAC1B,OAEFA,EAAS,KAAI,EACbA,EAAS,kBAAiB,CAC5B,CAAC,EACDzI,EAAa,GAAG,OAAQuG,GAAuB,IAAM,CACnD,MAAMoC,EAAY5F,EAAe,KAAKuE,EAAkB,EACxD,UAAWmB,KAAYE,EACrBjB,GAAS,oBAAoBe,CAAQ,CAEzC,CAAC,EAMDtK,GAAmBuJ,EAAQ,EAc3B,MAAMkB,GAAS,WACTC,GAAa,cACbC,GAAc,IAAID,KAClBE,GAAiB,YACjBC,GAAe,OAAOF,KACtBG,GAAgB,QAAQH,KACxBI,GAAe,OAAOJ,KACtBK,GAAiB,SAASL,KAC1BM,GAAyB,QAAQN,KAAcC,KAC/CM,GAAoB,OACpBC,GAAsB,WACtBC,GAAwB,aACxBC,GAAuB,YACvBC,GAA6B,WAAWH,OAAwBA,KAChEI,GAAwB,sBACxBC,GAAQ,QACRC,GAAS,SACTC,GAAmB,uCACnBC,GAAyB,8BACzBC,GAAY,CAChB,OAAQ,KACR,OAAQ,EACV,EACMC,GAAgB,CACpB,OAAQ,iBACR,OAAQ,SACV,SAMA,MAAMC,WAAiBvH,EAAc,CACnC,YAAYzkC,EAASmkC,EAAQ,CAC3B,MAAMnkC,EAASmkC,CAAM,EACrB,KAAK,iBAAmB,GACxB,KAAK,cAAgB,GACrB,MAAM8H,EAAanH,EAAe,KAAK+G,EAAsB,EAC7D,UAAWvpC,KAAQ2pC,EAAY,CAC7B,MAAMpN,EAAWiG,EAAe,uBAAuBxiC,CAAI,EACrD4pC,EAAgBpH,EAAe,KAAKjG,CAAQ,EAAE,OAAOsN,GAAgBA,IAAiB,KAAK,QAAQ,EACrGtN,IAAa,MAAQqN,EAAc,QACrC,KAAK,cAAc,KAAK5pC,CAAI,EAGhC,KAAK,oBAAmB,EACnB,KAAK,QAAQ,QAChB,KAAK,0BAA0B,KAAK,cAAe,KAAK,SAAQ,CAAE,EAEhE,KAAK,QAAQ,QACf,KAAK,OAAM,CAEd,CAGD,WAAW,SAAU,CACnB,OAAOwpC,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOpB,EACR,CAGD,QAAS,CACH,KAAK,WACP,KAAK,KAAI,EAET,KAAK,KAAI,CAEZ,CACD,MAAO,CACL,GAAI,KAAK,kBAAoB,KAAK,SAAQ,EACxC,OAEF,IAAIyB,EAAiB,GAYrB,GATI,KAAK,QAAQ,SACfA,EAAiB,KAAK,uBAAuBR,EAAgB,EAAE,OAAO5rC,GAAWA,IAAY,KAAK,QAAQ,EAAE,IAAIA,GAAWgsC,GAAS,oBAAoBhsC,EAAS,CAC/J,OAAQ,EACT,EAAC,GAEAosC,EAAe,QAAUA,EAAe,CAAC,EAAE,kBAG5BrK,EAAa,QAAQ,KAAK,SAAUgJ,EAAY,EACpD,iBACb,OAEF,UAAWsB,KAAkBD,EAC3BC,EAAe,KAAI,EAErB,MAAMhkB,EAAY,KAAK,gBACvB,KAAK,SAAS,UAAU,OAAOgjB,EAAmB,EAClD,KAAK,SAAS,UAAU,IAAIC,EAAqB,EACjD,KAAK,SAAS,MAAMjjB,CAAS,EAAI,EACjC,KAAK,0BAA0B,KAAK,cAAe,EAAI,EACvD,KAAK,iBAAmB,GACxB,MAAMikB,EAAW,IAAM,CACrB,KAAK,iBAAmB,GACxB,KAAK,SAAS,UAAU,OAAOhB,EAAqB,EACpD,KAAK,SAAS,UAAU,IAAID,GAAqBD,EAAiB,EAClE,KAAK,SAAS,MAAM/iB,CAAS,EAAI,GACjC0Z,EAAa,QAAQ,KAAK,SAAUiJ,EAAa,CACvD,EAEUuB,EAAa,SADUlkB,EAAU,CAAC,EAAE,YAAW,EAAKA,EAAU,MAAM,CAAC,IAE3E,KAAK,eAAeikB,EAAU,KAAK,SAAU,EAAI,EACjD,KAAK,SAAS,MAAMjkB,CAAS,EAAI,GAAG,KAAK,SAASkkB,CAAU,KAC7D,CACD,MAAO,CAKL,GAJI,KAAK,kBAAoB,CAAC,KAAK,SAAQ,GAGxBxK,EAAa,QAAQ,KAAK,SAAUkJ,EAAY,EACpD,iBACb,OAEF,MAAM5iB,EAAY,KAAK,gBACvB,KAAK,SAAS,MAAMA,CAAS,EAAI,GAAG,KAAK,SAAS,sBAAuB,EAACA,CAAS,MACnFwX,GAAO,KAAK,QAAQ,EACpB,KAAK,SAAS,UAAU,IAAIyL,EAAqB,EACjD,KAAK,SAAS,UAAU,OAAOD,GAAqBD,EAAiB,EACrE,UAAWoB,KAAW,KAAK,cAAe,CACxC,MAAMxsC,EAAU8kC,EAAe,uBAAuB0H,CAAO,EACzDxsC,GAAW,CAAC,KAAK,SAASA,CAAO,GACnC,KAAK,0BAA0B,CAACwsC,CAAO,EAAG,EAAK,EAGnD,KAAK,iBAAmB,GACxB,MAAMF,EAAW,IAAM,CACrB,KAAK,iBAAmB,GACxB,KAAK,SAAS,UAAU,OAAOhB,EAAqB,EACpD,KAAK,SAAS,UAAU,IAAID,EAAmB,EAC/CtJ,EAAa,QAAQ,KAAK,SAAUmJ,EAAc,CACxD,EACI,KAAK,SAAS,MAAM7iB,CAAS,EAAI,GACjC,KAAK,eAAeikB,EAAU,KAAK,SAAU,EAAI,CAClD,CACD,SAAStsC,EAAU,KAAK,SAAU,CAChC,OAAOA,EAAQ,UAAU,SAASorC,EAAiB,CACpD,CAGD,kBAAkBjH,EAAQ,CACxB,OAAAA,EAAO,OAAS,EAAQA,EAAO,OAC/BA,EAAO,OAAS9E,GAAW8E,EAAO,MAAM,EACjCA,CACR,CACD,eAAgB,CACd,OAAO,KAAK,SAAS,UAAU,SAASsH,EAAqB,EAAIC,GAAQC,EAC1E,CACD,qBAAsB,CACpB,GAAI,CAAC,KAAK,QAAQ,OAChB,OAEF,MAAM11B,EAAW,KAAK,uBAAuB41B,EAAsB,EACnE,UAAW7rC,KAAWiW,EAAU,CAC9B,MAAMw2B,EAAW3H,EAAe,uBAAuB9kC,CAAO,EAC1DysC,GACF,KAAK,0BAA0B,CAACzsC,CAAO,EAAG,KAAK,SAASysC,CAAQ,CAAC,EAGtE,CACD,uBAAuB5N,EAAU,CAC/B,MAAM5oB,EAAW6uB,EAAe,KAAK0G,GAA4B,KAAK,QAAQ,MAAM,EAEpF,OAAO1G,EAAe,KAAKjG,EAAU,KAAK,QAAQ,MAAM,EAAE,OAAO7+B,GAAW,CAACiW,EAAS,SAASjW,CAAO,CAAC,CACxG,CACD,0BAA0B0sC,EAAcC,EAAQ,CAC9C,GAAKD,EAAa,OAGlB,UAAW1sC,KAAW0sC,EACpB1sC,EAAQ,UAAU,OAAOurC,GAAsB,CAACoB,CAAM,EACtD3sC,EAAQ,aAAa,gBAAiB2sC,CAAM,CAE/C,CAGD,OAAO,gBAAgBxI,EAAQ,CAC7B,MAAMyI,EAAU,GAChB,OAAI,OAAOzI,GAAW,UAAY,YAAY,KAAKA,CAAM,IACvDyI,EAAQ,OAAS,IAEZ,KAAK,KAAK,UAAY,CAC3B,MAAM/iC,EAAOmiC,GAAS,oBAAoB,KAAMY,CAAO,EACvD,GAAI,OAAOzI,GAAW,SAAU,CAC9B,GAAI,OAAOt6B,EAAKs6B,CAAM,EAAM,IAC1B,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,IAEnB,CAAK,CACF,CACH,EAMApC,EAAa,GAAG,SAAUoJ,GAAwBU,GAAwB,SAAU3pC,EAAO,EAErFA,EAAM,OAAO,UAAY,KAAOA,EAAM,gBAAkBA,EAAM,eAAe,UAAY,MAC3FA,EAAM,eAAc,EAEtB,UAAWlC,KAAW8kC,EAAe,gCAAgC,IAAI,EACvEkH,GAAS,oBAAoBhsC,EAAS,CACpC,OAAQ,EACd,CAAK,EAAE,OAAM,CAEb,CAAC,EAMDkgC,GAAmB8L,EAAQ,EAc3B,MAAMa,GAAS,WACTC,GAAa,cACbC,GAAc,IAAID,KAClBE,GAAiB,YACjBC,GAAe,SACfC,GAAY,MACZC,GAAiB,UACjBC,GAAmB,YACnBC,GAAqB,EAErBC,GAAe,OAAOP,KACtBQ,GAAiB,SAASR,KAC1BS,GAAe,OAAOT,KACtBU,GAAgB,QAAQV,KACxBW,GAAyB,QAAQX,KAAcC,KAC/CW,GAAyB,UAAUZ,KAAcC,KACjDY,GAAuB,QAAQb,KAAcC,KAC7Ca,GAAoB,OACpBC,GAAoB,SACpBC,GAAqB,UACrBC,GAAuB,YACvBC,GAA2B,gBAC3BC,GAA6B,kBAC7BC,GAAyB,4DACzBC,GAA6B,GAAGD,MAA0BN,KAC1DQ,GAAgB,iBAChBC,GAAkB,UAClBC,GAAsB,cACtBC,GAAyB,8DACzBC,GAAgBxO,GAAK,EAAK,UAAY,YACtCyO,GAAmBzO,GAAK,EAAK,YAAc,UAC3C0O,GAAmB1O,GAAK,EAAK,aAAe,eAC5C2O,GAAsB3O,GAAK,EAAK,eAAiB,aACjD4O,GAAkB5O,GAAK,EAAK,aAAe,cAC3C6O,GAAiB7O,GAAK,EAAK,cAAgB,aAC3C8O,GAAsB,MACtBC,GAAyB,SACzBC,GAAY,CAChB,UAAW,GACX,SAAU,kBACV,QAAS,UACT,OAAQ,CAAC,EAAG,CAAC,EACb,aAAc,KACd,UAAW,QACb,EACMC,GAAgB,CACpB,UAAW,mBACX,SAAU,mBACV,QAAS,SACT,OAAQ,0BACR,aAAc,yBACd,UAAW,yBACb,SAMA,MAAMC,WAAiB1K,EAAc,CACnC,YAAYzkC,EAASmkC,EAAQ,CAC3B,MAAMnkC,EAASmkC,CAAM,EACrB,KAAK,QAAU,KACf,KAAK,QAAU,KAAK,SAAS,WAE7B,KAAK,MAAQW,EAAe,KAAK,KAAK,SAAUuJ,EAAa,EAAE,CAAC,GAAKvJ,EAAe,KAAK,KAAK,SAAUuJ,EAAa,EAAE,CAAC,GAAKvJ,EAAe,QAAQuJ,GAAe,KAAK,OAAO,EAC/K,KAAK,UAAY,KAAK,eACvB,CAGD,WAAW,SAAU,CACnB,OAAOY,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOrC,EACR,CAGD,QAAS,CACP,OAAO,KAAK,WAAa,KAAK,OAAS,KAAK,MAC7C,CACD,MAAO,CACL,GAAInN,GAAW,KAAK,QAAQ,GAAK,KAAK,SAAQ,EAC5C,OAEF,MAAM0P,EAAgB,CACpB,cAAe,KAAK,QAC1B,EAEI,GAAI,CADcrN,EAAa,QAAQ,KAAK,SAAUyL,GAAc4B,CAAa,EACnE,iBASd,IANA,KAAK,cAAa,EAMd,iBAAkB,SAAS,iBAAmB,CAAC,KAAK,QAAQ,QAAQb,EAAmB,EACzF,UAAWvuC,IAAW,GAAG,OAAO,GAAG,SAAS,KAAK,QAAQ,EACvD+hC,EAAa,GAAG/hC,EAAS,YAAa4/B,EAAI,EAG9C,KAAK,SAAS,QACd,KAAK,SAAS,aAAa,gBAAiB,EAAI,EAChD,KAAK,MAAM,UAAU,IAAIiO,EAAiB,EAC1C,KAAK,SAAS,UAAU,IAAIA,EAAiB,EAC7C9L,EAAa,QAAQ,KAAK,SAAU0L,GAAe2B,CAAa,EACjE,CACD,MAAO,CACL,GAAI1P,GAAW,KAAK,QAAQ,GAAK,CAAC,KAAK,WACrC,OAEF,MAAM0P,EAAgB,CACpB,cAAe,KAAK,QAC1B,EACI,KAAK,cAAcA,CAAa,CACjC,CACD,SAAU,CACJ,KAAK,SACP,KAAK,QAAQ,UAEf,MAAM,QAAO,CACd,CACD,QAAS,CACP,KAAK,UAAY,KAAK,gBAClB,KAAK,SACP,KAAK,QAAQ,QAEhB,CAGD,cAAcA,EAAe,CAE3B,GAAI,CADcrN,EAAa,QAAQ,KAAK,SAAUuL,GAAc8B,CAAa,EACnE,iBAMd,IAAI,iBAAkB,SAAS,gBAC7B,UAAWpvC,IAAW,GAAG,OAAO,GAAG,SAAS,KAAK,QAAQ,EACvD+hC,EAAa,IAAI/hC,EAAS,YAAa4/B,EAAI,EAG3C,KAAK,SACP,KAAK,QAAQ,UAEf,KAAK,MAAM,UAAU,OAAOiO,EAAiB,EAC7C,KAAK,SAAS,UAAU,OAAOA,EAAiB,EAChD,KAAK,SAAS,aAAa,gBAAiB,OAAO,EACnD9J,GAAY,oBAAoB,KAAK,MAAO,QAAQ,EACpDhC,EAAa,QAAQ,KAAK,SAAUwL,GAAgB6B,CAAa,EAClE,CACD,WAAWjL,EAAQ,CAEjB,GADAA,EAAS,MAAM,WAAWA,CAAM,EAC5B,OAAOA,EAAO,WAAc,UAAY,CAAC5Z,GAAU4Z,EAAO,SAAS,GAAK,OAAOA,EAAO,UAAU,uBAA0B,WAE5H,MAAM,IAAI,UAAU,GAAG0I,GAAO,YAAa,iGAAgG,EAE7I,OAAO1I,CACR,CACD,eAAgB,CACd,GAAI,OAAOkL,GAAW,IACpB,MAAM,IAAI,UAAU,8DAA+D,EAErF,IAAIC,EAAmB,KAAK,SACxB,KAAK,QAAQ,YAAc,SAC7BA,EAAmB,KAAK,QACf/kB,GAAU,KAAK,QAAQ,SAAS,EACzC+kB,EAAmBjQ,GAAW,KAAK,QAAQ,SAAS,EAC3C,OAAO,KAAK,QAAQ,WAAc,WAC3CiQ,EAAmB,KAAK,QAAQ,WAElC,MAAMC,EAAe,KAAK,mBAC1B,KAAK,QAAUC,GAAoBF,EAAkB,KAAK,MAAOC,CAAY,CAC9E,CACD,UAAW,CACT,OAAO,KAAK,MAAM,UAAU,SAAS1B,EAAiB,CACvD,CACD,eAAgB,CACd,MAAM4B,EAAiB,KAAK,QAC5B,GAAIA,EAAe,UAAU,SAAS1B,EAAkB,EACtD,OAAOc,GAET,GAAIY,EAAe,UAAU,SAASzB,EAAoB,EACxD,OAAOc,GAET,GAAIW,EAAe,UAAU,SAASxB,EAAwB,EAC5D,OAAOc,GAET,GAAIU,EAAe,UAAU,SAASvB,EAA0B,EAC9D,OAAOc,GAIT,MAAMU,EAAQ,iBAAiB,KAAK,KAAK,EAAE,iBAAiB,eAAe,EAAE,KAAM,IAAK,MACxF,OAAID,EAAe,UAAU,SAAS3B,EAAiB,EAC9C4B,EAAQhB,GAAmBD,GAE7BiB,EAAQd,GAAsBD,EACtC,CACD,eAAgB,CACd,OAAO,KAAK,SAAS,QAAQL,EAAe,IAAM,IACnD,CACD,YAAa,CACX,KAAM,CACJ,OAAAttC,CACN,EAAQ,KAAK,QACT,OAAI,OAAOA,GAAW,SACbA,EAAO,MAAM,GAAG,EAAE,IAAIzE,GAAS,OAAO,SAASA,EAAO,EAAE,CAAC,EAE9D,OAAOyE,GAAW,WACb2uC,GAAc3uC,EAAO2uC,EAAY,KAAK,QAAQ,EAEhD3uC,CACR,CACD,kBAAmB,CACjB,MAAM4uC,EAAwB,CAC5B,UAAW,KAAK,cAAe,EAC/B,UAAW,CAAC,CACV,KAAM,kBACN,QAAS,CACP,SAAU,KAAK,QAAQ,QACxB,CACT,EAAS,CACD,KAAM,SACN,QAAS,CACP,OAAQ,KAAK,WAAY,CAC1B,CACT,CAAO,CACP,EAGI,OAAI,KAAK,WAAa,KAAK,QAAQ,UAAY,YAC7C7L,GAAY,iBAAiB,KAAK,MAAO,SAAU,QAAQ,EAC3D6L,EAAsB,UAAY,CAAC,CACjC,KAAM,cACN,QAAS,EACjB,CAAO,GAEI,CACL,GAAGA,EACH,GAAGtP,EAAQ,KAAK,QAAQ,aAAc,CAACsP,CAAqB,CAAC,CACnE,CACG,CACD,gBAAgB,CACd,IAAApvC,EACA,OAAAia,CACJ,EAAK,CACD,MAAM8J,EAAQugB,EAAe,KAAK0J,GAAwB,KAAK,KAAK,EAAE,OAAOxuC,GAAWs/B,GAAUt/B,CAAO,CAAC,EACrGukB,EAAM,QAMXuc,GAAqBvc,EAAO9J,EAAQja,IAAQ4sC,GAAkB,CAAC7oB,EAAM,SAAS9J,CAAM,CAAC,EAAE,MAAK,CAC7F,CAGD,OAAO,gBAAgB0pB,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAOslC,GAAS,oBAAoB,KAAMhL,CAAM,EACtD,GAAI,OAAOA,GAAW,SAGtB,IAAI,OAAOt6B,EAAKs6B,CAAM,EAAM,IAC1B,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,IACjB,CAAK,CACF,CACD,OAAO,WAAWjiC,EAAO,CACvB,GAAIA,EAAM,SAAWmrC,IAAsBnrC,EAAM,OAAS,SAAWA,EAAM,MAAQgrC,GACjF,OAEF,MAAM2C,EAAc/K,EAAe,KAAKsJ,EAA0B,EAClE,UAAW0B,KAAUD,EAAa,CAChC,MAAMt6B,EAAU45B,GAAS,YAAYW,CAAM,EAC3C,GAAI,CAACv6B,GAAWA,EAAQ,QAAQ,YAAc,GAC5C,SAEF,MAAMw6B,EAAe7tC,EAAM,eACrB8tC,EAAeD,EAAa,SAASx6B,EAAQ,KAAK,EAMxD,GALIw6B,EAAa,SAASx6B,EAAQ,QAAQ,GAAKA,EAAQ,QAAQ,YAAc,UAAY,CAACy6B,GAAgBz6B,EAAQ,QAAQ,YAAc,WAAay6B,GAKjJz6B,EAAQ,MAAM,SAASrT,EAAM,MAAM,IAAMA,EAAM,OAAS,SAAWA,EAAM,MAAQgrC,IAAa,qCAAqC,KAAKhrC,EAAM,OAAO,OAAO,GAC9J,SAEF,MAAMktC,EAAgB,CACpB,cAAe75B,EAAQ,QAC/B,EACUrT,EAAM,OAAS,UACjBktC,EAAc,WAAaltC,GAE7BqT,EAAQ,cAAc65B,CAAa,EAEtC,CACD,OAAO,sBAAsBltC,EAAO,CAIlC,MAAM+tC,EAAU,kBAAkB,KAAK/tC,EAAM,OAAO,OAAO,EACrDguC,EAAgBhuC,EAAM,MAAQ+qC,GAC9BkD,EAAkB,CAAChD,GAAgBC,EAAgB,EAAE,SAASlrC,EAAM,GAAG,EAI7E,GAHI,CAACiuC,GAAmB,CAACD,GAGrBD,GAAW,CAACC,EACd,OAEFhuC,EAAM,eAAc,EAGpB,MAAMkuC,EAAkB,KAAK,QAAQjC,EAAsB,EAAI,KAAOrJ,EAAe,KAAK,KAAMqJ,EAAsB,EAAE,CAAC,GAAKrJ,EAAe,KAAK,KAAMqJ,EAAsB,EAAE,CAAC,GAAKrJ,EAAe,QAAQqJ,GAAwBjsC,EAAM,eAAe,UAAU,EAC9PmH,EAAW8lC,GAAS,oBAAoBiB,CAAe,EAC7D,GAAID,EAAiB,CACnBjuC,EAAM,gBAAe,EACrBmH,EAAS,KAAI,EACbA,EAAS,gBAAgBnH,CAAK,EAC9B,OAEEmH,EAAS,aAEXnH,EAAM,gBAAe,EACrBmH,EAAS,KAAI,EACb+mC,EAAgB,MAAK,EAExB,CACH,EAMArO,EAAa,GAAG,SAAU4L,GAAwBQ,GAAwBgB,GAAS,qBAAqB,EACxGpN,EAAa,GAAG,SAAU4L,GAAwBU,GAAec,GAAS,qBAAqB,EAC/FpN,EAAa,GAAG,SAAU2L,GAAwByB,GAAS,UAAU,EACrEpN,EAAa,GAAG,SAAU6L,GAAsBuB,GAAS,UAAU,EACnEpN,EAAa,GAAG,SAAU2L,GAAwBS,GAAwB,SAAUjsC,EAAO,CACzFA,EAAM,eAAc,EACpBitC,GAAS,oBAAoB,IAAI,EAAE,OAAM,CAC3C,CAAC,EAMDjP,GAAmBiP,EAAQ,EAc3B,MAAMkB,GAAS,WACTC,GAAoB,OACpBC,GAAoB,OACpBC,GAAkB,gBAAgBH,KAClCI,GAAY,CAChB,UAAW,iBACX,cAAe,KACf,WAAY,GACZ,UAAW,GAEX,YAAa,MACf,EAEMC,GAAgB,CACpB,UAAW,SACX,cAAe,kBACf,WAAY,UACZ,UAAW,UACX,YAAa,kBACf,EAMA,MAAMC,WAAiBjM,EAAO,CAC5B,YAAYP,EAAQ,CAClB,QACA,KAAK,QAAU,KAAK,WAAWA,CAAM,EACrC,KAAK,YAAc,GACnB,KAAK,SAAW,IACjB,CAGD,WAAW,SAAU,CACnB,OAAOsM,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOL,EACR,CAGD,KAAKztC,EAAU,CACb,GAAI,CAAC,KAAK,QAAQ,UAAW,CAC3B09B,EAAQ19B,CAAQ,EAChB,OAEF,KAAK,QAAO,EACZ,MAAM5C,EAAU,KAAK,cACjB,KAAK,QAAQ,YACf6/B,GAAO7/B,CAAO,EAEhBA,EAAQ,UAAU,IAAIuwC,EAAiB,EACvC,KAAK,kBAAkB,IAAM,CAC3BjQ,EAAQ19B,CAAQ,CACtB,CAAK,CACF,CACD,KAAKA,EAAU,CACb,GAAI,CAAC,KAAK,QAAQ,UAAW,CAC3B09B,EAAQ19B,CAAQ,EAChB,OAEF,KAAK,YAAa,EAAC,UAAU,OAAO2tC,EAAiB,EACrD,KAAK,kBAAkB,IAAM,CAC3B,KAAK,QAAO,EACZjQ,EAAQ19B,CAAQ,CACtB,CAAK,CACF,CACD,SAAU,CACH,KAAK,cAGVm/B,EAAa,IAAI,KAAK,SAAUyO,EAAe,EAC/C,KAAK,SAAS,SACd,KAAK,YAAc,GACpB,CAGD,aAAc,CACZ,GAAI,CAAC,KAAK,SAAU,CAClB,MAAMI,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,KAAK,QAAQ,UAC9B,KAAK,QAAQ,YACfA,EAAS,UAAU,IAAIN,EAAiB,EAE1C,KAAK,SAAWM,EAElB,OAAO,KAAK,QACb,CACD,kBAAkBzM,EAAQ,CAExB,OAAAA,EAAO,YAAc9E,GAAW8E,EAAO,WAAW,EAC3CA,CACR,CACD,SAAU,CACR,GAAI,KAAK,YACP,OAEF,MAAMnkC,EAAU,KAAK,cACrB,KAAK,QAAQ,YAAY,OAAOA,CAAO,EACvC+hC,EAAa,GAAG/hC,EAASwwC,GAAiB,IAAM,CAC9ClQ,EAAQ,KAAK,QAAQ,aAAa,CACxC,CAAK,EACD,KAAK,YAAc,EACpB,CACD,kBAAkB19B,EAAU,CAC1B49B,GAAuB59B,EAAU,KAAK,YAAa,EAAE,KAAK,QAAQ,UAAU,CAC7E,CACH,CAcA,MAAMiuC,GAAS,YACTC,GAAa,eACbC,GAAc,IAAID,KAClBE,GAAkB,UAAUD,KAC5BE,GAAoB,cAAcF,KAClCG,GAAU,MACVC,GAAkB,UAClBC,GAAmB,WACnBC,GAAY,CAChB,UAAW,GACX,YAAa,IACf,EAEMC,GAAgB,CACpB,UAAW,UACX,YAAa,SACf,EAMA,MAAMC,WAAkB7M,EAAO,CAC7B,YAAYP,EAAQ,CAClB,QACA,KAAK,QAAU,KAAK,WAAWA,CAAM,EACrC,KAAK,UAAY,GACjB,KAAK,qBAAuB,IAC7B,CAGD,WAAW,SAAU,CACnB,OAAOkN,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOT,EACR,CAGD,UAAW,CACL,KAAK,YAGL,KAAK,QAAQ,WACf,KAAK,QAAQ,YAAY,QAE3B9O,EAAa,IAAI,SAAUgP,EAAW,EACtChP,EAAa,GAAG,SAAUiP,GAAiB9uC,GAAS,KAAK,eAAeA,CAAK,CAAC,EAC9E6/B,EAAa,GAAG,SAAUkP,GAAmB/uC,GAAS,KAAK,eAAeA,CAAK,CAAC,EAChF,KAAK,UAAY,GAClB,CACD,YAAa,CACN,KAAK,YAGV,KAAK,UAAY,GACjB6/B,EAAa,IAAI,SAAUgP,EAAW,EACvC,CAGD,eAAe7uC,EAAO,CACpB,KAAM,CACJ,YAAAsvC,CACN,EAAQ,KAAK,QACT,GAAItvC,EAAM,SAAW,UAAYA,EAAM,SAAWsvC,GAAeA,EAAY,SAAStvC,EAAM,MAAM,EAChG,OAEF,MAAMqF,EAAWu9B,EAAe,kBAAkB0M,CAAW,EACzDjqC,EAAS,SAAW,EACtBiqC,EAAY,MAAK,EACR,KAAK,uBAAyBJ,GACvC7pC,EAASA,EAAS,OAAS,CAAC,EAAE,MAAK,EAEnCA,EAAS,CAAC,EAAE,OAEf,CACD,eAAerF,EAAO,CAChBA,EAAM,MAAQgvC,KAGlB,KAAK,qBAAuBhvC,EAAM,SAAWkvC,GAAmBD,GACjE,CACH,CAcA,MAAMM,GAAyB,oDACzBC,GAA0B,cAC1BC,GAAmB,gBACnBC,GAAkB,eAMxB,MAAMC,EAAgB,CACpB,aAAc,CACZ,KAAK,SAAW,SAAS,IAC1B,CAGD,UAAW,CAET,MAAMC,EAAgB,SAAS,gBAAgB,YAC/C,OAAO,KAAK,IAAI,OAAO,WAAaA,CAAa,CAClD,CACD,MAAO,CACL,MAAM5lB,EAAQ,KAAK,WACnB,KAAK,iBAAgB,EAErB,KAAK,sBAAsB,KAAK,SAAUylB,GAAkBI,GAAmBA,EAAkB7lB,CAAK,EAEtG,KAAK,sBAAsBulB,GAAwBE,GAAkBI,GAAmBA,EAAkB7lB,CAAK,EAC/G,KAAK,sBAAsBwlB,GAAyBE,GAAiBG,GAAmBA,EAAkB7lB,CAAK,CAChH,CACD,OAAQ,CACN,KAAK,wBAAwB,KAAK,SAAU,UAAU,EACtD,KAAK,wBAAwB,KAAK,SAAUylB,EAAgB,EAC5D,KAAK,wBAAwBF,GAAwBE,EAAgB,EACrE,KAAK,wBAAwBD,GAAyBE,EAAe,CACtE,CACD,eAAgB,CACd,OAAO,KAAK,SAAU,EAAG,CAC1B,CAGD,kBAAmB,CACjB,KAAK,sBAAsB,KAAK,SAAU,UAAU,EACpD,KAAK,SAAS,MAAM,SAAW,QAChC,CACD,sBAAsB/S,EAAUmT,EAAepvC,EAAU,CACvD,MAAMqvC,EAAiB,KAAK,WACtBC,EAAuBlyC,GAAW,CACtC,GAAIA,IAAY,KAAK,UAAY,OAAO,WAAaA,EAAQ,YAAciyC,EACzE,OAEF,KAAK,sBAAsBjyC,EAASgyC,CAAa,EACjD,MAAMD,EAAkB,OAAO,iBAAiB/xC,CAAO,EAAE,iBAAiBgyC,CAAa,EACvFhyC,EAAQ,MAAM,YAAYgyC,EAAe,GAAGpvC,EAAS,OAAO,WAAWmvC,CAAe,CAAC,KAAK,CAClG,EACI,KAAK,2BAA2BlT,EAAUqT,CAAoB,CAC/D,CACD,sBAAsBlyC,EAASgyC,EAAe,CAC5C,MAAMG,EAAcnyC,EAAQ,MAAM,iBAAiBgyC,CAAa,EAC5DG,GACFpO,GAAY,iBAAiB/jC,EAASgyC,EAAeG,CAAW,CAEnE,CACD,wBAAwBtT,EAAUmT,EAAe,CAC/C,MAAME,EAAuBlyC,GAAW,CACtC,MAAMzD,EAAQwnC,GAAY,iBAAiB/jC,EAASgyC,CAAa,EAEjE,GAAIz1C,IAAU,KAAM,CAClByD,EAAQ,MAAM,eAAegyC,CAAa,EAC1C,OAEFjO,GAAY,oBAAoB/jC,EAASgyC,CAAa,EACtDhyC,EAAQ,MAAM,YAAYgyC,EAAez1C,CAAK,CACpD,EACI,KAAK,2BAA2BsiC,EAAUqT,CAAoB,CAC/D,CACD,2BAA2BrT,EAAUuT,EAAU,CAC7C,GAAI7nB,GAAUsU,CAAQ,EAAG,CACvBuT,EAASvT,CAAQ,EACjB,OAEF,UAAWwT,KAAOvN,EAAe,KAAKjG,EAAU,KAAK,QAAQ,EAC3DuT,EAASC,CAAG,CAEf,CACH,CAcA,MAAMC,GAAS,QACTC,GAAa,WACbC,GAAc,IAAID,KAClBE,GAAiB,YACjBC,GAAe,SACfC,GAAe,OAAOH,KACtBI,GAAyB,gBAAgBJ,KACzCK,GAAiB,SAASL,KAC1BM,GAAe,OAAON,KACtBO,GAAgB,QAAQP,KACxBQ,GAAiB,SAASR,KAC1BS,GAAsB,gBAAgBT,KACtCU,GAA0B,oBAAoBV,KAC9CW,GAA0B,kBAAkBX,KAC5CY,GAAyB,QAAQZ,KAAcC,KAC/CY,GAAkB,aAClBC,GAAoB,OACpBC,GAAoB,OACpBC,GAAoB,eACpBC,GAAkB,cAClBC,GAAkB,gBAClBC,GAAsB,cACtBC,GAAyB,2BACzBC,GAAY,CAChB,SAAU,GACV,MAAO,GACP,SAAU,EACZ,EACMC,GAAgB,CACpB,SAAU,mBACV,MAAO,UACP,SAAU,SACZ,SAMA,MAAMC,WAActP,EAAc,CAChC,YAAYzkC,EAASmkC,EAAQ,CAC3B,MAAMnkC,EAASmkC,CAAM,EACrB,KAAK,QAAUW,EAAe,QAAQ4O,GAAiB,KAAK,QAAQ,EACpE,KAAK,UAAY,KAAK,sBACtB,KAAK,WAAa,KAAK,uBACvB,KAAK,SAAW,GAChB,KAAK,iBAAmB,GACxB,KAAK,WAAa,IAAI7B,GACtB,KAAK,mBAAkB,CACxB,CAGD,WAAW,SAAU,CACnB,OAAOgC,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOxB,EACR,CAGD,OAAOlD,EAAe,CACpB,OAAO,KAAK,SAAW,KAAK,KAAM,EAAG,KAAK,KAAKA,CAAa,CAC7D,CACD,KAAKA,EAAe,CACd,KAAK,UAAY,KAAK,kBAGRrN,EAAa,QAAQ,KAAK,SAAU+Q,GAAc,CAClE,cAAA1D,CACN,CAAK,EACa,mBAGd,KAAK,SAAW,GAChB,KAAK,iBAAmB,GACxB,KAAK,WAAW,OAChB,SAAS,KAAK,UAAU,IAAIiE,EAAe,EAC3C,KAAK,cAAa,EAClB,KAAK,UAAU,KAAK,IAAM,KAAK,aAAajE,CAAa,CAAC,EAC3D,CACD,MAAO,CACD,CAAC,KAAK,UAAY,KAAK,kBAGTrN,EAAa,QAAQ,KAAK,SAAU4Q,EAAY,EACpD,mBAGd,KAAK,SAAW,GAChB,KAAK,iBAAmB,GACxB,KAAK,WAAW,aAChB,KAAK,SAAS,UAAU,OAAOY,EAAiB,EAChD,KAAK,eAAe,IAAM,KAAK,WAAU,EAAI,KAAK,SAAU,KAAK,YAAW,CAAE,EAC/E,CACD,SAAU,CACRxR,EAAa,IAAI,OAAQyQ,EAAW,EACpCzQ,EAAa,IAAI,KAAK,QAASyQ,EAAW,EAC1C,KAAK,UAAU,UACf,KAAK,WAAW,aAChB,MAAM,QAAO,CACd,CACD,cAAe,CACb,KAAK,cAAa,CACnB,CAGD,qBAAsB,CACpB,OAAO,IAAI7B,GAAS,CAClB,UAAW,EAAQ,KAAK,QAAQ,SAEhC,WAAY,KAAK,YAAa,CACpC,CAAK,CACF,CACD,sBAAuB,CACrB,OAAO,IAAIY,GAAU,CACnB,YAAa,KAAK,QACxB,CAAK,CACF,CACD,aAAanC,EAAe,CAErB,SAAS,KAAK,SAAS,KAAK,QAAQ,GACvC,SAAS,KAAK,OAAO,KAAK,QAAQ,EAEpC,KAAK,SAAS,MAAM,QAAU,QAC9B,KAAK,SAAS,gBAAgB,aAAa,EAC3C,KAAK,SAAS,aAAa,aAAc,EAAI,EAC7C,KAAK,SAAS,aAAa,OAAQ,QAAQ,EAC3C,KAAK,SAAS,UAAY,EAC1B,MAAM4E,EAAYlP,EAAe,QAAQ6O,GAAqB,KAAK,OAAO,EACtEK,IACFA,EAAU,UAAY,GAExBnU,GAAO,KAAK,QAAQ,EACpB,KAAK,SAAS,UAAU,IAAI0T,EAAiB,EAC7C,MAAMU,EAAqB,IAAM,CAC3B,KAAK,QAAQ,OACf,KAAK,WAAW,WAElB,KAAK,iBAAmB,GACxBlS,EAAa,QAAQ,KAAK,SAAUgR,GAAe,CACjD,cAAA3D,CACR,CAAO,CACP,EACI,KAAK,eAAe6E,EAAoB,KAAK,QAAS,KAAK,YAAW,CAAE,CACzE,CACD,oBAAqB,CACnBlS,EAAa,GAAG,KAAK,SAAUoR,GAAyBjxC,GAAS,CAC/D,GAAIA,EAAM,MAAQwwC,GAGlB,IAAI,KAAK,QAAQ,SAAU,CACzB,KAAK,KAAI,EACT,OAEF,KAAK,2BAA0B,EACrC,CAAK,EACD3Q,EAAa,GAAG,OAAQiR,GAAgB,IAAM,CACxC,KAAK,UAAY,CAAC,KAAK,kBACzB,KAAK,cAAa,CAE1B,CAAK,EACDjR,EAAa,GAAG,KAAK,SAAUmR,GAAyBhxC,GAAS,CAE/D6/B,EAAa,IAAI,KAAK,SAAUkR,GAAqBiB,GAAU,CAC7D,GAAI,OAAK,WAAahyC,EAAM,QAAU,KAAK,WAAagyC,EAAO,QAG/D,IAAI,KAAK,QAAQ,WAAa,SAAU,CACtC,KAAK,2BAA0B,EAC/B,OAEE,KAAK,QAAQ,UACf,KAAK,KAAI,EAEnB,CAAO,CACP,CAAK,CACF,CACD,YAAa,CACX,KAAK,SAAS,MAAM,QAAU,OAC9B,KAAK,SAAS,aAAa,cAAe,EAAI,EAC9C,KAAK,SAAS,gBAAgB,YAAY,EAC1C,KAAK,SAAS,gBAAgB,MAAM,EACpC,KAAK,iBAAmB,GACxB,KAAK,UAAU,KAAK,IAAM,CACxB,SAAS,KAAK,UAAU,OAAOb,EAAe,EAC9C,KAAK,kBAAiB,EACtB,KAAK,WAAW,QAChBtR,EAAa,QAAQ,KAAK,SAAU8Q,EAAc,CACxD,CAAK,CACF,CACD,aAAc,CACZ,OAAO,KAAK,SAAS,UAAU,SAASS,EAAiB,CAC1D,CACD,4BAA6B,CAE3B,GADkBvR,EAAa,QAAQ,KAAK,SAAU6Q,EAAsB,EAC9D,iBACZ,OAEF,MAAMuB,EAAqB,KAAK,SAAS,aAAe,SAAS,gBAAgB,aAC3EC,EAAmB,KAAK,SAAS,MAAM,UAEzCA,IAAqB,UAAY,KAAK,SAAS,UAAU,SAASZ,EAAiB,IAGlFW,IACH,KAAK,SAAS,MAAM,UAAY,UAElC,KAAK,SAAS,UAAU,IAAIX,EAAiB,EAC7C,KAAK,eAAe,IAAM,CACxB,KAAK,SAAS,UAAU,OAAOA,EAAiB,EAChD,KAAK,eAAe,IAAM,CACxB,KAAK,SAAS,MAAM,UAAYY,CACxC,EAAS,KAAK,OAAO,CACrB,EAAO,KAAK,OAAO,EACf,KAAK,SAAS,QACf,CAMD,eAAgB,CACd,MAAMD,EAAqB,KAAK,SAAS,aAAe,SAAS,gBAAgB,aAC3ElC,EAAiB,KAAK,WAAW,SAAQ,EACzCoC,EAAoBpC,EAAiB,EAC3C,GAAIoC,GAAqB,CAACF,EAAoB,CAC5C,MAAMjpB,EAAW+U,KAAU,cAAgB,eAC3C,KAAK,SAAS,MAAM/U,CAAQ,EAAI,GAAG+mB,MAErC,GAAI,CAACoC,GAAqBF,EAAoB,CAC5C,MAAMjpB,EAAW+U,KAAU,eAAiB,cAC5C,KAAK,SAAS,MAAM/U,CAAQ,EAAI,GAAG+mB,MAEtC,CACD,mBAAoB,CAClB,KAAK,SAAS,MAAM,YAAc,GAClC,KAAK,SAAS,MAAM,aAAe,EACpC,CAGD,OAAO,gBAAgB9N,EAAQiL,EAAe,CAC5C,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMvlC,EAAOkqC,GAAM,oBAAoB,KAAM5P,CAAM,EACnD,GAAI,OAAOA,GAAW,SAGtB,IAAI,OAAOt6B,EAAKs6B,CAAM,EAAM,IAC1B,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,EAAEiL,CAAa,EAChC,CAAK,CACF,CACH,EAMArN,EAAa,GAAG,SAAUqR,GAAwBQ,GAAwB,SAAU1xC,EAAO,CACzF,MAAMuY,EAASqqB,EAAe,uBAAuB,IAAI,EACrD,CAAC,IAAK,MAAM,EAAE,SAAS,KAAK,OAAO,GACrC5iC,EAAM,eAAc,EAEtB6/B,EAAa,IAAItnB,EAAQq4B,GAAcwB,GAAa,CAC9CA,EAAU,kBAIdvS,EAAa,IAAItnB,EAAQo4B,GAAgB,IAAM,CACzCvT,GAAU,IAAI,GAChB,KAAK,MAAK,CAElB,CAAK,CACL,CAAG,EAGD,MAAMiV,EAAczP,EAAe,QAAQ2O,EAAe,EACtDc,GACFR,GAAM,YAAYQ,CAAW,EAAE,KAAI,EAExBR,GAAM,oBAAoBt5B,CAAM,EACxC,OAAO,IAAI,CAClB,CAAC,EACDyqB,GAAqB6O,EAAK,EAM1B7T,GAAmB6T,EAAK,EAcxB,MAAMS,GAAS,YACTC,GAAa,eACbC,GAAc,IAAID,KAClBE,GAAiB,YACjBC,GAAwB,OAAOF,KAAcC,KAC7CE,GAAa,SACbC,GAAoB,OACpBC,GAAuB,UACvBC,GAAoB,SACpBC,GAAsB,qBACtBC,GAAgB,kBAChBC,GAAe,OAAOT,KACtBU,GAAgB,QAAQV,KACxBW,GAAe,OAAOX,KACtBY,GAAuB,gBAAgBZ,KACvCa,GAAiB,SAASb,KAC1Bc,GAAe,SAASd,KACxBe,GAAyB,QAAQf,KAAcC,KAC/Ce,GAAwB,kBAAkBhB,KAC1CiB,GAAyB,+BACzBC,GAAY,CAChB,SAAU,GACV,SAAU,GACV,OAAQ,EACV,EACMC,GAAgB,CACpB,SAAU,mBACV,SAAU,UACV,OAAQ,SACV,EAMA,MAAMC,WAAkBrR,EAAc,CACpC,YAAYzkC,EAASmkC,EAAQ,CAC3B,MAAMnkC,EAASmkC,CAAM,EACrB,KAAK,SAAW,GAChB,KAAK,UAAY,KAAK,sBACtB,KAAK,WAAa,KAAK,uBACvB,KAAK,mBAAkB,CACxB,CAGD,WAAW,SAAU,CACnB,OAAOyR,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOrB,EACR,CAGD,OAAOpF,EAAe,CACpB,OAAO,KAAK,SAAW,KAAK,KAAM,EAAG,KAAK,KAAKA,CAAa,CAC7D,CACD,KAAKA,EAAe,CAOlB,GANI,KAAK,UAGSrN,EAAa,QAAQ,KAAK,SAAUoT,GAAc,CAClE,cAAA/F,CACN,CAAK,EACa,iBACZ,OAEF,KAAK,SAAW,GAChB,KAAK,UAAU,OACV,KAAK,QAAQ,QAChB,IAAIyC,GAAe,EAAG,OAExB,KAAK,SAAS,aAAa,aAAc,EAAI,EAC7C,KAAK,SAAS,aAAa,OAAQ,QAAQ,EAC3C,KAAK,SAAS,UAAU,IAAIkD,EAAoB,EAChD,MAAMxK,EAAmB,IAAM,EACzB,CAAC,KAAK,QAAQ,QAAU,KAAK,QAAQ,WACvC,KAAK,WAAW,WAElB,KAAK,SAAS,UAAU,IAAIuK,EAAiB,EAC7C,KAAK,SAAS,UAAU,OAAOC,EAAoB,EACnDhT,EAAa,QAAQ,KAAK,SAAUqT,GAAe,CACjD,cAAAhG,CACR,CAAO,CACP,EACI,KAAK,eAAe7E,EAAkB,KAAK,SAAU,EAAI,CAC1D,CACD,MAAO,CAKL,GAJI,CAAC,KAAK,UAGQxI,EAAa,QAAQ,KAAK,SAAUsT,EAAY,EACpD,iBACZ,OAEF,KAAK,WAAW,aAChB,KAAK,SAAS,OACd,KAAK,SAAW,GAChB,KAAK,SAAS,UAAU,IAAIL,EAAiB,EAC7C,KAAK,UAAU,OACf,MAAMe,EAAmB,IAAM,CAC7B,KAAK,SAAS,UAAU,OAAOjB,GAAmBE,EAAiB,EACnE,KAAK,SAAS,gBAAgB,YAAY,EAC1C,KAAK,SAAS,gBAAgB,MAAM,EAC/B,KAAK,QAAQ,QAChB,IAAInD,GAAe,EAAG,QAExB9P,EAAa,QAAQ,KAAK,SAAUwT,EAAc,CACxD,EACI,KAAK,eAAeQ,EAAkB,KAAK,SAAU,EAAI,CAC1D,CACD,SAAU,CACR,KAAK,UAAU,UACf,KAAK,WAAW,aAChB,MAAM,QAAO,CACd,CAGD,qBAAsB,CACpB,MAAMC,EAAgB,IAAM,CAC1B,GAAI,KAAK,QAAQ,WAAa,SAAU,CACtCjU,EAAa,QAAQ,KAAK,SAAUuT,EAAoB,EACxD,OAEF,KAAK,KAAI,CACf,EAGUhW,EAAY,EAAQ,KAAK,QAAQ,SACvC,OAAO,IAAIqR,GAAS,CAClB,UAAWsE,GACX,UAAA3V,EACA,WAAY,GACZ,YAAa,KAAK,SAAS,WAC3B,cAAeA,EAAY0W,EAAgB,IACjD,CAAK,CACF,CACD,sBAAuB,CACrB,OAAO,IAAIzE,GAAU,CACnB,YAAa,KAAK,QACxB,CAAK,CACF,CACD,oBAAqB,CACnBxP,EAAa,GAAG,KAAK,SAAU2T,GAAuBxzC,GAAS,CAC7D,GAAIA,EAAM,MAAQ2yC,GAGlB,IAAI,KAAK,QAAQ,SAAU,CACzB,KAAK,KAAI,EACT,OAEF9S,EAAa,QAAQ,KAAK,SAAUuT,EAAoB,EAC9D,CAAK,CACF,CAGD,OAAO,gBAAgBnR,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAOisC,GAAU,oBAAoB,KAAM3R,CAAM,EACvD,GAAI,OAAOA,GAAW,SAGtB,IAAIt6B,EAAKs6B,CAAM,IAAM,QAAaA,EAAO,WAAW,GAAG,GAAKA,IAAW,cACrE,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,EAAE,IAAI,EACvB,CAAK,CACF,CACH,CAMApC,EAAa,GAAG,SAAU0T,GAAwBE,GAAwB,SAAUzzC,EAAO,CACzF,MAAMuY,EAASqqB,EAAe,uBAAuB,IAAI,EAIzD,GAHI,CAAC,IAAK,MAAM,EAAE,SAAS,KAAK,OAAO,GACrC5iC,EAAM,eAAc,EAElBw9B,GAAW,IAAI,EACjB,OAEFqC,EAAa,IAAItnB,EAAQ86B,GAAgB,IAAM,CAEzCjW,GAAU,IAAI,GAChB,KAAK,MAAK,CAEhB,CAAG,EAGD,MAAMiV,EAAczP,EAAe,QAAQoQ,EAAa,EACpDX,GAAeA,IAAgB95B,GACjCq7B,GAAU,YAAYvB,CAAW,EAAE,KAAI,EAE5BuB,GAAU,oBAAoBr7B,CAAM,EAC5C,OAAO,IAAI,CAClB,CAAC,EACDsnB,EAAa,GAAG,OAAQ6S,GAAuB,IAAM,CACnD,UAAW/V,KAAYiG,EAAe,KAAKoQ,EAAa,EACtDY,GAAU,oBAAoBjX,CAAQ,EAAE,KAAI,CAEhD,CAAC,EACDkD,EAAa,GAAG,OAAQyT,GAAc,IAAM,CAC1C,UAAWx1C,KAAW8kC,EAAe,KAAK,8CAA8C,EAClF,iBAAiB9kC,CAAO,EAAE,WAAa,SACzC81C,GAAU,oBAAoB91C,CAAO,EAAE,KAAI,CAGjD,CAAC,EACDklC,GAAqB4Q,EAAS,EAM9B5V,GAAmB4V,EAAS,EAU5B,MAAMG,GAAyB,iBACzBC,GAAmB,CAEvB,IAAK,CAAC,QAAS,MAAO,KAAM,OAAQ,OAAQD,EAAsB,EAClE,EAAG,CAAC,SAAU,OAAQ,QAAS,KAAK,EACpC,KAAM,CAAE,EACR,EAAG,CAAE,EACL,GAAI,CAAE,EACN,IAAK,CAAE,EACP,KAAM,CAAE,EACR,IAAK,CAAE,EACP,GAAI,CAAE,EACN,GAAI,CAAE,EACN,GAAI,CAAE,EACN,GAAI,CAAE,EACN,GAAI,CAAE,EACN,GAAI,CAAE,EACN,GAAI,CAAE,EACN,GAAI,CAAE,EACN,EAAG,CAAE,EACL,IAAK,CAAC,MAAO,SAAU,MAAO,QAAS,QAAS,QAAQ,EACxD,GAAI,CAAE,EACN,GAAI,CAAE,EACN,EAAG,CAAE,EACL,IAAK,CAAE,EACP,EAAG,CAAE,EACL,MAAO,CAAE,EACT,KAAM,CAAE,EACR,IAAK,CAAE,EACP,IAAK,CAAE,EACP,OAAQ,CAAE,EACV,EAAG,CAAE,EACL,GAAI,CAAE,CACR,EAGME,GAAgB,IAAI,IAAI,CAAC,aAAc,OAAQ,OAAQ,WAAY,WAAY,SAAU,MAAO,YAAY,CAAC,EAS7GC,GAAmB,0DACnBC,GAAmB,CAAC5kC,EAAW6kC,IAAyB,CAC5D,MAAM52C,EAAgB+R,EAAU,SAAS,YAAW,EACpD,OAAI6kC,EAAqB,SAAS52C,CAAa,EACzCy2C,GAAc,IAAIz2C,CAAa,EAC1B,EAAQ02C,GAAiB,KAAK3kC,EAAU,SAAS,EAEnD,GAIF6kC,EAAqB,OAAOC,GAAkBA,aAA0B,MAAM,EAAE,KAAK5iC,GAASA,EAAM,KAAKjU,CAAa,CAAC,CAChI,EACA,SAAS82C,GAAaC,EAAYC,EAAWC,EAAkB,CAC7D,GAAI,CAACF,EAAW,OACd,OAAOA,EAET,GAAIE,GAAoB,OAAOA,GAAqB,WAClD,OAAOA,EAAiBF,CAAU,EAGpC,MAAMG,EADY,IAAI,OAAO,YACK,gBAAgBH,EAAY,WAAW,EACnElvC,EAAW,CAAE,EAAC,OAAO,GAAGqvC,EAAgB,KAAK,iBAAiB,GAAG,CAAC,EACxE,UAAW52C,KAAWuH,EAAU,CAC9B,MAAMsvC,EAAc72C,EAAQ,SAAS,YAAW,EAChD,GAAI,CAAC,OAAO,KAAK02C,CAAS,EAAE,SAASG,CAAW,EAAG,CACjD72C,EAAQ,OAAM,EACd,SAEF,MAAM82C,EAAgB,GAAG,OAAO,GAAG92C,EAAQ,UAAU,EAC/C+2C,EAAoB,GAAG,OAAOL,EAAU,GAAG,GAAK,GAAIA,EAAUG,CAAW,GAAK,CAAE,GACtF,UAAWplC,KAAaqlC,EACjBT,GAAiB5kC,EAAWslC,CAAiB,GAChD/2C,EAAQ,gBAAgByR,EAAU,QAAQ,EAIhD,OAAOmlC,EAAgB,KAAK,SAC9B,CAcA,MAAMI,GAAS,kBACTC,GAAY,CAChB,UAAWf,GACX,QAAS,CAAE,EAEX,WAAY,GACZ,KAAM,GACN,SAAU,GACV,WAAY,KACZ,SAAU,aACZ,EACMgB,GAAgB,CACpB,UAAW,SACX,QAAS,SACT,WAAY,oBACZ,KAAM,UACN,SAAU,UACV,WAAY,kBACZ,SAAU,QACZ,EACMC,GAAqB,CACzB,MAAO,iCACP,SAAU,kBACZ,EAMA,MAAMC,WAAwB1S,EAAO,CACnC,YAAYP,EAAQ,CAClB,QACA,KAAK,QAAU,KAAK,WAAWA,CAAM,CACtC,CAGD,WAAW,SAAU,CACnB,OAAO8S,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOF,EACR,CAGD,YAAa,CACX,OAAO,OAAO,OAAO,KAAK,QAAQ,OAAO,EAAE,IAAI7S,GAAU,KAAK,yBAAyBA,CAAM,CAAC,EAAE,OAAO,OAAO,CAC/G,CACD,YAAa,CACX,OAAO,KAAK,aAAa,OAAS,CACnC,CACD,cAAchtB,EAAS,CACrB,YAAK,cAAcA,CAAO,EAC1B,KAAK,QAAQ,QAAU,CACrB,GAAG,KAAK,QAAQ,QAChB,GAAGA,CACT,EACW,IACR,CACD,QAAS,CACP,MAAMkgC,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,KAAK,eAAe,KAAK,QAAQ,QAAQ,EACrE,SAAW,CAACxY,EAAUp6B,CAAI,IAAK,OAAO,QAAQ,KAAK,QAAQ,OAAO,EAChE,KAAK,YAAY4yC,EAAiB5yC,EAAMo6B,CAAQ,EAElD,MAAMlvB,EAAW0nC,EAAgB,SAAS,CAAC,EACrCC,EAAa,KAAK,yBAAyB,KAAK,QAAQ,UAAU,EACxE,OAAIA,GACF3nC,EAAS,UAAU,IAAI,GAAG2nC,EAAW,MAAM,GAAG,CAAC,EAE1C3nC,CACR,CAGD,iBAAiBw0B,EAAQ,CACvB,MAAM,iBAAiBA,CAAM,EAC7B,KAAK,cAAcA,EAAO,OAAO,CAClC,CACD,cAAch3B,EAAK,CACjB,SAAW,CAAC0xB,EAAU1nB,CAAO,IAAK,OAAO,QAAQhK,CAAG,EAClD,MAAM,iBAAiB,CACrB,SAAA0xB,EACA,MAAO1nB,CACR,EAAEggC,EAAkB,CAExB,CACD,YAAYxnC,EAAUwH,EAAS0nB,EAAU,CACvC,MAAM0Y,EAAkBzS,EAAe,QAAQjG,EAAUlvB,CAAQ,EACjE,GAAK4nC,EAIL,IADApgC,EAAU,KAAK,yBAAyBA,CAAO,EAC3C,CAACA,EAAS,CACZogC,EAAgB,OAAM,EACtB,OAEF,GAAIhtB,GAAUpT,CAAO,EAAG,CACtB,KAAK,sBAAsBkoB,GAAWloB,CAAO,EAAGogC,CAAe,EAC/D,OAEF,GAAI,KAAK,QAAQ,KAAM,CACrBA,EAAgB,UAAY,KAAK,eAAepgC,CAAO,EACvD,OAEFogC,EAAgB,YAAcpgC,EAC/B,CACD,eAAehK,EAAK,CAClB,OAAO,KAAK,QAAQ,SAAWqpC,GAAarpC,EAAK,KAAK,QAAQ,UAAW,KAAK,QAAQ,UAAU,EAAIA,CACrG,CACD,yBAAyBA,EAAK,CAC5B,OAAOmzB,EAAQnzB,EAAK,CAAC,IAAI,CAAC,CAC3B,CACD,sBAAsBnN,EAASu3C,EAAiB,CAC9C,GAAI,KAAK,QAAQ,KAAM,CACrBA,EAAgB,UAAY,GAC5BA,EAAgB,OAAOv3C,CAAO,EAC9B,OAEFu3C,EAAgB,YAAcv3C,EAAQ,WACvC,CACH,CAcA,MAAMw3C,GAAS,UACTC,GAAwB,IAAI,IAAI,CAAC,WAAY,YAAa,YAAY,CAAC,EACvEC,GAAoB,OACpBC,GAAmB,QACnBC,GAAoB,OACpBC,GAAyB,iBACzBC,GAAiB,IAAIH,KACrBI,GAAmB,gBACnBC,GAAgB,QAChBC,GAAgB,QAChBC,GAAgB,QAChBC,GAAiB,SACjBC,GAAe,OACfC,GAAiB,SACjBC,GAAe,OACfC,GAAgB,QAChBC,GAAiB,WACjBC,GAAgB,QAChBC,GAAkB,UAClBC,GAAmB,WACnBC,GAAmB,aACnBC,GAAmB,aACnBC,GAAgB,CACpB,KAAM,OACN,IAAK,MACL,MAAO7Y,KAAU,OAAS,QAC1B,OAAQ,SACR,KAAMA,KAAU,QAAU,MAC5B,EACM8Y,GAAY,CAChB,UAAW7C,GACX,UAAW,GACX,SAAU,kBACV,UAAW,GACX,YAAa,GACb,MAAO,EACP,mBAAoB,CAAC,MAAO,QAAS,SAAU,MAAM,EACrD,KAAM,GACN,OAAQ,CAAC,EAAG,CAAC,EACb,UAAW,MACX,aAAc,KACd,SAAU,GACV,WAAY,KACZ,SAAU,GACV,SAAU,+GACV,MAAO,GACP,QAAS,aACX,EACM8C,GAAgB,CACpB,UAAW,SACX,UAAW,UACX,SAAU,mBACV,UAAW,2BACX,YAAa,oBACb,MAAO,kBACP,mBAAoB,QACpB,KAAM,UACN,OAAQ,0BACR,UAAW,oBACX,aAAc,yBACd,SAAU,UACV,WAAY,kBACZ,SAAU,mBACV,SAAU,SACV,MAAO,4BACP,QAAS,QACX,SAMA,MAAMC,WAAgBxU,EAAc,CAClC,YAAYzkC,EAASmkC,EAAQ,CAC3B,GAAI,OAAOkL,GAAW,IACpB,MAAM,IAAI,UAAU,6DAA8D,EAEpF,MAAMrvC,EAASmkC,CAAM,EAGrB,KAAK,WAAa,GAClB,KAAK,SAAW,EAChB,KAAK,WAAa,KAClB,KAAK,eAAiB,GACtB,KAAK,QAAU,KACf,KAAK,iBAAmB,KACxB,KAAK,YAAc,KAGnB,KAAK,IAAM,KACX,KAAK,cAAa,EACb,KAAK,QAAQ,UAChB,KAAK,UAAS,CAEjB,CAGD,WAAW,SAAU,CACnB,OAAO4U,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOxB,EACR,CAGD,QAAS,CACP,KAAK,WAAa,EACnB,CACD,SAAU,CACR,KAAK,WAAa,EACnB,CACD,eAAgB,CACd,KAAK,WAAa,CAAC,KAAK,UACzB,CACD,QAAS,CACP,GAAK,KAAK,WAIV,IADA,KAAK,eAAe,MAAQ,CAAC,KAAK,eAAe,MAC7C,KAAK,WAAY,CACnB,KAAK,OAAM,EACX,OAEF,KAAK,OAAM,EACZ,CACD,SAAU,CACR,aAAa,KAAK,QAAQ,EAC1BzV,EAAa,IAAI,KAAK,SAAS,QAAQ+V,EAAc,EAAGC,GAAkB,KAAK,iBAAiB,EAC5F,KAAK,SAAS,aAAa,wBAAwB,GACrD,KAAK,SAAS,aAAa,QAAS,KAAK,SAAS,aAAa,wBAAwB,CAAC,EAE1F,KAAK,eAAc,EACnB,MAAM,QAAO,CACd,CACD,MAAO,CACL,GAAI,KAAK,SAAS,MAAM,UAAY,OAClC,MAAM,IAAI,MAAM,qCAAqC,EAEvD,GAAI,EAAE,KAAK,eAAgB,GAAI,KAAK,YAClC,OAEF,MAAMzD,EAAYvS,EAAa,QAAQ,KAAK,SAAU,KAAK,YAAY,UAAUuW,EAAY,CAAC,EAExFY,GADavZ,GAAe,KAAK,QAAQ,GACb,KAAK,SAAS,cAAc,iBAAiB,SAAS,KAAK,QAAQ,EACrG,GAAI2U,EAAU,kBAAoB,CAAC4E,EACjC,OAIF,KAAK,eAAc,EACnB,MAAMC,EAAM,KAAK,iBACjB,KAAK,SAAS,aAAa,mBAAoBA,EAAI,aAAa,IAAI,CAAC,EACrE,KAAM,CACJ,UAAAlvC,CACN,EAAQ,KAAK,QAYT,GAXK,KAAK,SAAS,cAAc,gBAAgB,SAAS,KAAK,GAAG,IAChEA,EAAU,OAAOkvC,CAAG,EACpBpX,EAAa,QAAQ,KAAK,SAAU,KAAK,YAAY,UAAUyW,EAAc,CAAC,GAEhF,KAAK,QAAU,KAAK,cAAcW,CAAG,EACrCA,EAAI,UAAU,IAAIvB,EAAiB,EAM/B,iBAAkB,SAAS,gBAC7B,UAAW53C,IAAW,GAAG,OAAO,GAAG,SAAS,KAAK,QAAQ,EACvD+hC,EAAa,GAAG/hC,EAAS,YAAa4/B,EAAI,EAG9C,MAAM0M,EAAW,IAAM,CACrBvK,EAAa,QAAQ,KAAK,SAAU,KAAK,YAAY,UAAUwW,EAAa,CAAC,EACzE,KAAK,aAAe,IACtB,KAAK,OAAM,EAEb,KAAK,WAAa,EACxB,EACI,KAAK,eAAejM,EAAU,KAAK,IAAK,KAAK,YAAW,CAAE,CAC3D,CACD,MAAO,CAKL,GAJI,CAAC,KAAK,YAGQvK,EAAa,QAAQ,KAAK,SAAU,KAAK,YAAY,UAAUqW,EAAY,CAAC,EAChF,iBACZ,OAOF,GALY,KAAK,iBACb,UAAU,OAAOR,EAAiB,EAIlC,iBAAkB,SAAS,gBAC7B,UAAW53C,IAAW,GAAG,OAAO,GAAG,SAAS,KAAK,QAAQ,EACvD+hC,EAAa,IAAI/hC,EAAS,YAAa4/B,EAAI,EAG/C,KAAK,eAAesY,EAAa,EAAI,GACrC,KAAK,eAAeD,EAAa,EAAI,GACrC,KAAK,eAAeD,EAAa,EAAI,GACrC,KAAK,WAAa,KAElB,MAAM1L,EAAW,IAAM,CACjB,KAAK,yBAGJ,KAAK,YACR,KAAK,eAAc,EAErB,KAAK,SAAS,gBAAgB,kBAAkB,EAChDvK,EAAa,QAAQ,KAAK,SAAU,KAAK,YAAY,UAAUsW,EAAc,CAAC,EACpF,EACI,KAAK,eAAe/L,EAAU,KAAK,IAAK,KAAK,YAAW,CAAE,CAC3D,CACD,QAAS,CACH,KAAK,SACP,KAAK,QAAQ,QAEhB,CAGD,gBAAiB,CACf,MAAO,EAAQ,KAAK,UAAS,CAC9B,CACD,gBAAiB,CACf,OAAK,KAAK,MACR,KAAK,IAAM,KAAK,kBAAkB,KAAK,aAAe,KAAK,uBAAsB,CAAE,GAE9E,KAAK,GACb,CACD,kBAAkBn1B,EAAS,CACzB,MAAMgiC,EAAM,KAAK,oBAAoBhiC,CAAO,EAAE,OAAM,EAGpD,GAAI,CAACgiC,EACH,OAAO,KAETA,EAAI,UAAU,OAAOzB,GAAmBE,EAAiB,EAEzDuB,EAAI,UAAU,IAAI,MAAM,KAAK,YAAY,WAAW,EACpD,MAAMC,EAAQh2C,GAAO,KAAK,YAAY,IAAI,EAAE,WAC5C,OAAA+1C,EAAI,aAAa,KAAMC,CAAK,EACxB,KAAK,eACPD,EAAI,UAAU,IAAIzB,EAAiB,EAE9ByB,CACR,CACD,WAAWhiC,EAAS,CAClB,KAAK,YAAcA,EACf,KAAK,aACP,KAAK,eAAc,EACnB,KAAK,KAAI,EAEZ,CACD,oBAAoBA,EAAS,CAC3B,OAAI,KAAK,iBACP,KAAK,iBAAiB,cAAcA,CAAO,EAE3C,KAAK,iBAAmB,IAAIigC,GAAgB,CAC1C,GAAG,KAAK,QAGR,QAAAjgC,EACA,WAAY,KAAK,yBAAyB,KAAK,QAAQ,WAAW,CAC1E,CAAO,EAEI,KAAK,gBACb,CACD,wBAAyB,CACvB,MAAO,CACL,CAAC0gC,EAAsB,EAAG,KAAK,UAAW,CAChD,CACG,CACD,WAAY,CACV,OAAO,KAAK,yBAAyB,KAAK,QAAQ,KAAK,GAAK,KAAK,SAAS,aAAa,wBAAwB,CAChH,CAGD,6BAA6B31C,EAAO,CAClC,OAAO,KAAK,YAAY,oBAAoBA,EAAM,eAAgB,KAAK,mBAAkB,CAAE,CAC5F,CACD,aAAc,CACZ,OAAO,KAAK,QAAQ,WAAa,KAAK,KAAO,KAAK,IAAI,UAAU,SAASw1C,EAAiB,CAC3F,CACD,UAAW,CACT,OAAO,KAAK,KAAO,KAAK,IAAI,UAAU,SAASE,EAAiB,CACjE,CACD,cAAcuB,EAAK,CACjB,MAAM3vB,EAAY8W,EAAQ,KAAK,QAAQ,UAAW,CAAC,KAAM6Y,EAAK,KAAK,QAAQ,CAAC,EACtEE,EAAaP,GAActvB,EAAU,YAAa,GACxD,OAAOgmB,GAAoB,KAAK,SAAU2J,EAAK,KAAK,iBAAiBE,CAAU,CAAC,CACjF,CACD,YAAa,CACX,KAAM,CACJ,OAAAr4C,CACN,EAAQ,KAAK,QACT,OAAI,OAAOA,GAAW,SACbA,EAAO,MAAM,GAAG,EAAE,IAAIzE,GAAS,OAAO,SAASA,EAAO,EAAE,CAAC,EAE9D,OAAOyE,GAAW,WACb2uC,GAAc3uC,EAAO2uC,EAAY,KAAK,QAAQ,EAEhD3uC,CACR,CACD,yBAAyBmM,EAAK,CAC5B,OAAOmzB,EAAQnzB,EAAK,CAAC,KAAK,QAAQ,CAAC,CACpC,CACD,iBAAiBksC,EAAY,CAC3B,MAAMzJ,EAAwB,CAC5B,UAAWyJ,EACX,UAAW,CAAC,CACV,KAAM,OACN,QAAS,CACP,mBAAoB,KAAK,QAAQ,kBAClC,CACT,EAAS,CACD,KAAM,SACN,QAAS,CACP,OAAQ,KAAK,WAAY,CAC1B,CACT,EAAS,CACD,KAAM,kBACN,QAAS,CACP,SAAU,KAAK,QAAQ,QACxB,CACT,EAAS,CACD,KAAM,QACN,QAAS,CACP,QAAS,IAAI,KAAK,YAAY,YAC/B,CACT,EAAS,CACD,KAAM,kBACN,QAAS,GACT,MAAO,aACP,GAAIxvC,GAAQ,CAGV,KAAK,eAAc,EAAG,aAAa,wBAAyBA,EAAK,MAAM,SAAS,CACjF,CACT,CAAO,CACP,EACI,MAAO,CACL,GAAG+lC,EACH,GAAGtP,EAAQ,KAAK,QAAQ,aAAc,CAACsP,CAAqB,CAAC,CACnE,CACG,CACD,eAAgB,CACd,MAAM0J,EAAW,KAAK,QAAQ,QAAQ,MAAM,GAAG,EAC/C,UAAW9M,KAAW8M,EACpB,GAAI9M,IAAY,QACdzK,EAAa,GAAG,KAAK,SAAU,KAAK,YAAY,UAAU0W,EAAa,EAAG,KAAK,QAAQ,SAAUv2C,GAAS,CACxF,KAAK,6BAA6BA,CAAK,EAC/C,OAAM,CACxB,CAAS,UACQsqC,IAAY2L,GAAgB,CACrC,MAAMoB,EAAU/M,IAAYwL,GAAgB,KAAK,YAAY,UAAUY,EAAgB,EAAI,KAAK,YAAY,UAAUF,EAAe,EAC/Hc,EAAWhN,IAAYwL,GAAgB,KAAK,YAAY,UAAUa,EAAgB,EAAI,KAAK,YAAY,UAAUF,EAAgB,EACvI5W,EAAa,GAAG,KAAK,SAAUwX,EAAS,KAAK,QAAQ,SAAUr3C,GAAS,CACtE,MAAMqT,EAAU,KAAK,6BAA6BrT,CAAK,EACvDqT,EAAQ,eAAerT,EAAM,OAAS,UAAY+1C,GAAgBD,EAAa,EAAI,GACnFziC,EAAQ,OAAM,CACxB,CAAS,EACDwsB,EAAa,GAAG,KAAK,SAAUyX,EAAU,KAAK,QAAQ,SAAUt3C,GAAS,CACvE,MAAMqT,EAAU,KAAK,6BAA6BrT,CAAK,EACvDqT,EAAQ,eAAerT,EAAM,OAAS,WAAa+1C,GAAgBD,EAAa,EAAIziC,EAAQ,SAAS,SAASrT,EAAM,aAAa,EACjIqT,EAAQ,OAAM,CACxB,CAAS,EAGL,KAAK,kBAAoB,IAAM,CACzB,KAAK,UACP,KAAK,KAAI,CAEjB,EACIwsB,EAAa,GAAG,KAAK,SAAS,QAAQ+V,EAAc,EAAGC,GAAkB,KAAK,iBAAiB,CAChG,CACD,WAAY,CACV,MAAMh4B,EAAQ,KAAK,SAAS,aAAa,OAAO,EAC3CA,IAGD,CAAC,KAAK,SAAS,aAAa,YAAY,GAAK,CAAC,KAAK,SAAS,YAAY,QAC1E,KAAK,SAAS,aAAa,aAAcA,CAAK,EAEhD,KAAK,SAAS,aAAa,yBAA0BA,CAAK,EAC1D,KAAK,SAAS,gBAAgB,OAAO,EACtC,CACD,QAAS,CACP,GAAI,KAAK,YAAc,KAAK,WAAY,CACtC,KAAK,WAAa,GAClB,OAEF,KAAK,WAAa,GAClB,KAAK,YAAY,IAAM,CACjB,KAAK,YACP,KAAK,KAAI,CAEZ,EAAE,KAAK,QAAQ,MAAM,IAAI,CAC3B,CACD,QAAS,CACH,KAAK,yBAGT,KAAK,WAAa,GAClB,KAAK,YAAY,IAAM,CAChB,KAAK,YACR,KAAK,KAAI,CAEZ,EAAE,KAAK,QAAQ,MAAM,IAAI,EAC3B,CACD,YAAYrS,EAASrS,EAAS,CAC5B,aAAa,KAAK,QAAQ,EAC1B,KAAK,SAAW,WAAWqS,EAASrS,CAAO,CAC5C,CACD,sBAAuB,CACrB,OAAO,OAAO,OAAO,KAAK,cAAc,EAAE,SAAS,EAAI,CACxD,CACD,WAAW8oC,EAAQ,CACjB,MAAMsV,EAAiB1V,GAAY,kBAAkB,KAAK,QAAQ,EAClE,UAAW2V,KAAiB,OAAO,KAAKD,CAAc,EAChDhC,GAAsB,IAAIiC,CAAa,GACzC,OAAOD,EAAeC,CAAa,EAGvC,OAAAvV,EAAS,CACP,GAAGsV,EACH,GAAI,OAAOtV,GAAW,UAAYA,EAASA,EAAS,EAC1D,EACIA,EAAS,KAAK,gBAAgBA,CAAM,EACpCA,EAAS,KAAK,kBAAkBA,CAAM,EACtC,KAAK,iBAAiBA,CAAM,EACrBA,CACR,CACD,kBAAkBA,EAAQ,CACxB,OAAAA,EAAO,UAAYA,EAAO,YAAc,GAAQ,SAAS,KAAO9E,GAAW8E,EAAO,SAAS,EACvF,OAAOA,EAAO,OAAU,WAC1BA,EAAO,MAAQ,CACb,KAAMA,EAAO,MACb,KAAMA,EAAO,KACrB,GAEQ,OAAOA,EAAO,OAAU,WAC1BA,EAAO,MAAQA,EAAO,MAAM,SAAQ,GAElC,OAAOA,EAAO,SAAY,WAC5BA,EAAO,QAAUA,EAAO,QAAQ,SAAQ,GAEnCA,CACR,CACD,oBAAqB,CACnB,MAAMA,EAAS,GACf,SAAW,CAAC3jC,EAAKjE,CAAK,IAAK,OAAO,QAAQ,KAAK,OAAO,EAChD,KAAK,YAAY,QAAQiE,CAAG,IAAMjE,IACpC4nC,EAAO3jC,CAAG,EAAIjE,GAGlB,OAAA4nC,EAAO,SAAW,GAClBA,EAAO,QAAU,SAKVA,CACR,CACD,gBAAiB,CACX,KAAK,UACP,KAAK,QAAQ,UACb,KAAK,QAAU,MAEb,KAAK,MACP,KAAK,IAAI,SACT,KAAK,IAAM,KAEd,CAGD,OAAO,gBAAgBA,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAOovC,GAAQ,oBAAoB,KAAM9U,CAAM,EACrD,GAAI,OAAOA,GAAW,SAGtB,IAAI,OAAOt6B,EAAKs6B,CAAM,EAAM,IAC1B,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,IACjB,CAAK,CACF,CACH,EAMAjE,GAAmB+Y,EAAO,EAc1B,MAAMU,GAAS,UACTC,GAAiB,kBACjBC,GAAmB,gBACnBC,GAAY,CAChB,GAAGb,GAAQ,QACX,QAAS,GACT,OAAQ,CAAC,EAAG,CAAC,EACb,UAAW,QACX,SAAU,8IACV,QAAS,OACX,EACMc,GAAgB,CACpB,GAAGd,GAAQ,YACX,QAAS,gCACX,SAMA,MAAMe,WAAgBf,EAAQ,CAE5B,WAAW,SAAU,CACnB,OAAOa,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOJ,EACR,CAGD,gBAAiB,CACf,OAAO,KAAK,UAAS,GAAM,KAAK,YAAW,CAC5C,CAGD,wBAAyB,CACvB,MAAO,CACL,CAACC,EAAc,EAAG,KAAK,UAAW,EAClC,CAACC,EAAgB,EAAG,KAAK,YAAa,CAC5C,CACG,CACD,aAAc,CACZ,OAAO,KAAK,yBAAyB,KAAK,QAAQ,OAAO,CAC1D,CAGD,OAAO,gBAAgB1V,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAOmwC,GAAQ,oBAAoB,KAAM7V,CAAM,EACrD,GAAI,OAAOA,GAAW,SAGtB,IAAI,OAAOt6B,EAAKs6B,CAAM,EAAM,IAC1B,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,IACjB,CAAK,CACF,CACH,EAMAjE,GAAmB8Z,EAAO,EAc1B,MAAMC,GAAS,YACTC,GAAa,eACbC,GAAc,IAAID,KAClBE,GAAe,YACfC,GAAiB,WAAWF,KAC5BG,GAAc,QAAQH,KACtBI,GAAwB,OAAOJ,KAAcC,KAC7CI,GAA2B,gBAC3BC,GAAsB,SACtBC,GAAoB,yBACpBC,GAAwB,SACxBC,GAA0B,oBAC1BC,GAAqB,YACrBC,GAAqB,YACrBC,GAAsB,mBACtBC,GAAsB,GAAGH,OAAuBC,QAAwBD,OAAuBE,KAC/FE,GAAoB,YACpBC,GAA6B,mBAC7BC,GAAY,CAChB,OAAQ,KAER,WAAY,eACZ,aAAc,GACd,OAAQ,KACR,UAAW,CAAC,GAAK,GAAK,CAAC,CACzB,EACMC,GAAgB,CACpB,OAAQ,gBAER,WAAY,SACZ,aAAc,UACd,OAAQ,UACR,UAAW,OACb,EAMA,MAAMC,WAAkB5W,EAAc,CACpC,YAAYzkC,EAASmkC,EAAQ,CAC3B,MAAMnkC,EAASmkC,CAAM,EAGrB,KAAK,aAAe,IAAI,IACxB,KAAK,oBAAsB,IAAI,IAC/B,KAAK,aAAe,iBAAiB,KAAK,QAAQ,EAAE,YAAc,UAAY,KAAO,KAAK,SAC1F,KAAK,cAAgB,KACrB,KAAK,UAAY,KACjB,KAAK,oBAAsB,CACzB,gBAAiB,EACjB,gBAAiB,CACvB,EACI,KAAK,QAAO,CACb,CAGD,WAAW,SAAU,CACnB,OAAOgX,EACR,CACD,WAAW,aAAc,CACvB,OAAOC,EACR,CACD,WAAW,MAAO,CAChB,OAAOnB,EACR,CAGD,SAAU,CACR,KAAK,iCAAgC,EACrC,KAAK,yBAAwB,EACzB,KAAK,UACP,KAAK,UAAU,aAEf,KAAK,UAAY,KAAK,kBAExB,UAAWqB,KAAW,KAAK,oBAAoB,OAAM,EACnD,KAAK,UAAU,QAAQA,CAAO,CAEjC,CACD,SAAU,CACR,KAAK,UAAU,aACf,MAAM,QAAO,CACd,CAGD,kBAAkBnX,EAAQ,CAExB,OAAAA,EAAO,OAAS9E,GAAW8E,EAAO,MAAM,GAAK,SAAS,KAGtDA,EAAO,WAAaA,EAAO,OAAS,GAAGA,EAAO,oBAAsBA,EAAO,WACvE,OAAOA,EAAO,WAAc,WAC9BA,EAAO,UAAYA,EAAO,UAAU,MAAM,GAAG,EAAE,IAAI5nC,GAAS,OAAO,WAAWA,CAAK,CAAC,GAE/E4nC,CACR,CACD,0BAA2B,CACpB,KAAK,QAAQ,eAKlBpC,EAAa,IAAI,KAAK,QAAQ,OAAQuY,EAAW,EACjDvY,EAAa,GAAG,KAAK,QAAQ,OAAQuY,GAAaK,GAAuBz4C,GAAS,CAChF,MAAMq5C,EAAoB,KAAK,oBAAoB,IAAIr5C,EAAM,OAAO,IAAI,EACxE,GAAIq5C,EAAmB,CACrBr5C,EAAM,eAAc,EACpB,MAAM2F,EAAO,KAAK,cAAgB,OAC5BskB,EAASovB,EAAkB,UAAY,KAAK,SAAS,UAC3D,GAAI1zC,EAAK,SAAU,CACjBA,EAAK,SAAS,CACZ,IAAKskB,EACL,SAAU,QACtB,CAAW,EACD,OAIFtkB,EAAK,UAAYskB,EAEzB,CAAK,EACF,CACD,iBAAkB,CAChB,MAAM9xB,EAAU,CACd,KAAM,KAAK,aACX,UAAW,KAAK,QAAQ,UACxB,WAAY,KAAK,QAAQ,UAC/B,EACI,OAAO,IAAI,qBAAqBmhD,GAAW,KAAK,kBAAkBA,CAAO,EAAGnhD,CAAO,CACpF,CAGD,kBAAkBmhD,EAAS,CACzB,MAAMC,EAAgBC,GAAS,KAAK,aAAa,IAAI,IAAIA,EAAM,OAAO,IAAI,EACpEC,EAAWD,GAAS,CACxB,KAAK,oBAAoB,gBAAkBA,EAAM,OAAO,UACxD,KAAK,SAASD,EAAcC,CAAK,CAAC,CACxC,EACUE,GAAmB,KAAK,cAAgB,SAAS,iBAAiB,UAClEC,EAAkBD,GAAmB,KAAK,oBAAoB,gBACpE,KAAK,oBAAoB,gBAAkBA,EAC3C,UAAWF,KAASF,EAAS,CAC3B,GAAI,CAACE,EAAM,eAAgB,CACzB,KAAK,cAAgB,KACrB,KAAK,kBAAkBD,EAAcC,CAAK,CAAC,EAC3C,SAEF,MAAMI,EAA2BJ,EAAM,OAAO,WAAa,KAAK,oBAAoB,gBAEpF,GAAIG,GAAmBC,EAA0B,CAG/C,GAFAH,EAASD,CAAK,EAEV,CAACE,EACH,OAEF,SAIE,CAACC,GAAmB,CAACC,GACvBH,EAASD,CAAK,EAGnB,CACD,kCAAmC,CACjC,KAAK,aAAe,IAAI,IACxB,KAAK,oBAAsB,IAAI,IAC/B,MAAMK,EAAcjX,EAAe,KAAK6V,GAAuB,KAAK,QAAQ,MAAM,EAClF,UAAWqB,KAAUD,EAAa,CAEhC,GAAI,CAACC,EAAO,MAAQtc,GAAWsc,CAAM,EACnC,SAEF,MAAMT,EAAoBzW,EAAe,QAAQ,UAAUkX,EAAO,IAAI,EAAG,KAAK,QAAQ,EAGlF1c,GAAUic,CAAiB,IAC7B,KAAK,aAAa,IAAI,UAAUS,EAAO,IAAI,EAAGA,CAAM,EACpD,KAAK,oBAAoB,IAAIA,EAAO,KAAMT,CAAiB,GAGhE,CACD,SAAS9gC,EAAQ,CACX,KAAK,gBAAkBA,IAG3B,KAAK,kBAAkB,KAAK,QAAQ,MAAM,EAC1C,KAAK,cAAgBA,EACrBA,EAAO,UAAU,IAAIggC,EAAmB,EACxC,KAAK,iBAAiBhgC,CAAM,EAC5BsnB,EAAa,QAAQ,KAAK,SAAUsY,GAAgB,CAClD,cAAe5/B,CACrB,CAAK,EACF,CACD,iBAAiBA,EAAQ,CAEvB,GAAIA,EAAO,UAAU,SAAS+/B,EAAwB,EAAG,CACvD1V,EAAe,QAAQoW,GAA4BzgC,EAAO,QAAQwgC,EAAiB,CAAC,EAAE,UAAU,IAAIR,EAAmB,EACvH,OAEF,UAAWwB,KAAanX,EAAe,QAAQrqB,EAAQmgC,EAAuB,EAG5E,UAAWpvB,KAAQsZ,EAAe,KAAKmX,EAAWjB,EAAmB,EACnExvB,EAAK,UAAU,IAAIivB,EAAmB,CAG3C,CACD,kBAAkBnuB,EAAQ,CACxBA,EAAO,UAAU,OAAOmuB,EAAmB,EAC3C,MAAMyB,EAAcpX,EAAe,KAAK,GAAG6V,MAAyBF,KAAuBnuB,CAAM,EACjG,UAAWhd,KAAQ4sC,EACjB5sC,EAAK,UAAU,OAAOmrC,EAAmB,CAE5C,CAGD,OAAO,gBAAgBtW,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAOwxC,GAAU,oBAAoB,KAAMlX,CAAM,EACvD,GAAI,OAAOA,GAAW,SAGtB,IAAIt6B,EAAKs6B,CAAM,IAAM,QAAaA,EAAO,WAAW,GAAG,GAAKA,IAAW,cACrE,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,IACjB,CAAK,CACF,CACH,CAMApC,EAAa,GAAG,OAAQwY,GAAuB,IAAM,CACnD,UAAW4B,KAAOrX,EAAe,KAAK4V,EAAiB,EACrDW,GAAU,oBAAoBc,CAAG,CAErC,CAAC,EAMDjc,GAAmBmb,EAAS,EAc5B,MAAMe,GAAS,MACTC,GAAa,SACbC,GAAc,IAAID,KAClBE,GAAe,OAAOD,KACtBE,GAAiB,SAASF,KAC1BG,GAAe,OAAOH,KACtBI,GAAgB,QAAQJ,KACxBK,GAAuB,QAAQL,KAC/BM,GAAgB,UAAUN,KAC1BO,GAAsB,OAAOP,KAC7BQ,GAAiB,YACjBC,GAAkB,aAClBC,GAAe,UACfC,GAAiB,YACjBC,GAAoB,SACpBC,GAAoB,OACpBC,GAAoB,OACpBC,GAAiB,WACjBC,GAA2B,mBAC3BC,GAAyB,iBACzBC,GAA+B,yBAC/BC,GAAqB,sCACrBC,GAAiB,8BACjBC,GAAiB,YAAYH,uBAAiDA,mBAA6CA,KAC3HI,GAAuB,2EACvBC,GAAsB,GAAGF,OAAmBC,KAC5CE,GAA8B,IAAIZ,8BAA6CA,+BAA8CA,4BAMnI,MAAMa,WAAYtZ,EAAc,CAC9B,YAAYzkC,EAAS,CACnB,MAAMA,CAAO,EACb,KAAK,QAAU,KAAK,SAAS,QAAQy9C,EAAkB,EAClD,KAAK,UAOV,KAAK,sBAAsB,KAAK,QAAS,KAAK,aAAY,CAAE,EAC5D1b,EAAa,GAAG,KAAK,SAAU6a,GAAe16C,GAAS,KAAK,SAASA,CAAK,CAAC,EAC5E,CAGD,WAAW,MAAO,CAChB,OAAOk6C,EACR,CAGD,MAAO,CAEL,MAAM4B,EAAY,KAAK,SACvB,GAAI,KAAK,cAAcA,CAAS,EAC9B,OAIF,MAAM91C,EAAS,KAAK,iBACd+1C,EAAY/1C,EAAS65B,EAAa,QAAQ75B,EAAQq0C,GAAc,CACpE,cAAeyB,CAChB,GAAI,KACajc,EAAa,QAAQic,EAAWvB,GAAc,CAC9D,cAAev0C,CACrB,CAAK,EACa,kBAAoB+1C,GAAaA,EAAU,mBAGzD,KAAK,YAAY/1C,EAAQ81C,CAAS,EAClC,KAAK,UAAUA,EAAW91C,CAAM,EACjC,CAGD,UAAUlI,EAASk+C,EAAa,CAC9B,GAAI,CAACl+C,EACH,OAEFA,EAAQ,UAAU,IAAIk9C,EAAiB,EACvC,KAAK,UAAUpY,EAAe,uBAAuB9kC,CAAO,CAAC,EAE7D,MAAMssC,EAAW,IAAM,CACrB,GAAItsC,EAAQ,aAAa,MAAM,IAAM,MAAO,CAC1CA,EAAQ,UAAU,IAAIo9C,EAAiB,EACvC,OAEFp9C,EAAQ,gBAAgB,UAAU,EAClCA,EAAQ,aAAa,gBAAiB,EAAI,EAC1C,KAAK,gBAAgBA,EAAS,EAAI,EAClC+hC,EAAa,QAAQ/hC,EAAS08C,GAAe,CAC3C,cAAewB,CACvB,CAAO,CACP,EACI,KAAK,eAAe5R,EAAUtsC,EAASA,EAAQ,UAAU,SAASm9C,EAAiB,CAAC,CACrF,CACD,YAAYn9C,EAASk+C,EAAa,CAChC,GAAI,CAACl+C,EACH,OAEFA,EAAQ,UAAU,OAAOk9C,EAAiB,EAC1Cl9C,EAAQ,KAAI,EACZ,KAAK,YAAY8kC,EAAe,uBAAuB9kC,CAAO,CAAC,EAE/D,MAAMssC,EAAW,IAAM,CACrB,GAAItsC,EAAQ,aAAa,MAAM,IAAM,MAAO,CAC1CA,EAAQ,UAAU,OAAOo9C,EAAiB,EAC1C,OAEFp9C,EAAQ,aAAa,gBAAiB,EAAK,EAC3CA,EAAQ,aAAa,WAAY,IAAI,EACrC,KAAK,gBAAgBA,EAAS,EAAK,EACnC+hC,EAAa,QAAQ/hC,EAASw8C,GAAgB,CAC5C,cAAe0B,CACvB,CAAO,CACP,EACI,KAAK,eAAe5R,EAAUtsC,EAASA,EAAQ,UAAU,SAASm9C,EAAiB,CAAC,CACrF,CACD,SAASj7C,EAAO,CACd,GAAI,CAAC,CAAC46C,GAAgBC,GAAiBC,GAAcC,EAAc,EAAE,SAAS/6C,EAAM,GAAG,EACrF,OAEFA,EAAM,gBAAe,EACrBA,EAAM,eAAc,EACpB,MAAM8nC,EAAS,CAAC+S,GAAiBE,EAAc,EAAE,SAAS/6C,EAAM,GAAG,EAC7Di8C,EAAoBrd,GAAqB,KAAK,aAAc,EAAC,OAAO9gC,GAAW,CAAC0/B,GAAW1/B,CAAO,CAAC,EAAGkC,EAAM,OAAQ8nC,EAAQ,EAAI,EAClImU,IACFA,EAAkB,MAAM,CACtB,cAAe,EACvB,CAAO,EACDJ,GAAI,oBAAoBI,CAAiB,EAAE,KAAI,EAElD,CACD,cAAe,CAEb,OAAOrZ,EAAe,KAAK+Y,GAAqB,KAAK,OAAO,CAC7D,CACD,gBAAiB,CACf,OAAO,KAAK,aAAc,EAAC,KAAK7qC,GAAS,KAAK,cAAcA,CAAK,CAAC,GAAK,IACxE,CACD,sBAAsBsZ,EAAQrW,EAAU,CACtC,KAAK,yBAAyBqW,EAAQ,OAAQ,SAAS,EACvD,UAAWtZ,KAASiD,EAClB,KAAK,6BAA6BjD,CAAK,CAE1C,CACD,6BAA6BA,EAAO,CAClCA,EAAQ,KAAK,iBAAiBA,CAAK,EACnC,MAAMorC,EAAW,KAAK,cAAcprC,CAAK,EACnCqrC,EAAY,KAAK,iBAAiBrrC,CAAK,EAC7CA,EAAM,aAAa,gBAAiBorC,CAAQ,EACxCC,IAAcrrC,GAChB,KAAK,yBAAyBqrC,EAAW,OAAQ,cAAc,EAE5DD,GACHprC,EAAM,aAAa,WAAY,IAAI,EAErC,KAAK,yBAAyBA,EAAO,OAAQ,KAAK,EAGlD,KAAK,mCAAmCA,CAAK,CAC9C,CACD,mCAAmCA,EAAO,CACxC,MAAMyH,EAASqqB,EAAe,uBAAuB9xB,CAAK,EACrDyH,IAGL,KAAK,yBAAyBA,EAAQ,OAAQ,UAAU,EACpDzH,EAAM,IACR,KAAK,yBAAyByH,EAAQ,kBAAmB,GAAGzH,EAAM,IAAI,EAEzE,CACD,gBAAgBhT,EAAS+P,EAAM,CAC7B,MAAMsuC,EAAY,KAAK,iBAAiBr+C,CAAO,EAC/C,GAAI,CAACq+C,EAAU,UAAU,SAAShB,EAAc,EAC9C,OAEF,MAAMvN,EAAS,CAACjR,EAAUzwB,IAAc,CACtC,MAAMpO,EAAU8kC,EAAe,QAAQjG,EAAUwf,CAAS,EACtDr+C,GACFA,EAAQ,UAAU,OAAOoO,EAAW2B,CAAI,CAEhD,EACI+/B,EAAOwN,GAA0BJ,EAAiB,EAClDpN,EAAOyN,GAAwBH,EAAiB,EAChDiB,EAAU,aAAa,gBAAiBtuC,CAAI,CAC7C,CACD,yBAAyB/P,EAASyR,EAAWlV,EAAO,CAC7CyD,EAAQ,aAAayR,CAAS,GACjCzR,EAAQ,aAAayR,EAAWlV,CAAK,CAExC,CACD,cAAc+F,EAAM,CAClB,OAAOA,EAAK,UAAU,SAAS46C,EAAiB,CACjD,CAGD,iBAAiB56C,EAAM,CACrB,OAAOA,EAAK,QAAQu7C,EAAmB,EAAIv7C,EAAOwiC,EAAe,QAAQ+Y,GAAqBv7C,CAAI,CACnG,CAGD,iBAAiBA,EAAM,CACrB,OAAOA,EAAK,QAAQo7C,EAAc,GAAKp7C,CACxC,CAGD,OAAO,gBAAgB6hC,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAOk0C,GAAI,oBAAoB,IAAI,EACzC,GAAI,OAAO5Z,GAAW,SAGtB,IAAIt6B,EAAKs6B,CAAM,IAAM,QAAaA,EAAO,WAAW,GAAG,GAAKA,IAAW,cACrE,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,IACjB,CAAK,CACF,CACH,CAMApC,EAAa,GAAG,SAAU4a,GAAsBiB,GAAsB,SAAU17C,EAAO,CACjF,CAAC,IAAK,MAAM,EAAE,SAAS,KAAK,OAAO,GACrCA,EAAM,eAAc,EAElB,CAAAw9B,GAAW,IAAI,GAGnBqe,GAAI,oBAAoB,IAAI,EAAE,KAAI,CACpC,CAAC,EAKDhc,EAAa,GAAG,OAAQ8a,GAAqB,IAAM,CACjD,UAAW78C,KAAW8kC,EAAe,KAAKgZ,EAA2B,EACnEC,GAAI,oBAAoB/9C,CAAO,CAEnC,CAAC,EAKDkgC,GAAmB6d,EAAG,EActB,MAAMO,GAAO,QACPC,GAAW,WACXC,GAAY,IAAID,KAChBE,GAAkB,YAAYD,KAC9BE,GAAiB,WAAWF,KAC5BG,GAAgB,UAAUH,KAC1BI,GAAiB,WAAWJ,KAC5BK,GAAa,OAAOL,KACpBM,GAAe,SAASN,KACxBO,GAAa,OAAOP,KACpBQ,GAAc,QAAQR,KACtBS,GAAkB,OAClBC,GAAkB,OAClBC,GAAkB,OAClBC,GAAqB,UACrBC,GAAc,CAClB,UAAW,UACX,SAAU,UACV,MAAO,QACT,EACMC,GAAU,CACd,UAAW,GACX,SAAU,GACV,MAAO,GACT,SAMA,MAAMC,WAAc9a,EAAc,CAChC,YAAYzkC,EAASmkC,EAAQ,CAC3B,MAAMnkC,EAASmkC,CAAM,EACrB,KAAK,SAAW,KAChB,KAAK,qBAAuB,GAC5B,KAAK,wBAA0B,GAC/B,KAAK,cAAa,CACnB,CAGD,WAAW,SAAU,CACnB,OAAOmb,EACR,CACD,WAAW,aAAc,CACvB,OAAOD,EACR,CACD,WAAW,MAAO,CAChB,OAAOf,EACR,CAGD,MAAO,CAEL,GADkBvc,EAAa,QAAQ,KAAK,SAAUgd,EAAU,EAClD,iBACZ,OAEF,KAAK,cAAa,EACd,KAAK,QAAQ,WACf,KAAK,SAAS,UAAU,IAAIE,EAAe,EAE7C,MAAM3S,EAAW,IAAM,CACrB,KAAK,SAAS,UAAU,OAAO8S,EAAkB,EACjDrd,EAAa,QAAQ,KAAK,SAAUid,EAAW,EAC/C,KAAK,mBAAkB,CAC7B,EACI,KAAK,SAAS,UAAU,OAAOE,EAAe,EAC9Crf,GAAO,KAAK,QAAQ,EACpB,KAAK,SAAS,UAAU,IAAIsf,GAAiBC,EAAkB,EAC/D,KAAK,eAAe9S,EAAU,KAAK,SAAU,KAAK,QAAQ,SAAS,CACpE,CACD,MAAO,CAKL,GAJI,CAAC,KAAK,WAGQvK,EAAa,QAAQ,KAAK,SAAU8c,EAAU,EAClD,iBACZ,OAEF,MAAMvS,EAAW,IAAM,CACrB,KAAK,SAAS,UAAU,IAAI4S,EAAe,EAC3C,KAAK,SAAS,UAAU,OAAOE,GAAoBD,EAAe,EAClEpd,EAAa,QAAQ,KAAK,SAAU+c,EAAY,CACtD,EACI,KAAK,SAAS,UAAU,IAAIM,EAAkB,EAC9C,KAAK,eAAe9S,EAAU,KAAK,SAAU,KAAK,QAAQ,SAAS,CACpE,CACD,SAAU,CACR,KAAK,cAAa,EACd,KAAK,WACP,KAAK,SAAS,UAAU,OAAO6S,EAAe,EAEhD,MAAM,QAAO,CACd,CACD,SAAU,CACR,OAAO,KAAK,SAAS,UAAU,SAASA,EAAe,CACxD,CAID,oBAAqB,CACd,KAAK,QAAQ,WAGd,KAAK,sBAAwB,KAAK,0BAGtC,KAAK,SAAW,WAAW,IAAM,CAC/B,KAAK,KAAI,CACf,EAAO,KAAK,QAAQ,KAAK,GACtB,CACD,eAAej9C,EAAOs9C,EAAe,CACnC,OAAQt9C,EAAM,KAAI,CAChB,IAAK,YACL,IAAK,WACH,CACE,KAAK,qBAAuBs9C,EAC5B,KACD,CACH,IAAK,UACL,IAAK,WACH,CACE,KAAK,wBAA0BA,EAC/B,KACD,CACJ,CACD,GAAIA,EAAe,CACjB,KAAK,cAAa,EAClB,OAEF,MAAMvV,EAAc/nC,EAAM,cACtB,KAAK,WAAa+nC,GAAe,KAAK,SAAS,SAASA,CAAW,GAGvE,KAAK,mBAAkB,CACxB,CACD,eAAgB,CACdlI,EAAa,GAAG,KAAK,SAAU0c,GAAiBv8C,GAAS,KAAK,eAAeA,EAAO,EAAI,CAAC,EACzF6/B,EAAa,GAAG,KAAK,SAAU2c,GAAgBx8C,GAAS,KAAK,eAAeA,EAAO,EAAK,CAAC,EACzF6/B,EAAa,GAAG,KAAK,SAAU4c,GAAez8C,GAAS,KAAK,eAAeA,EAAO,EAAI,CAAC,EACvF6/B,EAAa,GAAG,KAAK,SAAU6c,GAAgB18C,GAAS,KAAK,eAAeA,EAAO,EAAK,CAAC,CAC1F,CACD,eAAgB,CACd,aAAa,KAAK,QAAQ,EAC1B,KAAK,SAAW,IACjB,CAGD,OAAO,gBAAgBiiC,EAAQ,CAC7B,OAAO,KAAK,KAAK,UAAY,CAC3B,MAAMt6B,EAAO01C,GAAM,oBAAoB,KAAMpb,CAAM,EACnD,GAAI,OAAOA,GAAW,SAAU,CAC9B,GAAI,OAAOt6B,EAAKs6B,CAAM,EAAM,IAC1B,MAAM,IAAI,UAAU,oBAAoBA,IAAS,EAEnDt6B,EAAKs6B,CAAM,EAAE,IAAI,EAEzB,CAAK,CACF,CACH,EAMAe,GAAqBqa,EAAK,EAM1Brf,GAAmBqf,EAAK,EC70IjB,MAAM9V,WAAiBgW,EAAU,CAAC,CCDlC,MAAMzT,UAAiB0T,EAAU,CAOxC,CANEl4C,EADWwkC,EACJ,kBAAkB,QACzBxkC,EAFWwkC,EAEJ,sBAAsB,YAC7BxkC,EAHWwkC,EAGJ,wBAAwB,cAC/BxkC,EAJWwkC,EAIJ,uBAAuB,aAC9BxkC,EALWwkC,EAKJ,mBAAmB,sBAC1BxkC,EANWwkC,EAMJ,uBAAuB,+BCEzB,MAAM2T,GAAN,cAAmC1oC,CAAU,CAyBlD,aAAc,CACN,QAvBDzP,EAAA,aAAe,CACpB,OAAQ,KAAK,OACb,KAAM,KAAK,KACX,KAAM,KAAK,KACX,OAAQ,KAAK,OACb,QAAS,KAGJA,EAAA,iBACGA,EAAA,eAAqD,MAqFrDA,EAAA,eAAU,KAAK,SAAS,KAAK,IAAI,GAOjCA,EAAA,gBAAW,KAAK,UAAU,KAAK,IAAI,EA7E7C,CAbA,WAAW,oBAAoD,CACtD,OACL,SACA,WACA,YACA,UACA,gBACA,aAEJ,CAMO,SAAU,C9OtCZ,IAAApH,E8OwCK,QAAAA,EAAA,KAAK,WAAL,YAAAA,EAAuB,aAAc,EAC/C,CAEO,OAAO8B,EAAc09C,EAAYngD,EAAS,CAC3C,IAAC,KAAK,SACF,UAAI,MAAM,qBAAqB,EAInCA,IAAO,KAAK,SACd,KAAK,SAAS,QAElB,CAEO,MAAO,CACR,IAAC,KAAK,SACF,UAAI,MAAM,qBAAqB,EAGvC,KAAK,SAAS,MAChB,CAEO,MAAO,CACR,IAAC,KAAK,SACF,UAAI,MAAM,qBAAqB,EAGvC,KAAK,SAAS,MAChB,CAEO,QAAS,CACV,IAAC,KAAK,SACF,UAAI,MAAM,qBAAqB,EAGvC,KAAK,SAAS,QAChB,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKkgD,GAAqB,kBAAkB,CACnD,CAEA,MAAM,WAAY,CAChB,KAAK,aAAa,EAClB,KAAK,kBAAkB,EACvB,MAAM,MAAM,WACd,CAEU,cAAe,CAClB,aAAU,KAAK,UAAU,SAAS,iBAAiB,EACpD,KACA,KAAK,cAA2B,kBAAkB,GAAK,KAGtD,aAAQ,QAAQ,SAAW,WAChC,KAAK,SAAW,IAAIxQ,EAAS,KAAK,QAAS,KAAK,KAAK,EACrD,KAAK,SAAS,OACT,WAAM,QAAU,KAAK,QAAQ,CACpC,CAEU,UAAW,CACnB,QAAQ,MAAM,SAAS,EAClB,WAAM,QAAU,KAAK,QAAQ,CACpC,CAIU,WAAY,CACpB,QAAQ,MAAM,UAAU,EACnB,WAAM,QAAU,KAAK,QAAQ,CACpC,CAIU,mBAAoB,C9OnHzB,IAAA/uC,EAAA4B,G8OoHH5B,EAAA,KAAK,UAAL,MAAAA,EAAc,iBAAiB+uC,EAAS,YAAa,KAAK,UAC1DntC,EAAA,KAAK,UAAL,MAAAA,EAAc,iBAAiBmtC,EAAS,aAAc,KAAK,SAC7D,CAEU,UAAyC,CAC1C,WACT,CACF,EAlHO,IAAM0Q,GAANF,GACLn4C,EADWq4C,GACG,UAAU,gBCX1B,MAAMC,GAAwB,YAExBC,GAA0B,YAC1BC,GAAwB,UACxBC,GAAsB,SAKfC,GAAN,cAAuBA,EAAU,CACtC,OAAc,QAAQh+C,EAAc,CACjC,KAAa,WAAWA,CAAK,CAChC,CAEA,OAAc,kBAAmB,CAC/B,MAAMi+C,EAAc,SAAS,iBAC3BN,GAAqB,SAEhB,aAAM,KAAKM,CAAW,CAC/B,CAEA,OAAc,mBAAoB,C/OpB7B,IAAA//C,E+OqBG,MAAA+/C,EAAc,KAAK,mBAEzB,UAAWC,KAAc,MAAM,KAAKD,CAAW,GAC7C//C,EAAAggD,EAAW,WAAX,MAAAhgD,EAAqB,MAEzB,CAEA,YAAYJ,EAA2B3F,EAAsC,CAC3E,MAAM2F,EAAS3F,CAAO,CACxB,CA0CF,EAhEO,IAAM80C,EAAN+Q,GA6BL14C,EA7BW2nC,EA6BJ,eAAe2Q,IAEtBt4C,EA/BW2nC,EA+BJ,aAAa8Q,IACpBz4C,EAhCW2nC,EAgCJ,YAAY,SACnB3nC,EAjCW2nC,EAiCJ,UAAU,OACjB3nC,EAlCW2nC,EAkCJ,eAAe6Q,IACtBx4C,EAnCW2nC,EAmCJ,iBAAiB4Q,IACxBv4C,EApCW2nC,EAoCJ,qBAAqB,GAE5B3nC,EAtCW2nC,EAsCJ,iBAAiB,IAAI,OAC1B,GAAG6Q,MAAyBD,MAA2BE,IAAA,GAGzDz4C,EA1CW2nC,EA0CJ,aAAa,OAAO+Q,GAAS,aACpC14C,EA3CW2nC,EA2CJ,eAAe,SAAS+Q,GAAS,aACxC14C,EA5CW2nC,EA4CJ,aAAa,OAAO+Q,GAAS,aACpC14C,EA7CW2nC,EA6CJ,cAAc,QAAQ+Q,GAAS,aACtC14C,EA9CW2nC,EA8CJ,cAAc,QAAQ+Q,GAAS,aACtC14C,EA/CW2nC,EA+CJ,uBAAuB,QAAQ+Q,GAAS,YAAYJ,MAC3Dt4C,EAhDW2nC,EAgDJ,yBAAyB,UAAU+Q,GAAS,YAAYJ,MAC/Dt4C,EAjDW2nC,EAiDJ,uBAAuB,QAAQ+Q,GAAS,YAAYJ,MAE3Dt4C,EAnDW2nC,EAmDJ,sBAAsB,YAC7B3nC,EApDW2nC,EAoDJ,kBAAkB,QACzB3nC,EArDW2nC,EAqDJ,oBAAoB,UAC3B3nC,EAtDW2nC,EAsDJ,qBAAqB,WAC5B3nC,EAvDW2nC,EAuDJ,uBAAuB,aAC9B3nC,EAxDW2nC,EAwDJ,oBAAoB,UAE3B3nC,EA1DW2nC,EA0DJ,uBAAuB,+BAC9B3nC,EA3DW2nC,EA2DJ,sBAAsB,kBAC7B3nC,EA5DW2nC,EA4DJ,gBAAgB,kBACvB3nC,EA7DW2nC,EA6DJ,sBAAsB,eAC7B3nC,EA9DW2nC,EA8DJ,yBACL,+DC3EQ,IAAAkR,QAIVA,EAAA,KAAO,mBAKPA,EAAA,MAAQ,oBAKRA,EAAA,KAAO,mBAMPA,EAAA,OAAS,qBApBCA,QAAA,ICCL,MAAeC,EAAoD,CAQxE,YAAY/iD,EAAcwiB,EAAgB,CAP1CvY,EAAA,aACAA,EAAA,cAEAA,EAAA,gBACAA,EAAA,eACAA,EAAA,iBAGE,KAAK,KAAOjK,EACZ,KAAK,MAAQwiB,CACf,CACF,CCVO,MAAMwgC,WAA0BD,EAAa,CAalD,YAAY,CACV,MAAAvgC,EACA,QAAAygC,EACA,QAAAC,EAEA,MAAAC,EACA,SAAAC,EACA,SAAA/P,EAEA,QAAAgQ,EAEA,aAAAC,EACA,gBAAAC,EACA,QAAAC,EACA,OAAAC,EACA,SAAAC,CAAA,EAkBC,CACD,MAAM,QAASlhC,CAAK,EA9CtBvY,EAAA,gBACAA,EAAA,gBAEAA,EAAA,cACAA,EAAA,iBACAA,EAAA,iBAEAA,EAAA,eAAqC,IAErCA,EAAA,qBACAA,EAAA,wBAqCE,KAAK,QAAUg5C,EACf,KAAK,QAAUC,EAEf,KAAK,MAAQC,GAAS,GACtB,KAAK,SAAWC,GAAY,GAC5B,KAAK,SAAW/P,GAAY,GAEvB,aAAUgQ,GAAW,GAE1B,KAAK,aAAeC,EACpB,KAAK,gBAAkBC,EACvB,KAAK,QAAUC,EACf,KAAK,OAASC,EACd,KAAK,SAAWC,CAClB,CACF,CChEA,MAAM1C,GAAW,WACXnE,GAAe,YACfoE,GAAY,IAAID,KAKf,MAAMxK,UAAcmN,EAAO,CAChC,WAAW,UAAW,CACb,OAAA3C,EACT,CAEA,WAAW,cAAe,CACjB,OAAAnE,EACT,CAEA,WAAW,WAAY,CACd,OAAAoE,EACT,CAiCF,CA7BEh3C,EAfWusC,EAeJ,aAAa,UAEpBvsC,EAjBWusC,EAiBJ,aAAa,OAAOyK,MAC3Bh3C,EAlBWusC,EAkBJ,uBAAuB,gBAAgByK,MAC9Ch3C,EAnBWusC,EAmBJ,eAAe,SAASyK,MAC/Bh3C,EApBWusC,EAoBJ,aAAa,OAAOyK,MAC3Bh3C,EArBWusC,EAqBJ,cAAc,QAAQyK,MAC7Bh3C,EAtBWusC,EAsBJ,gBAAgB,UAAUyK,MACjCh3C,EAvBWusC,EAuBJ,eAAe,SAASyK,MAC/Bh3C,EAxBWusC,EAwBJ,sBAAsB,gBAAgByK,MAC7Ch3C,EAzBWusC,EAyBJ,wBAAwB,kBAAkByK,MACjDh3C,EA1BWusC,EA0BJ,wBAAwB,kBAAkByK,MACjDh3C,EA3BWusC,EA2BJ,0BAA0B,oBAAoByK,MACrDh3C,EA5BWusC,EA4BJ,uBAAuB,QAAQyK,KAAYpE,MAElD5yC,EA9BWusC,EA8BJ,gCAAgC,2BACvCvsC,EA/BWusC,EA+BJ,sBAAsB,kBAC7BvsC,EAhCWusC,EAgCJ,kBAAkB,cACzBvsC,EAjCWusC,EAiCJ,kBAAkB,QACzBvsC,EAlCWusC,EAkCJ,kBAAkB,QACzBvsC,EAnCWusC,EAmCJ,oBAAoB,gBAE3BvsC,EArCWusC,EAqCJ,kBAAkB,iBACzBvsC,EAtCWusC,EAsCJ,sBAAsB,eAC7BvsC,EAvCWusC,EAuCJ,uBAAuB,4BAC9BvsC,EAxCWusC,EAwCJ,wBAAwB,6BAC/BvsC,EAzCWusC,EAyCJ,yBACL,qDACFvsC,EA3CWusC,EA2CJ,0BAA0B,eC/C5B,MAAMkF,WAAgBkI,EAAS,CAAC,CCAhC,MAAMnH,WAAgBoH,EAAS,CAAC,CCUhC,MAAMC,GAAN,KAAmB,CAOd,aAAc,CANd75C,EAAA,uBAAkBkC,EAAgB,eAGlClC,EAAA,WAAMqhB,GAAW,gBACpBrhB,EAAA,eAAuB,MAG5B,KAAK,kBAAkB,EACjB,MAAAqC,EAAO,KAAK,OACZy3C,EAAW,SAAS,eACxB,SAGEA,GAAe,YAAOz3C,EAAK,OAAQy3C,CAAQ,CACjD,CAEA,OAAc,cAAe,CAC3B,OAAID,GAAa,SACRA,GAAa,SAGf,KAAK,cACd,CAEA,OAAc,cAAe,CAC3B,GAAIA,GAAa,SACT,UAAI,MAAM,4CAA4C,EAEjD,OAAAA,GAAA,SAAW,IAAIA,GACrBA,GAAa,QACtB,CAEU,mBAAoB,CAE5B,OACG,WAAW,8BAA8B,EACzC,iBAAiB,SAAW,GAA2B,CACtD,KAAK,cAAc,CAAC,EACrB,CACL,CAOO,MAAO,CACZ,IAAIE,EAA0B,KAC1B,YAAK,IAAI,QAAQ,0BACLA,EAAA,aAAa,QAAQ,WAAW,GAAK,MAG9C,KAAK,IAAIA,CAAU,CAC5B,CAOO,OAAOC,EAAqBF,EAA6B,EAC1DA,GAAA,YAAAA,EAAU,YAAa,WACzBA,EAAS,MAAQE,EAErB,CAOU,gBAA4B,CAC7B,OACL,UAAW,CAAC,CAAC,OAAO,WACpB,OAAQ,GACR,QAAS,GACT,aAAc,GACd,cAAe,GACf,SAAU,GACV,OAAQ,GACR,OAAQ,KAEZ,CAEU,cAAc,EAAyB5hD,EAAsB,CAChEA,IACHA,EAAW,KAAK,kBAEZ,MAAAD,EAAW,KAAK,YACjB,4BAAgB,QAAQ,eAAgB,CAC3C,SAAAC,EACA,SAAAD,CAAA,CACD,EACMA,CACT,CAOA,WAAW/E,EAA0B4O,EAAyB,CAC5D,KAAK,gBAAgB,KAAK,eAAgB5O,EAAI4O,CAAW,CAC3D,CAMA,SAAS5O,EAA0B4O,EAAyB,CAC1D,KAAK,gBAAgB,GAAG,eAAgB5O,EAAI4O,CAAW,CACzD,CAMA,UAAU5O,EAA2B4O,EAAyB,CAC5D,KAAK,gBAAgB,IAAI,eAAgB5O,EAAI4O,CAAW,CAC1D,CAUA,IAAIi4C,EAAwC,CACpC,MAAAC,EAAY,KAAK,YAWvB,GAVKp6B,GAAa,SAASm6B,CAAc,IAC/B,aACN,sBAAsBA,mCAAA,EAEPA,EAAA,MAEf,KAAK,IAAI,QAAQ,yBACN,qBAAQ,YAAaA,CAAc,EAG9CA,IAAmB,KAAM,CACrB,MAAAE,EAAY,KAAK,UAAUF,CAAc,EAC/C,SAAS,gBAAgB,aACvB,gBACAE,EAAU,OAAS,OAAS,cAGrB,yBAAgB,aAAa,gBAAiBF,CAAc,EAEvE,YAAK,QAAUA,EACR,KAAK,cAAc,OAAWC,CAAS,CAChD,CAEA,UAAUF,EAAsB,KAAK,QAAoB,CACjD,MAAA33C,EAAO,KAAK,iBAClB,OAAAA,EAAK,aAAe,OAAO,WACzB,8BACA,UACGA,EAAA,cAAgB,CAACA,EAAK,aAEvB23C,IAAW,MACb33C,EAAK,SAAW,GAChBA,EAAK,OAAS,GACdA,EAAK,OAAS,KACdA,EAAK,OAASA,EAAK,aACnBA,EAAK,QAAUA,EAAK,gBAEpBA,EAAK,SAAW,GAChBA,EAAK,OAAS,GACV23C,IAAW,SACb33C,EAAK,OAAS,GACdA,EAAK,OAAS,QAEZ23C,IAAW,UACb33C,EAAK,QAAU,GACfA,EAAK,OAAS,UAGXA,CACT,CACF,EAtLO,IAAM+3C,GAANP,GAGL75C,EAHWo6C,GAGM,YCfZ,MAAMC,WAA0BvB,EAAa,CASlD,YAAY,CACV,MAAAvgC,EACA,QAAAygC,EACA,QAAAC,EACA,MAAAqB,EACA,SAAAC,EACA,UAAAC,EACA,aAAAC,EACA,gBAAAnB,EACA,QAAAC,EACA,OAAAC,EACA,SAAAC,CAAA,EAaC,CACD,MAAM,QAASlhC,CAAK,EAjCtBvY,EAAA,gBACAA,EAAA,gBACAA,EAAA,cACAA,EAAA,iBACAA,EAAA,kBACAA,EAAA,qBACAA,EAAA,wBA4BE,KAAK,QAAUg5C,EACf,KAAK,QAAUC,EACf,KAAK,MAAQqB,EACb,KAAK,SAAWC,EAChB,KAAK,UAAYC,EACjB,KAAK,aAAeC,EACpB,KAAK,gBAAkBnB,EACvB,KAAK,QAAUC,EACf,KAAK,OAASC,EACd,KAAK,SAAWC,CAClB,CACF,CCzCO,MAAMiB,GAAN,cAAoBA,EAAO,CAmBlC,EAnBO,IAAM3C,EAAN2C,GASL16C,EATW+3C,EASJ,sBAAsB,gBAAgB2C,GAAM,aACnD16C,EAVW+3C,EAUJ,aAAa,OAAO2C,GAAM,aACjC16C,EAXW+3C,EAWJ,eAAe,SAAS2C,GAAM,aACrC16C,EAZW+3C,EAYJ,aAAa,OAAO2C,GAAM,aACjC16C,EAbW+3C,EAaJ,cAAc,QAAQ2C,GAAM,aAEnC16C,EAfW+3C,EAeJ,kBAAkB,QACzB/3C,EAhBW+3C,EAgBJ,kBAAkB,QACzB/3C,EAjBW+3C,EAiBJ,kBAAkB,QACzB/3C,EAlBW+3C,EAkBJ,qBAAqB,+PCtBvB,MAAe4C,WAEZj5C,CAAkB,CAU1B,YACE6D,EACAtN,EACAlC,EACAwL,EACApB,EACAsD,EACA+B,EACA,CACA,MAAMD,EAAMtN,EAAIlC,EAAMwL,EAAMpB,EAASsD,EAAY+B,CAAU,EAdnDxF,EAAA,YACAA,EAAA,mBACAA,EAAA,sBACAA,EAAA,YAYH,YAAMqhB,GAAW,eAClB,KAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MACR,mEAGJ,MAAMX,EAAa,KAAK,KAAK,CAAC,EAAE,SAAS,EACnCxoB,EAAgB,KAAK,KAAK,CAAC,EAAE,SAAS,EAC5C,GAAI,CAAC,KAAK,IAAI,gBAAgB,SAASwoB,CAAU,EAC/C,MAAM,IAAI,MACR,uBAAuBA,wEAAA,EAG3B,KAAK,WAAaA,EAClB,KAAK,cAAgBxoB,CACvB,CAEU,qBAAwD,CAChE,KAAK,oBAAoB,CAC3B,CAMU,qBAAsB,CAC1B,GAAC,KAAK,IAAI,iBACd,IAAI,KAAK,kBAAkB,KAAK,UAAU,EACxC,OAAO,KAAK,uBAAuB,QAAQ,KAAK,GAAI,KAAK,GAAG,EAE1D,KAAK,oBAAoB,KAAK,IAAI,iBAAiB,IAAI,GAEzD,KAAK,uBAAuB,QAAQ,KAAK,GAAI,MAAS,EAE1D,CAOU,kBAAkBwoB,EAAa,KAAK,WAAY,CACpD,OAAC,KAAK,IAAI,iBAIV,QAAK,IAAI,iBAAiB,OAASA,GAIjB,KAAK,cAAcA,CAAU,EACjC,SAAS,KAAK,IAAI,iBAAiB,IAAI,GARhD,EAYX,CAOU,cAAcA,EAAa,KAAK,WAAY,CAC9C,MAAAk6B,EAA0B,CAACl6B,CAAU,EAC3C,IAAIm6B,EAAgCn6B,EACpC,KAAOm6B,IACYA,EAAA,KAAK,IAAI,wBAAwBA,CAAc,EAE5D,GAACA,GAAkB,KAAK,2BAA2BA,CAAc,KAIrED,EAAc,KAAKC,CAAc,EAE5B,OAAAD,CACT,CAKU,2BAA2Br5C,EAAc,CAE7C,QADuB,KAAK,wBACT,SAASA,CAAI,CAItC,CAQU,oBAAoBmf,EAAoB,CAChD,IAAIo6B,EAAgCp6B,EAGhCq6B,EAAY,GAChB,KAAOD,GAAkBC,GAAW,CAC9B,QAAK,2BAA2BD,CAAc,EAAG,CACvCC,EAAA,GACZ,MAKF,GAFiBD,EAAA,KAAK,IAAI,wBAAwBA,CAAc,EAE5D,CAACA,EACH,MAGG,OAAAC,CACT,CAKU,yBAA0B,CAC5B,MAAAC,EAAqB,KAAK,wBACbA,EAAA,KAAK,KAAK,UAAU,EAClC,QAAG,QAAQ7jD,GAAU,KAAK,aAAa,CAAC,EAC3C1C,GAAcumD,CAAkB,CACpC,CAOU,uBAAwB,CAChC,MAAMA,EAA+BlmD,GACnC,KAAK,GAAG,QAAQqC,GAAU,KAAK,aAAa,CAAC,GAAK,MAEpD,GAAI,CAAC,MAAM,QAAQ6jD,CAAkB,EAC7B,UAAI,MAAM,6CAA6C,EAExD,OAAAA,CACT,CAEA,KAAK/iD,EAAiB,CACpB,KAAK,IAAI,GAAG,qBAAsB,KAAK,oBAAqB,IAAI,EAC5D,OAAO,KAAK,uBAAuB,MAAS,YACzC,4BAAuB,KAAKA,CAAE,CAEvC,CAEA,QAAQA,EAAiBE,EAAe,CACtC,KAAK,wBAAwB,EAC7B,KAAK,IAAMA,EACX,KAAK,oBAAoB,CAC3B,CAEA,OAAOF,EAAiB,CzP9KnB,IAAAW,GyP+KHA,EAAA,KAAK,MAAL,MAAAA,EAAU,IAAI,qBAAsB,KAAK,oBAAqB,MAC1D,OAAO,KAAK,uBAAuB,QAAW,YAC3C,4BAAuB,OAAOX,CAAE,CAEzC,CACF,CCnKO,MAAMgjD,WAAqCN,EAAyC,CAKzF,YACEp1C,EACAtN,EACAlC,EACAwL,EACApB,EACAsD,EACA+B,EACA,CACA,MAAMD,EAAMtN,EAAIlC,EAAMwL,EAAMpB,EAASsD,EAAY+B,CAAU,EAX7DxF,EAAA,+BAYE,KAAK,uBAAyB,IAAIgH,GAChCzB,EACAtN,EACA,KAAK,cACLsJ,EACApB,EACAsD,EACA,IAEJ,CACF,CAxBEzD,EADWi7C,GACJ,MAAM,gBCZR,MAAMC,WAA4Bx5C,CAAiC,CAAnE,kCAGG1B,EAAA,kBAAakC,EAAgB,YAAY,MAAM,GAC/ClC,EAAA,wBACAA,EAAA,YAWAA,EAAA,gBAAW,KAAK,UAAU,KAAK,IAAI,GATnC,WAAY,C3Pbf,IAAApH,E2PcH,OAAI,KAAK,KAAO6F,GAAQ,KAAK,GAAG,IAC9B7F,EAAA,KAAK,kBAAL,MAAAA,EAAsB,OACf,IAGF,EACT,CAIA,KAAKX,EAAiB,CACpB,KAAK,gBAAkB,IAAIusC,EAASvsC,EAAI,CAAE,OAAQ,GAAO,CAC3D,CAEA,QAAS,CACH,KAAK,UACP,KAAK,WAAW,IAAI,eAAgB,KAAK,QAAQ,CAErD,CAEA,QAAQA,EAAiBkG,EAAa,CACpC,KAAK,IAAMA,EACP,KAAK,UACP,KAAK,WAAW,IAAI,eAAgB,KAAK,QAAQ,EAEnD,KAAK,WAAW,GAAG,eAAgB,KAAK,QAAQ,CAClD,CACF,CAlCE6B,EADWk7C,GACJ,MAAM,uBCUR,MAAMC,WAA8CR,EAA4C,CAKrG,YACEp1C,EACAtN,EACAlC,EACAwL,EACApB,EACAsD,EACA+B,EACA,CACA,MAAMD,EAAMtN,EAAIlC,EAAMwL,EAAMpB,EAASsD,EAAY+B,CAAU,EAX7DxF,EAAA,+BAYE,KAAK,uBAAyB,IAAIwH,GAChCjC,EACAtN,EACA,MAAM,KAAK,gBACXsJ,EACApB,EACAsD,EACA+D,GAAyB,IAE7B,CACF,CAxBExH,EADWm7C,GACJ,MAAM,cChBR,MAAMC,WAAoC15C,CAA4B,CAAtE,kCAGG1B,EAAA,mBAAc,KASdA,EAAA,eAAU,KAAK,SAAS,KAAK,IAAI,GAPjC,SAAStF,EAAc,CAC7BA,EAAM,eAAe,EACrB,UAAW2gD,KAAmB,KAAK,QAAQ,SACzCA,EAAgB,OAAO,CAE3B,CAIA,KAAKpjD,EAAiB,CAChB,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAE1B,MAAA8J,EAAY,KAAK,KAAK,CAAC,EAC1B9J,EAAA,iBAAiB8J,EAAW,KAAK,OAAO,CAC7C,CAEA,QAAS,CACD,MAAAA,EAAY,KAAK,KAAK,CAAC,EAC7B,KAAK,GAAG,oBAAoBA,EAAW,KAAK,OAAO,CACrD,CAEA,QAAQ9J,EAAiBqjD,EAAwB,C7P7B5C,IAAA1iD,E6P8BH,MAAM2iD,EAAa,MAAM,KACvB,SAAS,iBAA8BD,CAAc,GAGnDC,EAAW,QAAU,GACf,aACN,2DAA2DD,WAAA,EAI/D,UAAWroC,KAAU,KAAK,QAAQ,OAC3BsoC,EAAW,KAAMxjD,GAAMA,IAAMkb,CAAM,KACtCra,EAAA,KAAK,QAAQ,IAAIqa,CAAM,IAAvB,MAAAra,EAA0B,UACrB,aAAQ,OAAOqa,CAAM,GAI9B,UAAWA,KAAUsoC,EACd,KAAK,QAAQ,IAAItoC,CAAM,GACrB,aAAQ,IAAIA,EAAQ,IAAIuxB,EAASvxB,EAAQ,CAAE,OAAQ,EAAO,EAAC,CAGtE,CACF,CAlDEjT,EADWo7C,GACJ,MAAM,4BCCR,MAAMI,WAAuB95C,CAGlC,CAHK,kCAMG1B,EAAA,gBAEAA,EAAA,wBAER,KAAK/H,EAAiB,CACf,cAAYA,EAAG,UAAU,SAAS,iBAAiB,EACpDA,EACAA,EAAG,cAAc,kBAAkB,IAAMA,CAG/C,CAEA,QAAQA,EAAiBgB,EAAS,GAAI,CAChC,IAAC,KAAK,QACF,UAAI,MAAM,mCAAmC,EAEjD,KAAK,kBAC2B,KAAK,gBACvB,QAAQ,EAEnB,aAAQ,QAAQ,SAAW,IAElC,MAAMwiD,EAAkB,IAAI9T,EAAS,KAAK,QAAS1uC,CAAM,EAEpD,aAAQ,QAAQ,SAAW,WAChC,KAAK,gBAAkBwiD,EACvB,KAAK,gBAAgB,MACvB,CACF,CA9BEz7C,EAJWw7C,GAIJ,MAAM,gBCFR,MAAME,WAA0Bh6C,CAA4B,CAGjE,QAAQzJ,EAAiBkG,EAAa,CACpC,MAAMk9C,EAAkB,IAAI7W,EAASvsC,EAAI,CAAE,OAAQ,GAAO,EACpD0jD,EAAa,IAAIz5C,EAAgB,MAAM,EAEvC05C,EAAYC,GACZA,GAAcp9C,GAAQo9C,CAAU,GAClCR,EAAgB,KAAK,EACd,KAETA,EAAgB,KAAK,EACd,IAGTM,EAAW,GAAG,eAAgB,IAAMC,EAASz9C,CAAG,CAAC,EAEjDy9C,EAASz9C,CAAG,CACd,CACF,CAnBE6B,EADW07C,GACJ,MAAM,qBCLR,MAAMI,WAAsBp6C,CAA4B,CAAxD,kCAGG1B,EAAA,gBACAA,EAAA,iBAA8C,IAEtD,QAAQ/H,EAAiB8jD,EAA2C,CAClE,IAAIlpD,EAAmC,GAEnC,OAAOkpD,GAAqB,SAC9BlpD,EAAQ,QAAUkpD,EACT,OAAOA,GAAqB,WAC3BlpD,EAAA,CAAE,GAAGkpD,IAETlpD,EAAA,UAAYA,EAAQ,WAAa,OAEnC,MAAAmpD,EAAU,IAAIxJ,GAAQv6C,EAAI,CAC9B,GAAGu6C,GAAQ,QACX,GAAG3/C,CAAA,CACJ,EAGG,KAAK,SACP,KAAK,QAAQ,UAGf,KAAK,QAAUmpD,EAOf,MAAMC,EAAwC,CAC5C,OACA,OACA,SACA,UACA,SACA,UACA,UAIF,GAAI,KAAK,UACI,UAACjX,EAASkX,CAAQ,IAAK,OAAO,QAAQ,KAAK,SAAS,EACxD,QAAG,oBAAoBlX,EAASkX,CAAyB,EAI7D,eAAmB,cAAO,IAAI,EACnC,UAAWC,KAAcF,EACvB,GAAID,EAAQG,CAAU,GAAK,OAAOH,EAAQG,CAAU,GAAM,WAAY,CAC9D,MAAAnX,EAAU,WAAW,OAAOmX,CAAU,IACtCD,EAAYF,EAAQG,CAAU,EAAU,KAAKH,CAAO,EACrD,QAAG,iBAAiBhX,EAASkX,CAAQ,EACrC,eAAUlX,CAAO,EAAIkX,OAElB,aAAK,kBAAoBC,CAAU,CAGjD,CAEA,KAAKlkD,EAAiB,CAGjBA,EAAA,cACD,IAAI,YAAY,mBAAoB,CAAE,QAAS,GAAM,WAAY,GAAM,EAE3E,CAEA,QAAS,CAMP,GAJI,KAAK,SACP,KAAK,QAAQ,UAGX,KAAK,UACI,UAAC+sC,EAASkX,CAAQ,IAAK,OAAO,QAAQ,KAAK,SAAS,EACxD,QAAG,oBAAoBlX,EAASkX,CAAyB,CAGpE,CACF,CAlFEl8C,EADW87C,GACJ,MAAM,eCHR,MAAMM,WAA+B16C,CAG1C,CAHK,kCAMG1B,EAAA,kBAeAA,EAAA,eAAU,KAAK,SAAS,KAAK,IAAI,GAbjC,SAAStF,EAAoB,CAC/B,IAAC,KAAK,UACF,UAAI,MAAM,qBAAqB,EAEvC,KAAK,UAAU,OAASA,EACnB,eAAU,SAAW,KAAK,KAAK,OACpC,MAAM2hD,EAA+B,IAAIhC,GAAkB,KAAK,SAAS,EAC1C,IAAIn4C,EACjCm6C,EAAU,SAAW,SAEA,QAAQ,oBAAqBA,CAAS,CAC/D,CAIA,KAAKpkD,EAAwB,CACrB,MAAA8J,EAAY,KAAK,KAAK,CAAC,EAC1B9J,EAAA,iBAAiB8J,EAAkB,KAAK,OAAO,CACpD,CAEA,QAAQ9J,EAAwBokD,EAA8B,CACxD,QAAK,OAAS,KACV,UAAI,MAAM,cAAc,EAEhC,KAAK,UAAYA,CACnB,CAEA,OAAOpkD,EAAiB,CAChB,MAAA8J,EAAY,KAAK,KAAK,CAAC,EAC1B9J,EAAA,oBAAoB8J,EAAkB,KAAK,OAAO,CACvD,CACF,CAnCE/B,EAJWo8C,GAIJ,MAAM,mBCAR,MAAME,WAA6B56C,CAAiC,CAApE,kCAGG1B,EAAA,eACAA,EAAA,kBAwBAA,EAAA,gBAAW7L,GAAS,KAAK,UAAU,KAAK,IAAI,CAAC,GAgB7C6L,EAAA,oBAAe,KAAK,cAAc,KAAK,IAAI,GAtC3C,WAAY,CACd,IAAC,KAAK,OACF,UAAI,MAAM,0BAA0B,EAGxC,IAAC,KAAK,UACF,UAAI,MAAM,oBAAoB,EAGlC,KAAK,aAAa,KAAK,MAAM,GAC/B,KAAK,GAAG,UAAU,IAAI,KAAK,SAAS,EAChC,KAAK,GAAG,OAAS,UACnB,KAAK,GAAG,QAAU,MAGpB,KAAK,GAAG,UAAU,OAAO,KAAK,SAAS,EACnC,KAAK,GAAG,OAAS,UACnB,KAAK,GAAG,QAAU,IAGxB,CASQ,cAAclF,EAAe,CACnC,GAAI,CAACA,EACI,SAET,MAAMyhD,EAAY,OAAO,KAAK,GAAG,QAAQ,QAAU,CAAC,EAC9CC,EAAe,OAAO,KAAK,GAAG,QAAQ,cAAgB,CAAC,EAC7D,OAAO3hD,GAAaC,EAAM,CAAE,IAAKyhD,EAAW,OAAQC,EAAc,CACpE,CAIA,MAAO,CACE,wBAAiB,SAAU,KAAK,SAAU,CAC/C,QAAS,GACV,EACD,KAAK,SAAS,CAChB,CAEA,QAAQvkD,EAAiBqjD,EAAwB,CAC/C,MAAMmB,EAAyBnB,EAAe,QAAQ,IAAK,EAAE,EAC7D,KAAK,OAAS,SAAS,eAAemB,CAAsB,GAAK,OAC5D,eAAY,KAAK,KAAK,CAAC,CAC9B,CAEA,QAAS,CACA,2BAAoB,SAAU,KAAK,QAAQ,CACpD,CACF,CA7DEz8C,EADWs8C,GACJ,MAAM,mBCNf,MAAMn0C,GAAW,SAAS,cAAc,KAAK,EAC7CA,GAAS,UAAU,IAAI,SAAS,EAChCA,GAAS,aAAa,OAAQ,SAAS,EAEvC,MAAMue,GAAQ,SAAS,cAAc,KAAK,EAC1CA,GAAM,UAAU,IAAI,OAAO,EAC3Bve,GAAS,YAAYue,EAAK,EAE1B,MAAMg2B,GAAQ,SAAS,cAAc,KAAK,EAC1CA,GAAM,UAAU,IAAI,eAAe,EACnCv0C,GAAS,YAAYu0C,EAAK,EAKnB,MAAMC,WAAsBj7C,CAA4B,CAAxD,kCAGG1B,EAAA,eAEAA,EAAA,WAAMmI,GAAS,UAAU,EAAI,GA4C7BnI,EAAA,YAAO,KAAK,MAAM,KAAK,IAAI,GAS3BA,EAAA,YAAO,KAAK,MAAM,KAAK,IAAI,GAnD3B,OAAQ,CACd,MAAMgiB,EAAmC,KAAK,GAAG,QAAQ,WACvD,QAEIxoB,EAAS,EACf,KAAK,OAASs9B,GAAa,KAAK,GAAI,KAAK,IAAK,CAC5C,UAAA9U,EACA,UAAW,CACT,CACE,KAAM,OACN,QAAS,CACP,YAAa,GAEb,SAAU,MACZ,CACF,EACA,CACE,KAAM,SACN,QAAS,CACP,OAAAxoB,CACF,CACF,EACA,CACE,KAAM,QACN,QAAS,CACP,QAAS,QACX,CACF,EACA,CACE,KAAM,kBACN,QAAS,CACP,kBAAmB,cACrB,CACF,CACF,EACA,SAAU,OACX,EACQ,cAAK,YAAY,KAAK,GAAG,EAC7B,SAAI,UAAU,IAAI,MAAM,EAC7B,KAAK,IAAI,UAAU,IAAI,cAAgBwoB,CAAS,CAClD,CAIQ,OAAQ,CACT,SAAI,UAAU,OAAO,MAAM,EAC5B,KAAK,QACP,KAAK,OAAO,SAEhB,CAIA,KAAK/pB,EAAwB,CACxBA,EAAA,iBAAiB,aAAc,KAAK,IAAI,EACxCA,EAAA,iBAAiB,aAAc,KAAK,IAAI,CAC7C,CAEA,QAAQA,EAAiBgF,EAAc,CACrC,MAAM2/C,EAAU,KAAK,IAAI,cAAc,gBAAgB,EACvDA,EAAQ,UAAY3/C,CACtB,CAEA,QAAS,CACP,KAAK,KAAK,EACV,KAAK,GAAG,oBAAoB,aAAc,KAAK,IAAI,EACnD,KAAK,GAAG,oBAAoB,aAAc,KAAK,IAAI,CACrD,CACF,CA1EE+C,EADW28C,GACJ,MAAM,eChBR,MAAME,WAA8Bn7C,CAA4B,CAAhE,kCAGG1B,EAAA,eAaAA,EAAA,eAAU,KAAK,SAAS,KAAK,IAAI,GAXjC,SAAStF,EAAc,CAC7B,MAAMlB,EAAS,OAAO,KAAK,GAAG,QAAQ,QAAU,CAAC,EAC3CL,EAAgB,KAAK,GAAG,QAAQ,cAClC,SAAS,cAA2B,KAAK,GAAG,QAAQ,aAAa,EACjE,OACA,KAAK,SACEG,GAAA,KAAK,OAAQE,EAAQL,CAAa,EAC3CuB,EAAM,eAAe,EAEzB,CAIA,KAAKzC,EAAwB,CAC3B,KAAK,QAAU,KAAK,QAAQ,KAAK,IAAI,EAC/B,MAAA8J,EAAY,KAAK,KAAK,CAAC,EAC1B9J,EAAA,iBAAiB8J,EAAW,KAAK,OAAO,CAC7C,CAEA,QAAQ9J,EAAwBqjD,EAAwB,CACtD,KAAK,OACH,SAAS,cAA2BA,CAAc,GAAK,MAC3D,CAEA,OAAOrjD,EAAiB,CAChB,MAAA8J,EAAY,KAAK,KAAK,CAAC,EAC1B9J,EAAA,oBAAoB8J,EAAW,KAAK,OAAO,CAChD,CACF,CAhCE/B,EADW68C,GACJ,MAAM,kBCOR,MAAMC,WAA8Bp7C,CAA4B,CAAhE,kCAGG1B,EAAA,2BACAA,EAAA,aAAQ,OASRA,EAAA,oBAAe,KAAK,cAAc,KAAK,IAAI,GAM3CA,EAAA,gBAAW,KAAK,UAAU,KAAK,IAAI,GAbnC,eAAgB,CrQbnB,IAAApH,GqQcHA,EAAA,KAAK,qBAAL,MAAAA,EAAyB,QACvB0nB,EAAc,WAAW,MACzB,KAAK,MAET,CAIQ,WAAY,CAClB,KAAK,OAAO,KAAK,IAAI,EAAE,KAAK,EAAE,CAChC,CAIQ,OAAOroB,EAAiB,CAC1B,KAAK,QAAU,UACjB,KAAK,IAAI,KAAK,IAAI,EAAEA,CAAE,EAEtB,KAAK,OAAO,KAAK,IAAI,EAAEA,CAAE,CAE7B,CAEQ,OAAOA,EAAiB,CACxB,MAAAC,EAAgB,KAAK,KAAK,CAAC,EACjCD,EAAG,gBAAgBC,CAAa,EAChC,KAAK,MAAQ,UACVD,EAAA,cACD,IAAI,YAAYsoB,GAAiB,aAAa,QAAS,CACrD,OAAQ,CAAE,cAAAroB,CAAc,EACzB,GAEH,KAAK,aAAa,CACpB,CAEQ,IAAID,EAAiB,CACrB,MAAAC,EAAgB,KAAK,KAAK,CAAC,EAE9BD,EAAA,aAAaC,EAAeA,CAAa,EAC5C,KAAK,MAAQ,QACVD,EAAA,cACD,IAAI,YAAYsoB,GAAiB,aAAa,MAAO,CACnD,OAAQ,CAAE,cAAAroB,CAAc,EACzB,GAEH,KAAK,aAAa,CACpB,CAEA,KAAKD,EAAiB,CACd,MAAAC,EAAgB,KAAK,KAAK,CAAC,EACjC,KAAK,MAAQD,EAAG,aAAaC,CAAa,EAAI,QAAU,SAC1D,CAEA,QAAS,CrQlEJ,IAAAU,EAAA4B,GqQmEH5B,EAAA,KAAK,qBAAL,MAAAA,EAAyB,IACvB0nB,EAAc,WAAW,OACzB,KAAK,SACL,OAEF9lB,EAAA,KAAK,qBAAL,MAAAA,EAAyB,IACvB8lB,EAAc,WAAW,KACzB,KAAK,aACL,KAEJ,CAEA,QAAQroB,EAAiB8kD,EAAe,CAChC,MAAAC,EAAQ,KAAK,UAAU/kD,CAAE,EAC/B,IAAIglD,EAAe,KAAK,mBACpBD,GAASC,IACXA,EAAa,IAAI38B,EAAc,WAAW,OAAQ,KAAK,SAAU,IAAI,EACrE28B,EAAa,IAAI38B,EAAc,WAAW,KAAM,KAAK,aAAc,IAAI,GAGpE,KAAK,qBACR,KAAK,mBAAqB,IAAIpe,EAC5Boe,EAAc,SAAWy8B,CAAA,EAE3BE,EAAe,KAAK,mBACpBA,EAAa,GAAG38B,EAAc,WAAW,OAAQ,KAAK,SAAU,IAAI,EACpE28B,EAAa,GAAG38B,EAAc,WAAW,KAAM,KAAK,aAAc,IAAI,EAE1E,CACF,CAxFEtgB,EADW88C,GACJ,MAAM,0BCDR,MAAMI,WAA0Bx7C,CAAkC,CAAlE,kCAGG1B,EAAA,2BACAA,EAAA,aAAQ,OASRA,EAAA,oBAAe,KAAK,cAAc,KAAK,IAAI,GAM3CA,EAAA,gBAAW,KAAK,UAAU,KAAK,IAAI,GAbnC,eAAgB,CtQbnB,IAAApH,GsQcHA,EAAA,KAAK,qBAAL,MAAAA,EAAyB,QACvB0nB,EAAc,WAAW,MACzB,KAAK,MAET,CAIQ,WAAY,CAClB,KAAK,OAAO,KAAK,IAAI,EAAE,KAAK,EAAE,CAChC,CAIQ,OAAOroB,EAAuB,CAChC,KAAK,QAAU,UACjB,KAAK,IAAI,KAAK,IAAI,EAAEA,CAAE,EAEtB,KAAK,OAAO,KAAK,IAAI,EAAEA,CAAE,CAE7B,CAEQ,OAAOA,EAAuB,CAC9B,MAAA2O,EAAY,KAAK,KAAK,CAAC,EAC1B3O,EAAA,UAAU,OAAO2O,CAAS,EAC7B,KAAK,MAAQ,UACV3O,EAAA,cACD,IAAI,YAAYuoB,GAAa,aAAa,QAAS,CACjD,OAAQ,CAAE,UAAA5Z,CAAU,EACrB,GAEH,KAAK,aAAa,CACpB,CAEQ,IAAI3O,EAAuB,CAC3B,MAAA2O,EAAY,KAAK,KAAK,CAAC,EAE1B3O,EAAA,UAAU,IAAI2O,EAAWA,CAAS,EACrC,KAAK,MAAQ,QACV3O,EAAA,cACD,IAAI,YAAYuoB,GAAa,aAAa,MAAO,CAC/C,OAAQ,CAAE,UAAA5Z,CAAU,EACrB,GAEH,KAAK,aAAa,CACpB,CAEA,KAAK3O,EAAuB,CACpB,MAAA2O,EAAY,KAAK,KAAK,CAAC,EAC7B,KAAK,MAAQ3O,EAAG,UAAU,SAAS2O,CAAS,EAAI,QAAU,SAC5D,CAEA,QAAS,CtQlEJ,IAAAhO,EAAA4B,GsQmEH5B,EAAA,KAAK,qBAAL,MAAAA,EAAyB,IACvB0nB,EAAc,WAAW,OACzB,KAAK,SACL,OAEF9lB,EAAA,KAAK,qBAAL,MAAAA,EAAyB,IACvB8lB,EAAc,WAAW,KACzB,KAAK,aACL,KAEJ,CAEA,QAAQroB,EAAuB8kD,EAAe,CACtC,MAAAC,EAAQ,KAAK,UAAU/kD,CAAE,EAC/B,IAAIglD,EAAe,KAAK,mBACpBD,GAASC,IACXA,EAAa,IAAI38B,EAAc,WAAW,OAAQ,KAAK,SAAU,IAAI,EACrE28B,EAAa,IAAI38B,EAAc,WAAW,KAAM,KAAK,aAAc,IAAI,GAGpE,KAAK,qBACR,KAAK,mBAAqB,IAAIpe,EAC5Boe,EAAc,SAAWy8B,CAAA,EAE3BE,EAAe,KAAK,mBACpBA,EAAa,GAAG38B,EAAc,WAAW,OAAQ,KAAK,SAAU,IAAI,EACpE28B,EAAa,GAAG38B,EAAc,WAAW,KAAM,KAAK,aAAc,IAAI,EAE1E,CACF,CAxFEtgB,EADWk9C,GACJ,MAAM,mpCCETlmD,GAAYkd,GAAmB,KAYxBipC,GAAN,cAAoC3tC,EAAmB,CAwC5D,aAAc,CACN,QAtCExP,EAAA,gBAAW,IAEXA,EAAA,0BAAqB,CAC7B,CACE,KAAM,QACN,SAAU,EACZ,EACA,CACE,KAAM,OACN,SAAU,EACZ,EACA,CACE,KAAM,iBACN,SAAU,EACZ,IAcKA,EAAA,aAAe,CACpB,MAAO,CAAC,EACR,OAAQ,KAAK,OACb,KAAM,KAAK,KACX,KAAM,KAAK,KACX,iBAAkB,GAClB,YAAa,IAKf,CApBA,WAAW,oBAAqD,CACvD,OACL,QACA,oBACA,qBACA,gBAEJ,CAeO,KAAKgkB,EAAqBxjB,EAAe,CAC9C,MAAMyS,EAAS,KAAK,cAA2B,gBAAgBzS,KAAS,EACpEyS,IACG,4BAAuB+Q,EAAM/Q,CAAM,EACxC,IAAIuxB,EAASvxB,EAAQ,CAAE,OAAQ,EAAO,GAAE,OAE5C,CAEO,KAAK+Q,EAAqBxjB,EAAe,CAC9C,MAAMyS,EAAS,KAAK,cAA2B,gBAAgBzS,KAAS,EAClE48C,EAAS,MAAM,KACnB,KAAK,iBACH,iCAAiC58C,MACnC,GAEE,GAAA48C,GAAU,KAAK,MAAM,YACvB,UAAWC,KAASD,EAClB,IAAI5Y,EAAS6Y,EAAO,CAAE,OAAQ,EAAO,GAAE,OAGvCpqC,IACG,4BAAuB+Q,EAAM/Q,CAAM,EACxC,IAAIuxB,EAASvxB,EAAQ,CAAE,OAAQ,EAAO,GAAE,OAE5C,CAEO,OAAO+Q,EAAqBxjB,EAAe,CAChD,MAAMyS,EAAS,KAAK,cAA2B,gBAAgBzS,KAAS,EAClE48C,EAAS,MAAM,KACnB,KAAK,iBACH,iCAAiC58C,MACnC,GAEE,GAAA48C,GAAU,KAAK,MAAM,YACvB,UAAWC,KAASD,EAClB,IAAI5Y,EAAS6Y,EAAO,CAAE,OAAQ,EAAO,GAAE,OAGvCpqC,IACG,4BAAuB+Q,EAAM/Q,CAAM,EACxC,IAAIuxB,EAASvxB,EAAQ,CAAE,OAAQ,EAAO,GAAE,SAE5C,CAEU,uBAAuB+Q,EAAqBxrB,EAAsB,CAClEA,EAAA,oBACNqgD,GAAe,KACf,KAAK,OAAO,KAAK,KAAMrgD,EAASwrB,CAAI,GAE9BxrB,EAAA,oBACNqgD,GAAe,KACf,KAAK,OAAO,KAAK,KAAMrgD,EAASwrB,CAAI,GAE9BxrB,EAAA,iBACNqgD,GAAe,KACf,KAAK,OAAO,KAAK,KAAMrgD,EAASwrB,CAAI,EACpC,CAAE,KAAM,EAAK,GAEPxrB,EAAA,iBACNqgD,GAAe,KACf,KAAK,OAAO,KAAK,KAAMrgD,EAASwrB,CAAI,EACpC,CAAE,KAAM,EAAK,EAEjB,CAEU,wBAAyB,CAC1B,YAAK,cAAc,gBAAgB,GAAK,MACjD,CAEU,OAAOxrB,EAAsBwrB,EAAqB,CAC1DA,EAAK,KAAO,GACZA,EAAK,cAAgB,KACf,MAAAs5B,EAAoB,KAAK,yBAC3BA,GACG,wCAAmCA,EAAmBt5B,EAAK,IAAI,CAExE,CAEU,OAAOxrB,EAAsBwrB,EAAqB,CAC1DA,EAAK,KAAO,GACZA,EAAK,cAAgB,OACf,MAAAs5B,EAAoB,KAAK,yBAC3BA,GACG,wCAAmCA,EAAmBt5B,EAAK,IAAI,CAExE,CAEU,4BAA4Bra,EAAiB,CACrD,OAAAA,EAAW,OAASA,EAAW,QAAU3S,GAAU2S,EAAW,KAAK,EACxDA,EAAA,KAAO,CAAC,CAACA,EAAW,KAC/BA,EAAW,cACTA,EAAW,eAAiBA,EAAW,KAAO,KAAO,OAEhDA,CACT,CAQU,mCACRnR,EACA+kD,EACA,CACA,WAAW,IAAM,CAEP/kD,EAAA,cACN,IAAI,YAAY,qBAAsB,CAAE,OAAQ,CAAE,QAAA+kD,GAAW,IAE9D,GAAG,CACR,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKJ,GAAsB,kBAAkB,CACpD,CAEA,MAAgB,KAAKpuC,EAA8B,CACjD,OAAO,MAAM,KAAKA,CAAkB,EAAE,KAAMxJ,GACnCA,CACR,CACH,CAEA,MAAgB,YAAa,CACpB,aAAM,MAAM,YACrB,CAEA,MAAgB,WAAY,CACnB,aAAM,MAAM,WACrB,CAEU,oBAA+B,CACvC,MAAO,EACT,CAEU,+BACRrN,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,CAEJ,CAGU,sBAAuB,CAC/B,MAAM,qBAAqB,CAC7B,CAEA,MAAgB,UAAW,CAEzB,GAAI,CAACjJ,EAAkB,IAAI,GAAK,KAAK,wBAAyB,CAC5D,KAAM,CAAE,QAASwP,CAAa,QAAMq1C,GAAA,WAClC,6CACF,MACO,OAAAr1C,MAEA,YAEX,CACF,EAnNO,IAAMs1C,GAANN,GACLn9C,EADWy9C,GACG,UAAU,iBCpBnB,MAAMC,GAAN,cAAiCjuC,CAAU,CAchD,aAAc,CACN,QAZEzP,EAAA,gBAAW,IAMdA,EAAA,aAAe,CACpB,eAAgB,sBAChB,QAAS,KAAK,QAAQ,KAAK,IAAI,GAKjC,CAXA,WAAW,oBAA+B,CACxC,MAAO,CAAC,iBAAiB,CAC3B,CAWO,SAAU,CACf,KAAK,eAAe,CACtB,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAK09C,GAAmB,kBAAkB,CACjD,CAEU,gBAAiB,CACzB,KAAK,UAAU,IAAI,KAAK,MAAM,cAAc,CAC9C,CAEU,kBAAmB,CAE7B,CAEU,gBAAiB,CACzB,WAAW,IAAM,CACf,KAAK,UAAU,OAAO,KAAK,MAAM,cAAc,EAChD,CACH,CAEA,MAAgB,KAAK3uC,EAA8B,CACjD,OAAO,MAAM,KAAKA,CAAkB,EAAE,KAAMxJ,IAC1C,KAAK,iBAAmB,KAAK,iBAAiB,KAAK,IAAI,EAClD,sBACH,uBACA,KAAK,kBAEF,sBAAiB,iBAAkB,KAAK,gBAAgB,EAC7D,KAAK,eAAiB,KAAK,eAAe,KAAK,IAAI,EAC9C,sBACH,qBACA,KAAK,gBAEF,sBAAiB,eAAgB,KAAK,cAAc,EACzD,KAAK,iBAAiB,QAAS,KAAK,MAAM,OAAO,EAC1CA,EACR,CACH,CAEU,oBAA+B,CACvC,MAAO,EACT,CAEU,+BACRrN,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,CAEJ,CAGU,sBAAuB,CAC/B,MAAM,qBAAqB,EACtB,yBACH,uBACA,KAAK,kBAEF,yBAAoB,iBAAkB,KAAK,gBAAgB,EAC3D,yBACH,qBACA,KAAK,gBAEF,yBAAoB,eAAgB,KAAK,cAAc,EAC5D,KAAK,oBAAoB,QAAS,KAAK,MAAM,OAAO,CACtD,CAEU,UAAyC,CAC1C,WACT,CACF,EAjGO,IAAM+7C,GAAND,GACL19C,EADW29C,GACG,UAAU,cCcnB,MAAMC,GAAN,cAAmCnuC,CAAU,CAiClD,aAAc,CACN,QAvBDzP,EAAA,aAAe,CAEpB,SAAUiiC,GAAS,QAAQ,SAC3B,SAAUA,GAAS,QAAQ,SAC3B,MAAOA,GAAS,QAAQ,OAAS,GACjC,KAAMA,GAAS,QAAQ,KACvB,MAAOA,GAAS,QAAQ,MACxB,KAAM,GAEN,KAAM,KAAK,KACX,gBAAiB,KAAK,gBACtB,KAAM,KAAK,KACX,WAAY,KAAK,MACjB,MAAO,KAAK,MACZ,GAAI,KAAK,GACT,QAAS,KAAK,UAGNjiC,EAAA,gBAAW,IAEXA,EAAA,uBAIV,CAhCA,WAAW,oBAA+B,CACxC,MAAO,CAAC,WAAY,WAAY,QAAS,OAAQ,QAAS,MAAM,CAClE,CAEU,oBAA+B,CACvC,MAAO,EACT,CA4BA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACP,eAAU,IAAI,WAAY,OAAO,CACxC,CAEA,MAAgB,WAAY,CACrB,qBAAkB,IAAIiiC,GAAS,KAAM,CACxC,SAAU,KAAK,MAAM,SACrB,SAAU,KAAK,MAAM,SACrB,MAAO,KAAK,MAAM,MAClB,KAAM,KAAK,MAAM,KACjB,MAAO,KAAK,MAAM,MACnB,EACG,KAAK,MAAM,MACR,eAAU,IAAI,eAAe,EAGpC,KAAK,gBAAgB,QACrB,MAAM,MAAM,WACd,CAEO,MAAO,CACR,KAAK,iBACP,KAAK,gBAAgB,MAEzB,CAEO,iBAAkB,CACnB,KAAK,iBACP,KAAK,gBAAgB,iBAEzB,CAEO,MAAO,CACR,KAAK,iBACP,KAAK,gBAAgB,MAEzB,CAEO,OAAQ,CACT,KAAK,iBACP,KAAK,gBAAgB,OAEzB,CAEO,OAAQ,CACT,KAAK,iBACP,KAAK,gBAAgB,OAEzB,CAEO,IAAK,CACV,GAAI,KAAK,gBACD,UAAI,MAAM,MAAM,CAG1B,CAEO,SAAU,CACX,KAAK,iBACP,KAAK,gBAAgB,SAEzB,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EAClB,WAAK2b,GAAqB,kBAAkB,CACpD,CAEU,UAAyC,CAC1C,WACT,CACF,EA7GO,IAAMC,GAAND,GACL59C,EADW69C,GACG,UAAU,gBCRnB,MAAMC,GAAN,cAAmCruC,CAAU,CAyBlD,aAAc,CACN,QAvBEzP,EAAA,gBAAW,IAEXA,EAAA,iBAUHA,EAAA,aAAe,CACpB,MAAO,GACP,QACE,6HACF,UAAW,GACX,OAAQ,KAAK,OACb,KAAM,KAAK,KACX,KAAM,KAAK,MAKb,CApBA,WAAW,oBAAoD,CACtD,OAAC,QAAS,UAAW,WAAW,CACzC,CAEU,oBAAoD,CAC5D,MAAO,CAAC,OAAO,CACjB,CAgBO,MAAO,CACZ,QAAQ,MAAM,MAAM,EAChB,KAAK,WACP,KAAK,MAAM,UAAY,GACvB,KAAK,SAAS,OAElB,CAEO,MAAO,CACR,KAAK,WACP,KAAK,MAAM,UAAY,GACvB,KAAK,SAAS,OAElB,CAEO,QAAS,CACV,KAAK,WACP,KAAK,SAAS,SACd,KAAK,MAAM,UAAY,CAAC,CAAC,KAAK,MAAM,UAExC,CAEU,mBAAoB,CACxB,KAAK,MAAM,aACb,KAAK,MAAM,WAAW,iBACpB64C,GAAe,KACf,KAAK,OAAO,KAAK,IAAI,GAEvB,KAAK,MAAM,WAAW,iBACpBA,GAAe,KACf,KAAK,OAAO,KAAK,IAAI,GAG3B,CAEU,sBAAuB,CAC3B,KAAK,MAAM,aACb,KAAK,MAAM,WAAW,oBACpBA,GAAe,KACf,KAAK,OAAO,KAAK,IAAI,GAEvB,KAAK,MAAM,WAAW,oBACpBA,GAAe,KACf,KAAK,OAAO,KAAK,IAAI,GAG3B,CAEU,QAAS,CACjB,QAAQ,MAAM,QAAQ,EACtB,KAAK,MAAM,UAAY,GACvB,KAAK,mCAAmC,CAAC,KAAK,MAAM,SAAS,CAC/D,CAEU,QAAS,CACjB,QAAQ,MAAM,QAAQ,EACtB,KAAK,MAAM,UAAY,GACvB,KAAK,mCAAmC,CAAC,KAAK,MAAM,SAAS,CAC/D,CAOU,mCAAmC0E,EAAkB,CAC7D,WAAW,IAAM,CACT,MAAA7iD,EAAQ,IAAI,YAAY,qBAAsB,CAClD,OAAQ,CAAE,QAAA6iD,CAAQ,EACnB,EAGD,KAAK,cAAc7iD,CAAK,EAEpB,KAAK,MAAM,YACR,WAAM,WAAW,cAAcA,CAAK,GAE1C,GAAG,CACR,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKojD,GAAqB,kBAAkB,CACnD,CAEA,MAAgB,WAAY,CAItB,GAHJ,QAAQ,MAAM,YAAa,KAAK,MAAM,SAAS,EAC/C,KAAK,MAAM,WAAa,KAAK,cAAc,WAAW,GAAK,OAEvD,CAAC,KAAK,MAAM,WACR,UAAI,MAAM,4BAA4B,EAE9C,KAAK,SAAW,IAAItZ,EAAS,KAAK,MAAM,WAAY,CAClD,OAAQ,CAAC,KAAK,MAAM,UACrB,CACH,CAEU,UAAyC,CAC7C,OAAA7rC,EAAkB,IAAI,IACnB,WAAM,QAAU,KAAK,4BAIzB,MACC,sBAAC,UACC,cAAY,SACZ,MAAM,kBACN,KAAK,SACL,gBAAc,QACd,mBAAiB,oBACjB,UAAQ,UAEV,iBAAC,MAAI,OAAM,gBAAgB,QAAM,SAC9B,wBAAI,MAAM,iBAAiB,cAAY,UAAU,CACpD,CACF,CAEJ,CACF,EAnJO,IAAMolD,GAAND,GACL99C,EADW+9C,GACG,UAAU,gBCd1B,OAAO,UAAU,WAAc,OAAO,UAAU,YAAc,SAASC,EAAU,CAAE,OAAQ,KAAK,QAAQA,CAAM,IAAM,CAAK,EACzH,OAAO,UAAU,SAAc,OAAO,UAAU,UAAc,SAASj0C,EAAKk0C,EAAK,CAAE,IAAI/oD,EAAM,KAAM,KAAMA,EAAI,OAAS6U,GAAO7U,EAAM+oD,EAAM/oD,EAAQ,OAAOA,CAAI,EAwB5J,MAAMgpD,GAAa,CAAC,GAAG,QAAQ,IAAI,QAAQ,EAAE,QAAQ,KAAK,SAAS,GAAG,QAAQ,GAAG,QAAQ,IAAI,OAAO,IAAI,MAAM,IAAI,OAAO,EAAE,OAAO,IAAI,SAAS,KAAK,SAAS,IAAI,SAAS,IAAI,SAAS,IAAI,QAAQ,KAAK,SAAS,GAAG,OAAO,IAAI,SAAS,KAAK,MAAM,KAAK,SAAS,GAAG,QAAQ,GAAG,OAAO,IAAI,QAAQ,KAAK,SAAS,IAAI,SAAS,KAAK,OAAO,KAAK,SAAS,KAAK,QAAQ,KAAK,SAAS,KAAK,MAAM,KAAK,SAAS,GAAG,OAAO,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS,KAAK,QAAQ,IAAI,QAAQ,KAAK,OAAO,KAAK,QAAQ,IAAI,SAAS,IAAI,SAAS,KAAK,SAAS,KAAK,MAAM,IAAI,SAAS,IAAI,MAAM,KAAK,SAAS,GAAG,QAAQ,EAAE,MAAM,IAAI,SAAS,GAAG,SAAS,IAAI,OAAO,KAAK,SAAS,IAAI,QAAQ,KAAK,OAAO,IAAI,SAAS,GAAG,QAAQ,GAAG,IAAI,IAAI,QAAQ,IAAI,SAAS,IAAI,MAAM,KAAK,QAAQ,KAAK,MAAM,GAAG,SAAS,IAAI,QAAQ,IAAI,SAAS,KAAK,QAAQ,IAAI,SAAS,KAAK,SAAS,KAAK,OAAO,KAAK,OAAO,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS,GAAG,KAAK,EAAE,OAAO,KAAK,SAAS,GAAG,QAAQ,KAAK,MAAM,IAAI,OAAO,IAAI,SAAS,IAAI,OAAO,KAAK,SAAS,KAAK,SAAS,IAAI,SAAS,KAAK,SAAS,GAAG,QAAQ,IAAI,SAAS,KAAK,SAAS,KAAK,SAAS,IAAI,QAAQ,KAAK,OAAO,KAAK,OAAO,IAAI,OAAO,GAAG,OAAO,EAAE,QAAQ,EAAE,QAAQ,IAAI,SAAS,IAAI,MAAM,KAAK,MAAM,IAAI,SAAS,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS,KAAK,OAAO,KAAK,OAAO,GAAG,SAAS,IAAI,OAAO,GAAG,SAAS,KAAK,SAAS,IAAI,QAAQ,GAAG,SAAS,EAAE,KAAK,IAAI,SAAS,GAAG,SAAS,KAAK,SAAS,IAAI,QAAQ,IAAI,QAAQ,KAAK,SAAS,IAAI,MAAM,IAAI,SAAS,IAAI,SAAS,IAAI,SAAS,IAAI,SAAS,KAAK,SAAS,IAAI,MAAM,EAAE,QAAQ,IAAI,SAAS,GAAG,SAAS,EAAE,QAAQ,KAAK,SAAS,IAAI,OAAO,KAAK,SAAS,GAAG,SAAS,IAAI,QAAQ,IAAI,GAAG,IAAI,QAAQ,EAAE,IAAI,KAAK,QAAQ,EAG/rD,SAASC,GAAS1nD,EAAK2nD,EAAO,EAAG,CAG7B,OAFaA,EAAO,EAAK3nD,EAAI,QAAQ2nD,CAAI,EAAE,QAAQ,MAAO,EAAE,EAAE,QAAQ,MAAO,EAAE,EACtD3nD,EAAI,SAAQ,IACvB,GAClB,CAGA,MAAM4nD,EAAM,CAER,YAAYz5C,EAAG05C,EAAG7zC,EAAGD,EAAG,CAEpB,MAAM+zC,EAAO,KACb,SAASC,EAAY3oD,EAAO,CAKxB,GAAIA,EAAM,WAAW,KAAK,EAAI,CAC1B,GAAI,CAAC6jB,EAAGF,EAAGpb,EAAGoM,CAAC,EAAI3U,EAAM,MAAM,eAAe,EAAE,IAAI,MAAM,EACvD2U,IAAM,SAAaA,EAAI,GAE1BkP,GAAK,IACLF,GAAK,IACLpb,GAAK,IACLmgD,EAAK,KAAO,CAAC7kC,EAAGF,EAAGpb,EAAGoM,CAAC,UAMlB3U,EAAM,WAAW,KAAK,EAAI,CAC/B,GAAI,CAAC+O,EAAG05C,EAAG7zC,EAAGD,CAAC,EAAI3U,EAAM,MAAM,eAAe,EAAE,IAAI,MAAM,EACvD2U,IAAM,SAAaA,EAAI,GAE1B+zC,EAAK,KAAO,CAAC35C,EAAG05C,EAAG7zC,EAAGD,CAAC,OAKnB3U,EAAM,WAAW,GAAG,EACpB0oD,EAAK,KAAOF,GAAM,SAASxoD,CAAK,EAGhC0oD,EAAK,KAAOF,GAAM,UAAUxoD,CAAK,GAAKwoD,GAAM,SAASxoD,CAAK,CAGrE,CAGD,GAAI+O,IAAM,OAKL,GAAI,MAAM,QAAQA,CAAC,EACpB,KAAK,KAAOA,UAIP6F,IAAM,OAAY,CACvB,MAAM/X,EAAQkS,GAAM,GAAKA,EACtBlS,GACC8rD,EAAY9rD,EAAM,YAAW,CAAE,OAKnC,KAAK,KAAO,CAACkS,EAAG05C,EAAG7zC,EAAID,IAAM,OAAa,EAAIA,CAAC,CAEtD,CAKD,IAAI,MAAO,CACP,GAAG,KAAK,MAAS,OAAO,KAAK,MAC7B,GAAG,CAAC,KAAK,MAAS,MAAM,IAAI,MAAM,iBAAiB,EAEnD,OAAQ,KAAK,MAAQ6zC,GAAM,SAAS,KAAK,KAAK,CACjD,CACD,IAAI,KAAKI,EAAK,CACPA,EAAI,SAAW,IAAKA,EAAI,CAAC,EAAI,GAEhC,KAAK,MAAQA,EACb,KAAK,MAAQ,IAChB,CAED,SAASC,EAAO,CACZ,MAAMD,EAAMC,EAAQ,KAAK,KAAO,KAAK,KAAK,MAAM,EAAG,CAAC,EAC9CC,EAAOF,EAAI,IAAI,CAAC1mD,EAAGpF,IAAMwrD,GAASpmD,EAAIpF,IAAM,EAAK,EAAI,CAAC,CAAC,EAE7D,OAAO+rD,EAAQ,QAASC,KAAW,OAAQA,IAC9C,CACD,IAAI,WAAa,CAAE,OAAO,KAAK,SAAU,CAAG,CAC5C,IAAI,YAAa,CAAE,OAAO,KAAK,SAAS,EAAI,CAAI,CAKhD,IAAI,MAAO,CACP,GAAG,KAAK,MAAS,OAAO,KAAK,MAC7B,GAAG,CAAC,KAAK,MAAS,MAAM,IAAI,MAAM,iBAAiB,EAEnD,OAAQ,KAAK,MAAQN,GAAM,SAAS,KAAK,KAAK,CACjD,CACD,IAAI,KAAKO,EAAK,CACPA,EAAI,SAAW,IAAKA,EAAI,CAAC,EAAI,GAEhC,KAAK,MAAQA,EACb,KAAK,MAAQ,IAChB,CAED,SAASF,EAAO,CACZ,MAAMG,EAAQ,CAAC,IAAK,IAAK,IAAK,CAAC,EACzBC,EAAQ,CAAC,GAAI,IAAK,IAAK,EAAE,EAEzBF,EAAMF,EAAQ,KAAK,KAAO,KAAK,KAAK,MAAM,EAAG,CAAC,EAG9CC,EAAOC,EAAI,IAAI,CAAC7mD,EAAGpF,IAAMwrD,GAASpmD,EAAI8mD,EAAMlsD,CAAC,EAAIA,IAAM,EAAK,EAAI,CAAC,EAAImsD,EAAKnsD,CAAC,CAAC,EAElF,OAAO+rD,EAAQ,QAASC,KAAW,OAAQA,IAC9C,CACD,IAAI,WAAa,CAAE,OAAO,KAAK,SAAU,CAAG,CAC5C,IAAI,YAAa,CAAE,OAAO,KAAK,SAAS,EAAI,CAAI,CAKhD,IAAI,KAAM,CAKN,MAAO,IAJK,KAAK,KACD,IAAI,CAAC5mD,EAAGpF,IAAOA,EAAI,EAAKoF,EAAE,SAAS,EAAE,EACb,KAAK,MAAMA,EAAI,GAAG,EAAE,SAAS,EAAE,CAAC,EAEvD,IAAIA,GAAKA,EAAE,SAAS,EAAG,GAAG,CAAC,EAAE,KAAK,EAAE,CACxD,CACD,IAAI,IAAIgnD,EAAK,CACT,KAAK,KAAOV,GAAM,SAASU,CAAG,CACjC,CAED,SAASL,EAAO,CACZ,MAAMK,EAAM,KAAK,IACjB,OAAOL,EAAQK,EAAMA,EAAI,UAAU,EAAG,CAAC,CAC1C,CASD,OAAO,SAASlpD,EAAO,CAEnB,MAAMkpD,GAAOlpD,EAAM,WAAW,GAAG,EAAIA,EAAM,MAAM,CAAC,EAAIA,GACjD,QAAQ,YAAsB,KAAK,EACnC,QAAQ,qBAAsB,kBAAkB,EAChD,QAAQ,YAAsB,MAAM,EAEzC,GAAG,CAACkpD,EAAI,MAAM,oBAAoB,EAAK,MAAM,IAAI,MAAM,sBAAwBlpD,CAAK,EAEpF,MAAMmpD,EAAOD,EACR,MAAM,4BAA4B,EAAE,MAAM,CAAC,EAC3C,IAAIhnD,GAAK,SAASA,EAAG,EAAE,CAAC,EAE7B,OAAAinD,EAAK,CAAC,EAAIA,EAAK,CAAC,EAAE,IACXA,CACV,CAMD,OAAO,UAAUnpD,EAAO,CAoBpB,MAAMw0B,EAAOx0B,EAAM,YAAa,EACb,QAAQ,KAAM,GAAG,EACjB,QAAQ,eAAgB,EAAE,EAC1B,QAAQ,MAAO,GAAG,EAClB,QAAQ,KAAM,GAAG,EACjB,MAAM,GAAI,CAAC,EACxBkpD,EAAMb,GAAW7zB,CAAI,EAC3B,OAAQ00B,IAAQ,OAAaA,EACAV,GAAM,SAASU,EAAI,QAAQ,MAAO,IAAI,EAAE,SAAS,EAAG,GAAG,CAAC,CACxF,CAWD,OAAO,SAAS,CAACn6C,EAAG05C,EAAG7zC,EAAGD,CAAC,EAAG,CAE1B5F,GAAK,IACL05C,GAAK,IACL7zC,GAAK,IAEL,MAAMgG,EAAM,KAAK,IAAI7L,EAAG05C,EAAG7zC,CAAC,EACtB+F,EAAM,KAAK,IAAI5L,EAAG05C,EAAG7zC,CAAC,EAC5B,IAAIiP,EACAF,EACApb,GAAKqS,EAAMD,GAAO,EAEtB,GAAGC,IAAQD,EACPkJ,EAAIF,EAAI,MAEP,CACD,MAAM,EAAI/I,EAAMD,EAGhB,OAFAgJ,EAAKpb,EAAI,GAAO,GAAK,EAAIqS,EAAMD,GACf,GAAKC,EAAMD,GACpBC,EAAG,CACN,KAAK7L,EAAG8U,GAAK4kC,EAAI7zC,GAAK,GAAK6zC,EAAI7zC,EAAI,EAAI,GAAI,MAC3C,KAAK6zC,EAAG5kC,GAAKjP,EAAI7F,GAAK,EAAI,EAAG,MAC7B,KAAK6F,EAAGiP,GAAK9U,EAAI05C,GAAK,EAAI,EAAG,KAChC,CAED5kC,GAAK,EAGT,MAAO,CAACA,EAAGF,EAAGpb,EAAGoM,CAAC,CACrB,CAWD,OAAO,SAAS,CAACkP,EAAGF,EAAGpb,EAAGoM,CAAC,EAAG,CAE1B,IAAI,EAAG8zC,EAAG7zC,EAEV,GAAI+O,IAAM,EACN,EAAI8kC,EAAI7zC,EAAIrM,MAEX,CACD,MAAM6gD,EAAU,SAAS3/C,EAAG4/C,EAAGC,EAAG,CAG9B,OAFIA,EAAI,IAAGA,GAAK,GACZA,EAAI,IAAGA,GAAK,GACZA,EAAI,mBAAY7/C,GAAK4/C,EAAI5/C,GAAK,EAAI6/C,EAClCA,EAAI,GAAYD,EAChBC,EAAI,kBAAY7/C,GAAK4/C,EAAI5/C,IAAM,kBAAM6/C,GAAK,EACvC7/C,CACvB,EAEkB4/C,EAAK9gD,EAAI,GAAOA,GAAK,EAAIob,GACTpb,EAAIob,EAAKpb,EAAIob,EAC7B,EAAK,EAAIpb,EAAK8gD,EAEpB,EAAID,EAAQ,EAAGC,EAAGxlC,EAAI,EAAE,CAAC,EACzB4kC,EAAIW,EAAQ,EAAGC,EAAGxlC,CAAC,EACnBjP,EAAIw0C,EAAQ,EAAGC,EAAGxlC,EAAI,EAAE,CAAC,EAG7B,MAAMslC,EAAO,CAAC,EAAI,IAAKV,EAAI,IAAK7zC,EAAI,GAAG,EAAE,IAAI,KAAK,KAAK,EACvD,OAAAu0C,EAAK,CAAC,EAAIx0C,EAEHw0C,CACV,CAEL,CC1SA,MAAMI,EAAY,CAAlB,cACYp/C,EAAA,cAA4B,IAEtC,IAAIiT,EAA8Bld,EAAqBmQ,EAAc,CAC5D+M,EAAA,iBAAiBld,EAAMmQ,EAAS,EAAK,EAC5C,KAAK,OAAO,KAAK,CACf,OAAA+M,EACA,KAAAld,EACA,QAAAmQ,CAAA,CACD,CACH,CAEA,OAAO+M,EAAqBld,EAAqBmQ,EAAc,CAC7D,KAAK,OAAS,KAAK,OAAO,OAAQm5C,GAAM,CACtC,IAAIC,EAAU,GACV,OAAArsC,GAAUA,IAAWosC,EAAE,SACfC,EAAA,IAERvpD,GAAQA,IAASspD,EAAE,OACXC,EAAA,IAERp5C,GAAWA,IAAYm5C,EAAE,UACjBC,EAAA,IAGRA,GACFF,GAAY,UAAUC,EAAE,OAAuBA,EAAE,KAAMA,EAAE,OAAO,EAE3D,CAACC,CAAA,CACT,CACH,CACA,OAAO,UAAUrsC,EAAqBld,EAAqBmQ,EAAc,CAChE+M,EAAA,oBAAoBld,EAAMmQ,EAAS,EAAK,CACjD,CAEA,SAAU,CACR,KAAK,OAAO,QAAS,GACnBk5C,GAAY,UAAU,EAAE,OAAuB,EAAE,KAAM,EAAE,OAAO,GAElE,KAAK,OAAS,EAChB,CACF,CAEA,MAAMG,GAAY,CAChBC,EACAC,EACArkD,IACG,CACH,IAAIskD,EAAW,GAEf,MAAMC,EAAQ,CAAC/pD,EAAa4a,EAAaC,IAChC,KAAK,IAAID,EAAK,KAAK,IAAI5a,EAAK6a,CAAG,CAAC,EAGnCmvC,EAAS,CACbP,EACAQ,EACAC,IACG,CAIH,GAHIA,IACSJ,EAAA,IAET,CAACA,EACH,OAGFL,EAAE,eAAe,EAEjB,MAAMU,EAASN,EAAK,sBAAsB,EACxC7kD,EAAImlD,EAAO,MACXrmC,EAAIqmC,EAAO,OACXhoD,EAAI8nD,EAAK,QACTjmC,EAAIimC,EAAK,QAELG,EAAOL,EAAM5nD,EAAIgoD,EAAO,KAAM,EAAGnlD,CAAC,EACtCqlD,EAAON,EAAM/lC,EAAImmC,EAAO,IAAK,EAAGrmC,CAAC,EAE1Bte,EAAA4kD,EAAOplD,EAAGqlD,EAAOvmC,CAAC,GAGvBwmC,EAAU,CAACb,EAAeS,IAAsB,EACrCT,EAAE,UAAY,OAAYA,EAAE,MAAQA,EAAE,WACtC,EACNO,EAAAP,EAAGA,EAAGS,CAAQ,EAIVJ,EAAA,EACb,EAGO,SAAAS,EAAQd,EAAeS,EAAmB,CAC7CT,EAAE,QAAQ,SAAW,EACvBO,EAAOP,EAAGA,EAAE,QAAQ,CAAC,EAAGS,CAAQ,EAIrBJ,EAAA,EAEf,CAQAF,EAAY,IAAIC,EAAM,YAAcJ,GAAkB,CACpDa,EAAQb,EAAG,EAAI,EAChB,EACDG,EAAY,IAAIC,EAAM,aAAeJ,GAAkB,CACrDc,EAAQd,EAAG,EAAI,EAChB,EACWG,EAAA,IAAI,OAAQ,YAAaU,CAAO,EAChCV,EAAA,IAAIC,EAAM,YAAaU,CAAO,EAC9BX,EAAA,IAAI,OAAQ,UAAW,IAAM,CAC5BE,EAAA,GACZ,EACWF,EAAA,IAAIC,EAAM,WAAY,IAAM,CAC3BC,EAAA,GACZ,EACWF,EAAA,IAAIC,EAAM,cAAe,IAAM,CAC9BC,EAAA,GACZ,CACH,EAEMU,GAAY,uJACZC,GAAO,IAEPrJ,GAAY,UAElB,SAASsJ,GAAUjB,EAAU,CAE3BA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,CACpB,CACA,SAASkB,GACPC,EACAvtC,EACA6J,EACA5W,EACAu6C,EAAO,GACP,CACAD,EAAO,IAAIvtC,EAAQ+jC,GAAW,SAAUqI,EAAkB,CACpDviC,EAAK,QAAQuiC,EAAE,GAAG,GAAK,IACrBoB,GACFH,GAAUjB,CAAC,EAEbn5C,EAAQm5C,CAAC,EACX,CACD,CACH,CAWO,MAAMqB,GAAN,cAAsCjxC,CAAU,CA2CrD,aAAc,CACN,QA9BEzP,EAAA,wBAEHA,EAAA,cACAA,EAAA,cAAS,IACTA,EAAA,aAAe,CACpB,UAAW,OACX,IAAK,CAAC,EACN,OAAQ,GACR,OAAQ,GACR,QAAS,GACT,QAAS,GACT,MAAO,OACP,MAAO,GACP,OAAQ,GACR,aAAc,MACd,aAAc,GACd,WAAY,KAGJA,EAAA,cAAS,IAAIo/C,IAEbp/C,EAAA,aAA4B,MAC5BA,EAAA,cAA6B,MAC7BA,EAAA,aAA4B,MAC5BA,EAAA,gBAAoC,MACpCA,EAAA,kBAAiC,MACjCA,EAAA,gBAA+B,MAC/BA,EAAA,kBAAiC,MAkFjCA,EAAA,gBAAW7L,GAAS,KAAK,UAAU,KAAK,IAAI,CAAC,GAsJ7C6L,EAAA,gBAAW7L,GAAS,KAAK,UAAU,KAAK,IAAI,CAAC,EApOvD,CA3CA,WAAW,oBAA+B,CACjC,OACL,YACA,QACA,SACA,gBACA,gBACA,cACA,QAEJ,CAmCU,mBAAoB,CAC5B,MAAM,kBAAkB,EAClB,WAAKusD,GAAwB,kBAAkB,CACvD,CAEU,oBAA+B,CACvC,MAAO,EACT,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,gBAAkBx+C,EAAgB,YACrC,mBAAqB,KAAK,MAAM,WAE7B,cAAS,KAAK,MAAM,KAAK,EAC9B,KAAK,SAAS,EACd,KAAK,WAAW,CAClB,CAEA,MAAgB,cACdiG,EACc,CACR,YAAM,cAAcA,CAAQ,EAClC,KAAK,YAAY,CACnB,CAKU,SAASzV,EAAe,C5Q3P7B,IAAAkG,E4Q4PE,WAAM,WAAYlG,CAAK,GACvBkG,EAAA,6BAAAA,EAAiB,QAAQ,SAAUlG,EAC1C,CAKU,OAAOA,EAAe,C5QnQ3B,IAAAkG,E4QoQE,WAAM,SAAUlG,CAAK,GACrBkG,EAAA,6BAAAA,EAAiB,QAAQ,OAAQlG,EACxC,CAEA,MAAgB,UAAW,CACrB,GAAAiG,EAAkB,IAAI,EACjB,YACF,CACL,KAAM,CAAE,QAASwP,CAAa,eAAM,OAClC,+CACF,MACO,OAAAA,EAEX,CAEU,+BACRjQ,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAEE1J,IAAkB,SACf,cAAS,KAAK,MAAM,KAAK,CAElC,CAUU,UAAUxF,EAAe0hB,EAAa,CAAE,OAAQ,IAAS,CAIjE,GAHI,OAAO1hB,GAAU,WACnBA,EAAQA,EAAM,QAEZ,CAACA,EACH,OAGF0hB,EAAQA,GAAS,GACb,IAAAxd,EACA,IAEEA,EAAA,IAAIynD,GAAM3rD,CAAK,QACZiuD,GACP,GAAIvsC,EAAM,aACR,OAEI,MAAAusC,CACR,CAEI,IAAC,KAAK,MAAM,MAAO,CACrB,MAAMC,EAAOhqD,EAAE,KACfgqD,EAAK,CAAC,EAAI,EACVhqD,EAAE,KAAOgqD,EAEX,KAAK,MAAQhqD,EACb,KAAK,QAAQ,KAAM,KAAM,KAAM,KAAMwd,CAAK,CAC5C,CAEU,aAAc,CACjB,WAAQ,KAAK,cAAc,aAAa,EACxC,YAAS,KAAK,cAAc,YAAY,EACxC,WAAQ,KAAK,cAAc,eAAe,EAC/C,KAAK,SACF,KAAK,cAAc,gBAAgB,GAA0B,KAC3D,gBAAa,KAAK,cAAc,gBAAgB,EAChD,cAAW,KAAK,cAAc,cAAc,EAC5C,gBAAa,KAAK,cAAc,gBAAgB,CACvD,CAKU,sBAAuB,CAC/B,KAAK,OAAO,SACd,CAKU,YAAa,CACrB,MAAMzG,EAAS,KAAK,OAEdkzC,EAAW,CACf5tC,EACAld,EACAmQ,IACG,CACIyH,EAAA,IAAIsF,EAAQld,EAAMmQ,CAAO,GAIlC26C,EAAS,KAAM,QAAUxB,GAAkBA,EAAE,gBAAgB,EAGvD,MAAAyB,EAAavB,GAAU,KAAK,IAAI,EAGtC,GACE,CAAC,KAAK,OACN,CAAC,KAAK,QACN,CAAC,KAAK,OACN,CAAC,KAAK,UACN,CAAC,KAAK,SAEA,UAAI,MAAM,YAAY,EAE9BuB,EAAWnzC,EAAQ,KAAK,MAAQ5V,GAC9B,KAAK,QAAQA,CAAC,GAIhB+oD,EAAWnzC,EAAQ,KAAK,OAAQ,CAAC5V,EAAW6hB,IAC1C,KAAK,QAAQ,KAAM7hB,EAAG,EAAI6hB,CAAC,GAIzB,KAAK,MAAM,OACbknC,EAAWnzC,EAAQ,KAAK,MAAO,CAAC5V,EAAW6hB,IACzC,KAAK,QAAQ,KAAM,KAAM,KAAM,EAAIA,CAAC,GAKxCinC,EAAS,KAAK,SAAU,QAAUxB,GAAkB,CAClD,MAAMxpD,EAAQwpD,EAAE,OACX,cAASxpD,EAAM,MAAO,CACzB,WAAY,GACZ,aAAc,GACf,EACF,EAEDgrD,EAAS,KAAK,SAAU,QAAUxB,GAAkB,CAClD,MAAMxpD,EAAQwpD,EAAE,OAEZxpD,EAAM,iBAAmBA,EAAM,cACjCA,EAAM,OAAO,CACf,CACD,EAED,MAAMkrD,EAAc,IAAM,CACnB,YAAO,KAAK,KAAK,GAEfF,EAAA,KAAK,SAAU,QAASE,CAAW,EAC5CR,GAAM5yC,EAAQ,KAAM,CAAC,OAAO,EAAGozC,CAAW,CAC5C,CAOU,QACRrnC,EAAmB,KACnB,EAAmB,KACnBtb,EAAmB,KACnBoM,EAAmB,KACnB4J,EAAa,GACb,CACI,IAAC,KAAK,MACF,UAAI,MAAM,YAAY,EAExB,MAAAwsC,EAAO,KAAK,MAAM,KAEvB,CAAAlnC,EAAG,EAAGtb,EAAGoM,CAAC,EAAE,QAAQ,CAACzS,EAAGpF,IAAM,EACzBoF,GAAKA,IAAM,KACb6oD,EAAKjuD,CAAC,EAAIoF,EACZ,CACD,EACD,KAAK,MAAM,KAAO6oD,EAElB,KAAK,SAASxsC,CAAK,EAEf,KAAK,UAAY,CAACA,EAAM,QACrB,cAAS,KAAK,KAAK,CAE5B,CAIU,UAAUA,EAAa,GAAI,CACnC,GAAI,CAAC,MAAQ,CAAC,KAAK,MACjB,OAQE,GALC,WAAM,IAAM,KAAK,MAAM,KAC5B,KAAK,MAAM,OAAS,OAAO,KAAK,MAAM,IAAI,CAAC,EAAIisC,iBAC1C,WAAM,OAAS,KAAK,MAAM,UAC1B,WAAM,QAAU,KAAK,MAAM,WAE5B,CAAC,KAAK,OAAS,CAAC,KAAK,QAAU,CAAC,KAAK,MACjC,UAAI,MAAM,8BAA8B,EAG1C,MAAAW,EAAS,KAAK,MAAM,cACxB,oBAEIC,EAAU,KAAK,OAAO,cAC1B,oBAEIC,EAAS,KAAK,MAAM,cACxB,oBAGE,IAACF,GAAU,CAACC,GAAW,CAACC,GAAU,CAAC,KAAK,UAAY,CAAC,KAAK,WACpD,oBACNF,EACAC,EACAC,EACA,KAAK,MACL,KAAK,OACL,KAAK,MACL,KAAK,SACL,KAAK,YAED,IAAI,MAAM,YAAY,EAG9B,MAAMC,EAAO,CAACr8B,EAAqBtZ,EAAoBw0C,IAAiB,CAChEx0C,EAAA,MAAM,KAAOw0C,EAAO,IAAM,KAE5BoB,EAAO,CAACt8B,EAAqBtZ,EAAoBy0C,IAAiB,CAChEz0C,EAAA,MAAM,IAAMy0C,EAAO,IAAM,KAGjCkB,EAAK,KAAK,MAAOH,EAAQ,KAAK,MAAM,IAAI,CAAC,CAAC,EAG1CG,EAAK,KAAK,OAAQF,EAAS,KAAK,MAAM,IAAI,CAAC,CAAC,EACvCG,EAAA,KAAK,OAAQH,EAAS,EAAI,KAAK,MAAM,IAAI,CAAC,CAAC,EAG3CG,EAAA,KAAK,MAAOF,EAAQ,EAAI,KAAK,MAAM,IAAI,CAAC,CAAC,EAExC,MAAAG,EAAS,KAAK,MAAM,OACpBC,EAASD,EAAO,QAAQ,MAAO,MAAM,EAAE,QAAQ,IAAK,MAAM,EAC1DE,EAAK,mBAAmB,CAACF,EAAQC,CAAM,KAOzC,GAJC,WAAM,QAAUC,EAAK,KAAOnB,GAI7B,CAAChsC,EAAM,WAAY,CACrB,MAAMotC,EAAS,KAAK,MAAM,aACxB9C,EAAQ,KAAK,MAAM,MAEjB,IAAAhsD,EACJ,OAAQ8uD,EAAQ,CACd,IAAK,MACK9uD,EAAA,KAAK,MAAM,SAASgsD,CAAK,EACjC,MACF,IAAK,MACKhsD,EAAA,KAAK,MAAM,SAASgsD,CAAK,EACjC,MACF,QACUhsD,EAAA,KAAK,MAAM,SAASgsD,CAAK,CACrC,CACA,KAAK,MAAM,MAAQhsD,EAEvB,CACF,EApWO,IAAM+uD,GAANf,GACL1gD,EADWyhD,GACG,UAAU,mBC3InB,MAAMC,GAAN,cAAmCjyC,CAAU,CA2BlD,aAAc,CACN,QAzBEzP,EAAA,gBAAW,IAEXA,EAAA,uBAaHA,EAAA,aAAe,CACpB,aAAc,EACd,aAAc,EACd,kBAAmB,EACnB,qBAAsB,OACtB,aAAc,EACd,QAAS,CAAC,GAKZ,CAtBA,WAAW,oBAA+B,CACjC,OACL,gBACA,gBACA,uBACA,yBACA,gBACA,iBAEJ,CAeU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAK0hD,GAAqB,kBAAkB,CACnD,CAEU,yBACRlpD,EACAmpD,EAAQ,EACO,CACf,OAAInpD,EAAQ,GACHA,EAAQ,GAEbmpD,GAAS,KAAK,MAAM,mBAClBnpD,EAAQ,cACH,KAAK,yBAAyBA,EAAQ,cAAe,EAAEmpD,CAAK,EAGhE,IACT,CAEU,YACRC,EACAC,EACAC,EACAC,EACA,CACuBH,EAAe,iBACpC,IAAMC,CAAA,EAEO,QAASG,GAAkB,CAClC,MAAAxmD,EAAK,KAAK,yBAAyBwmD,CAAa,EACjDxmD,IAGLumD,EAAO,KAAK,CACV,QAASC,EACT,KAAM,IAAMxmD,EACZ,MAAOwmD,EAAc,UACrB,OAAQ,CAAC,EACV,EACGA,EAAc,eAAiBF,GAAgBD,EAAe,GAC3D,iBACHG,EAAc,cACdH,EAAe,EACfC,EACAC,EAAOA,EAAO,OAAS,CAAC,EAAE,QAE9B,CACD,CACH,CAEA,MAAgB,WAAY,CAExB,QAAK,MAAM,sBACX,KAAK,MAAM,cACX,KAAK,MAAM,aACX,CAII,GAHJ,KAAK,eACH,SAAS,cAAc,KAAK,MAAM,oBAAoB,GAAK,OACxD,WAAM,QAAU,GACjB,CAAC,KAAK,eAAgB,CACxB,QAAQ,MAAM,2BAA2B,EACzC,OAEG,iBACH,KAAK,eACL,KAAK,MAAM,aACX,KAAK,MAAM,aACX,KAAK,MAAM,SAGf,MAAM,MAAM,WACd,CAEU,oBAA+B,CAChC,OAAC,eAAgB,eAAgB,sBAAsB,CAChE,CAEA,MAAgB,yBACd7pD,EACAE,EACAD,EACAyJ,EACA,CACM,+BACJ1J,EACAE,EACAD,EACAyJ,CAAA,CAEJ,CAGU,sBAAuB,CAC/B,MAAM,qBAAqB,EACtB,WAAM,QAAU,EACvB,CAEA,MAAgB,UAAW,CAErB,GAAAjJ,EAAkB,IAAI,EACjB,YACF,CACL,KAAM,CAAE,QAASwP,CAAa,QAAMq1C,GAAA,WAClC,4CACF,MACO,OAAAr1C,EAEX,CACF,EA5IO,IAAM85C,GAANP,GACL1hD,EADWiiD,GACG,UAAU,gBC2BnB,MAAMC,GAAN,cAA+BzyC,CAAU,CA+C9C,aAAc,CACN,QA9CDzP,EAAA,cAAS,IACNA,EAAA,gBAAW,IAeXA,EAAA,cAAiC,MA2BpCA,EAAA,aAAe,KAAK,mBAIzB,KAAK,aAAe,KAAK,aAAa,KAAK,IAAI,CACjD,CA7CA,WAAW,oBAA+B,CACjC,OACL,KACA,8BACA,WACA,oBACA,qBACA,aACA,yBACA,0BAEJ,CAIU,iBAAyB,CAsB1B,MArBc,CACnB,GAAIpE,GAAO,MAAM,EAEjB,KAAM,CACJ,OAAQ,CAAC,EACT,MAAO,GACP,MAAO,MACT,EAEA,yBAA0B,GAE1B,eAAgB,GAChB,SAAU,KAAK,SAEf,QAAS,GACT,gBAAiB,OACjB,gBAAiB,GACjB,UAAW,GACX,uBAAwB,GACxB,sBAAuB,GAG3B,CASU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKsmD,GAAiB,kBAAkB,EAC7C,KAAK,kBAAkB,CACzB,CAEU,mBAAoB,CACxB,KAAK,MAAM,0BACR,sBAAiB,QAAS,KAAK,YAAY,CAEpD,CAEU,sBAAuB,CAC1B,yBAAoB,QAAS,KAAK,YAAY,CACrD,CAEQ,cAAe,CACrB,KAAK,MAAM,eAAiB,EAC9B,CAEU,oBAA+B,CACvC,MAAO,EACT,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACP,QAAK,KAAK,MAAM,EACvB,CAEA,MAAgB,WAAY,CAC1B,MAAM,MAAM,WACd,CAEU,WAAY,CACpB,UAAWlpD,KAAO,KAAK,MAAM,KAAK,OAE7B,KAAK,MAAM,KAAK,OAAeA,CAAG,GACnC,OAAQ,KAAK,MAAM,KAAK,OAAeA,CAAG,GAAM,WAE/C,KAAK,MAAM,KAAK,OAAeA,CAAG,EAAI/B,GACpC,KAAK,MAAM,KAAK,OAAe+B,CAAG,GAI3C,CAEO,SAAS0B,EAAczC,EAAuB,CAE/C,GADC,WAAM,WAAYyC,EAAOzC,CAAE,EAC5B,CAAC,KAAK,OACR,eAAQ,KAAK,eAAe,EACrB,GAaT,GAVI,KAAK,MAAM,iBACb,KAAK,cAAc,EAGjB,KAAK,MAAM,WACb,KAAK,UAAU,EAGjB,KAAK,SAAS,KAAK,OAAQ,KAAK,MAAM,IAAI,EAEtC,CAAC,KAAK,MAAM,KAAK,MAAO,CAC1B,KAAK,cAAcyC,CAAK,EACxB,OAGI,MAAAynD,EAAiB,KAAK,kBAAkBznD,CAAK,EAC/C,IAAAynD,GAAA,YAAAA,EAAgB,UAAW,SACtB,SAGL,KAAK,MAAM,UAEbznD,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAEjB,gBAAWA,EAAOzC,CAAE,EAE7B,CAKA,MAAgB,WAAWyC,EAAezC,EAAwB,CAChE,KAAK,MAAM,WAAYyC,EAAOzC,EAAI,KAAK,KAAK,EACtC,MAAAkqD,EAAiB,KAAK,kBAAkBznD,CAAK,EACnD,GAAI,CAACynD,EAAgB,CACnB,QAAQ,KAAK,2BAA2B,EACxC,OAGE,KAAK,MAAM,iBACb,KAAK,cAAc,EAGjB,IAEI,MAAAluD,EAAM,MAAM0P,GAAY,MAC5Bw+C,EAAe,OACfA,EAAe,OACf,KAAK,MAAM,KAAK,OAChBA,EAAe,MAGjB,GAAI,CAACluD,GAAO,CAACA,EAAI,KACf,OAAO,KAAK,cAAc,MAAO,QAAS,aAAa,EAGnD,MAAA+kD,EAAU/kD,EAAI,MAAQA,EAAI,KAAK,QAAUA,EAAI,KAAK,QAAU,GAClE,OAAI,OAAOA,EAAI,MAAM,GAAK,KAExB,KAAK,cAAcA,EAAI,OAAO,WAAY+kD,EAAS/kD,EAAI,IAAI,EAEtD,KAAK,gBAAgBA,EAAI,OAAO,WAAY+kD,EAAS/kD,EAAI,IAAI,QAC7DmJ,GACH,GAAAA,EAAI,QAAUA,EAAI,KACpB,KAAK,cAAcA,EAAI,OAAQA,EAAI,KAAK,QAASA,EAAI,IAAI,MAEzD,OAAM,KAAK,KAEf,CACF,CAEU,kBAAkB1C,EAAe,C9QlPtC,IAAA9B,EAAA4B,E8QmPC,IAAC,KAAK,OACR,eAAQ,KAAK,eAAe,EACrB,KAGL,IAAAqd,EAAS,KAAK,OAAO,OACrB7T,EAAS,KAAK,OAAO,OACrBiP,EAAS,KAAK,OAAO,OAOpB,IAAAra,EAAA8B,GAAA,YAAAA,EAAe,gBAAf,MAAA9B,EAA8B,UAAW,CACtC,MAAAwpD,GAAa5nD,EAAAE,GAAA,YAAAA,EAAe,gBAAf,YAAAF,EAA8B,UACjDqd,GAASuqC,GAAA,YAAAA,EAAW,aAAcvqC,EAClC7T,GAASo+C,GAAA,YAAAA,EAAW,aAAcp+C,EAClCiP,GAASmvC,GAAA,YAAAA,EAAW,aAAcnvC,EAU7B,MAP0B,CAC/B,OAAA4E,EACA,OAAQ7T,EAAO,YAAY,EAC3B,OAAAiP,EACA,KAAM,KAAK,MAAM,gBAIrB,CAEU,cAAcvY,EAAoB,CAKtC,GAJC,WAAM,iBAAkB,KAAK,KAAK,EAEvCA,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAClB,CAAC,KAAK,OAAQ,CAChB,QAAQ,KAAK,eAAe,EAC5B,OAEF,MAAM2nD,EACJ,KAAK,OAAO,iBAA8B,UAAU,EAClD,GAAAA,GAAmBA,EAAgB,OAAQ,CACvC,MAAAC,EAAiBD,EAAgB,CAAC,EACpC,KAAK,MAAM,wBACb,KAAK,gBAAgBC,CAAc,EAEjC,KAAK,MAAM,uBACb,KAAK,gBAAgBA,CAAc,EAIlC,mBACH,IAAI,YAAY,UAAW,CACzB,OAAQ,CAAE,SAAUD,CAAgB,EACrC,EAEL,CAEU,gBAAgBC,EAA6B,CAE/C,MAAA9oD,EADKmB,KACO,EAAI,EACbrB,GAAAgpD,EAAgB9oD,EAAQ,MAAM,EACvC,KAAK,sBAAsB8oD,CAAc,CAC3C,CAEU,sBAAsBA,EAA6BC,EAAS,IAAM,CAC3DD,EAAA,UAAU,IAAI,4BAA4B,EACzD,WAAW,IAAM,CACAA,EAAA,UAAU,OAAO,4BAA4B,GAC3DC,CAAM,CACX,CAEU,cAAcC,EAAgBxJ,EAAiB30C,EAAe,CACtE,KAAK,MAAM,eAAe,EACrB,mBACH,IAAI,YAAY,eAAgB,CAC9B,OAAQ,CAAE,OAAAm+C,EAAQ,QAAAxJ,EAAkB,SAAA30C,CAAS,EAC9C,EAEL,CAEU,gBAAgBm+C,EAAgBxJ,EAAiB30C,EAAe,CACxE,KAAK,MAAM,iBAAiB,EACxB,KAAK,MAAM,2BACb,KAAK,MAAM,eAAiB,IAGzB,mBACH,IAAI,YAAY,iBAAkB,CAChC,OAAQ,CAAE,OAAAm+C,EAAQ,QAAAxJ,EAAkB,SAAA30C,CAAS,EAC9C,EAEL,CAEU,SACRo+C,EACAC,EACAC,EAAiB,mBACjB,CACgBD,EAAA,MAAQD,EAAK,gBAC7BC,EAAgB,MAAQD,EAAK,kBAExBC,EAAgB,QACnB,KAAK,cAAc,IAAI,YAAYC,CAAc,CAAC,EAC7CF,EAAA,UAAU,IAAI,eAAe,EAEtC,CAEU,eAAgB,CACpB,OAAC,KAAK,QAOV,KAAK,MAAM,KAAK,OAAS,IAAI,SAAS,KAAK,MAAM,EAC1C,KAAK,MAAM,KAAK,SAPrB,QAAQ,KAAK,eAAe,EACrB,KAOX,CAEU,UAAW,CACb,MAAAG,EAAS,KAAK,cAAc,MAAM,EACpCA,GAAUA,EAAO,OAAS,GAC5B,KAAK,OAASA,EACT,YAAO,UAAU,IAAI,kBAAkB,EACvC,YAAO,aAAa,aAAc,EAAE,GAEzC,QAAQ,KAAK,iCAAiC,CAElD,CAEA,MAAgB,UAAW,CACrB,GAAAjqD,EAAkB,IAAI,EACxB,YAAK,SAAS,EACP,KACF,CACL,KAAM,CAAE,QAASwP,CAAa,QAAMq1C,GAAA,WAClC,wCACF,MACO,OAAAr1C,EAEX,CACF,EAjUO,IAAM06C,GAANX,GACLliD,EADW6iD,GACG,UAAU,YC5DnB,MAAMC,GAAN,cAA+Bj0C,EAAe,CAUnD,aAAc,CACN,QAHD7O,EAAA,aAAa,GAIpB,CARA,WAAW,oBAAgD,CACzD,MAAO,CAAC,OAAQ,QAAS,SAAU,MAAO,QAAS,YAAa,KAAK,CACvE,CAQU,QAAS,CACV,YAAK,cAAc,KAAK,CACjC,CAEA,MAAgB,YAAY7B,EAAa,CACvC,IAAIkG,EAAWy+C,GAAiB,MAAM,IAAI3kD,CAAG,EAC7C,OAAIkG,IAGOA,EAAAV,GAAY,IAAIxF,CAAG,EAC1BkG,GACey+C,GAAA,MAAM,IAAI3kD,EAAKkG,CAAQ,EAEnCA,EACT,CAEA,MAAgB,UAAU9I,EAAa,C/QpClC,IAAA3C,E+QqCC,IAAAyL,EAGJ,GACE,qBAAQ,KACR,CAAC9I,EAAI,WAAW,MAAM,GACtB,CAACA,EAAI,WAAW,KAAK,GACrB,CAACA,EAAI,WAAW,MAAM,EACtB,CACI,IAAA4C,EAEA,UAAO,IAAI,IAAI,gBACjBA,EAAM,IAAI,IAAI5C,EAAK,OAAO,IAAI,IAAI,eAAe,UACxC,OAAO,IAAI,IACpB4C,EAAM,IAAI,IACR5C,EACA,OAAO,IAAI,IAAI,SAAW,MAAQ,OAAO,IAAI,IAAI,cAG7C,WAAI,MAAM,yBAAyB,EAG3C8I,EAAW,MAAM,KAAK,YAAYlG,EAAI,IAAI,OAE/BkG,EAAA,MAAM,KAAK,YAAY9I,CAAG,EAGnC,OAAA8I,EAAS,SAAW,KACd,cAAMA,EAAS,MAAM,EACtB,KAGLzL,EAAAyL,EAAS,QAAQ,IAAI,cAAc,IAAnC,MAAAzL,EAAsC,SAAS,iBAC1CyL,EAAS,MAGV,cACN,4DACEA,EAAS,QAAQ,IAAI,cAAc,GAEhC,GACT,CAEU,YAAY9I,EAAa,CACjC,MAAMwnD,EAAY7kD,GAAY3C,CAAG,EAAE,SAAS,MAAM,GAAG,EAC9C,OAAAwnD,GAAA,YAAAA,EAAYA,EAAU,OAAS,EACxC,CAEU,mBAAmBxnD,EAAa,C/QrFrC,IAAA3C,E+QuFI,OAAAA,EADU,KAAK,YAAY2C,CAAG,EACrB,MAAM,GAAG,EAAE,CAAC,IAArB,YAAA3C,EAAwB,WAAW,IAAK,IACjD,CAEA,MAAgB,cAAe,CAC7B,IAAIoqD,EAAO,GAEP,IAAC,KAAK,MAAM,IAAK,CACnB,KAAK,UAAY,GACjB,OAEF,MAAMC,EAAM,KAAK,mBAAmB,KAAK,MAAM,GAAG,EAC9CA,GAAU,kBAAa,MAAOA,CAAG,EAE/B,MAAAC,EAAa,KAAK,SAIpB,IAHWA,EAAaA,EAAW,aAAa,KAAK,EAAI,MAG9C,KAAK,MAAM,IACxB,OAGE,IACFF,EAAO,MAAM,KAAK,UAAU,KAAK,MAAM,GAAG,QACnC5uD,GACC,aACN,wBAAwB,KAAK,MAAM,sCACnCA,CAAA,EAGE,KAAK,MAAM,IAAI,WAAW,IAAI,IAChC,KAAK,MAAM,IAAM,SAAS,SAAW,KAAK,MAAM,KAElD,MAAM+J,EAAM,IAAI,IAAI,KAAK,MAAM,GAAG,EAC9BA,EAAI,WAAa,QACnBA,EAAI,SAAW,SAEfA,EAAI,SAAW,QAEb,IACF6kD,EAAO,MAAM,KAAK,UAAU7kD,EAAI,IAAI,QAC7BglD,GACC,cACN,wBAAwB,KAAK,MAAM,QACnC/uD,EACA+uD,CAAA,EAEF,MACF,CACF,CAEA,GAAI,CAACH,EAAM,CACT,QAAQ,MAAM,wBAAwB,KAAK,MAAM,OAAO,EACxD,OAGF,KAAK,UAAYA,EACX,MAAAI,EAAS,KAAK,SAChBA,GACFA,EAAO,aAAa,MAAO,KAAK,MAAM,GAAG,CAE7C,CAEU,aAAc,CACtB,KAAK,UAAY,KAAK,UAAU,QAAQ,mBAAoB,EAAE,EAC9D,KAAK,MAAM,MAAQ,EACrB,CAEU,SAAS1wD,EAAgB,CACjC,GAAI,CAACA,EACH,OAAO,KAAK,cAEV,GAAAA,EAAM,SAAS,GAAG,EAAG,CACjB,MAAA2wD,EAAW3wD,EAAM,MAAM,GAAG,EAC5B,GAAA2wD,EAAS,OAAS,EAAG,CACvB,KAAK,UAAY,KAAK,UAAU,QAAQ,mBAAoB,EAAE,EAC9D,QAAS1wD,EAAI,EAAGA,EAAI0wD,EAAS,OAAQ1wD,IAAK,CAClC,MAAA2wD,EAAmBD,EAAS1wD,CAAC,GAC/B2wD,EAAS,WAAW,GAAG,GAAKA,EAAS,WAAW,KAAK,KACvD,KAAK,MAAM,MAAQA,GAEhB,eAAU,IAAI,SAASA,GAAU,SAI1C,KAAK,MAAM,MAAQ5wD,EACnB,KAAK,UAAY,KAAK,UAAU,QAAQ,mBAAoB,EAAE,EACzD,eAAU,IAAI,SAASA,GAAO,CAEvC,CAEU,QAAQ4Z,EAAc,CACzB,WAAM,OAASA,EAAO,KACtB,WAAM,MAAQA,EAAO,KAC1B,KAAK,UAAY,KAAK,UAAU,QAAQ,kBAAmB,EAAE,EACxD,eAAU,IAAI,QAAQA,GAAM,CACnC,CAEU,SAASoY,EAAe,CAC3B,WAAM,MAAQA,EAAQ,KAC3B,KAAK,UAAY,KAAK,UAAU,QAAQ,mBAAoB,EAAE,EACzD,eAAU,IAAI,SAASA,GAAO,CACrC,CAEU,UAAUC,EAAgB,CAC7B,WAAM,OAASA,EAAS,KAC7B,KAAK,UAAY,KAAK,UAAU,QAAQ,oBAAqB,EAAE,EAC1D,eAAU,IAAI,UAAUA,GAAQ,CACvC,CAEU,aAAaib,EAAmB,CACxC,IAAI2jB,EAAc,aAAa3jB,IAC3BA,IAAc,OACD2jB,GAAA,cAEf3jB,IAAc,YACdA,IAAc,WACdA,IAAc,YACdA,IAAc,UAEC2jB,GAAA,cACN3jB,IAAc,OAASA,IAAc,KAC/B2jB,GAAA,YAEf3jB,IAAc,aACdA,IAAc,YACdA,IAAc,aACdA,IAAc,WAEC2jB,GAAA,aACN3jB,IAAc,QACR2jB,GAAA,aAEf3jB,IAAc,gBACdA,IAAc,cACdA,IAAc,gBACdA,IAAc,aAEC2jB,GAAA,cACN3jB,IAAc,UAAYA,IAAc,OAClC2jB,GAAA,eAEf3jB,IAAc,eACdA,IAAc,aACdA,IAAc,eACdA,IAAc,eAEC2jB,GAAA,eAGjB,KAAK,UAAY,KAAK,UAAU,QAAQ,uBAAwB,EAAE,EAClE,KAAK,UAAY,KAAK,UAAU,QAAQ,oBAAqB,EAAE,EAC/D,KAAK,WAAa,IAAMA,CAC1B,CAEA,MAAgB,yBACdhiD,EACAnJ,EACAD,EACAyJ,EACA,CAEA,MAAM,yBAAyBL,EAAMnJ,EAAUD,EAAUyJ,CAAS,EAE9DL,IAAS,OAKX,KAAK,aAAa,EAGhBA,IAAS,SACX,KAAK,SAASpJ,CAAQ,EAGpBoJ,IAAS,QACX,KAAK,QAAQpJ,CAAQ,EAGnBoJ,IAAS,SACX,KAAK,SAASpJ,CAAQ,EAGpBoJ,IAAS,UACX,KAAK,UAAUpJ,CAAQ,EAGrBoJ,IAAS,aACX,KAAK,aAAapJ,CAAQ,CAE9B,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,kBAAa,cAAe,MAAM,EAClC,kBAAa,OAAQ,MAAM,EAC3B,kBAAa,MAAO,MAAM,EAC1B,eAAU,IAAI,SAAS,EACvB,UAAK2qD,GAAiB,kBAAkB,EAExC,KAAK,MAAM,YACd,KAAK,MAAM,UAAY,KAClB,8BACH,YACA,KACA,KAAK,MAAM,UACX,MAGN,CAEU,UAAyC,CAC1C,WACT,CACF,EAvSO,IAAMU,GAANV,GACL9iD,EADWwjD,GACG,UAAU,YACxBxjD,EAFWwjD,GAEG,QAAQ,IAAIznC,ICZ5B,MAAe0nC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QCoBFC,GAAN,cAAoCj0C,CAAU,CAsBnD,aAAc,CACN,QApBDzP,EAAA,cAAS,IACNA,EAAA,gBAAW,IAEXA,EAAA,qBAUHA,EAAA,aAAe,CACpB,SAAU,KAAK,SAAS,KAAK,IAAI,EACjC,MAAO,GACP,QAAS,KAAK,QAAQ,KAAK,IAAI,GAKjC,CAhBA,WAAW,oBAA+B,CACjC,OAAC,QAAS,OAAO,CAC1B,CAEU,oBAA+B,CACvC,MAAO,CAAC,OAAO,CACjB,CAYU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAK0jD,GAAsB,kBAAkB,CACpD,CAEA,MAAgB,WAAY,CAC1B,KAAK,UAAU,EACf,MAAM,MAAM,WACd,CAEU,WAAY,CACd,MAAAC,EAAQ,KAAK,MAAM,MACnBC,EAAU,KAAK,kBACjBD,GAASC,IACN,kBAAe,IAAIrX,EAAMqX,EAAS,CACrC,MAAOD,EAAM,QAAU,OAAYA,EAAM,MAAQ,GACjD,SAAUA,EAAM,WAAa,OAAYA,EAAM,SAAW,GAC1D,SAAUA,EAAM,WAAa,OAAYA,EAAM,SAAW,GAC3D,EAGDC,EAAQ,iBAAiBrX,EAAM,aAAc,KAAK,MAAM,SAAU,CAChE,KAAM,GACP,EAGD,KAAK,aAAa,OAEtB,CAGO,SAAU,CjRzEZ,IAAA3zC,GiR0EHA,EAAA,KAAK,eAAL,MAAAA,EAAmB,MACrB,CAGO,SAAS8B,EAAczC,EAAkB,CjR9E3C,IAAAW,EiR+EEX,IACHA,EAAKwC,GAAoBC,CAAK,GAEhC,MAAMmpD,IACJjrD,EAAA,KAAK,MAAM,UAAX,YAAAA,EAAoB,UAAW,KAE/B,OAAOirD,GAAA,YAAAA,EAAuB,aAAe,YAC7C,KAAK,MAAM,OACX5rD,GAEsB4rD,EAAA,WACpBnpD,EACAzC,EACA,KAAK,MAAM,MACX,KAAK,MAAM,MAGjB,CACA,MAAgB,UAAW,CAIlB,OAAAkQ,EACT,CACF,EAvFO,IAAM27C,GAANJ,GACL1jD,EADW8jD,GACG,UAAU,kBCjBnB,MAAMC,GAAN,cAAiCt0C,CAAU,CAkBhD,aAAc,CACN,QAhBDzP,EAAA,aAAa,CAClB,OAAQ,KAAK,OACb,KAAM,KAAK,KACX,KAAM,KAAK,KACX,YAAa,GACb,iBAAkB,qBAGVA,EAAA,2BAAkD,KAClDA,EAAA,qBAQR,KAAK,cAAgB,KAAK,cAAc,KAAK,IAAI,CACnD,CAPA,WAAW,oBAA+B,CACxC,MAAO,CAAC,mBAAmB,CAC7B,CAOA,MAAgB,WAAY,CAC1B,KAAK,KAAK,EACV,MAAM,MAAM,WACd,CAEO,OAAOtF,EAAe,CAC3B,UAAW2gD,KAAmB,KAAK,gBAAgB,SACjDA,EAAgB,OAAO,EAGrB3gD,IACFA,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAE1B,CAEO,KAAKA,EAAe,CACzB,UAAW2gD,KAAmB,KAAK,gBAAgB,SACjDA,EAAgB,KAAK,EAEnB3gD,IACFA,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAE1B,CAEO,KAAKA,EAAe,CACzB,UAAW2gD,KAAmB,KAAK,gBAAgB,SACjDA,EAAgB,KAAK,EAEnB3gD,IACFA,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAE1B,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,kBAAe,IAAIwH,EAAgB,MAAM,EAC9C,KAAK,aAAa,GAAG,eAAgB,KAAK,eAAgB,IAAI,EAE9D,KAAK,mBAAmB,EAExB,KAAK,cAAc,EAEd,UAAK6hD,GAAmB,kBAAkB,CACjD,CAEU,oBAAqB,CAC7B,MAAMC,EAAmB,MAAM,KAC7B,KAAK,iBAA8B,KAAK,MAAM,gBAAgB,GAAK,CAAC,GAItE,UAAWC,KAAmB,KAAK,gBAAgB,OAC5CD,EAAiB,KAAME,GAAOA,IAAOD,CAAe,GACvD,KAAK,sBAAsBA,CAAe,EAK9C,UAAWA,KAAmBD,EACvB,KAAK,gBAAgB,IAAIC,CAAe,IAC3C,KAAK,gBAAgB,IACnBA,EACA,IAAIzf,EAASyf,EAAiB,CAAE,OAAQ,GAAO,GAEjCA,EAAA,iBACdzf,EAAS,OAAO,MAChB,KAAK,eAESyf,EAAA,iBACdzf,EAAS,OAAO,OAChB,KAAK,gBAKX,KAAK,KAAK,CACZ,CAEU,wBAAyB,CACjC,UAAWyf,KAAmB,KAAK,gBAAgB,OACjD,KAAK,sBAAsBA,CAAe,CAE9C,CAEU,sBAAsBA,EAA8B,CAC5D,MAAM5I,EAAkB,KAAK,gBAAgB,IAAI4I,CAAe,EAC5D5I,GACFA,EAAgB,QAAQ,EAErB,qBAAgB,OAAO4I,CAAe,EAC3BA,EAAA,oBACdzf,EAAS,OAAO,MAChB,KAAK,eAESyf,EAAA,oBACdzf,EAAS,OAAO,OAChB,KAAK,cAET,CAEU,sBAAuB,CAC/B,MAAM,qBAAqB,EAC3B,KAAK,uBAAuB,EACxB,KAAK,cACP,KAAK,aAAa,IAAI,eAAgB,KAAK,eAAgB,IAAI,CAEnE,CAEU,eAAgB,ClRtIrB,IAAA5rC,EkRuIE,WAAM,aAAcA,EAAA,KAAK,gBAC3B,OACA,OACA,UAHsB,YAAAA,EAGf,cAEN,KAAK,MAAM,aACR,eAAU,IAAI4rC,EAAS,oBAAoB,EAC3C,kBAAa,gBAAiB,OAAO,IAErC,eAAU,OAAOA,EAAS,oBAAoB,EAC9C,kBAAa,gBAAiB,MAAM,EAE7C,CAEU,gBAAiB,CACzB,KAAK,KAAK,CACZ,CAEU,+BACRtsC,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAEE1J,IAAkB,oBACpB,KAAK,mBAAmB,CAE5B,CAEU,UAAyC,CAC1C,WACT,CACF,EA7KO,IAAMisD,GAANJ,GACL/jD,EADWmkD,GACG,UAAU,cCL1B,MAAeC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QCeFC,GAAN,cAAgD50C,CAAU,CAmB/D,aAAc,CACN,QAjBEzP,EAAA,gBAAW,IACdA,EAAA,cAAS,IAENA,EAAA,+BAMHA,EAAA,aAAe,CACpB,cAAe,CAAC,EAChB,cAAe,kCACf,YAAa,QACb,WAAY,KAAK,YAKnB,CAbA,WAAW,oBAA+B,CACjC,OAAC,WAAY,iBAAkB,cAAc,CACtD,CAaU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKqkD,GAAkC,kBAAkB,CAChE,CAGO,WAEL3pD,EACAzC,EACAuI,EACA8jD,EACA,CACI9jD,EAAQ,GACL,mBAAc,OAAOA,EAAO,CAAC,EAE1B,aAAK,yBAA0B8jD,CAAY,CAEvD,CAEU,mBAAmBA,EAA4B,CAClD,WACH,sCAAwC,KAAK,MAAM,YACnD,KAAK,MACLA,CAAA,EAEG,WAAM,cAAc,KAAKA,CAAY,CAC5C,CAEA,MAAgB,WAAY,CAE1B,KAAK,uBAAyB,IAAIpiD,EAAgB,KAAK,MAAM,WAAW,EACxE,KAAK,uBAAuB,GAC1B,oBACA,KAAK,mBACL,MAEF,MAAM,MAAM,WACd,CAEU,sBAAuB,CAC/B,MAAM,qBAAqB,EAC1B,KAAK,uBAA2C,IAC/C,oBACA,KAAK,mBACL,KAEJ,CAEU,oBAA+B,CACvC,MAAO,EACT,CAEA,MAAgB,UAAW,CAErB,OAACvJ,EAAkB,IAAI,EAOpB,KAFEwP,EAGX,CACF,EAvFO,IAAMo8C,GAANF,GACLrkD,EADWukD,GACG,UAAU,8BCQnB,MAAMC,GAAN,cAAoCvC,EAAqB,CA4B9D,aAAc,CACN,QA1BEjiD,EAAA,gBAAW,IAcdA,EAAA,aAAe,CACpB,aAAc,EACd,aAAc,EACd,kBAAmB,EACnB,qBAAsB,OACtB,OAAQ,EACR,aAAc,EACd,aAAc,EACd,QAAS,CAAC,GAKZ,CAzBA,WAAW,oBAA+B,CACjC,OACL,gBACA,gBACA,uBACA,yBACA,SACA,gBACA,gBAEJ,CAiBU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKwkD,GAAsB,kBAAkB,CACpD,CAEU,oBAA+B,CAChC,OAAC,eAAgB,eAAgB,sBAAsB,CAChE,CAEA,MAAgB,UAAW,CAErB,GAAA7rD,EAAkB,IAAI,EACjB,YACF,CACL,KAAM,CAAE,QAASwP,CAAa,QAAMq1C,GAAA,WAClC,6CACF,MACO,OAAAr1C,EAEX,CACF,EApDO,IAAMs8C,GAAND,GACLxkD,EADWykD,GACG,UAAU,iBCzB1B,MAAeC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QCAAC,GAAA;AAAA,EC6EFC,GAAN,cAAgCn1C,CAAU,CAkC/C,aAAc,CACN,QAhCDzP,EAAA,cAAS,IAwBNA,EAAA,iBAKHA,EAAA,cAIA,WAAQ,KAAK,mBAEA4kD,GAAA,QAClB,KAAK,oBAAsB,KAAK,oBAAoB,KAAK,IAAI,EAC7D,KAAK,qBAAuB,KAAK,qBAAqB,KAAK,IAAI,CACjE,CApCA,WAAW,oBAA+B,CACjC,OACL,OACA,QACA,OACA,MACA,YACA,WACA,QACA,qBACA,qBACA,iBACA,gBACA,kBACA,iBACA,iBACA,cACA,iBACA,kBAEJ,CAkBO,YAAY5gC,EAAiB,CAClC,OAAIA,EAAK,SACAA,EAAK,SAEF,KAAK,sBACI,MAAM,GAAG,EAAE,IAAI,CAEtC,CAEU,yBAA0B,CAClC,MAAM6gC,EAAU,MAwFT,MAvFyB,CAC9B,CACE,GAAI,WACJ,MAAO,KAAK,MAAM,cAElB,YAAa,uDACb,iBACE,6DACF,KAAM,QACN,IAAK,GACL,aAAc,CAAC,OAAQ,QAAS,OAAO,CACzC,EACA,CACE,GAAI,UACJ,MAAO,KAAK,MAAM,aAClB,YACE,6DACF,iBAAkB,mEAAmEA,aACrF,IAAK,GACL,aAAc,CAAC,OAAQ,QAAS,OAAO,CACzC,EACA,CACE,GAAI,YACJ,MAAO,KAAK,MAAM,eAClB,YACE,mGAEF,KAAM,QACN,IAAK,GAEL,aAAc,CAAC,QAAS,OAAO,CACjC,EACA,CACE,GAAI,WACJ,MAAO,KAAK,MAAM,cAClB,YAAa,8CAA8CA,IAAUA,WACrE,iBAAkB,8CAA8CA,IAAUA,iBAAuBA,aACjG,KAAM,QACN,IAAK,GACL,aAAc,CAAC,OAAQ,QAAS,OAAO,CACzC,EACA,CACE,GAAI,WACJ,MAAO,KAAK,MAAM,cAClB,YAAa,0DACb,iBAAkB,gEAAgEA,aAClF,KAAM,QACN,IAAK,GACL,aAAc,CAAC,OAAQ,QAAS,OAAO,CACzC,EACA,CACE,GAAI,QACJ,MAAO,KAAK,MAAM,WAClB,YAAa,0CAA0CA,IAAUA,WACjE,iBAAkB,0CAA0CA,IAAUA,iBAAuBA,aAC7F,KAAM,OACN,IAAK,GACL,aAAc,CAAC,OAAQ,QAAS,OAAO,CACzC,EAUA,CACE,GAAI,WACJ,MAAO,KAAK,MAAM,cAClB,YAAa,oBACb,KAAM,WACN,IAAK,GACL,aAAc,CAAC,QAAS,OAAO,EAC/B,SAAU,KAAK,MAAM,QACvB,EACA,CACE,GAAI,YACJ,MAAO,KAAK,MAAM,eAClB,YAAa,UACb,iBAAkB,gBAClB,KAAM,YACN,IAAK,GACL,aAAc,CAAC,OAAQ,QAAS,OAAO,CACzC,EAGJ,CAEU,OAAQ,CAChB,OAAO,UAAU,UAAU,MAAM,mBAAmB,IAAM,IAC5D,CAEU,WAAY,CACpB,OAAO,UAAU,UAAU,MAAM,UAAU,IAAM,IACnD,CAEU,4BAA6B,CAC9B,cAAO,UAAU,OAAU,UACpC,CAEU,kBAA0B,CAClC,MAAM/5C,EAAe,CACnB,KAAM,OACN,MAAO,SAAS,MAChB,KAAM,qBACN,IAAK,OACL,MAAO,QACP,cAAA65C,GACA,UAAW,KAAK,UAAU,EAC1B,MAAO,KAAK,MAAM,EAClB,UAAW,GACX,SAAU,KAAK,2BAA2B,EAC1C,WAAY,gBAAkBC,GAAkB,MAChD,WAAY,CAAC,EACb,kBAAmB,OACnB,kBAAmB,OAEnB,cAAe,WACf,aAAc,UACd,eAAgB,YAChB,cAAe,WACf,cAAe,WACf,WAAY,QACZ,cAAe,WACf,eAAgB,oBAEhB,MAAO,KAAK,MACZ,eAAgB,KAAK,eACrB,YAAa,KAAK,aAIpB,OAAA95C,EAAM,UAAY,CAACA,EAAM,OAAS,CAACA,EAAM,UAElCA,CACT,CAEU,qBAAsB,CxR1Q3B,IAAAlS,GwR2QHA,EAAA,KAAK,WAAL,MAAAA,EAAe,MACjB,CAEU,sBAAuB,CxR9Q5B,IAAAA,GwR+QHA,EAAA,KAAK,WAAL,MAAAA,EAAe,MACjB,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKgsD,GAAkB,kBAAkB,EAC9C,KAAK,kBAAkB,CACzB,CAEU,sBAAuB,CAC/B,MAAM,qBAAqB,EAC3B,KAAK,qBAAqB,CAC5B,CAEU,mBAAoB,CACvB,sBAAiB,OAAQ,KAAK,mBAAmB,EACjD,sBAAiB,YAAa,KAAK,oBAAoB,CAC9D,CAEU,sBAAuB,CAC1B,yBAAoB,OAAQ,KAAK,mBAAmB,EACpD,yBAAoB,YAAa,KAAK,mBAAmB,CAChE,CAEU,gBAAiB,CACzB,OAAI,KAAK,MAAM,OAAS,QAAU,KAAK,MAAM,IACpCpmD,GAAO,KAAK,MAAM,GAAG,EAEvB,OAAO,SAAS,IACzB,CAEU,qBAAsB,CAC9B,OAAI,KAAK,MAAM,OAAS,QAAU,KAAK,MAAM,IACpCA,GAAO,KAAK,MAAM,GAAG,EAEvB,EACT,CAEU,iBAAkB,CACnB,OAAAvH,GAAU,KAAK,MAAM,IAAI,CAClC,CAMU,kBAAmB,CACpB,OAAAA,GAAU,KAAK,MAAM,KAAK,CACnC,CAEU,iBAAkB,CACf,UAAA6tD,KAAa,KAAK,MAAM,WAAY,CACvC,MAAA3mD,EAAM,KAAK,iBACX4mD,EAAW,KAAK,sBAChBC,EAAY,KAAK,kBACjBC,EAAa,KAAK,mBACxB,IAAIC,EAAcJ,EAAU,YAExB,KAAK,MAAM,OAAS,QAAUA,EAAU,mBAC1CI,EAAcJ,EAAU,kBAG1B,MAAMK,EAASL,EAAU,OAAS,YAE5BM,EAAWF,EACd,QAAQ,UAAWC,EAAS,mBAAmBhnD,CAAG,EAAIA,CAAG,EACzD,QACC,gBACAgnD,EAAS,mBAAmBJ,CAAQ,EAAIA,CAEzC,UAAQ,oBAAqBA,CAAQ,EACrC,QAAQ,WAAYI,EAAS,mBAAmBH,CAAS,EAAIA,CAAS,EACtE,QACC,YACAG,EAAS,mBAAmBF,CAAU,EAAIA,CAAA,EAG9CH,EAAU,UAAYA,EAAU,aAAa,SAAS,KAAK,MAAM,IAAI,EACrEA,EAAU,IAAMM,EAEpB,CAEU,cAAe,CACvB,MAAMC,EAAwB,KAAK,cACjC,0BAEF,GAAI,CAACA,EAAuB,CAClB,aACN,4DACA,MAEF,OAEG,cAAW,IAAI1d,EAAS0d,CAAqB,CACpD,CASA,MAAa,eAAerhC,EAAiBtpB,EAAc,CxRtXtD,IAAA9B,EwRyXC,OAFJA,EAAA,KAAK,WAAL,MAAAA,EAAe,OAEXorB,EAAK,OAAS,aAChBtpB,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAChB,MAAA2C,GAAoB2mB,EAAK,GAAG,EAC3B,IAILA,EAAK,OAAS,WACT,IAGTtpB,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAEf,YACLspB,EAAK,IACL,QACA,2FAEG,OAAO,OAAS,KAAK,MAAM,OAAO,MAAQ,EAAI,GAAG,EAAI,MAGnD,GACT,CAEA,MAAa,MAAMtpB,EAA4B,CxRnZ1C,IAAA9B,EwRuZH,GAHK,WAAM,QAAS,KAAK,KAAK,EAC9B8B,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAClB,KAAK,MAAM,UAAY,CAAC,KAAK,MAAM,UACjC,IACF,MAAM,UAAU,MAAM,CACpB,MAAO,KAAK,MAAM,MAClB,KAAM,GAAG,KAAK,MAAM;AAAA;AAAA,EACpB,IAAK,KAAK,MAAM,KAAO,OAAO,SAAS,KACxC,QACMtG,GACH,GAAAA,EAAM,OAAS,aAGjB,OAEF,QAAQ,MAAM,SAASA,EAAM,SAASA,EAAM,UAAWA,CAAK,CAC9D,KAEA,aAAK,gBAAgB,GACdwE,EAAA,KAAK,WAAL,YAAAA,EAAe,QAE1B,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,YAEd,CAEA,MAAgB,WAAY,CAC1B,KAAK,aAAa,EACb,WAAM,YAAa,KAAK,KAAK,EAC7B,WAAM,WAAa,KAAK,wBAAwB,EACrD,MAAM,MAAM,WACd,CAEU,oBAA+B,CACvC,MAAO,EACT,CAEU,UAAyC,CAC7C,aAAQD,EAAkB,IAAI,IAC3B,WAAM,cAAgB,KAAK,WAE3BwP,EACT,CACF,EAzXO,IAAMm9C,GAANV,GACL5kD,EADWslD,GACG,UAAU,aA6BxBtlD,EA9BWslD,GA8BJ,QAAQ,GCzGJ,MAAAC,GACX/sD,GACmB,CACnB,MAAMotB,EAASptB,EACTP,EAAKO,EAEP,OAAAotB,EAAO,UAAYA,EAAO,SACW,CAErC,EAAGA,EAAO,YAEV,EAAGA,EAAO,YAEV,KACE,SAAS,gBAAgB,YACzB,SAAS,gBAAgB,YAE3B,KACE,SAAS,gBAAgB,aACzB,SAAS,gBAAgB,cAIQ,CAErC,EAAG3tB,EAAG,WAEN,EAAGA,EAAG,UAEN,KAAMA,EAAG,YAAcA,EAAG,YAE1B,KAAMA,EAAG,aAAeA,EAAG,aAI/B,EAEautD,GAAgBhtD,GAAgC,CACrD,MAAAitD,EAAiBF,GAAkB/sD,CAAO,EAChD,OAAOitD,EAAe,KAAO,GAAKA,EAAe,KAAO,CAC1D,EChCaC,GAAN,KAAe,CAKpB,OAAc,QAAS,CACrB,OAAO,KAAK,GACd,CAEA,OAAc,UAAU7yD,EAA2B,GAAI,CACrD,KAAK,WAAWA,CAAO,EAElB,KAAK,cACR,KAAK,YAAc,GACnB,OAAO,sBAAsB,KAAK,KAAK,KAAK,IAAI,CAAC,EAErD,CAmBA,OAAiB,WAAWA,EAA0B,CACpD,KAAK,OACH,OAAOA,EAAQ,QAAW,SAAWA,EAAQ,OAAS,KAAK,MAC/D,CAMA,OAAiB,KAAK8yD,EAAmB,CAEvC,GAAIA,EAAY,KAAK,gBAAkB,IAAO,KAAK,OAAQ,CACzD,KAAK,QAAU,OAAO,sBAAsB,KAAK,KAAK,KAAK,IAAI,CAAC,EAChE,OAGI,MAAAC,EAAWD,EAAY,KAAK,gBAClC,KAAK,OAASC,EACd,KAAK,gBAAkBD,EAElB,WAAMA,EAAW,KAAK,KAAK,EAE5BA,EAAY,KAAK,cAAgB,MACnC,KAAK,IAAM,IAAO,KAAK,iBAAmB,IAAO,KAAK,IAEtD,KAAK,cAAgBA,EACrB,KAAK,iBAAmB,GAErB,wBAEL,IAAIE,EAAiB,EACd,UAAK,OAAS,KAAK,UAGpB,GAFC,YAAO,KAAK,QAAQ,EACzB,KAAK,OAAS,KAAK,SACf,EAAEA,GAAkB,IAAK,CAC3B,KAAK,MAAM,EACX,MAIJ,KAAK,OAAO,KAAK,MAAQ,KAAK,QAAQ,EAEjC,SAAI,KAAK,GAAG,EAEjB,KAAK,QAAU,OAAO,sBAAsB,KAAK,KAAK,KAAK,IAAI,CAAC,CAClE,CAEA,OAAiB,MAAMF,EAAmBG,EAAe,CACvD,KAAK,OAAO,QAAQ,QAASH,EAAWG,CAAK,CAC/C,CAEA,OAAiB,OAAOC,EAAgB,CACjC,YAAO,QAAQ,SAAUA,CAAM,CACtC,CAEA,OAAiB,OAAOD,EAAe,CAChC,YAAO,QAAQ,SAAUA,CAAK,CACrC,CAEA,OAAiB,IAAIA,EAAe,CAC7B,YAAO,QAAQ,MAAOA,CAAK,CAClC,CAEA,OAAiB,OAAQ,CACvB,KAAK,MAAQ,CACf,CAEA,YAAYjzD,EAA2B,GAAI,CACzC6yD,GAAS,WAAW7yD,CAAO,CAC7B,CACF,EAzGO,IAAMmzD,EAANN,GACL1lD,EADWgmD,EACG,SAAS,IAAI9jD,EAAgB,UAAU,GAErDlC,EAHWgmD,EAGG,SAAS,IAevBhmD,EAlBWgmD,EAkBG,MAAM,IAGpBhmD,EArBWgmD,EAqBM,WAAW,IAAO,IAEnChmD,EAvBWgmD,EAuBM,cAAc,IAE/BhmD,EAzBWgmD,EAyBM,kBAAkB,GAEnChmD,EA3BWgmD,EA2BM,QAAQ,GAEzBhmD,EA7BWgmD,EA6BM,mBAAmB,GAEpChmD,EA/BWgmD,EA+BM,gBAAgB,GAEjChmD,EAjCWgmD,EAiCM,UAAU,GC/BtB,MAAMC,EAAW,CAyBtB,YAAYhuD,EAAiBpF,EAA6B,GAAI,CAxBpDmN,EAAA,oBAAe,iBAAkB,QAEjCA,EAAA,iBAAY,GAEZA,EAAA,cAEAA,EAAA,gBAEAA,EAAA,WAEAA,EAAA,cAAS,IAETA,EAAA,gBAAW,MAEXA,EAAA,YAAO,GAEPA,EAAA,gBAAW,GAEXA,EAAA,aAAmC,cAEnCA,EAAA,oBAAe,IAEfA,EAAA,mBAA6B,MAiL7BA,EAAA,gBAAWzL,GAAS,KAAK,UAAU,KAAK,IAAI,CAAC,GAM7CyL,EAAA,gBAAWzL,GAAS,KAAK,UAAU,KAAK,IAAI,CAAC,GApLrD,KAAK,GAAK0D,EACV,KAAK,QAAUpF,EACf,KAAK,UAAY,KAAK,QAAQ,WAAa,KAAK,UAChD,KAAK,SAAW,KAAK,QAAQ,UAAY,KAAK,SAC9C,KAAK,MAAQ,KAAK,QAAQ,OAAS,KAAK,MACnC,kBACH,OAAO,KAAK,QAAQ,cAAiB,UACjC,KAAK,QAAQ,aACb,KAAK,aAEX,KAAK,MAAQ,KAAK,SAAS,KAAK,EAAE,EAC7B,UAAO,KAAK,cAEb,KAAK,YAAc,GAEhB,QAAG,WAAa,KAAK,MAG1B,KAAK,GAAG,WAAa,EAGvB,KAAK,kBAAkB,EAEvBmzD,EAAS,UAAU,CAAE,OAAQ,EAAI,EACnC,CAKO,QAAS,CACd,KAAK,MAAQ,KAAK,SAAS,KAAK,EAAE,EAClC,KAAK,YAAY,CACnB,CAEO,SAAU,CACf,KAAK,qBAAqB,CAC5B,CAEO,OAAQ,CACR,QAAG,MAAM,eAAiB,GAC/B,KAAK,OAAS,EAChB,CAGO,OAAO1L,EAAQ,EAAG,CAClB,KAAK,SAIV,KAAK,kBAAkB,EAElB,iBAAc,OAAO,WAAW,IAAM,CACzC,KAAK,YAAY,EACjB,KAAK,OAAS,GAET,QAAG,MAAM,eAAiB,QAC9BA,CAAK,EACV,CAEU,mBAAoB,CAC5B,KAAK,qBAAqB,EAC1B,KAAK,SAAW,KAAK,SAAS,KAAK,IAAI,EACvC,KAAK,UAAY,KAAK,UAAU,KAAK,IAAI,EACzC,KAAK,WAAa,KAAK,WAAW,KAAK,IAAI,EAC3C,KAAK,UAAY,KAAK,UAAU,KAAK,IAAI,EACzC,KAAK,SAAW,KAAK,SAAS,KAAK,IAAI,EACvC,KAAK,OAAS,KAAK,OAAO,KAAK,IAAI,EACnC,KAAK,WAAa,KAAK,WAAW,KAAK,IAAI,EAEpC,wBAAiB,SAAU,KAAK,SAAU,CAC/C,QAAS,GACV,EAED,KAAK,GAAG,iBAAiB,aAAc,KAAK,UAAW,CACrD,QAAS,GACV,EACD,KAAK,GAAG,iBAAiB,YAAa,KAAK,UAAW,CACpD,QAAS,GACV,EACD,KAAK,GAAG,iBAAiB,UAAW,KAAK,UAAW,CAClD,QAAS,GACV,EACD,KAAK,GAAG,iBAAiB,aAAc,KAAK,UAAW,CACrD,QAAS,GACV,EAED,KAAK,GAAG,iBAAiB,aAAc,KAAK,WAAY,CACtD,QAAS,GACV,EACD,KAAK,GAAG,iBAAiB,WAAY,KAAK,WAAY,CACpD,QAAS,GACV,EAED,KAAK,GAAG,iBAAiB,UAAW,KAAK,UAAW,CAClD,QAAS,GACV,EACD,KAAK,GAAG,iBAAiB,WAAY,KAAK,UAAW,CACnD,QAAS,GACV,EAEG,KAAK,cACP,KAAK,GAAG,iBAAiB,SAAU,KAAK,UAAW,CACjD,QAAS,GACV,EACD,KAAK,GAAG,iBAAiB,YAAa,KAAK,UAAW,CACpD,QAAS,GACV,EAED,KAAK,GAAG,iBAAiB,cAAe,KAAK,UAAW,CACtD,QAAS,GACV,IAED,KAAK,GAAG,iBAAiB,SAAU,KAAK,SAAU,CAChD,QAAS,GACV,EACD,KAAK,GAAG,iBAAiB,YAAa,KAAK,SAAU,CACnD,QAAS,GACV,EACD,KAAK,GAAG,iBAAiB,cAAe,KAAK,SAAU,CACrD,QAAS,GACV,GAGH0L,EAAS,OAAO,GAAG,SAAU,KAAK,MAAM,EACxCA,EAAS,OAAO,GAAG,SAAU,KAAK,UAAU,CAC9C,CAEU,sBAAuB,CACxB,2BAAoB,SAAU,KAAK,QAAQ,EAElD,KAAK,GAAG,oBAAoB,aAAc,KAAK,SAAS,EACxD,KAAK,GAAG,oBAAoB,YAAa,KAAK,SAAS,EACvD,KAAK,GAAG,oBAAoB,UAAW,KAAK,SAAS,EACrD,KAAK,GAAG,oBAAoB,aAAc,KAAK,SAAS,EAExD,KAAK,GAAG,oBAAoB,aAAc,KAAK,UAAU,EACzD,KAAK,GAAG,oBAAoB,WAAY,KAAK,UAAU,EAEvD,KAAK,GAAG,oBAAoB,UAAW,KAAK,SAAS,EACrD,KAAK,GAAG,oBAAoB,WAAY,KAAK,SAAS,EAElD,KAAK,cACP,KAAK,GAAG,oBAAoB,SAAU,KAAK,SAAS,EACpD,KAAK,GAAG,oBAAoB,YAAa,KAAK,SAAS,EACvD,KAAK,GAAG,oBAAoB,cAAe,KAAK,SAAS,IAEzD,KAAK,GAAG,oBAAoB,SAAU,KAAK,QAAQ,EACnD,KAAK,GAAG,oBAAoB,YAAa,KAAK,QAAQ,EACtD,KAAK,GAAG,oBAAoB,cAAe,KAAK,QAAQ,GAG1DA,EAAS,OAAO,IAAI,SAAU,KAAK,MAAM,EACzCA,EAAS,OAAO,IAAI,SAAU,KAAK,UAAU,CAC/C,CAEU,WAAY,CAChB,KAAK,cACP,KAAK,MAAM,CAEf,CAEU,YAAa,CACrB,KAAK,OAAO,GAAG,CACjB,CAEU,WAAY,CACpB,KAAK,OAAO,GAAI,CAClB,CAEU,WAAY,CACpB,KAAK,MAAQ,KAAK,SAAS,KAAK,EAAE,EAClC,KAAK,OAAO,GAAG,CACjB,CAIU,WAAY,CACpB,KAAK,kBAAkB,CACzB,CAIU,mBAAoB,CACxB,KAAK,cAAgB,OACvB,aAAa,KAAK,WAAW,EAC7B,KAAK,YAAc,KAEvB,CAEU,aAAc,CAEnB,YAAK,QAAU,WAAa,KAAK,GAAG,UAAY,KAAK,GAAG,aAAe,CAE5E,CAEU,aAAc,CACjB,UAAO,KAAK,aACnB,CAEU,SAAS/tD,EAAiB,CAC3B,YAAK,QAAU,WAClBstD,GAAkBttD,CAAE,EAAE,KACtBstD,GAAkBttD,CAAE,EAAE,IAC5B,CAeU,QAAS,CACb,KAAK,QAIJ,YAAO,KAAK,IAAI,CACvB,CAEU,WAAW6tD,EAAe,CAClC,GAAI,KAAK,OACP,OAGF,KAAK,SAAW,KAAK,KACrB,MAAMI,EAAS,KAAK,SAAW,KAAK,UAAYJ,EAChD,KAAK,MAAQI,EAGT,KAAK,MAAQ,GAAK,KAAK,YAAc,IACvC,KAAK,UAAY,GAGf,KAAK,MAAQ,KAAK,OAAS,KAAK,YAAc,KAChD,KAAK,UAAY,GAErB,CAEU,OAAOC,EAAc,CACzB,KAAK,QAAU,WACjB,KAAK,GAAG,UAAYA,EAEpB,KAAK,GAAG,WAAaA,CAEzB,CACF,CCvRO,MAAMC,EAAW,CAQtB,YACEnuD,EACApF,EAA6B,CAAE,iBAAkB,IACjD,CAVQmN,EAAA,gBACAA,EAAA,mBAAc,GACdA,EAAA,mBAAc,GACdA,EAAA,WACAA,EAAA,cAAS,IACTA,EAAA,oBAAe,iBAAkB,QAkEpCA,EAAA,sBAAiBzL,GAAS,KAAK,gBAAgB,KAAK,IAAI,CAAC,GAzD9D,GAHA,KAAK,GAAK0D,EACV,KAAK,QAAUpF,EAEX,KAAK,aAEA,YAGT,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAC7C,KAAK,UAAY,KAAK,UAAU,KAAK,IAAI,EACzC,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAC7C,KAAK,eAAiB,KAAK,eAAe,KAAK,IAAI,EAEhDoF,EAAA,oBAAoB,YAAa,KAAK,WAAW,EACjDA,EAAA,iBAAiB,YAAa,KAAK,YAAa,CACjD,QAAS,GACV,EAEM,wBAAiB,SAAU,KAAK,cAAc,EAGjD,KAAK,QAAQ,kBACR,2BAAoB,UAAW,KAAK,SAAS,EAC7C,2BAAoB,YAAa,KAAK,WAAW,EAEjD,wBAAiB,UAAW,KAAK,UAAW,CACjD,QAAS,GACV,EACM,wBAAiB,YAAa,KAAK,YAAa,CACrD,QAAS,GACV,IAEEA,EAAA,oBAAoB,UAAW,KAAK,SAAS,EAC7CA,EAAA,oBAAoB,YAAa,KAAK,WAAW,EAEjDA,EAAA,iBAAiB,UAAW,KAAK,UAAW,CAC7C,QAAS,GACV,EACEA,EAAA,iBAAiB,YAAa,KAAK,YAAa,CACjD,QAAS,GACV,GAIH,KAAK,eAAe,CACtB,CAEO,SAAU,CACf,KAAK,qBAAqB,EACrB,QAAG,UAAU,OAAO,WAAW,CACtC,CAEU,iBAAkB,CACtButD,GAAa,KAAK,EAAE,EACjB,QAAG,UAAU,IAAI,WAAW,EAE5B,QAAG,UAAU,OAAO,WAAW,CAExC,CAIU,YAAY,EAAe,CACnC,KAAK,OAAS,GACd,KAAK,YAAc,EAAE,QACrB,KAAK,YAAc,EAAE,OACvB,CAEU,WAAY,CACpB,KAAK,OAAS,EAChB,CAEU,YAAY,EAAe,CACnC,IAAIa,EAAa,EACbC,EAAa,EACb,KAAK,SACF,QAAG,YAAcD,EACpB,CAAC,KAAK,aAAe,KAAK,YAAc,EAAE,SACvC,QAAG,WAAaC,EACnB,CAAC,KAAK,aAAe,KAAK,YAAc,EAAE,SACxC,KAAK,KAAO,SAAS,OACnB,SAAS,kBACX,KAAK,GAAK,SAAS,iBAErB,KAAK,GAAG,YAAcD,EACtB,KAAK,GAAG,WAAaC,GAG3B,CAEU,sBAAuB,CACxB,2BAAoB,SAAU,KAAK,cAAc,EACxD,KAAK,GAAG,oBAAoB,YAAa,KAAK,WAAW,EACzD,KAAK,GAAG,oBAAoB,UAAW,KAAK,SAAS,EACrD,KAAK,GAAG,oBAAoB,YAAa,KAAK,WAAW,CAC3D,CACF,CCrHO,MAAeC,EAAkB,CAOtC,YAAYtuD,EAA+C,CANjD+H,EAAA,oBAAe,iBAAkB,QAEjCA,EAAA,WAKR,KAAK,GAAK/H,CACZ,CALA,IAAW,gBAAiB,CAC1B,OAAO,KAAK,YACd,CAKU,mBACR8J,EACAykD,EACAC,EACA,CACAA,EAAgB,cAAgBD,EAChCC,EAAgB,OAASD,EAAc,OAEjC,MAAA9rD,EAAQ,IAAI,YAAeqH,EAAW,CAC1C,OAAQ0kD,CAAA,CACT,EACI,QAAG,cAAc/rD,CAAK,CAC7B,CACF,CCjBO,MAAMgsD,WAA4BH,EAAkB,CAazD,YACEtuD,EACApF,EAAwC,GACxC,CACA,MAAMoF,CAAE,EAhBH+H,EAAA,mBAAc,IAEXA,EAAA,qBAEAA,EAAA,aAAQ,KAERA,EAAA,qBAAuC,MAEvCA,EAAA,mBAAqC,MAErCA,EAAA,mBAA6B,MAuF7BA,EAAA,qBAAgB,KAAK,eAAe,KAC5C,OA8CQA,EAAA,cAAS,KAAK,QAAQ,KAAK,IAAI,GA/HvC,KAAK,GAAK/H,EACL,WAAQpF,EAAQ,OAAS,KAAK,MAC9B,mBAAgB0yD,GAAkB,KAAK,EAAE,EAEzC,kBAAe,KAAK,aACrB,CAAC,YAAa,YAAa,QAAQ,EACnC,CAAC,SAAU,WAAW,EAC1B,KAAK,qBAAqB,EAC1B,KAAK,kBAAkB,CACzB,CAEO,SAAU,CACf,KAAK,qBAAqB,CAC5B,CAEA,IAAW,aAAc,CACvB,OAAO,KAAK,YACd,CAEU,aACR7+C,EACAkK,EACiB,CACb,OAAClK,GAAS,CAACkK,EACN,UAELlK,EAAM,EAAIkK,EAAI,EACT,QAELlK,EAAM,EAAIkK,EAAI,EACT,OAELlK,EAAM,EAAIkK,EAAI,EACT,OAELlK,EAAM,EAAIkK,EAAI,EACT,KAEF,MACT,CAEU,sBAAuB,CACpB,UAAA7O,KAAa,KAAK,aAC3B,KAAK,GAAG,oBAAoBA,EAAW,KAAK,aAAa,CAE7D,CAEU,mBAAoB,CACjB,UAAAA,KAAa,KAAK,aAC3B,KAAK,GAAG,iBAAiBA,EAAW,KAAK,cAAe,CACtD,QAAS,GACV,CAEL,CAEU,eAAerH,EAAgC,CACnD,OAACA,EAAM,QAIP,KAAK,cAAgB,OACvB,aAAa,KAAK,WAAW,EAC7B,KAAK,YAAc,MAGhB,KAAK,aACR,KAAK,YAAYA,CAAK,EAGpB,KAAK,aACP,KAAK,OAAOA,CAAK,EAGd,iBAAc,OAAO,WAAW,IAAM,CACzC,KAAK,YAAYA,CAAK,GACrB,KAAK,KAAK,EAEN,IApBE,EAqBX,CASU,YAAYA,EAAgC,CACpD,KAAK,YAAc,GACd,iBAAc6qD,GAAkB,KAAK,EAAE,EAC5C,MAAM3lB,EAAY,KAAK,aAAa,KAAK,cAAe,KAAK,WAAW,EACnE,wBAAsC,cAAellC,EAAO,CAC/D,cAAe,KAAK,cACpB,YAAa,KAAK,YAClB,UAAAklC,CAAA,CACD,CACH,CAKU,YAAYllC,EAAgC,CACpD,KAAK,YAAc,GACd,mBAAgB6qD,GAAkB,KAAK,EAAE,EACzC,wBAAsC,cAAe7qD,EAAO,CAC/D,cAAe,KAAK,cACrB,CACH,CAKU,QAAQA,EAAgC,CAC1C,MAAAisD,EAAkBpB,GAAkB,KAAK,EAAE,EAC3C3lB,EAAY,KAAK,aAAa,KAAK,cAAe+mB,CAAe,EAClE,wBAAsC,SAAW/mB,EAAWllC,EAAO,CACtE,cAAe,KAAK,cACpB,gBAAAisD,EACA,UAAA/mB,CAAA,CACD,EACI,wBAAsC,YAAallC,EAAO,CAC7D,cAAe,KAAK,cACpB,gBAAAisD,EACA,UAAA/mB,CAAA,CACD,CACH,CAGF,CCvJY,IAAAgnB,QAEVA,EAAAC,EAAA,+BAEAD,EAAAC,EAAA,iCAEAD,EAAAC,EAAA,yCAEAD,EAAAC,EAAA,uCAEAD,EAAAC,EAAA,uCAVUD,QAAA,ICJAE,OACVA,EAAAC,EAAA,qBACAD,EAAAC,EAAA,mBACAD,EAAAC,EAAA,qBAHUD,OAAA,ICwCL,MAAME,WAA2BT,EAAkB,CAyIxD,YACEtuD,EACAgvD,EAA0B,CACxB,cAAe,EACf,gBAAiB,GACjB,gBAAiB,GACjB,iBAAkB,IAClB,kBAAmB,IACnB,eAAgB,GAChB,aAAc,iBAAkB,OAEhC,WAAY,CAAC,YAAY,EACzB,SAAU,CAAC,UAAU,EACrB,UAAW,CAAC,WAAW,EACvB,SAAU,CAAC,KAAK,GAElB,CACA,MAAMhvD,CAAE,EAlFA+H,EAAA,qBAA0B,CAClC,EAAG,EACH,EAAG,IAIKA,EAAA,mBAAwB,CAChC,EAAG,EACH,EAAG,IAIKA,EAAA,qBAA0B,CAClC,EAAG,EACH,EAAG,IAIKA,EAAA,kBAAuB,CAC/B,EAAG,EACH,EAAG,IAIKA,EAAA,iBAA8B,MAG9BA,EAAA,eAAU,IAGVA,EAAA,gBAA6B,MAG7BA,EAAA,eAAU,IAGVA,EAAA,oBAAe,IAGfA,EAAA,iBAAY,GAGZA,EAAA,iBAAY,IAGZA,EAAA,kBAAa,IAGbA,EAAA,oBAAe,IAGfA,EAAA,iBAAY,GAIZA,EAAA,iBAAY,IACZA,EAAA,gBAAW,IAGXA,EAAA,mBAAc,IAEdA,EAAA,iBAsBR,KAAK,GAAK/H,EAGVgvD,EAAS,WAAaA,EAAS,aAC3B,CAAC,YAAY,EACb,CAAC,WAAW,EAChBA,EAAS,SAAWA,EAAS,aAAe,CAAC,UAAU,EAAI,CAAC,SAAS,EACrEA,EAAS,UAAYA,EAAS,aAAe,CAAC,WAAW,EAAI,CAAC,WAAW,EACzEA,EAAS,SAAWA,EAAS,aAAe,CAAC,KAAK,EAAI,CAAC,OAAO,EAE9D,KAAK,SAAWA,EAGhB,KAAK,aAAe,KAAK,aAAa,KAAK,IAAI,EAC/C,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAC7C,KAAK,WAAa,KAAK,WAAW,KAAK,IAAI,EAC3C,KAAK,kBAAkB,CACzB,CAzKA,IAAW,gBAAiB,CAC1B,OAAO,KAAK,SAAS,YACvB,CAEA,IAAW,YAAa,CACtB,OAAO,KAAK,SAAS,UACvB,CAEA,IAAW,UAAW,CACpB,OAAO,KAAK,SAAS,QACvB,CAEA,IAAW,WAAY,CACrB,OAAO,KAAK,SAAS,SACvB,CAEA,IAAW,UAAW,CACpB,OAAO,KAAK,SAAS,QACvB,CASA,IAAW,gBAAgBC,EAAmB,CACxC,UAAOA,GAAc,SACjB,UAAI,MAAM,8CAA8C,EAEhE,KAAK,SAAS,gBAAkBA,CAClC,CAGA,IAAW,gBAAgBA,EAAmB,CACxC,UAAOA,GAAc,SACjB,UAAI,MAAM,8CAA8C,EAEhE,KAAK,SAAS,gBAAkBA,CAClC,CAGA,IAAW,aAAaC,EAAkB,CACpC,UAAOA,GAAa,SAChB,UAAI,MAAM,6CAA6C,EAE/D,KAAK,SAAS,kBAAoBA,CACpC,CAGA,IAAW,iBAAiBD,EAAmB,CACzC,UAAOA,GAAc,SACjB,UAAI,MAAM,8CAA8C,EAEhE,KAAK,SAAS,iBAAmBA,CACnC,CAGA,IAAW,SAASE,EAAe,CAC7B,UAAOA,GAAU,SACb,UAAI,MAAM,2CAA2C,EAE7D,KAAK,SAAS,cAAgBA,CAChC,CA2GO,SAAU,CACf,KAAK,qBAAqB,CAE5B,CAEU,sBAAuB,CACpB,UAAArlD,KAAa,KAAK,SAAS,WACpC,KAAK,GAAG,oBACNA,EACA,KAAK,cAGE,UAAAA,KAAa,KAAK,SAAS,UACpC,KAAK,GAAG,oBACNA,EACA,KAAK,aAGE,UAAAA,KAAa,KAAK,SAAS,SACpC,KAAK,GAAG,oBACNA,EACA,KAAK,WAIX,CAIU,YACRslD,EACAC,EACAC,EAAqB,KAAK,SAAS,gBACnCC,EAAqB,KAAK,SAAS,gBACnC,CACA,IAAIC,EAAW,GAEb,OAAAJ,EAAc,EAAIC,EAAY,GAC9BD,EAAc,EAAIC,EAAY,EAAIE,IAEvBC,EAAA,WAGXJ,EAAc,EAAIC,EAAY,GAC9BA,EAAY,EAAID,EAAc,EAAIE,IAEvBE,EAAA,cAGXJ,EAAc,EAAIC,EAAY,GAC9BA,EAAY,EAAID,EAAc,EAAIG,IAEvBC,EAAA,aAGXJ,EAAc,EAAIC,EAAY,GAC9BD,EAAc,EAAIC,EAAY,EAAIC,IAEvBE,EAAA,aAENA,CACT,CAEU,YACR/sD,EACA3E,EAAkB+wD,EAAU,QAC5BtmD,EAAQ,EACE,CACN,IAAAknD,EACJ,OAAQ3xD,EAAM,CACZ,KAAK+wD,EAAU,QACbY,EAAgBhtD,EAAqB,eACrC,MACF,KAAKosD,EAAU,OACbY,EAAgBhtD,EAAqB,cACrC,MACF,QACEgtD,EAAgBhtD,EAAqB,QACrC,KACJ,CASO,MARU,CACf,EAAG,KAAK,SAAS,aACbgtD,EAAalnD,CAAK,EAAE,MACnB9F,EAAqB,MAC1B,EAAG,KAAK,SAAS,aACbgtD,EAAalnD,CAAK,EAAE,MACnB9F,EAAqB,MAG9B,CAEU,UACRA,EACA3E,EAAkB+wD,EAAU,QAC5BtmD,EAAQ,EACK,CACP,MAAAmnD,EAAsB,KAAK,GAAmB,sBAAsB,EACtE,IAAAD,EACJ,OAAQ3xD,EAAM,CACZ,KAAK+wD,EAAU,QACbY,EAAgBhtD,EAAqB,eACrC,MACF,KAAKosD,EAAU,OACbY,EAAgBhtD,EAAqB,cACrC,MACF,QACEgtD,EAAgBhtD,EAAqB,QACrC,KACJ,CAqBO,MApBQ,CACb,EAAG,KAAK,SAAS,aACb,KAAK,MACHgtD,EAAalnD,CAAK,EAAE,OACjBmnD,EAAqBA,EAAmB,KAAO,IAEpD,KAAK,MACFjtD,EAA4B,OAC1BitD,EAAqBA,EAAmB,KAAO,EACpD,EACJ,EAAG,KAAK,SAAS,aACb,KAAK,MACHD,EAAalnD,CAAK,EAAE,OACjBmnD,EAAqBA,EAAmB,IAAM,IAEnD,KAAK,MACFjtD,EAA4B,OAC1BitD,EAAqBA,EAAmB,IAAM,EACnD,EAGR,CAEU,aACRjtD,EACAktD,EAAY,GACZC,EAAef,EAAU,QACzBgB,EAAahB,EAAU,QACZ,CACX,MAAMiB,EAAuB,CAC3B,SAAU,KAAK,YAAYrtD,EAAOmtD,CAAY,EAC9C,OAAQ,KAAK,UAAUntD,EAAOotD,CAAU,EACxC,KAAM,KAAK,IAAI,GAEjB,OAAIF,IACQG,EAAA,MAAQ1rD,GAAgB3B,EAAM,MAAwB,GAE3DqtD,CACT,CAEU,mBAAoB,CACjB,UAAAhmD,KAAa,KAAK,SAAS,WACpC,KAAK,GAAG,iBACNA,EACA,KAAK,aACL,CACE,QAAS,EACX,GAGO,UAAAA,KAAa,KAAK,SAAS,UACpC,KAAK,GAAG,iBACNA,EACA,KAAK,YACL,CACE,QAAS,EACX,GAGO,UAAAA,KAAa,KAAK,SAAS,SACpC,KAAK,GAAG,iBACNA,EACA,KAAK,WACL,CACE,QAAS,EACX,EAGN,CAIU,aAAarH,EAAgC,CACrD,OAAIA,EAAM,OAASA,EAAM,QAAU,EAC1B,IAET,KAAK,cAAgB,KAAK,YAAYA,EAAOosD,EAAU,MAAM,EAC7D,KAAK,YAAc,CACjB,EAAG,KAAK,cAAc,EACtB,EAAG,KAAK,cAAc,GAEnB,eAAY,KAAK,MAGtB,KAAK,aAAe,GACf,KAAK,WACR,KAAK,SAAW,KAAK,aACnBpsD,EACA,GACAosD,EAAU,QACVA,EAAU,UAKd,KAAK,WAAa,GAClB,KAAK,aAAe,GAGpB,KAAK,cAAgB,KAAK,YAAYpsD,EAAOosD,EAAU,MAAM,EAC7D,KAAK,WAAa,KAAK,YAAYpsD,EAAOosD,EAAU,MAAM,EAC1D,KAAK,UAAY,KAAK,aACpBpsD,EACA,GACAosD,EAAU,QACVA,EAAU,SAGZ,KAAK,SAASpsD,CAAK,EACnB,KAAK,QAAQA,CAAK,EACX,GACT,CAEU,WAAWA,EAAgC,CACnD,YAAK,YAAc,KAAK,YAAYA,EAAOosD,EAAU,OAAO,EAC5D,KAAK,QAAU,GAER,oBAAa,KAAK,SAAS,EAClC,KAAK,OAAOpsD,CAAK,EACjB,KAAK,SAASA,CAAK,EACnB,KAAK,IAAIA,CAAK,EACd,KAAK,UAAUA,CAAK,EACpB,KAAK,UAAUA,CAAK,EAEpB,KAAK,WAAa,GAClB,KAAK,aAAe,GACpB,KAAK,UAAY,GAEV,EACT,CAEU,YAAYA,EAAgC,CACpD,YAAK,YAAc,KAAK,YAAYA,EAAOosD,EAAU,MAAM,EAC3D,KAAK,WAAa,KAAK,YAAYpsD,EAAOosD,EAAU,MAAM,EAC1D,KAAK,QAAQpsD,CAAK,EAClB,KAAK,MAAMA,CAAK,EACT,EACT,CAKU,SAASA,EAAgC,CAC5C,+BACH,WACAA,EACA,KAAK,aAAaA,EAAO,GAAOosD,EAAU,QAASA,EAAU,OAAO,GAE/D,EACT,CAGU,QAAQpsD,EAAgC,CAC3C,+BACH,UACAA,EACA,KAAK,aAAaA,EAAO,GAAOosD,EAAU,QAASA,EAAU,OAAO,GAE/D,EACT,CAGU,OAAOpsD,EAAgC,CAC1C,+BACH,SACAA,EACA,KAAK,aAAaA,EAAO,GAAOosD,EAAU,QAASA,EAAU,OAAO,GAE/D,EACT,CAGU,QAAQpsD,EAAgC,CAC3C,sBAAY,OAAO,WAAW,IAAM,CACvC,MAAMstD,EAAyB,CAC7B,EAAG,KAAK,cAAc,EAAI,KAAK,YAAY,EAC3C,EAAG,KAAK,cAAc,EAAI,KAAK,YAAY,GAI7C,GACG,KAAK,cAAc,IAAM,KAAK,YAAY,GACzC,KAAK,cAAc,IAAM,KAAK,YAAY,GAC3CA,EAAa,GAAK,CAAC,KAAK,SAAS,eAChCA,EAAa,GAAK,KAAK,SAAS,eAChCA,EAAa,GAAK,CAAC,KAAK,SAAS,eACjCA,EAAa,GAAK,KAAK,SAAS,cAClC,CACA,KAAK,QAAU,GAET,MAAAC,EADU,KAAK,MACM,KAAK,UAC1BC,EAAyBxtD,EAAqB,cAC/CA,EAAqB,cAAc,OACpC,EACEytD,EAAU,IAAI,MAEpB,QAASx1D,EAAI,EAAGA,EAAIu1D,EAAev1D,IAAK,CAChC,MAAAy1D,EAAY,KAAK,GAAmB,sBAAsB,EAC1DC,EAAQ,CACZ,SAAU,CACR,EAAG,KAAK,SAAS,aACZ3tD,EAAqB,eAAe/H,CAAC,EAAE,MACvC+H,EAAqB,MAC1B,EAAG,KAAK,SAAS,aACZA,EAAqB,eAAe/H,CAAC,EAAE,MACvC+H,EAAqB,KAC5B,EACA,OAAQ,CACN,EAAG,KAAK,SAAS,aACb,KAAK,MACFA,EAAqB,eAAe/H,CAAC,EAAE,OACrCy1D,EAAWA,EAAS,KAAO,IAEhC,KAAK,MACF1tD,EAAqB,OAAS0tD,EAAWA,EAAS,KAAO,EAC5D,EACJ,EAAG,KAAK,SAAS,aACb,KAAK,MACF1tD,EAAqB,eAAe/H,CAAC,EAAE,OACrCy1D,EAAWA,EAAS,IAAM,IAE/B,KAAK,MACF1tD,EAAqB,OAAS0tD,EAAWA,EAAS,IAAM,EAC3D,CACN,GAGFD,EAAQ,KAAKE,CAAK,EAEpB,MAAMtmD,EACJmmD,EAAgB,EAAI,UAAYA,EAAgB,UAE5CH,EAA4B,CAChC,QAAAI,EACA,KAAM,KAAK,IAAI,EACf,SAAAF,CAAA,EAGG,wBAAmBlmD,EAAWrH,EAAOqtD,CAAS,EACrD,EACC,KAAK,SAAS,gBAAgB,EAE1B,EACT,CAGU,UAAUrtD,EAAgC,CAC5C,MAAA4tD,EAAM,KAAK,MACXC,EAAY,OAAO,KAAK,SAAS,GAAKD,EAAM,EAC5CxC,EAAQwC,EAAMC,EAKpB,GAJI,KAAK,cAAgB,IAChB,oBAAa,KAAK,WAAW,EAIpCzC,EAAQ,KAAK,SAAS,mBACtBA,EAAQ,KACR,KAAK,UACLzpD,GAAgB3B,EAAM,MAAwB,IAAM,KAAK,SAAS,MAClE,CACA,KAAK,aAAe,GACb,oBAAa,KAAK,QAAQ,EACjC,MAAM8tD,EAAU,KAAK,aACnB9tD,EACA,GACAosD,EAAU,QACVA,EAAU,SAENiB,EAA4B,CAChC,SAAU,KAAK,SACf,UAAWS,EACX,SAAUA,EAAQ,KAAO,KAAK,SAAS,MAEpC,KAAK,UACH,wBAAmB,YAAa9tD,EAAOqtD,CAAS,EACrD,KAAK,SAAW,MAElB,KAAK,QAAU,GACf,OAAO,WAAW,IAAM,CACtB,KAAK,QAAU,IACd,KAAK,SAAS,iBAAiB,OAElC,KAAK,YAAc,OAAO,WACxB,IAAM,CACJ,KAAK,SAAW,KACT,oBAAa,KAAK,WAAW,CACtC,EACA,KAAK,SAAS,kBACd,CAACrtD,CAAK,GAGV,KAAK,UAAY4tD,CACnB,CAMU,UAAU5tD,EAAgC,CAC7C,cAAW,OAAO,WAAW,IAAM,CACtC,MAAMstD,EAAyB,CAC7B,EAAG,KAAK,cAAc,EAAI,KAAK,YAAY,EAC3C,EAAG,KAAK,cAAc,EAAI,KAAK,YAAY,GAE7C,GACE,CAAC,KAAK,cACN,CAAC,KAAK,UACJ,KAAK,cAAc,IAAM,KAAK,YAAY,GAC1C,KAAK,cAAc,IAAM,KAAK,YAAY,GACzCA,EAAa,GAAK,CAAC,KAAK,SAAS,eAChCA,EAAa,GAAK,KAAK,SAAS,eAChCA,EAAa,GAAK,CAAC,KAAK,SAAS,eACjCA,EAAa,GAAK,KAAK,SAAS,eACpC,CACA,MAAMD,EAAY,KAAK,aACrBrtD,EACA,GACAosD,EAAU,QACVA,EAAU,SAIRiB,EAAU,KAAO,KAAK,UAAY,KAAK,SAAS,kBAC7C,wBAAmB,YAAartD,EAAOqtD,CAAS,EAEzD,EACC,KAAK,SAAS,iBAAiB,CACpC,CAGU,IAAIrtD,EAAgC,CAC5C,MAAMstD,EAAyB,CAC7B,EAAG,KAAK,cAAc,EAAI,KAAK,YAAY,EAC3C,EAAG,KAAK,cAAc,EAAI,KAAK,YAAY,GAG7C,GACE,KAAK,YACL,KAAK,MAAQ,KAAK,UAAY,KAAK,SAAS,mBAC1C,KAAK,cAAc,IAAM,KAAK,YAAY,GAC1C,KAAK,cAAc,IAAM,KAAK,YAAY,GACzCA,EAAa,GAAK,CAAC,KAAK,SAAS,eAChCA,EAAa,GAAK,KAAK,SAAS,eAChCA,EAAa,GAAK,CAAC,KAAK,SAAS,eACjCA,EAAa,GAAK,KAAK,SAAS,eACpC,CACA,MAAME,EAAyBxtD,EAAqB,cAC/CA,EAAqB,cAAc,OACpC,EACEytD,EAAU,IAAI,MAEpB,QAASx1D,EAAI,EAAGA,EAAIu1D,EAAev1D,IAAK,CAChC,MAAAy1D,EAAY,KAAK,GAAmB,sBAAsB,EAC1DC,EAAQ,CACZ,SAAU,CACR,EAAG,KAAK,SAAS,aACZ3tD,EAAqB,eAAe/H,CAAC,EAAE,MACvC+H,EAAqB,MAC1B,EAAG,KAAK,SAAS,aACZA,EAAqB,eAAe/H,CAAC,EAAE,MACvC+H,EAAqB,KAC5B,EACA,OAAQ,CACN,EAAG,KAAK,SAAS,aACb,KAAK,MACFA,EAAqB,eAAe/H,CAAC,EAAE,OACrCy1D,EAAWA,EAAS,KAAO,IAEhC,KAAK,MACF1tD,EAAqB,OAAS0tD,EAAWA,EAAS,KAAO,EAC5D,EACJ,EAAG,KAAK,SAAS,aACb,KAAK,MACF1tD,EAAqB,eAAe/H,CAAC,EAAE,OACrCy1D,EAAWA,EAAS,IAAM,IAE/B,KAAK,MACF1tD,EAAqB,OAAS0tD,EAAWA,EAAS,IAAM,EAC3D,CACN,GAGFD,EAAQ,KAAKE,CAAK,EAGpB,MAAMN,EAAY,CAChB,QAAAI,EACA,KAAM,KAAK,IAAI,GAGXpmD,EAAYmmD,EAAgB,EAAI,MAAQA,EAAgB,MACzD,wBAAmBnmD,EAAWrH,EAAOqtD,CAAS,EAEvD,CAQU,MAAMrtD,EAAgC,CAC9C,MAAM+sD,EAAW,KAAK,YAAY,KAAK,cAAe,KAAK,UAAU,EAErE,GAAIA,GAAY,KAAK,cAAgB,KAAK,UAAW,CACnD,KAAK,cAAc,EAAI,EACvB,KAAK,cAAc,EAAI,EACvB,KAAK,WAAW,EAAI,EACpB,KAAK,WAAW,EAAI,EACpB,KAAK,aAAe,GAEpB,MAAMgB,EAAqB,KAAK,aAC9B/tD,EACA,GACAosD,EAAU,QACVA,EAAU,SAIN4B,EAAU,KAAK,IAAI,KAAK,UAAU,SAAS,EAAID,EAAQ,SAAS,CAAC,EACjEE,EAAU,KAAK,IAAI,KAAK,UAAU,SAAS,EAAIF,EAAQ,SAAS,CAAC,EAEjEV,EAA4B,CAChC,UAAW,KAAK,UAChB,QAAAU,EACA,UAAWhB,EAAS,QAAQ,QAAS,EAAE,EACvC,QAAAiB,EACA,QAAAC,EACA,SAAUF,EAAQ,KAAO,KAAK,UAAU,MAE1C,KAAK,UAAY,GACZ,wBAAmB,QAAS/tD,EAAOqtD,CAAS,EAC5C,wBAAmBN,EAAU/sD,EAAOqtD,CAAS,EAEtD,CAMU,SAASrtD,EAAgC,CACjD,MAAM+tD,EAAqB,KAAK,aAC9B/tD,EACA,GACAosD,EAAU,QACVA,EAAU,SAER,QAAK,WAAa,KAAK,UAAW,CACpC,MAAMW,EAAW,KAAK,YACpB,KAAK,UAAU,SACfgB,EAAQ,UAIJC,EAAU,KAAK,IAAI,KAAK,UAAU,SAAS,EAAID,EAAQ,SAAS,CAAC,EACjEE,EAAU,KAAK,IAAI,KAAK,UAAU,SAAS,EAAIF,EAAQ,SAAS,CAAC,EAEjEV,EAA4B,CAChC,UAAW,KAAK,UAChB,QAAAU,EACA,UAAWhB,EAAS,QAAQ,QAAS,EAAE,EACvC,QAAAiB,EACA,QAAAC,EACA,SAAUF,EAAQ,KAAO,KAAK,UAAU,MAErC,wBAAmB,WAAY/tD,EAAOqtD,CAAS,EAExD,CACF,oFCjxBE,SAAUa,EAAQC,EAAU,CAEMh7C,EAAO,QAEvCA,EAAA,QAAiBg7C,IAGjBD,EAAO,UAAYC,GAGtB,GAAE,OAAO,OAAU,IAAc,OAASC,GAAM,UAAW,CAE5D,SAASC,GAAY,CAAE,CAEvB,IAAIC,EAAQD,EAAU,UAEtB,OAAAC,EAAM,GAAK,SAAUjnD,EAAWm6C,EAAW,CACzC,GAAK,CAACn6C,GAAa,CAACm6C,EAAW,OAAO,KAGtC,IAAIvuC,EAAS,KAAK,QAAU,KAAK,SAAW,GAExCs7C,EAAYt7C,EAAQ5L,CAAS,EAAK4L,EAAQ5L,CAAW,GAAI,GAE7D,OAAMknD,EAAU,SAAU/M,IACxB+M,EAAU,KAAM/M,GAGX,IACT,EAEA8M,EAAM,KAAO,SAAUjnD,EAAWm6C,EAAW,CAC3C,GAAK,CAACn6C,GAAa,CAACm6C,EAAW,OAAO,KAGtC,KAAK,GAAIn6C,EAAWm6C,GAGpB,IAAIgN,EAAa,KAAK,YAAc,KAAK,aAAe,GAEpDC,EAAgBD,EAAYnnD,CAAS,EAAKmnD,EAAYnnD,CAAW,GAAI,GAEzE,OAAAonD,EAAejN,CAAU,EAAG,GAErB,IACT,EAEA8M,EAAM,IAAM,SAAUjnD,EAAWm6C,EAAW,CAC1C,IAAI+M,EAAY,KAAK,SAAW,KAAK,QAASlnD,GAC9C,GAAK,CAACknD,GAAa,CAACA,EAAU,OAAS,OAAO,KAE9C,IAAIzoD,EAAQyoD,EAAU,QAAS/M,CAAQ,EACvC,OAAK17C,GAAS,IACZyoD,EAAU,OAAQzoD,EAAO,GAGpB,IACT,EAEAwoD,EAAM,UAAY,SAAUjnD,EAAWjP,EAAO,CAC5C,IAAIm2D,EAAY,KAAK,SAAW,KAAK,QAASlnD,GAC9C,GAAK,CAACknD,GAAa,CAACA,EAAU,OAAS,OAAO,KAG9CA,EAAYA,EAAU,MAAO,GAC7Bn2D,EAAOA,GAAQ,GAEf,IAAIq2D,EAAgB,KAAK,aAAe,KAAK,YAAapnD,GAE1D,QAAUm6C,KAAY+M,EACPE,GAAiBA,EAAejN,CAAQ,IAInD,KAAK,IAAKn6C,EAAWm6C,GAErB,OAAOiN,EAAejN,IAGxBA,EAAS,MAAO,KAAMppD,GAGxB,OAAO,IACT,EAEAk2D,EAAM,OAAS,UAAW,CACxB,cAAO,KAAK,QACZ,OAAO,KAAK,YACL,IACT,EAEOD,CAEP;;;;iBC7FE,SAAUnjC,EAAQijC,EAAU,CAEMh7C,EAAO,QAEvCA,UAAiBg7C,EAASjjC,EAAQrL,GAAqB,GAGvDqL,EAAO,aAAeijC,EAASjjC,EAAQA,EAAO,SAAS,CAG1D,GAAI,OAAO,OAAW,IAAc,OAASkjC,GAC1C,SAAkBljC,EAAQmjC,EAAY,CAE1C,IAAIK,EAAUxjC,EAAO,QAKrB,SAASyjC,EAAW/1D,EAAM,CAExB,OAAK,MAAM,QAASA,CAAK,EAAUA,EAEjB,OAAOA,GAAO,UAAY,OAAOA,EAAI,QAAU,SAEvC,CAAE,GAAGA,GAGxB,CAAEA,CAAG,CACb,CAUD,SAASg2D,EAAcxuD,EAAMjI,EAAS02D,EAAW,CAE/C,GAAK,EAAG,gBAAgBD,GACtB,OAAO,IAAIA,EAAcxuD,EAAMjI,EAAS02D,CAAQ,EAGlD,IAAIC,EAAY1uD,EAKhB,GAJK,OAAOA,GAAQ,WAClB0uD,EAAY,SAAS,iBAAkB1uD,IAGpC,CAAC0uD,EAAY,CAChBJ,EAAQ,MAAM,gCAAgCI,GAAa1uD,GAAM,EACjE,OAGF,KAAK,SAAWuuD,EAAWG,GAC3B,KAAK,QAAU,GAEV,OAAO32D,GAAW,WACrB02D,EAAW12D,EAEX,OAAO,OAAQ,KAAK,QAASA,CAAO,EAGjC02D,GAAW,KAAK,GAAI,SAAUA,CAAQ,EAE3C,KAAK,UAAS,EAGd,WAAY,KAAK,MAAM,KAAM,IAAM,EACpC,CAEDD,EAAa,UAAY,OAAO,OAAQP,EAAU,SAAS,EAE3DO,EAAa,UAAU,UAAY,UAAW,CAC5C,KAAK,OAAS,GAGd,KAAK,SAAS,QAAS,KAAK,iBAAkB,IAAI,CACpD,EAEA,MAAMG,EAAmB,CAAE,EAAG,EAAG,EAAE,EAKnCH,EAAa,UAAU,iBAAmB,SAAUxuD,EAAO,CAEpDA,EAAK,WAAa,OACrB,KAAK,SAAUA,GAGZ,KAAK,QAAQ,aAAe,IAC/B,KAAK,2BAA4BA,GAKnC,GAAI,CAAE,SAAA4uD,CAAU,EAAG5uD,EACnB,GAAK,CAAC4uD,GAAY,CAACD,EAAiB,SAAUC,CAAU,EAAG,OAE3D,IAAIC,EAAY7uD,EAAK,iBAAiB,KAAK,EAE3C,QAAUqnC,KAAOwnB,EACf,KAAK,SAAUxnB,GAIjB,GAAK,OAAO,KAAK,QAAQ,YAAc,SAAW,CAChD,IAAI1zB,EAAW3T,EAAK,iBAAkB,KAAK,QAAQ,YACnD,QAAU0Q,KAASiD,EACjB,KAAK,2BAA4BjD,GAGvC,EAEA,MAAMo+C,EAAQ,0BAEdN,EAAa,UAAU,2BAA6B,SAAUxuD,EAAO,CACnE,IAAIuoB,EAAQ,iBAAkBvoB,GAE9B,GAAK,CAACuoB,EAAQ,OAGd,IAAIra,EAAU4gD,EAAM,KAAMvmC,EAAM,eAAe,EAC/C,KAAQra,IAAY,MAAO,CACzB,IAAI7K,EAAM6K,GAAWA,EAAQ,CAAC,EACzB7K,GACH,KAAK,cAAeA,EAAKrD,GAE3BkO,EAAU4gD,EAAM,KAAMvmC,EAAM,eAAe,EAE/C,EAKAimC,EAAa,UAAU,SAAW,SAAUnnB,EAAM,CAChD,IAAI0nB,EAAe,IAAIC,EAAc3nB,GACrC,KAAK,OAAO,KAAM0nB,EACpB,EAEAP,EAAa,UAAU,cAAgB,SAAUnrD,EAAKrD,EAAO,CAC3D,IAAIivD,EAAa,IAAIC,EAAY7rD,EAAKrD,CAAI,EAC1C,KAAK,OAAO,KAAMivD,EACpB,EAEAT,EAAa,UAAU,MAAQ,UAAW,CAIxC,GAHA,KAAK,gBAAkB,EACvB,KAAK,aAAe,GAEf,CAAC,KAAK,OAAO,OAAS,CACzB,KAAK,SAAQ,EACb,OAIF,IAAIW,EAAa,CAAEC,EAAOpvD,EAAMk+C,IAAa,CAE3C,WAAY,IAAM,CAChB,KAAK,SAAUkR,EAAOpvD,EAAMk+C,CAAO,CACzC,EACA,EAEE,KAAK,OAAO,QAAS,SAAU6Q,EAAe,CAC5CA,EAAa,KAAM,WAAYI,GAC/BJ,EAAa,MAAK,CACtB,EACA,EAEAP,EAAa,UAAU,SAAW,SAAUY,EAAOpvD,EAAMk+C,EAAU,CACjE,KAAK,kBACL,KAAK,aAAe,KAAK,cAAgB,CAACkR,EAAM,SAEhD,KAAK,UAAW,WAAY,CAAE,KAAMA,EAAOpvD,CAAI,GAG1C,KAAK,kBAAoB,KAAK,OAAO,QACxC,KAAK,SAAQ,EAGV,KAAK,QAAQ,OAASsuD,GACzBA,EAAQ,IAAK,aAAapQ,IAAWkR,EAAOpvD,EAEhD,EAEAwuD,EAAa,UAAU,SAAW,UAAW,CAC3C,IAAIvnD,EAAY,KAAK,aAAe,OAAS,OAC7C,KAAK,WAAa,GAClB,KAAK,UAAWA,EAAW,CAAE,IAAM,GACnC,KAAK,UAAW,SAAU,CAAE,IAAM,EACpC,EAIA,SAAS+nD,EAAc3nB,EAAM,CAC3B,KAAK,IAAMA,CACZ,CAED2nB,EAAa,UAAY,OAAO,OAAQf,EAAU,SAAS,EAE3De,EAAa,UAAU,MAAQ,UAAW,CAIxC,GADiB,KAAK,qBACJ,CAEhB,KAAK,QAAS,KAAK,IAAI,eAAiB,EAAG,gBAC3C,OAIF,MAAMvuD,EAAM,KAAK,IAAI,YAAc,KAAK,IAAI,IACtCA,IAKN,KAAK,WAAa,IAAI,MAEjB,KAAK,IAAI,cACZ,KAAK,WAAW,YAAc,KAAK,IAAI,aAEzC,KAAK,WAAW,iBAAkB,OAAQ,IAAI,EAC9C,KAAK,WAAW,iBAAkB,QAAS,IAAI,EAE/C,KAAK,IAAI,iBAAkB,OAAQ,IAAI,EACvC,KAAK,IAAI,iBAAkB,QAAS,IAAI,EACxC,KAAK,WAAW,IAAMA,EACxB,EAEAuuD,EAAa,UAAU,mBAAqB,UAAW,CAGrD,OAAO,KAAK,IAAI,UAAY,KAAK,IAAI,YACvC,EAEAA,EAAa,UAAU,QAAU,SAAUK,EAAUnR,EAAU,CAC7D,KAAK,SAAWmR,EAChB,GAAI,CAAE,WAAAC,CAAU,EAAK,KAAK,IAEtBtvD,EAAOsvD,EAAW,WAAa,UAAYA,EAAa,KAAK,IACjE,KAAK,UAAW,WAAY,CAAE,KAAMtvD,EAAMk+C,CAAO,EACnD,EAKA8Q,EAAa,UAAU,YAAc,SAAUpvD,EAAQ,CACrD,IAAIsJ,EAAS,KAAOtJ,EAAM,KACrB,KAAMsJ,IACT,KAAMA,GAAUtJ,EAEpB,EAEAovD,EAAa,UAAU,OAAS,UAAW,CACzC,KAAK,QAAS,GAAM,UACpB,KAAK,aAAY,CACnB,EAEAA,EAAa,UAAU,QAAU,UAAW,CAC1C,KAAK,QAAS,GAAO,WACrB,KAAK,aAAY,CACnB,EAEAA,EAAa,UAAU,aAAe,UAAW,CAC/C,KAAK,WAAW,oBAAqB,OAAQ,IAAI,EACjD,KAAK,WAAW,oBAAqB,QAAS,IAAI,EAClD,KAAK,IAAI,oBAAqB,OAAQ,IAAI,EAC1C,KAAK,IAAI,oBAAqB,QAAS,IAAI,CAC7C,EAIA,SAASE,EAAY7rD,EAAK3F,EAAU,CAClC,KAAK,IAAM2F,EACX,KAAK,QAAU3F,EACf,KAAK,IAAM,IAAI,KAChB,CAGD,OAAAwxD,EAAW,UAAY,OAAO,OAAQF,EAAa,SAAS,EAE5DE,EAAW,UAAU,MAAQ,UAAW,CACtC,KAAK,IAAI,iBAAkB,OAAQ,IAAI,EACvC,KAAK,IAAI,iBAAkB,QAAS,IAAI,EACxC,KAAK,IAAI,IAAM,KAAK,IAEH,KAAK,uBAEpB,KAAK,QAAS,KAAK,IAAI,eAAiB,EAAG,gBAC3C,KAAK,aAAY,EAErB,EAEAA,EAAW,UAAU,aAAe,UAAW,CAC7C,KAAK,IAAI,oBAAqB,OAAQ,IAAI,EAC1C,KAAK,IAAI,oBAAqB,QAAS,IAAI,CAC7C,EAEAA,EAAW,UAAU,QAAU,SAAUG,EAAUnR,EAAU,CAC3D,KAAK,SAAWmR,EAChB,KAAK,UAAW,WAAY,CAAE,KAAM,KAAK,QAASnR,CAAO,EAC3D,EAEOsQ,CAEP,SC1SO,MAAMe,GAAN,cAAkC56C,CAAU,CAyEjD,aAAc,CACN,QA7DEzP,EAAA,sBAEAA,EAAA,gBAAW,IAEdA,EAAA,cAAS,IAENA,EAAA,YAEAA,EAAA,aAA4B,IAAIgnD,GAAmB,IAAI,GAmB1DhnD,EAAA,eAEGA,EAAA,oBAAe,IAAIkC,EAAgB,MAAM,GAE5ClC,EAAA,gBAAqC,CAE1C,kBAAmB,OACnB,MAAO,SACP,SAAU,SACV,GAAI,OACJ,MAAO,QAGP,SAAU,OACV,KAAM,UACN,SAAU,GACV,SAAU,GACV,uBAAwB,GACxB,6BAA8B,CAAC,EAC/B,6BAA8B,CAAC,EAC/B,aAAc,GACd,0BAA2B,GAG3B,KAAM,KAAK,KACX,KAAM,KAAK,KACX,OAAQ,KAAK,SAGRA,EAAA,aAAkC,CACvC,GAAG,KAAK,WAsHAA,EAAA,eAAU,KAAK,SAAS,KAAK,IAAI,GAuHjCA,EAAA,4BAAuB7L,GAC/B,KAAK,sBAAsB,KAAK,IAAI,IAzO/B,SAAMktB,GAAW,eAEtB,KAAK,qBAAuB,KAAK,qBAAqB,KAAK,IAAI,CACjE,CAvDA,WAAW,oBAAmD,CACrD,OACL,KACA,qBACA,WACA,OACA,QACA,YACA,YACA,mCACA,mCACA,6BACA,iBACA,+BAEJ,CA0CO,SAASpe,EAAqB,CAC9B,WAAM,SAAW,KAAK,MAAM,MACjC,KAAK,MAAM,MAAQA,EACnB,KAAK,cAAc,CACrB,CAEO,UAAW,CAChB,OAAO,KAAK,MAAM,KACpB,CAEO,aAAc,CAGZ,MADL,GAAG,KAAK,MAAM,QAAQ,KAAK,MAAM,UAErC,CAEO,MAAO,CACZ,KAAK,SAAS,QAAQ,CACxB,CAEO,MAAO,CACN,MAAAA,EAAQ,KAAK,cACnB,KAAK,SAASA,CAAK,CACrB,CAEO,QAAS,CACd,KAAK,MAAM,iBAAmB,KAAK,MAAM,KAAK,EAC1C,KAAK,MAAM,QAAU,SACvB,KAAK,KAAK,EAEV,KAAK,KAAK,EAEZ,KAAK,MAAM,kBAAoB,KAAK,MAAM,KAAK,CACjD,CAEU,iBAAiBqnD,EAAW,SAAS,KAAM,CACnDA,EAAS,MAAM,SAAW,QAC5B,CAEU,eAAeA,EAAW,SAAS,KAAM,CAC7CA,EAAS,MAAM,WAAa,WAC9BA,EAAS,MAAM,SAAW,GAE9B,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKD,GAAoB,kBAAkB,EAC3C,mBAAgB,OAAO,iBAAiB,IAAI,EACjD,KAAK,kBAAkB,EAEvB,KAAK,qBAAqB,CAC5B,CAEU,cAAgD,CACxD,KAAK,qBAAqB,CAC5B,CAEU,mBAAoB,CAIvB,sBAAiB,QAAgB,KAAK,OAAO,EAClD,KAAK,IAAI,OAAO,GAAG,qBAAsB,KAAK,aAAc,IAAI,CAClE,CAEU,sBAAuB,CpS5J5B,IAAAzxD,EAAA4B,GoS6JH5B,EAAA,KAAK,SAAL,MAAAA,EAAa,IAAI0nB,EAAc,WAAW,KAAM,KAAK,aAAc,OACnE9lB,EAAA,KAAK,SAAL,MAAAA,EAAa,IAAI8lB,EAAc,WAAW,OAAQ,KAAK,OAAQ,MAC/D,KAAK,aAAa,IAAI,eAAgB,KAAK,qBAAsB,IAAI,EAErE,KAAK,IAAI,OAAO,IAAI,qBAAsB,KAAK,aAAc,IAAI,CACnE,CAEU,iCAAkC,CACtC,KAAK,SACP,KAAK,OAAO,IAAIA,EAAc,WAAW,OAAQ,KAAK,OAAQ,IAAI,EAClE,KAAK,OAAO,IAAIA,EAAc,WAAW,KAAM,KAAK,aAAc,IAAI,GAExE,MAAM1e,EAAY0e,EAAc,SAAW,KAAK,MAAM,GACjD,WAAM,wCAAwC1e,GAAW,EACzD,YAAS,IAAIM,EAAgBN,CAAS,EAC3C,KAAK,OAAO,GAAG0e,EAAc,WAAW,OAAQ,KAAK,OAAQ,IAAI,EACjE,KAAK,OAAO,GAAGA,EAAc,WAAW,KAAM,KAAK,aAAc,IAAI,CACvE,CAEU,2BAA4B,CAChC,KAAK,MAAM,wBACb,KAAK,aAAa,GAAG,eAAgB,KAAK,qBAAsB,IAAI,CAExE,CAEU,SAAS5lB,EAAoC,CAChD,KAAK,MAAM,eAGZ,KAAK,MAAM,QAAU,aAAe,KAAK,MAAM,QAAU,eAGzD,KAAK,MAAM,WAAa,QAAUA,EAAM,OAAO,YAAc,QAC/D,KAAK,KAAK,EAGR,KAAK,MAAM,WAAa,SAAWA,EAAM,OAAO,YAAc,SAChE,KAAK,KAAK,GAEd,CAIU,UAAW,CACnB,MAAM6vD,EAAa,KAAK,MAAM,WAAa,OAAS,QAAU,OACzD,WAAM,UAAY,cAAcA,KAChC,WAAQ,KAAK,MAAM,MACnB,wBAAmB,KAAK,MAAM,KAAK,EACpC,KAAK,MAAM,2BACb,KAAK,eAAe,CAExB,CAEU,OAAOtnD,EAAqB,CACpC,KAAK,MAAM,UAAY,gBAClB,WAAM,MAAQ,KAAK,MAAM,MACzB,WAAQ,KAAK,MAAM,MACxB,KAAK,mBAAmBA,CAAK,EACzB,KAAK,MAAM,2BACb,KAAK,eAAe,CAExB,CAEU,OAAOA,EAAqB,CACpC,KAAK,MAAM,UAAY,gBAClB,WAAM,MAAQ,KAAK,MAAM,MACzB,WAAQ,KAAK,MAAM,MACxB,KAAK,mBAAmBA,CAAK,EACzB,KAAK,MAAM,2BACb,KAAK,eAAe,CAExB,CAEU,UAAUA,EAAqB,CACvC,KAAK,MAAM,UAAY,gBAClB,WAAQ,KAAK,MAAM,MACxB,KAAK,mBAAmBA,CAAK,EACzB,KAAK,MAAM,2BACb,KAAK,iBAAiB,CAE1B,CAEU,cAAe,CpS/OpB,IAAArK,GoSiPHA,EAAA,KAAK,SAAL,MAAAA,EAAa,QAAQ,QAAS,KAAK,MAAM,MAC3C,CAEU,eAAgB,CAChB,YAAK,MAAM,MAAO,CACxB,IAAK,YACL,IAAK,aACE,YAAO,KAAK,MAAM,KAAK,EAC5B,MACF,IAAK,eACL,IAAK,gBACE,eAAU,KAAK,MAAM,KAAK,EAC/B,MACF,IAAK,YACL,IAAK,aACE,YAAO,KAAK,MAAM,KAAK,EAC5B,MACF,QACE,KAAK,SAAS,EACd,KACJ,CAEA,KAAK,UAAU,OAAO,GAAGyxD,GAAoB,MAAM,EACnD,KAAK,UAAU,IAAI,KAAK,MAAM,KAAK,EAE/B,KAAK,QACP,KAAK,OAAO,QAAQ/pC,EAAc,WAAW,QAAS,KAAK,MAAM,KAAK,EAEnE,mBACH,IAAI,YAAYA,EAAc,WAAW,QAAS,CAChD,OAAQ,KAAK,MAAM,MACpB,EAEL,CAEA,IAAc,OAAQ,CACpB,OAAI,KAAK,MAAM,QAAU,KAAK,SAAS,MAC9B,KAAK,YAAc,KAErB,KAAK,MAAM,KACpB,CAEA,IAAc,MAAMoE,EAAe,CACjC,KAAK,MAAM,MAAQA,EACnB,KAAK,MAAM,MAAQA,CACrB,CAEU,uBAAwB,CAChC,GACE,KAAK,MAAM,6BAA6B,SAAS,OAAO,SAAS,QAAQ,EAEzE,OAAO,KAAK,OAEd,GACE,KAAK,MAAM,6BAA6B,SAAS,OAAO,SAAS,QAAQ,EAEzE,OAAO,KAAK,OAEV,QAAK,MAAM,SACb,OAAO,KAAK,OAEV,QAAK,MAAM,SACb,OAAO,KAAK,MAEhB,CAKU,uBAAwB,CAChC,KAAK,sBAAsB,CAC7B,CASU,eAAgB,CACjB,YAAK,MAAM,kBACd,SAAS,iBACP,KAAK,MAAM,iBAEb,QACN,CAEU,eAAezhB,EAAqB,CAC5C,KAAK,mBAAmBA,CAAK,CAC/B,CAEU,mBAAmBA,EAAqB,CAChD,MAAMunD,EAE0B,KAAK,cAAc,GAAK,GAExD,GAAIA,EACF,QAAS73D,EAAI,EAAGA,EAAI63D,EAAW,OAAQ73D,IAAK,CACpC,MAAA8P,EAAY+nD,EAAW73D,CAAC,EACzB,uBAAkB8P,EAAWQ,CAAK,EAG7C,CAQU,kBACRR,EACAQ,EACA,CACA,MAAMwnD,EAAYhoD,EAAU,MAC5B,GAAIQ,EAAO,CACT,MAAMyhB,EAAQ,KAAK,MACbgmC,EAAW,OAAO,iBAAiBjoD,CAAS,EAElD,GAAI,KAAK,MAAM,OAAS,QAAUQ,EAAM,WAAW,UAAU,EAC3D,OAAQynD,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,KAAO,IACjBA,EAAU,MAAQ,IAClB,MACF,QACEA,EAAU,WAAa,IACvBA,EAAU,YAAc,IACxB,KACJ,CAGF,OAAQxnD,EAAO,CACb,IAAK,YACH,OAAQynD,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,KAAO/lC,EACjB,MACF,QACE+lC,EAAU,WAAa/lC,EACvB,KACJ,CACA,MACF,IAAK,aACH,OAAQgmC,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,MAAQ/lC,EAClB,MACF,QACE+lC,EAAU,YAAc/lC,EACxB,KACJ,CACA,MACF,IAAK,YACH,OAAQgmC,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,KAAO/lC,EACjB+lC,EAAU,MAAQ,IAAI/lC,IACtB,MACF,QACE+lC,EAAU,WAAa/lC,EACvB+lC,EAAU,YAAc,IAAI/lC,IAC5B,KACJ,CACA,MACF,IAAK,aACH,OAAQgmC,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,MAAQ/lC,EAClB+lC,EAAU,KAAO,IAAI/lC,IACrB,MACF,QACE+lC,EAAU,YAAc/lC,EACxB+lC,EAAU,WAAa,IAAI/lC,IAC3B,KACJ,CACA,MACF,IAAK,SACK,YAAK,MAAM,SAAU,CAC3B,IAAK,YACH,OAAQgmC,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,KAAO,IACjB,MACF,QACEA,EAAU,WAAa,IACvB,KACJ,CACA,MACF,IAAK,aACH,OAAQC,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,MAAQ,IAClB,MACF,QACEA,EAAU,YAAc,IACxB,KACJ,CACA,MACF,IAAK,YACH,OAAQC,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,KAAO,IACjBA,EAAU,MAAQ,IAClB,MACF,QACEA,EAAU,YAAc,IACxBA,EAAU,WAAa,IACvB,KACJ,CACA,MACF,IAAK,aACH,OAAQC,EAAS,SAAU,CACzB,IAAK,QACL,IAAK,WACHD,EAAU,MAAQ,IAClBA,EAAU,KAAO,IACjB,MACF,QACEA,EAAU,YAAc,IACxBA,EAAU,WAAa,IACvB,KACJ,CACA,KAGJ,CAIJ,EAEFhoD,EAAU,MAAM,WAAa,KAAK,cAC9B,KAAK,cAAc,WACnB,EACN,CAEA,MAAgB,YAAa,CAC3B,aAAM,MAAM,aACP,WAAM,SAAW,KAAK,YAAY,EACvC,KAAK,0BAA0B,EACxB,KAAK,sBACd,CAEA,MAAgB,WAAY,CAC1B,KAAK,qBAAqB,EAC1B,MAAM,MAAM,WACd,CAEU,oBAA+B,CACvC,MAAO,CAAC,IAAI,CACd,CAEU,+BACRvK,EACAE,EACAD,EACAyJ,EACA,CAYA,OAXM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAIE1J,IAAkB,MACpB,KAAK,gCAAgC,EAE/BA,EAAe,CACrB,IAAK,oBACE,oBAAe,KAAK,MAAM,KAAK,EACpC,MACF,IAAK,KACH,KAAK,gCAAgC,EACrC,MACF,IAAK,QACH,KAAK,MAAQC,EACf,IAAK,OACH,KAAK,cAAc,EACd,oBAAe,KAAK,MAAM,KAAK,EACpC,MACF,IAAK,WACL,IAAK,WACH,KAAK,sBAAsB,EAC3B,KAGJ,CACF,CAGU,sBAAuB,CAC/B,MAAM,qBAAqB,EAC3B,KAAK,qBAAqB,CAC5B,CAEU,UAAyC,CAC7C,OAACQ,EAAkB,IAAI,GACjB,aACN,qHAGG,IACT,CACF,EAliBO,IAAMgyD,GAANN,GACLrqD,EADW2qD,GACG,UAAU,eAExB3qD,EAHW2qD,GAGG,SAAS,CACrB,SACA,YACA,aACA,eACA,gBACA,YACA,eCxBJ,MAAeC,GAAA;AAAA;AAAA;AAAA,ECAAC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAAC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAAC,GAAA,wFC0BTC,GAA2B,iBAE3BC,GAAkB,GAAGD,YAEdE,GAAN,cAAoC17C,EAAmB,CAgJ5D,aAAc,CACN,QAhJExP,EAAA,uBACAA,EAAA,YA4CAA,EAAA,oBAA2C,CAEnD,eAAgB,EAChB,SAAU,GACV,iBAAkB,gBAClB,aAAc,GACd,OAAQ,GACR,WAAY,GACZ,mBAAoB,gBACpB,MAAO,GACP,KAAM,GACN,YAAa,GACb,SAAU,GACV,iBAAkB,EAClB,iBAAkB,GAClB,mBAAoB,GACpB,mBAAoB,GACpB,uBAAwB,GACxB,yBAA0B,GAC1B,MAAO,aACP,SAAU,GAGV,KAAM,KAAK,KAAK,KAAK,IAAI,EACzB,KAAM,KAAK,KAAK,KAAK,IAAI,EACzB,KAAM,KAAK,KAAK,KAAK,IAAI,EACzB,kBAAmB,KAAK,kBAAkB,KAAK,IAAI,EACnD,mBAAoB,KAAK,mBAAmB,KAAK,IAAI,EAGrD,MAAO,OAGP,sBAAuB,GACvB,wBAAyB,GACzB,cAAe,EACf,iBAAkB,EAClB,UAAW,GACX,UAAW,GACX,YAAa,IAKLA,EAAA,0BAAqB,CAC7B,CACE,KAAM,QACN,SAAU,EACZ,EACA,CACE,KAAM,SACN,SAAU,EACZ,EACA,CACE,KAAM,OACN,SAAU,EACZ,EACA,CACE,KAAM,SACN,KAAM,UACN,SAAU,EACZ,EACA,CACE,KAAM,QACN,KAAM,SACN,SAAU,EACZ,EACA,CACE,KAAM,MACN,KAAM,SACN,SAAU,EACZ,IAGQA,EAAA,gBAAW,IAEXA,EAAA,0BAEAA,EAAA,kCAEAA,EAAA,4BAEAA,EAAA,wBAAmB6qD,IAEnB7qD,EAAA,0BAAqB8qD,IAErB9qD,EAAA,6BAAuC,MAEvCA,EAAA,uCAAiD,MAEjDA,EAAA,mBAA6B,MAE7BA,EAAA,oBAAe,IAAIkC,EAAgB,MAAM,GAE5ClC,EAAA,aAAoC,CACzC,GAAG,KAAK,eA0KAA,EAAA,qBAAgB7L,GAAS,KAAK,eAAe,KAAK,IAAI,CAAC,GAavD6L,EAAA,gBAAW7L,GAAS,KAAK,UAAU,KAAK,IAAI,CAAC,GA+B7C6L,EAAA,iBAAYzL,GAAS,KAAK,WAAW,KAAK,IAAI,CAAC,GAQ/CyL,EAAA,cAASzL,GAAS,KAAK,QAAQ,KAAK,IAAI,EAAG,GAAG,GAzNjD,SAAM8sB,GAAW,eAGtB,KAAK,cAAgB,KAAK,cAAc,KAAK,IAAI,EACjD,KAAK,oBAAsB,KAAK,oBAAoB,KAAK,IAAI,EAC7D,KAAK,SAAW,KAAK,SAAS,KAAK,IAAI,EACvC,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAC7C,KAAK,UAAY,KAAK,UAAU,KAAK,IAAI,EACzC,KAAK,WAAa,KAAK,WAAW,KAAK,IAAI,CAC7C,CAvJA,IAAc,gBAAiB,CACtB,YAAK,cAA2B2pC,EAAwB,CACjE,CAEA,IAAc,eAAgB,CACrB,YAAK,iBAA8BC,EAAe,CAC3D,CAEA,IAAc,kBAAmB,CAC/B,OAAO,KAAK,iBACV,mDAEJ,CAEA,IAAc,mBAAoB,CACzB,YAAK,cAAc,uBAAuB,CACnD,CAEA,WAAW,oBAAqD,CACvD,OACL,QACA,mBACA,WACA,oBACA,OACA,WACA,oBACA,oBACA,wBACA,wBACA,8BACA,4BACA,QACA,iBACA,SACA,aACA,sBACA,QACA,WAEJ,CAoHO,MAAO,CACZ,KAAK,kBAAkB,CACzB,CAKO,MAAO,CACZ,KAAK,kBAAkB,CACzB,CAMO,KAAKzqD,EAAe,CzSzMtB,IAAA5H,EyS0MH,GACE4H,EAAQ,GACR,GAAC5H,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAmB4H,KACpB,CAAC,KAAK,cAAcA,CAAK,GACzB,CAAC,KAAK,eACN,CACA,KAAK,MAAM,IAAI,MAAM,8BAA8BA,GAAO,CAAC,EAC3D,QAAQ,MAAM,QAAS,KAAK,MAAM,KAAK,EAC/B,cAAM,qBAAsB,KAAK,aAAa,EAC9C,cAAM,sBAAuB,KAAK,cAAc,EACxD,OAEF,KAAK,kBAAkB,EAElB,KAAK,cAAcA,CAAK,GAG3BlH,GACE,KAAK,cAAckH,CAAK,EACxB,EACA,KAAK,eACL,KAAK,MAAM,OAEb,KAAK,eAAeA,CAAK,GARzB,KAAK,MAAM,IAAI,MAAM,6BAA6BA,eAAmB,CAAC,CAU1E,CAEO,aAAa2qD,EAAuB,CACrC,IAAAlgD,EAAYkgD,EAAgB,KAAK,MAAM,eAEvC,GAAAlgD,GAAa,KAAK,cAAc,OAAQ,CACtC,IAAC,KAAK,MAAM,SACP,YAAK,cAAc,OAAS,EAEzBA,IAAY,KAAK,cAAc,OAGtC,OAAAA,CACT,CAEO,aAAakgD,EAAuB,CACrC,IAAAC,EAAYD,EAAgB,KAAK,MAAM,eAE3C,GAAIC,EAAY,EAAG,CACb,IAAC,KAAK,MAAM,SACP,SAETA,EAAY,KAAK,cAAc,OAAS,GAAKA,EAAY,GAEpD,OAAAA,CACT,CAEO,sBAAuB,CAC5B,KAAK,kBAAkB,EACjB,MAAAC,EAAe,KAAK,4BACnB,YAAK,KAAKA,CAAY,CAC/B,CAEU,mBAAoB,CAC5B,KAAK,kBAAkB,EACjB,MAAAF,EAAgB,KAAK,4BACrBlgD,EAAY,KAAK,aAAakgD,CAAa,EAE1C,YAAK,KAAKlgD,CAAS,CAC5B,CAEU,mBAAoB,CAC5B,KAAK,kBAAkB,EACjB,MAAAkgD,EAAgB,KAAK,4BACrBC,EAAY,KAAK,aAAaD,CAAa,EAC1C,YAAK,KAAKC,CAAS,CAC5B,CAEU,aAAc,CACtB,KAAK,WAAW,CAClB,CAEU,YAAa,CACjB,KAAK,MAAM,SACb,KAAK,eAAe,EAEpB,KAAK,gBAAgB,EAEnB,KAAK,MAAM,KACb,KAAK,wBAAwB,EAE7B,KAAK,yBAAyB,EAE5B,KAAK,MAAM,YACb,KAAK,kBAAkB,EAEvB,KAAK,mBAAmB,EAE1B,KAAK,mBAAmB,EACxB,KAAK,qBAAqB,CAC5B,CAEU,oBAAqB,CzS3S1B,IAAAxyD,EyS4SG,MAAA2B,GAAW3B,EAAA,KAAK,MAAM,mBAAX,YAAAA,EAA6B,MAC5C,KAEE,KAAK,MAAM,UAAY2B,EAAS,SAAW,EAC7C,KAAK,MAAM,sBAAwB,WAAWA,EAAS,CAAC,aAAaA,EAAS,CAAC,IAE/E,KAAK,MAAM,sBAAwB,EAEvC,CAEU,sBAAuB,CzStT5B,IAAA3B,EySuTG,MAAA0yD,GAAY1yD,EAAA,KAAK,MAAM,qBAAX,YAAAA,EAA+B,MAC/C,KAEE,KAAK,MAAM,YAAc0yD,EAAU,SAAW,EAChD,KAAK,MAAM,wBAA0B,cAAcA,EAAU,CAAC,gBAAgBA,EAAU,CAAC,IAEzF,KAAK,MAAM,wBAA0B,EAEzC,CAEU,gBAAiB,CzSjUtB,IAAA1yD,EAAA4B,EySmUC,GADJ,KAAK,MAAM,eAAe,EACtB,KAAC5B,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SAAU,GAAC4B,EAAA,KAAK,gBAAL,MAAAA,EAAoB,SAGlD,IACF,KAAK,kBAAkB,EACjB,MAAAgG,EAAQ,KAAK,yBACf,KAAK,MAAM,QACb,KAAK,KAAKA,CAAK,QAEVpM,GACP,KAAK,MAAMA,CAAK,CAClB,CACF,CAIU,oBAAoBsG,EAAoB,CzSnV7C,IAAA9B,EAAA4B,EySoVCE,EAAM,OAAO,WACf9B,EAAA,KAAK,oBAAL,MAAAA,EAAwB,kBACxB4B,EAAA,KAAK,4BAAL,MAAAA,EAAgC,SAEpC,CAEU,WAAY,CAEtB,CAIU,aAAc,CzShWnB,IAAA5B,EySiWH,IAAKA,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,OAGnB,IACF,KAAK,kBAAkB,EACvB,KAAK,uBAAuB,EACxB,KAAK,MAAM,QACb,KAAK,qBAAqB,QAErBxE,GACP,KAAK,MAAMA,CAAK,CAClB,CACF,CAEU,WAAY,CAChB,KAAK,MAAM,eACb,KAAK,MAAM,MAAQ,GAEvB,CAEU,YAAa,CACrB,KAAK,OAAO,CACd,CAEU,YAAa,CAEvB,CAIU,SAAU,CAClB,KAAK,kBAAkB,EACvB,KAAK,MAAM,MAAQ,EACrB,CAKU,mBAAoB,CzSvYzB,IAAAwE,EySyYC,GAACA,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SAAU,KAAK,eACpC,KAAK,iBAAiB,EAExB,MAAM,kBAAkB,EACnB,UAAKsyD,GAAsB,kBAAkB,EAClD,KAAK,kBAAkB,CACzB,CAEU,mBAAoB,CzSjZzB,IAAAtyD,EAAA4B,EAAA+wD,EySkZH,KAAK,aAAa,GAAG,eAAgB,KAAK,aAAa,EAGnD,OAAO,iBACT,KAAK,eAAiB,IAAI,OAAO,eAAe,KAAK,aAAa,GAC7D3yD,EAAA,4BAAAA,EAAgB,QAAQ,OAI/B,OAAO,iBAAiB,SAAU,KAAK,cAAe,CAAE,QAAS,GAAM,EAGlE,sBACH,qBACA,KAAK,sBAGP4B,EAAA,KAAK,iBAAL,MAAAA,EAAqB,iBAAiB,SAAU,KAAK,SAAU,CAC7D,QAAS,MAEX+wD,EAAA,KAAK,iBAAL,MAAAA,EAAqB,iBAAiB,cAAe,KAAK,YAAa,CACrE,QAAS,KAGX,KAAK,iBAAiB,aAAc,KAAK,UAAW,CAAE,QAAS,GAAM,EACrE,KAAK,iBAAiB,YAAa,KAAK,UAAW,CAAE,QAAS,GAAM,EACpE,KAAK,iBAAiB,UAAW,KAAK,UAAW,CAAE,QAAS,GAAM,EAClE,KAAK,iBAAiB,aAAc,KAAK,UAAW,CAAE,QAAS,GAAM,EAErE,KAAK,iBAAiB,aAAc,KAAK,WAAY,CAAE,QAAS,GAAM,EACtE,KAAK,iBAAiB,WAAY,KAAK,WAAY,CAAE,QAAS,GAAM,EAEpE,KAAK,iBAAiB,UAAW,KAAK,UAAW,CAAE,QAAS,GAAM,EAClE,KAAK,iBAAiB,WAAY,KAAK,UAAW,CAAE,QAAS,GAAM,EACnE,KAAK,iBAAiB,SAAU,KAAK,UAAW,CAAE,QAAS,GAAM,EACjE,KAAK,iBAAiB,YAAa,KAAK,UAAW,CAAE,QAAS,GAAM,EAEpE,KAAK,iBAAiB,cAAe,KAAK,UAAW,CAAE,QAAS,GAAM,CACxE,CAEU,sBAAuB,CzS1b5B,IAAA3yD,EAAA4B,EAAA+wD,EyS2bH,KAAK,aAAa,IAAI,eAAgB,KAAK,cAAe,IAAI,EAEvD,2BAAoB,SAAU,KAAK,aAAa,GAElD3yD,EAAA,4BAAAA,EAAgB,UAAU,MAE/B,KAAK,IAAI,OAAO,IAAI,qBAAsB,KAAK,cAAe,IAAI,EAE7D,yBACH,qBACA,KAAK,sBAGP4B,EAAA,KAAK,iBAAL,MAAAA,EAAqB,oBAAoB,SAAU,KAAK,WACxD+wD,EAAA,KAAK,iBAAL,MAAAA,EAAqB,oBAAoB,cAAe,KAAK,aAExD,yBAAoB,aAAc,KAAK,SAAS,EAChD,yBAAoB,YAAa,KAAK,SAAS,EAC/C,yBAAoB,UAAW,KAAK,SAAS,EAC7C,yBAAoB,aAAc,KAAK,SAAS,EAEhD,yBAAoB,aAAc,KAAK,UAAU,EACjD,yBAAoB,WAAY,KAAK,UAAU,EAE/C,yBAAoB,UAAW,KAAK,SAAS,EAC7C,yBAAoB,WAAY,KAAK,SAAS,EAC9C,yBAAoB,SAAU,KAAK,SAAS,EAC5C,yBAAoB,YAAa,KAAK,SAAS,EAE/C,yBAAoB,cAAe,KAAK,SAAS,CACxD,CAEU,SAAU,CAClB,KAAK,mBAAmB,EACxB,KAAK,YAAY,EACjB,KAAK,kBAAkB,EAEvB,KAAK,cAAc,EACnB,KAAK,YAAY,CACnB,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,cAAc,CACrB,CAEA,MAAgB,WAAY,CAC1B,KAAK,QAAQ,EACb,MAAM,MAAM,WACd,CAEU,oBAAqB,CACzB,IAAC,KAAK,eAAgB,CACxB,KAAK,MAAM,IAAI,MAAM,6BAA6B,CAAC,EACnD,OAGF,KAAK,oBAAsB,IAAI7E,GAAoB,KAAK,cAAc,CACxE,CAEU,yBAA0B,CAC9B,IAAC,KAAK,kBAAmB,CACvB,IAAC,KAAK,eACR,OAEI,MAAA8E,EAAuC,CAAE,iBAAkB,IACjE,KAAK,kBAAoB,IAAIpF,GAC3B,KAAK,eACLoF,CAAA,EAGN,CAEU,0BAA2B,CAC/B,KAAK,oBACP,KAAK,kBAAkB,UACvB,KAAK,kBAAoB,OAE7B,CAEO,mBAAoB,CACpB,eAAU,OAAO,sBAAsB,CAC9C,CAEO,oBAAqB,CACrB,eAAU,IAAI,sBAAsB,CAC3C,CAEU,0BAA2B,CACnC,GAAI,CAAC,KAAK,2BAA6B,KAAK,eAAgB,CAC1D,MAAMC,EAAuC,CAC3C,SAAU,KAAK,MAAM,iBACrB,MAAO,KAAK,MAAM,MAClB,aAAc,KAAK,MAAM,cAE3B,KAAK,0BAA4B,IAAIxF,GACnC,KAAK,eACLwF,CAAA,EAIA,QAAK,kCAAoC,KAAM,CAE3C,MAAAC,EAAkB,KAAK,MAAM,iBAAmB,IAEtD,KAAK,gCAAkC,OAAO,YAC5C,KAAK,YAAY,KAAK,IAAI,EAC1BA,CAAA,EAGN,CAEU,2BAA4B,CAChC,KAAK,4BACP,KAAK,0BAA0B,QAC/B,KAAK,0BAA0B,UAC/B,KAAK,0BAA4B,QAE/B,KAAK,kCAAoC,OACpC,qBAAc,KAAK,+BAA+B,EACzD,KAAK,gCAAkC,KAE3C,CAEU,uBAAwB,CAChC,KAAK,MAAM,cAAgB,EAC3B,KAAK,MAAM,iBAAmB,CAChC,CAEU,wBAAyB,CAE7B,KAAK,wBAA0B,OAC5B,2BAAwB,OAAO,YAAY,IAAM,CAC/C,KAAK,MAAM,QACd,KAAK,MAAM,eAAiB,IAC5B,KAAK,MAAM,iBACR,KAAK,MAAM,cAAgB,KAAK,MAAM,iBAAoB,IACzD,KAAK,MAAM,kBAAoB,KACjC,KAAK,KAAK,IAGb,GAAK,EAEZ,CAEU,yBAA0B,CAClC,KAAK,sBAAsB,EACnB,cAAM,0BAA2B,KAAK,qBAAqB,EAC/D,KAAK,wBAA0B,OAC1B,qBAAc,KAAK,qBAAqB,EAC/C,KAAK,sBAAwB,KAEjC,CAEU,iBAAkB,CAC1B,KAAK,wBAAwB,EAC7B,KAAK,0BAA0B,CACjC,CAEU,gBAAiB,CACzB,KAAK,gBAAgB,EAEjB,KAAK,MAAM,kBAAoB,EACjC,KAAK,yBAAyB,EAE9B,KAAK,uBAAuB,CAEhC,CAEU,4BAA4B/hD,EAAiBnJ,EAAe,CACvD,OAAAmJ,EAAA,MAAM,4BAA4BA,EAAYnJ,CAAK,EAChEmJ,EAAW,OAASA,EAAW,QAAUnJ,EAAM,SAAS,EACxDmJ,EAAW,MAAQnJ,EACRmJ,EAAA,MAAQA,EAAW,OAAS,GACvCA,EAAW,OAAS,SACbA,CACT,CAEU,eAAgB,CACpB,IAAC,KAAK,MAAM,MAAO,CACrB,KAAK,MAAM,IAAI,MAAM,uBAAuB,CAAC,EAC7C,OAEF,QAAShX,EAAI,EAAGA,EAAI,KAAK,MAAM,MAAM,OAAQA,IAAK,CAChD,MAAMqxB,EAAO,KAAK,MAAM,MAAMrxB,CAAC,EAC1BqxB,EAAA,MAAQA,EAAK,OAASrxB,EACtBqxB,EAAA,OAASA,EAAK,QAAU,GACxBA,EAAA,MAAQA,EAAK,OAAS,GAC3BA,EAAK,OAASA,EAAK,QAAUA,EAAK,MAAM,WACnCA,EAAA,SACHA,EAAK,UACJ,CACC,QAAS,EACT,QAAS,GAGRA,EAAA,MAAQA,EAAK,OAAS,GAC3BA,EAAK,OAAS,SAETA,EAAA,QAAUA,EAAK,SAAW+mC,GAEnC,CAMU,kBAAkBr7C,EAA0BlP,EAAe,CACnE,MAAMmJ,EAAa,KAAK,sBAAsB+F,EAAKlP,CAAK,EAClDmP,EAAUD,EAAI,UAChB/F,EAAW,OACTA,EAAW,OAAS,UACjB,KAAK,MAAM,QACT,WAAM,MAAQ,IAErB,KAAK,MAAM,MAAM,KAAK,CAAE,GAAGA,EAAY,QAAAgG,EAAS,GAE9ChG,EAAW,OAAS,aACtB,KAAK,iBAAmBgG,GAEtBhG,EAAW,OAAS,eACtB,KAAK,mBAAqBgG,GAGhC,CAMU,kBAAmB,CACtB,KAAK,eACH,WACH,IAAI,MACF,oEACF,GAIJ,KAAK,cAAc,QAAQ,CAACg8C,EAAcnrD,IAAU,CAC5C,MAAA3D,EACJ8uD,EAAa,aAAa,QAAQ,GAClCA,EAAa,aAAa,IAAI,GAC9BnrD,EAAM,SAAS,EACjBmrD,EAAa,aAAa,QAASnrD,EAAM,SAAU,GACnD,MAAMmJ,EAAa,CACjB,OAAA9M,EACA,OAAQ,GACR,QAAS8uD,EAAa,UACtB,MAAAnrD,EACA,SAAU,CACR,GAAGmrD,EAAa,sBAAsB,EACtC,QAAS,EACT,QAAS,CACX,GAEG,KAAK,MAAM,QACT,WAAM,MAAQ,IAEhB,WAAM,MAAM,KAAKhiD,CAAU,EACjC,CACH,CAEU,mBAA2C,CAC/C,OAAC,KAAK,eAGa47C,GAAkB,KAAK,cAAc,EAFnD,IAIX,CASU,wBAAwBqG,EAAc9qC,EAAcjgB,EAAc,CACnE,YAAK,IAAIigB,EAAO8qC,CAAI,EAAI,KAAK,IAAI/qD,EAAO+qD,CAAI,EAAI9qC,EAAOjgB,CAChE,CAEU,2BAA4B,CzSrtBjC,IAAAjI,EySstBH,GAAI,GAACA,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,QACrB,YAAK,MAAM,IAAI,MAAM,uBAAuB,CAAC,EACtC,GAGT,IAAIizD,EAAW,KAAK,IAClB,KAAK,MAAM,QAAU,WACjB,KAAK,MAAM,MAAM,CAAC,EAAE,SAAS,QAC7B,KAAK,MAAM,MAAM,CAAC,EAAE,SAAS,SAE/BC,EAAW,EAEf,QAASn5D,EAAI,EAAGA,EAAI,KAAK,MAAM,MAAM,OAAQA,IAAK,CAChD,MAAM4H,EAAW,KAAK,IACpB,KAAK,MAAM,QAAU,WACjB,KAAK,MAAM,MAAM5H,CAAC,EAAE,SAAS,QAC7B,KAAK,MAAM,MAAMA,CAAC,EAAE,SAAS,SAEnCk5D,EAAW,KAAK,wBAAwB,EAAGtxD,EAAUsxD,CAAQ,EACzDA,IAAatxD,IACJuxD,EAAAn5D,GAGR,OAAAm5D,CACT,CAEU,qBAAqBC,EAAe,GAAI,CzShvB7C,IAAAnzD,EySivBH,GAAI,GAAC,KAAK,eAAiB,GAACA,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SAG9C,QAAS4H,EAAQ,EAAGA,EAAQ,KAAK,MAAM,MAAM,OAAQA,IAC/CA,IAAUurD,IACR,KAAK,MAAM,MAAMvrD,CAAK,IACxB,KAAK,MAAM,MAAMA,CAAK,EAAE,OAAS,IAE/B,KAAK,cAAcA,CAAK,GAAK,KAAK,cAAcA,CAAK,EAAE,WACzD,KAAK,cAAcA,CAAK,EAAE,UAAU,OAAO,QAAQ,EAI3D,CAEU,eAAeA,EAAe,CzShwBnC,IAAA5H,EAAA4B,EAAA+wD,EySywBH,IARI/qD,IAAU,IAAM,GAAC5H,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,WACrC,QAAQ,KAAK,IAAI,MAAM,gCAAgC,CAAC,EAChD4H,EAAA,IAGLhG,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAmBgG,KACdA,EAAA,GAEN,GAAC+qD,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAmB/qD,IACtB,YAAK,MAAM,IAAI,MAAM,qCAAqC,CAAC,EACpD,EAET,KAAK,qBAAqBA,CAAK,EAC/B,KAAK,MAAM,MAAMA,CAAK,EAAE,OAAS,GACjC,KAAK,MAAM,YAAcA,EACzB,KAAK,MAAM,UAAY,KAAK,aAAaA,CAAK,EAC9C,KAAK,MAAM,UAAY,KAAK,aAAaA,CAAK,EAC9C,KAAK,sBAAsB,EAEvB,KAAK,eAAiB,KAAK,cAAcA,CAAK,EAAE,WAClD,KAAK,cAAcA,CAAK,EAAE,UAAU,IAAI,QAAQ,CAEpD,CAEU,wBAAiC,CACnC,MAAAA,EAAQ,KAAK,4BACnB,YAAK,eAAeA,CAAK,EAClBA,CACT,CAEU,oBAAoBA,EAAe,CzS/xBxC,IAAA5H,EySgyBG,MAAA6sD,EAAiB,KAAK,oBACxB,MAAC7sD,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAmB4H,KAAU,CAAC,KAAK,gBAAkB,CAACilD,EAClD,SAET,MAAMuG,EACJ,KAAK,MAAM,QAAU,WACjBvG,EAAe,KACfA,EAAe,KACfnsD,EACJ,KAAK,MAAM,QAAU,WACjB,KAAK,eAAe,UACpB,KAAK,MAAM,MAAMkH,CAAK,EAAE,SAAS,QACjC,KAAK,eAAe,WACpB,KAAK,MAAM,MAAMA,CAAK,EAAE,SAAS,QAChClH,UAAY0yD,GAAe1yD,GAAY,CAChD,CAEU,mBAAoB,CzSjzBzB,IAAAV,EAAA4B,EAAA+wD,EAAAU,EySkzBC,IAAC,KAAK,MACR,OAGF,KAAIrzD,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,YAAW4B,EAAA,KAAK,gBAAL,YAAAA,EAAoB,QAAQ,CACnD,aACN,IAAI,MACF,0EAAyE+wD,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,+BAA8BU,EAAA,KAAK,gBAAL,YAAAA,EAAoB,SAC/I,EACA,KAAK,cACL,MAEF,OAEE,IAAC,KAAK,eACR,OAGI,MAAAC,EAAqB,KAAK,eAAe,sBAAsB,EACrE,QAASv5D,EAAI,EAAGA,EAAI,KAAK,MAAM,MAAM,OAAQA,IAAK,CAC1C,MAAAg5D,EAAe,KAAK,cAAch5D,CAAC,EACnCqxB,EAAO,KAAK,MAAM,MAAMrxB,CAAC,EACzBm5B,EAAO6/B,EAAa,wBAE1B7/B,EAAK,GAAKogC,EAAmB,EAC7BpgC,EAAK,GAAKogC,EAAmB,EAE7BloC,EAAK,SAAW,CACd,GAAG8H,EAEH,QAASA,EAAK,EAAIA,EAAK,OAAS,EAAIogC,EAAmB,OAAS,EAEhE,QAASpgC,EAAK,EAAIA,EAAK,MAAQ,EAAIogC,EAAmB,MAAQ,GAGpE,CAEU,oBAA+B,CACvC,MAAO,CAAC,OAAO,CACjB,CASU,+BACRh0D,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAGE1J,IAAkB,SACpB,KAAK,cAAc,EAGjBA,IAAkB,aAChB,KAAK,MAAM,SACb,KAAK,eAAe,EAEpB,KAAK,gBAAgB,GAIrBA,IAAkB,SAChB,KAAK,MAAM,KACb,KAAK,wBAAwB,EAE7B,KAAK,yBAAyB,GAI9BA,IAAkB,gBAChB,KAAK,MAAM,YACb,KAAK,kBAAkB,EAEvB,KAAK,mBAAmB,IAGxBA,IAAkB,YAAcA,IAAkB,qBACpD,KAAK,mBAAmB,GAIxBA,IAAkB,cAClBA,IAAkB,uBAElB,KAAK,qBAAqB,CAE9B,CAGU,sBAAuB,CAC/B,KAAK,qBAAqB,CAK5B,CAEU,UAAyC,CAEjD,MAAI,CAACS,EAAkB,IAAI,GAAK,KAAK,wBAE5BiyD,GAAiB,KAAK,iBAAmB,KAAK,oBAIjD,KAAK,iBAAiB,QAAU,IAClC,KAAK,WAAa,KAAK,kBAGpB,KAAK,oBACR,KAAK,WAAa,KAAK,oBAGlB,KAEX,CACF,EAx5BO,IAAMuB,GAANjB,GAwFLlrD,EAxFWmsD,GAwFG,UAAU,iBChG1B,MAAMC,GAAwB,cAExBnB,GAAkB,GAAGmB,YAMdC,GAAN,cAAiC58C,CAAU,CAoGhD,aAAc,CACN,QApGEzP,EAAA,uBACAA,EAAA,YAsCAA,EAAA,oBAAwC,CAEhD,eAAgB,EAChB,SAAU,GACV,iBAAkB,gBAClB,OAAQ,GACR,WAAY,GACZ,mBAAoB,gBACpB,KAAM,GACN,YAAa,GACb,MAAO,aACP,SAAU,GACV,QAAS,EAGT,MAAO,CAAC,EACR,UAAW,GACX,UAAW,GACX,kBAAmB,GACnB,kBAAmB,GACnB,aAAc,GACd,eAAgB,GAChB,aAAc,CAAC,EACf,YAAa,GACb,eAAgB,CAAC,EAGjB,KAAM,KAAK,KAAK,KAAK,IAAI,EACzB,KAAM,KAAK,KAAK,KAAK,IAAI,EACzB,KAAM,KAAK,KAAK,KAAK,IAAI,EACzB,kBAAmB,KAAK,kBAAkB,KAAK,IAAI,EACnD,mBAAoB,KAAK,mBAAmB,KAAK,IAAI,EAGrD,sBAAuB,GACvB,wBAAyB,KAKjBA,EAAA,gBAAW,IAEXA,EAAA,0BAEAA,EAAA,kCAEAA,EAAA,4BAEAA,EAAA,6BAAuC,MAEvCA,EAAA,uCAAiD,MAEjDA,EAAA,mBAA6B,MAE7BA,EAAA,oBAAe,IAAIkC,EAAgB,MAAM,GAE5ClC,EAAA,aAAiC,CACtC,GAAG,KAAK,eA2LAA,EAAA,qBAAgB7L,GAAS,KAAK,eAAe,KAAK,IAAI,CAAC,GAtL1D,SAAMktB,GAAW,eAGtB,KAAK,cAAgB,KAAK,cAAc,KAAK,IAAI,EACjD,KAAK,oBAAsB,KAAK,oBAAoB,KAAK,IAAI,EAC7D,KAAK,SAAW,KAAK,SAAS,KAAK,IAAI,EACvC,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,CAG/C,CA3GA,IAAc,aAAc,CACnB,YAAK,cAA2B+qC,EAAqB,CAC9D,CAEA,IAAc,eAAgB,CAC5B,OAAO,MAAM,KAAK,KAAK,iBAA8BnB,EAAe,CAAC,CACvE,CAEA,IAAc,kBAAmB,CACxB,YAAK,iBAAiB,4CAA4C,CAC3E,CAEA,IAAc,mBAAoB,CACzB,YAAK,cAAc,oBAAoB,CAChD,CAOA,WAAW,oBAAkD,CACpD,OACL,QACA,mBACA,WACA,oBACA,OACA,SACA,aACA,sBACA,WACA,UAEJ,CA8EO,MAAO,CACZ,KAAK,kBAAkB,CACzB,CAKO,MAAO,CACZ,KAAK,kBAAkB,CACzB,CAQU,KAAKzqD,EAAe8rD,EAAY,GAAO,CAC/C,GAAI9rD,IAAU,IAAM,CAAC,KAAK,MAAM,SAC9B,eAAQ,KAAK,wBAAwB,EAC9B,GAILA,IAAU,IAAM8rD,GAAa,KAAK,MAAM,aAAa,OAAS,IAChE9rD,EAAQA,EAAQ,KAAK,MAAM,aAAa,OAAS,EAC7CA,EAAQ,IACFA,EAAA,IAIZ,MAAMwjB,EAAO,KAAK,MAAM,MAAMxjB,CAAK,EAEnC,MAAI,CAACwjB,GAAQ,CAAC,KAAK,aAAe,CAACA,EAAK,IAC9B,aAAK,6BAA6BxjB,eAAmB,EACtD,KAGTlH,GAAS0qB,EAAK,GAAI,EAAG,KAAK,YAAa,KAAK,MAAM,KAAK,EAChDxjB,EACT,CAOU,aAAa+rD,EAAuB,CACxC,IAAAthD,EAAYshD,EAAgB,KAAK,MAAM,eAE3C,GAAIthD,EAAY,KAAK,MAAM,MAAM,OAAS,EACpC,QAAK,MAAM,SACDA,IAAY,KAAK,MAAM,MAAM,WAGlC,UAGJ,OAAAA,CACT,CAOU,aAAashD,EAAuB,CACxC,IAAAnB,EAAYmB,EAAgB,KAAK,MAAM,eAE3C,GAAInB,EAAY,EACV,QAAK,MAAM,SACbA,EAAY,KAAK,MAAM,MAAM,OAAS,GAAKA,EAAY,OAGhD,UAGJ,OAAAA,CACT,CAKU,mBAAoB,CAExB,YAAK,MAAM,cACb,KAAK,MAAM,UAAY,KAAK,aAAa,KAAK,MAAM,SAAS,EAC7D,KAAK,eAAe,GAEf,KAAK,KAAK,KAAK,MAAM,UAAW,EAAI,CAC7C,CAKU,mBAAoB,CAExB,YAAK,MAAM,cACb,KAAK,MAAM,UAAY,KAAK,aAAa,KAAK,MAAM,SAAS,EAC7D,KAAK,eAAe,GAEf,KAAK,KAAK,KAAK,MAAM,UAAW,EAAK,CAC9C,CAEU,aAAc,CACtB,KAAK,WAAW,CAClB,CAEU,YAAa,CACjB,KAAK,MAAM,KACb,KAAK,wBAAwB,EAE7B,KAAK,yBAAyB,EAE5B,KAAK,MAAM,YACb,KAAK,kBAAkB,EAEvB,KAAK,mBAAmB,EAE1B,KAAK,cAAc,EACnB,KAAK,mBAAmB,EACxB,KAAK,qBAAqB,CAC5B,CAEU,eAAgB,C1S1QrB,IAAAxyD,G0S2QEA,EAAA,YAAM,iBAANA,EAAM,eAAmB,IAE1B,KAAK,MAAM,QAAU,EACvB,KAAK,MAAM,eAAe,KAAO,OAAO,IAAM,KAAK,MAAM,WAEpD,WAAM,eAAe,KAAO,EAErC,CAEU,oBAAqB,C1SpR1B,IAAAA,E0SqRG,MAAA2B,GAAW3B,EAAA,KAAK,MAAM,mBAAX,YAAAA,EAA6B,MAC5C,KAEE,KAAK,MAAM,UAAY2B,EAAS,SAAW,EAC7C,KAAK,MAAM,sBAAwB,WAAWA,EAAS,CAAC,aAAaA,EAAS,CAAC,IAE/E,KAAK,MAAM,sBAAwB,EAEvC,CAEU,sBAAuB,C1S/R5B,IAAA3B,E0SgSG,MAAA0yD,GAAY1yD,EAAA,KAAK,MAAM,qBAAX,YAAAA,EAA+B,MAC/C,KAEE,KAAK,MAAM,YAAc0yD,EAAU,SAAW,EAChD,KAAK,MAAM,wBAA0B,cAAcA,EAAU,CAAC,gBAAgBA,EAAU,CAAC,IAEzF,KAAK,MAAM,wBAA0B,EAEzC,CAEU,gBAAiB,C1S1StB,IAAA1yD,EAAA4B,E0S4SC,GADJ,KAAK,MAAM,eAAe,EACtB,KAAC5B,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SAAU,GAAC4B,EAAA,KAAK,gBAAL,MAAAA,EAAoB,SAGlD,IACF,KAAK,aAAa,QACXpG,GACP,KAAK,MAAMA,CAAK,CAClB,CACF,CAIU,oBAAoBsG,EAAoB,C1SxT7C,IAAA9B,EAAA4B,E0SyTCE,EAAM,OAAO,WACf9B,EAAA,KAAK,oBAAL,MAAAA,EAAwB,kBACxB4B,EAAA,KAAK,4BAAL,MAAAA,EAAgC,SAEpC,CAEU,SAASE,EAAuC,CACxD,KAAK,MAAM,YAAc,GAEpB,mBACH,IAAI,YAA+BA,EAAM,KAAM,CAAE,OAAQA,EAAM,OAAQ,EAE3E,CAEU,YAAYA,EAAuC,C1SvUxD,IAAA9B,E0SyUH,GADA,KAAK,MAAM,YAAc,GACrB,IAACA,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SAInB8B,EAAM,OAAO,YAAc,OAI3B,KACF,KAAK,aAAa,QACXtG,GACP,KAAK,MAAMA,CAAK,CAClB,CAGK,mBACH,IAAI,YAA+BsG,EAAM,KAAM,CAAE,OAAQA,EAAM,OAAQ,GAE3E,CAEU,mBAAoB,CACxB,KAAK,MAAM,MAAM,QAAU,KAAK,MAAM,cACxC,KAAK,YAAY,EAEjB,KAAK,oBAAoB,EAG3B,MAAM,kBAAkB,EACnB,UAAK2xD,GAAmB,kBAAkB,EAC/C,KAAK,kBAAkB,CACzB,CAEU,mBAAoB,C1SzWzB,IAAAzzD,EAAA4B,EAAA+wD,E0S0WH,KAAK,aAAa,GAAG,eAAgB,KAAK,aAAa,EAGnD,OAAO,iBACT,KAAK,eAAiB,IAAI,OAAO,eAAe,KAAK,aAAa,GAC7D3yD,EAAA,4BAAAA,EAAgB,QAAQ,OAI/B,OAAO,iBAAiB,SAAU,KAAK,cAAe,CAAE,QAAS,GAAM,EAGlE,sBACH,qBACA,KAAK,sBAGP4B,EAAA,KAAK,cAAL,MAAAA,EAAkB,iBAChB6xD,GAAmB,OAAO,UAC1B,KAAK,SACL,CACE,QAAS,EACX,IAEFd,EAAA,KAAK,cAAL,MAAAA,EAAkB,iBAChBc,GAAmB,OAAO,YAC1B,KAAK,YACL,CACE,QAAS,EACX,EAEJ,CAEU,sBAAuB,C1S3Y5B,IAAAzzD,EAAA4B,EAAA+wD,E0S4YH,KAAK,aAAa,IAAI,eAAgB,KAAK,cAAe,IAAI,EAEvD,2BAAoB,SAAU,KAAK,aAAa,GAElD3yD,EAAA,4BAAAA,EAAgB,UAAU,MAE/B,KAAK,IAAI,OAAO,IAAI,qBAAsB,KAAK,cAAe,IAAI,EAE7D,yBACH,qBACA,KAAK,sBAGP4B,EAAA,KAAK,cAAL,MAAAA,EAAkB,oBAChB6xD,GAAmB,OAAO,UAC1B,KAAK,WAEPd,EAAA,KAAK,cAAL,MAAAA,EAAkB,oBAChBc,GAAmB,OAAO,YAC1B,KAAK,YAET,CAEU,SAAU,CAClB,KAAK,mBAAmB,EACxB,KAAK,YAAY,EACjB,KAAK,kBAAkB,EAEvB,KAAK,aAAa,CACpB,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,cAAc,CACrB,CAEA,MAAgB,WAAY,CAC1B,KAAK,QAAQ,EACb,KAAK,YAAY,EACjB,KAAK,UAAU,IAAI,GAAGA,GAAmB,eAAe,EACxD,MAAM,MAAM,WACd,CAEA,MAAgB,cAAe,CAC7B,KAAK,YAAY,EACjB,MAAM,MAAM,cACd,CAEU,oBAAqB,CACzB,IAAC,KAAK,YAAa,CACrB,KAAK,MAAM,IAAI,MAAM,0BAA0B,CAAC,EAChD,OAGF,KAAK,oBAAsB,IAAI3F,GAAoB,KAAK,WAAW,CACrE,CAEU,yBAA0B,CAC9B,IAAC,KAAK,kBAAmB,CACvB,IAAC,KAAK,YACR,OAEI,MAAA8E,EAAuC,CAAE,iBAAkB,IACjE,KAAK,kBAAoB,IAAIpF,GAC3B,KAAK,YACLoF,CAAA,EAGN,CAEU,0BAA2B,CAC/B,KAAK,oBACP,KAAK,kBAAkB,UACvB,KAAK,kBAAoB,OAE7B,CAEO,mBAAoB,CACpB,eAAU,OAAO,sBAAsB,CAC9C,CAEO,oBAAqB,CACrB,eAAU,IAAI,sBAAsB,CAC3C,CAEU,eAAgB,CACpB,IAAC,KAAK,MAAM,MAAO,CACrB,KAAK,MAAM,IAAI,MAAM,uBAAuB,CAAC,EAC7C,OAEF,QAAS74D,EAAI,EAAGA,EAAI,KAAK,MAAM,MAAM,OAAQA,IAAK,CAChD,MAAMqxB,EAAO,KAAK,MAAM,MAAMrxB,CAAC,EAC1BqxB,EAAA,MAAQA,EAAK,OAASrxB,EACtBqxB,EAAA,OAASA,EAAK,QAAU,GAEjC,CAEO,aAAc,CACnB,IAAIwoC,EAAY,GAChB,MAAMC,EAAW,KAAK,cAGjB,KAAK,MAAM,eACLA,EAAA,QAAQ,CAACC,EAASlsD,IAAU,CACpB,KAAK,MAAM,MAAM,KAAMwjB,GAASA,EAAK,KAAO0oC,CAAO,IAE3D,sBAAiBA,EAASlsD,CAAK,EACxBgsD,EAAA,GACd,CACD,EAIQ,UAAAxoC,KAAQ,KAAK,MAAM,MACbyoC,EAAS,KAAMC,GAAYA,IAAY1oC,EAAK,EAAE,IAEtD,gBAAWA,EAAK,MAAO,EAAK,EACrBwoC,EAAA,IAIhB,OAAIA,IACF,KAAK,kBAAkB,EACvB,KAAK,aAAa,GAGbA,CACT,CAMU,WAAWhsD,EAAemsD,EAAc,GAAM,C1SjhBnD,IAAA/zD,E0SkhBH,MAAMorB,EAAO,KAAK,MAAM,MAAMxjB,CAAK,EAC9BwjB,KAGLprB,EAAAorB,EAAK,KAAL,MAAAprB,EAAS,SACT,KAAK,MAAM,MAAM,OAAO4H,EAAO,CAAC,EAC5BmsD,GAAa,KAAK,kBAAkB,EAC1C,CAEU,mBAAoB,CAC5B,QAASh6D,EAAI,EAAGA,EAAI,KAAK,MAAM,MAAM,OAAQA,IAAK,CAChD,MAAMqxB,EAAO,KAAK,MAAM,MAAMrxB,CAAC,EAC/BqxB,EAAK,MAAQrxB,EAEjB,CAEU,iBAAiBg5D,EAA2BnrD,EAAe,CACnEmrD,EAAa,aAAa,QAASnrD,EAAM,SAAU,GACnD,MAAMmJ,EAA6B,CACjC,OAAQ,GACR,MAAAnJ,EACA,GAAImrD,CAAA,EAED,WAAM,MAAM,KAAKhiD,CAAU,CAClC,CAMU,qBAAsB,CACzB,KAAK,eACH,WACH,IAAI,MACF,oEACF,GAGC,WAAM,MAAQ,GACnB,KAAK,cAAc,QAAQ,KAAK,iBAAiB,KAAK,IAAI,CAAC,CAC7D,CAEU,mBAA2C,CAC/C,OAAC,KAAK,YAGa47C,GAAkB,KAAK,WAAW,EAFhD,IAIX,CASU,wBAAwBqG,EAAc9qC,EAAcjgB,EAAc,CACnE,YAAK,IAAIigB,EAAO8qC,CAAI,EAAI,KAAK,IAAI/qD,EAAO+qD,CAAI,EAAI9qC,EAAOjgB,CAChE,CAEU,qBAAqBkrD,EAAe,GAAI,C1S/kB7C,IAAAnzD,E0SglBQ,UAAAorB,KAAQ,KAAK,MAAM,MACxBA,EAAK,QAAU+nC,IACjB/nC,EAAK,OAAS,IACTprB,EAAAorB,EAAA,WAAAprB,EAAI,UAAU,OAAO,UAGhC,CAEU,eAAe4H,EAAe,C1SxlBnC,IAAA5H,EAAA4B,EAAA+wD,EAAAU,E0SgmBH,IAPIzrD,IAAU,IAAM,GAAC5H,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,WACrC,QAAQ,KAAK,IAAI,MAAM,gCAAgC,CAAC,EAChD4H,EAAA,IAELhG,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAmBgG,KACdA,EAAA,GAEN,GAAC+qD,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAmB/qD,IACtB,YAAK,MAAM,IAAI,MAAM,sCAAsC,CAAC,EACrD,EAGT,MAAMwjB,EAAO,KAAK,MAAM,MAAMxjB,CAAK,EAEnCwjB,EAAK,OAAS,IACTioC,EAAAjoC,EAAA,WAAAioC,EAAI,UAAU,IAAI,SACzB,CAEU,gBAAgBW,EAAkB,CAC1C,KAAK,qBAAqB,EAC1B,UAAW3pB,KAAc2pB,EACvB,KAAK,eAAe3pB,CAAU,CAElC,CAEU,cAAe,CACnB,OAAC,KAAK,YAMR,KAAK,MAAM,QAAU,aACjB,KAAK,YAAY,YAAc,KAAK,YAAY,YAChD,KAAK,YAAY,aAAe,KAAK,YAAY,aAP9C,EAUX,CAEU,uBAAuBziC,EAAe,CAC1C,OAAC,KAAK,YAGM,KAAK,YAAY,cAC/B,WAAWA,KAAA,EAHJ,MAMX,CAEU,eAAewjB,EAAsBxqB,EAAgB,CACzD,IAAC,KAAK,YACD,SAEH,MAAAqzD,EAAgB,KAAK,YAAY,sBAAsB,EAC7D7oC,EAAK,KAALA,EAAK,GAAO,KAAK,uBAAuBA,EAAK,KAAK,GAClD,MAAM0oC,EAAU1oC,EAAK,GACrB,GAAI,CAAC0oC,EACH,eAAQ,KAAK,0BAA0B,EAChC,GAEH,MAAAI,EAAYJ,EAAQ,wBAUnB,OANL,KAAK,MAAM,QAAU,aACjBI,EAAU,KAAOtzD,GAAUqzD,EAAc,MACzCC,EAAU,MAAQtzD,GAAUqzD,EAAc,MAC1CC,EAAU,IAAMtzD,GAAUqzD,EAAc,KACxCC,EAAU,OAAStzD,GAAUqzD,EAAc,MAGnD,CAEU,iBAAiBrzD,EAAgB,C1SlqBtC,IAAAZ,E0SmqBH,MAAMm0D,EAAyB,GAE/B,GAAI,GAACn0D,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,QACd,OAAAm0D,EAGE,UAAA/oC,KAAQ,KAAK,MAAM,MACxB,KAAK,eAAeA,EAAMxqB,CAAM,GACrBuzD,EAAA,KAAK/oC,EAAK,KAAK,EAIhC,OAAO+oC,EAAa,KAAK,CAACviD,EAAGC,IAAMD,EAAIC,CAAC,CAC1C,CAEU,uBAAuBjR,EAAgB,CAC/C,KAAK,qBAAqB,EACpB,MAAAuzD,EAAe,KAAK,iBAAiBvzD,CAAM,EACjD,YAAK,gBAAgBuzD,CAAY,EAC1BA,CACT,CAEA,mBAAmBvzD,EAAS,EAAG,CACvB,MAAAuzD,EAAe,KAAK,uBAAuBvzD,CAAM,EACjDwzD,EAAaD,EAAa,CAAC,GAAK,EAChCzkD,EAAYykD,EAAaA,EAAa,OAAS,CAAC,GAAK,EACrD3B,EAAY,KAAK,aAAa4B,CAAU,EACxC/hD,EAAY,KAAK,aAAa3C,CAAS,EACtC,OACL,WAAA0kD,EACA,UAAA1kD,EACA,aAAAykD,EACA,UAAA3B,EACA,UAAAngD,CAAA,CAEJ,CAEU,aAAazR,EAAS,EAAGyzD,EAAU,GAAiB,C1SxsBzD,IAAAr0D,EAAA4B,EAAA+wD,EAAAU,E0SysBH,GAAI,CAAC,KAAK,MAAM,MAAM,OACpB,MAAO,GAEH,MAAE,aAAAc,EAAc,WAAAC,EAAY,UAAA5B,EAAW,UAAAngD,GAC3C,KAAK,mBAAmBzR,CAAM,EAGhC,GAAI,CAACuzD,EAAa,QAAU,CAACE,EAAS,CACpC,IAAIC,EAAiB1zD,EAAS,EAC1B,QAAK,MAAM,QAAU,aAAc,CACrC,MAAM2zD,IAAa3yD,GAAA5B,EAAA,KAAK,MAAM,MAAM,CAAC,IAAlB,YAAAA,EAAqB,KAArB,YAAA4B,EAAyB,cAAe,EACvD2yD,IACFD,EAAiB,KAAK,MAAMC,EAAa,EAAI,EAAG,OAE7C,CACL,MAAMC,IAAcnB,GAAAV,EAAA,KAAK,MAAM,MAAM,CAAC,IAAlB,YAAAA,EAAqB,KAArB,YAAAU,EAAyB,eAAgB,EACzDmB,IACFF,EAAiB,KAAK,MAAME,EAAc,EAAI,EAAG,GAG9C,YAAK,aAAaF,EAAgB,EAAI,EAI/C,YAAK,MAAM,aAAeH,EAC1B,KAAK,MAAM,UAAY3B,EACvB,KAAK,MAAM,UAAYngD,EAEvB,KAAK,eAAe,EACpB,KAAK,iBAAiB,EAElB,KAAK,MAAM,QACb,KAAK,KAAK+hD,CAAU,EAGfD,CACT,CAEU,gBAAiB,CACnB,MAAAvH,EAAe,KAAK,eAItB,GAHC,WAAM,aACT,KAAK,MAAM,UAAYA,GAAgB,KAAK,MAAM,MAAM,OAAS,EAE/D,KAAK,MAAM,SAAU,CACvB,KAAK,MAAM,kBAAoB,GAC/B,KAAK,MAAM,kBAAoB,GAC/B,OAGF,KAAK,MAAM,kBACTA,GACA,KAAK,MAAM,YAAc,IACzB,KAAK,MAAM,WAAa,KAAK,MAAM,MAAM,OAAS,EAC/C,WAAM,kBACTA,GAAgB,KAAK,MAAM,YAAc,IAAM,KAAK,MAAM,WAAa,CAC3E,CAEU,kBAAmB,CACrB,MAAAA,EAAe,KAAK,eACrB,WAAM,eACT,KAAK,MAAM,YAAcA,GAAgB,KAAK,MAAM,MAAM,OAAS,CACvE,CAEU,oBAA+B,CACvC,MAAO,EACT,CASU,+BACRttD,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAGE1J,IAAkB,SACpB,KAAK,cAAc,EAGjBA,IAAkB,SAChB,KAAK,MAAM,KACb,KAAK,wBAAwB,EAE7B,KAAK,yBAAyB,GAI9BA,IAAkB,gBAChB,KAAK,MAAM,YACb,KAAK,kBAAkB,EAEvB,KAAK,mBAAmB,IAGxBA,IAAkB,YAAcA,IAAkB,qBACpD,KAAK,mBAAmB,GAIxBA,IAAkB,cAClBA,IAAkB,uBAElB,KAAK,qBAAqB,EAGxBA,IAAkB,WACpB,KAAK,cAAc,CAEvB,CAGU,sBAAuB,CAC/B,KAAK,qBAAqB,CAI5B,CAEA,MAAgB,gBAAgC,C1S30B3C,IAAAU,E0S40BH,MAAMgX,EAAY,MAAM,KAAK,KAAK,iBAAiB,UAAU,CAAC,EAC9D,UAAWzH,KAAYyH,EAAW,CAC1B,MAAA7Z,EAAOoS,EAAS,aAAa,MAAM,EACzC,OAAQpS,EAAM,CACZ,IAAK,aACE,WAAM,gBACT6C,EAAAuP,EAAS,QAAQ,SAAS,KAAK,CAAC,IAAhC,YAAAvP,EAAmC,YAAa,OAClD,KAAK,MAAM,wBAAyB,KAAK,MAAM,aAAa,EAC5D,MAEF,QACU,aAAK,0BAA0B7C,IAAQoS,CAAQ,EACvD,KACJ,EAEJ,CAEU,UAAyC,CAC1C,WACT,CACF,EAt0BO,IAAMklD,GAANhB,GAoBLrsD,EApBWqtD,GAoBG,SAAS,CACrB,UAAW,YACX,YAAa,gBAwDfrtD,EA9EWqtD,GA8EG,UAAU,cCxGnB,MAAMC,GAAN,cAA6B79C,CAAU,CA6L5C,aAAc,CACN,QA3LEzP,EAAA,gBAAW,IACXA,EAAA,6BAAwB,IACxBA,EAAA,iBAAY,IACfA,EAAA,cAAS,IAuJNA,EAAA,cAEHA,EAAA,aAA6B,CAElC,MAAO,KAAK,MACZ,OAAQ,KAAK,OACb,KAAM,KAAK,KACX,SAAU,KAAK,SACf,YAAa,KAAK,YAElB,SAAU,OACV,oBAAqB,EACrB,mBAAoB,GACpB,wBAAyB,KAAK,wBAI9B,OAAQ,KAAK,OACb,QAAS,GACT,SAAU,EACV,WAAY4mD,GAAgB,aAC5B,OAAQ,EAER,WAAY,KAAK,WACjB,eAAgB,KAAK,eACrB,KAAM,KAAK,KACX,MAAO,KAAK,MACZ,WAAY,KAAK,WACjB,YAAa,KAAK,YAClB,MAAO,KAAK,QA+QJ5mD,EAAA,gBAAW,KAAK,UAAU,KAAK,IAAI,GA0CtCA,EAAA,qBAAgB,KAAK,eAAe,KAAK,IAAI,GAsB1CA,EAAA,6BAAwB,KAAK,uBAAuB,KAAK,IAAI,GA4B7DA,EAAA,uBAAkB,KAAK,iBAAiB,KAAK,IAAI,GAQjDA,EAAA,mBAAc,KAAK,aAAa,KAAK,IAAI,GAQzCA,EAAA,iBAAY,KAAK,WAAW,KAAK,IAAI,GAUrCA,EAAA,wBAAmB,KAAK,kBAAkB,KAAK,IAAI,GAQnDA,EAAA,iBAAY,KAAK,WAAW,KAAK,IAAI,GAMrCA,EAAA,wBAAmB,KAAK,kBAAkB,KAAK,IAAI,GAMnDA,EAAA,oBAAe,KAAK,cAAc,KAAK,IAAI,GAU3CA,EAAA,cAAS,KAAK,QAAQ,KAAK,IAAI,GAO/BA,EAAA,eAAU,KAAK,SAAS,KAAK,IAAI,GArapC,WAAQ,KAAK,YACpB,CAxLA,WAAW,oBAA+B,CACjC,OAAC,YAAa,yBAA0B,sBAAsB,CACvE,CAEA,IAAW,OAAQ,CACV,YAAK,OAAS,KAAK,MAAM,KAClC,CAEA,IAAW,MAAMutD,EAAgB,CAC/B,KAAK,MAAM,MAAQA,EACd,WAAM,MAAQ,KAAK,MAAM,MAC1BA,EACG,WAAM,aAAa,QAAS,EAAE,EAE9B,WAAM,gBAAgB,OAAO,EAEpC,KAAK,SAAS,CAChB,CAOA,IAAW,QAAS,C3ShCf,IAAA30D,E2SiCI,QAAAA,EAAA,KAAK,QAAL,YAAAA,EAAY,SAAU,CAC/B,CAEA,IAAW,OAAO40D,EAAgB,CAChC,KAAK,MAAM,OAASA,EACpB,KAAK,SAAS,CAChB,CAEA,IAAW,MAAO,C3SzCb,IAAA50D,E2S0CH,OAAOA,EAAA,KAAK,QAAL,YAAAA,EAAY,IACrB,CAEA,IAAW,KAAK60D,EAAe,CAC7B,KAAK,MAAM,KAAOA,EACdA,EACG,WAAM,aAAa,OAAQ,EAAE,EAE7B,WAAM,gBAAgB,MAAM,EAEnC,KAAK,SAAS,CAChB,CAEA,IAAW,UAAW,C3SvDjB,IAAA70D,E2SwDH,OAAOA,EAAA,KAAK,QAAL,YAAAA,EAAY,QACrB,CAEA,IAAW,SAAS80D,EAAmB,CACrC,KAAK,MAAM,SAAWA,EACjB,WAAM,SAAW,KAAK,MAAM,SAC7BA,GACG,WAAM,aAAa,WAAY,EAAE,EAEtC,KAAK,MAAM,cAAc,IAAI,MAAM,WAAW,CAAC,EAC/C,KAAK,MAAM,cAAc,IAAI,MAAM,YAAY,CAAC,EAChD,KAAK,MAAM,cAAc,IAAI,MAAM,WAAW,CAAC,GAE1C,WAAM,gBAAgB,UAAU,EAEvC,KAAK,SAAS,CAChB,CAEA,IAAW,aAAc,C3S1EpB,IAAA90D,E2S2EI,QAAAA,EAAA,KAAK,QAAL,YAAAA,EAAY,cAAe,CACpC,CAEA,IAAW,YAAY+0D,EAAqB,CAC1C,KAAK,MAAM,YAAcA,EACzB,KAAK,SAAS,CAChB,CAEA,IAAW,UAAW,C3SnFjB,IAAA/0D,E2SoFI,QAAAA,EAAA,KAAK,QAAL,YAAAA,EAAY,WAAY,EACjC,CAEA,IAAW,SAASg1D,EAAmB,CACrC,KAAK,MAAM,SAAWA,EACtB,KAAK,SAAS,CAChB,CAEA,IAAW,QAAS,C3S5Ff,IAAAh1D,E2S6FI,QAAAA,EAAA,KAAK,QAAL,YAAAA,EAAY,SAAU,CAC/B,CAEA,IAAW,OAAO+rB,EAAgB,CAChC,KAAK,MAAM,OAASA,EACpB,KAAK,SAAS,CAChB,CAEA,IAAW,OAAQ,C3SrGd,IAAA/rB,E2SsGI,QAAAA,EAAA,KAAK,QAAL,YAAAA,EAAY,QAAS,CAC9B,CAEA,IAAW,MAAM8rB,EAAe,CAC9B,KAAK,MAAM,MAAQA,EACnB,KAAK,SAAS,CAChB,CAEA,IAAW,QAAS,C3S9Gf,IAAA9rB,E2S+GH,OAAOA,EAAA,KAAK,QAAL,YAAAA,EAAY,MACrB,CAEA,IAAW,OAAOi1D,EAAgB,CAChC,KAAK,MAAM,OAASA,EACpB,KAAK,SAAS,CAChB,CAEA,IAAW,SAAU,C3SvHhB,IAAAj1D,E2SwHH,OAAOA,EAAA,KAAK,QAAL,YAAAA,EAAY,OACrB,CAEA,IAAW,QAAQk1D,EAA4C,CAC7D,KAAK,MAAM,QAAUA,EACrB,KAAK,SAAS,CAChB,CAEA,IAAW,yBAA0B,C3ShIhC,IAAAl1D,EAAA4B,E2SiIH,QACG5B,EAAA,KAAK,QAAL,YAAAA,EAAoB,4BACrB4B,EAAA,KAAK,QAAL,YAAAA,EAAY,aAAa,6BACzB,EAEJ,CAEA,IAAW,wBAAwBuzD,EAAkC,C3SxIhE,IAAAn1D,E2SyIC,QAAQA,EAAA,KAAK,QAAL,YAAAA,EAAoB,yBAA4B,MACzD,KAAK,MAAc,wBAA0Bm1D,GAG5CA,EACG,WAAM,aAAa,0BAA2B,EAAE,EAEhD,WAAM,gBAAgB,yBAAyB,EAGtD,KAAK,SAAS,CAChB,CAKA,IAAW,QAAS,C3SzJf,IAAAn1D,E2S0JI,QAAAA,EAAA,KAAK,QAAL,YAAAA,EAAY,SAAU,EAC/B,CAuCU,YAAa,CACf,MAAAo1D,EAAQ,KAAK,cAAgC,OAAO,EAC1D,GAAI,CAACA,EACG,UAAI,MAAM,wBAAwB,EAEnC,OAAAA,CACT,CAEO,MAAO,CACZ,KAAK,MAAM,MACb,CAEO,YAAa,CAClB,KAAK,MAAM,YAAY,EAClB,WAAQ,CAAC,KAAK,MACnB,KAAK,SAAS,CAChB,CAEO,gBAAiB,CACtB,KAAK,MAAM,gBAAgB,EACtB,cAAW,CAAC,KAAK,SACtB,KAAK,SAAS,CAChB,CAEA,MAAa,MAAO,CAClB,KAAK,MAAM,MAAM,EACb,IACF,KAAK,MAAM,aACJ55D,GACP,KAAK,MAAMA,CAAK,CAClB,CACF,CAEO,OAAQ,CACb,KAAK,MAAM,OAAO,EAClB,KAAK,MAAM,QACX,KAAK,SAAS,CAChB,CAEA,MAAa,YAAa,CACxB,OAAI,KAAK,OACA,KAAK,OAEL,KAAK,OAEhB,CAEO,aAAc,CACnB,YAAK,MAAM,aAAa,EACjB,KAAK,YACd,CAEO,OAAQ,CACb,KAAK,MAAM,OAAO,EAClB,KAAK,MAAM,YAAc,EACzB,KAAK,SAAS,CAChB,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKk5D,GAAe,kBAAkB,EACtC,WAAQ,KAAK,cACd,KAAK,UAAY,QAAU,KAAK,UAAY,aAC9C,KAAK,KAAK,CAEd,CAEU,kBAAmB,CACrB,MAAAU,EAAQ,KAAK,cAAc,OAAO,EACxC,GAAI,CAACA,EACG,UAAI,MAAM,sCAAsC,EAExD,KAAK,MAAQA,EACb,KAAK,kBAAkB,EACvB,KAAK,SAAS,CAChB,CAKO,YAAa,CAClB,KAAK,MAAM,UAAY,GACvB,MAAMC,EAAU,KAAK,MAAM,UAAU,EAAI,EACnCC,EAAiB,KAAK,cAAc,gBAAgB,EAC1D,KAAK,qBAAqB,EAC1B,KAAK,MAAM,SACPA,EACFA,EAAe,YAAYD,CAAO,EAElC,KAAK,YAAYA,CAAO,EAG1B,KAAK,MAAQA,EAET,KAAK,MAAM,aAAa,OAAO,EACjC,KAAK,MAAQ,GAEb,KAAK,MAAQ,GAGX,KAAK,MAAM,aAAa,UAAU,EACpC,KAAK,SAAW,GAEhB,KAAK,SAAW,GAGd,KAAK,MAAM,aAAa,UAAU,EACpC,KAAK,SAAW,GAEhB,KAAK,SAAW,GAGd,KAAK,MAAM,aAAa,QAAQ,IAClC,KAAK,OAASz3D,GAAW,KAAK,MAAM,aAAa,QAAQ,GAAK,CAAC,GAG7D,KAAK,MAAM,aAAa,OAAO,IACjC,KAAK,MAAQA,GAAW,KAAK,MAAM,aAAa,OAAO,GAAK,CAAC,GAG3D,KAAK,MAAM,aAAa,MAAM,EAChC,KAAK,KAAO,GAEZ,KAAK,KAAO,GAGV,KAAK,MAAM,aAAa,OAAO,EACjC,KAAK,MAAQ,GAEb,KAAK,MAAQ,GAGX,KAAK,MAAM,aAAa,QAAQ,IAClC,KAAK,OAAS,KAAK,MAAM,aAAa,QAAQ,GAAK,IAGjD,KAAK,MAAM,aAAa,SAAS,IACnC,KAAK,QAAW,KAAK,MAAM,aAAa,SAAS,GAAK,IAOpD,KAAK,MAAM,aAAa,yBAAyB,EACnD,KAAK,wBAA0B,GAE/B,KAAK,wBAA0B,GAG5B,WAAM,WAAaowD,GAAgB,aACxC,KAAK,sBAAwB,GAC7B,KAAK,MAAM,QAAU,GAErB,KAAK,iBAAiB,EAEtB,KAAK,MAAM,CACb,CAEU,gBAAiB,CACrB,QAAK,MAAM,SAAU,CACvB,KAAK,WAAW,EAChB,IAAIuH,EAAgB,KAAK,MAAM,cAAc,QAAQ,EAChDA,IACaA,EAAA,SAAS,cAAc,QAAQ,EAC1C,WAAM,YAAYA,CAAa,GAEtCA,EAAc,aAAa,MAAO,KAAK,MAAM,QAAQ,EAEzD,CAEU,+BACRj2D,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAEG,WAAM,iCAAkC1J,CAAa,EACtDA,IAAkB,YACpB,KAAK,eAAe,CAExB,CAEU,mBAAoB,CACxB,QAAK,MAAM,mBAAoB,CAEjC,MAAMk2D,EAAiB,OAAO,WAAW,KAAK,MAAM,kBAAkB,EACvDA,EAAA,iBAAiB,SAAU,KAAK,qBAAqB,EAEhEA,EAAe,SACjB,KAAK,cAAc,EAIvB,KAAK,MAAM,iBAAiB,WAAY,KAAK,eAAe,EAC5D,KAAK,MAAM,iBAAiB,YAAa,KAAK,WAAW,EACzD,KAAK,MAAM,iBAAiB,UAAW,KAAK,SAAS,EACrD,KAAK,MAAM,iBAAiB,iBAAkB,KAAK,gBAAgB,EACnE,KAAK,MAAM,iBAAiB,UAAW,KAAK,SAAS,EACrD,KAAK,MAAM,iBAAiB,iBAAkB,KAAK,gBAAgB,EACnE,KAAK,MAAM,iBAAiB,aAAc,KAAK,YAAY,EAC3D,KAAK,MAAM,iBAAiB,OAAQ,KAAK,MAAM,EAC/C,KAAK,MAAM,iBAAiB,QAAS,KAAK,OAAO,CACnD,CAEU,sBAAuB,CAC3B,KAAK,MAAM,oBAEU,OAAO,WAAW,KAAK,MAAM,kBAAkB,EACvD,oBAAoB,SAAU,KAAK,qBAAqB,EAGzE,KAAK,MAAM,oBAAoB,WAAY,KAAK,eAAe,EAC/D,KAAK,MAAM,oBAAoB,YAAa,KAAK,WAAW,EAC5D,KAAK,MAAM,oBAAoB,UAAW,KAAK,SAAS,EACxD,KAAK,MAAM,oBAAoB,iBAAkB,KAAK,gBAAgB,EACtE,KAAK,MAAM,oBAAoB,UAAW,KAAK,SAAS,EACxD,KAAK,MAAM,oBAAoB,iBAAkB,KAAK,gBAAgB,EACtE,KAAK,MAAM,oBAAoB,aAAc,KAAK,YAAY,EAC9D,KAAK,MAAM,oBAAoB,OAAQ,KAAK,MAAM,EAClD,KAAK,MAAM,oBAAoB,QAAS,KAAK,OAAO,CACtD,CAEU,WAAY,CAChB,KAAK,MAAM,QAAU,KAAK,MAAM,QAC7B,WAAM,MAAQ,KAAK,MAAM,OAG5B,KAAK,MAAM,SAAW,KAAK,MAAM,SAC9B,WAAM,OAAS,KAAK,MAAM,QAG7B,KAAK,MAAM,OAAS,KAAK,MAAM,OAC5B,WAAM,KAAO,KAAK,MAAM,MAG3B,KAAK,MAAM,WAAa,KAAK,MAAM,WAChC,WAAM,SAAW,KAAK,MAAM,UAG/B,KAAK,MAAM,cAAgB,KAAK,MAAM,cACnC,WAAM,YAAc,KAAK,MAAM,aAGlC,KAAK,MAAM,SAAW,KAAK,MAAM,SAC9B,WAAM,OAAS,KAAK,MAAM,QAG7B,KAAK,MAAM,WAAa,KAAK,MAAM,WAChC,WAAM,SAAW,KAAK,MAAM,UAG/B,KAAK,MAAM,aAAe,KAAK,MAAM,aAClC,WAAM,WAAa,KAAK,MAAM,WAEvC,CAIA,MAAgB,YAAa,CAC3B,KAAK,iBAAiB,CACxB,CAEA,MAAgB,WAAY,CAE1B,KAAK,MAAM,MACb,CAKO,eAAgB,CACjB,KAAK,MAAM,oBACb,KAAK,UAAU,EAEf,KAAK,cAAc,CAEvB,CAEO,WAAY,CACZ,WAAM,aAAa,UAAW,MAAM,EACzC,KAAK,MAAM,MACb,CAKU,gBAAiB,CACpB,KAAK,wBACR,KAAK,sBAAwB,GAC7B,KAAK,MAAM,MAAQ,GACnB,KAAK,UAAU,EACf,KAAK,KAAK,EAEd,CAUU,uBAAuB1zD,EAA4B,CACvDA,EAAM,QAEJ,KAAK,sBACF,KAAK,WACR,KAAK,KAAK,EAGZ,KAAK,cAAc,GAIhB,eAAY,KAAK,MAAM,OAC5B,KAAK,MAAM,EAEf,CAIU,kBAAmB,CAE3B,GADA,KAAK,MAAM,kBAAkB,EACzB,KAAK,sBAAuB,OAChC,GAAI,MAAM,KAAK,MAAM,QAAQ,EAAG,CAC9B,QAAQ,KAAK,uBAAuB,EACpC,OAIF,IAAI2zD,EAAiB,EACrB,QAAS17D,EAAI,EAAGA,EAAI,KAAK,MAAM,SAAS,OAAQA,IAE5C07D,GAAA,KAAK,MAAM,SAAS,IAAI17D,CAAC,EAAI,KAAK,MAAM,SAAS,MAAMA,CAAC,EAG5D,KAAK,MAAM,OAAS07D,EAAiB,KAAK,MAAM,SAI9C,KAAK,MAAM,qBACX,KAAK,MAAM,OAAS,KAAK,MAAM,qBAE/B,KAAK,cAAc,CAEvB,CAIU,cAAe,CACvB,KAAK,MAAM,cAAc,EACzB,KAAK,MAAM,QAAU,GACrB,KAAK,SAAS,CAChB,CAIU,YAAa,CACrB,KAAK,MAAM,YAAY,EAEvB,KAAK,SAAS,CAChB,CAIU,mBAAoB,CAC5B,KAAK,MAAM,QAAU,GACjB,KAAK,MAAM,qBACb,KAAK,cAAc,EAErB,KAAK,SAAS,CAChB,CAIU,YAAa,CACrB,KAAK,MAAM,SAAS,EACpB,KAAK,MAAM,QAAU,GACrB,KAAK,SAAS,CAChB,CAIU,mBAAoB,CAC5B,KAAK,SAAS,CAChB,CAIU,eAAgB,CACxB,KAAK,SAAS,CAChB,CAIU,SAAU,CAClB,KAAK,MAAM,SAAS,EACpB,KAAK,MAAM,QAAU,GACrB,KAAK,sBAAwB,GAC7B,KAAK,MAAM,OAAS,GACpB,KAAK,SAAS,CAChB,CAIU,UAAW,CACnB,KAAK,MAAM,OAAS,GACpB,KAAK,SAAS,CAChB,CAQA,MAAgB,KAAKt/C,EAA8B,CACjD,OAAO,MAAM,KAAKA,CAAkB,EAAE,KAAMxJ,GACnCA,CACR,CACH,CAGU,sBAAuB,CAC/B,MAAM,qBAAqB,CAC7B,CAEU,UAAyC,CAC1C,WACT,CACF,EAxnBO,IAAM+oD,GAANhB,GACLttD,EADWsuD,GACG,UAAU,YCSnB,MAAMC,GAAN,cAAqC9+C,CAAU,CAA/C,kCAGEzP,EAAA,aAAe,CACpB,SAAU,KAGZA,EAAA,cAAoC,MACpCA,EAAA,eAAiC,MACjCA,EAAA,eAAmC,MACnCA,EAAA,eAA8B,MAE9B,WAAW,oBAA+B,CACxC,MAAO,CAAC,UAAU,CACpB,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKuuD,GAAuB,kBAAkB,EACnD,KAAK,WAAa,KAAK,WAAW,KAAK,IAAI,CAC7C,CAEU,WAAW7zD,EAAoB,C5ShCpC,IAAA9B,E4SiCE,WACH,sCACA8B,GACA9B,EAAA,KAAK,UAAL,YAAAA,EAAc,WAGZ,KAAK,MAAM,UACb,KAAK,aAAa,CAEtB,CAEU,cAAe,C5S5CpB,IAAAA,G4S6CCA,EAAA,KAAK,UAAL,MAAAA,EAAc,UAAU,SAAS,YAC/B,KAAK,QACP,KAAK,QAAQ,OACJ,KAAK,SACd,KAAK,QAAQ,OAGnB,CAEU,mBAAoB,C5StDzB,IAAAA,G4SuDHA,EAAA,KAAK,SAAL,MAAAA,EAAa,iBACXy0D,GAAmB,OAAO,YAC1B,KAAK,WAET,CAEU,sBAAuB,C5S7D5B,IAAAz0D,G4S8DHA,EAAA,KAAK,SAAL,MAAAA,EAAa,oBACXy0D,GAAmB,OAAO,YAC1B,KAAK,WAET,CAEA,MAAgB,YAA4B,CAC1C,MAAM,MAAM,aACZ,KAAK,kBAAkB,CACzB,CAEA,MAAgB,WAA2B,CACrC,KAAK,MAAM,UACb,KAAK,aAAa,EAEpB,MAAM,MAAM,YACd,CAEA,MAAgB,gBAAgC,CAC9C,KAAK,OAAS,KAAK,QAA4BA,GAAmB,OAAO,EACzE,KAAK,QAAU,KAAK,cAA8BiB,GAAe,OAAO,EACnE,aAAU,KAAK,cAAgC,OAAO,EACtD,aAAU,KAAK,QAAqB,QAAQ,CACnD,CAEU,UAAyC,CAC1C,WACT,CACF,EAhFO,IAAME,GAAND,GACLvuD,EADWwuD,GACG,UAAU,mBCf1B,MAAeC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAAC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECYT13D,GAAYkd,GAAmB,KAoBxBy6C,GAAN,cAA+Bn/C,EAAmB,CA0GvD,aAAc,CACN,QAxGExP,EAAA,0BAAqB,CAC7B,CACE,KAAM,QACN,SAAU,EACZ,EACA,CACE,KAAM,SACN,SAAU,EACZ,EACA,CACE,KAAM,OACN,SAAU,EACZ,EACA,CACE,KAAM,SACN,SAAU,EACZ,EACA,CACE,KAAM,QACN,SAAU,EACZ,IAGKA,EAAA,aAAe,CACpB,MAAO,IAAI,MACX,SAAU,KAAK,SACf,WAAY,KAAK,WACjB,cAAe,KAAK,cACpB,qBAAsB,GACtB,gBAAiB,eAGTA,EAAA,aACAA,EAAA,iBACAA,EAAA,mBA6EAA,EAAA,gBAAWzL,GAAS,KAAK,UAAU,KAAK,IAAI,CAAC,EANvD,CArEA,WAAW,oBAA+B,CACjC,OACL,0BACA,oBACA,cACA,gBACA,eACA,cACA,gBACA,eACA,cACA,gBACA,eACA,cACA,gBACA,eACA,cACA,gBACA,eACA,cACA,gBACA,eACA,cACA,gBACA,eACA,cACA,gBACA,eACA,cACA,gBACA,eACA,cACA,gBACA,eACA,eACA,iBACA,gBACA,eACA,iBACA,gBACA,eACA,iBACA,gBACA,eACA,iBACA,gBACA,eACA,iBACA,gBACA,eACA,iBACA,gBACA,eACA,iBACA,gBACA,eACA,iBACA,gBACA,eACA,iBACA,gBACA,eACA,iBACA,gBAEJ,CAMU,WAAY,CACpB,KAAK,UAAU,CACjB,CAOO,WAAY,CACb,QAAK,MAAM,qBACb,OAGF,KAAK,YAAY,EAEjB,IAAIq6D,EAAU,EACT,KAAK,WAGL,cAAS,QAASC,GAAY,CAC7B,IAAEA,EAAmC,MACvC,OAEDA,EAAmC,MAAM,OAAS,OAClDA,EAAmC,MAAM,QAAU,QAC9C,MAAAlqC,EAAUkqC,EAAmC,cAAgB,EAC/DlqC,EAASiqC,IACDA,EAAAjqC,EACZ,CACD,EACI,cAAS,QAASkqC,GAAY,CAC3BA,EAAmC,QAIxCA,EAAmC,MAAM,QAAU,GAChDD,EAAU,IACXC,EAAmC,MAAM,OAASD,EAAU,MAC/D,CACD,EACH,CAEO,eAAgB,CACrB,QAASpuD,EAAQ,EAAGA,EAAQ,KAAK,MAAM,MAAM,OAAQA,IAAS,CAC5D,MAAMsuD,EAAM,KAAK,MAAM,MAAMtuD,CAAK,EAClC,KAAK,WAAWsuD,CAAG,EAEvB,CAEO,WAAWA,EAAU,CAC1BA,EAAI,OAAS,GAEb,MAAMC,EAAuB,KAAK,0BAA0BD,EAAI,KAAK,EACjEC,GACG,wCAAmCA,EAAsBD,EAAI,MAAM,CAE5E,CAEO,SAASA,EAAU,CACxB,KAAK,cAAc,EACnBA,EAAI,OAAS,GAEb,MAAMC,EAAuB,KAAK,0BAA0BD,EAAI,KAAK,EACjEC,GACG,wCACHA,EACAD,EAAI,OAGV,CAEU,kBAAmB,CACvB,KAAK,MAAM,MAAM,OAAS,GAC5B,KAAK,SAAS,KAAK,MAAM,MAAM,CAAC,CAAC,CAErC,CAEU,0BAA0BtuD,EAAe,CACjD,OACE,KAAK,cACH,oCAAoCA,EAAQ,QACzC,SAET,CAQU,mCACRhI,EACA+kD,EACA,CACA,WAAW,IAAM,CAEP/kD,EAAA,cACN,IAAI,YAAY,qBAAsB,CAAE,OAAQ,CAAE,QAAA+kD,GAAW,IAE9D,GAAG,CACR,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACxB,KAAK,SAAS,EACd,KAAK,iBAAiB,EACjB,UAAKoR,GAAiB,kBAAkB,CAC/C,CAEU,sBAAuB,CAC3B,KAAK,MACF,UAAK,QAASG,GAAQ,CACrBA,EAAA,oBAAoB,eAAgB,KAAK,sBAAsB,EACpE,EAEI,2BAAoB,SAAU,KAAK,QAAQ,CACpD,CAEU,aAAc,CACjB,UAAO,KAAK,iBAAiB,cAAc,EAC3C,cAAW,KAAK,iBAAiB,mBAAmB,EACpD,gBAAa,KAAK,cAAc,cAAc,CACrD,CAEU,gBAAgBE,EAAiB,CACzC,KAAOA,EAAU,KAAK,MAAM,MAAM,QAC3B,WAAM,MAAM,KAAK,CACpB,OAAQ,GACR,MAAO,GACP,QAAS,GACT,OAAQ,GACR,MAAO,KAAK,MAAM,MAAM,OAAS,EAClC,CAEL,CAEU,uBAAuBt0D,EAAc,CACvC,MAAAu0D,EAAUv0D,EAAM,QAAUA,EAAM,WACtC,GAAKu0D,GAGD,KAAK,WAAY,CACb,MAAAC,EAAoBD,EAAO,wBAC3BE,EACJ,KAAK,WAAW,YAAc,EAAID,EAAkB,KAGtD,KAAK,WAAW,WAAaC,EAEjC,CAEU,UAAW,CAEnB,KAAK,YAAY,EAEb,KAAK,MACF,UAAK,QAASL,GAAQ,CACrBA,EAAA,oBAAoB,eAAgB,KAAK,sBAAsB,EAC/DA,EAAA,iBAAiB,eAAgB,KAAK,sBAAsB,EACjE,EAGC,KAAK,MAAM,uBACN,2BAAoB,SAAU,KAAK,QAAQ,EAClD,OAAO,iBAAiB,SAAU,KAAK,SAAU,CAAE,QAAS,GAAM,EAClE,KAAK,UAAU,EAEnB,CAEU,kBAAkB52D,EAAuBC,EAAkB,CACnE,MAAMqI,EAAQ,OAAOtI,EAAc,QAAQ,UAAW,EAAE,CAAC,EACrDsI,GAAS,KAAK,MAAM,MAAM,QACvB,qBAAgBA,EAAQ,CAAC,EAEhC,KAAK,MAAM,MAAMA,CAAK,EAAE,MAAQA,EAC5BtI,EAAc,SAAS,SAAS,IAClC,KAAK,MAAM,MAAMsI,CAAK,EAAE,QAAUrI,GAEhCD,EAAc,SAAS,OAAO,IAChC,KAAK,MAAM,MAAMsI,CAAK,EAAE,MAAQrI,EAChC,KAAK,MAAM,MAAMqI,CAAK,EAAE,OACtB,KAAK,MAAM,MAAMA,CAAK,EAAE,QACxBxJ,GAAU,KAAK,MAAM,MAAMwJ,CAAK,EAAE,KAAK,GAEvCtI,EAAc,SAAS,QAAQ,IACjC,KAAK,MAAM,MAAMsI,CAAK,EAAE,OAASrI,GAKjC,KAAK,MAAM,MAAM,OAAS,GAC1B,KAAK,MAAM,MAAM,CAAC,GAClB,KAAK,MAAM,MAAM,CAAC,EAAE,QAAQ,OAAS,GACrC,KAAK,MAAM,MAAM,CAAC,EAAE,MAAM,OAAS,GACnC,KAAK,MAAM,MAAM,CAAC,EAAE,OAAO,OAAS,GAEpC,KAAK,iBAAiB,CAE1B,CAKU,4BAA4BwR,EAAiBnJ,EAAe,CACvD,OAAAmJ,EAAA,MAAM,4BAA4BA,EAAYnJ,CAAK,EAC5D,CAACmJ,EAAW,QAAUA,EAAW,QACxBA,EAAA,OAAS3S,GAAU2S,EAAW,KAAK,GAErCA,EAAA,OAASA,EAAW,QAAU,GAClCA,CACT,CAEU,+BACRzR,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAEE1J,EAAc,WAAW,KAAK,IAC3B,uBAAkBA,EAAeC,CAAQ,EAC9C,KAAK,SAAS,EAElB,CAEA,MAAgB,WAA0B,CAExC,WAAW,IAAM,CACX,KAAK,MAAM,sBACb,KAAK,UAAU,GAEhB,GAAG,EACN,MAAM,MAAM,WACd,CAEU,UAAyC,CAEjD,MAAI,CAACQ,EAAkB,IAAI,GAAK,KAAK,wBAC/B,KAAK,MAAM,kBAAoB,aAC1B81D,GAEAC,GAGF,IAEX,CACF,EA5WO,IAAMU,GAANT,GACL3uD,EADWovD,GACG,UAAU,YCjC1B,MAAeC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EC8BFC,GAAN,cAAsC7/C,CAAU,CA4CrD,aAAc,CACN,QAvCEzP,EAAA,gBAAW,IACdA,EAAA,cAAS,IAMhBA,EAAA,cAEOA,EAAA,aAAe,CACpB,MAAO,GACP,KAAM,CAAC,EACP,QAAS,CACP,eAAgB,CAAC,EACjB,aAAc,GACd,WAAY,CAAC,CACf,EACA,mBAAqBnN,IACZ,CACL,GAAG,KAAK,MAAM,QAAQ,eACtB,GAAG,KAAK,MAAM,QAAQ,WAAW,eACjC,GAAGA,CAAA,GAGP,eAAiBA,GACR,KAAK,MAAM,mBAAmBA,CAAO,EAAE,QAAU,EAAI,KAE9D,QAAS,KAAK,QAAQ,KAAK,IAAI,EAC/B,eAAgB,KAAK,eAAe,KAAK,IAAI,EAC7C,eAAgB,KAAK,eAAe,KAAK,IAAI,EAC7C,gBAAiB,KAAK,gBAAgB,KAAK,IAAI,EAC/C,mBAAoBsB,GAAS,KAAK,mBAAmB,KAAK,IAAI,CAAC,IAS1D,WAAM,QAAQ,eAAe,UAAY,IAChD,CAtCA,WAAW,oBAA+B,CACjC,OAAC,OAAQ,UAAW,OAAO,CACpC,CAsCU,+BACR+D,EACAE,EACAD,EACA,CACA,GAAID,IAAkB,UAAW,CAE3B,KAAK,MACP,KAAK,MAAM,QAAUC,EAEhB,WAAM,QAAUX,GAAO,CAAE,KAAM,EAAK,EAAGY,EAAUD,CAAQ,EAE1D,MAAAo3D,EAAK,KAAK,MAAM,QAAQ,eAC1BA,GAAM,OAAOA,EAAG,WAAc,WAChCA,EAAG,UAAY,SAAS,cAAcA,EAAG,SAAS,GAAK,QAG7D,CAEU,UAAyC,CAC7C,OAAA52D,EAAkB,IAAI,GACxB,KAAK,eAAe,EAEfwP,EACT,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aAEP,WAAQ,KAAK,cAAc,KAAK,EACrC,KAAK,kBAAkB,EACvB,KAAK,SAAS,CAChB,CAEU,mBAAoB,CAC5B,MAAMg6B,EAAM,KAAK,MACjBA,EAAI,iBAAiB,OAAQ,KAAK,MAAM,kBAAkB,EAC1D,OAAO,iBAAiB,SAAU,KAAK,MAAM,kBAAkB,EAC/DA,EAAI,iBAAiB,QAAS,KAAK,MAAM,OAAO,CAClD,CAEA,MAAgB,WAAY,CAC1B,KAAK,oBAAoB,EACzB,MAAM,MAAM,WACd,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKmtB,GAAwB,kBAAkB,CACtD,CAEA,sBAAuB,CACrB,KAAK,oBAAoB,QAAS,KAAK,MAAM,OAAO,EAC7C,2BAAoB,SAAU,KAAK,kBAAkB,CAC9D,CAMU,WAAW58D,EAAe,CAE9B,OAAAA,EAAM,WAAW,IAAI,EAChB,OAAOA,KAGZA,EAAM,WAAW,KAAK,EACjB,SAASA,KAEXA,CACT,CAEU,gBAAiB,CACzB,KAAK,MAAM,kBAAkB,EAC7B,UAAW88D,KAAS,MAAM,KACxB,KAAK,iBAAiB,KAAK,GAC1B,CACD,MAAMj3C,EAAQi3C,EAAM,aAAa,OAAO,GAAK,GACvC7/C,EAAU6/C,EAAM,UAEhBz3D,GAAM+iB,GAAO,MAAMA,CAAC,EAAI,KAAK,SAAWA,GAC5C,WAAW00C,EAAM,aAAa,GAAG,GAAK,EAAE,GAEpC51C,GAAMkB,GAAO,MAAMA,CAAC,EAAI,KAAK,SAAWA,GAC5C,WAAW00C,EAAM,aAAa,GAAG,GAAK,EAAE,GAGpCC,EAAQD,EAAM,aAAa,OAAO,GAAK,OAC7C,IAAI98D,EAAQ88D,EAAM,aAAa,OAAO,GAAK,OACvC98D,IACMA,EAAA,KAAK,WAAWA,CAAK,GAE/B,MAAMg9D,EAAeF,EAAM,aAAa,eAAe,GAAK,OACtDG,EAAWH,EAAM,aAAa,WAAW,GAAK,OAC9CI,EAAYJ,EAAM,aAAa,YAAY,GAAK,OAChDK,EAAU,CACd,GAAG,KAAK,MAAM,QAAQ,WACtB,eAAgB,KAAK,MAAM,mBAAmB,CAC5C,MAAAt3C,EACA,QAAA5I,EACA,KAAM,GACP,EACD,EAAA5X,EACA,EAAA6hB,EACA,MAAA61C,EACA,MAAA/8D,EACA,aAAAg9D,EACA,SAAAC,EACA,UAAAC,CAAA,EAEG,WAAM,KAAK,KAAKC,CAAO,EAEhC,CAEU,UAAW,CACb,MAAAC,EAAkB,KAAK,MAAM,QAAQ,WAChC,UAACtvD,EAAO+N,CAAG,IAAK,KAAK,MAAM,KAAK,UACzCA,EAAI,MAAQ/N,EACR+N,EAAA,MAAQA,EAAI,OAASuhD,EAAgB,MACrCvhD,EAAA,aAAeA,EAAI,cAAgBuhD,EAAgB,aACnDvhD,EAAA,UAAYA,EAAI,WAAauhD,EAAgB,UAC7CvhD,EAAA,SAAWA,EAAI,UAAYuhD,EAAgB,SAC3CvhD,EAAA,MAAQA,EAAI,OAASuhD,EAAgB,KAE7C,CAKU,qBAAsB,CAC9B,MAAM3tB,EAAM,KAAK,MACX4tB,EAAQ,KAAK,WACnB,QAASp9D,EAAIo9D,EAAM,OAAS,EAAGp9D,GAAK,EAAGA,IACjCo9D,EAAMp9D,CAAC,EAAE,KAAK,WAAW,MAAM,GAC7BwvC,EAAA,aAAa4tB,EAAMp9D,CAAC,EAAE,KAAK,OAAO,CAAC,EAAGo9D,EAAMp9D,CAAC,EAAE,KAAK,CAG9D,CAKA,QAAQ0sD,EAAU,CACZ,QAAK,MAAM,MAAO,CAGpB,MAAMld,EAAM,KAAK,MACX,CACJ,UAAA6tB,EACA,WAAAC,EACA,MAAAvrC,EACA,OAAAC,EACA,aAAAurC,EACA,cAAAC,CACE,EAAAhuB,EACE,CAAE,QAAAiuB,EAAS,QAAAC,CAAY,EAAAhR,EAC7B,IAAItnD,EAAIq4D,EAAUH,EACdr2C,EAAIy2C,EAAUL,EAClB,MAAMM,EAAS5rC,EAAQwrC,EACjBK,EAAS5rC,EAASwrC,EACxB,IAAIK,EAAc9rC,EACd+rC,EAAe9rC,EACf2rC,EAASC,GAEXC,EAAe9rC,EAAQ6rC,EAAUD,EACjCv4D,IAAMy4D,EAAc9rC,GAAS,GACpB6rC,EAASD,IAElBG,EAAgB9rC,EAAS2rC,EAAUC,EACnC32C,IAAM62C,EAAe9rC,GAAU,GAEjC5sB,GAAK,IAAMy4D,EACX52C,GAAK,IAAM62C,EACX,QAAQ,IAAI,CAAE,EAAA14D,EAAG,EAAA6hB,CAAG,GAExB,CACA,eAAelf,EAAc,CAK3B,MAAMg2D,EAAkBh2D,EAAM,OAAuB,aAAa,OAAO,EACzE,GAAIg2D,IAAmB,KACf,UAAI,MAAM,yBAAyB,EAErC,MAAAC,EAAa,SAASD,CAAc,EACtC,SAAMC,CAAU,EACZ,UAAI,MAAM,eAAeD,qBAAkC,EAE7D,MAAAE,EAAW,KAAK,MAAM,KAAK,KAAMriD,GAAQA,EAAI,QAAUoiD,CAAU,EACvE,GAAIC,EACFA,EAAS,GAAKl2D,EAAM,WAEpB,OAAM,IAAI,MACR,mBAAmBi2D,OAAgBD,eAAA,CAGzC,CACA,eAAeh2D,EAAc,CjTjRxB,IAAA9B,EAAA4B,EiTkRQ,UAAA+T,KAAO,KAAK,MAAM,KACvBA,EAAI,KAAO7T,EAAM,OAEf6T,EAAA,GAAG,UAAU,IAAI,QAAQ,EAGxB,KAAK,MAAM,QAAQ,gBAClB3V,EAAA2V,EAAA,WAAA3V,EAAI,UAAU,OAAO,WACzB4B,EAAA+T,EAAI,KAAJ,MAAA/T,EAAQ,cAAc,IAAI,YAAY,cAAc,GAI5D,CACA,gBAAgBE,EAAc,CjT/RzB,IAAA9B,EiTgSG,MAAAooB,EAAQ,KAAK,MAAM,KAAK,KAAMzS,GAAQA,EAAI,KAAO7T,EAAM,MAAM,EAC/DsmB,KACIpoB,EAAAooB,EAAA,WAAApoB,EAAI,UAAU,OAAO,UAE/B,CAEU,oBAAqB,CAK7B,MAAMupC,EAAM,KAAK,MACX,CAAE,MAAAzd,EAAO,OAAAC,EAAQ,aAAAurC,EAAc,cAAAC,GAAkBhuB,EACjDmuB,EAASJ,EAAexrC,EACxB6rC,EAASJ,EAAgBxrC,EACzBksC,EAAM,OAAO,iBAAiB1uB,CAAG,EAAE,iBAAiB,YAAY,EACtE,GACG0uB,IAAQ,SAAWP,EAASC,GAC5BM,IAAQ,WAAaN,EAASD,EAEpB,UAAA/hD,KAAO,KAAK,MAAM,KACvBA,EAAA,IAAMA,EAAI,EAAI,IAAM,IACxBA,EAAI,MAAS+hD,EAASC,GAAWhiD,EAAI,EAAI,IAAO,IAAO,IAAM,YAEtDsiD,IAAQ,SAAWA,IAAQ,UACzB,UAAAtiD,KAAO,KAAK,MAAM,KACvBA,EAAA,KAAOA,EAAI,EAAI,IAAM,IACzBA,EAAI,KAAQgiD,EAASD,GAAW/hD,EAAI,EAAI,IAAO,IAAO,IAAM,QAGnD,WAAAA,KAAO,KAAK,MAAM,KACvBA,EAAA,KAAOA,EAAI,EAAI,IAAM,IACrBA,EAAA,IAAMA,EAAI,EAAI,IAAM,GAG9B,CACF,EA1SO,IAAMuiD,GAANxB,GAILtvD,EAJW8wD,GAIG,UAAU,oBClC1B,MAAeC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WCgBFC,GAAN,cAAsCvhD,CAAU,CA4BrD,aAAc,CACN,QA1BEzP,EAAA,cAMHA,EAAA,aAAsC,CAE3C,KAAM,WACN,OAAQ,CACN,GAAI,KACJ,MAAO,QACP,KAAM,MACR,EACA,aAAc,4BACd,YAAa,6BACb,SAAU,GAEV,SAAU,KAAK,SAAS,KAAK,IAAI,EACjC,YAAa,KAAK,YAAY,KAAK,IAAI,EACvC,YAAa,KAAK,YAAY,KAAK,IAAI,EACvC,SAAU,OACV,QAAS8f,EAAA,GAKJ,WAAQs6B,GAAa,cAC5B,CA1BA,WAAW,oBAAuD,CAChE,MAAO,CAAC,OAAQ,SAAU,iBAAkB,YAAa,eAAe,CAC1E,CA0BU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAK4W,GAAwB,kBAAkB,EACpD,KAAK,kBAAkB,EACvB,KAAK,UAAU,CACjB,CAEU,mBAAoB,CACvB,WAAM,SAAU3uD,GAAS,CAC5B,KAAK,SAASA,CAAI,EACnB,CACH,CAEU,SAASA,EAAwB,CACpC,WAAM,SAAWA,EAAK,SAAS,MACtC,CAEA,MAAgB,YAAa,CAC3B,KAAK,UAAU,CACjB,CAEA,WAAY,CnTlEP,IAAAzJ,EmTmEH,MAAMkhD,GAAWlhD,EAAA,KAAK,qBAAqB,QAAQ,IAAlC,YAAAA,EAAqC,KAAK,GACrDyJ,EAAO,KAAK,MAAM,KAAK,EACxB,WAAM,SAAWA,EAAK,QAAU,OACjCy3C,GAAU,KAAK,MAAM,OAAO,KAAK,MAAM,SAAUA,CAAQ,CAC/D,CAEO,SAASmX,EAAoB,CAC7B,WAAM,IAAIA,CAAK,CACtB,CAKO,aAAc,CACf,KAAK,MAAM,UAAU,KAAK,MAAM,IAAI,KAAK,MAAM,QAAQ,CAC7D,CAKO,aAAc,CACb,MAAA1wD,EAAU,KAAK,MAAM,UAAU,EACjCA,EAAQ,SACNA,EAAQ,cACL,WAAM,IAAI,MAAM,EAEhB,WAAM,IAAI,OAAO,EAEfA,EAAQ,OACbA,EAAQ,WAAaA,EAAQ,cAC1B,WAAM,IAAI,IAAI,EAEd,WAAM,IAAI,OAAO,EAGpBA,EAAQ,WAAaA,EAAQ,aAC1B,WAAM,IAAI,IAAI,EAEd,WAAM,IAAI,MAAM,CAG3B,CAEU,UAAyC,CAC7C,OAAC5H,EAAkB,IAAI,EAGlB,KAFAwP,EAIX,CACF,EAzGO,IAAM+oD,GAANF,GACLhxD,EADWkxD,GACG,UAAU,oBCjB1B,MAAe/oD,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QCoBFgpD,GAAN,cAAoC1hD,CAAU,CAuBnD,aAAc,CACN,QArBDzP,EAAA,cAAS,IACNA,EAAA,gBAAW,IAEXA,EAAA,qBAUHA,EAAA,aAAe,CACpB,SAAU,KAAK,SAAS,KAAK,IAAI,EACjC,MAAO,GACP,QAAS,KAAK,QAAQ,KAAK,IAAI,EAC/B,MAAO,QAKT,CAjBA,WAAW,oBAA+B,CACjC,OAAC,QAAS,WAAY,OAAO,CACtC,CAEU,oBAA+B,CACvC,MAAO,CAAC,OAAO,CACjB,CAaU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKmxD,GAAsB,kBAAkB,CACpD,CAEA,MAAgB,WAAY,CAC1B,KAAK,UAAU,EACf,MAAM,MAAM,WACd,CAEU,WAAY,CACd,MAAAC,EAAQ,KAAK,MAAM,MACnBC,EAAU,KAAK,kBACjBD,GAASC,IACN,kBAAe,IAAItZ,EAAMsZ,EAAS,CACrC,MAAOD,EAAM,QAAU,OAAYA,EAAM,MAAQ,IACjD,SAAUA,EAAM,WAAa,OAAYA,EAAM,SAAW,GAC1D,UAAWA,EAAM,YAAc,OAAYA,EAAM,UAAY,GAC9D,EAGDC,EAAQ,iBAAiBtZ,EAAM,aAAc,KAAK,MAAM,SAAU,CAChE,KAAM,GACP,EAGD,KAAK,aAAa,OAEtB,CAGO,SAAU,CrT1EZ,IAAAn/C,GqT2EHA,EAAA,KAAK,eAAL,MAAAA,EAAmB,MACrB,CAGO,SAAS8B,EAAczC,EAAkB,CrT/E3C,IAAAW,EqTgFEX,IACHA,EAAKwC,GAAoBC,CAAK,GAEhC,MAAM42D,IACJ14D,EAAA,KAAK,MAAM,UAAX,YAAAA,EAAoB,UAAW,KAE/B,OAAO04D,GAAA,YAAAA,EAAgB,aAAe,YACtC,KAAK,MAAM,OACXr5D,GAEeq5D,EAAA,WAAW52D,EAAOzC,EAAI,KAAK,MAAM,MAAO,KAAK,MAAM,KAAK,CAE3E,CACU,UAAyC,CAC1C,OAAAkQ,EACT,CACF,EAhFO,IAAMopD,GAANJ,GACLnxD,EADWuxD,GACG,UAAU,kBCcnB,MAAMC,GAAN,cAAuC/hD,CAAU,CA2BtD,aAAc,CACN,QAjBEzP,EAAA,gBAAW,IAEdA,EAAA,cAAS,IAENA,EAAA,wBAEAA,EAAA,uBAAkBkC,EAAgB,YAAY,WAAW,GAE5DlC,EAAA,aAAe,CACpB,SAAU,OACV,OAAQ,KAAK,OACb,MAAO,YACP,SAAU,GACV,SAAU,KAKV,KAAK,gBAAgB,KACnB,8BACA,KAAK,qBACL,KAEJ,CAjCA,WAAW,oBAAwD,CACjE,MAAO,CAAC,WAAW,CACrB,CAEU,oBAAwD,CAChE,MAAO,CAAC,WAAW,CACrB,CA6BO,QAAS,CACT,WAAM,SAAU,KAAK,eAAe,EACrC,KAAK,iBACP,KAAK,gBAAgB,QACnBsgB,EAAc,WAAW,OACzB,KAAK,MAAM,SAGjB,CAEU,sBAAuB,CtT7E5B,IAAA1nB,EsT8EH,KAAK,MAAM,sBAAsB,GAEjCA,EAAA,KAAK,kBAAL,MAAAA,EAAsB,QACpB0nB,EAAc,WAAW,KACzB,KAAK,MAAM,SAEf,CAEA,MAAgB,WAAY,CAC1B,MAAM,MAAM,WACd,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKkxC,GAAyB,kBAAkB,CACvD,CAEU,eAAevuD,EAAc,CACrC,KAAK,MAAM,MAAQA,EACnB,KAAK,MAAM,SAAWA,IAAU,UAAYA,IAAU,UACtD,KAAK,MAAM,SAAW,CAAC,KAAK,MAAM,QACpC,CAEU,oBAAoBzH,EAAY,CACpC,KAAK,iBACP,KAAK,gBAAgB,IACnB8kB,EAAc,WAAW,QACzB,KAAK,eACL,MAGE,MAAA1e,EAAY0e,EAAc,SAAW9kB,EACtC,WAAM,wCAAwCoG,GAAW,EACzD,qBAAkB,IAAIM,EAAgBN,CAAS,EACpD,KAAK,gBAAgB,GACnB0e,EAAc,WAAW,QACzB,KAAK,eACL,MAGF,KAAK,gBAAgB,GACnBA,EAAc,WAAW,MACzB,KAAK,eACL,KAEJ,CAEA,MAAgB,yBACdpoB,EACAE,EACAD,EACAyJ,EACA,CACM,+BACJ1J,EACAE,EACAD,EACAyJ,CAAA,CAEJ,CAEU,+BACR1J,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAEE1J,IAAkB,YAAcC,GAClC,KAAK,oBAAoBA,CAAQ,CAErC,CAGU,sBAAuB,CAC/B,MAAM,qBAAqB,EACvB,KAAK,iBACP,KAAK,gBAAgB,IACnBmoB,EAAc,WAAW,QACzB,KAAK,eACL,KAGN,CAEU,UAAyC,CAC7C,OAAC3nB,EAAkB,IAAI,GACjB,aACN,qHAGG,IACT,CACF,EAjJO,IAAM84D,GAAND,GASLxxD,EATWyxD,GASG,UAAU,0wBClCbC,GAAmD,SAC9DjwD,GAAA,SACAyV,GAAA,WACAzT,GAAA,WACAF,GACA,UAAAouD,GACA,KAAKC,EAAiB,GAAI,CACxB,MAAM/+D,EAAU2E,GACd,CAAE,KAAM,GAAM,WAAY,EAAK,EAC/Bo6D,EACAC,EAAU,EAEHC,UAAW,aAAaj/D,CAAO,EACjC,IACT,CACF,4RChBA,SAASk/D,GAAQh9D,EAAO,CACtB,OAAQ,MAAM,QAEV,MAAM,QAAQA,CAAK,EADnBi9D,GAAOj9D,CAAK,IAAM,gBAExB,CAGA,MAAMk9D,GAAW,EAAI,EACrB,SAASC,GAAan9D,EAAO,CAE3B,GAAI,OAAOA,GAAS,SAClB,OAAOA,EAET,IAAIF,EAASE,EAAQ,GACrB,OAAOF,GAAU,KAAO,EAAIE,GAAS,CAACk9D,GAAW,KAAOp9D,CAC1D,CAEA,SAASs9D,GAASp9D,EAAO,CACvB,OAAOA,GAAS,KAAO,GAAKm9D,GAAan9D,CAAK,CAChD,CAEA,SAASwB,GAASxB,EAAO,CACvB,OAAO,OAAOA,GAAU,QAC1B,CAEA,SAASsB,GAAStB,EAAO,CACvB,OAAO,OAAOA,GAAU,QAC1B,CAGA,SAASuB,GAAUvB,EAAO,CACxB,OACEA,IAAU,IACVA,IAAU,IACTq9D,GAAar9D,CAAK,GAAKi9D,GAAOj9D,CAAK,GAAK,kBAE7C,CAEA,SAASO,GAASP,EAAO,CACvB,OAAO,OAAOA,GAAU,QAC1B,CAGA,SAASq9D,GAAar9D,EAAO,CAC3B,OAAOO,GAASP,CAAK,GAAKA,IAAU,IACtC,CAEA,SAASmB,GAAUnB,EAAO,CACxB,OAA8BA,GAAU,IAC1C,CAEA,SAASs9D,GAAQt9D,EAAO,CACtB,MAAO,CAACA,EAAM,KAAI,EAAG,MACvB,CAIA,SAASi9D,GAAOj9D,EAAO,CACrB,OAAOA,GAAS,KACZA,IAAU,OACR,qBACA,gBACF,OAAO,UAAU,SAAS,KAAKA,CAAK,CAC1C,CAIA,MAAMu9D,GAAuB,yBAEvBC,GAAwCv5D,GAC5C,yBAAyBA,IAErBw5D,GAA4B/hD,GAChC,iCAAiCA,KAE7BgiD,GAAwBlxD,GAAS,WAAWA,oBAE5CmxD,GAA4B15D,GAChC,6BAA6BA,gCAEzB25D,GAAS,OAAO,UAAU,eAEhC,MAAMC,EAAS,CACb,YAAY91C,EAAM,CAChB,KAAK,MAAQ,GACb,KAAK,QAAU,GAEf,IAAI+1C,EAAc,EAElB/1C,EAAK,QAAS9jB,GAAQ,CACpB,IAAI1F,EAAMw/D,GAAU95D,CAAG,EAEvB65D,GAAev/D,EAAI,OAEnB,KAAK,MAAM,KAAKA,CAAG,EACnB,KAAK,QAAQA,EAAI,EAAE,EAAIA,EAEvBu/D,GAAev/D,EAAI,MACzB,CAAK,EAGD,KAAK,MAAM,QAAS0F,GAAQ,CAC1BA,EAAI,QAAU65D,CACpB,CAAK,CACF,CACD,IAAIE,EAAO,CACT,OAAO,KAAK,QAAQA,CAAK,CAC1B,CACD,MAAO,CACL,OAAO,KAAK,KACb,CACD,QAAS,CACP,OAAO,KAAK,UAAU,KAAK,KAAK,CACjC,CACH,CAEA,SAASD,GAAU95D,EAAK,CACtB,IAAI2H,EAAO,KACPnF,EAAK,KACLD,EAAM,KACNy3D,EAAS,EACTC,EAAQ,KAEZ,GAAI18D,GAASyC,CAAG,GAAK+4D,GAAQ/4D,CAAG,EAC9BuC,EAAMvC,EACN2H,EAAOuyD,GAAcl6D,CAAG,EACxBwC,EAAK23D,GAAYn6D,CAAG,MACf,CACL,GAAI,CAAC25D,GAAO,KAAK35D,EAAK,MAAM,EAC1B,MAAM,IAAI,MAAMy5D,GAAqB,MAAM,CAAC,EAG9C,MAAMlxD,EAAOvI,EAAI,KAGjB,GAFAuC,EAAMgG,EAEFoxD,GAAO,KAAK35D,EAAK,QAAQ,IAC3Bg6D,EAASh6D,EAAI,OAETg6D,GAAU,GACZ,MAAM,IAAI,MAAMN,GAAyBnxD,CAAI,CAAC,EAIlDZ,EAAOuyD,GAAc3xD,CAAI,EACzB/F,EAAK23D,GAAY5xD,CAAI,EACrB0xD,EAAQj6D,EAAI,MAGd,MAAO,CAAE,KAAA2H,EAAM,GAAAnF,EAAI,OAAAw3D,EAAQ,IAAAz3D,EAAK,MAAA03D,CAAO,CACzC,CAEA,SAASC,GAAcl6D,EAAK,CAC1B,OAAO+4D,GAAQ/4D,CAAG,EAAIA,EAAMA,EAAI,MAAM,GAAG,CAC3C,CAEA,SAASm6D,GAAYn6D,EAAK,CACxB,OAAO+4D,GAAQ/4D,CAAG,EAAIA,EAAI,KAAK,GAAG,EAAIA,CACxC,CAEA,SAAS0jB,GAAIppB,EAAKqN,EAAM,CACtB,IAAI+qB,EAAO,GACP/a,EAAM,GAEV,MAAMyiD,EAAU,CAAC9/D,EAAKqN,EAAMH,IAAU,CACpC,GAAKtK,GAAU5C,CAAG,EAGlB,GAAI,CAACqN,EAAKH,CAAK,EAEbkrB,EAAK,KAAKp4B,CAAG,MACR,CACL,IAAI0F,EAAM2H,EAAKH,CAAK,EAEpB,MAAMzL,EAAQzB,EAAI0F,CAAG,EAErB,GAAI,CAAC9C,GAAUnB,CAAK,EAClB,OAKF,GACEyL,IAAUG,EAAK,OAAS,IACvBpK,GAASxB,CAAK,GAAKsB,GAAStB,CAAK,GAAKuB,GAAUvB,CAAK,GAEtD22B,EAAK,KAAKymC,GAASp9D,CAAK,CAAC,UAChBg9D,GAAQh9D,CAAK,EAAG,CACzB4b,EAAM,GAEN,QAAShe,EAAI,EAAGoX,EAAMhV,EAAM,OAAQpC,EAAIoX,EAAKpX,GAAK,EAChDygE,EAAQr+D,EAAMpC,CAAC,EAAGgO,EAAMH,EAAQ,CAAC,OAE1BG,EAAK,QAEdyyD,EAAQr+D,EAAO4L,EAAMH,EAAQ,CAAC,EAGtC,EAGE,OAAA4yD,EAAQ9/D,EAAKiD,GAASoK,CAAI,EAAIA,EAAK,MAAM,GAAG,EAAIA,EAAM,CAAC,EAEhDgQ,EAAM+a,EAAOA,EAAK,CAAC,CAC5B,CAEA,MAAM2nC,GAAe,CAInB,eAAgB,GAGhB,eAAgB,GAEhB,mBAAoB,CACtB,EAEMC,GAAe,CAGnB,gBAAiB,GAEjB,aAAc,GAEd,KAAM,CAAE,EAER,WAAY,GAEZ,OAAQ,CAAC9oD,EAAGC,IACVD,EAAE,QAAUC,EAAE,MAASD,EAAE,IAAMC,EAAE,IAAM,GAAK,EAAKD,EAAE,MAAQC,EAAE,MAAQ,GAAK,CAC9E,EAEM8oD,GAAe,CAEnB,SAAU,EAGV,UAAW,GAMX,SAAU,GACZ,EAEMC,GAAkB,CAEtB,kBAAmB,GAGnB,MAAO92C,GAIP,eAAgB,GAIhB,gBAAiB,GAEjB,gBAAiB,CACnB,EAEA,IAAIwgB,EAAS,CACX,GAAGo2B,GACH,GAAGD,GACH,GAAGE,GACH,GAAGC,EACL,EAEA,MAAMC,GAAQ,SAId,SAASC,GAAKV,EAAS,EAAGW,EAAW,EAAG,CACtC,MAAMxvD,EAAQ,IAAI,IACZsV,EAAI,KAAK,IAAI,GAAIk6C,CAAQ,EAE/B,MAAO,CACL,IAAI5+D,EAAO,CACT,MAAM6+D,EAAY7+D,EAAM,MAAM0+D,EAAK,EAAE,OAErC,GAAItvD,EAAM,IAAIyvD,CAAS,EACrB,OAAOzvD,EAAM,IAAIyvD,CAAS,EAI5B,MAAMF,EAAO,EAAI,KAAK,IAAIE,EAAW,GAAMZ,CAAM,EAG3C7/D,EAAI,WAAW,KAAK,MAAMugE,EAAOj6C,CAAC,EAAIA,CAAC,EAE7C,OAAAtV,EAAM,IAAIyvD,EAAWzgE,CAAC,EAEfA,CACR,EACD,OAAQ,CACNgR,EAAM,MAAK,CACZ,CACF,CACH,CAEA,MAAM0vD,EAAU,CACd,YAAY,CACV,MAAAZ,EAAQ/1B,EAAO,MACf,gBAAA42B,EAAkB52B,EAAO,eAC1B,EAAG,GAAI,CACN,KAAK,KAAOw2B,GAAKI,EAAiB,CAAC,EACnC,KAAK,MAAQb,EACb,KAAK,UAAY,GAEjB,KAAK,gBAAe,CACrB,CACD,WAAWc,EAAO,GAAI,CACpB,KAAK,KAAOA,CACb,CACD,gBAAgBC,EAAU,GAAI,CAC5B,KAAK,QAAUA,CAChB,CACD,QAAQl3C,EAAO,GAAI,CACjB,KAAK,KAAOA,EACZ,KAAK,SAAW,GAChBA,EAAK,QAAQ,CAAC9jB,EAAK+L,IAAQ,CACzB,KAAK,SAAS/L,EAAI,EAAE,EAAI+L,CAC9B,CAAK,CACF,CACD,QAAS,CACH,KAAK,WAAa,CAAC,KAAK,KAAK,SAIjC,KAAK,UAAY,GAGbxO,GAAS,KAAK,KAAK,CAAC,CAAC,EACvB,KAAK,KAAK,QAAQ,CAAC6D,EAAK65D,IAAa,CACnC,KAAK,WAAW75D,EAAK65D,CAAQ,CACrC,CAAO,EAGD,KAAK,KAAK,QAAQ,CAAC75D,EAAK65D,IAAa,CACnC,KAAK,WAAW75D,EAAK65D,CAAQ,CACrC,CAAO,EAGH,KAAK,KAAK,QACX,CAED,IAAI75D,EAAK,CACP,MAAM2K,EAAM,KAAK,OAEbxO,GAAS6D,CAAG,EACd,KAAK,WAAWA,EAAK2K,CAAG,EAExB,KAAK,WAAW3K,EAAK2K,CAAG,CAE3B,CAED,SAASA,EAAK,CACZ,KAAK,QAAQ,OAAOA,EAAK,CAAC,EAG1B,QAASpS,EAAIoS,EAAKgF,EAAM,KAAK,KAAM,EAAEpX,EAAIoX,EAAKpX,GAAK,EACjD,KAAK,QAAQA,CAAC,EAAE,GAAK,CAExB,CACD,uBAAuBqxB,EAAM+uC,EAAO,CAClC,OAAO/uC,EAAK,KAAK,SAAS+uC,CAAK,CAAC,CACjC,CACD,MAAO,CACL,OAAO,KAAK,QAAQ,MACrB,CACD,WAAW34D,EAAK65D,EAAU,CACxB,GAAI,CAAC/9D,GAAUkE,CAAG,GAAKi4D,GAAQj4D,CAAG,EAChC,OAGF,IAAI85D,EAAS,CACX,EAAG95D,EACH,EAAG65D,EACH,EAAG,KAAK,KAAK,IAAI75D,CAAG,CAC1B,EAEI,KAAK,QAAQ,KAAK85D,CAAM,CACzB,CACD,WAAW95D,EAAK65D,EAAU,CACxB,IAAIC,EAAS,CAAE,EAAGD,EAAU,EAAG,CAAE,GAGjC,KAAK,KAAK,QAAQ,CAACj7D,EAAKm7D,IAAa,CACnC,IAAIp/D,EAAQiE,EAAI,MAAQA,EAAI,MAAMoB,CAAG,EAAI,KAAK,MAAMA,EAAKpB,EAAI,IAAI,EAEjE,GAAK9C,GAAUnB,CAAK,GAIpB,GAAIg9D,GAAQh9D,CAAK,EAAG,CAClB,IAAIq/D,EAAa,GACjB,MAAMC,EAAQ,CAAC,CAAE,eAAgB,GAAI,MAAAt/D,CAAK,CAAE,EAE5C,KAAOs/D,EAAM,QAAQ,CACnB,KAAM,CAAE,eAAAC,EAAgB,MAAAv/D,CAAO,EAAGs/D,EAAM,IAAG,EAE3C,GAAKn+D,GAAUnB,CAAK,EAIpB,GAAIwB,GAASxB,CAAK,GAAK,CAACs9D,GAAQt9D,CAAK,EAAG,CACtC,IAAIw/D,EAAY,CACd,EAAGx/D,EACH,EAAGu/D,EACH,EAAG,KAAK,KAAK,IAAIv/D,CAAK,CACpC,EAEYq/D,EAAW,KAAKG,CAAS,OAChBxC,GAAQh9D,CAAK,GACtBA,EAAM,QAAQ,CAACivB,EAAMnf,IAAM,CACzBwvD,EAAM,KAAK,CACT,eAAgBxvD,EAChB,MAAOmf,CACvB,CAAe,CACf,CAAa,EAGLkwC,EAAO,EAAEC,CAAQ,EAAIC,UACZ79D,GAASxB,CAAK,GAAK,CAACs9D,GAAQt9D,CAAK,EAAG,CAC7C,IAAIw/D,EAAY,CACd,EAAGx/D,EACH,EAAG,KAAK,KAAK,IAAIA,CAAK,CAChC,EAEQm/D,EAAO,EAAEC,CAAQ,EAAII,GAE7B,CAAK,EAED,KAAK,QAAQ,KAAKL,CAAM,CACzB,CACD,QAAS,CACP,MAAO,CACL,KAAM,KAAK,KACX,QAAS,KAAK,OACf,CACF,CACH,CAEA,SAASM,GACP13C,EACAi3C,EACA,CAAE,MAAAd,EAAQ/1B,EAAO,MAAO,gBAAA42B,EAAkB52B,EAAO,eAAe,EAAK,CAAE,EACvE,CACA,MAAMu3B,EAAU,IAAIZ,GAAU,CAAE,MAAAZ,EAAO,gBAAAa,CAAiB,GACxD,OAAAW,EAAQ,QAAQ33C,EAAK,IAAIg2C,EAAS,CAAC,EACnC2B,EAAQ,WAAWV,CAAI,EACvBU,EAAQ,OAAM,EACPA,CACT,CAEA,SAASC,GACPryD,EACA,CAAE,MAAA4wD,EAAQ/1B,EAAO,MAAO,gBAAA42B,EAAkB52B,EAAO,eAAe,EAAK,CAAE,EACvE,CACA,KAAM,CAAE,KAAApgB,EAAM,QAAAk3C,CAAS,EAAG3xD,EACpBoyD,EAAU,IAAIZ,GAAU,CAAE,MAAAZ,EAAO,gBAAAa,CAAiB,GACxD,OAAAW,EAAQ,QAAQ33C,CAAI,EACpB23C,EAAQ,gBAAgBT,CAAO,EACxBS,CACT,CAEA,SAASE,GACPC,EACA,CACE,OAAAC,EAAS,EACT,gBAAAC,EAAkB,EAClB,iBAAAC,EAAmB,EACnB,SAAAh6D,EAAWmiC,EAAO,SAClB,eAAA83B,EAAiB93B,EAAO,cAC5B,EAAM,CAAE,EACN,CACA,MAAM+3B,EAAWJ,EAASD,EAAQ,OAElC,GAAII,EACF,OAAOC,EAGT,MAAMC,EAAY,KAAK,IAAIH,EAAmBD,CAAe,EAE7D,OAAK/5D,EAKEk6D,EAAWC,EAAYn6D,EAHrBm6D,EAAY,EAAMD,CAI7B,CAEA,SAASE,GACPC,EAAY,CAAE,EACdC,EAAqBn4B,EAAO,mBAC5B,CACA,IAAIo4B,EAAU,GACV5uD,EAAQ,GACRkK,EAAM,GACNje,EAAI,EAER,QAASoX,EAAMqrD,EAAU,OAAQziE,EAAIoX,EAAKpX,GAAK,EAAG,CAChD,IAAIsnB,EAAQm7C,EAAUziE,CAAC,EACnBsnB,GAASvT,IAAU,GACrBA,EAAQ/T,EACC,CAACsnB,GAASvT,IAAU,KAC7BkK,EAAMje,EAAI,EACNie,EAAMlK,EAAQ,GAAK2uD,GACrBC,EAAQ,KAAK,CAAC5uD,EAAOkK,CAAG,CAAC,EAE3BlK,EAAQ,IAKZ,OAAI0uD,EAAUziE,EAAI,CAAC,GAAKA,EAAI+T,GAAS2uD,GACnCC,EAAQ,KAAK,CAAC5uD,EAAO/T,EAAI,CAAC,CAAC,EAGtB2iE,CACT,CAGA,MAAMC,GAAW,GAEjB,SAASzlD,GACP7S,EACA23D,EACAY,EACA,CACE,SAAAl3D,EAAW4+B,EAAO,SAClB,SAAAniC,EAAWmiC,EAAO,SAClB,UAAAgqB,EAAYhqB,EAAO,UACnB,eAAAu4B,EAAiBv4B,EAAO,eACxB,mBAAAm4B,EAAqBn4B,EAAO,mBAC5B,eAAAw4B,EAAiBx4B,EAAO,eACxB,eAAA83B,EAAiB93B,EAAO,cAC5B,EAAM,CAAE,EACN,CACA,GAAI03B,EAAQ,OAASW,GACnB,MAAM,IAAI,MAAM/C,GAAyB+C,EAAQ,CAAC,EAGpD,MAAMI,EAAaf,EAAQ,OAErBgB,EAAU34D,EAAK,OAEf83D,EAAmB,KAAK,IAAI,EAAG,KAAK,IAAIz2D,EAAUs3D,CAAO,CAAC,EAEhE,IAAIC,EAAmB3O,EAEnB4O,EAAef,EAInB,MAAMgB,EAAiBV,EAAqB,GAAKK,EAE3CM,EAAYD,EAAiB,MAAMH,CAAO,EAAI,GAEpD,IAAIp1D,EAGJ,MAAQA,EAAQvD,EAAK,QAAQ23D,EAASkB,CAAY,GAAK,IAAI,CACzD,IAAIG,EAAQtB,GAAeC,EAAS,CAClC,gBAAiBp0D,EACjB,iBAAAu0D,EACA,SAAAh6D,EACA,eAAAi6D,CACN,CAAK,EAKD,GAHAa,EAAmB,KAAK,IAAII,EAAOJ,CAAgB,EACnDC,EAAet1D,EAAQm1D,EAEnBI,EAAgB,CAClB,IAAIpjE,EAAI,EACR,KAAOA,EAAIgjE,GACTK,EAAUx1D,EAAQ7N,CAAC,EAAI,EACvBA,GAAK,GAMXmjE,EAAe,GAEf,IAAII,EAAa,GACbC,EAAa,EACbC,EAAST,EAAaC,EAE1B,MAAMS,EAAO,GAAMV,EAAa,EAEhC,QAAShjE,EAAI,EAAGA,EAAIgjE,EAAYhjE,GAAK,EAAG,CAItC,IAAI2jE,EAAS,EACTC,EAASH,EAEb,KAAOE,EAASC,GACA5B,GAAeC,EAAS,CACpC,OAAQjiE,EACR,gBAAiBoiE,EAAmBwB,EACpC,iBAAAxB,EACA,SAAAh6D,EACA,eAAAi6D,CACR,CAAO,GAEYa,EACXS,EAASC,EAETH,EAASG,EAGXA,EAAS,KAAK,OAAOH,EAASE,GAAU,EAAIA,CAAM,EAIpDF,EAASG,EAET,IAAI7vD,EAAQ,KAAK,IAAI,EAAGquD,EAAmBwB,EAAS,CAAC,EACjDC,EAASf,EACTG,EACA,KAAK,IAAIb,EAAmBwB,EAAQX,CAAO,EAAID,EAG/Cc,EAAS,MAAMD,EAAS,CAAC,EAE7BC,EAAOD,EAAS,CAAC,GAAK,GAAK7jE,GAAK,EAEhC,QAAS+jE,EAAIF,EAAQE,GAAKhwD,EAAOgwD,GAAK,EAAG,CACvC,IAAI5B,GAAkB4B,EAAI,EACtBC,EAAYnB,EAAgBv4D,EAAK,OAAO63D,EAAe,CAAC,EAgB5D,GAdIiB,IAEFC,EAAUlB,EAAe,EAAI,CAAC,CAAC,CAAC6B,GAIlCF,EAAOC,CAAC,GAAMD,EAAOC,EAAI,CAAC,GAAK,EAAK,GAAKC,EAGrChkE,IACF8jE,EAAOC,CAAC,IACJR,EAAWQ,EAAI,CAAC,EAAIR,EAAWQ,CAAC,IAAM,EAAK,EAAIR,EAAWQ,EAAI,CAAC,GAGjED,EAAOC,CAAC,EAAIL,IACdF,EAAaxB,GAAeC,EAAS,CACnC,OAAQjiE,EACR,gBAAAmiE,GACA,iBAAAC,EACA,SAAAh6D,EACA,eAAAi6D,CACV,CAAS,EAIGmB,GAAcN,GAAkB,CAMlC,GAJAA,EAAmBM,EACnBL,EAAehB,GAGXgB,GAAgBf,EAClB,MAIFruD,EAAQ,KAAK,IAAI,EAAG,EAAIquD,EAAmBe,CAAY,GAc7D,GARcnB,GAAeC,EAAS,CACpC,OAAQjiE,EAAI,EACZ,gBAAiBoiE,EACjB,iBAAAA,EACA,SAAAh6D,EACA,eAAAi6D,CACN,CAAK,EAEWa,EACV,MAGFK,EAAaO,EAGf,MAAM5hE,EAAS,CACb,QAASihE,GAAgB,EAEzB,MAAO,KAAK,IAAI,KAAOK,CAAU,CACrC,EAEE,GAAIJ,EAAgB,CAClB,MAAMT,EAAUH,GAAqBa,EAAWX,CAAkB,EAC7DC,EAAQ,OAEFI,IACT7gE,EAAO,QAAUygE,GAFjBzgE,EAAO,QAAU,GAMrB,OAAOA,CACT,CAEA,SAAS+hE,GAAsBhC,EAAS,CACtC,IAAIyB,EAAO,GAEX,QAAS1jE,EAAI,EAAGoX,EAAM6qD,EAAQ,OAAQjiE,EAAIoX,EAAKpX,GAAK,EAAG,CACrD,MAAMkkE,EAAOjC,EAAQ,OAAOjiE,CAAC,EAC7B0jE,EAAKQ,CAAI,GAAKR,EAAKQ,CAAI,GAAK,GAAM,GAAM9sD,EAAMpX,EAAI,EAGpD,OAAO0jE,CACT,CAEA,MAAMS,EAAY,CAChB,YACElC,EACA,CACE,SAAAt2D,EAAW4+B,EAAO,SAClB,UAAAgqB,EAAYhqB,EAAO,UACnB,SAAAniC,EAAWmiC,EAAO,SAClB,eAAAw4B,EAAiBx4B,EAAO,eACxB,eAAAu4B,EAAiBv4B,EAAO,eACxB,mBAAAm4B,EAAqBn4B,EAAO,mBAC5B,gBAAA65B,EAAkB75B,EAAO,gBACzB,eAAA83B,EAAiB93B,EAAO,cAC9B,EAAQ,CAAE,EACN,CAgBA,GAfA,KAAK,QAAU,CACb,SAAA5+B,EACA,UAAA4oD,EACA,SAAAnsD,EACA,eAAA26D,EACA,eAAAD,EACA,mBAAAJ,EACA,gBAAA0B,EACA,eAAA/B,CACN,EAEI,KAAK,QAAU+B,EAAkBnC,EAAUA,EAAQ,YAAW,EAE9D,KAAK,OAAS,GAEV,CAAC,KAAK,QAAQ,OAChB,OAGF,MAAMoC,EAAW,CAACpC,EAAS9uD,IAAe,CACxC,KAAK,OAAO,KAAK,CACf,QAAA8uD,EACA,SAAUgC,GAAsBhC,CAAO,EACvC,WAAA9uD,CACR,CAAO,CACP,EAEUiE,EAAM,KAAK,QAAQ,OAEzB,GAAIA,EAAMwrD,GAAU,CAClB,IAAI5iE,EAAI,EACR,MAAMskE,EAAYltD,EAAMwrD,GAClB3kD,EAAM7G,EAAMktD,EAElB,KAAOtkE,EAAIie,GACTomD,EAAS,KAAK,QAAQ,OAAOrkE,EAAG4iE,EAAQ,EAAG5iE,CAAC,EAC5CA,GAAK4iE,GAGP,GAAI0B,EAAW,CACb,MAAMnxD,EAAaiE,EAAMwrD,GACzByB,EAAS,KAAK,QAAQ,OAAOlxD,CAAU,EAAGA,CAAU,QAGtDkxD,EAAS,KAAK,QAAS,CAAC,CAE3B,CAED,SAAS/5D,EAAM,CACb,KAAM,CAAE,gBAAA85D,EAAiB,eAAArB,GAAmB,KAAK,QAOjD,GALKqB,IACH95D,EAAOA,EAAK,eAIV,KAAK,UAAYA,EAAM,CACzB,IAAIpI,EAAS,CACX,QAAS,GACT,MAAO,CACf,EAEM,OAAI6gE,IACF7gE,EAAO,QAAU,CAAC,CAAC,EAAGoI,EAAK,OAAS,CAAC,CAAC,GAGjCpI,EAIT,KAAM,CACJ,SAAAyJ,EACA,SAAAvD,EACA,UAAAmsD,EACA,eAAAuO,EACA,mBAAAJ,EACA,eAAAL,CACN,EAAQ,KAAK,QAET,IAAIkC,EAAa,GACbC,EAAa,EACbC,EAAa,GAEjB,KAAK,OAAO,QAAQ,CAAC,CAAE,QAAAxC,EAAS,SAAAyC,EAAU,WAAAvxD,KAAiB,CACzD,KAAM,CAAE,QAAAw5C,EAAS,MAAA2W,EAAO,QAAAX,CAAO,EAAKxlD,GAAO7S,EAAM23D,EAASyC,EAAU,CAClE,SAAU/4D,EAAWwH,EACrB,SAAA/K,EACA,UAAAmsD,EACA,eAAAuO,EACA,mBAAAJ,EACA,eAAAK,EACA,eAAAV,CACR,CAAO,EAEG1V,IACF8X,EAAa,IAGfD,GAAclB,EAEV3W,GAAWgW,IACb4B,EAAa,CAAC,GAAGA,EAAY,GAAG5B,CAAO,EAE/C,CAAK,EAED,IAAIzgE,EAAS,CACX,QAASuiE,EACT,MAAOA,EAAaD,EAAa,KAAK,OAAO,OAAS,CAC5D,EAEI,OAAIC,GAAc1B,IAChB7gE,EAAO,QAAUqiE,GAGZriE,CACR,CACH,CAEA,MAAMyiE,EAAU,CACd,YAAY1C,EAAS,CACnB,KAAK,QAAUA,CAChB,CACD,OAAO,aAAaA,EAAS,CAC3B,OAAO2C,GAAS3C,EAAS,KAAK,UAAU,CACzC,CACD,OAAO,cAAcA,EAAS,CAC5B,OAAO2C,GAAS3C,EAAS,KAAK,WAAW,CAC1C,CACD,QAAiB,CAAE,CACrB,CAEA,SAAS2C,GAAS3C,EAASz5C,EAAK,CAC9B,MAAMnS,EAAU4rD,EAAQ,MAAMz5C,CAAG,EACjC,OAAOnS,EAAUA,EAAQ,CAAC,EAAI,IAChC,CAIA,MAAMwuD,WAAmBF,EAAU,CACjC,YAAY1C,EAAS,CACnB,MAAMA,CAAO,CACd,CACD,WAAW,MAAO,CAChB,MAAO,OACR,CACD,WAAW,YAAa,CACtB,MAAO,WACR,CACD,WAAW,aAAc,CACvB,MAAO,SACR,CACD,OAAO33D,EAAM,CACX,MAAMqiD,EAAUriD,IAAS,KAAK,QAE9B,MAAO,CACL,QAAAqiD,EACA,MAAOA,EAAU,EAAI,EACrB,QAAS,CAAC,EAAG,KAAK,QAAQ,OAAS,CAAC,CACrC,CACF,CACH,CAIA,MAAMmY,WAA0BH,EAAU,CACxC,YAAY1C,EAAS,CACnB,MAAMA,CAAO,CACd,CACD,WAAW,MAAO,CAChB,MAAO,eACR,CACD,WAAW,YAAa,CACtB,MAAO,WACR,CACD,WAAW,aAAc,CACvB,MAAO,SACR,CACD,OAAO33D,EAAM,CAEX,MAAMqiD,EADQriD,EAAK,QAAQ,KAAK,OAAO,IACb,GAE1B,MAAO,CACL,QAAAqiD,EACA,MAAOA,EAAU,EAAI,EACrB,QAAS,CAAC,EAAGriD,EAAK,OAAS,CAAC,CAC7B,CACF,CACH,CAIA,MAAMy6D,WAAyBJ,EAAU,CACvC,YAAY1C,EAAS,CACnB,MAAMA,CAAO,CACd,CACD,WAAW,MAAO,CAChB,MAAO,cACR,CACD,WAAW,YAAa,CACtB,MAAO,YACR,CACD,WAAW,aAAc,CACvB,MAAO,UACR,CACD,OAAO33D,EAAM,CACX,MAAMqiD,EAAUriD,EAAK,WAAW,KAAK,OAAO,EAE5C,MAAO,CACL,QAAAqiD,EACA,MAAOA,EAAU,EAAI,EACrB,QAAS,CAAC,EAAG,KAAK,QAAQ,OAAS,CAAC,CACrC,CACF,CACH,CAIA,MAAMqY,WAAgCL,EAAU,CAC9C,YAAY1C,EAAS,CACnB,MAAMA,CAAO,CACd,CACD,WAAW,MAAO,CAChB,MAAO,sBACR,CACD,WAAW,YAAa,CACtB,MAAO,aACR,CACD,WAAW,aAAc,CACvB,MAAO,WACR,CACD,OAAO33D,EAAM,CACX,MAAMqiD,EAAU,CAACriD,EAAK,WAAW,KAAK,OAAO,EAE7C,MAAO,CACL,QAAAqiD,EACA,MAAOA,EAAU,EAAI,EACrB,QAAS,CAAC,EAAGriD,EAAK,OAAS,CAAC,CAC7B,CACF,CACH,CAIA,MAAM26D,WAAyBN,EAAU,CACvC,YAAY1C,EAAS,CACnB,MAAMA,CAAO,CACd,CACD,WAAW,MAAO,CAChB,MAAO,cACR,CACD,WAAW,YAAa,CACtB,MAAO,YACR,CACD,WAAW,aAAc,CACvB,MAAO,UACR,CACD,OAAO33D,EAAM,CACX,MAAMqiD,EAAUriD,EAAK,SAAS,KAAK,OAAO,EAE1C,MAAO,CACL,QAAAqiD,EACA,MAAOA,EAAU,EAAI,EACrB,QAAS,CAACriD,EAAK,OAAS,KAAK,QAAQ,OAAQA,EAAK,OAAS,CAAC,CAC7D,CACF,CACH,CAIA,MAAM46D,WAAgCP,EAAU,CAC9C,YAAY1C,EAAS,CACnB,MAAMA,CAAO,CACd,CACD,WAAW,MAAO,CAChB,MAAO,sBACR,CACD,WAAW,YAAa,CACtB,MAAO,aACR,CACD,WAAW,aAAc,CACvB,MAAO,WACR,CACD,OAAO33D,EAAM,CACX,MAAMqiD,EAAU,CAACriD,EAAK,SAAS,KAAK,OAAO,EAC3C,MAAO,CACL,QAAAqiD,EACA,MAAOA,EAAU,EAAI,EACrB,QAAS,CAAC,EAAGriD,EAAK,OAAS,CAAC,CAC7B,CACF,CACH,CAEA,MAAM66D,WAAmBR,EAAU,CACjC,YACE1C,EACA,CACE,SAAAt2D,EAAW4+B,EAAO,SAClB,UAAAgqB,EAAYhqB,EAAO,UACnB,SAAAniC,EAAWmiC,EAAO,SAClB,eAAAw4B,EAAiBx4B,EAAO,eACxB,eAAAu4B,EAAiBv4B,EAAO,eACxB,mBAAAm4B,EAAqBn4B,EAAO,mBAC5B,gBAAA65B,EAAkB75B,EAAO,gBACzB,eAAA83B,EAAiB93B,EAAO,cAC9B,EAAQ,CAAE,EACN,CACA,MAAM03B,CAAO,EACb,KAAK,aAAe,IAAIkC,GAAYlC,EAAS,CAC3C,SAAAt2D,EACA,UAAA4oD,EACA,SAAAnsD,EACA,eAAA26D,EACA,eAAAD,EACA,mBAAAJ,EACA,gBAAA0B,EACA,eAAA/B,CACN,CAAK,CACF,CACD,WAAW,MAAO,CAChB,MAAO,OACR,CACD,WAAW,YAAa,CACtB,MAAO,UACR,CACD,WAAW,aAAc,CACvB,MAAO,QACR,CACD,OAAO/3D,EAAM,CACX,OAAO,KAAK,aAAa,SAASA,CAAI,CACvC,CACH,CAIA,MAAM86D,WAAqBT,EAAU,CACnC,YAAY1C,EAAS,CACnB,MAAMA,CAAO,CACd,CACD,WAAW,MAAO,CAChB,MAAO,SACR,CACD,WAAW,YAAa,CACtB,MAAO,WACR,CACD,WAAW,aAAc,CACvB,MAAO,SACR,CACD,OAAO33D,EAAM,CACX,IAAIqB,EAAW,EACXkC,EAEJ,MAAM80D,EAAU,GACVK,EAAa,KAAK,QAAQ,OAGhC,MAAQn1D,EAAQvD,EAAK,QAAQ,KAAK,QAASqB,CAAQ,GAAK,IACtDA,EAAWkC,EAAQm1D,EACnBL,EAAQ,KAAK,CAAC90D,EAAOlC,EAAW,CAAC,CAAC,EAGpC,MAAMghD,EAAU,CAAC,CAACgW,EAAQ,OAE1B,MAAO,CACL,QAAAhW,EACA,MAAOA,EAAU,EAAI,EACrB,QAAAgW,CACD,CACF,CACH,CAGA,MAAM0C,GAAY,CAChBR,GACAO,GACAL,GACAC,GACAE,GACAD,GACAH,GACAK,EACF,EAEMG,GAAeD,GAAU,OAGzBE,GAAW,qCACXC,GAAW,IAKjB,SAASC,GAAWxD,EAAS/hE,EAAU,GAAI,CACzC,OAAO+hE,EAAQ,MAAMuD,EAAQ,EAAE,IAAKn0C,GAAS,CAC3C,IAAIq0C,EAAQr0C,EACT,KAAM,EACN,MAAMk0C,EAAQ,EACd,OAAQl0C,GAASA,GAAQ,CAAC,CAACA,EAAK,KAAI,CAAE,EAErCjrB,EAAU,GACd,QAASpG,EAAI,EAAGoX,EAAMsuD,EAAM,OAAQ1lE,EAAIoX,EAAKpX,GAAK,EAAG,CACnD,MAAM2lE,EAAYD,EAAM1lE,CAAC,EAGzB,IAAIquB,EAAQ,GACRjc,EAAM,GACV,KAAO,CAACic,GAAS,EAAEjc,EAAMkzD,IAAc,CACrC,MAAMM,EAAWP,GAAUjzD,CAAG,EAC9B,IAAIjE,EAAQy3D,EAAS,aAAaD,CAAS,EACvCx3D,IACF/H,EAAQ,KAAK,IAAIw/D,EAASz3D,EAAOjO,CAAO,CAAC,EACzCmuB,EAAQ,IAIZ,GAAI,CAAAA,EAMJ,IADAjc,EAAM,GACC,EAAEA,EAAMkzD,IAAc,CAC3B,MAAMM,EAAWP,GAAUjzD,CAAG,EAC9B,IAAIjE,EAAQy3D,EAAS,cAAcD,CAAS,EAC5C,GAAIx3D,EAAO,CACT/H,EAAQ,KAAK,IAAIw/D,EAASz3D,EAAOjO,CAAO,CAAC,EACzC,QAKN,OAAOkG,CACX,CAAG,CACH,CAIA,MAAMy/D,GAAgB,IAAI,IAAI,CAACV,GAAW,KAAMC,GAAa,IAAI,CAAC,EA8BlE,MAAMU,EAAe,CACnB,YACE7D,EACA,CACE,gBAAAmC,EAAkB75B,EAAO,gBACzB,eAAAw4B,EAAiBx4B,EAAO,eACxB,mBAAAm4B,EAAqBn4B,EAAO,mBAC5B,eAAA83B,EAAiB93B,EAAO,eACxB,eAAAu4B,EAAiBv4B,EAAO,eACxB,SAAA5+B,EAAW4+B,EAAO,SAClB,UAAAgqB,EAAYhqB,EAAO,UACnB,SAAAniC,EAAWmiC,EAAO,QACxB,EAAQ,CAAE,EACN,CACA,KAAK,MAAQ,KACb,KAAK,QAAU,CACb,gBAAA65B,EACA,eAAArB,EACA,mBAAAL,EACA,eAAAI,EACA,eAAAT,EACA,SAAA12D,EACA,UAAA4oD,EACA,SAAAnsD,CACN,EAEI,KAAK,QAAUg8D,EAAkBnC,EAAUA,EAAQ,YAAW,EAC9D,KAAK,MAAQwD,GAAW,KAAK,QAAS,KAAK,OAAO,CACnD,CAED,OAAO,UAAU9wD,EAAGzU,EAAS,CAC3B,OAAOA,EAAQ,iBAChB,CAED,SAASoK,EAAM,CACb,MAAMo7D,EAAQ,KAAK,MAEnB,GAAI,CAACA,EACH,MAAO,CACL,QAAS,GACT,MAAO,CACR,EAGH,KAAM,CAAE,eAAA3C,EAAgB,gBAAAqB,GAAoB,KAAK,QAEjD95D,EAAO85D,EAAkB95D,EAAOA,EAAK,YAAW,EAEhD,IAAIy7D,EAAa,EACbxB,EAAa,GACbC,EAAa,EAGjB,QAASxkE,EAAI,EAAGgmE,EAAON,EAAM,OAAQ1lE,EAAIgmE,EAAMhmE,GAAK,EAAG,CACrD,MAAMqlE,EAAYK,EAAM1lE,CAAC,EAGzBukE,EAAW,OAAS,EACpBwB,EAAa,EAGb,QAAShC,EAAI,EAAGkC,EAAOZ,EAAU,OAAQtB,EAAIkC,EAAMlC,GAAK,EAAG,CACzD,MAAM6B,EAAWP,EAAUtB,CAAC,EACtB,CAAE,QAAApX,EAAS,QAAAgW,EAAS,MAAAW,CAAO,EAAGsC,EAAS,OAAOt7D,CAAI,EAExD,GAAIqiD,GAGF,GAFAoZ,GAAc,EACdvB,GAAclB,EACVP,EAAgB,CAClB,MAAM3/D,EAAOwiE,EAAS,YAAY,KAC9BC,GAAc,IAAIziE,CAAI,EACxBmhE,EAAa,CAAC,GAAGA,EAAY,GAAG5B,CAAO,EAEvC4B,EAAW,KAAK5B,CAAO,OAGtB,CACL6B,EAAa,EACbuB,EAAa,EACbxB,EAAW,OAAS,EACpB,OAKJ,GAAIwB,EAAY,CACd,IAAI7jE,EAAS,CACX,QAAS,GACT,MAAOsiE,EAAauB,CAC9B,EAEQ,OAAIhD,IACF7gE,EAAO,QAAUqiE,GAGZriE,GAKX,MAAO,CACL,QAAS,GACT,MAAO,CACR,CACF,CACH,CAEA,MAAMgkE,GAAsB,GAE5B,SAASC,MAAYhmE,EAAM,CACzB+lE,GAAoB,KAAK,GAAG/lE,CAAI,CAClC,CAEA,SAASimE,GAAenE,EAAS/hE,EAAS,CACxC,QAASF,EAAI,EAAGoX,EAAM8uD,GAAoB,OAAQlmE,EAAIoX,EAAKpX,GAAK,EAAG,CACjE,IAAIqmE,EAAgBH,GAAoBlmE,CAAC,EACzC,GAAIqmE,EAAc,UAAUpE,EAAS/hE,CAAO,EAC1C,OAAO,IAAImmE,EAAcpE,EAAS/hE,CAAO,EAI7C,OAAO,IAAIikE,GAAYlC,EAAS/hE,CAAO,CACzC,CAEA,MAAMomE,GAAkB,CACtB,IAAK,OACL,GAAI,KACN,EAEMC,GAAU,CACd,KAAM,QACN,QAAS,MACX,EAEMC,GAAgBd,GACpB,CAAC,EAAEA,EAAMY,GAAgB,GAAG,GAAKZ,EAAMY,GAAgB,EAAE,GAErDG,GAAUf,GAAU,CAAC,CAACA,EAAMa,GAAQ,IAAI,EAExCG,GAAUhB,GACd,CAACtG,GAAQsG,CAAK,GAAK/iE,GAAS+iE,CAAK,GAAK,CAACc,GAAad,CAAK,EAErDiB,GAAqBjB,IAAW,CACpC,CAACY,GAAgB,GAAG,EAAG,OAAO,KAAKZ,CAAK,EAAE,IAAKr/D,IAAS,CACtD,CAACA,CAAG,EAAGq/D,EAAMr/D,CAAG,CACpB,EAAI,CACJ,GAIA,SAAS8gB,GAAMu+C,EAAOxlE,EAAS,CAAE,KAAA2uB,EAAO,EAAM,EAAG,GAAI,CACnD,MAAMzgB,EAAQs3D,GAAU,CACtB,IAAIv7C,EAAO,OAAO,KAAKu7C,CAAK,EAE5B,MAAMkB,EAAcH,GAAOf,CAAK,EAEhC,GAAI,CAACkB,GAAez8C,EAAK,OAAS,GAAK,CAACq8C,GAAad,CAAK,EACxD,OAAOt3D,EAAKu4D,GAAkBjB,CAAK,CAAC,EAGtC,GAAIgB,GAAOhB,CAAK,EAAG,CACjB,MAAMr/D,EAAMugE,EAAclB,EAAMa,GAAQ,IAAI,EAAIp8C,EAAK,CAAC,EAEhD83C,EAAU2E,EAAclB,EAAMa,GAAQ,OAAO,EAAIb,EAAMr/D,CAAG,EAEhE,GAAI,CAACzC,GAASq+D,CAAO,EACnB,MAAM,IAAI,MAAMrC,GAAqCv5D,CAAG,CAAC,EAG3D,MAAM1F,EAAM,CACV,MAAO6/D,GAAYn6D,CAAG,EACtB,QAAA47D,CACR,EAEM,OAAIpzC,IACFluB,EAAI,SAAWylE,GAAenE,EAAS/hE,CAAO,GAGzCS,EAGT,IAAIwU,EAAO,CACT,SAAU,CAAE,EACZ,SAAUgV,EAAK,CAAC,CACtB,EAEI,OAAAA,EAAK,QAAS9jB,GAAQ,CACpB,MAAMjE,EAAQsjE,EAAMr/D,CAAG,EAEnB+4D,GAAQh9D,CAAK,GACfA,EAAM,QAASivB,GAAS,CACtBlc,EAAK,SAAS,KAAK/G,EAAKijB,CAAI,CAAC,CACvC,CAAS,CAET,CAAK,EAEMlc,CACX,EAEE,OAAKqxD,GAAad,CAAK,IACrBA,EAAQiB,GAAkBjB,CAAK,GAG1Bt3D,EAAKs3D,CAAK,CACnB,CAGA,SAASmB,GACPzgE,EACA,CAAE,gBAAA0gE,EAAkBv8B,EAAO,eAAiB,EAC5C,CACAnkC,EAAQ,QAASlE,GAAW,CAC1B,IAAIsiE,EAAa,EAEjBtiE,EAAO,QAAQ,QAAQ,CAAC,CAAE,IAAAmE,EAAK,KAAA06D,EAAM,MAAAuC,KAAY,CAC/C,MAAMjD,EAASh6D,EAAMA,EAAI,OAAS,KAElCm+D,GAAc,KAAK,IACjBlB,IAAU,GAAKjD,EAAS,OAAO,QAAUiD,GACxCjD,GAAU,IAAMyG,EAAkB,EAAI/F,EAC/C,CACA,CAAK,EAED7+D,EAAO,MAAQsiE,CACnB,CAAG,CACH,CAEA,SAASuC,GAAiB7kE,EAAQwN,EAAM,CACtC,MAAM2G,EAAUnU,EAAO,QACvBwN,EAAK,QAAU,GAEVnM,GAAU8S,CAAO,GAItBA,EAAQ,QAASiR,GAAU,CACzB,GAAI,CAAC/jB,GAAU+jB,EAAM,OAAO,GAAK,CAACA,EAAM,QAAQ,OAC9C,OAGF,KAAM,CAAE,QAAAq7C,EAAS,MAAAvgE,CAAO,EAAGklB,EAE3B,IAAI3mB,EAAM,CACR,QAAAgiE,EACA,MAAAvgE,CACN,EAEQklB,EAAM,MACR3mB,EAAI,IAAM2mB,EAAM,IAAI,KAGlBA,EAAM,IAAM,KACd3mB,EAAI,SAAW2mB,EAAM,KAGvB5X,EAAK,QAAQ,KAAK/O,CAAG,CACzB,CAAG,CACH,CAEA,SAASqmE,GAAe9kE,EAAQwN,EAAM,CACpCA,EAAK,MAAQxN,EAAO,KACtB,CAEA,SAAS2sD,GACPzoD,EACAg7D,EACA,CACE,eAAA2B,EAAiBx4B,EAAO,eACxB,aAAA08B,EAAe18B,EAAO,YAC1B,EAAM,CAAE,EACN,CACA,MAAM28B,EAAe,GAErB,OAAInE,GAAgBmE,EAAa,KAAKH,EAAgB,EAClDE,GAAcC,EAAa,KAAKF,EAAc,EAE3C5gE,EAAQ,IAAKlE,GAAW,CAC7B,KAAM,CAAE,IAAAkQ,CAAK,EAAGlQ,EAEVwN,EAAO,CACX,KAAM0xD,EAAKhvD,CAAG,EACd,SAAUA,CAChB,EAEI,OAAI80D,EAAa,QACfA,EAAa,QAASC,GAAgB,CACpCA,EAAYjlE,EAAQwN,CAAI,CAChC,CAAO,EAGIA,CACX,CAAG,CACH,CAEA,MAAM03D,EAAK,CACT,YAAYhG,EAAMlhE,EAAU,GAAI2N,EAAO,CACrC,KAAK,QAAU,CAAE,GAAG08B,EAAQ,GAAGrqC,CAAO,EAGpC,KAAK,QAAQ,kBAMf,KAAK,UAAY,IAAI+/D,GAAS,KAAK,QAAQ,IAAI,EAE/C,KAAK,cAAcmB,EAAMvzD,CAAK,CAC/B,CAED,cAAcuzD,EAAMvzD,EAAO,CAGzB,GAFA,KAAK,MAAQuzD,EAETvzD,GAAS,EAAEA,aAAiBqzD,IAC9B,MAAM,IAAI,MAAMvB,EAAoB,EAGtC,KAAK,SACH9xD,GACAg0D,GAAY,KAAK,QAAQ,KAAM,KAAK,MAAO,CACzC,MAAO,KAAK,QAAQ,MACpB,gBAAiB,KAAK,QAAQ,eACtC,CAAO,CACJ,CAED,IAAIp6D,EAAK,CACFlE,GAAUkE,CAAG,IAIlB,KAAK,MAAM,KAAKA,CAAG,EACnB,KAAK,SAAS,IAAIA,CAAG,EACtB,CAED,OAAO4/D,EAAY,IAAoB,GAAO,CAC5C,MAAMjhE,EAAU,GAEhB,QAASpG,EAAI,EAAGoX,EAAM,KAAK,MAAM,OAAQpX,EAAIoX,EAAKpX,GAAK,EAAG,CACxD,MAAMyH,EAAM,KAAK,MAAMzH,CAAC,EACpBqnE,EAAU5/D,EAAKzH,CAAC,IAClB,KAAK,SAASA,CAAC,EACfA,GAAK,EACLoX,GAAO,EAEPhR,EAAQ,KAAKqB,CAAG,GAIpB,OAAOrB,CACR,CAED,SAASgM,EAAK,CACZ,KAAK,MAAM,OAAOA,EAAK,CAAC,EACxB,KAAK,SAAS,SAASA,CAAG,CAC3B,CAED,UAAW,CACT,OAAO,KAAK,QACb,CAED,OAAOszD,EAAO,CAAE,MAAA4B,EAAQ,EAAE,EAAK,GAAI,CACjC,KAAM,CACJ,eAAAvE,EACA,aAAAkE,EACA,WAAAM,EACA,OAAAC,EACA,gBAAAV,CACN,EAAQ,KAAK,QAET,IAAI1gE,EAAUxC,GAAS8hE,CAAK,EACxB9hE,GAAS,KAAK,MAAM,CAAC,CAAC,EACpB,KAAK,kBAAkB8hE,CAAK,EAC5B,KAAK,kBAAkBA,CAAK,EAC9B,KAAK,eAAeA,CAAK,EAE7B,OAAAmB,GAAazgE,EAAS,CAAE,gBAAA0gE,CAAe,CAAE,EAErCS,GACFnhE,EAAQ,KAAKohE,CAAM,EAGjB9jE,GAAS4jE,CAAK,GAAKA,EAAQ,KAC7BlhE,EAAUA,EAAQ,MAAM,EAAGkhE,CAAK,GAG3BzY,GAAOzoD,EAAS,KAAK,MAAO,CACjC,eAAA28D,EACA,aAAAkE,CACN,CAAK,CACF,CAED,kBAAkBvB,EAAO,CACvB,MAAME,EAAWQ,GAAeV,EAAO,KAAK,OAAO,EAC7C,CAAE,QAAArE,CAAO,EAAK,KAAK,SACnBj7D,EAAU,GAGhB,OAAAi7D,EAAQ,QAAQ,CAAC,CAAE,EAAG/2D,EAAM,EAAG8H,EAAK,EAAG2uD,KAAW,CAChD,GAAI,CAACx9D,GAAU+G,CAAI,EACjB,OAGF,KAAM,CAAE,QAAAqiD,EAAS,MAAA2W,EAAO,QAAAX,CAAS,EAAGiD,EAAS,SAASt7D,CAAI,EAEtDqiD,GACFvmD,EAAQ,KAAK,CACX,KAAMkE,EACN,IAAA8H,EACA,QAAS,CAAC,CAAE,MAAAkxD,EAAO,MAAOh5D,EAAM,KAAAy2D,EAAM,QAAA4B,EAAS,CACzD,CAAS,CAET,CAAK,EAEMv8D,CACR,CAED,eAAes/D,EAAO,CAEpB,MAAM+B,EAAatgD,GAAMu+C,EAAO,KAAK,OAAO,EAEtCgC,EAAW,CAACvyD,EAAMkc,EAAMjf,IAAQ,CACpC,GAAI,CAAC+C,EAAK,SAAU,CAClB,KAAM,CAAE,MAAAirD,EAAO,SAAAwF,CAAU,EAAGzwD,EAEtBkB,EAAU,KAAK,aAAa,CAChC,IAAK,KAAK,UAAU,IAAI+pD,CAAK,EAC7B,MAAO,KAAK,SAAS,uBAAuB/uC,EAAM+uC,CAAK,EACvD,SAAAwF,CACV,CAAS,EAED,OAAIvvD,GAAWA,EAAQ,OACd,CACL,CACE,IAAAjE,EACA,KAAAif,EACA,QAAAhb,CACD,CACF,EAGI,CAAE,EAGX,MAAM/U,EAAM,GACZ,QAAStB,EAAI,EAAGoX,EAAMjC,EAAK,SAAS,OAAQnV,EAAIoX,EAAKpX,GAAK,EAAG,CAC3D,MAAM6Y,EAAQ1D,EAAK,SAASnV,CAAC,EACvBkC,EAASwlE,EAAS7uD,EAAOwY,EAAMjf,CAAG,EACxC,GAAIlQ,EAAO,OACTZ,EAAI,KAAK,GAAGY,CAAM,UACTiT,EAAK,WAAamxD,GAAgB,IAC3C,MAAO,CAAE,EAGb,OAAOhlE,CACb,EAEU+/D,EAAU,KAAK,SAAS,QACxBsG,EAAY,GACZvhE,EAAU,GAEhB,OAAAi7D,EAAQ,QAAQ,CAAC,CAAE,EAAGhwC,EAAM,EAAGjf,KAAU,CACvC,GAAI7O,GAAU8tB,CAAI,EAAG,CACnB,IAAIu2C,EAAaF,EAASD,EAAYp2C,EAAMjf,CAAG,EAE3Cw1D,EAAW,SAERD,EAAUv1D,CAAG,IAChBu1D,EAAUv1D,CAAG,EAAI,CAAE,IAAAA,EAAK,KAAAif,EAAM,QAAS,IACvCjrB,EAAQ,KAAKuhE,EAAUv1D,CAAG,CAAC,GAE7Bw1D,EAAW,QAAQ,CAAC,CAAE,QAAAvxD,KAAc,CAClCsxD,EAAUv1D,CAAG,EAAE,QAAQ,KAAK,GAAGiE,CAAO,CAClD,CAAW,GAGX,CAAK,EAEMjQ,CACR,CAED,kBAAkBs/D,EAAO,CACvB,MAAME,EAAWQ,GAAeV,EAAO,KAAK,OAAO,EAC7C,CAAE,KAAAv7C,EAAM,QAAAk3C,GAAY,KAAK,SACzBj7D,EAAU,GAGhB,OAAAi7D,EAAQ,QAAQ,CAAC,CAAE,EAAGhwC,EAAM,EAAGjf,KAAU,CACvC,GAAI,CAAC7O,GAAU8tB,CAAI,EACjB,OAGF,IAAIhb,EAAU,GAGd8T,EAAK,QAAQ,CAAC9jB,EAAKm7D,IAAa,CAC9BnrD,EAAQ,KACN,GAAG,KAAK,aAAa,CACnB,IAAAhQ,EACA,MAAOgrB,EAAKmwC,CAAQ,EACpB,SAAAoE,CACZ,CAAW,CACX,CACA,CAAO,EAEGvvD,EAAQ,QACVjQ,EAAQ,KAAK,CACX,IAAAgM,EACA,KAAAif,EACA,QAAAhb,CACV,CAAS,CAET,CAAK,EAEMjQ,CACR,CACD,aAAa,CAAE,IAAAC,EAAK,MAAAjE,EAAO,SAAAwjE,CAAQ,EAAI,CACrC,GAAI,CAACriE,GAAUnB,CAAK,EAClB,MAAO,CAAE,EAGX,IAAIiU,EAAU,GAEd,GAAI+oD,GAAQh9D,CAAK,EACfA,EAAM,QAAQ,CAAC,CAAE,EAAGkI,EAAM,EAAG8H,EAAK,EAAG2uD,KAAW,CAC9C,GAAI,CAACx9D,GAAU+G,CAAI,EACjB,OAGF,KAAM,CAAE,QAAAqiD,EAAS,MAAA2W,EAAO,QAAAX,CAAS,EAAGiD,EAAS,SAASt7D,CAAI,EAEtDqiD,GACFt2C,EAAQ,KAAK,CACX,MAAAitD,EACA,IAAAj9D,EACA,MAAOiE,EACP,IAAA8H,EACA,KAAA2uD,EACA,QAAA4B,CACZ,CAAW,CAEX,CAAO,MACI,CACL,KAAM,CAAE,EAAGr4D,EAAM,EAAGy2D,CAAI,EAAK3+D,EAEvB,CAAE,QAAAuqD,EAAS,MAAA2W,EAAO,QAAAX,CAAS,EAAGiD,EAAS,SAASt7D,CAAI,EAEtDqiD,GACFt2C,EAAQ,KAAK,CAAE,MAAAitD,EAAO,IAAAj9D,EAAK,MAAOiE,EAAM,KAAAy2D,EAAM,QAAA4B,CAAO,CAAE,EAI3D,OAAOtsD,CACR,CACH,CAEA+wD,GAAK,QAAU,QACfA,GAAK,YAAcvF,GACnBuF,GAAK,WAAarF,GAClBqF,GAAK,OAAS78B,EAGZ68B,GAAK,WAAajgD,GAIlBg/C,GAASL,EAAc,ECzuDlB,MAAM+B,GAAN,cAA2C/qD,CAAU,CAsB1D,aAAc,CACN,QApBDzP,EAAA,aAUAA,EAAA,aAAqC,CAC1C,MAAO,CAAC,EACR,cAAe,GACf,QAAS,CAAC,EACV,MAAO,GACP,QAAS,CAAC,EACV,OAAQ,KAAK,QAKf,CAnBA,WAAW,oBAAmD,CAC5D,MAAO,CAAC,QAAS,UAAW,QAAS,gBAAgB,CACvD,CAEA,oBAAmD,CACjD,MAAO,CAAC,OAAO,CACjB,CAeO,QAAS,CzT7BX,IAAApH,EyT8BC,IAAC,KAAK,KACR,eAAQ,KAAK,qDAAqD,EAC3D,GAEJ,WAAM,UAAUA,EAAA,KAAK,OAAL,YAAAA,EAAW,OAAU,KAAK,MAAM,iBAAkB,GACvE,QAAQ,MAAM,YAAa,KAAK,MAAM,cAAe,KAAK,MAAM,OAAO,CACzE,CAEU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAK4hE,GAAoB,kBAAkB,CAClD,CAEU,+BACRtiE,EACAE,EACAD,EACAyJ,EACA,CACM,qCACJ1J,EACAE,EACAD,EACAyJ,CAAA,EAGE1J,IAAkB,UACZ,cAAM,uCAAwCC,CAAQ,EAC9D,KAAK,SAAS,EAElB,CAEA,MAAgB,WAAY,CAC1B,MAAM,MAAM,YACZ,KAAK,SAAS,CAChB,CAEU,eAAe4kB,EAAa,CAChC,IAAA09C,EAMJ,GALI,MAAM,QAAQ19C,CAAK,GAAKA,EAAM,OAAS,EACzC09C,EAAW19C,EAAM,CAAC,EAEP09C,EAAA19C,EAET,CAAC09C,EACH,MAAO,GAET,MAAM39C,EAAiB,GACvB,UAAW9jB,KAAO,OAAO,KAAKyhE,CAAQ,EACpC,GACEA,EAASzhE,CAAG,IACX,OAAOyhE,EAASzhE,CAAG,GAAM,UAAY,MAAM,QAAQyhE,EAASzhE,CAAG,CAAC,GACjE,CACA,MAAM0hE,EAAY,KAAK,eAAeD,EAASzhE,CAAG,CAAC,EACnD,UAAW2hE,KAAYD,EAChB59C,EAAA,KAAK,GAAG9jB,KAAO2hE,GAAU,OAGhC79C,EAAK,KAAK9jB,CAAG,EAGV,OAAA8jB,CACT,CAEU,UAAW,CzT9FhB,IAAAlkB,EAAA4B,GyT+FE5B,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,UAGlB4B,EAAA,KAAK,MAAM,QAAQ,OAAnB,MAAAA,EAAyB,SAC5B,KAAK,MAAM,QAAQ,KAAO,KAAK,eAAe,KAAK,MAAM,KAAK,GAE3D,UAAO,IAAIu/D,GAAK,KAAK,MAAM,MAAO,KAAK,MAAM,OAAO,EACjD,cAAM,WAAY,KAAK,MAAM,MAAO,KAAK,MAAM,QAAS,KAAK,IAAI,EAC3E,CAEU,UAAyC,CAC1C,WACT,CACF,EAzGO,IAAMa,GAANJ,GACLx6D,EADW46D,GACG,UAAU,0ICDbC,GAA4C,SACvDp5D,GAAA,SACAyV,GAAA,WACAzT,GAAA,WACAF,GAEA,KAAK1Q,EAAU,GAAI,CACV,WACT,CACF,8LCdO,MAAMioE,EAAe,CAI1B,WAAkB,SAAU,CAC1B,OAAO,KAAK,QACd,CAEU,aAAc,CAExB,CAEA,OAAc,cAAe,CAC3B,GAAI,KAAK,SACP,OAAO,KAAK,SAGd,MAAM,IAAI,MACR,2EAEJ,CAEA,OAAc,aAAajoE,EAAgC,GAAI,C3TpB1D,IAAA+F,E2TqBH,GAAI,KAAK,SACD,UAAI,MAAM,8CAA8C,EAG5D,OAAC/F,EAAQ,gBACHA,EAAA,eAAgB+F,EAAA,OAAO,sBAAP,YAAAA,EAA4B,eAGtD,KAAK,SAAW/F,EACX,cAAW,IAAI,KACb,KAAK,QACd,CACF,CAlCEmN,EADW86D,GACM,WAAiC,IAClD96D,EAFW86D,GAEG,kICAHC,GAAN,cAA8BtrD,CAAU,CAS7C,aAAc,CACN,QAHDzP,EAAA,aAA8B,GAIrC,CARA,WAAW,oBAAqB,CAC9B,MAAO,EACT,CAQU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAK+6D,GAAgB,kBAAkB,CAC9C,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,WAAW,CAClB,CAEA,MAAgB,WAAY,CAC1B,MAAM,MAAM,WACd,CAEA,YAAa,CAEb,CAEU,UAAyC,CAC1C,WACT,CACF,EAlCO,IAAMC,GAAND,GACL/6D,EADWg7D,GACG,UAAU,cCDnB,MAAMC,GAAN,cAA8BxrD,CAAU,CAS7C,aAAc,CACN,QAHDzP,EAAA,aAA8B,GAIrC,CARA,WAAW,oBAAqB,CAC9B,MAAO,EACT,CAQU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKi7D,GAAgB,kBAAkB,CAC9C,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,WAAW,CAClB,CAEA,YAAa,CAEb,CAEU,UAAyC,CAC1C,WACT,CACF,EA9BO,IAAMC,GAAND,GACLj7D,EADWk7D,GACG,UAAU,cCDnB,MAAMC,GAAN,cAAwC1rD,CAAU,CAavD,aAAc,CACN,QAPDzP,EAAA,aAAwC,CAC7C,aAAc,CAAC,EACf,eAAgB,CAAC,EACjB,gBAAiB,KAAK,iBAKxB,CAZA,WAAW,oBAAqB,CAC9B,MAAO,EACT,CAYU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKm7D,GAA0B,kBAAkB,CACxD,CAEA,MAAgB,WAAY,CAC1B,MAAM,MAAM,YACZ,KAAK,qBAAqB,CAC5B,CAEO,gBAAgB36D,EAAe,CACzB,UAAC7N,EAAGyoE,CAAW,IAAK,KAAK,MAAM,aAAa,UACjDzoE,IAAM6N,EACI46D,EAAA,UAAU,IAAI,SAAS,EAEvBA,EAAA,UAAU,OAAO,SAAS,EAI/B,UAACzoE,EAAG0oE,CAAa,IAAK,KAAK,MAAM,eAAe,UACrD1oE,IAAM6N,EACM66D,EAAA,UAAU,IAAI,SAAS,EAEvBA,EAAA,UAAU,OAAO,SAAS,CAG9C,CAEA,sBAAuB,C9T7ClB,IAAAziE,EAAA4B,G8T8CH5B,EAAA,KAAK,MAAM,eAAX,MAAAA,EAAyB,UAAU,IAAI,WACvC4B,EAAA,KAAK,MAAM,iBAAX,MAAAA,EAA2B,UAAU,IAAI,UAEpC,WAAM,aAAe,MAAM,KAC9B,KAAK,iBACH,6DACG,CAAC,GAEH,WAAM,eAAiB,MAAM,KAChC,KAAK,iBACH,iEACG,CAAC,GAGR,KAAK,gBAAgB,CAAC,CACxB,CAEU,UAAyC,CAC1C,WACT,CACF,EAlEO,IAAM8gE,GAANH,GACLn7D,EADWs7D,GACG,UAAU,yBCYnB,MAAMC,GAAN,cAA8B9rD,CAAU,CAyB7C,aAAc,CACN,QAnBDzP,EAAA,aAA8B,CACnC,cAAe,SAAS,KACxB,UAAW,GACX,QAAS,GACT,WAAY,GACZ,QAAS,CAAC,EACV,MAAO,GACP,aAAc,GACd,SAAU,KAAK,SACf,OAAQ,KAAK,OACb,QAAS,KAAK,QACd,QAAS,KAAK,QACd,UAAW,KAAK,UAChB,WAAY,KAAK,WACjB,oBAAqB,KAAK,oBAC1B,oBAAqB,KAAK,sBA6KrBA,EAAA,qBAAgB7L,GAAS,SAAY,CAC1C,MAAM,KAAK,kBACV,GAAG,EA1KN,CAxBA,WAAW,oBAAqB,CAC9B,MAAO,CAAC,iBAAiB,CAC3B,CAwBU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKonE,GAAgB,kBAAkB,CAC9C,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,aAAa,EAClB,KAAK,WAAW,CAClB,CAEA,MAAgB,WAAY,CAC1B,MAAM,MAAM,YACP,WAAM,SAEP,SAAS,qBACPC,GAAgB,OAClB,EACA,KAAK,CAAC,GAAK,MACjB,CAEA,cAAe,C/T/DV,IAAA5iE,E+TiED,KAAK,MAAM,gBAAkB,SAAS,QACtCA,EAAA,OAAO,sBAAP,MAAAA,EAA4B,iBAEvB,WAAM,cAAgB,OAAO,oBAAoB,cAE1D,CAEA,YAAa,CACX,KAAK,iBAAiB,CACxB,CAEO,UAAW,C/T5Eb,IAAAA,G+T6EEA,EAAA,WAAM,UAAN,MAAAA,EAAe,OACtB,CAEO,UAAW,C/ThFb,IAAAA,E+TiFH,OAAOA,EAAA,KAAK,MAAM,UAAX,YAAAA,EAAoB,QAAQ,SACrC,CAEU,SAAU,CACb,eAAU,IAAI,WAAW,EAC9B,KAAK,cAAc,IAAI,MAAM,OAAO,CAAC,CACvC,CAEU,QAAS,CACZ,eAAU,OAAO,WAAW,EACjC,KAAK,cAAc,IAAI,MAAM,MAAM,CAAC,CACtC,CAEU,SAAU,CAClB,KAAK,cAAc,CACrB,CAEU,UACRymD,EACAv0C,EACA2wD,EACA,CACA,KAAK,MAAM,aAAe,GAEtBpc,EAAE,KAAO,QACX,KAAK,kBAAkB,EACdA,EAAE,KAAO,SAClBoc,EAAM,KAAK,EACFpc,EAAE,KAAO,UAClB,KAAK,iBAAiB,EAAE,EACfA,EAAE,MAAQ,YACnB,KAAK,iBAAiB,CAAC,EAEvB,KAAK,MAAM,aAAe,EAE9B,CAEO,WAAWA,EAAkB,CAC9B,KAAK,MAAM,cACbA,EAAE,eAAe,CAErB,CAEO,oBACLA,EACAv0C,EACA4wD,EACA,CACM,MAAAC,EAAY,KAAK,wBACZA,GAAA,MAAAA,EAAA,UAAU,OAAO,UAClBD,EAAA,UAAU,IAAI,QAAQ,CAClC,CAGO,oBACLrc,EACAv0C,EACA7S,EACA,CAEA,GAAIonD,EAAE,OAAS,aAAgBA,EAAiB,SAAW,EACzD,OAEF,MAAM7K,EAASv8C,EAAG,WACdu8C,GAAA,MAAAA,EAAQ,MACL,UAAKA,EAAO,IAAI,CAEzB,CAEA,kBAAmB,CAIjB,SAAS,KAAK,iBAAiB,UAAY6K,GAAM,CAC3CA,EAAE,QAAUA,EAAE,SAAWA,EAAE,SAC3B,CAAC,KAAK,YAAcA,EAAE,MAAQ,MAChC,KAAK,SAAS,EACdA,EAAE,eAAe,EACnB,CACD,CACH,CAEA,MAAgB,gBAAiB,CAC1B,WAAM,QAAU,GAErB,MAAMuc,EAAa,KAAK,MAAM,MAAM,KAAK,EACrC,GAAAA,EAAW,OAAS,EACtB,OAGF,KAAK,MAAM,UAAY,GACvB,KAAK,MAAM,QAAU,GACrB,KAAK,MAAM,WAAa,GAExB,MAAMz9D,EAAM,IAAI,IAAI,KAAK,MAAM,aAAa,EACtCiG,EAAYjG,EAAI,SAAS,SAAS,GAAG,EAAI,GAAK,IAGhDA,EAAA,UAAY,GAAGiG,YAAoBw3D,KACvC,MAAM7iE,EAA0B,GAE5B,IACF,MAAMsL,EAAW,MAAM,MAAMlG,EAAI,SAAU,GAC3CpF,EAAQ,KAAK,GAAI,MAAMsL,EAAS,KAAO,SAChCjQ,GACP,QAAQ,MAAMA,CAAK,EACnB,KAAK,MAAM,UAAY,GACvB,KAAK,MAAM,WAAa,EAC1B,CAEI,IACF,KAAK,eAAe2E,CAAO,EAC3B,KAAK,gBAAgBA,CAAO,QACrB3E,GACP,QAAQ,MAAMA,CAAK,EACd,WAAM,QAAU,GACrB,KAAK,MAAM,UAAY,GACvB,KAAK,MAAM,WAAa,EAC1B,CAEI,KAAK,MAAM,aAEf,KAAK,MAAM,QAAU2E,EACrB,KAAK,MAAM,UAAY,GAClB,WAAM,QAAU,CAAC,KAAK,MAAM,WAAa,CAAC,KAAK,MAAM,WAC5D,CAMU,eAAeA,EAAyB,CAChD,UAAWlE,KAAUkE,EAAS,CACxB,UAAOlE,EAAO,SAAY,SACtB,UAAI,MAAM,0CAA0C,EACxD,UAAOA,EAAO,MAAS,SACnB,UAAI,MAAM,uCAAuC,EACrD,UAAOA,EAAO,KAAQ,SAClB,UAAI,MAAM,sCAAsC,EACpD,UAAOA,EAAO,MAAS,SACnB,UAAI,MAAM,uCAAuC,EAE7D,CAEU,gBAAgBkE,EAAyB,CACjD,MAAMqL,EAAY,KAAK,MAAM,cAAc,SAAS,GAAG,EAAI,GAAK,IAChE,UAAWvP,KAAUkE,EACdlE,EAAO,IAAI,WAAW,MAAM,IAC/BA,EAAO,IAAM,KAAK,MAAM,cAAgBuP,EAAYvP,EAAO,KAE7DA,EAAO,IAAMwJ,GAAaxJ,EAAO,GAAG,EAAE,GAE1C,CAEA,sBAAsBgnE,EAAM,EAAGC,EAAgB,GAAO,C/T3OjD,IAAAljE,EAAA4B,E+T4OH,IAAIkG,GAAS9H,EAAA,KAAK,MAAM,YAAX,YAAAA,EAAsB,cAAc,0BAC7C,OAAAkjE,GAAiB,CAACp7D,IACXA,GAAAlG,EAAA,KAAK,MAAM,YAAX,YAAAA,EAAsB,cAC7BqhE,GAAO,EAAI,iBAAmB,iBAE5Bn7D,GACKA,EAAA,UAAU,IAAI,QAAQ,GAG1BA,GAAU,IACnB,CAKA,iBAAiBm7D,EAAa,C/T3PzB,IAAAjjE,EAAA4B,E+T4PH,MAAMkG,EAAS,KAAK,sBAAsBm7D,EAAK,EAAI,EACnD,GAAIn7D,EAAQ,CACV,IAAIid,EAA2Bjd,EAG/B,GAAIm7D,IAAQ,EACP,GACDl+C,EAAMA,EAAI,oBAAsB,aACzBA,aAAe,aAAeA,EAAI,cAAgB,UAExD,IACDA,EAAMA,EAAI,wBAA0B,aAC7BA,aAAe,aAAeA,EAAI,cAAgB,MAIxDA,IACCk+C,IAAQ,IAAM,CAACn7D,EAAO,uBAExBid,IACE/kB,EAAA,KAAK,MAAM,YAAX,YAAAA,EAAsB,cAAc,mBAAoB,OACjDijE,IAAQ,GAAK,CAACn7D,EAAO,qBAE9Bid,IACEnjB,EAAA,KAAK,MAAM,YAAX,YAAAA,EAAsB,cAAc,oBAAqB,SAI3DmjB,IACKjd,EAAA,UAAU,OAAO,QAAQ,EAC5Bid,EAAA,UAAU,IAAI,QAAQ,GAGhC,CAKA,mBAAoB,C/TlSf,IAAA/kB,EAAA4B,EAAA+wD,E+TmSH,IAAI7qD,GAAS9H,EAAA,KAAK,MAAM,YAAX,YAAAA,EAAsB,cAAc,0BAQjD,GANK8H,IACMA,GAAAlG,EAAA,KAAK,MAAM,YAAX,YAAAA,EAAsB,cAC7B,kCAIAkG,EAAQ,CACJ,MAAAq7D,EAAOr7D,EAAO,cAAc,GAAG,EACjCq7D,GAAA,MAAAA,EAAM,MACH,UAAKA,EAAK,IAAI,GAEhBxQ,EAAA,WAAM,UAAN,MAAAA,EAAe,OAExB,CAEU,KAAKjyC,EAAc,CACrB,MAAAD,EAAOD,EAAK,YAAY,MAAM,EAC/BC,EAGEA,EAAA,KAAKC,EAAM,EAAK,EAFrB,OAAO,SAAS,KAAOA,CAI3B,CAEU,UAAyC,CAC7C,OAAC3gB,EAAkB,IAAI,EA+ElB,sBA7EJ,MAAI,OAAM,SACR,wBAAI,MAAM,iCACT,mBAAC,UACC,MAAM,oBACN,GAAG,yBACH,cAAY,YAEZ,iBAAC,YACC,IAAI,uCACJ,KAAM,GACN,UAAU,OACX,GAEH,iBAAC,SACC,MAAM,4BACN,GAAG,mBACH,KAAK,SACL,aAAW,SACX,mBAAiB,yBACjB,aAAa,MACb,WAAY,GACZ,aAAW,UACX,WAAS,QACT,cAAY,UACZ,cAAY,UACZ,aAAW,SACX,gBAAc,YACd,iBAAe,aAEnB,GACA,iBAAC,MACC,MAAM,4CACN,QAAM,UACN,aAAW,aAEX,iBAAC,MACC,MAAM,kBACN,UAAQ,wBACR,eAAa,UACb,eAAa,eACb,kBAAgB,sBAChB,kBAAgB,sBAChB,mBAAiB,uBAEjB,iBAAC,KAAE,MAAM,iBAAiB,UAAQ,UAChC,mBAAC,MAAI,OAAM,gBAAgB,QAAQ,aAChC,wBAAI,UAAQ,6BAA8B,EAC7C,EACC,yBAAK,UAAQ,WAAY,EAC5B,CACF,mBACC,KAAG,OAAM,2BAA2B,QAAM,yBAAwB,eAEnE,GAEF,iBAAC,MACC,MAAM,4CACN,YAAU,WAEV,iBAAC,MACC,MAAM,2BACN,UAAQ,YACR,gBAAc,QACf,mCAED,EACA,iBAAC,MACC,MAAM,2BACN,UAAQ,aACR,gBAAc,QACf,2CAED,EAEJ,CAKN,CACF,EAnYO,IAAMqjE,GAANT,GACLv7D,EADWg8D,GACG,UAAU,cCZnB,MAAMC,GAAN,cAA8BxsD,CAAU,CAW7C,aAAc,CACN,QALDzP,EAAA,aAA8B,CACnC,eAAgB,IAKlB,CAVA,WAAW,oBAAqB,CAC9B,MAAO,EACT,CAUU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKi8D,GAAgB,kBAAkB,CAC9C,CAEA,MAAgB,cAAe,ChUtB1B,IAAArjE,EAAA4B,EAAA+wD,EgU0BG,MAAA2Q,EAHa,SAAS,qBAC1B,eAEyB,KAAK,CAAC,EAC7BA,IACMA,EAAA,MAAM,UAAY,KAAK,aAAe,KACtCA,EAAA,MAAM,UAAY,gBAAgB,KAAK,mBAGjD,KAAK,MAAM,WACRtjE,EAAA,KAAK,qBAAqBojE,GAAgB,OAAO,IAAjD,YAAApjE,EAAoD,KACnD,KAC8B,QAElC4B,EAAA,KAAK,MAAM,WAAX,MAAAA,EAAqB,iBAAiB,QAAS,IAAM,CACnD,KAAK,cAAc,KAGrB+wD,EAAA,KAAK,MAAM,WAAX,MAAAA,EAAqB,iBAAiB,OAAQ,IAAM,CAClD,KAAK,aAAa,GAEtB,CAEO,eAAgB,CACrB,QAAQ,MAAM,eAAe,EACxB,eAAU,IAAI,kBAAkB,EACrC,KAAK,MAAM,eAAiB,EAC9B,CAEO,cAAe,CACf,eAAU,OAAO,kBAAkB,EACxC,KAAK,MAAM,eAAiB,EAC9B,CAEU,UAAyC,CAC1C,WACT,CACF,EA1DO,IAAMiQ,GAANS,GACLj8D,EADWw7D,GACG,UAAU,cCMnB,MAAMW,GAAN,cAAkC1sD,CAAU,CAkBjD,aAAc,CACN,QAREzP,EAAA,oBAAe,IAAIkC,EAAgB,MAAM,GAE5ClC,EAAA,aAAyB,CAC9B,eAAgB,UAChB,eAAgB,KAAK,gBAKvB,CAjBA,WAAW,oBAAsD,CAC/D,MAAO,EACT,CAEU,oBAAsD,CAC9D,MAAO,EACT,CAaU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKm8D,GAAoB,kBAAkB,CAClD,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,kBAAkB,EACvB,MAAM,KAAK,WACb,CAEA,MAAgB,WAAY,CjU1CvB,IAAAvjE,EAAA4B,EiU2CH,MAAM,MAAM,aACR5B,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SACpB,KAAK,mBAAkB4B,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,OAAO,CAEpD,CAEU,mBAAoB,CAC5B,KAAK,aAAa,GAAG,eAAgB,KAAK,UAAW,IAAI,CAC3D,CAEA,MAAgB,WAAY,CjUrDvB,IAAA5B,EAAA4B,GiUsDC5B,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SACpB,KAAK,mBAAkB4B,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,OAAO,CAEpD,CAEO,eAAe4hE,EAAuB1hE,EAAc,CACjD,cAAM,iBAAkB0hE,EAAK1hE,CAAK,EACrC,WAAM,eAAiB0hE,EAAI,MAC1B,MAAA/iD,EAAOD,EAAK,YAAY,MAAM,EACpC,GAAI,CAACC,GAAQ,CAAC+iD,EAAI,IAAK,CACrB,QAAQ,KAAK,gDAAgD,EAC7D,OAEFz0B,EAAS,QAAQjtC,CAAK,EACjB2e,EAAA,KAAK+iD,EAAI,GAAG,CACnB,CAEU,kBAAkB3jE,EAAkB,CjUvEzC,IAAAG,EAAA4B,EAAA+wD,EAAAU,EAAAoQ,EAAAC,EiUwEC,IAAAC,IAEFhR,GAAA/wD,GAAA5B,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,UAAlB,YAAA4B,EAA2B,SAA3B,YAAA+wD,EAAmC,QAAS,UAC1CgR,IAAmB9jE,EAAQ,cAC7B8jE,IAAiBD,GAAAD,GAAApQ,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,UAAlB,YAAAoQ,EAA2B,SAA3B,YAAAC,EAAmC,QAAS,WAE/D,KAAK,MAAM,eAAiBC,CAC9B,CAEA,MAAgB,WAAY,CAC1B,MAAMp+D,EAAM,kCACNkE,EAAO,MAAMsB,GAAY,QAA4BxF,CAAG,EAC1D,GAAAkE,EAAK,QAAU,IACb,MAAAA,EAAK,SAAW,IACZ,IAAI,MAAM,gCAAgClE,GAAK,EAE/C,IAAI,MACR,6CAA6CA,cAAgBkE,EAAK,UAInE,WAAM,QAAUA,EAAK,KAC1B,QAAQ,MAAM,aAAc,KAAK,MAAM,OAAO,CAChD,CAEU,UAAyC,CAE/C,wBAAC,MAAI,OAAM,UACT,mBAAC,UACC,kBAAgB,GAChB,MAAM,4FACN,GAAG,sBACH,gBAAc,OACd,gBAAc,SAEb,yBAAK,UAAQ,kBAAiB,SAAO,EAAQ,IAC9C,iBAAC,YACC,IAAI,4CACJ,KAAM,GACN,UAAU,OACX,GAEF,wBAAI,MAAM,gBAAgB,kBAAgB,qBACzC,mBAAC,eACC,YAAS,GACT,cAAY,UACZ,QAAQ,uBAER,iBAAC,MAAI,OAAM,WACT,mBAAC,SACC,KAAK,SACL,MAAM,eACN,YAAY,YACZ,aAAW,SACX,WAAS,gBACT,cAAY,SACZ,YAAU,SACV,cAAY,UAEhB,EACC,wBAAI,MAAM,yDACR,MAAI,OAAM,iBAAkB,WAAO,EACnC,wBAAI,UAAQ,uBAAuB,iBAAe,SACjD,mBAAC,OACC,MAAM,+BACN,eAAa,yBACb,wBAAsB,kBACtB,+BAA6B,kBAC7B,cAAY,qDAEX,sBAAE,UAAQ,kBAAkB,UAAQ,oBAAoB,CAE7D,GACC,wBAAI,QAAM,wBAAwB,UAAQ,wBACxC,wBAAI,MAAM,eAAgB,aAAS,CACtC,EACA,iBAAC,OAAI,UAAQ,uBAAuB,eAAa,OAC/C,mBAAC,OACC,MAAM,+BACN,wBAAsB,WACtB,cAAY,8CAEX,sBAAE,UAAQ,WAAW,UAAQ,aAAa,EAE/C,CACF,CAEJ,EACF,CAEJ,CACF,EA1JO,IAAMm6D,GAANL,GACLn8D,EADWw8D,GACG,UAAU,mBCAnB,MAAMC,GAAN,cAAwChtD,CAAU,CAuBvD,aAAc,CACN,QAbEzP,EAAA,oBAAe,IAAIkC,EAAgB,MAAM,GAE5ClC,EAAA,aAA+B,CACpC,OAAQ,OACR,QAAS,CAAC,EACV,WAAY,OACZ,WAAY,CAAC,EACb,cAAe,CAAC,EAChB,cAAe,CAAC,EAChB,eAAgB,KAAK,gBAKvB,CAtBA,WAAW,oBAA4D,CACrE,MAAO,EACT,CAEU,oBAA4D,CACpE,MAAO,EACT,CAkBU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAKy8D,GAA0B,kBAAkB,CACxD,CAEA,MAAgB,YAAa,ClU1CxB,IAAA7jE,EAAA4B,EkU2CH,MAAM,MAAM,aACZ,KAAK,kBAAkB,EACvB,MAAM,KAAK,yBACP5B,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SACpB,KAAK,mBAAkB4B,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,OAAO,CAEpD,CAEA,MAAgB,WAAY,ClUnDvB,IAAA5B,EAAA4B,EkUoDH,MAAM,MAAM,aACR5B,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SACpB,KAAK,mBAAkB4B,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,OAAO,CAEpD,CAEU,mBAAoB,CAC5B,KAAK,aAAa,GAAG,eAAgB,KAAK,UAAW,IAAI,CAC3D,CAEA,MAAgB,WAAY,ClU9DvB,IAAA5B,EAAA4B,GkU+DC5B,EAAA,KAAK,MAAM,QAAX,MAAAA,EAAkB,SACpB,KAAK,mBAAkB4B,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,OAAO,CAEpD,CAEO,eAAe4hE,EAAuB1hE,EAAc,CACjD,cAAM,iBAAkB0hE,EAAK1hE,CAAK,EAC1C,KAAK,MAAM,OAAS0hE,EACd,MAAA/iD,EAAOD,EAAK,YAAY,MAAM,EACpC,GAAI,CAACC,GAAQ,CAAC+iD,EAAI,IAAK,CACrB,QAAQ,KAAK,gDAAgD,EAC7D,OAEFz0B,EAAS,QAAQjtC,CAAK,EACjB2e,EAAA,KAAK+iD,EAAI,GAAG,CACnB,CAEU,kBAAkB3jE,EAAkB,ClUhFzC,IAAAG,EAAA4B,EkUiFG,MAAAkiE,GAAsB9jE,EAAAH,EAAQ,SAAR,YAAAG,EAAgB,MAE5C,GAAI,GAAC4B,EAAA,KAAK,MAAM,UAAX,MAAAA,EAAoB,QACjB,UAAI,MAAM,iBAAiB,EAO/B,GAJJ,KAAK,MAAM,OAAS,KAAK,MAAM,QAAQ,KACpC4hE,GAAQA,EAAI,QAAUM,CAAA,EAGrB,CAAC,KAAK,MAAM,OAAQ,CACd,aAAK,sBAAsBA,eAAiC,EACpE,OAGG,gCAA2B,KAAK,MAAM,MAAM,CACnD,CAEA,MAAgB,uBAAwB,CACtC,MAAMv+D,EAAM,kCACNkE,EAAO,MAAMsB,GAAY,QAA4BxF,CAAG,EAC1D,GAAAkE,EAAK,QAAU,IACb,MAAAA,EAAK,SAAW,IACZ,IAAI,MAAM,mCAAmClE,GAAK,EAElD,IAAI,MACR,gDAAgDA,cAAgBkE,EAAK,UAItE,WAAM,QAAUA,EAAK,KAC1B,QAAQ,MAAM,mBAAoB,KAAK,MAAM,OAAO,CACtD,CAEA,MAAgB,2BAA2BwL,EAA0B,CAC7D,MAAA1P,EAAM,WAAa0P,EAAO,SAC1BxL,EAAO,MAAMsB,GAAY,QAAwBxF,CAAG,EACtD,GAAAkE,EAAK,QAAU,IACb,MAAAA,EAAK,SAAW,IACZ,IAAI,MAAM,gCAAgClE,GAAK,EAE/C,IAAI,MACR,6CAA6CA,cAAgBkE,EAAK,UAInE,WAAM,WAAaA,EAAK,KAC7B,QAAQ,MAAM,iBAAkB,KAAK,MAAM,UAAU,EACjD,KAAK,MAAM,aACR,WAAM,WAAa,KAAK,sBAC3B,UACA,KAAK,MAAM,WAAW,UAEnB,WAAM,cAAgB,KAAK,sBAC9B,aACA,KAAK,MAAM,WAAW,UAEnB,WAAM,cAAgB,KAAK,sBAC9B,aACA,KAAK,MAAM,WAAW,UAG5B,CAEA,sBACEtM,EACA0Y,EACAgE,EAAQ,EACRkqD,EAAW,EACX,CACA,MAAM9nE,EAA2B,GACjC,GAAI4d,EAAQkqD,EACH,OAAA9nE,EAET,UAAW2W,KAASiD,EAMlB,GAJIjD,EAAM,SAAWA,EAAM,QAAUzV,GAC5BlB,EAAA,KAAK,GAAG2W,EAAM,QAAQ,EAG3BzV,IAAS,WAAayV,EAAM,SAAWA,EAAM,QAAU,UAAW,CAC5D,cAAM,sBAAuBA,CAAK,EAC/B,UAAAoxD,KAAUpxD,EAAM,SAClB3W,EAAA,KACL,GAAG,KAAK,sBAAsBkB,EAAM6mE,EAAO,SAAU,EAAEnqD,CAAK,GAK7D,OAAA5d,CACT,CAEU,UAAyC,CAE/C,wBAAC,MAAI,WAAQ,aAAa,MAAM,6BAC9B,mBAAC,MAAI,OAAM,yBAA0B,WAAO,EAC5C,iBAAC,KACC,MAAM,yCACN,eAAa,aACb,UAAQ,YAER,iBAAC,OAAK,WAAQ,YAAa,IAG5B,wBAAI,MAAM,2BAA0B,YAAU,EAC/C,iBAAC,KACC,MAAM,yCACN,eAAa,gBACb,UAAQ,YAER,iBAAC,OAAK,WAAQ,YAAa,IAG5B,wBAAI,MAAM,2BAA0B,YAAU,EAC/C,iBAAC,KACC,MAAM,yCACN,eAAa,gBACb,UAAQ,YAER,iBAAC,OAAK,WAAQ,YAAa,GAE/B,CAEJ,CACF,EAnMO,IAAMgoE,GAANJ,GACLz8D,EADW68D,GACG,UAAU,yBCTnB,MAAMC,GAAN,cAAsCrtD,CAAU,CAWrD,aAAc,CACN,QALEzP,EAAA,oBAAe,IAAIkC,EAAgB,MAAM,GAE5ClC,EAAA,aAAsC,GAI7C,CAVA,WAAW,oBAAqB,CAC9B,MAAO,EACT,CAUU,mBAAoB,CAC5B,MAAM,kBAAkB,EACnB,UAAK88D,GAAwB,kBAAkB,CACtD,CAEA,MAAgB,YAAa,CAC3B,MAAM,MAAM,aACZ,KAAK,kBAAkB,CACzB,CAEU,mBAAoB,CAC5B,KAAK,aAAa,GAAG,sBAAuB,KAAK,UAAW,IAAI,CAClE,CAEU,WAAY,CACpB,MAAMC,EAAa,SAAS,eAC1B,gCAEF,GAAI,CAACA,EAAY,CACf,QAAQ,KAAK,8CAA8C,EAC3D,OAEG,WAAM,SAAWA,EAAW,SACnC,CAEU,UAAyC,CAC7C,OAAApkE,EAAkB,IAAI,IACnB,WAAM,SAAW,KAAK,WAEtB,iBAAC,MAAI,eAAY,UAAW,EACrC,CACF,EA9CO,IAAMqkE,GAANF,GACL98D,EADWg9D,GACG,UAAU,mTCAbC,GAAwD,CACnE,QAAAx7D,GACA,SAAAyV,GACA,WAAAzT,GAAA,WACAF,GAEA,KAAK1Q,EAAU,GAAI,CACRqqE,UAAe,aAAarqE,CAAO,EACrC,IACT,CACF,ECJM0Q,GAA2B,GAKjB,SAAA45D,GACdC,EACA/lC,EACA,CACA9zB,GAAW,KAAK,CACd,SAAA8zB,EACA,YAAA+lC,CAAA,CACD,CACH,CAKO,MAAMC,EAAY,CAMvB,aAAc,CALdr9D,EAAA,2BAA0C,MAMnC,sBAAiB,SAAS,IAAI,EACnC,KAAK,4BAA4B,EACjC,KAAK,oBAAoB,EAClB,wBAAiB,aAAc,IACpC,KAAK,4BAA4B,EAErC,CAKQ,iBAAiB+N,EAAsB,CAClCxK,GAAA,QAAS3M,GAAM,CACxBmX,EAAQ,iBAA8BnX,EAAE,QAAQ,EAAE,QAASqB,GAAO,CAC3DA,EAAG,QAAQ,cACd,IAAIrB,EAAE,YAAY,CAAE,GAAAqB,EAAI,IAAK,KAAM,EACnCA,EAAG,QAAQ,YAAiB,OAAO,EAAI,EACzC,CACD,EACF,CACH,CAEO,eAAgB,CACrB,KAAK,4BAA4B,CACnC,CAMQ,6BAA8B,CrUhEjC,IAAAW,EqUuEH,GANI,KAAK,sBACF,yBAAoB,UAAU,OAAO,gBAAgB,GACrDA,EAAA,yBAAoB,oBAApB,MAAAA,EAAuC,SAC5C,KAAK,oBAAsB,MAGzB,CAAC,SAAS,KAAM,OAEpB,MAAM0kE,EAAa,SAAS,eAAe,SAAS,KAAK,UAAU,CAAC,CAAC,EACrE,GAAI,CAACA,EAAY,OAEjB,IAAIC,EAAgBD,EAAW,cACxB,KAAAC,GAAiBA,EAAc,UAAY,WAChDA,EAAgBA,EAAc,cAGhC,GAAKA,GAKDA,EAAc,cAAgB,KAAM,CACtC,KAAK,oBAAsBA,EAEbA,EAAA,UAAU,IAAI,gBAAgB,EAEtC,MAAAC,EAAU,SAAS,cAAc,GAAG,EAClCA,EAAA,UAAU,IAAI,SAAS,EAC/BA,EAAQ,YACN,8DAEFD,EAAc,QAAQC,CAAO,EAEjC,CAEQ,qBAAsB,CAC5B,SAAS,iBAAiB,cAAc,EAAE,QAAS5+B,GAAW,CACxD,IAAA/qC,EACG+qC,EAAA,iBAAiB,QAAS,IAAM,CACjCA,EAAO,kCAAkC,aAC3C,UAAU,UAAU,UAClBA,EAAO,uBAAuB,UAAU,KAAK,GAGjDA,EAAO,YAAc,UACdA,EAAA,UAAU,IAAI,SAAS,EAC9B,aAAa/qC,CAAO,EACpBA,EAAU,WAAW,IAAM,CAClB+qC,EAAA,UAAU,OAAO,SAAS,EACjC/qC,EAAU,WAAW,IAAM,CACzB+qC,EAAO,YAAc,QACpB,GAAG,GACL,GAAI,EACR,EACF,CACH,CACF,CCnHO,MAAMnvB,EAAU,CAIrB,YAAY5c,EAA4B,CAH9BmN,EAAA,WACAA,EAAA,YAGR,KAAK,GAAKnN,EAAQ,GAClB,KAAK,IAAMA,EAAQ,GACrB,CACF,CCPO,IAAI4qE,GAAsB,YAKtBC,GAAsB,YAKtBC,GAAoB,UAKxB,MAAMC,GAA6B,CAAE,EAAG,EAAG,EAAG,CAAE,EAUhD,IAAIC,GAAyB,GAUzBC,GAA2B,GAK/B,MAAM//D,GACT,iEAAiE,KAC7D,UAAU,SACd,EACJ,SAAS,gBAAgB,UAAU,IAAIA,GAAW,YAAc,YAAY,EAExEA,IAAY,iBAAkB,SAAS,kBAEzB0/D,GAAA,aACAC,GAAA,YACFC,GAAA,YAGhB,SAAS,iBAAiBF,GAAcpe,GAAM,CAC1Bwe,GAAA,GACEC,GAAA,GAClB,MAAM3e,EACFse,IAAe,aACRpe,EAAiB,cAAc,CAAC,EAChCA,EACSue,GAAA,EAAIze,EAAE,OAAS,EACfye,GAAA,EAAIze,EAAE,OAAS,CACvC,CAAC,EAED,SAAS,iBAAiBue,GAAcre,GAAM,CAC1C,GAAKwe,IACD,CAACC,GAAiB,CAClB,MAAM3e,EACFse,IAAe,aACRpe,EAAiB,cAAc,CAAC,EAChCA,EACLtnD,EAAI6lE,GAAoB,GAAKze,EAAE,OAAS,GACxCvlC,EAAIgkD,GAAoB,GAAKze,EAAE,OAAS,GAC9C2e,GAAkB,KAAK,KAAK/lE,EAAIA,EAAI6hB,EAAIA,CAAC,EAAI,GAErD,CAAC,EAED,SAAS,iBAAiB+jD,GAAW,IAAM,CACvBE,GAAA,EACpB,CAAC,EAED,SAAS,iBAAiB,QAAUxe,GAAM,CAM1C,CAAC,EC/FM,MAAM0e,WAAetuD,EAAU,CAKpC,YAAY5c,EAA4B,CACtC,MAAMA,CAAO,EALfmN,EAAA,eAEAA,EAAA,kBAKE,KAAK,UAAY,KAAK,GAAG,QAAQ,QAAa,GACzC,QAAG,iBAAiB29D,GAAYte,GAAM,KAAK,YAAYA,CAAC,CAAC,EAC9D,KAAK,GAAG,iBAAiB,QAAUA,GAAMA,EAAE,gBAAgB,EAClD,0BAAiBoe,GAAcpe,GACtC,KAAK,sBAAsBA,CAAC,GAE9B,SAAS,iBAAiBse,GAAYte,GAAM,KAAK,oBAAoBA,CAAC,CAAC,CACzE,CAEA,UAAUtqD,EAAgB,CACxB,GAAI,KAAK,QAAUA,EAAO,OAC1B,KAAK,OAASA,EAEd,SAAS,gBAAgB,UAAU,OAAO,OAAS,KAAK,UAAWA,CAAK,EACxE,KAAK,GAAG,UAAU,OAAO,SAAUA,CAAK,EAExC,MAAMqpB,GAAc,KAAK,OAAS,UAAY,aAAe,KAAK,UACzD,yBAAgB,UAAU,IAAIA,CAAU,EACjD,WACE,IAAM,SAAS,gBAAgB,UAAU,OAAOA,CAAU,EAC1D,IAEJ,CAEA,YAAY1jB,EAAc,CACpBojE,KACJ,KAAK,UAAU,EAAI,EACnBpjE,EAAM,eAAe,EACvB,CAEA,sBAAsB2kD,EAAU,CAC9B,GAAI,KAAK,OAAQ,CACf,GACGA,EAAE,OAAuB,QAAQ,iCAAiC,EAEnE,OAGF,KAAK,UAAU,EAAK,EAExB,CAEA,oBAAoBA,EAAU,CACxB,IAAAye,IACA,KAAK,QACFze,EAAE,OAAuB,QAAQ,cAAc,EAAG,CACrD,MAAM0c,EAAQ1c,EAAE,OAAuB,QAAQ,GAAG,EAClD,GAAI0c,EAAM,CACJ,IAAAziD,EAAO,OAAO,SAAS,KACvBA,EAAK,QAAQ,GAAG,GAAK,KACvBA,EAAOA,EAAK,UAAU,EAAGA,EAAK,QAAQ,GAAG,CAAC,GAExCyiD,EAAK,KAAK,UAAU,EAAGziD,EAAK,MAAM,GAAKA,GACzC,WAAW,IAAM,KAAK,UAAU,EAAK,EAAG,GAAG,GAKrD,CACF,CC7DA,IAAI0kD,GAEJ,GAAI,CACWA,GAAA,YACf,MAAE,CACaA,GAAA,CACP,SAAU,CACC,WACX,EACA,SAAU,CAAC,EAEnB,CAEO,MAAMC,GAAUD,GChBhB,MAAME,WAAkBzuD,EAAU,CAkBvC,YAAY5c,EAA4B,CACtC,MAAMA,CAAO,EAlBNmN,EAAA,WAKDA,EAAA,gBAKAA,EAAA,aAKSA,EAAA,YAIf,KAAK,GAAKnN,EAAQ,GACb,KAAK,IACA,aAAK,mCAAmCA,EAAQ,cAAc,EAExE,KAAK,QAAU,KAAK,GAAG,cAAc,wBAAwB,EAC7D,KAAK,KAAO,KAAK,QAAQ,cAAc,KAAK,EAC5C,KAAK,IAAM,iBACT,KAAK,QAAQ,QAAQ,KACrB,KAAK,QAAQ,YAAa,KAAO,UAAQ,OAAQ,GAAG,EAAE,YAAY,IAGpE,MAAMsrE,EAASF,GAAQ,QAAQ,KAAK,GAAG,EACvC,KAAK,GAAG,KAAOE,EAASA,IAAW,OAAS,KAAK,GAAG,KAEpD,KAAK,GAAG,iBAAiB,SAAU,IAAM,KAAK,QAAQ,EAEtD,KAAK,OAAO,CACd,CAEQ,QAAS,CACf,KAAK,KAAK,MAAM,UAAY,UAAU,KAAK,GAAG,KAAO,EAAI,UACzDF,GAAQ,QAAQ,KAAK,IAAK,KAAK,GAAG,KAAK,UAAU,CACnD,CACF,CC7CO,SAASG,GAAUC,EAA4B,CACpD,MAAMtkB,EAAckkB,GAAQ,QAAQ,WAAW,GAAqB,KACpEI,EAAQ,MAAQtkB,EAChBukB,GAASvkB,CAAU,EAEXskB,EAAA,iBAAiB,SAAU,IAAM,CAC/BJ,GAAA,QAAQ,YAAaI,EAAQ,KAAK,EAC1CC,GAASD,EAAQ,KAAoB,EACtC,CACH,CAKA,SAASC,GAASrN,EAAoB,CAC3B,yBAAgB,QAAQ,MAAQA,CAC3C,CCfO,MAAMsN,GAAY,IAAM,CAC7B,QAAQ,MAAM,uBAAuB,EAErCpB,GAAkBY,GAAQ,gBAAgB,EAC1CZ,GAAkBe,GAAW,sBAAsB,EAE7C,MAAAM,EAAc,SAAS,eAAe,WAAW,EACnDA,GACFJ,GAAUI,CAAgC,EAGtC,MAAAC,EAAM,IAAIpB,GAEhB,OAAO,eAAe,OAAQ,MAAO,CAAE,MAAOoB,EAAK,EAInD,SAAS,iBAAiB,WAAW,EAAE,QAASxmE,GAAO,CAClDA,EAAA,iBAAiB,QAAS,IAAM,CACxB,gBAAQA,EAAyB,IAAI,EAC/C,EACF,CACH,ECVMsmE,GAAY,IAAM,CACtB,QAAQ,MAAM,cAAc,EACtB,MAAAG,EAAO,IAAIzwD,GACjB,OAAO,MAAQ,GAEfywD,EAAK,UAAU,CACb,OAAQ,CAAC,KAAM,QAAQ,EACvB,2BAA4B,GAC5B,mBAAoB,CAAC,IAAK,GAAG,EAC9B,EAGDA,EAAK,OAAO,SAASznD,GAAW,KAAM,GACtCynD,EAAK,OAAO,SACV9+C,GAAa,KAAK,CAChB,kBAAmB,IAAI1H,EAAe,CACvC,GAEHwmD,EAAK,OAAO,SAAShN,GAAU,KAAM,GACrCgN,EAAK,OAAO,SAAS7D,GAAW,KAAM,GACtC6D,EAAK,OAAO,SAASzB,GAAoB,KAAM,GAEzC,MAAAhM,EAAQ7W,GAAa,eACdskB,EAAK,KAAK,SAAS,KAAM,OAAO,KAAK,EAE7C,mBAAmB,EAExBA,EAAK,UAAU,OAAO,GAAG,2BAA6BtqE,GAAiB,CACrE,QAAQ,MAAMA,CAAK,EACpB,EAKiBuqE,KAGZ1N,EAAA,SAAU5uD,GAAS,CACvB,SAAS,KAAK,UAAU,OAAO,KAAM,OAAQ,OAAO,EAChDA,EAAK,SAAS,UACP,cAAK,UAAU,IAAI,IAAI,EAE9BA,EAAK,SAAS,SACZA,EAAK,SAAS,OACP,cAAK,UAAU,IAAI,MAAM,EAEzB,cAAK,UAAU,IAAI,OAAO,EAEvC,CACD,CACH,EAEAlH,GAAM,IAAM,CACAojE,IACZ,CAAC","names":["getRandomColor","letters","color","i","consoleColoured","options","args","printArgs","BASE64_PREFIX","QUOTED_STR","times","n","cb","deferred","obj","prom","resolve","reject","debounceCb","fn","wait","timeout","params","debounceT","promise","res","rej","debounce","error","debounceF","frame","throttle","timerId","jsonStringify","object","space","replaceSingleQuote","result","parseJsonString","value","couldBeJson","isJson","str","isBase64","toBase64","_obj","isObject","fromBase64","base64","maybeDecodedUri","encoded","parseType","val","input","isAttribute","type","jsonString","isUndefined","isDefined","getString","getNumber","isNumber","isBoolean","isString","justDigits","num","escapeHtml","html","c","withoutSpecialChars","replaceUmlautChars","withoutMultiWhitespace","handleize","stripHtml","tmp","camelCase","grouped","kebabCase","letter","capitalize","extend","extended","objects","merge","prop","clone","deep","x","setAttribute","el","attributeName","newValue","oldValue","newValueFormatted","changed","getDataset","element","dataset","attr","hasChildNodesTrim","_a","childNodes","getInputValue","results","key","option","scrolling","scrollElement","scrollTimeout","checkScroll","scrollTo","to","offset","angle","behavior","scrollPromise","top","left","scrollY","scrollX","marginTop","marginLeft","getScrollHeight","win","doc","getScrollWidth","scrollToPosition","position","_b","getElementFromEvent","event","getViewportDimensions","w","isInViewport","elem","distance","vp","vertical","horizontal","ready","callback","checkReady","loadScript","src","id","async","defer","script","getUID","prefix","MAX_UID","isCustomElement","isRegistered","isUpgraded","localName","customConstructor","waitForCustomElement","getElementIndex","isNode","tasksByHandle","currentlyRunningATask","messagePrefix","onGlobalMessage","runIfPresent","_clearImmediate","handle","run","task","fallbackCopyTextToClipboard","text","textArea","msg","err","copyTextToClipboard","getOS","ua","platform","uAs","platforms","uAKey","platformKey","getOSType","os","isMobile","isDesktop","isGameConsole","getLocation","url","l","normalizeUrl","location","curHostname","getUrl","onRoute","checkUrl","compareQueryParam","location1","location2","onParentRoute","pathname","hostname","checkLocation","checkPathname","checkHostname","cleanLink","getPort","p","port","protocol","isAbsoluteUrl","isExternalUrl","absoluteUrl","host","isExternal","ModuleElementService","elements","__publicField","_Observer","model","keypath","parseResult","root","tokens","current","index","chr","active","path","unreached","prev","token","next","rootProp","Observer","AdapterService","adapters","adapter","fallbackName","forceFallback","name","BindersService","binders","Binder","_EventDispatcher","namespace","instance","namespaces","eventName","thisContext","curEvent","EventDispatcher","CoreService","_LifecycleService","data","viewId","newStatus","oldStatus","container","containerHtml","firstPageLoad","tagName","connected","bound","component","states","state","allBound","errorMessage","count","LifecycleService","ComponentService","components","FormatterService","formatters","formatter","HttpService","headers","dataType","contentType","accept","method","body","header","cache","separator","response","bodyResult","_DotAdapter","ref","original","map","weakmap","r","k","pointers","idx","callbacks","desc","_callbacks","DotAdapter","dotAdapter","FORMATTER_ARGS","FORMATTER_SPLIT","view","identifier","modelName","formatterIndex","arg","ai","observer","startIndex","promised","declaration","processedArgs","handler","ev","realValue","fi","models","regexp","AnimateStarBinder","animateClassName","start","AddClassBinder","className","AssignPropertyBinder","propertyName","AssignBinder","AttributeBinder","BlockBinder","CheckedBinder","ClassStarBinder","classList","ele","_","NO_RIBA_COMPONENT_ERROR_MESSAGE","ComponentAttributeBinder","attrName","DisabledBinder","NoDragBinder","enable","MustacheTextBinder","node","TEXT","BINDING","DECLARATION_SPLIT","parseTemplate","template","delimiters","length","lastIndex","open","close","substring","lastToken","parseNode","templateDelimiters","blockRecursion","childNode","parseDeclaration","matches","pipes","_View","els","binder","anchorEl","binding","webComponent","bindingFullPrefixes","fullPrefix","wildcards","attributes","attributeBinders","block","bindInfos","len","nodeName","attribute","startingPrefix","bindInfo","COMPONENT","parsedDeclaration","resolveNodeName","View","a","b","aPriority","EachStarBinder","collection","indexProp","scope","matchIndex","nextView","nextIndex","previous","ElementBinder","EnabledBinder","FlexSortChildsBinder","descending","childrens","child","HideBinder","HtmlBinder","IfBinder","MaxlengthBinder","maxLength","OnEventBinder","ParentBinder","ReadonlyBinder","readOnly","RemoveClassBinder","regex","ShowBinder","SrcsetSizeBinder","size","srcset","seperator","sizes","iterSize","StyleBackgroundImageBinder","StyleStarBinder","StyleBinder","TagStarBinder","oldEl","curTagName","newEl","TemplateBinder","TextBinder","ToggleOnEventBinder","passive","propertyKey","UncheckedBinder","UnlessBinder","DEFAULT_EVENTS","ValueBinder","events","ModulesService","module","_Riba","context","viewOptions","Riba","JsxFragment","Raw","_props","htmlVoidElements","createElement","tag","props","children","renderElement","hasChildren","renderChildren","BasicComponent","mode","observedAttributes","observedAttribute","oa2c","requiredAttribute","self","parsedAttributeName","oldDocument","newDocument","fnArgs","TemplatesComponent","Component","tpl","content","templates","containsFormatter","search","sizeFormatter","emptyFormatter","getFormatter","firstFormatter","isLastFormatter","array","lastFormatter","randomFormatter","arrayOrMaxNumber","min","max","rangeFormatter","arr","end","setFormatter","overlapsFormatter","joinFormatter","delimeter","andFormatter","betweenFormatter","nums","egtFormatter","eqFormatter","gtFormatter","neFormatter","ltFormatter","eltFormatter","orFormatter","notFormatter","plusFormatter","minusFormatter","timesFormatter","dividedByFormatter","moduloFormatter","_gcd","gcdFormatter","evenFormatter","unevenFormatter","digitsFormatter","argsFormatter","debugFormatter","toPrint","level","defaultFormatter","defaultValue","isDesktopFormatter","isMobileFormatter","callFormatter","callNameFormatter","mapFormatter","target","osFormatter","preferFormatter","preferValue","ternaryFormatter","condition","yes","no","appendFormatter","capitalizeFormatter","cutFormatter","cutAt","delimitation","downcaseFormatter","endsWithFormatter","checkStart","filledFormatter","handleizeFormatter","matchFormatter","flags","padStartFormatter","padString","padEndFormatter","toIntegerFormatter","ret","toFloatFormatter","toDecimalFormatter","retI","retF","isIntegerFormatter","DEFAULT_DECIMAL_SEPARATOR","DEFAULT_THOUSAND_SEPARATOR","DEFAULT_PRECISION","numberFormatFormatter","precision","decimalSeparator","thousandSeparator","retStr","pluralizeFormatter","singular","plural","prependFormatter","upcaseFormatter","replaceFormatter","replaceValue","replaceFirstFormatter","sliceFormatter","startsWithFormatter","stripFormatter","stripHtmlFormatter","booleanFormatter","isArrayFormatter","isBooleanFormatter","isDefinedFormatter","isNumberFormatter","isObjectFormatter","isStringFormatter","isUndefinedFormatter","jsonFormatter","parseFormatter","toBase64Formatter","toStringFormatter","def","toNumberFormatter","coreModule","services","services.CoreService","line","col","_HistoryManager","history","HistoryManager","ROUTE_ERROR_CLASS","IGNORE_CLASS_LINK","IGNORE_CLASS_PREFETCH","BaseTransition","action","oldContainer","newContainer","newContainerLoading","CustomTransition","FadeTransition","scrollToTop","HideShowTransition","BaseView","Dom","title","titleElement","responseText","parseTitle","containerSelector","prefetchLinks","prefetchLinkElements","wrapper","newPage","_Prefetch","autobindLinks","evt","preventCheck","Pjax","pjax","href","Prefetch","s","m","h","d","y","ms","parse","fmtLong","fmtShort","match","msAbs","isPlural","InMemoryStorage$1","InMemoryStorage_1","InMemoryStorage","require$$0","require$$1","createCache","cleanupInterval","customStorage","intervalTickId","isUndef","v","isDef","isFn","isNum","checkHasExpired","exp","set","expiresIn","expiredInMs","storedValue","cachedValue","cachedExpiresIn","del","matchStart","cacheKey","clear","teardown","BaseCache","promisifyRequest","request","createStore","dbName","storeName","dbp","txMode","db","defaultGetStoreFunc","defaultGetStore","get","customStore","store","eachCursor","keys","items","cursor","idbStorage","_Pjax","listenAllLinks","listenPopstate","changeBrowserUrl","scrollToAnchorOffset","RouterService","newTab","linkElement","head","rel","responsePromise","forceCache","fallback","currLocation","scrollToElement","newUrl","oldUrl","newContainerPromise","transition","transitionResult","currentStatus","initialResponse","currentUrl","ViewStaticBinder","RouteBinder","optionsOrUrl","isAnchorHTMLElement","RouteClassStarBinder","isAnchorElement","RoutePreloadBinder","ParentRouteClassStarBinder","isAnkerHTMLElement","goBack","RouteBackOnStarBinder","_RouterLoadScriptComponent","RouterLoadScriptComponent","_RouterViewComponent","pjaxOptions","prevStatus","newPageRawHTML","isInit","RouterViewComponent","routerModule","services.RouterService","themeChoices","DEFAULT_BP_XS","DEFAULT_BP_SM","DEFAULT_BP_MD","DEFAULT_BP_LG","DEFAULT_BP_XL","DEFAULT_BP_XXL","DEFAULT_MODULE_OPTIONS","TOGGLE_BUTTON","TOGGLE_ATTRIBUTE","TOGGLE_CLASS","_Bs5Service","breakpoint","newBreakpoint","breakpoints","dimension","curr","last","found","isBreakpointName","compareBreakpointName","isBreakpoint","compareBreakpoint","Bs5Service","bottom","right","auto","basePlacements","clippingParents","viewport","popper","reference","variationPlacements","acc","placement","placements","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","getNodeName","getWindow","ownerDocument","isElement","OwnElement","isHTMLElement","isShadowRoot","applyStyles","_ref","style","effect","_ref2","initialStyles","styleProperties","property","applyStyles$1","getBasePlacement","round","getUAString","uaData","item","isLayoutViewport","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scaleX","scaleY","visualViewport","addVisualOffsets","width","height","getLayoutRect","contains","parent","rootNode","getComputedStyle","isTableElement","getDocumentElement","getParentNode","getTrueOffsetParent","getContainingBlock","isFirefox","isIE","elementCss","currentNode","css","getOffsetParent","window","offsetParent","getMainAxisFromPlacement","within","mathMax","mathMin","withinMaxClamp","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","hashMap","toPaddingObject","padding","arrow","_state$modifiersData$","arrowElement","popperOffsets","basePlacement","axis","isVertical","arrowRect","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","center","axisProp","_options$element","arrow$2","getVariation","unsetSides","roundOffsetsByDPR","dpr","mapToStyles","_Object$assign2","popperRect","variation","offsets","gpuAcceleration","adaptive","roundOffsets","isFixed","_offsets$x","_offsets$y","_ref3","hasX","hasY","sideX","sideY","heightProp","widthProp","offsetY","offsetX","commonStyles","_ref4","_Object$assign","computeStyles","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","computeStyles$1","_options$scroll","scroll","_options$resize","resize","scrollParents","scrollParent","eventListeners","hash","getOppositePlacement","matched","getOppositeVariationPlacement","getWindowScroll","scrollLeft","scrollTop","getWindowScrollBarX","getViewportRect","strategy","layoutViewport","getDocumentRect","_element$ownerDocumen","winScroll","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","getScrollParent","listScrollParents","list","isBody","updatedList","rectToClientRect","rect","getInnerBoundingClientRect","getClientRectFromMixedType","clippingParent","getClippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","computeOffsets","commonX","commonY","mainAxis","detectOverflow","_options","_options$placement","_options$strategy","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","computeAutoPlacement","flipVariations","_options$allowedAutoP","allowedAutoPlacements","allPlacements","allowedPlacements","overflows","getExpandedFallbackPlacements","oppositePlacement","flip","_options$mainAxis","checkMainAxis","_options$altAxis","checkAltAxis","specifiedFallbackPlacements","_options$flipVariatio","preferredPlacement","isBasePlacement","fallbackPlacements","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","mainVariationSide","altVariationSide","checks","check","numberOfChecks","_loop","_i","fittingPlacement","_ret","flip$1","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","hide","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","hide$1","distanceAndSkiddingToXY","rects","invertDistance","skidding","_options$offset","_data$state$placement","offset$1","popperOffsets$1","getAltAxis","preventOverflow","_options$tether","tether","_options$tetherOffset","tetherOffset","altAxis","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_offset","_len","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","preventOverflow$1","getHTMLElementScroll","getNodeScroll","isElementScaled","getCompositeRect","elementOrVirtualElement","isOffsetParentAnElement","offsetParentIsScaled","documentElement","order","modifiers","visited","modifier","sort","requires","dep","depModifier","orderModifiers","orderedModifiers","phase","pending","mergeByName","merged","existing","DEFAULT_OPTIONS","areValidElements","_key","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","effectCleanupFns","isDestroyed","setOptionsAction","cleanupModifierEffects","runModifierEffects","_state$elements","_state$orderedModifie","_state$orderedModifie2","_ref$options","cleanupFn","noopFn","createPopper","elementMap","Data","instanceMap","MILLISECONDS_MULTIPLIER","TRANSITION_END","parseSelector","selector","toType","getTransitionDurationFromElement","transitionDuration","transitionDelay","floatTransitionDuration","floatTransitionDelay","triggerTransitionEnd","getElement","isVisible","elementIsVisible","closedDetails","summary","isDisabled","findShadowRoot","noop","reflow","getjQuery","DOMContentLoadedCallbacks","onDOMContentLoaded","isRTL","defineJQueryPlugin","plugin","$","JQUERY_NO_CONFLICT","execute","possibleCallback","executeAfterTransition","transitionElement","waitForTransition","durationPadding","emulatedDuration","called","getNextActiveElement","activeElement","shouldGetNext","isCycleAllowed","listLength","namespaceRegex","stripNameRegex","stripUidRegex","eventRegistry","uidEvent","customEvents","nativeEvents","makeEventUid","uid","getElementEvents","bootstrapHandler","hydrateObj","EventHandler","bootstrapDelegationHandler","domElements","domElement","findHandler","callable","delegationSelector","normalizeParameters","originalTypeEvent","delegationFunction","isDelegated","typeEvent","getTypeEvent","addHandler","oneOff","handlers","previousFunction","removeHandler","removeNamespacedHandlers","storeElementEvent","handlerKey","inNamespace","isNamespace","elementEvent","keyHandlers","jQueryEvent","bubbles","nativeDispatch","defaultPrevented","meta","normalizeData","normalizeDataKey","Manipulator","bsKeys","pureKey","Config$1","config","jsonConfig","configTypes","expectedTypes","valueType","VERSION","BaseComponent","Config","isAnimated","getSelector","hrefAttribute","SelectorEngine","parents","ancestor","focusables","enableDismissTrigger","clickEvent","NAME$f","DATA_KEY$a","EVENT_KEY$b","EVENT_CLOSE","EVENT_CLOSED","CLASS_NAME_FADE$5","CLASS_NAME_SHOW$8","Alert","NAME$e","DATA_KEY$9","EVENT_KEY$a","DATA_API_KEY$6","CLASS_NAME_ACTIVE$3","SELECTOR_DATA_TOGGLE$5","EVENT_CLICK_DATA_API$6","Button","button","NAME$d","EVENT_KEY$9","EVENT_TOUCHSTART","EVENT_TOUCHMOVE","EVENT_TOUCHEND","EVENT_POINTERDOWN","EVENT_POINTERUP","POINTER_TYPE_TOUCH","POINTER_TYPE_PEN","CLASS_NAME_POINTER_EVENT","SWIPE_THRESHOLD","Default$c","DefaultType$c","Swipe","absDeltaX","direction","NAME$c","DATA_KEY$8","EVENT_KEY$8","DATA_API_KEY$5","ARROW_LEFT_KEY$1","ARROW_RIGHT_KEY$1","TOUCHEVENT_COMPAT_WAIT","ORDER_NEXT","ORDER_PREV","DIRECTION_LEFT","DIRECTION_RIGHT","EVENT_SLIDE","EVENT_SLID","EVENT_KEYDOWN$1","EVENT_MOUSEENTER$1","EVENT_MOUSELEAVE$1","EVENT_DRAG_START","EVENT_LOAD_DATA_API$3","EVENT_CLICK_DATA_API$5","CLASS_NAME_CAROUSEL","CLASS_NAME_ACTIVE$2","CLASS_NAME_SLIDE","CLASS_NAME_END","CLASS_NAME_START","CLASS_NAME_NEXT","CLASS_NAME_PREV","SELECTOR_ACTIVE","SELECTOR_ITEM","SELECTOR_ACTIVE_ITEM","SELECTOR_ITEM_IMG","SELECTOR_INDICATORS","SELECTOR_DATA_SLIDE","SELECTOR_DATA_RIDE","KEY_TO_DIRECTION","Default$b","DefaultType$b","Carousel","activeIndex","img","swipeConfig","activeIndicator","newActiveIndicator","elementInterval","isNext","nextElement","nextElementIndex","triggerEvent","isCycling","directionalClassName","orderClassName","completeCallBack","carousel","slideIndex","carousels","NAME$b","DATA_KEY$7","EVENT_KEY$7","DATA_API_KEY$4","EVENT_SHOW$6","EVENT_SHOWN$6","EVENT_HIDE$6","EVENT_HIDDEN$6","EVENT_CLICK_DATA_API$4","CLASS_NAME_SHOW$7","CLASS_NAME_COLLAPSE","CLASS_NAME_COLLAPSING","CLASS_NAME_COLLAPSED","CLASS_NAME_DEEPER_CHILDREN","CLASS_NAME_HORIZONTAL","WIDTH","HEIGHT","SELECTOR_ACTIVES","SELECTOR_DATA_TOGGLE$4","Default$a","DefaultType$a","Collapse","toggleList","filterElement","foundElement","activeChildren","activeInstance","complete","scrollSize","trigger","selected","triggerArray","isOpen","_config","NAME$a","DATA_KEY$6","EVENT_KEY$6","DATA_API_KEY$3","ESCAPE_KEY$2","TAB_KEY$1","ARROW_UP_KEY$1","ARROW_DOWN_KEY$1","RIGHT_MOUSE_BUTTON","EVENT_HIDE$5","EVENT_HIDDEN$5","EVENT_SHOW$5","EVENT_SHOWN$5","EVENT_CLICK_DATA_API$3","EVENT_KEYDOWN_DATA_API","EVENT_KEYUP_DATA_API","CLASS_NAME_SHOW$6","CLASS_NAME_DROPUP","CLASS_NAME_DROPEND","CLASS_NAME_DROPSTART","CLASS_NAME_DROPUP_CENTER","CLASS_NAME_DROPDOWN_CENTER","SELECTOR_DATA_TOGGLE$3","SELECTOR_DATA_TOGGLE_SHOWN","SELECTOR_MENU","SELECTOR_NAVBAR","SELECTOR_NAVBAR_NAV","SELECTOR_VISIBLE_ITEMS","PLACEMENT_TOP","PLACEMENT_TOPEND","PLACEMENT_BOTTOM","PLACEMENT_BOTTOMEND","PLACEMENT_RIGHT","PLACEMENT_LEFT","PLACEMENT_TOPCENTER","PLACEMENT_BOTTOMCENTER","Default$9","DefaultType$9","Dropdown","relatedTarget","Popper","referenceElement","popperConfig","Popper.createPopper","parentDropdown","isEnd","popperData","defaultBsPopperConfig","openToggles","toggle","composedPath","isMenuTarget","isInput","isEscapeEvent","isUpOrDownEvent","getToggleButton","NAME$9","CLASS_NAME_FADE$4","CLASS_NAME_SHOW$5","EVENT_MOUSEDOWN","Default$8","DefaultType$8","Backdrop","backdrop","NAME$8","DATA_KEY$5","EVENT_KEY$5","EVENT_FOCUSIN$2","EVENT_KEYDOWN_TAB","TAB_KEY","TAB_NAV_FORWARD","TAB_NAV_BACKWARD","Default$7","DefaultType$7","FocusTrap","trapElement","SELECTOR_FIXED_CONTENT","SELECTOR_STICKY_CONTENT","PROPERTY_PADDING","PROPERTY_MARGIN","ScrollBarHelper","documentWidth","calculatedValue","styleProperty","scrollbarWidth","manipulationCallBack","actualValue","callBack","sel","NAME$7","DATA_KEY$4","EVENT_KEY$4","DATA_API_KEY$2","ESCAPE_KEY$1","EVENT_HIDE$4","EVENT_HIDE_PREVENTED$1","EVENT_HIDDEN$4","EVENT_SHOW$4","EVENT_SHOWN$4","EVENT_RESIZE$1","EVENT_CLICK_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_KEYDOWN_DISMISS$1","EVENT_CLICK_DATA_API$2","CLASS_NAME_OPEN","CLASS_NAME_FADE$3","CLASS_NAME_SHOW$4","CLASS_NAME_STATIC","OPEN_SELECTOR$1","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","SELECTOR_DATA_TOGGLE$2","Default$6","DefaultType$6","Modal","modalBody","transitionComplete","event2","isModalOverflowing","initialOverflowY","isBodyOverflowing","showEvent","alreadyOpen","NAME$6","DATA_KEY$3","EVENT_KEY$3","DATA_API_KEY$1","EVENT_LOAD_DATA_API$2","ESCAPE_KEY","CLASS_NAME_SHOW$3","CLASS_NAME_SHOWING$1","CLASS_NAME_HIDING","CLASS_NAME_BACKDROP","OPEN_SELECTOR","EVENT_SHOW$3","EVENT_SHOWN$3","EVENT_HIDE$3","EVENT_HIDE_PREVENTED","EVENT_HIDDEN$3","EVENT_RESIZE","EVENT_CLICK_DATA_API$1","EVENT_KEYDOWN_DISMISS","SELECTOR_DATA_TOGGLE$1","Default$5","DefaultType$5","Offcanvas","completeCallback","clickCallback","ARIA_ATTRIBUTE_PATTERN","DefaultAllowlist","uriAttributes","SAFE_URL_PATTERN","allowedAttribute","allowedAttributeList","attributeRegex","sanitizeHtml","unsafeHtml","allowList","sanitizeFunction","createdDocument","elementName","attributeList","allowedAttributes","NAME$5","Default$4","DefaultType$4","DefaultContentType","TemplateFactory","templateWrapper","extraClass","templateElement","NAME$4","DISALLOWED_ATTRIBUTES","CLASS_NAME_FADE$2","CLASS_NAME_MODAL","CLASS_NAME_SHOW$2","SELECTOR_TOOLTIP_INNER","SELECTOR_MODAL","EVENT_MODAL_HIDE","TRIGGER_HOVER","TRIGGER_FOCUS","TRIGGER_CLICK","TRIGGER_MANUAL","EVENT_HIDE$2","EVENT_HIDDEN$2","EVENT_SHOW$2","EVENT_SHOWN$2","EVENT_INSERTED","EVENT_CLICK$1","EVENT_FOCUSIN$1","EVENT_FOCUSOUT$1","EVENT_MOUSEENTER","EVENT_MOUSELEAVE","AttachmentMap","Default$3","DefaultType$3","Tooltip","isInTheDom","tip","tipId","attachment","triggers","eventIn","eventOut","dataAttributes","dataAttribute","NAME$3","SELECTOR_TITLE","SELECTOR_CONTENT","Default$2","DefaultType$2","Popover","NAME$2","DATA_KEY$2","EVENT_KEY$2","DATA_API_KEY","EVENT_ACTIVATE","EVENT_CLICK","EVENT_LOAD_DATA_API$1","CLASS_NAME_DROPDOWN_ITEM","CLASS_NAME_ACTIVE$1","SELECTOR_DATA_SPY","SELECTOR_TARGET_LINKS","SELECTOR_NAV_LIST_GROUP","SELECTOR_NAV_LINKS","SELECTOR_NAV_ITEMS","SELECTOR_LIST_ITEMS","SELECTOR_LINK_ITEMS","SELECTOR_DROPDOWN","SELECTOR_DROPDOWN_TOGGLE$1","Default$1","DefaultType$1","ScrollSpy","section","observableSection","entries","targetElement","entry","activate","parentScrollTop","userScrollsDown","entryIsLowerThanPrevious","targetLinks","anchor","listGroup","activeNodes","spy","NAME$1","DATA_KEY$1","EVENT_KEY$1","EVENT_HIDE$1","EVENT_HIDDEN$1","EVENT_SHOW$1","EVENT_SHOWN$1","EVENT_CLICK_DATA_API","EVENT_KEYDOWN","EVENT_LOAD_DATA_API","ARROW_LEFT_KEY","ARROW_RIGHT_KEY","ARROW_UP_KEY","ARROW_DOWN_KEY","CLASS_NAME_ACTIVE","CLASS_NAME_FADE$1","CLASS_NAME_SHOW$1","CLASS_DROPDOWN","SELECTOR_DROPDOWN_TOGGLE","SELECTOR_DROPDOWN_MENU","NOT_SELECTOR_DROPDOWN_TOGGLE","SELECTOR_TAB_PANEL","SELECTOR_OUTER","SELECTOR_INNER","SELECTOR_DATA_TOGGLE","SELECTOR_INNER_ELEM","SELECTOR_DATA_TOGGLE_ACTIVE","Tab","innerElem","hideEvent","relatedElem","nextActiveElement","isActive","outerElem","NAME","DATA_KEY","EVENT_KEY","EVENT_MOUSEOVER","EVENT_MOUSEOUT","EVENT_FOCUSIN","EVENT_FOCUSOUT","EVENT_HIDE","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","CLASS_NAME_FADE","CLASS_NAME_HIDE","CLASS_NAME_SHOW","CLASS_NAME_SHOWING","DefaultType","Default","Toast","isInteracting","_Carousel","_Collapse","_Bs5DropdownComponent","ctx","Bs5DropdownComponent","DROPDOWN_DATA_API_KEY","DROPDOWN_ARROW_DOWN_KEY","DROPDOWN_ARROW_UP_KEY","DROPDOWN_ESCAPE_KEY","_Dropdown","dropdownEls","dropdownEl","CollapseEvents","Notification","ModalNotification","message","iconUrl","focus","keyboard","buttons","modalService","contextualClass","channel","$event","$context","_Modal","_Tooltip","_Popover","_ThemeService","selectEl","savedTheme","choice","newColorScheme","oldScheme","newScheme","ThemeService","ToastNotification","delay","autoHide","animation","toastService","_Toast","Bs5AbstractBreakpointBinder","myBreakpoints","nextBreakpoint","prevBreakpoint","unhandled","handledBreakpoints","Bs5AttributeBreakpointBinder","CollapseOnUrlBinder","Bs5ComponentAttributeBreakpointBinder","ToggleCollapseOnEventBinder","collapseService","targetSelector","newTargets","DropdownBinder","dropdownService","ExpandOnUrlBinder","dispatcher","checkURL","urlToCheck","PopoverBinder","optionsOrContent","popover","methodNames","listener","methodName","ShowToastOnEventBinder","toastData","ScrollspyClassBinder","offsetTop","offsetBottom","nativeIDTargetSelector","inner","TooltipBinder","innerEl","ScrollToOnEventBinder","ToggleAttributeBinder","newId","oldId","toggleButton","ToggleClassBinder","_Bs5AccordionComponent","others","other","firstContentChild","visible","__vitePreload","Bs5AccordionComponent","_Bs5ButtonComponent","Bs5ButtonComponent","_Bs5CarouselComponent","Bs5CarouselComponent","_Bs5CollapseComponent","Bs5CollapseComponent","needle","pad","colorNames","printNum","decs","Color","g","that","parseString","rgb","alpha","vals","hsl","mults","suff","hex","rgba","hue2rgb","q","t","EventBucket","e","isMatch","dragTrack","eventBucket","area","dragging","clamp","onMove","info","starting","bounds","relX","relY","onMouse","onTouch","BG_TRANSP","HUES","stopEvent","onKey","bucket","stop","_Bs5ColorPickerComponent","ex","hsla","addEvent","_dragTrack","onDoneProxy","thumbH","thumbSL","thumbA","posX","posY","opaque","transp","bg","format","Bs5ColorPickerComponent","_Bs5ContentsComponent","depth","wrapperElement","headersStart","headersDepth","pushTo","headerElement","Bs5ContentsComponent","_Bs5FormComponent","submitSettings","submitter","invalidElements","invalidElement","endsOn","status","form","validationScope","errorEventName","formEl","Bs5FormComponent","_Bs5IconComponent","pathnames","icon","alt","currentSvg","error2","newSvg","colorArr","newColor","classString","Bs5IconComponent","template$5","_Bs5ModalItemComponent","modal","modalEl","notificationContainer","Bs5ModalItemComponent","_Bs5NavbarComponent","collapseElements","collapseElement","ce","Bs5NavbarComponent","template$4","_Bs5NotificationContainerComponent","notification","Bs5NotificationContainerComponent","_Bs5ScrollspyComponent","Bs5ScrollspyComponent","template$3","labelTemplate","_Bs5ShareComponent","newLine","shareItem","mediaUrl","shareText","shareTitle","urlTemplate","encode","shareURL","dropDownButtonElement","Bs5ShareComponent","getScrollPosition","isScrollable","scrollPosition","_Gameloop","timestamp","progress","numUpdateSteps","delta","interp","Gameloop","Autoscroll","append","move","Dragscroll","newScrollX","newScrollY","BaseEventsService","originalEvent","extraParameters","ScrollEventsService","currentPosition","MediaReadyState","MediaReadyState2","TouchType","TouchType2","TouchEventsService","settings","threshold","interval","range","startPosition","endPosition","hThreshold","vThreshold","swipeDir","touchesTypes","boundingClientRect","withIndex","positionType","offsetType","touchData","diffPosition","duration","touchesLength","touches","elOffset","touch","now","lastTouch","lastTap","endEvnt","xAmount","yAmount","global","factory","this","EvEmitter","proto","listeners","onceEvents","onceListeners","console","makeArray","ImagesLoaded","onAlways","queryElem","elementNodeTypes","nodeType","childImgs","reURL","loadingImage","LoadingImage","background","Background","onProgress","image","isLoaded","parentNode","_Bs5SidebarComponent","scrollEl","translateX","containers","currStyle","conStyle","Bs5SidebarComponent","templateSlides","templateControls","templateIndicators","templateImage","SLIDESHOW_INNER_SELECTOR","SLIDES_SELECTOR","_Bs5SlideshowComponent","centeredIndex","prevIndex","nearestIndex","positions","_c","dragscrollOptions","autoscrollOptions","intervalsTimeMs","slideElement","goal","nearZero","minIndex","excludeIndex","maxScrollTo","_d","mainBoundingClient","Bs5SlideshowComponent","SLIDER_INNER_SELECTOR","_Bs5SliderComponent","fromRight","currentActive","hasChange","slideEls","slideEl","updateIndex","slides","containerRect","slideRect","activeSlides","firstIndex","isRetry","fallbackOffset","slideWidth","slideHeight","Bs5SliderComponent","_VideoComponent","muted","volume","loop","controls","currentTime","autoplay","poster","preload","disablePictureInPicture","video","videoEl","videoWrapperEl","sourceElement","mediaQueryList","bufferedAmount","VideoComponent","_Bs5SlideVideoComponent","Bs5SlideVideoComponent","templateHorizontal","templateVertical","_Bs5TabsComponent","highest","tabPane","tab","firstTabContentChild","newSize","curTab","tabScrollPosition","scrollLeftTo","Bs5TabsComponent","template$2","_Bs5TaggedImageComponent","po","tagEl","shape","borderRadius","fullSize","smallSize","tagData","scopeTagOptions","attrs","clientTop","clientLeft","naturalWidth","naturalHeight","clientX","clientY","wRatio","hRatio","actualWidth","actualHeight","boundIndexAttr","boundIndex","foundTag","fit","Bs5TaggedImageComponent","template$1","_Bs5ThemeButtonComponent","theme","Bs5ThemeButtonComponent","_Bs5ToastItemComponent","toast","toastEl","toastContainer","Bs5ToastItemComponent","_Bs5ToggleButtonComponent","Bs5ToggleButtonComponent","bs5Module","constants","partialOptions","constants.DEFAULT_MODULE_OPTIONS","services.Bs5Service","isArray","getTag","INFINITY","baseToString","toString","isObjectLike","isBlank","INCORRECT_INDEX_TYPE","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","PATTERN_LENGTH_TOO_LARGE","MISSING_KEY_PROPERTY","INVALID_KEY_WEIGHT_VALUE","hasOwn","KeyStore","totalWeight","createKey","keyId","weight","getFn","createKeyPath","createKeyId","deepGet","MatchOptions","BasicOptions","FuzzyOptions","AdvancedOptions","SPACE","norm","mantissa","numTokens","FuseIndex","fieldNormWeight","docs","records","docIndex","record","keyIndex","subRecords","stack","nestedArrIndex","subRecord","createIndex","myIndex","parseIndex","computeScore$1","pattern","errors","currentLocation","expectedLocation","ignoreLocation","accuracy","proximity","convertMaskToIndices","matchmask","minMatchCharLength","indices","MAX_BITS","patternAlphabet","findAllMatches","includeMatches","patternLen","textLen","currentThreshold","bestLocation","computeMatches","matchMask","score","lastBitArr","finalScore","binMax","mask","binMin","binMid","finish","bitArr","j","charMatch","createPatternAlphabet","char","BitapSearch","isCaseSensitive","addChunk","remainder","allIndices","totalScore","hasMatches","alphabet","BaseMatch","getMatch","ExactMatch","InverseExactMatch","PrefixExactMatch","InversePrefixExactMatch","SuffixExactMatch","InverseSuffixExactMatch","FuzzyMatch","IncludeMatch","searchers","searchersLen","SPACE_RE","OR_TOKEN","parseQuery","query","queryItem","searcher","MultiMatchSet","ExtendedSearch","numMatches","qLen","pLen","registeredSearchers","register","createSearcher","searcherClass","LogicalOperator","KeyType","isExpression","isPath","isLeaf","convertToExplicit","isQueryPath","computeScore","ignoreFieldNorm","transformMatches","transformScore","includeScore","transformers","transformer","Fuse","predicate","limit","shouldSort","sortFn","expression","evaluate","resultMap","expResults","_FuseSearchComponent","testItem","childKeys","childKey","FuseSearchComponent","fuseModule","TypedocService","_FooterComponent","FooterComponent","_HeaderComponent","HeaderComponent","_MemberSignaturesComponent","signatureEl","descriptionEl","MemberSignaturesComponent","_SearchComponent","NavbarComponent","field","newActive","oldActive","searchText","dir","fallbackByDir","link","SearchComponent","_NavbarComponent","sidebar","_ModuleMenuComponent","mod","_e","_f","selectedModule","ModuleMenuComponent","_ModuleNavigationComponent","selectedModuleTitle","maxLevel","child2","ModuleNavigationComponent","_SidebarContentComponent","templateEl","SidebarContentComponent","gjsifyTypedocModule","services.TypedocService","registerComponent","constructor","Application","reflAnchor","reflContainer","warning","pointerDown","pointerMove","pointerUp","pointerDownPosition","isPointerDown","hasPointerMoved","Toggle","_storage","storage","Accordion","stored","initTheme","choices","setTheme","bootstrap","themeChoice","app","riba","bootstrapOriginal"],"sources":["../../../vendor/riba/packages/utils/src/color.ts","../../../vendor/riba/packages/utils/src/constants.ts","../../../vendor/riba/packages/utils/src/control.ts","../../../vendor/riba/packages/utils/src/type.ts","../../../vendor/riba/packages/utils/src/dom.ts","../../../vendor/riba/packages/utils/src/env.ts","../../../vendor/riba/packages/utils/src/immediate.ts","../../../vendor/riba/packages/utils/src/tools.ts","../../../vendor/riba/packages/utils/src/url.ts","../../../vendor/riba/packages/core/src/services/module-element.service.ts","../../../vendor/riba/packages/core/src/observer.ts","../../../vendor/riba/packages/core/src/services/adapter.service.ts","../../../vendor/riba/packages/core/src/services/binder.service.ts","../../../vendor/riba/packages/events/dist/esm/services/event-dispatcher.service.js","../../../vendor/riba/packages/core/src/services/core.service.ts","../../../vendor/riba/packages/core/src/services/lifecycle.service.ts","../../../vendor/riba/packages/core/src/services/component.service.ts","../../../vendor/riba/packages/core/src/services/formatter.service.ts","../../../vendor/riba/packages/core/src/services/http.service.ts","../../../vendor/riba/packages/core/src/adapters/dot.adapter.ts","../../../vendor/riba/packages/core/src/constants/formatter.ts","../../../vendor/riba/packages/core/src/binder.ts","../../../vendor/riba/packages/core/src/binders/animate-classname.binder.ts","../../../vendor/riba/packages/core/src/binders/add-class.binder.ts","../../../vendor/riba/packages/core/src/binders/assign-property.binder.ts","../../../vendor/riba/packages/core/src/binders/assign.binder.ts","../../../vendor/riba/packages/core/src/binders/attribute.binder.ts","../../../vendor/riba/packages/core/src/binders/block.binder.ts","../../../vendor/riba/packages/core/src/binders/checked.binder.ts","../../../vendor/riba/packages/core/src/binders/class-name.binder.ts","../../../vendor/riba/packages/core/src/binders/co-attribute.binder.ts","../../../vendor/riba/packages/core/src/binders/disabled.binder.ts","../../../vendor/riba/packages/core/src/binders/draggable.binder.ts","../../../vendor/riba/packages/core/src/binders/mustache-text.binder.ts","../../../vendor/riba/packages/core/src/constants/parser.ts","../../../vendor/riba/packages/core/src/parse-template.ts","../../../vendor/riba/packages/core/src/parse-node.ts","../../../vendor/riba/packages/core/src/parse-declaration.ts","../../../vendor/riba/packages/core/src/view.ts","../../../vendor/riba/packages/core/src/binders/each-item.binder.ts","../../../vendor/riba/packages/core/src/binders/element.binder.ts","../../../vendor/riba/packages/core/src/binders/enabled.binder.ts","../../../vendor/riba/packages/core/src/binders/flex-sort-childs.binder.ts","../../../vendor/riba/packages/core/src/binders/hide.binder.ts","../../../vendor/riba/packages/core/src/binders/html.binder.ts","../../../vendor/riba/packages/core/src/binders/if.binder.ts","../../../vendor/riba/packages/core/src/binders/maxlength.binder.ts","../../../vendor/riba/packages/core/src/binders/on-event.binder.ts","../../../vendor/riba/packages/core/src/binders/parent.binder.ts","../../../vendor/riba/packages/core/src/binders/readonly.binder.ts","../../../vendor/riba/packages/core/src/binders/remove-class.binder.ts","../../../vendor/riba/packages/core/src/binders/show.binder.ts","../../../vendor/riba/packages/core/src/binders/srcset-size.binder.ts","../../../vendor/riba/packages/core/src/binders/style-background-image.binder.ts","../../../vendor/riba/packages/core/src/binders/style-css-property.binder.ts","../../../vendor/riba/packages/core/src/binders/style-property.binder.ts","../../../vendor/riba/packages/core/src/binders/tag-name.binder.ts","../../../vendor/riba/packages/core/src/binders/template.binder.ts","../../../vendor/riba/packages/core/src/binders/text.binder.ts","../../../vendor/riba/packages/core/src/binders/toggle-on-event.binder.ts","../../../vendor/riba/packages/core/src/binders/unchecked.binder.ts","../../../vendor/riba/packages/core/src/binders/unless.binder.ts","../../../vendor/riba/packages/core/src/binders/value.binder.ts","../../../vendor/riba/packages/core/src/services/module.service.ts","../../../vendor/riba/packages/core/src/riba.ts","../../../vendor/riba/packages/jsx/src/jsx-fragment.ts","../../../vendor/riba/packages/jsx/src/jsx-raw.ts","../../../vendor/riba/packages/jsx/src/jsx.ts","../../../vendor/riba/packages/core/src/component/basic-component.ts","../../../vendor/riba/packages/core/src/component/component.ts","../../../vendor/riba/packages/core/src/components/templates/templates.component.ts","../../../vendor/riba/packages/core/src/formatters/array/contains.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/size.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/empty.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/get.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/first.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/is-last.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/last.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/random.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/range.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/set.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/overlaps.formatter.ts","../../../vendor/riba/packages/core/src/formatters/array/join.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/and.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/between.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/egt.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/eq.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/gt.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/ne.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/lt.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/elt.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/or.formatter.ts","../../../vendor/riba/packages/core/src/formatters/compare/not.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/plus.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/minus.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/times.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/divided-by.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/modulo.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/gcd.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/even.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/uneven.formatter.ts","../../../vendor/riba/packages/core/src/formatters/math/digits.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/args.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/debug.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/default.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/is-desktop.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/is-mobile.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/call.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/call-name.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/map.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/os.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/prefer.formatter.ts","../../../vendor/riba/packages/core/src/formatters/special/ternary.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/append.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/capitalize.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/cut.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/downcase.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/ends-with.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/filled.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/handleize.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/match.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/pad-start.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/pad-end.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-integer.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-float.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-decimal.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-integer.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/number-format.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/pluralize.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/prepend.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/upcase.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/replace.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/replace-first.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/slice.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/starts-with.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/strip.formatter.ts","../../../vendor/riba/packages/core/src/formatters/string/strip-html.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/boolean.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-array.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-boolean.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-defined.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-number.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-object.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-string.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/is-undefined.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/json.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/parse.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-base64.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-string.formatter.ts","../../../vendor/riba/packages/core/src/formatters/type/to-number.formatter.ts","../../../vendor/riba/packages/core/src/core.module.ts","../../../vendor/riba/packages/history/src/services/history-manager.service.ts","../../../vendor/riba/packages/router/src/constants.ts","../../../vendor/riba/packages/router/src/services/Transition/BaseTransition.ts","../../../vendor/riba/packages/router/src/services/Transition/CustomTransition.ts","../../../vendor/riba/packages/router/src/services/Transition/FadeTransition.ts","../../../vendor/riba/packages/router/src/services/Transition/HideShowTransition.ts","../../../vendor/riba/packages/router/src/services/View.ts","../../../vendor/riba/packages/router/src/services/Pjax/Dom.ts","../../../vendor/riba/packages/router/src/services/Pjax/Prefetch.ts","../../../vendor/riba/node_modules/ms/index.js","../../../vendor/riba/node_modules/keshi/src/InMemoryStorage.js","../../../vendor/riba/node_modules/keshi/src/index.js","../../../vendor/riba/packages/cache/src/services/base-cache.service.ts","../../../vendor/riba/node_modules/idb-keyval/dist/index.js","../../../vendor/riba/packages/cache/src/services/idb-cache.service.ts","../../../vendor/riba/packages/router/src/services/Pjax/index.ts","../../../vendor/riba/packages/router/src/services/router.service.ts","../../../vendor/riba/packages/router/src/binders/view-static.binder.ts","../../../vendor/riba/packages/router/src/binders/route.binder.ts","../../../vendor/riba/packages/router/src/binders/route-class-star.binder.ts","../../../vendor/riba/packages/router/src/binders/route-preload.binder.ts","../../../vendor/riba/packages/router/src/binders/parent-route-class-star.binder.ts","../../../vendor/riba/packages/router/src/binders/route-back-on-star.binder.ts","../../../vendor/riba/packages/router/src/components/load-script/load-script.component.ts","../../../vendor/riba/packages/router/src/components/view/view.component.ts","../../../vendor/riba/packages/router/src/router.module.ts","../../../vendor/riba/packages/bs5/src/constants/theme-choices.ts","../../../vendor/riba/packages/bs5/src/constants/index.ts","../../../vendor/riba/packages/bs5/src/services/bs5.service.ts","../../../vendor/riba/node_modules/@popperjs/core/lib/enums.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getWindow.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/applyStyles.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/getBasePlacement.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/math.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/userAgent.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/contains.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/within.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/expandToHashMap.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/arrow.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/getVariation.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/computeStyles.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/eventListeners.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/rectToClientRect.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/computeOffsets.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/detectOverflow.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/flip.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/hide.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/offset.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/getAltAxis.js","../../../vendor/riba/node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","../../../vendor/riba/node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/orderModifiers.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/debounce.js","../../../vendor/riba/node_modules/@popperjs/core/lib/utils/mergeByName.js","../../../vendor/riba/node_modules/@popperjs/core/lib/createPopper.js","../../../vendor/riba/node_modules/@popperjs/core/lib/popper-lite.js","../../../vendor/riba/node_modules/@popperjs/core/lib/popper.js","../../../vendor/riba/node_modules/bootstrap/dist/js/bootstrap.esm.js","../../../vendor/riba/packages/bs5/src/services/carousel.ts","../../../vendor/riba/packages/bs5/src/services/collapse.ts","../../../vendor/riba/packages/bs5/src/components/bs5-dropdown/bs5-dropdown.component.ts","../../../vendor/riba/packages/bs5/src/services/dropdown.ts","../../../vendor/riba/packages/bs5/src/types/collapse-events.ts","../../../vendor/riba/packages/bs5/src/types/notification.ts","../../../vendor/riba/packages/bs5/src/services/modal-notification.ts","../../../vendor/riba/packages/bs5/src/services/modal.ts","../../../vendor/riba/packages/bs5/src/services/tooltip.ts","../../../vendor/riba/packages/bs5/src/services/popover.ts","../../../vendor/riba/packages/bs5/src/services/theme.ts","../../../vendor/riba/packages/bs5/src/services/toast-notification.ts","../../../vendor/riba/packages/bs5/src/services/toast.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-abstract-breakpoint.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-attribute-breakpoint.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-collapse-on-url.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-co-attribute-breakpoint.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-toggle-collapse-on-event.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-dropdown.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-expand-on-url.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-popover.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-show-toast-on.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-scrollspy-class.binder.ts","../../../vendor/riba/packages/bs5/src/binders/bs5-tooltip.binder.ts","../../../vendor/riba/packages/bs5/src/binders/scroll-to-on-event.binder.ts","../../../vendor/riba/packages/bs5/src/binders/toggle-attribute.binder.ts","../../../vendor/riba/packages/bs5/src/binders/toggle-class.binder.ts","../../../vendor/riba/packages/bs5/src/components/bs5-accordion/bs5-accordion.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-button/bs5-button.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-carousel/bs5-carousel.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-collapse/bs5-collapse.component.tsx","../../../vendor/riba/node_modules/@sphinxxxx/color-conversion/src/color.js","../../../vendor/riba/packages/bs5/src/components/bs5-colorpicker/bs5-colorpicker.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-contents/bs5-contents.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-form/bs5-form.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-icon/bs5-icon.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-modal-item/bs5-modal-item.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-modal-item/bs5-modal-item.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-navbar/bs5-navbar.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-notification-container/bs5-notification-container.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-notification-container/bs5-notification-container.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-scrollspy/bs5-scrollspy.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-share/bs5-share.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-share/bs5-share.label.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-share/bs5-share.component.ts","../../../vendor/riba/packages/extras/src/helper/scroll.ts","../../../vendor/riba/packages/extras/src/services/gameloop.service.ts","../../../vendor/riba/packages/extras/src/services/autoscroll.service.ts","../../../vendor/riba/packages/extras/src/services/dragscroll.service.ts","../../../vendor/riba/packages/extras/src/services/touch-events/base-events.service.ts","../../../vendor/riba/packages/extras/src/services/touch-events/scroll-events.service.ts","../../../vendor/riba/packages/extras/src/types/media-ready-state.ts","../../../vendor/riba/packages/extras/src/types/touch-type.ts","../../../vendor/riba/packages/extras/src/services/touch-events/touch-events.service.ts","../../../vendor/riba/node_modules/ev-emitter/ev-emitter.js","../../../vendor/riba/node_modules/imagesloaded/imagesloaded.js","../../../vendor/riba/packages/bs5/src/components/bs5-sidebar/bs5-sidebar.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow-slides.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow-controls.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow-indicators.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow-image.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-slideshow/bs5-slideshow.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-slider/bs5-slider.component.ts","../../../vendor/riba/packages/extras/src/components/video/video.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-slide-video/bs5-slide-video.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-tabs/bs5-tabs-horizontal.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-tabs/bs5-tabs-vertical.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-tabs/bs5-tabs.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-tagged-image/bs5-tagged-image.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-tagged-image/bs5-tagged-image.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-theme-button/bs5-theme-button.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-theme-button/bs5-theme-button.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-toast-item/bs5-toast-item.component.html?raw","../../../vendor/riba/packages/bs5/src/components/bs5-toast-item/bs5-toast-item.component.ts","../../../vendor/riba/packages/bs5/src/components/bs5-toggle-button/bs5-toggle-button.component.ts","../../../vendor/riba/packages/bs5/src/bs5.module.ts","../../../vendor/riba/node_modules/fuse.js/dist/fuse.esm.js","../../../vendor/riba/packages/fuse/src/components/search/search.component.tsx","../../../vendor/riba/packages/fuse/src/module.ts","../../typedoc-theme-client/scripts/services/typedoc.service.ts","../../typedoc-theme-client/scripts/components/footer/footer.component.ts","../../typedoc-theme-client/scripts/components/header/header.component.ts","../../typedoc-theme-client/scripts/components/member-signatures/member-signatures.component.ts","../../typedoc-theme-client/scripts/components/search/search.component.tsx","../../typedoc-theme-client/scripts/components/navbar/navbar.component.ts","../../typedoc-theme-client/scripts/components/module-menu/module-menu.component.tsx","../../typedoc-theme-client/scripts/components/module-navigation/module-navigation.component.tsx","../../typedoc-theme-client/scripts/components/sidebar-content/sidebar-content.component.tsx","../../typedoc-theme-client/scripts/module.ts","../../typedoc-theme-client/scripts/original/typedoc/Application.ts","../../typedoc-theme-client/scripts/original/typedoc/Component.ts","../../typedoc-theme-client/scripts/original/typedoc/utils/pointer.ts","../../typedoc-theme-client/scripts/original/typedoc/components/Toggle.ts","../../typedoc-theme-client/scripts/original/typedoc/utils/storage.ts","../../typedoc-theme-client/scripts/original/typedoc/components/Accordion.ts","../../typedoc-theme-client/scripts/original/typedoc/Theme.ts","../../typedoc-theme-client/scripts/original/bootstrap.ts","../../typedoc-theme-client/scripts/main.ts"],"sourcesContent":["/**\n * Generates a random color\n * @see https://stackoverflow.com/a/1484514/1465919\n */\nexport const getRandomColor = () => {\n  const letters = \"0123456789ABCDEF\";\n  let color = \"#\";\n  for (let i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n  return color;\n};\n\nexport const consoleColoured = (\n  options: {\n    namespace?: string;\n    color?: string;\n    mode: \"debug\" | \"info\" | \"log\" | \"error\";\n  },\n  ...args: unknown[]\n) => {\n  const printArgs: unknown[] = [];\n  if (options.color) {\n    if (options.namespace) {\n      printArgs.push(\n        `%c[${options.namespace}] ${options.mode.toUpperCase()}: `\n      );\n    } else {\n      printArgs.push(`%c${options.mode.toUpperCase()}: `);\n    }\n    printArgs.push(`color: ${options.color}`);\n  } else {\n    if (options.namespace) {\n      printArgs.push(`[${options.namespace}] ${options.mode.toUpperCase()}: `);\n    } else {\n      printArgs.push(`${options.mode.toUpperCase()}: `);\n    }\n  }\n\n  printArgs.push(...args);\n\n  console[options.mode](...printArgs);\n};\n","export const BASE64_PREFIX = \"base64:\";\n\nexport const PRIMITIVE = 0;\nexport const KEYPATH = 1;\n\nexport const QUOTED_STR = /^'.*'$|^\".*\"$/; // regex to test if string is wrapped in \" or '\n","import { Deferred, TimeoutPromise } from \"./types/index.js\";\n\nexport const noop = () => {\n  /** do nothing */\n};\n\nexport const times = (n: number, cb: () => void) => {\n  for (let i = 0; i < n; i++) {\n    cb();\n  }\n};\n\nexport const sleep = (time: number) => {\n  return new Promise((resolve) => setTimeout(resolve, time));\n};\n\nexport const waitForProp = async <T = any>(\n  propName: string,\n  obj: any = window,\n  delay = 1000\n) => {\n  while (!obj[propName]) {\n    await sleep(delay);\n  }\n  return obj[propName] as T;\n};\n\n/**\n * Return a new \"Deferred\" object\n * https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred\n *\n * @return\n */\nexport const deferred = <T = any>() => {\n  const obj: Partial<Deferred<T>> = {};\n  const prom = new Promise<T>((resolve, reject) => {\n    obj.resolve = resolve;\n    obj.reject = reject;\n  });\n  obj.promise = prom;\n  return obj as Deferred<T>;\n};\n\n/**\n * debounce (Timeout + Callback edition)\n * The debounce function receives our function as a parameter\n * It is recommended to use this method for scroll events, but the event should still be passive.\n * In the debouncing technique, no matter how many times the user fires the event,\n * the attached function will be executed only after the specified time once the user stops firing the event.\n * This method uses internally the setTimeout method\n * @see https://css-tricks.com/styling-based-on-scroll-position/\n * @see https://www.telerik.com/blogs/debouncing-and-throttling-in-javascript\n */\nexport const debounceCb = <T = any>(fn: (...args: any[]) => T, wait = 100) => {\n  let timeout: ReturnType<typeof setTimeout>;\n  return (...params: any[]) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => fn(...params), wait);\n  };\n};\n\n/**\n * debounce (Timeout + Promise edition)\n * The debounce function receives our function as a parameter\n * It is recommended to use this method for scroll events, but the event should still be passive.\n * In the debouncing technique, no matter how many times the user fires the event,\n * the attached function will be executed only after the specified time once the user stops firing the event.\n * This method uses internally the setTimeout method\n */\nexport const debounceT = <T = any>(fn: (...args: any[]) => any, wait = 100) => {\n  let resolve: (val: any) => any;\n  let reject: (error: any) => void;\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  let debounce: undefined | ((...params: any[]) => void) = undefined;\n\n  return (...params: any[]) => {\n    if (!debounce)\n      debounce = debounceCb(() => {\n        try {\n          resolve(fn(...params));\n          // Reset\n          debounce = undefined;\n        } catch (error) {\n          reject(error);\n        }\n      }, wait);\n    debounce(...params);\n\n    return promise;\n  };\n};\n\n/**\n * debounce (RequestAnimationFrame + Promise edition)\n * The debounce function receives our function as a parameter\n * It is recommended to use this method for scroll events, but the event should still be passive.\n * In the debouncing technique, no matter how many times the user fires the event,\n * the attached function will be executed only after the specified time once the user stops firing the event.\n * This method uses internally the requestAnimationFrame method\n * @see https://css-tricks.com/styling-based-on-scroll-position/\n * @see https://www.telerik.com/blogs/debouncing-and-throttling-in-javascript\n */\nexport const debounceF = (fn: (...params: any) => any) => {\n  // This holds the requestAnimationFrame reference, so we can cancel it if we wish\n  let frame: number | null = null;\n  let resolve: (val: any) => any;\n  let reject: (error: Error) => void;\n  let promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n\n  // The debounce function returns a new function that can receive a variable number of arguments\n  return (...params: any) => {\n    // If the frame variable has been defined, clear it now, and queue for next frame\n    if (frame) {\n      cancelAnimationFrame(frame);\n    }\n\n    // Queue our function call for the next frame\n    frame = window.requestAnimationFrame(() => {\n      // Call our function and pass any params we received\n      try {\n        resolve(fn(...params));\n      } catch (error) {\n        reject(error as Error);\n      }\n      // reset frame and initialize new promise for next call\n      frame = null;\n      promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n      });\n    });\n\n    return promise;\n  };\n};\n\n/**\n * debounce (RequestAnimationFrame + Promise edition)\n * The debounce function receives our function as a parameter\n * It is recommended to use this method for scroll events, but the event should still be passive.\n * In the debouncing technique, no matter how many times the user fires the event,\n * the attached function will be executed only after the specified time once the user stops firing the event.\n * This method uses requestAnimationFrame method if no delay is passed, otherwise a timeout\n */\nexport const debounce = (fn: (...params: any) => any, wait?: number) => {\n  if (typeof wait === \"number\") {\n    return debounceT(fn, wait);\n  } else {\n    return debounceF(fn);\n  }\n};\n\n/**\n * The throttle function receives our function as a parameter\n * It is recommended to use this method for resize events\n * Throttling is a technique in which, no matter how many times the user fires the event,\n * the attached function will be executed only once in a given time interval.\n * @see https://www.telerik.com/blogs/debouncing-and-throttling-in-javascript\n * @see https://gist.github.com/peduarte/969217eac456538789e8fac8f45143b4\n */\nexport const throttle = (fn: (...params: any[]) => any, wait = 100) => {\n  let timerId: number | null = null;\n  let resolve: (val: any) => any;\n  let reject: (error: Error) => void;\n  let promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n\n  return (...params: any[]) => {\n    if (timerId === null) {\n      timerId = window.setTimeout(() => {\n        // reset timerId and initialize new promise for next call\n        timerId = null;\n        promise = new Promise((res, rej) => {\n          resolve = res;\n          reject = rej;\n        });\n      }, wait);\n      try {\n        resolve(fn(...params));\n      } catch (error) {\n        reject(error as Error);\n      }\n    }\n    return promise;\n  };\n};\n\n/**\n * Cancel promise on timeout.\n */\nexport const pTimeout = <T>(value: Promise<T>, ms: number, error?: Error) => {\n  const def = deferred<T>();\n\n  const p: TimeoutPromise<T> = {\n    _timeout: setTimeout(() => {\n      def.reject(error || new Error(`Timeout after ${ms}ms`));\n    }, ms),\n    promise: def.promise,\n    cancel: () => {\n      def.resolve(value);\n      if (p._timeout) {\n        clearTimeout(p._timeout);\n      }\n    },\n  };\n\n  value\n    .then((value: T) => {\n      p.cancel();\n      def.resolve(value);\n    })\n    .catch((error) => {\n      p.cancel();\n      def.reject(error);\n    });\n\n  return p.promise;\n};\n","import { BASE64_PREFIX, KEYPATH, PRIMITIVE, QUOTED_STR } from \"./constants.js\";\n\n/**\n * Fixed version of typeof operator\n * @param obj\n * @see https://goo.gl/pxwQGp\n */\nexport const toType = (obj: any) => {\n  const matches = {}.toString.call(obj).match(/\\s([a-z]+)/i);\n  return matches ? matches[1].toLowerCase() : null;\n};\n\n/**\n * Formats an object to a json string with the special feature that single quotes are replaced.\n * This way there are no conflicts when this json string is used as attribute value afterwards.\n * @note This function is used by the JsonFormatter\n * @see parseJsonString\n * @param object\n * @param space\n * @param replaceSingleQuote\n * @returns\n */\nexport const jsonStringify = (\n  object: any,\n  space = 2,\n  replaceSingleQuote = true\n) => {\n  const result = JSON.stringify(object, null, space);\n  if (replaceSingleQuote && result) {\n    return result.replace(/'/g, `&#39;`);\n  }\n  return result;\n};\n\n/**\n * Parses a json string with the special feature that json strings\n * can also have single quotations for defining the properties and values\n * @see jsonStringify\n */\nexport const parseJsonString = (value?: string | null) => {\n  let object = null;\n\n  if (!value) {\n    return object;\n  }\n\n  if (!couldBeJson(value)) {\n    return object;\n  }\n  if (isJson(value)) {\n    object = JSON.parse(value) || null;\n  } else {\n    try {\n      // Transform an invalid json string with single quotation to a valid json string with double quotation\n      object = JSON.parse(value.replace(/'/g, '\"')) || null;\n    } catch (error) {\n      console.warn(`Can't parse json string of \"${value}\" `, error);\n    }\n  }\n  return object;\n};\n\nexport const couldBeJson = (str?: string | null) => {\n  if (!str || typeof str !== \"string\") {\n    return false;\n  }\n  str = str.trim();\n  return (\n    (str.charAt(0) === \"{\" && str.charAt(str.length - 1) === \"}\") ||\n    (str.charAt(0) === \"[\" && str.charAt(str.length - 1) === \"]\")\n  );\n};\n\n/**\n * Test if a string is base64 encoded\n * Note, this is not a general function and is used internally by Riba.js by prefixing a base64 string with \"base64:\".\n * So if you want to use this method make sure that you prefix your base64 strings with \"base64:\".\n */\nexport const isBase64 = (str?: string | null) => {\n  if (!str) return false;\n  if (typeof str !== \"string\") return false;\n  return str.startsWith(BASE64_PREFIX);\n};\n\n/**\n * Decode an string or object to base64\n * @see https://developer.mozilla.org/en-US/docs/Glossary/Base64#solution_2_%E2%80%93_rewriting_atob_and_btoa_using_typedarrays_and_utf-8\n * @param obj\n * @returns\n */\nexport const toBase64 = (_obj: any) => {\n  let obj: string;\n  if (isObject(_obj)) {\n    obj = JSON.stringify(_obj, null, 0);\n  } else {\n    obj = _obj.toString();\n  }\n  return BASE64_PREFIX + btoa(encodeURIComponent(obj));\n};\n\n/**\n * Encode an base64 string back\n * @see https://developer.mozilla.org/en-US/docs/Glossary/Base64#solution_2_%E2%80%93_rewriting_atob_and_btoa_using_typedarrays_and_utf-8\n * @param obj\n * @returns\n */\nexport const fromBase64 = (base64?: string | null) => {\n  if (typeof base64 !== \"string\") {\n    return \"Not a base64 string!\";\n  }\n\n  if (base64.startsWith(BASE64_PREFIX)) {\n    base64 = base64.substring(BASE64_PREFIX.length);\n  }\n\n  const maybeDecodedUri = atob(base64);\n  let encoded: any;\n  try {\n    encoded = decodeURIComponent(maybeDecodedUri);\n  } catch (error) {\n    encoded = maybeDecodedUri;\n  }\n\n  return parseType(encoded, false).value;\n};\n\n/**\n * Test if string is a json string\n * @param str\n */\nexport const isJson = (str?: string | null) => {\n  if (!str || !couldBeJson(str)) {\n    return false;\n  }\n  try {\n    const val = JSON.parse(str);\n    return Array.isArray(val) || typeof val === \"object\" ? true : false;\n  } catch (error) {\n    return false;\n  }\n};\n\n/**\n * Parser and tokenizer for getting the type and value from a string.\n * @param input\n * @param isAttribute\n */\nexport const parseType = (input?: string | null, isAttribute = false) => {\n  let type = PRIMITIVE;\n  let value: any = input;\n  if (input === undefined) {\n    return { type, value: undefined };\n  }\n  if (input === null) {\n    return { type, value: null };\n  }\n  if (QUOTED_STR.test(input)) {\n    value = parseType(input.slice(1, -1), isAttribute).value;\n  } else if (input === \"true\") {\n    value = true;\n  } else if (input === \"false\") {\n    value = false;\n  } else if (input === \"null\") {\n    value = null;\n  } else if (input === \"undefined\") {\n    value = undefined;\n  } else if (input.startsWith(\"http://\") || input.startsWith(\"https://\")) {\n    value = input;\n  } else if (input === \"\") {\n    // An empty attribute should be handled has a true value\n    if (isAttribute) {\n      value = true;\n    } else {\n      value = \"\";\n    }\n  } else if (!isNaN(Number(input))) {\n    value = Number(input);\n    // If number is too large store the value as string\n    if (value >= Number.MAX_SAFE_INTEGER) {\n      value = input;\n    }\n  } else if (isBase64(value)) {\n    value = fromBase64(value);\n  } else if (couldBeJson(value)) {\n    const jsonString = parseJsonString(value);\n    value = jsonString ? jsonString : value;\n  } else {\n    type = KEYPATH;\n  }\n  return { type, value };\n};\n\n/**\n * Check if value is undefined\n */\nexport const isUndefined = (value?: any) => {\n  return typeof value === \"undefined\";\n};\n\n/**\n * Check if value is undefined\n */\nexport const isDefined = (value?: any) => {\n  return !isUndefined(value);\n};\n\n/**\n * Check if type is Object\n * @see https://stackoverflow.com/a/4775737/1465919\n */\nexport const isObject = (obj: any) => {\n  return isDefined(obj) && typeof obj === \"object\" && obj !== null;\n};\n\n/**\n * Parse value to string or return undefined if value is null\n * @param value\n */\nexport const getString = (value: any) => {\n  return value?.toString ? value.toString() : undefined;\n};\n\n/**\n * Parse value to number or return 0 if value is null or undefined\n * @param value\n */\nexport const getNumber = (value: string) => {\n  return value ? parseFloat(value) : undefined;\n};\n\n/**\n * Check if value is a function\n */\nexport const isFunction = (value: any) => {\n  return typeof value === \"function\";\n};\n\n/**\n * Check whether variable is number or a string with numbers in JavaScript\n * @see https://stackoverflow.com/a/1421988/1465919\n */\nexport const isNumber = (value?: any): boolean => {\n  return !isNaN(parseFloat(value)) && !isNaN(value - 0);\n};\n\n/**\n * Check if type is Boolean\n * @see https://stackoverflow.com/a/28814615/1465919\n */\nexport const isBoolean = (value?: any) => {\n  return typeof value === typeof true;\n};\n\n/**\n * Check if value is a string\n */\nexport const isString = (value?: any) => {\n  return typeof value === \"string\";\n};\n\n/**\n * Check if string contains a number\n */\nexport const stringHasNumber = (value: string) => {\n  return isString(value) && /\\d/.test(value);\n};\n\n/**\n * Check if string contains only numbers\n */\nexport const stringHasOnlyNumbers = (value?: any) => {\n  return /^\\d+$/.test(value);\n};\n\n/**\n * Check if string contains only numbers, +, - and ()\n */\nexport const stringIsPhoneNumber = (value: string) => {\n  return /^[0-9 ()+-]+$/.test(value);\n};\n\n/**\n * Just get the digits of a string, useful to remove px pixel from css value\n *\n * @see http://stackoverflow.com/a/1100653/1465919\n */\nexport const justDigits = (str: string | number) => {\n  if (typeof str === \"number\") {\n    return str;\n  }\n  const num = str.replace(/[^-\\d.]/g, \"\");\n  if (!isNumber(num)) {\n    return 0;\n  } else {\n    return Number(num);\n  }\n};\n\nexport const escapeHtml = (html: string) => {\n  return html.replace(\n    /[&<>'\"]/g,\n    (c) =>\n      ({\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': \"&quot;\",\n        \"'\": \"&#39;\",\n      }[c as never])\n  );\n};\n\n/**\n * Remove all special chars from a string\n * @see https://stackoverflow.com/a/11090301/1465919\n * @param str\n */\nexport const withoutSpecialChars = (str: string) => {\n  // str = str.replace(/[^\\w\\s]/gi, \"\"); // http://stackoverflow.com/a/4374890\n  str = str.replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>{}[\\]\\\\/]/gi, \"\");\n  return str;\n};\n\n/**\n * Replace all umlaut chars from string like  with ae\n * @param str\n */\nexport const replaceUmlautChars = (str: string) => {\n  str = str\n    .replace(//g, \"ae\")\n    .replace(//g, \"oe\")\n    .replace(//g, \"ue\")\n    .replace(//g, \"ss\")\n    .replace(//g, \"Ae\")\n    .replace(//g, \"Oe\")\n    .replace(//g, \"e\");\n  return str;\n};\n\n/**\n * Removes multiple tabs, newlines, etc from a string\n * @param str\n */\nexport const withoutMultiWhitespace = (str: string) => {\n  str = str.replace(/\\s\\s+/g, \" \");\n  return str;\n};\n\n/**\n * Formats a string into a handle.\n * E.g. '100% M & Ms!!!' -> 100-m-ms\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#handle-handleize\n */\nexport const handleize = (str: string) => {\n  str = str.trim();\n  str = str.toLowerCase();\n  str = withoutMultiWhitespace(str);\n  str = withoutSpecialChars(str);\n  str = replaceUmlautChars(str);\n  str = str.replace(/ /g, \"-\");\n  return str;\n};\n\nexport const stripHtml = (html: string) => {\n  const tmp = document.createElement(\"DIV\");\n  tmp.innerHTML = html;\n  return tmp.textContent || tmp.innerText || \"\";\n};\n\n/**\n * foo-bar -> fooBar\n * Returns a camel-cased version of the string. Used when translating an\n * element's attribute name into a property name for the component's scope.\n * @param str\n */\nexport const camelCase = (str: string) => {\n  return str.replace(/-([a-z0-9])/g, (grouped) => {\n    return grouped[1].toUpperCase();\n  });\n};\n\n/**\n * fooBar -> foo-bar\n */\nexport const kebabCase = (str: string) => {\n  return str.replace(/[A-Z]/g, (letter) => `-${letter.toLowerCase()}`);\n};\n\n/**\n * uppercase's the first letter of a string\n * @param str\n */\nexport const capitalize = (str: string) => {\n  if (typeof str !== \"string\") return \"\";\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\n/**\n * Merge the contents of two or more objects together into the first object.\n * @param options\n * @param extended An object that will receive the new properties\n * @param objects The objects containing additional properties to merge in.\n * @see http://www.damirscorner.com/blog/posts/20180216-VariableNumberOfArgumentsInTypescript.html\n * @see https://gomakethings.com/merging-objects-with-vanilla-javascript/\n */\nexport const extend = (\n  options: {\n    /** Deep merge, if true compares also nested objects */\n    deep?: boolean;\n    /** Keep existing values, if true only undefined target values will be overwritten with the source value */\n    keepValues?: boolean;\n    /** If true only overwrite target values if the source value is defined / not undefined */\n    onlyDefined?: boolean;\n    /** merge arrays, if true, two arrays will be merged into one */\n    mergeArrays?: boolean;\n  } = {},\n  extended: any = {},\n  ...objects: any[]\n) => {\n  // Merge the object into the extended object\n  const merge = (obj: any) => {\n    for (const prop in obj) {\n      if (Object.hasOwnProperty.bind(obj)(prop)) {\n        if (\n          options.deep &&\n          Object.prototype.toString.call(obj[prop]) === \"[object Object]\"\n        ) {\n          // If we're doing a deep merge and the property is an object\n          extended[prop] = extend(options, extended[prop], obj[prop]);\n        } else {\n          // Otherwise, do a regular merge\n          if (options.keepValues) {\n            // Only overwrite target value if the target value is undefined\n            if (typeof extended[prop] === \"undefined\") {\n              extended[prop] = obj[prop];\n            }\n          } else if (options.onlyDefined) {\n            // Only overwrite target value if the source value is defined / not undefined\n            if (typeof obj[prop] !== \"undefined\") {\n              extended[prop] = obj[prop];\n            }\n          } else if (options.mergeArrays) {\n            // Merge array if both values are array's\n            if (Array.isArray(extended[prop]) && Array.isArray(obj[prop])) {\n              extended[prop] = [...extended[prop], ...obj[prop]];\n            } else {\n              extended[prop] = obj[prop];\n            }\n          } else {\n            extended[prop] = obj[prop];\n          }\n        }\n      }\n    }\n  };\n\n  // Loop through each object and conduct a merge\n  for (let i = 0; i < objects.length; i++) {\n    merge(objects[i]);\n  }\n\n  return extended;\n};\n\n/**\n * Clone an object, array or any primitive type like numbers or strings.\n * @param deep If true, the merge becomes recursive (aka. deep copy).\n * @param val The value(s) to clone\n */\nexport const clone = <T = any>(deep: boolean, val: T): T => {\n  if (Array.isArray(val)) {\n    if (deep) {\n      return (val as any).map((x: any) => clone<any>(true, x));\n    } else {\n      return (val as any).slice();\n    }\n  }\n  if (isObject(val)) {\n    return extend({ deep }, {}, val);\n  }\n  // Primitive types like numbers and strings are copied by default\n  return val;\n};\n\n/**\n * Get the class `\"that\"`\n * @param that\n */\nexport const classOf = (that: any) => {\n  return that.constructor;\n};\n\n/**\n * Removes internal riba properties from an object\n * @param obj\n * @return Cleared new object\n */\nexport const clearObjFromRiba = (\n  obj: Record<string, any> | Array<any>\n): Record<string, any> | Array<any> => {\n  if (Array.isArray(obj)) {\n    return (obj as Array<any>).map((x: any) =>\n      isObject(x) ? clearObjFromRiba(x) : x\n    );\n  }\n  const newObj: any = {};\n  for (const key in obj) {\n    if (key !== \"__rv\") {\n      if (isObject(obj[key])) {\n        newObj[key] = clearObjFromRiba(obj[key]);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  return newObj;\n};\n\n/**\n * Generate a Hash from string\n * @param str The string\n * @returns hash code\n * @see https://stackoverflow.com/a/7616484\n */\nexport const hashCode = (str: string) => {\n  let hash = 0;\n  let i: number;\n  let chr: number;\n  if (str.length === 0) return hash;\n  for (i = 0; i < str.length; i++) {\n    chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n};\n","import { clone, justDigits, jsonStringify, parseType } from \"./type.js\";\n\nexport const MAX_UID = 1000;\n\n/**\n * Sets an attribute. The peculiarity of this custom method is that when an object is passed, it is converted to a json string.\n * This is useful if, for example, an object is to be passed to a custom element via an attribute.\n * @note This method is used by the AttributeBinder.\n * @param el\n * @param attributeName\n * @param newValue\n * @returns\n */\nexport const setAttribute = (\n  el: HTMLElement,\n  attributeName: string,\n  newValue: any\n) => {\n  if (!attributeName) {\n    throw new Error(\"Can't set attribute of \" + attributeName);\n  }\n\n  const oldValue = el.getAttribute(attributeName);\n  let newValueFormatted: any;\n  let changed = false;\n  switch (typeof newValue) {\n    case \"string\":\n    case \"number\":\n    case \"boolean\":\n      newValueFormatted = String(newValue);\n      break;\n    case \"undefined\":\n      newValueFormatted = undefined;\n    case \"object\":\n      if (newValue === null) {\n        newValueFormatted = null;\n      } else {\n        newValueFormatted = jsonStringify(newValue, 0);\n      }\n      break;\n    default:\n      newValueFormatted = String(newValue);\n      break;\n  }\n\n  if (newValueFormatted === null || newValueFormatted === undefined) {\n    el.removeAttribute(attributeName);\n    changed = true;\n  } else {\n    if (oldValue !== newValueFormatted) {\n      el.setAttribute(attributeName, newValueFormatted);\n      changed = true;\n    }\n  }\n  return {\n    name: attributeName,\n    newValue: newValueFormatted,\n    oldValue,\n    changed,\n  };\n};\n\nexport const getDataset = (element: HTMLElement) => {\n  const dataset = clone(false, element.dataset);\n  for (const attr in dataset) {\n    if (dataset[attr]) {\n      dataset[attr] = parseType(dataset[attr], true).value;\n    }\n  }\n  return dataset;\n};\n\n/**\n * Calls el.hasChildNodes but ignores empty strings, the default hasChildNodes would return true on `<div> </div>`.\n * Very useful to check within a component if the component has set child elements to load or overwrite the component template\n * @param el\n */\nexport const hasChildNodesTrim = (el: HTMLUnknownElement) => {\n  if (!el.hasChildNodes()) {\n    return false;\n  }\n  const childNodes = el.childNodes;\n  if (childNodes.length === 1 && childNodes[0].nodeType === 3) {\n    if (!childNodes[0].nodeValue || childNodes[0].nodeValue?.trim() === \"\") {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n *\n */\nexport const getInputValue = (\n  el:\n    | HTMLUnknownElement\n    | HTMLElement\n    | HTMLSelectElement\n    | HTMLInputElement\n    | HTMLOptionsCollection\n) => {\n  const results: string[] = [];\n  if ((el as HTMLSelectElement).type === \"checkbox\") {\n    return (el as HTMLInputElement).checked;\n  } else if ((el as HTMLSelectElement).type === \"select-multiple\") {\n    const options: HTMLOptionsCollection = (el as HTMLSelectElement).options;\n\n    for (const key in options) {\n      if (options[key]) {\n        const option = options[key];\n        if (option.selected) {\n          results.push(option.value);\n        }\n      }\n    }\n\n    return results;\n  } else if (\n    (el as HTMLElement).hasAttribute &&\n    (el as HTMLElement).hasAttribute(\"contenteditable\")\n  ) {\n    return (el as HTMLElement).innerHTML; // TODO write test for contenteditable\n  } else {\n    return (el as HTMLInputElement).value;\n  }\n};\n\nexport const elementIsHidden = (el: HTMLElement) => {\n  return (\n    el.hasAttribute(\"hidden\") ||\n    el.style.display === \"none\" ||\n    el.style.visibility === \"hidden\" ||\n    window.getComputedStyle(el).display === \"none\" ||\n    window.getComputedStyle(el).visibility === \"hidden\"\n  );\n};\n\nexport const elementIsVisible = (el: HTMLElement) => {\n  return !elementIsHidden(el);\n};\n\n/**\n * Observe scroll event\n * @param scrollElement The element or window you want to observe\n * @returns Returns a promise which resolves when an element stops scrolling\n */\nexport const scrolling = async (\n  scrollElement: HTMLElement | (Window & typeof globalThis)\n) => {\n  return new Promise<void>((resolve) => {\n    let scrollTimeout: ReturnType<typeof setTimeout> | undefined;\n    const checkScroll = () => {\n      if (scrollTimeout !== undefined) {\n        clearTimeout(scrollTimeout);\n      }\n\n      scrollTimeout = setTimeout(() => {\n        resolve();\n      }, 100);\n    };\n    scrollElement.removeEventListener(\"scroll\", checkScroll);\n    scrollElement.addEventListener(\"scroll\", checkScroll, { passive: true });\n    checkScroll();\n  });\n};\n\n/**\n * Scrolls to an element\n *\n * @see https://stackoverflow.com/a/31987330\n * @see https://pawelgrzybek.com/page-scroll-in-vanilla-javascript/\n * @param element\n * @param to\n * @param duration\n */\nexport const scrollTo = async (\n  to: HTMLElement,\n  offset = 0,\n  scrollElement: HTMLElement | (Window & typeof globalThis) | null = window,\n  angle: \"horizontal\" | \"vertical\" = \"vertical\",\n  behavior: \"auto\" | \"smooth\" | undefined = \"smooth\"\n) => {\n  if (!scrollElement) {\n    scrollElement = window;\n  }\n\n  const scrollPromise = scrolling(scrollElement);\n\n  let top = 0;\n  let left = 0;\n\n  // If element is window\n  if ((scrollElement as Window).document) {\n    if (angle === \"vertical\") {\n      const scrollY =\n        (scrollElement as Window).scrollY ||\n        (scrollElement as Window).pageYOffset;\n      top = Math.round(to.getBoundingClientRect().top + scrollY - offset);\n    } else {\n      const scrollX =\n        (scrollElement as Window).scrollX ||\n        (scrollElement as Window).pageXOffset;\n      left = Math.round(to.getBoundingClientRect().left + scrollX - offset);\n    }\n  } else {\n    if (angle === \"vertical\") {\n      const marginTop = justDigits(\n        window.getComputedStyle(scrollElement as HTMLElement).marginTop\n      );\n      top = Math.round(to.offsetTop - offset - marginTop);\n    } else {\n      const marginLeft = justDigits(\n        window.getComputedStyle(scrollElement as HTMLElement).marginLeft\n      );\n      left = Math.round(to.offsetLeft - offset - marginLeft);\n    }\n  }\n\n  scrollElement.scroll({\n    behavior,\n    left,\n    top,\n  });\n\n  return scrollPromise;\n};\n\nexport const getScrollHeight = (\n  scrollElement: HTMLElement | (Window & typeof globalThis)\n): number => {\n  // if element is window\n  if ((scrollElement as Window).document) {\n    const win = scrollElement as Window;\n    const doc = win.document;\n    return (\n      (win as any).scrollMaxY ||\n      Math.max(\n        doc.body.scrollHeight,\n        doc.body.offsetHeight,\n        doc.documentElement.clientHeight,\n        doc.documentElement.scrollHeight,\n        doc.documentElement.offsetHeight,\n        0\n      )\n    );\n  }\n  return (scrollElement as HTMLElement).scrollHeight;\n};\n\nexport const getScrollWidth = (\n  scrollElement: HTMLElement | (Window & typeof globalThis)\n): number => {\n  // if element is window\n  if ((scrollElement as Window).document) {\n    const win = scrollElement as Window;\n    const doc = win.document;\n    return (\n      (win as any).scrollMaxX ||\n      Math.max(\n        doc.body.scrollWidth,\n        doc.body.offsetWidth,\n        doc.documentElement.clientWidth,\n        doc.documentElement.scrollWidth,\n        doc.documentElement.offsetWidth\n      )\n    );\n  }\n  return (scrollElement as HTMLElement).scrollWidth;\n};\n\nexport const scrollToPosition = async (\n  scrollElement: HTMLElement | (Window & typeof globalThis) | null,\n  position: number | \"end\" | \"start\" | \"center\",\n  angle: \"horizontal\" | \"vertical\" | \"both\" = \"vertical\",\n  behavior: \"auto\" | \"smooth\" | undefined = \"smooth\"\n) => {\n  let top: number | undefined;\n  let left: number | undefined;\n\n  if (!scrollElement) {\n    return;\n  }\n\n  const scrollPromise = scrolling(scrollElement);\n\n  if (angle === \"vertical\" || angle === \"both\") {\n    switch (position) {\n      case \"start\":\n        top = 0;\n        break;\n      case \"end\":\n        top = getScrollHeight(scrollElement);\n        break;\n      case \"center\":\n        top = getScrollHeight(scrollElement);\n        if (top) {\n          top /= 2;\n          // if element is window\n          if ((scrollElement as Window).document) {\n            top -= ((scrollElement as Window).visualViewport?.height || 0) / 2;\n          } else {\n            top -= (scrollElement as HTMLElement).clientHeight / 2;\n          }\n        }\n        break;\n      default:\n        top = position;\n        break;\n    }\n  }\n\n  if (angle === \"horizontal\" || angle === \"both\") {\n    switch (position) {\n      case \"start\":\n        left = 0;\n        break;\n      case \"end\":\n        left = getScrollWidth(scrollElement);\n        break;\n      case \"center\":\n        left = getScrollWidth(scrollElement);\n        if (left) {\n          left /= 2;\n          // if element is window\n          if ((scrollElement as Window).document) {\n            left -= ((scrollElement as Window).visualViewport?.width || 0) / 2;\n          } else {\n            left -= (scrollElement as HTMLElement).clientWidth / 2;\n          }\n        }\n        break;\n      default:\n        left = position;\n        break;\n    }\n  }\n\n  scrollElement.scroll({\n    behavior,\n    top,\n    left,\n  });\n\n  return scrollPromise;\n};\n\nexport const getElementFromEvent = <T = HTMLAnchorElement | HTMLUnknownElement>(\n  event: Event | MouseEvent | TouchEvent\n) => {\n  const el =\n    ((event as Event).target as unknown as T | null) ||\n    ((event as any).currentTarget as T | null) ||\n    ((event as MouseEvent).relatedTarget as unknown as T | null) ||\n    // JQuery event\n    ((event as any).delegateTarget as T) ||\n    ((event as any).fromElement as T);\n  return el;\n};\n\nexport const getViewportDimensions = () => {\n  const w = Math.max(\n    document.documentElement ? document.documentElement.clientWidth : 0,\n    window.innerWidth || 0\n  );\n  const h = Math.max(\n    document.documentElement ? document.documentElement.clientHeight : 0,\n    window.innerHeight || 0\n  );\n  return {\n    h,\n    w,\n  };\n};\n\n/**\n * Determine if an element is in the viewport\n * @param elem The element\n * @param offset.top Distance to the top of the screen, if this is 0, the element must be scrolled until the top of the screen\n * @param offset.bottom Distance to the bottom of the screen, if this is 0, the scroll position must be over the element\n * @return Returns true if element is in the viewport\n */\nexport const isInViewport = (\n  elem: Element,\n  offset: {\n    top?: number;\n    bottom?: number;\n    left?: number;\n    right?: number;\n  } = {}\n) => {\n  if (!elem) {\n    return false;\n  }\n\n  const distance = elem.getBoundingClientRect();\n\n  const vp = getViewportDimensions();\n\n  offset.top ||= 0;\n  offset.left ||= 0;\n  offset.bottom ||= 0;\n  offset.right ||= 0;\n\n  offset.top += vp.h - distance.height;\n  offset.left += vp.w - distance.width;\n\n  const vertical =\n    distance.top + distance.height >= offset.bottom &&\n    distance.bottom - distance.height <= offset.top;\n\n  const horizontal =\n    distance.left + distance.width >= offset.right &&\n    distance.right - distance.width <= offset.left;\n\n  return vertical && horizontal;\n};\n\n/**\n * Select all of an contenteditable or input element\n * @param element The element you want to select\n */\nexport const selectAll = (element: HTMLInputElement) => {\n  // need setTimeout for safari\n  setTimeout(() => {\n    if (typeof element.selectionStart !== \"undefined\") {\n      element.selectionStart = 0;\n      element.selectionEnd = 999;\n    }\n\n    if (typeof element.select === \"function\") {\n      element.select();\n    }\n\n    if (typeof element.setSelectionRange === \"function\") {\n      element.setSelectionRange(0, 999);\n    }\n\n    if (window.getSelection) {\n      const range = document.createRange();\n      range.selectNodeContents(element);\n      const selection = window.getSelection();\n      if (selection) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.selectAllChildren(element);\n      }\n    }\n\n    if ((document as any).body.createTextRange) {\n      const range: any = (document.body as any).createTextRange(); // Creates TextRange object\n      range.moveToElementText(element); // sets Range\n      range.select(); // make selection.\n    }\n\n    if (document.execCommand) {\n      document.execCommand(\"selectAll\", false, undefined);\n    }\n  }, 0);\n};\n\n/**\n * Cross-browser Document Ready check\n * @see https://www.competa.com/blog/cross-browser-document-ready-with-vanilla-javascript/\n * @param callback\n */\nexport const ready = (callback: () => void) => {\n  if (!callback || typeof callback !== \"function\") {\n    return new Error(\"The callback is required!\");\n  }\n\n  /**\n   * In some cases it can be useful to dispatch the \"DOMContentLoaded\" by hand,\n   * but Riba should only react to the real event.\n   *\n   * For this case you can create the event in this way:\n   *\n   * @example\n   * ```ts\n   *   const event: Event & { fake?: boolean } = new Event('DOMContentLoaded', {\n   *     bubbles: true,\n   *     cancelable: true,\n   *   })\n   *   event.fake = true\n   *   window.document.dispatchEvent(event)\n   * ```\n   */\n  const checkReady = (event?: Event & { fake?: boolean }) => {\n    // Do nothing if this is a fake event\n    if (event?.fake) return;\n\n    if (document.readyState !== \"loading\") {\n      callback();\n      if ((document as any).attachEvent) {\n        (document as any).detachEvent(\"onreadystatechange\", checkReady);\n      }\n      document.removeEventListener(\"DOMContentLoaded\", checkReady);\n    }\n  };\n\n  if ((document as any).attachEvent) {\n    (document as any).attachEvent(\"onreadystatechange\", checkReady);\n  }\n  if (document.addEventListener) {\n    document.addEventListener(\"DOMContentLoaded\", checkReady);\n  }\n  checkReady();\n};\n\nexport const loadScript = async (\n  src: string,\n  id: string,\n  async = true,\n  defer = true\n) => {\n  const script = await new Promise<HTMLScriptElement>((resolve, reject) => {\n    let script = document.getElementById(id) as HTMLScriptElement | null;\n    if (script) {\n      console.warn(\"script already loaded, do nothing.\");\n      if (script.hasAttribute(\"loaded\")) {\n        return resolve(script);\n      }\n    } else {\n      script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.id = id;\n      script.src = src;\n      if (async) {\n        script.async = true;\n      }\n      if (defer) {\n        script.defer = true;\n      }\n      const head = document.head || document.getElementsByTagName(\"head\")[0];\n      head.appendChild(script);\n    }\n\n    // IE\n    if ((script as any).readyState) {\n      (script as any).onreadystatechange = function () {\n        if (\n          (script as any).readyState === \"loaded\" ||\n          (script as any).readyState === \"complete\"\n        ) {\n          (script as any).onreadystatechange = null;\n          script?.setAttribute(\"loaded\", \"true\");\n          resolve(script as HTMLScriptElement);\n        }\n      };\n    }\n\n    // Other browsers\n    script.addEventListener(\"load\", () => {\n      script?.setAttribute(\"loaded\", \"true\");\n      resolve(script as HTMLScriptElement);\n    });\n    script.addEventListener(\"error\", (...args) => {\n      const error = new Error(\"Error on load script \" + script?.src);\n      console.error(error);\n      console.error(...args);\n      reject(error);\n    });\n  });\n\n  return script;\n};\n\nexport const getUID = (prefix: string): string => {\n  do {\n    prefix += ~~(Math.random() * MAX_UID); // \"~~\" acts like a faster Math.floor() here\n  } while (document.getElementById(prefix));\n\n  return prefix;\n};\n\n/**\n * Detects if dom element is custom element and a registered riba component\n * @see https://stackoverflow.com/a/47737765/1465919\n * @param element The element or tag name you want to test\n * @param isRegistered If true the element must also be a registered as a custom element,\n * @param isUpgraded\n */\nexport const isCustomElement = (\n  element: HTMLUnknownElement | string,\n  isRegistered = false,\n  isUpgraded = false\n) => {\n  // A custom element's name is required to contain a -, whereas an HTML-defined element will not. So:\n  const localName = typeof element === \"string\" ? element : element.localName;\n  const isCustomElement = localName.includes(\"-\");\n  if (isCustomElement && isRegistered && customElements) {\n    const customConstructor = customElements.get(localName);\n    if (!customConstructor) {\n      return false;\n    }\n    // If the element is not yet upgraded the constructor is still equal to HTMLElement\n    if (isUpgraded) {\n      return customConstructor === element.constructor;\n    }\n    // If we don't need to check for upgraded status\n    return true;\n  }\n  return isCustomElement;\n};\n\n/**\n * Waits for CustomElement to be upgraded, returns the element.\n * @param element The custom Element waiting for an upgrade.\n * @returns the element after the upgrade\n */\nexport const waitForCustomElement = async (element: HTMLUnknownElement) => {\n  await customElements.whenDefined(element.localName);\n  return element;\n};\n\n/**\n * Creating a new DOM element from an HTML string\n * @param html representing a single element\n * @example\n * ```js\n *   const td = htmlToElement(\"<td>foo</td>\");\n *   const div = htmlToElement(\"<div><span>nested</span> <span>stuff</span></div>\");\n * ```\n */\nexport const htmlToElement = (html: string) => {\n  const template = document.createElement(\"template\");\n  html = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = html;\n  return template.content.firstChild;\n};\n\n/**\n * Creating a new DOM elements from an HTML string\n * @param html representing any number of sibling elements\n * @example\n * ```js\n *   var rows = htmlToElements('<tr><td>foo</td></tr><tr><td>bar</td></tr>');\n * ```\n */\nexport const htmlToElements = (html: string) => {\n  const template = document.createElement(\"template\");\n  template.innerHTML = html;\n  return template.content.childNodes;\n};\n\n/**\n * Converts a NodeList or HTMLCollection to an Array\n * @param nodeList\n * @returns\n */\nexport const toArray = (nodeList: NodeList | HTMLCollection): HTMLElement[] => {\n  if (!nodeList) {\n    return [];\n  }\n\n  return [].slice.call(nodeList);\n};\n\n/**\n * Check if any html element is visible in the dom\n * @param element\n * @returns\n */\nexport const isVisible = (element: HTMLElement) => {\n  if (!element) {\n    return false;\n  }\n\n  if (\n    element.style &&\n    element.parentNode &&\n    (element.parentNode as HTMLElement).style\n  ) {\n    const elementStyle = getComputedStyle(element);\n    const parentNodeStyle = getComputedStyle(element.parentNode as HTMLElement);\n\n    return (\n      elementStyle.display !== \"none\" &&\n      parentNodeStyle.display !== \"none\" &&\n      elementStyle.visibility !== \"hidden\"\n    );\n  }\n\n  return false;\n};\n\n/**\n * Similar to JQuery's `$(el).index();`\n * @param el\n */\nexport const getElementIndex = (el: Element | null) => {\n  if (!el) {\n    return -1;\n  }\n  let i = 0;\n  do {\n    i++;\n    el = (el as HTMLElement).previousElementSibling;\n  } while (el);\n  return i;\n};\n","// Credits\n// * https://github.com/flexdinesh/browser-or-node\n// * https://stackoverflow.com/a/33697246/1465919\n\n// For real types see https://github.com/denoland/deno/blob/main/core/lib.deno_core.d.ts\ndeclare const Deno: any;\ndeclare const process: any;\ndeclare const WorkerGlobalScope: any;\ndeclare const importScripts: any;\ndeclare const WorkerNavigator: any;\n\nconst isNode =\n  typeof process !== \"undefined\" &&\n  process.versions != null &&\n  process.versions.node != null;\n\nconst isWebWorker =\n  !isNode &&\n  \"undefined\" !== typeof WorkerGlobalScope &&\n  \"function\" === typeof importScripts &&\n  navigator instanceof WorkerNavigator;\ntypeof self === \"object\" &&\n  (self as any).constructor &&\n  (self as any).constructor.name === \"DedicatedWorkerGlobalScope\";\n\n/**\n * @see https://github.com/jsdom/jsdom/releases/tag/12.0.0\n * @see https://github.com/jsdom/jsdom/issues/1537\n */\nconst isJsDom =\n  (typeof window !== \"undefined\" && window.name === \"nodejs\") ||\n  (typeof navigator !== \"undefined\" &&\n    (navigator.userAgent.includes(\"Node.js\") ||\n      navigator.userAgent.includes(\"jsdom\")));\n\nconst isBrowser =\n  !isJsDom &&\n  !isNode &&\n  !isWebWorker &&\n  typeof window !== \"undefined\" &&\n  typeof window.document !== \"undefined\";\n\nconst isDeno = typeof Deno !== \"undefined\" && typeof Deno.core !== \"undefined\";\n\nexport { isBrowser, isWebWorker, isNode, isJsDom, isDeno };\n","/**\n * Simplified version of https://github.com/YuzuJS/setImmediate\n * TODO Port tests\n */\n\ninterface Task {\n  callback: (...args: any) => any;\n  args: any[];\n}\n\nlet nextHandle = 1; // Spec says greater than zero\nconst tasksByHandle: { [key: string]: Task } = {};\nlet currentlyRunningATask = false;\nconst messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n\nconst onGlobalMessage = function (event: MessageEvent) {\n  if (\n    event.source === window &&\n    typeof event.data === \"string\" &&\n    event.data.indexOf(messagePrefix) === 0\n  ) {\n    runIfPresent(+event.data.slice(messagePrefix.length));\n  }\n};\n\nif (window) {\n  window.addEventListener(\"message\", onGlobalMessage, false);\n}\n\nfunction registerImmediate(handle: number) {\n  window.postMessage(messagePrefix + handle, \"*\");\n}\n\nfunction _setImmediate(callback: (...args: any) => any, ...args: any[]) {\n  console.debug(\"Use setImmediate polyfill\");\n  // Callback can either be a function or a string\n  if (typeof callback !== \"function\") {\n    callback = new Function(\"\" + callback) as (...args: any) => any;\n  }\n  // Store and register the task\n  const task = { callback: callback, args };\n  tasksByHandle[nextHandle] = task;\n  registerImmediate(nextHandle);\n  return nextHandle++;\n}\n\nfunction _clearImmediate(handle: number) {\n  delete tasksByHandle[handle];\n}\n\nfunction run(task: Task) {\n  const callback = task.callback;\n  const args = task.args;\n  callback(...args);\n}\n\nfunction runIfPresent(handle: any) {\n  // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n  // So if we're currently running a task, we'll need to delay this invocation.\n  if (currentlyRunningATask) {\n    // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n    // \"too much recursion\" error.\n    setTimeout(runIfPresent, 0, handle);\n  } else {\n    const task = tasksByHandle[handle];\n    if (task) {\n      currentlyRunningATask = true;\n      try {\n        run(task);\n      } finally {\n        _clearImmediate(handle);\n        currentlyRunningATask = false;\n      }\n    }\n  }\n}\n\nexport const setImmediate: typeof _setImmediate =\n  (window as any)?.setImmediate || _setImmediate;\nexport const clearImmediate: typeof _clearImmediate =\n  (window as any)?.clearImmediate || _clearImmediate;\n","const fallbackCopyTextToClipboard = (text: string) => {\n  const textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n\n  // Avoid scrolling to bottom\n  textArea.style.top = \"0\";\n  textArea.style.left = \"0\";\n  textArea.style.position = \"fixed\";\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    const successful = document.execCommand(\"copy\");\n    const msg = successful ? \"successful\" : \"unsuccessful\";\n    console.log(`Fallback: Copying text command was ${msg}: ${text}`);\n  } catch (err) {\n    console.error(\"Fallback: Oops, unable to copy\", err);\n  }\n\n  document.body.removeChild(textArea);\n};\n\n/**\n * Copy text to clipboard\n * @see https://stackoverflow.com/a/30810322\n */\nexport const copyTextToClipboard = async (text: string) => {\n  if (!navigator.clipboard) {\n    fallbackCopyTextToClipboard(text);\n    return;\n  }\n  try {\n    await navigator.clipboard.writeText(text);\n    console.log(\"Copying to clipboard was successful: \" + text);\n  } catch (error) {\n    console.error(\"Could not copy text: \", error);\n  }\n};\n\n/**\n * Get the Operating system the browser is running on\n * @see https://stackoverflow.com/questions/19877924/what-is-the-list-of-possible-values-for-navigator-platform-as-of-today\n * @see https://stackoverflow.com/questions/9038625/detect-if-device-is-ios\n * @see https://github.com/podlove/podlove-subscribe-button/blob/master/src/coffee/user_agent.coffee\n */\nexport const getOS = () => {\n  const ua = navigator.userAgent;\n  const platform = window.navigator.platform;\n\n  const uAs = {\n    windows7: /Windows NT 6.1/,\n    windows8: /Windows NT 6.2/,\n    windows81: /Windows NT 6.3/,\n    windows10: /Windows NT 10.0/,\n    windows: /windows/i,\n    windowsPhone: /trident/i,\n    android: /android/i,\n    ios: /(ipad|iphone|ipod)/i,\n    linux: /(linux)/i,\n    unix: /(openbsd|freebsd|netbsd)/i,\n    osxCatalina: /macintosh.+10(_|\\.)15/i,\n    osxBigSur: /macintosh.+((10(_|\\.)16)|(11(_|\\.)))/i,\n    osx: /macintosh/i,\n    mac: /mac/i,\n  };\n\n  const platforms = {\n    linux: /Linux/i,\n\n    unix: /(FreeBSD|OpenBSD|X11|SunOS)/i,\n    webOS: /webOS/i,\n\n    playstation3: /playstation 3/i,\n    playstation4: /playstation 4/i,\n    PlaystationPortable: /psp/i,\n\n    newNintendo3Ds: /new nintendo 3ds/i,\n    nintendoDsi: /nintendo dsi/i,\n    nintendo3Ds: /nintendo 3ds/i,\n    nintendoWii: /nintendo wii/i,\n    nintendoWiiU: /nintendo wiiu/i,\n\n    palmos: /palmos/i,\n\n    symbian: /(nokia_series_40|s60|symbian)/i,\n  };\n\n  for (const uAKey of Object.keys(uAs) as Array<keyof typeof uAs>) {\n    const regex = uAs[uAKey];\n    if (regex.test(ua)) {\n      // iPad on iOS 13 detection\n      if (uAKey === \"mac\" && \"ontouchend\" in document) {\n        return \"ios\";\n      }\n      return uAKey;\n    }\n  }\n\n  for (const platformKey of Object.keys(platforms) as Array<\n    keyof typeof platforms\n  >) {\n    const regex = platforms[platformKey];\n    if (regex.test(platform)) {\n      return platformKey;\n    }\n  }\n\n  return \"Unknown\";\n};\n\n// TODO test TV\nexport const getOSType = () => {\n  const os = getOS();\n\n  let isMobile = false;\n  let isDesktop = false;\n  let isGameConsole = false;\n\n  switch (os) {\n    case \"windows\":\n    case \"windows10\":\n    case \"windows7\":\n    case \"windows8\":\n    case \"windows81\":\n    case \"osxBigSur\":\n    case \"osxCatalina\":\n    case \"osx\":\n    case \"mac\":\n    case \"linux\":\n    case \"unix\":\n      isDesktop = true;\n      break;\n\n    case \"ios\":\n    case \"android\":\n    case \"windowsPhone\":\n    case \"symbian\":\n      isMobile = true;\n      break;\n  }\n\n  if (os.includes(\"playstation\") || os.includes(\"nintendo\")) {\n    isGameConsole = true;\n  }\n\n  return {\n    isMobile,\n    isDesktop,\n    isGameConsole,\n  };\n};\n\nexport const isMobile = () => {\n  return getOSType().isMobile;\n};\n\nexport const isDesktop = () => {\n  return getOSType().isDesktop;\n};\n\nexport const isGameConsole = () => {\n  return getOSType().isGameConsole;\n};\n","/**\n * get param from hash\n */\nexport const getUrlParameter = (name: string, url: string) => {\n  if (!url) {\n    url = window.location.href;\n  }\n  name = name.replace(/[[\\]]/g, \"\\\\$&\");\n  const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\");\n  const results = regex.exec(url);\n  if (!results) {\n    return null;\n  }\n  if (!results[2]) {\n    return \"\";\n  }\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n};\n\n/**\n * get location object ofpath or address bar\n * @see http://stackoverflow.com/a/736970/1465919\n *\n * @example\n * var l = getLocation(\"http://example.com:3000/pathname/?search=test#hash\");\n * =>\n * l.protocol; // => \"http:\"\n * l.host;     // => \"example.com:3000\"\n * l.hostname; // => \"example.com\"\n * l.port;     // => \"3000\"\n * l.pathname; // => \"/pathname/\"\n * l.hash;     // => \"#hash\"\n * l.search;   // => \"?search=test\"\n * l.origin;   // => \"http://example.com:3000\"\n */\nexport const getLocation = (url?: string): Location => {\n  if (!url) {\n    return window.location;\n  }\n  const l = document.createElement(\"a\");\n  l.href = url;\n  return l as any as Location;\n};\n\n/**\n * If the webapps url is https://mysupersite.org and the url is https://mysupersite.org/subpage?search=test\n * this method will return /subpage?search=test\n * If the url is https://anothersite.org/subpage?search=test this method will return https://anothersite.org/subpage?search=test\n * @param url\n */\nexport const normalizeUrl = (\n  url?: string\n): { url: string; location: Location } => {\n  const location = getLocation(url);\n  const curHostname = getLocation().hostname;\n  if (location.hostname === curHostname) {\n    return {\n      url: location.pathname + location.search + location.hash,\n      location,\n    };\n  } else {\n    return {\n      url: getUrl(url),\n      location,\n    };\n  }\n};\n\n/**\n * Return the current full url\n *\n * @return {string} currentUrl\n */\nexport const getUrl = (url?: string): string => {\n  const location = getLocation(url);\n  return (\n    location.protocol +\n    \"//\" +\n    location.host +\n    location.pathname +\n    location.search +\n    location.hash\n  );\n};\n\n/**\n * Check if we are on the route\n */\nexport const onRoute = (checkUrl?: string, compareQueryParam = false) => {\n  if (checkUrl) {\n    const location1 = getLocation();\n    const location2 = getLocation(checkUrl);\n\n    if (compareQueryParam) {\n      // TODO ignore query parameter order\n      if (location1.search !== location2.search) {\n        return false;\n      }\n    }\n\n    return (\n      location1.hostname === location2.hostname &&\n      location1.pathname === location2.pathname\n    );\n  }\n  return false;\n};\n\n/**\n * Check if the current location url stats with a url or is equal\n */\nexport const onParentRoute = (checkUrl?: string) => {\n  if (checkUrl) {\n    const location = getLocation();\n    const pathname = location.pathname;\n    const hostname = location.hostname;\n    const checkLocation = getLocation(checkUrl);\n    const checkPathname = checkLocation.pathname;\n    const checkHostname = checkLocation.hostname;\n    return hostname === checkHostname && pathname.startsWith(checkPathname);\n  }\n  return false;\n};\n\n/**\n * Given an url, return it without the hash\n *\n * @param url\n * @return newCleanUrl\n */\nexport const cleanLink = (url: string): string => {\n  return url.replace(/#.*/, \"\");\n};\n\n/**\n * Return the port number normalized, eventually you can pass a string to be normalized.\n *\n * @param p\n * @return port\n */\nexport const getPort = (p?: string, url?: string) => {\n  const location = getLocation(url);\n  const port = typeof p !== \"undefined\" ? p : location.port;\n  const protocol = location.protocol;\n\n  if (port !== \"\") {\n    return Number(port);\n  }\n  if (protocol === \"http:\") {\n    return 80;\n  }\n\n  if (protocol === \"https:\") {\n    return 443;\n  }\n};\n\n/**\n * Test if url is absolute or relative\n * @see https://stackoverflow.com/a/19709846/1465919\n */\nexport const isAbsoluteUrl = (url: string) => {\n  if (!url) {\n    return false;\n  }\n  const isProtokoll = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n  const isAbsolute =\n    isProtokoll.test(url) ||\n    url.startsWith(\"mailto:\") ||\n    url.startsWith(\"tel:\") ||\n    url.startsWith(\"fax:\");\n  return isAbsolute;\n};\n\nexport const isExternalUrl = (absoluteUrl: string) => {\n  if (isAbsoluteUrl(absoluteUrl)) {\n    const location = getLocation();\n    const host = location.protocol + \"//\" + location.hostname;\n    let isExternal = true;\n    if (absoluteUrl.startsWith(host)) {\n      isExternal = false;\n    }\n    return isExternal;\n  }\n  return false;\n};\n\nexport const isInternalUrl = (url: string) => {\n  return !isExternalUrl(url);\n};\n\n/**\n * Get hash from address bar or url if set\n */\nexport const getHash = (url?: string) => {\n  return getLocation(url).hash;\n};\n\n/**\n * Change hash from address bar\n */\nexport const updateHash = (hash: string) => {\n  return (window.location.hash = hash);\n};\n\n/**\n * Remove hash from address bar\n */\nexport const removeHash = () => {\n  return history.pushState(\n    \"\",\n    document.title,\n    window.location.pathname + window.location.search\n  );\n};\n","import { isObject } from \"@ribajs/utils/src/type.js\";\nimport { ModuleElementType, Elements } from \"../types/index.js\";\n\nexport abstract class ModuleElementService<T = any> {\n  protected elements: Elements<T>;\n\n  protected abstract type: ModuleElementType;\n\n  /**\n   *\n   * @param elements;\n   */\n  constructor(elements: Elements) {\n    this.elements = elements;\n  }\n\n  /**\n   * Regist a element\n   * @param element\n   * @param name  Overwrites the name to access the element over\n   */\n  public abstract register(element: T, name?: string): Elements;\n\n  /**\n   * Regist a set / array of elements\n   * @param elements\n   */\n  public registerAll(elements: Elements): Elements {\n    if (!isObject(elements)) {\n      throw new Error(\"Elements to register must be an object of elements\");\n    }\n    for (const key in elements) {\n      if (elements[key] && key !== \"__esModule\") {\n        const element = elements[key];\n        this.register(element, key);\n      }\n    }\n    return this.elements;\n  }\n}\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport type {\n  Adapters,\n  Root,\n  Key,\n  ObserverSyncCallback,\n  Obj,\n  Options,\n} from \"./types/index.js\";\nimport { isObject } from \"@ribajs/utils/src/type.js\";\n\nexport class Observer {\n  public static adapters: Adapters;\n  public static interfaces: string[] = [];\n  public static rootInterface: Root;\n\n  public static updateOptions(options: Partial<Options>): void {\n    if (!options.adapters) {\n      throw new Error(\"adapters are required!\");\n    }\n\n    if (options.adapters) {\n      Observer.adapters = { ...Observer.adapters, ...options.adapters };\n      Observer.interfaces = Object.keys(Observer.adapters);\n    }\n\n    Observer.rootInterface = options.rootInterface || Observer.interfaces[0];\n\n    if (!Observer.rootInterface) {\n      throw new Error(\"rootInterface is required!\");\n    }\n  }\n\n  /**\n   * Tokenize the provided keypath string into interface + path tokens for the\n   * observer to work with.\n   */\n  public static tokenize(keypath: string, root: Root): any[] {\n    const tokens: any[] = [];\n    let current: Key = { i: root, path: \"\" };\n    let index: number;\n    let chr: string;\n\n    for (index = 0; index < keypath.length; index++) {\n      chr = keypath.charAt(index);\n      if (~Observer.interfaces.indexOf(chr)) {\n        tokens.push(current);\n        current = { i: chr, path: \"\" };\n      } else {\n        current.path += chr;\n      }\n    }\n    tokens.push(current);\n    return tokens;\n  }\n\n  /**\n   * Gets the provided key on an object.\n   * @param key\n   * @param obj\n   */\n  public static get(key: Key, obj: Obj) {\n    return Observer.adapters[key.i].get(obj, key.path);\n  }\n\n  /**\n   * Observes or unobserve a callback on the object using the provided key.\n   * @param active\n   * @param key\n   * @param obj\n   * @param callback\n   */\n  public static set(\n    active: boolean,\n    key: Key,\n    obj: Obj,\n    callback: ObserverSyncCallback\n  ) {\n    if (active) {\n      Observer.adapters[key.i].observe(obj, key.path, callback);\n    } else {\n      Observer.adapters[key.i].unobserve(obj, key.path, callback);\n    }\n  }\n\n  public keypath: string;\n  public callback: ObserverSyncCallback;\n  public objectPath: Obj[];\n  public obj: Obj;\n  public target: Obj;\n  public key: Key;\n  public tokens: Key[];\n\n  /**\n   * Constructs a new keypath observer and kicks things off.\n   * @param model\n   * @param keypath\n   * @param callback\n   */\n  constructor(model: Obj, keypath: string, callback: ObserverSyncCallback) {\n    this.keypath = keypath;\n    this.callback = callback;\n    this.objectPath = [];\n    const parseResult = this.parse();\n    this.key = parseResult.key;\n    this.tokens = parseResult.tokens;\n    this.obj = this.getRootObject(model);\n    this.target = this.realize();\n    if (isObject(this.target)) {\n      Observer.set(true, this.key, this.target, this.callback);\n    }\n  }\n\n  /**\n   * Parses the keypath using the interfaces defined on the view. Sets variables\n   * for the tokenized keypath as well as the end key.\n   */\n  public parse() {\n    let path: string;\n    let root: Root;\n\n    if (!Observer.interfaces || !Observer.interfaces.length) {\n      throw new Error(\n        `[Observer] Must define at least one adapter interface. interfaces: \"${JSON.stringify(\n          Observer.interfaces\n        )}\" adapters: \"${JSON.stringify(Observer.adapters)}\"`\n      );\n    }\n\n    if (~Observer.interfaces.indexOf(this.keypath[0])) {\n      root = this.keypath[0];\n      path = this.keypath.substr(1);\n    } else {\n      root = Observer.rootInterface;\n      path = this.keypath;\n    }\n\n    this.tokens = Observer.tokenize(path, root);\n\n    if (!this.tokens.length) {\n      throw new Error(\"[Observer] No tokens\");\n    }\n\n    this.key = this.tokens.pop() as Key;\n\n    return {\n      key: this.key,\n      tokens: this.tokens,\n    };\n  }\n\n  /**\n   * Realizes the full keypath, attaching observers for every key and correcting\n   * old observers to any changed objects in the keypath.\n   */\n  public realize() {\n    let current: Obj = this.obj;\n    let unreached = -1;\n    let prev;\n    let token;\n\n    for (let index = 0; index < this.tokens.length; index++) {\n      token = this.tokens[index];\n      if (isObject(current)) {\n        if (typeof this.objectPath[index] !== \"undefined\") {\n          prev = this.objectPath[index];\n          if (current !== prev) {\n            Observer.set(false, token, prev, this);\n            Observer.set(true, token, current, this);\n            this.objectPath[index] = current;\n          }\n        } else {\n          Observer.set(true, token, current, this);\n          this.objectPath[index] = current;\n        }\n        current = Observer.get(token, current);\n      } else {\n        if (unreached === -1) {\n          unreached = index;\n        }\n        prev = this.objectPath[index];\n        if (prev) {\n          Observer.set(false, token, prev, this);\n        }\n      }\n    }\n    if (unreached !== -1) {\n      this.objectPath.splice(unreached);\n    }\n    return current;\n  }\n\n  /**\n   * Updates the keypath. This is called when any intermediary key is changed.\n   */\n  public sync() {\n    let oldValue;\n    let newValue;\n    const next = this.realize();\n    if (next !== this.target) {\n      if (isObject(this.target)) {\n        Observer.set(false, this.key, this.target, this.callback);\n      }\n\n      if (isObject(next)) {\n        Observer.set(true, this.key, next, this.callback);\n      }\n\n      oldValue = this.value();\n      this.target = next;\n      newValue = this.value();\n      if (newValue !== oldValue || Array.isArray(newValue)) {\n        this.callback.sync();\n      }\n    } else if (Array.isArray(next)) {\n      this.callback.sync();\n    }\n  }\n\n  /**\n   * Reads the current end value of the observed keypath. Returns undefined if\n   * the full keypath is unreachable.\n   */\n  public value() {\n    if (isObject(this.target)) {\n      return Observer.get(this.key, this.target);\n    }\n  }\n\n  /**\n   * Sets the current end value of the observed keypath. Calling setValue when\n   *  the full keypath is unreachable is a no-op.\n   * @param value\n   */\n  public setValue(value: any) {\n    if (isObject(this.target)) {\n      Observer.adapters[this.key.i].set(this.target, this.key.path, value);\n    }\n  }\n\n  /**\n   * Unobserve the entire keypath.\n   */\n  public unobserve() {\n    let obj: Obj;\n    let token;\n\n    for (let index = 0; index < this.tokens.length; index++) {\n      token = this.tokens[index];\n      obj = this.objectPath[index];\n      if (obj) {\n        Observer.set(false, token, obj, this);\n      }\n    }\n\n    if (isObject(this.target)) {\n      Observer.set(false, this.key, this.target, this.callback);\n    }\n  }\n\n  /**\n   * traverse the scope chain to find the scope which has the root property\n   * if the property is not found in chain, returns the root scope\n   * @param obj\n   */\n  public getRootObject(obj: Obj) {\n    let rootProp;\n    let current;\n    if (!obj.$parent) {\n      return obj;\n    }\n\n    if (this.tokens.length) {\n      rootProp = this.tokens[0].path;\n    } else {\n      rootProp = this.key.path;\n    }\n\n    current = obj;\n    while (current.$parent && current[rootProp] === undefined) {\n      current = current.$parent;\n    }\n    return current;\n  }\n}\n","import {\n  Adapter,\n  Adapters,\n  ModuleElementType,\n  AnyConstructor,\n} from \"../types/index.js\";\nimport { ModuleElementService } from \"./module-element.service.js\";\nimport { Observer } from \"../observer.js\";\n\nexport class AdapterService\n  extends ModuleElementService\n  implements AnyConstructor\n{\n  protected type: ModuleElementType = \"adapter\";\n\n  /**\n   *\n   */\n  constructor(adapters: Adapters) {\n    super(adapters);\n  }\n\n  /**\n   * Regist a adapter with his name\n   */\n  public register(\n    adapter: Adapter,\n    fallbackName?: string,\n    forceFallback = false\n  ): Adapters {\n    const name = forceFallback\n      ? fallbackName || adapter.name\n      : adapter.name || fallbackName;\n    if (!name) {\n      throw new Error(\"Adapter name not found!\");\n    }\n    this.elements[name] = adapter;\n    const options = { adapters: this.elements as any as Adapters };\n    Observer.updateOptions(options);\n    return this.elements;\n  }\n}\n","import { Binders, ModuleElementType, ClassOfBinder } from \"../types/index.js\";\nimport { ModuleElementService } from \"./module-element.service.js\";\n\n/**\n *\n */\nexport class BindersService extends ModuleElementService<ClassOfBinder> {\n  protected type: ModuleElementType = \"binder\";\n\n  /**\n   *\n   * @param binders;\n   */\n  constructor(binders: Binders) {\n    super(binders);\n  }\n\n  /**\n   * Regist a binder\n   */\n  public register(\n    Binder: ClassOfBinder,\n    fallbackName?: string,\n    forceFallback = false\n  ) {\n    if (!Binder) {\n      throw new Error(\"No Binder passed to register!\");\n    }\n\n    const name = forceFallback\n      ? fallbackName || Binder.key\n      : Binder.key || fallbackName;\n\n    if (!name) {\n      throw new Error(\"Binder name not found!\");\n    }\n\n    this.elements[name] = Binder;\n    return this.elements;\n  }\n}\n","export class EventDispatcher {\n    static instances = {};\n    static getNamespaces() {\n        return Object.keys(this.instances);\n    }\n    static getInstance(namespace = \"main\") {\n        const result = EventDispatcher.instances[namespace];\n        if (!result) {\n            return new this(namespace);\n        }\n        return result;\n    }\n    static getAllInstances() {\n        return EventDispatcher.instances;\n    }\n    static clearInstance(namespace = \"main\") {\n        const instance = EventDispatcher.instances[namespace];\n        instance.events = {};\n        instance.eventsOnce = {};\n        return instance;\n    }\n    static deleteInstance(namespace = \"main\") {\n        this.clearInstance(namespace);\n        delete this.instances[namespace];\n    }\n    static clearAllInstances() {\n        const namespaces = this.getNamespaces();\n        for (const namespace of namespaces) {\n            this.clearInstance(namespace);\n        }\n    }\n    static deleteAllInstances() {\n        this.clearAllInstances();\n        this.instances = {};\n    }\n    events = {};\n    eventsOnce = {};\n    _namespace = \"anonymous\";\n    get namespace() {\n        return this._namespace;\n    }\n    constructor(namespace) {\n        if (namespace) {\n            if (EventDispatcher.instances[namespace]) {\n                return EventDispatcher.instances[namespace];\n            }\n            this._namespace = namespace;\n            EventDispatcher.instances[namespace] = this;\n            return EventDispatcher.instances[namespace];\n        }\n    }\n    once(eventName, cb, thisContext) {\n        this.eventsOnce[eventName] = this.eventsOnce[eventName] || [];\n        if (typeof thisContext !== \"undefined\") {\n            this.eventsOnce[eventName].push({\n                cb: cb.bind(thisContext),\n                orgCb: cb,\n                thisContext,\n            });\n        }\n        else {\n            this.eventsOnce[eventName].push(cb);\n        }\n        return this;\n    }\n    on(eventName, cb, thisContext) {\n        this.events[eventName] = this.events[eventName] || [];\n        if (typeof thisContext !== \"undefined\") {\n            this.events[eventName].push({\n                cb: cb.bind(thisContext),\n                orgCb: cb,\n                thisContext,\n            });\n        }\n        else {\n            this.events[eventName].push(cb);\n        }\n        return this;\n    }\n    off(eventName, cb, thisContext) {\n        if (eventName === undefined) {\n            this.events = {};\n            this.eventsOnce = {};\n            return this;\n        }\n        if (cb !== undefined) {\n            if (thisContext !== undefined) {\n                if (eventName in this.events) {\n                    for (const [i, event] of this.events[eventName].entries()) {\n                        const curEvent = event;\n                        if (curEvent.orgCb === cb && curEvent.thisContext === thisContext) {\n                            this.events[eventName].splice(i, 1);\n                        }\n                    }\n                }\n                if (eventName in this.eventsOnce) {\n                    for (const [i, event] of this.eventsOnce[eventName].entries()) {\n                        const curEvent = event;\n                        if (curEvent.orgCb === cb && curEvent.thisContext === thisContext) {\n                            this.eventsOnce[eventName].splice(i, 1);\n                        }\n                    }\n                }\n            }\n            else {\n                if (eventName in this.events) {\n                    for (const [i, event] of this.events[eventName].entries()) {\n                        const curEvent = event;\n                        if (curEvent === cb) {\n                            this.events[eventName].splice(i, 1);\n                        }\n                    }\n                }\n                if (eventName in this.eventsOnce) {\n                    for (const [i, event] of this.eventsOnce[eventName].entries()) {\n                        const curEvent = event;\n                        if (curEvent === cb) {\n                            this.eventsOnce[eventName].splice(i, 1);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            this.events[eventName] = [];\n            this.eventsOnce[eventName] = [];\n        }\n        return this;\n    }\n    trigger(eventName, ...args) {\n        if (eventName in this.events) {\n            for (const event of this.events[eventName]) {\n                if (event?.cb) {\n                    event.cb(...args);\n                }\n                else {\n                    event(...args);\n                }\n            }\n        }\n        if (eventName in this.eventsOnce) {\n            for (const [i, event] of this.eventsOnce[eventName].entries()) {\n                if (event?.cb) {\n                    event.cb(...args);\n                    this.eventsOnce[eventName].splice(i, 1);\n                }\n                else {\n                    event(...args);\n                    this.eventsOnce[eventName].splice(i, 1);\n                }\n            }\n        }\n        return this;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnQtZGlzcGF0Y2hlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NlcnZpY2VzL2V2ZW50LWRpc3BhdGNoZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFZQSxNQUFNLE9BQU8sZUFBZTtJQUNoQixNQUFNLENBQUMsU0FBUyxHQUE2QixFQUFFLENBQUM7SUFFbkQsTUFBTSxDQUFDLGFBQWE7UUFDekIsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEdBQUcsTUFBTTtRQUMxQyxNQUFNLE1BQU0sR0FBRyxlQUFlLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDWCxPQUFPLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQzVCO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxlQUFlO1FBQzNCLE9BQU8sZUFBZSxDQUFDLFNBQVMsQ0FBQztJQUNuQyxDQUFDO0lBRU0sTUFBTSxDQUFDLGFBQWEsQ0FBQyxTQUFTLEdBQUcsTUFBTTtRQUM1QyxNQUFNLFFBQVEsR0FBRyxlQUFlLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3RELFFBQVEsQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ3JCLFFBQVEsQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUFFTSxNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsR0FBRyxNQUFNO1FBQzdDLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDOUIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFF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","import { CoreModuleOptions } from \"../types/index.js\";\n\nexport class CoreService {\n  protected static _options: CoreModuleOptions = {};\n  protected static instance?: CoreService;\n\n  public static get options() {\n    return this._options;\n  }\n\n  protected constructor() {\n    /**/\n  }\n\n  public static getSingleton() {\n    if (this.instance) {\n      return this.instance;\n    }\n\n    throw new Error(\n      `Singleton of CoreService not defined, please call setSingleton first!`\n    );\n  }\n\n  public static setSingleton(options: CoreModuleOptions = {}) {\n    if (this.instance) {\n      throw new Error(`Singleton of CoreService already defined!`);\n    }\n    this._options = options;\n    this.instance = new this();\n    return this.instance;\n  }\n\n  public static hasInstance() {\n    return !!this.instance;\n  }\n}\n","import { EventDispatcher } from \"@ribajs/events\";\nimport { CoreService } from \"./core.service.js\";\nimport type { State } from \"@ribajs/history\";\nimport type {\n  ComponentLifecycleEventData,\n  ComponentLifecycleObject,\n  ComponentLifecycleStates,\n} from \"../types/index.js\";\n\n/**\n * Component lifecycle control service.\n * Useful to check if all current components are bound and ready.\n */\nexport class LifecycleService {\n  public events = EventDispatcher.getInstance(\"lifecycle\");\n  protected debug = false;\n  protected routerEvents = EventDispatcher.getInstance();\n  protected timeout: number | null = null;\n  protected allBound = false;\n  protected static instance: LifecycleService;\n\n  protected components: {\n    [name: string]: ComponentLifecycleObject;\n  } = {};\n\n  protected constructor() {\n    this.addEventListeners();\n    this.reset();\n    LifecycleService.instance = this;\n  }\n\n  public static getInstance() {\n    if (LifecycleService.instance) {\n      return LifecycleService.instance;\n    }\n    LifecycleService.instance = new LifecycleService();\n    return LifecycleService.instance;\n  }\n\n  protected getEmpty(): ComponentLifecycleObject {\n    return {\n      components: [],\n    };\n  }\n\n  protected addEventListeners() {\n    this.events.on(\n      \"Component:connected\",\n      (data: ComponentLifecycleEventData) => {\n        if (data.options.ignore) {\n          return;\n        }\n        this.resetTimeout();\n\n        this.components[data.tagName] =\n          this.components[data.tagName] || this.getEmpty();\n        this.components[data.tagName].components.push(data.component);\n      }\n    );\n\n    this.events.on(\n      \"Component:disconnected\",\n      (data: ComponentLifecycleEventData) => {\n        if (data.options.ignore) {\n          return;\n        }\n        this.resetTimeout();\n        this.checkStates();\n      }\n    );\n\n    this.events.on(\n      \"Component:afterBind\",\n      (data: ComponentLifecycleEventData) => {\n        if (data.options.ignore) {\n          return;\n        }\n        this.resetTimeout();\n        this.checkStates();\n      }\n    );\n\n    this.events.on(\n      \"Component:error\",\n      (error: Error, data: ComponentLifecycleEventData) => {\n        this.onError(error, data);\n      }\n    );\n\n    // Router\n\n    this.routerEvents.on(\n      \"newPageReady\",\n      (\n        viewId: string,\n        newStatus: State,\n        oldStatus: State,\n        container: HTMLElement,\n        containerHtml: string,\n        dataset: any,\n        firstPageLoad: boolean\n      ) => {\n        if (this.debug)\n          console.debug(\n            \"newPageReady\",\n            viewId,\n            newStatus,\n            oldStatus,\n            \"firstPageLoad\",\n            firstPageLoad\n          );\n        if (!firstPageLoad) {\n          this.reset();\n        }\n      }\n    );\n  }\n\n  protected getState(tagName: string) {\n    let connected = 0;\n    let bound = 0;\n\n    for (const component of this.components[tagName].components) {\n      if (component.connected) {\n        connected++;\n\n        if (component.bound) {\n          bound++;\n        }\n      }\n    }\n\n    return {\n      connected,\n      bound,\n    };\n  }\n\n  protected getStates() {\n    const states: {\n      [tagName: string]: ComponentLifecycleStates;\n    } = {};\n\n    for (const tagName in this.components) {\n      const state = this.getState(tagName);\n\n      states[tagName] = {\n        state,\n        components: this.components[tagName].components,\n      };\n    }\n\n    return states;\n  }\n\n  protected checkStates() {\n    let allBound = true;\n    const states = this.getStates();\n    for (const tagName in states) {\n      const state = states[tagName].state;\n      if (state.connected !== state.bound) {\n        allBound = false;\n        break;\n      }\n    }\n    if (allBound && !this.allBound) {\n      this.onAllBound();\n    }\n    this.allBound = allBound;\n    return {\n      states,\n      allBound,\n    };\n  }\n\n  protected onAllBound() {\n    this.clearTimeout();\n    this.events.trigger(\"ComponentLifecycle:allBound\", this.components);\n    if (this.debug) console.debug(\"[ComponentLifecycle] All components bound!\");\n  }\n\n  protected onError(error: Error, data: ComponentLifecycleEventData) {\n    this.clearTimeout();\n    console.error(\n      `The component \"${data.tagName}\" has caused an error:`,\n      error\n    );\n    this.events.trigger(\"ComponentLifecycle:error\", error, data);\n  }\n\n  protected onTimeout() {\n    this.clearTimeout();\n    const states = this.getStates();\n\n    let errorMessage =\n      \"[ComponentLifecycle] Timeout! {count} component(s) takes too long!\\nUnfinished components:\\n\";\n    let count = 0;\n    for (const tagName in states) {\n      const state = states[tagName].state;\n      if (state.connected !== state.bound) {\n        count++;\n        errorMessage += `${tagName}: connected: ${states[tagName].state.connected}, bound: ${states[tagName].state.bound}\\n`;\n      }\n    }\n\n    if (count <= 0) {\n      console.warn(\"No component found\");\n      this.events.trigger(\"ComponentLifecycle:noComponents\");\n      return;\n    }\n\n    errorMessage = errorMessage.replace(\"{count}\", count.toString());\n    this.events.trigger(\n      \"ComponentLifecycle:error\",\n      new Error(errorMessage),\n      {}\n    );\n  }\n\n  protected clearTimeout() {\n    if (this.timeout) {\n      window.clearTimeout(this.timeout);\n    }\n  }\n\n  protected resetTimeout() {\n    if (this.debug) console.debug(\"[ComponentLifecycle] reset timeout..\");\n    this.clearTimeout();\n    this.timeout = window.setTimeout(\n      this.onTimeout.bind(this),\n      CoreService.options.lifecycle?.timeout || 5000\n    );\n    return this.timeout;\n  }\n\n  protected reset() {\n    if (this.debug) console.debug(\"[ComponentLifecycle] reset!\");\n    this.allBound = false;\n    this.components = {};\n    this.resetTimeout();\n  }\n}\n","import { Components, ModuleElementType } from \"../types/index.js\";\nimport { Component } from \"../component/index.js\";\nimport { ModuleElementService } from \"./module-element.service.js\";\n\nexport class ComponentService extends ModuleElementService {\n  protected type: ModuleElementType = \"components\";\n\n  /**\n   *\n   * @param components\n   */\n  constructor(components: Components) {\n    super(components);\n  }\n\n  /**\n   * Regist a component with his name\n   */\n  public register(\n    component: typeof Component,\n    fallbackName?: string,\n    forceFallback = false\n  ): Components {\n    const name = forceFallback\n      ? fallbackName || component.tagName\n      : component.tagName || fallbackName;\n\n    if (!name) {\n      console.warn(new Error(\"Component name not found!\"), component);\n      return this.elements;\n    }\n\n    this.elements[name] = component;\n    return this.elements;\n  }\n}\n","import { Formatter, Formatters } from \"../types/index.js\";\nimport { ModuleElementService } from \"./module-element.service.js\";\n\nexport class FormatterService extends ModuleElementService {\n  protected type: \"binder\" | \"formatter\" | \"components\" | \"services\" =\n    \"formatter\";\n\n  /**\n   *\n   */\n  constructor(formatters: Formatters) {\n    super(formatters);\n  }\n\n  /**\n   * Regist a formatter with his name\n   */\n  public register(\n    formatter: Formatter,\n    fallbackName?: string,\n    forceFallback = false\n  ): Formatters {\n    const name = forceFallback\n      ? fallbackName || formatter.name\n      : formatter.name || fallbackName;\n\n    if (!name) {\n      throw new Error(\"Formatter name not found!\");\n    }\n\n    this.elements[name] = formatter;\n    return this.elements;\n  }\n}\n","import { extend, isJson } from \"@ribajs/utils/src/type.js\";\nimport { HttpMethod } from \"../types/http-method.js\";\nimport { HttpServiceOptions, HttpServiceResponse } from \"../types/index.js\";\n\nexport class HttpService {\n  /**\n   * Set header for each request\n   * @param name Header name\n   * @param value Header value\n   */\n  public static setRequestHeaderEachRequest(name: string, value: string) {\n    this._requestHeadersEachRequest.push({\n      name,\n      value,\n    });\n  }\n\n  /**\n   * Load JSON-encoded data from the server using a GET HTTP request.\n   * @param url A string containing the URL to which the request is sent.\n   * @param data A plain object or string that is sent to the server with the request.\n   * @see https://api.jquery.com/jquery.getjson/\n   */\n  public static async getJSON<T = any>(\n    url: string,\n    data?: any,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"GET\", data, \"json\", headers, options);\n  }\n\n  /**\n   * Load data from the server using a HTTP POST request.\n   * @param url A string containing the URL to which the request is sent.\n   * @param data A plain object or string that is sent to the server with the request.\n   * @param dataType The type of data expected from the server. Default: Intelligent Guess (xml, json, script, text, html).\n   * @see https://api.jquery.com/jquery.post/\n   */\n  public static async post<T = any>(\n    url: string,\n    data?: any,\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"POST\", data, dataType, headers, options);\n  }\n\n  public static async delete<T = any>(\n    url: string,\n    data?: any,\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"DELETE\", data, dataType, headers, options);\n  }\n\n  public static async put<T = any>(\n    url: string,\n    data?: any,\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"PUT\", data, dataType, headers, options);\n  }\n\n  /**\n   * Load data from the server using a HTTP GET request.\n   * @param url A string containing the URL to which the request is sent.\n   * @param data A plain object or string that is sent to the server with the request.\n   * @param dataType The type of data expected from the server. Default: Intelligent Guess (xml, json, script, text, html).\n   * @see https://api.jquery.com/jquery.get/\n   */\n  public static async get<T = any>(\n    url: string,\n    data?: any,\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ) {\n    return this.fetch<T>(url, \"GET\", data, dataType, headers, options);\n  }\n\n  /**\n   *\n   * @param dataType The type of data expected from the server. Default: Intelligent Guess (xml, json, script, text, html).\n   */\n  public static parseDataType(dataType: string) {\n    const headers: { \"Content-Type\"?: string; Accept?: string } = {};\n    let contentType = \"application/x-www-form-urlencoded\";\n    let accept = \"*/*\";\n    switch (dataType) {\n      case \"script\":\n        contentType = \"application/javascript\";\n        break;\n      case \"json\":\n        contentType = \"application/json\";\n        accept = \"application/json, text/javascript\";\n        break;\n      case \"xml\":\n        contentType = \"application/xml\";\n        accept = \"application/xml, text/xml\";\n        break;\n      case \"text\":\n        contentType = \"text/plain\";\n        accept = \"text/plain\";\n        break;\n      case \"html\":\n        contentType = \"text/html\";\n        accept = \"text/html\";\n        break;\n      case \"form\":\n        contentType = \"application/x-www-form-urlencoded\";\n        break;\n      // case \"multi-form\":\n      //   contentType = \"multipart/form-data\";\n      //   break;\n    }\n    if (contentType) {\n      headers[\"Content-Type\"] = contentType;\n      // tslint:disable-next-line:no-string-literal\n      headers[\"Accept\"] = accept;\n    }\n    return headers;\n  }\n\n  public static async fetch<T = any>(\n    url: string,\n    method: HttpMethod = \"GET\",\n    data: any = {},\n    dataType?: string,\n    headers: any = {},\n    options: HttpServiceOptions = {}\n  ): Promise<HttpServiceResponse<T>> {\n    if (!fetch) {\n      throw new Error(\n        \"Your browser does not support the fetch API, use xhr instead or install a polyfill.\"\n      );\n    }\n\n    let body;\n    // headers\n    for (const header of this._requestHeadersEachRequest) {\n      headers[header.name] = header.value;\n    }\n\n    if (dataType) {\n      headers = extend({ deep: false }, headers, this.parseDataType(dataType));\n    }\n\n    if (!options.crossDomain && !headers[\"X-Requested-With\"]) {\n      headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n    }\n\n    const cache = options.cache ? options.cache : \"default\";\n\n    if (method === \"GET\" && data) {\n      const queryStr = new URLSearchParams(data).toString();\n      if (queryStr) {\n        const separator = url.includes(\"?\") ? \"&\" : \"?\";\n        url = url + separator + new URLSearchParams(data).toString();\n      }\n    } else if (data) {\n      if (dataType === \"form\") {\n        body = new URLSearchParams(data);\n      } else {\n        body = JSON.stringify(data);\n      }\n    }\n    const response = await fetch(url, {\n      credentials: \"same-origin\",\n      cache,\n      method,\n      body,\n      headers,\n      mode: options.mode || \"cors\",\n    });\n\n    let bodyResult = (await response.text()) as unknown as T;\n    if (typeof bodyResult === \"string\" && isJson(bodyResult)) {\n      bodyResult = JSON.parse(bodyResult);\n    }\n\n    if (typeof bodyResult === \"string\") {\n      switch (bodyResult) {\n        case \"null\":\n          bodyResult = null as unknown as T;\n          break;\n        case \"true\":\n          bodyResult = true as unknown as T;\n          break;\n        case \"false\":\n          bodyResult = false as unknown as T;\n          break;\n        case \"undefined\":\n          bodyResult = undefined as unknown as T;\n          break;\n      }\n    }\n\n    const result: HttpServiceResponse<T> = {\n      status: response.status,\n      headers: response.headers,\n      ok: response.ok,\n      redirected: response.redirected,\n      statusText: response.statusText,\n      // trailer: response.trailer,\n      type: response.type,\n      url: response.url,\n      arrayBuffer: response.arrayBuffer,\n      blob: response.blob,\n      bodyUsed: response.bodyUsed,\n      clone: response.clone,\n      formData: response.formData,\n      text: response.text,\n      body: bodyResult,\n    };\n    return result;\n  }\n\n  /**\n   * Header name value pair to send on each request\n   */\n  protected static _requestHeadersEachRequest: {\n    name: string;\n    value: string;\n  }[] = [];\n}\n","import {\n  Adapter,\n  AdapterFunction,\n  Ref,\n  ObserverSyncCallback,\n  RVArray,\n} from \"../types/index.js\";\n\nexport class DotAdapter implements Adapter {\n  public static ARRAY_METHODS = [\n    \"push\",\n    \"pop\",\n    \"shift\",\n    \"unshift\",\n    \"sort\",\n    \"reverse\",\n    \"splice\",\n  ];\n\n  public name = \".\";\n\n  public counter = 0;\n  public weakmap: any = {};\n\n  public weakReference(obj: any) {\n    if (!Object.hasOwnProperty.bind(obj)(\"__rv\")) {\n      const id = this.counter++;\n\n      Object.defineProperty(obj, \"__rv\", {\n        value: id,\n      });\n    }\n\n    if (!this.weakmap[obj.__rv]) {\n      this.weakmap[obj.__rv] = {\n        callbacks: {},\n      };\n    }\n\n    return this.weakmap[obj.__rv];\n  }\n\n  public cleanupWeakReference(ref: Ref, id: number) {\n    if (!Object.keys(ref.callbacks).length) {\n      if (!(ref.pointers && Object.keys(ref.pointers).length)) {\n        delete this.weakmap[id];\n      }\n    }\n  }\n\n  public stubFunction(obj: any, fn: string) {\n    const original = obj[fn];\n    const map = this.weakReference(obj);\n    const weakmap = this.weakmap;\n\n    obj[fn] = (...args: any[]): AdapterFunction => {\n      const response = original.apply(obj, args);\n\n      Object.keys(map.pointers).forEach((r) => {\n        const k = map.pointers[r];\n\n        if (weakmap[r]) {\n          if (Array.isArray(weakmap[r].callbacks[k])) {\n            weakmap[r].callbacks[k].forEach(\n              (callback: ObserverSyncCallback) => {\n                callback.sync();\n              }\n            );\n          }\n        }\n      });\n\n      return response;\n    };\n  }\n\n  public observeMutations(obj: any, ref: string, keypath: string) {\n    if (Array.isArray(obj)) {\n      const map = this.weakReference(obj);\n\n      if (!map.pointers) {\n        map.pointers = {};\n\n        DotAdapter.ARRAY_METHODS.forEach((fn) => {\n          this.stubFunction(obj, fn);\n        });\n      }\n\n      if (!map.pointers[ref]) {\n        map.pointers[ref] = [];\n      }\n\n      if (map.pointers[ref].indexOf(keypath) === -1) {\n        map.pointers[ref].push(keypath);\n      }\n    }\n  }\n\n  public unobserveMutations(obj: RVArray, ref: string, keypath: string) {\n    if (Array.isArray(obj) && obj.__rv != null) {\n      const map = this.weakmap[obj.__rv];\n\n      if (map) {\n        const pointers = map.pointers[ref];\n\n        if (pointers) {\n          const idx = pointers.indexOf(keypath);\n\n          if (idx > -1) {\n            pointers.splice(idx, 1);\n          }\n\n          if (!pointers.length) {\n            delete map.pointers[ref];\n          }\n\n          this.cleanupWeakReference(map, obj.__rv);\n        }\n      }\n    }\n  }\n\n  public observe(obj: any, keypath: string, callback: ObserverSyncCallback) {\n    let value: any;\n\n    const callbacks = this.weakReference(obj).callbacks;\n\n    if (!callbacks[keypath]) {\n      callbacks[keypath] = [];\n      const desc = Object.getOwnPropertyDescriptor(obj, keypath);\n\n      if (!desc || !(desc.get || desc.set || !desc.configurable)) {\n        value = obj[keypath];\n\n        Object.defineProperty(obj, keypath, {\n          enumerable: true,\n\n          get: () => {\n            return value;\n          },\n\n          set: (newValue) => {\n            if (newValue !== value) {\n              this.unobserveMutations(value, obj.__rv, keypath);\n              value = newValue;\n              const map = this.weakmap[obj.__rv];\n\n              if (map) {\n                const _callbacks = map.callbacks[keypath];\n\n                if (_callbacks) {\n                  _callbacks.forEach((cb: ObserverSyncCallback) => {\n                    cb.sync();\n                  });\n                }\n\n                this.observeMutations(newValue, obj.__rv, keypath);\n              }\n            }\n          },\n        });\n      }\n    }\n\n    if (callbacks[keypath].indexOf(callback) === -1) {\n      callbacks[keypath].push(callback);\n    }\n\n    this.observeMutations(obj[keypath], obj.__rv, keypath);\n  }\n\n  public unobserve(obj: any, keypath: string, callback: ObserverSyncCallback) {\n    const map = this.weakmap[obj.__rv];\n\n    if (map) {\n      const callbacks = map.callbacks[keypath];\n\n      if (callbacks) {\n        const idx = callbacks.indexOf(callback);\n\n        if (idx > -1) {\n          callbacks.splice(idx, 1);\n\n          if (!callbacks.length) {\n            delete map.callbacks[keypath];\n            this.unobserveMutations(obj[keypath], obj.__rv, keypath);\n          }\n        }\n\n        this.cleanupWeakReference(map, obj.__rv);\n      }\n    }\n  }\n\n  public get(obj: any, keypath: string) {\n    return obj[keypath];\n  }\n\n  public set(obj: any, keypath: string, value: any) {\n    obj[keypath] = value;\n  }\n}\n\nconst dotAdapter = new DotAdapter();\nexport { dotAdapter };\n","export const FORMATTER_ARGS = /[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g;\nexport const FORMATTER_SPLIT = /\\s+/;\n","import { parseType, PRIMITIVE, KEYPATH } from \"@ribajs/utils\";\nimport { Observer } from \"./observer.js\";\nimport type {\n  FormatterObservers,\n  eventHandlerFunction,\n  ObserverSyncCallback,\n  Bindable,\n} from \"./types/index.js\";\nimport { FORMATTER_ARGS, FORMATTER_SPLIT } from \"./constants/formatter.js\";\nimport type { View } from \"./view.js\";\nimport { getInputValue } from \"@ribajs/utils/src/dom.js\";\n\n/**\n * A single binding between a model attribute and a DOM element.\n */\nexport abstract class Binder<T = any, E = HTMLUnknownElement>\n  implements Bindable<E>\n{\n  /**\n   * The name of the binder to access the binder by\n   */\n  static key = \"\";\n\n  /**\n   * Blocks the current node and child nodes from being parsed (used for iteration binding as well as the if/unless binders).\n   */\n  static block = false;\n\n  /**\n   * Key of the Binder\n   */\n  name: string;\n\n  /**\n   * Set this to true if you want view.publish() to call publish on these bindings.\n   */\n  publishes = false;\n  /**\n   * Priority of the binder, binders with higher priority are applied first\n   */\n  priority = 0;\n\n  /**\n   * The routine function is called when an observed attribute on the model changes and is used to update the DOM. When defining a one-way binder as a single function, it is actually the routine function that you're defining.\n   */\n  abstract routine(element: E, value: T): void;\n\n  /**\n   * This function will get called for this binding on the initial `view.bind()`. Use it to store some initial state on the binding, or to set up any event listeners on the element.\n   */\n  bind?(element: E): void;\n\n  /**\n   * This function will get called for this binding on `view.unbind()`. Use it to reset any state on the element that would have been changed from the routine getting called, or to unbind any event listeners on the element that you've set up in the `binder.bind` function.\n   */\n  unbind?(element: E): void;\n\n  /**\n   * Updates the binding's model from what is currently set on the view.\n   * Unbinds the old model first and then re-binds with the new model.\n   */\n  update?(model: any): void;\n\n  /**\n   * The getValue function is called when the binder wants to set the value on the model. This function takes the HTML element as only parameter\n   */\n  getValue?(element: E): void;\n\n  public value?: any;\n  public observer?: Observer;\n  public view: View;\n  public el: E;\n\n  /**\n   * Name of the binder without the prefix\n   */\n  public type: string | null;\n  public formatters: string[] | null;\n  public formatterObservers: FormatterObservers = {};\n  public keypath?: string;\n\n  /**\n   * Arguments parsed from star binders, e.g. on `foo-*-*` `args[0]` is the first star and `args[1]` the second\n   */\n  public args: Array<string | number>;\n\n  /**\n   *\n   */\n  public model?: any;\n\n  /**\n   * HTML Comment to mark a binding in the DOM\n   */\n  public marker?: Comment;\n\n  /**\n   * All information about the binding is passed into the constructor; the\n   * containing view, the DOM node, the type of binding, the model object and the\n   * keypath at which to listen for changes.\n   * @param view\n   * @param el\n   * @param type\n   * @param name\n   * @param keypath\n   * @param formatters\n   * @param identifier\n   */\n  constructor(\n    view: View,\n    el: E,\n    type: string | null,\n    name: string,\n    keypath: string | undefined,\n    formatters: string[] | null,\n    identifier: string | null\n  ) {\n    this.view = view;\n    this.el = el;\n    this.type = type;\n    this.name = name;\n    this.keypath = keypath;\n    this.formatters = formatters;\n    this.model = undefined;\n\n    if (identifier && type) {\n      this.args = this.getStarArguments(identifier, type);\n    } else {\n      this.args = new Array<string | number>();\n    }\n  }\n\n  /**\n   * Observes the model keypath\n   * @param model\n   * @param keypath\n   */\n  public observe(\n    model: any,\n    keypath: string,\n    callback: ObserverSyncCallback\n  ): Observer {\n    return new Observer(model, keypath, callback);\n  }\n\n  public parseTarget() {\n    if (this.keypath) {\n      const token = parseType(this.keypath, true);\n      if (token.type === PRIMITIVE) {\n        this.value = token.value;\n      } else if (token.type === KEYPATH) {\n        this.observer = this.observe(this.view.models, this.keypath, this);\n        this.model = this.observer.target;\n      } else {\n        throw new Error(`[${this.name}] Unknown type in token`);\n      }\n    } else {\n      this.value = undefined;\n    }\n  }\n\n  /**\n   * Get the iteration alias, used in the interaction binders like `each-*`\n   * @param {*} modelName\n   * @see https://github.com/mikeric/rivets/blob/master/dist/rivets.js#L26\n   * @see https://github.com/mikeric/rivets/blob/master/dist/rivets.js#L1175\n   */\n  public getIterationAlias(modelName: string) {\n    return \"%\" + modelName + \"%\";\n  }\n\n  public parseFormatterArguments(\n    args: string[],\n    formatterIndex: number\n  ): string[] {\n    return args\n      .map((arg) => parseType(arg, true))\n      .map(({ type, value }, ai) => {\n        if (type === PRIMITIVE) {\n          const primitiveValue = value;\n          return primitiveValue;\n        } else if (type === KEYPATH) {\n          // keypath is string\n          const keypath = value as string;\n          if (!this.formatterObservers[formatterIndex]) {\n            this.formatterObservers[formatterIndex] = {};\n          }\n\n          let observer = this.formatterObservers[formatterIndex][ai];\n\n          if (!observer) {\n            observer = this.observe(this.view.models, keypath, this);\n            this.formatterObservers[formatterIndex][ai] = observer;\n          }\n          return observer.value();\n        } else {\n          throw new Error(`[${this.name}] Unknown argument type`);\n        }\n      });\n  }\n\n  /**\n   * Applies all the current formatters to the supplied value and returns the\n   * formatted value.\n   */\n  public formattedValue(value: any, startIndex = 0): any {\n    if (this.formatters === null) {\n      throw new Error(`[${this.name} formatters is null`);\n    }\n\n    // If any intermediate result is a promise continue the chain (with startIndex set) after it is resolved.\n    let promised = false;\n    const formatters = startIndex\n      ? this.formatters.slice(startIndex)\n      : this.formatters;\n\n    return formatters.reduce(\n      (result: any, declaration: string, index: number) => {\n        if (promised) {\n          return result;\n        }\n\n        const args = declaration.match(FORMATTER_ARGS);\n        if (args === null) {\n          console.warn(\n            new Error(\n              `[${\n                this.name\n              }] No args matched with regex \"FORMATTER_ARGS\"!\\nvalue: ${JSON.stringify(\n                value\n              )}\\nresult: ${JSON.stringify(\n                result\n              )}\\ndeclaration: ${JSON.stringify(\n                declaration\n              )}\\nindex: ${index}\\n`\n            )\n          );\n          return result;\n        }\n        const id = args.shift();\n\n        if (!id) {\n          throw new Error(`[${this.name}] No formatter id found in args!`);\n        }\n\n        if (!this.view.options.formatters) {\n          throw new Error(`[${this.name}] No formatters are defined!`);\n        }\n\n        const formatter = this.view.options.formatters[id];\n\n        if (!formatter) {\n          throw new Error(\n            `[${this.name}] No formatters with id \"${id}\" found!`\n          );\n        }\n\n        const processedArgs = this.parseFormatterArguments(args, index);\n\n        // get formatter read funcion\n        if (formatter && typeof formatter.read === \"function\") {\n          result = formatter.read.apply(this.model, [result, ...processedArgs]);\n        }\n\n        // If result is a promise, and this is not the last formatter in the chain\n        if (\n          index < formatters.length - 1 &&\n          result &&\n          typeof result.then === \"function\" &&\n          typeof result.catch === \"function\"\n        ) {\n          promised = true;\n          return result.then((value: any) =>\n            this.formattedValue(value, index + 1)\n          );\n        }\n        return result;\n      },\n      value\n    );\n  }\n\n  /**\n   * Returns an event handler for the binding around the supplied function.\n   * This event Handler is mainly used by the on-* binder\n   * @param fn The function to call by the handler\n   * @param el The element the event was triggered from\n   */\n  public eventHandler(\n    fn: eventHandlerFunction,\n    el: HTMLElement\n  ): (ev: Event) => any {\n    const handler = this.view.options.handler;\n    return (ev) => {\n      if (!handler) {\n        throw new Error(\"No handler defined in binding.view.options.handler\");\n      }\n      handler.call(fn, this, ev, this, el);\n    };\n  }\n\n  /**\n   * Sets the value for the binding. This Basically just runs the binding routine\n   * with the supplied value formatted.\n   */\n  public set(value: any) {\n    try {\n      value = this.formattedValue(value);\n    } catch (error) {\n      console.error(error);\n      return value;\n    }\n\n    if (typeof this.routine === \"function\") {\n      // If value is a promise\n      if (\n        value &&\n        typeof value.then === \"function\" &&\n        typeof value.catch === \"function\"\n      ) {\n        value\n          .then((realValue: any) => {\n            this.routine(this.el, realValue);\n          })\n          .catch((error: Error) => {\n            console.error(error);\n          });\n      } else {\n        this.routine(this.el, value);\n      }\n    }\n  }\n\n  /**\n   * Syncs up the view binding with the model.\n   */\n  public sync() {\n    if (this.observer) {\n      this.model = this.observer.target;\n      this.set(this.observer.value());\n    } else {\n      this.set(this.value);\n    }\n  }\n\n  /**\n   * Publishes the value currently set on the input element (or any other which implements getValue) back to the model.\n   * An example of the use of this method are the following binders:\n   * - ElementBinder\n   * - ValueBinder\n   * - (Un)CheckedBinder\n   */\n  public publish() {\n    if (this.observer) {\n      if (this.formatters === null) {\n        throw new Error(\"formatters is null\");\n      }\n\n      const value = this.formatters.reduceRight(\n        (\n          result: any /*check type*/,\n          declaration: string /*check type*/,\n          index: number\n        ) => {\n          const args = declaration.split(FORMATTER_SPLIT);\n          const id = args.shift();\n          if (!id) {\n            throw new Error(\"id not defined\");\n          }\n\n          if (!this.view.options.formatters) {\n            return undefined;\n          }\n\n          const formatter = this.view.options.formatters[id];\n          const processedArgs = this.parseFormatterArguments(args, index);\n\n          if (formatter && typeof formatter.publish === \"function\") {\n            result = formatter.publish(result, ...processedArgs);\n          }\n          return result;\n        },\n        this._getValue(this.el)\n      );\n\n      this.observer.setValue(value);\n    }\n  }\n\n  /**\n   * Subscribes to the model for changes at the specified keypath. Bi-directional\n   * routines will also listen for changes on the element to propagate them back\n   * to the model.\n   */\n  public _bind() {\n    this.parseTarget();\n\n    if (this.bind) {\n      if (typeof this.bind !== \"function\") {\n        throw new Error(\"the method bind is not a function\");\n      }\n      this.bind(this.el);\n    }\n\n    if (this.view.options.preloadData) {\n      this.sync();\n    }\n  }\n\n  /**\n   * Unsubscribes from the model and the element.\n   */\n  public _unbind() {\n    if (this.unbind) {\n      this.unbind(this.el);\n    }\n\n    if (this.observer) {\n      this.observer.unobserve();\n    }\n\n    Object.keys(this.formatterObservers).forEach((fi) => {\n      const args = this.formatterObservers[fi];\n\n      Object.keys(args).forEach((ai) => {\n        args[ai].unobserve();\n      });\n    });\n\n    this.formatterObservers = {};\n  }\n\n  /**\n   * Updates the binding's model from what is currently set on the view. Unbinds\n   * the old model first and then re-binds with the new model.\n   * @param {any} models\n   */\n  public _update(models: any = {}) {\n    if (this.observer) {\n      this.model = this.observer.target;\n    }\n    if (typeof this.update === \"function\") {\n      this.update(models);\n    }\n  }\n\n  /**\n   * Returns elements value\n   * @param el\n   */\n  public _getValue(el: E) {\n    if (typeof this.getValue === \"function\") {\n      return this.getValue(el);\n    } else {\n      return getInputValue(el as any);\n    }\n  }\n\n  protected getStarArguments(identifier: string, type: string): string[] {\n    const regexp = this.view.binderRegex(identifier);\n    const match = type.match(regexp)?.slice(1) || [];\n    return match;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * animate-{class}\n * Add / remove animation class with start and done affix\n */\nexport class AnimateStarBinder extends Binder<boolean, HTMLUnknownElement> {\n  static key = \"animate-*\";\n  function = true;\n  priority = 1000;\n\n  bind(el: HTMLUnknownElement) {\n    const animateClassName = (this as any).args[0];\n    el.classList.add(animateClassName);\n  }\n\n  routine(el: HTMLUnknownElement, start: boolean) {\n    const animateClassName = (this as any).args[0];\n    if (start) {\n      el.classList.add(animateClassName + \"-start\");\n      el.classList.remove(animateClassName + \"-done\");\n    } else {\n      el.classList.remove(animateClassName + \"-start\");\n      el.classList.add(animateClassName + \"-done\");\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * add-class\n * Adds the value of the attribute to the class.\n * Instead of `class-[classname]` the classname is defined by the\n * attribute value and not by the star value.\n * @example\n * <ul>\n *   <li rv-each-todo=\"todos\">\n *     <div rv-add-class=\"todo.state\"></div>\n *   </li>\n * <ul>\n */\nexport class AddClassBinder extends Binder<string, HTMLElement> {\n  static key = \"add-class\";\n  function = true;\n  priority = 1000;\n  private staticClasses?: string[];\n\n  bind(el: HTMLElement | SVGElement) {\n    // Note: We use el.getAttribute(\"class\") instead of el.className here to also support svg elements\n    const className = el.getAttribute(\"class\") || \"\";\n    this.staticClasses = className.split(\" \");\n  }\n\n  unbind() {\n    delete this.staticClasses;\n  }\n\n  routine(el: HTMLElement, newValue: string) {\n    if (newValue) {\n      if (this.staticClasses?.indexOf(newValue) === -1) {\n        el.setAttribute(\"class\", this.staticClasses.join(\" \") + \" \" + newValue);\n      }\n    } else {\n      if (this.staticClasses) {\n        el.setAttribute(\"class\", this.staticClasses.join(\" \"));\n      }\n    }\n    const className = el.getAttribute(\"class\");\n    if (className) {\n      el.setAttribute(\"class\", className.trim());\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { camelCase } from \"@ribajs/utils/src/type.js\";\n\n/**\n * assign-*\n * Assign a value in your model.\n * Sets or overwrites a value by his property name (named whatever value is in place of [property]) in your model.\n * @example\n * <div rv-assign-new='\"hello\"'>{new}</div>\n */\nexport class AssignPropertyBinder extends Binder<any, HTMLUnknownElement> {\n  static key = \"assign-*\";\n  routine(el: HTMLUnknownElement, value: any) {\n    const propertyName = camelCase((this.args[0] as string).trim());\n    const obj: any = {};\n    obj[propertyName] = value;\n    this.view.models[propertyName] = value;\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport type { Assign } from \"../types/assign.js\";\nimport { extend } from \"@ribajs/utils/src/type.js\";\n\n/**\n * assign\n * Assign a value in your model.\n * The value you want to assign must be an object and will be concatenate with your model.\n * @example\n * <div rv-assign='{\"newValue\": \"hello\", \"anotherNewValue\": \"world\"}'>{newValue} {anotherNewValue}!</div>\n */\nexport class AssignBinder extends Binder<Assign, HTMLUnknownElement> {\n  static key = \"assign\";\n  routine(el: HTMLUnknownElement, value: any) {\n    if (typeof value === \"object\") {\n      return extend({ deep: false }, this.view.models, value);\n    }\n    console.warn(\"Value must be an object or propertyName is required\");\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { BinderAttributeChangedEvent } from \"../types/index.js\";\nimport { setAttribute } from \"@ribajs/utils\";\n\n/**\n * Sets the attribute on the element. If no binder above is matched it will fall\n * back to using this binder.\n */\nexport class AttributeBinder extends Binder<any, HTMLElement> {\n  static key = \"attr-*\";\n\n  routine(el: HTMLElement, newValue: any) {\n    if (!this.type) {\n      throw new Error(\"Can't set attribute of \" + this.type);\n    }\n\n    const {\n      newValue: newValueFormatted,\n      oldValue,\n      changed,\n    } = setAttribute(el, this.type, newValue);\n\n    // If this is a source element, the parent a video element and the attribute is the `src`, start loading the video\n    if (\n      this.type === \"src\" &&\n      (el as HTMLSourceElement).tagName.toUpperCase() === \"SOURCE\" &&\n      (\n        (el as HTMLSourceElement).parentElement as HTMLVideoElement\n      )?.tagName.toUpperCase() === \"VIDEO\"\n    ) {\n      ((el as HTMLSourceElement).parentElement as HTMLVideoElement).load();\n    }\n\n    if (changed) {\n      el.dispatchEvent(\n        new CustomEvent(\"binder-changed\", {\n          detail: { name: this.type, newValue: newValueFormatted, oldValue },\n        } as BinderAttributeChangedEvent)\n      );\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * block\n * Blocks the binding for the current element and his childs.\n * @note Please note that `<script></script>`, `<style type=\"text/css\"></style>`, `<template></template>` and `<code></code>` tags are blocked by default.\n * You can change this by setting the `blockNodeNames` option.\n * @example\n * <div rv-block=\"\">\n *  <!-- After binding you should see `{ value }` because the binding is blocked here -->\n *  { value }\n * </div>\n */\nexport class BlockBinder extends Binder<unknown> {\n  static key = \"block\";\n  static block = true;\n  routine() {\n    /**/\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { getInputValue } from \"@ribajs/utils/src/dom.js\";\nimport { getString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * checked\n * Checks a checkbox or radio input when the value is true. Also sets the model\n * property when the input is checked or unchecked (two-way binder).\n */\nexport class CheckedBinder extends Binder<string | boolean, HTMLInputElement> {\n  static key = \"checked\";\n  publishes = true;\n  priority = 2000;\n\n  onChange = this.publish.bind(this);\n\n  bind(el: HTMLInputElement) {\n    el.addEventListener(\"change\", this.onChange);\n  }\n\n  unbind(el: HTMLInputElement) {\n    el.removeEventListener(\"change\", this.onChange);\n  }\n\n  routine(el: HTMLInputElement, newValue: string | boolean) {\n    let oldValue;\n    if (!this._getValue) {\n      console.warn(\"this._getValue is not a function, this: \", this);\n      oldValue = getInputValue(el);\n    } else {\n      oldValue = this._getValue(el);\n    }\n    if (el.type === \"radio\") {\n      el.checked = getString(oldValue) === getString(newValue);\n    } else {\n      if (oldValue !== newValue) {\n        el.checked = !!newValue;\n      }\n    }\n  }\n\n  getValue(el: HTMLInputElement) {\n    return getInputValue(el);\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * class-*\n * class-[classname]\n *\n * Adds a class (whatever value is in place of [classname]) on the element\n * when the value evaluates to true and removes that class if the value\n * evaluates to false.\n * @example\n * <li rv-class-completed=\"todo.done\">{ todo.name }</li>\n */\nexport class ClassStarBinder extends Binder<boolean, HTMLElement | SVGElement> {\n  static key = \"class-*\";\n  routine(el: HTMLElement | SVGElement, value: boolean) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    // Note: We use el.getAttribute(\"class\") instead of el.className here to also support svg elements\n    const className = el.getAttribute(\"class\") || \"\";\n    const classList = className.split(\" \").filter((ele: string) => ele !== \"\");\n    const arg = (this.args[0] as string).trim();\n    const idx = classList.indexOf(arg);\n    if (idx === -1) {\n      if (value) {\n        el.setAttribute(\"class\", `${className} ${arg}`);\n      }\n    } else if (!value) {\n      el.setAttribute(\"class\", classList.filter((_, i) => i !== idx).join(\" \"));\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { BasicComponent } from \"../component/basic-component.js\";\nimport type { Observer } from \"../observer.js\";\nimport { isCustomElement, waitForCustomElement } from \"@ribajs/utils\";\n\nconst NO_RIBA_COMPONENT_ERROR_MESSAGE =\n  '[componentAttributeBinder] You can only use the \"rv-co-*\" binder on Riba components, but \"{tagName}\" is not registered.';\n\n/**\n * co-*\n * Pass a riba model / scope value to your component without first converting it as an attribute\n */\nexport class ComponentAttributeBinder extends Binder<any, BasicComponent> {\n  static key = \"co-*\";\n  publishes = true;\n\n  protected componentAttributeObserver?: Observer;\n  protected attributeName?: string;\n\n  protected __routine(el: BasicComponent, value: any) {\n    const attrName = (this.args[0] as string).trim();\n    if (el.setBinderAttribute) {\n      el.setBinderAttribute(attrName, value);\n    } else {\n      console.warn(\n        NO_RIBA_COMPONENT_ERROR_MESSAGE.replace(\"{tagName}\", el.tagName),\n        el\n      );\n    }\n  }\n\n  async routine(el: BasicComponent, value: any) {\n    if (isCustomElement(el, true, true)) {\n      this.__routine(el, value);\n    } else if (isCustomElement(el, true)) {\n      await waitForCustomElement(el);\n      this.__routine(el, value);\n    } else {\n      console.warn(\n        NO_RIBA_COMPONENT_ERROR_MESSAGE.replace(\"{tagName}\", el.tagName),\n        el\n      );\n    }\n  }\n\n  protected __bind(el: BasicComponent) {\n    this.attributeName = this.args[0].toString().trim();\n    if (typeof el.observeAttribute !== \"function\") {\n      console.warn(\n        NO_RIBA_COMPONENT_ERROR_MESSAGE.replace(\"{tagName}\", el.tagName),\n        el\n      );\n      return;\n    }\n    this.componentAttributeObserver = el.observeAttribute(this.attributeName, {\n      sync: () => {\n        this.publish();\n      },\n    });\n  }\n\n  async bind(el: BasicComponent) {\n    if (isCustomElement(el, true, true)) {\n      this.__bind(el);\n    } else if (isCustomElement(el, true)) {\n      await waitForCustomElement(el);\n      this.__bind(el);\n    } else {\n      console.warn(\n        NO_RIBA_COMPONENT_ERROR_MESSAGE.replace(\"{tagName}\", el.tagName),\n        el\n      );\n    }\n  }\n\n  unbind() {\n    this.componentAttributeObserver?.unobserve();\n  }\n\n  getValue(el: BasicComponent) {\n    const attrName = (this.args[0] as string).trim();\n    const val = el.getBinderAttribute(attrName);\n    return val;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Disables the element when value is true (negated version of `enabled` binder).\n */\nexport class DisabledBinder extends Binder<\n  boolean,\n  HTMLButtonElement | HTMLInputElement\n> {\n  static key = \"disabled\";\n  routine(el: HTMLButtonElement | HTMLInputElement, value: boolean) {\n    el.disabled = !!value;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * This binder can be used to disable (or enable) dragging ghost image for browser which have no support for the css feature `user-select: none;` like firefox.\n * This binder is useful in combination with the `scrollbar-draggable` binder.\n */\nexport class NoDragBinder extends Binder<boolean, HTMLElement> {\n  static key = \"draggable\";\n\n  enable = false;\n\n  _onDrag(event: Event) {\n    if (!this.enable) {\n      // Ignore event is draggable is disabled\n      event.preventDefault();\n    }\n  }\n\n  onDrag = this._onDrag.bind(this);\n\n  /** This method is called every time the attribute values changes */\n  routine(el: HTMLElement, enable: boolean) {\n    this.enable = enable;\n    el.setAttribute(\"draggable\", enable ? \"true\" : \"false\");\n  }\n\n  /** This method is called as soon as Riba bounds this binder */\n  bind(el: HTMLElement) {\n    el.addEventListener(\"dragstart\", this.onDrag, true);\n  }\n\n  /** This method is called as soon as Riba unbound this binder */\n  unbind(el: HTMLElement) {\n    el.removeAttribute(\"draggable\");\n    el.removeEventListener(\"dragstart\", this.onDrag, true);\n  }\n}\n","import { DataElement } from \"../types/index.js\";\nimport { Binder } from \"../binder.js\";\n\nexport class MustacheTextBinder extends Binder<string, DataElement> {\n  static key = \"mustache-text\";\n  routine(node: DataElement, value: string) {\n    node.data = value != null ? value : \"\";\n  }\n}\n","export const TEXT = 0;\nexport const BINDING = 1;\n\nexport const DECLARATION_SPLIT =\n  /((?:'[^']*')*(?:(?:[^|']*(?:'[^']*')+[^|']*)+|[^|]+))|^$/g;\n","import { Tokens } from \"./types/index.js\";\nimport { BINDING, TEXT } from \"./constants/parser.js\";\n\n/**\n * Template parser and tokenizer for {{ mustache-style }} text content bindings.\n * Parses the template and returns a set of tokens, separating static portions\n * of text from binding declarations.\n * @param template\n * @param delimiters\n */\nexport function parseTemplate(template: string, delimiters: string[]) {\n  let tokens: Tokens[] | null = null;\n  const length = template.length;\n  let index = 0;\n  let lastIndex = 0;\n  const open = delimiters[0];\n  const close = delimiters[1];\n\n  while (lastIndex < length) {\n    index = template.indexOf(open, lastIndex);\n\n    if (index < 0) {\n      if (tokens) {\n        tokens.push({\n          type: TEXT,\n          value: template.slice(lastIndex),\n        });\n      }\n\n      break;\n    } else {\n      tokens = tokens || [];\n      if (index > 0 && lastIndex < index) {\n        tokens.push({\n          type: TEXT,\n          value: template.slice(lastIndex, index),\n        });\n      }\n\n      lastIndex = index + open.length;\n      index = template.indexOf(close, lastIndex);\n\n      if (index < 0) {\n        const substring = template.slice(lastIndex - open.length);\n        const lastToken = tokens[tokens.length - 1];\n\n        if (lastToken && lastToken.type === TEXT) {\n          lastToken.value += substring;\n        } else {\n          tokens.push({\n            type: TEXT,\n            value: substring,\n          });\n        }\n\n        break;\n      }\n\n      const value = template.slice(lastIndex, index).trim();\n\n      tokens.push({\n        type: BINDING,\n        value,\n      });\n\n      lastIndex = index + close.length;\n    }\n  }\n\n  return tokens;\n}\n","import { DataElement } from \"./types/index.js\";\nimport { MustacheTextBinder } from \"./binders/mustache-text.binder.js\";\nimport { View } from \"./view.js\";\nimport { BINDING } from \"./constants/parser.js\";\nimport { parseTemplate } from \"./parse-template.js\";\n\nexport function parseNode(\n  view: View,\n  node: DataElement,\n  templateDelimiters: Array<string>\n) {\n  /** If true stop / block the parseNode  recursion */\n  let blockRecursion = false;\n\n  node = node as DataElement;\n  if (node.nodeType === Node.TEXT_NODE) {\n    let tokens = null;\n\n    if (node.data) {\n      tokens = parseTemplate(node.data, templateDelimiters);\n    }\n\n    if (tokens && tokens.length) {\n      for (let i = 0; i < tokens.length; i++) {\n        const token = tokens[i];\n        const text = document.createTextNode(token.value);\n        if (node.parentNode && text && node) {\n          node.parentNode.insertBefore(text, node);\n        }\n        if (token.type === BINDING) {\n          // TODO fix circular dependency\n          view.buildBinding(text, null, token.value, MustacheTextBinder, null);\n        }\n      }\n      if (node.parentNode) {\n        node.parentNode.removeChild(node);\n      }\n    }\n    blockRecursion = true;\n  } else if (node.nodeType === Node.ELEMENT_NODE) {\n    // traverse binds attributes and components\n    blockRecursion = view.traverse(node);\n  }\n  if (!blockRecursion) {\n    if (node.childNodes && node.childNodes.length > 0) {\n      for (let i = 0; i < node.childNodes.length; i++) {\n        const childNode = node.childNodes[i];\n        if (childNode) {\n          parseNode(view, childNode as DataElement, templateDelimiters);\n        }\n      }\n    }\n  }\n}\n","import { ParsedDeclarations } from \"./types/index.js\";\nimport { DECLARATION_SPLIT } from \"./constants/parser.js\";\n\n/**\n * Parses an attribute argument to his keypath and splits the formatter names into a pipes array.\n * @param declaration e.g. `object.data | validate | json`\n *\n * if declaration is\n * ```\n * object.data | validate | json`\n * ``\n *\n * the result is\n * ```\n * {\n *    keypath: \"object.data\",\n *    pipes: [\"validate\", \"json\"]\n * }\n * ```\n */\nexport function parseDeclaration(declaration: string): ParsedDeclarations {\n  const matches = declaration.match(DECLARATION_SPLIT);\n  if (matches === null) {\n    throw new Error(\"[View] No matches\");\n  }\n  const pipes = matches.map((str: string) => {\n    return str.trim();\n  });\n  const keypath = pipes.shift() || undefined;\n\n  return {\n    keypath,\n    pipes,\n  } as ParsedDeclarations;\n}\n","import {\n  Options,\n  BindableElement,\n  ClassOfBinder,\n  ClassOfComponent,\n  DataElement,\n} from \"./types/index.js\";\nimport { parseNode } from \"./parse-node.js\";\nimport { parseDeclaration } from \"./parse-declaration.js\";\nimport { BasicComponent, Component } from \"./component/index.js\";\nimport { isCustomElement } from \"@ribajs/utils\";\nimport { Binder } from \"./binder.js\";\n\n/**\n * Sets the attribute on the element. If no binder is matched it will fall\n * back to using this binder.\n */\nimport { AttributeBinder } from \"./binders/attribute.binder.js\";\n\n/**\n * A collection of bindings built from a set of parent nodes.\n */\nexport class View {\n  /** Global root scope */\n  public static $rootScope: any = {};\n\n  public static bindingComparator = (a: Binder, b: Binder) => {\n    const aPriority = a.priority || 0;\n    const bPriority = b.priority || 0;\n    return bPriority - aPriority;\n  };\n\n  /**\n   * Helper function to create a new view inside of a binding\n   * @param binding\n   * @param models\n   * @param anchorEl\n   */\n  public static create(\n    binder: Binder,\n    models: any,\n    anchorEl: HTMLElement | Node | null\n  ) {\n    const template = binder.el.cloneNode(true);\n    const view = new View(template, models, binder.view.options);\n    view.bind();\n    if (!binder?.marker?.parentNode) {\n      console.warn(\"[View]: No parent node for binding!\");\n    } else {\n      binder.marker.parentNode.insertBefore(template, anchorEl);\n    }\n    return view;\n  }\n\n  public els: HTMLCollection | HTMLElement[] | Node[];\n  public models: any;\n  public options: Options;\n  public bindings: Array<Binder> = [];\n  public webComponents: Array<Component | BasicComponent> = [];\n  // public componentView: View | null = null;\n\n  /**\n   * The DOM elements and the model objects for binding are passed into the\n   * constructor along with any local options that should be used throughout the\n   * context of the view and it's bindings.\n   * @param els\n   * @param models\n   * @param options\n   */\n  constructor(\n    els:\n      | HTMLCollection\n      | HTMLElement\n      | Node\n      | NodeListOf<ChildNode>\n      | HTMLUnknownElement[],\n    models: any,\n    options: Options\n  ) {\n    if (Array.isArray(els)) {\n      this.els = els;\n    } else {\n      this.els = [els] as HTMLElement[] | Node[];\n    }\n\n    this.models = models;\n\n    // If $root property exists in model merge this with the global root scope / model\n    if (this.models.$root) {\n      for (const key of Object.keys(this.models.$root)) {\n        View.$rootScope[key] = this.models.$root[key];\n      }\n    }\n\n    this.models.$root = View.$rootScope;\n\n    this.options = options;\n\n    this.build();\n  }\n\n  /**\n   * Binds all of the current bindings for this view.\n   */\n  public bind() {\n    this.bindings.forEach((binding) => {\n      binding._bind();\n    });\n  }\n\n  /**\n   * Unbinds all of the current bindings for this view.\n   */\n  public unbind() {\n    if (Array.isArray(this.bindings)) {\n      this.bindings.forEach((binding) => {\n        binding._unbind();\n        if (typeof binding.el && this.options.removeBinderAttributes) {\n          // TODO reset attribute ?\n          // binding.el.setAttribute(attribute.name);\n        }\n      });\n    }\n\n    // TODO fallback to unbind web components\n    if (Array.isArray(this.webComponents)) {\n      this.webComponents.forEach((webComponent) => {\n        if (typeof (webComponent as Component).unbind === \"function\") {\n          (webComponent as Component).unbind();\n        }\n      });\n    }\n  }\n\n  /**\n   * Syncs up the view with the model by running the routines on all bindings.\n   */\n  public sync() {\n    this.bindings.forEach((binding) => {\n      if (binding.sync) {\n        binding.sync();\n      }\n    });\n  }\n\n  /**\n   * Publishes the input values from the view back to the model (reverse sync).\n   */\n  public publish() {\n    this.bindings.forEach((binder) => {\n      if (binder.publishes && binder.publish) {\n        binder.publish();\n      }\n    });\n  }\n\n  /**\n   * Updates the view's models along with any affected bindings.\n   * @param models\n   */\n  public update(models: any = {}) {\n    Object.keys(models).forEach((key) => {\n      this.models[key] = models[key];\n    });\n\n    for (const binding of this.bindings) {\n      if (binding._update) {\n        binding._update(models);\n      }\n    }\n  }\n\n  /**\n   * Parses the DOM tree and builds `Binding` instances for every matched\n   * binding declaration.\n   */\n  public build() {\n    this.bindings = []; // this.bindings || [];\n\n    if (!this.options.templateDelimiters) {\n      throw new Error(\"templateDelimiters required\");\n    }\n\n    const elements = this.els;\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element) {\n        parseNode(\n          this,\n          element as DataElement,\n          this.options.templateDelimiters\n        );\n      }\n    }\n\n    this.bindings.sort(View.bindingComparator);\n  }\n\n  protected startsWithPrefix(name: string) {\n    const bindingFullPrefixes = this.options.fullPrefix;\n    if (!bindingFullPrefixes) {\n      throw new Error(\"prefix is required\");\n    }\n\n    for (const fullPrefix of bindingFullPrefixes) {\n      if (name.startsWith(fullPrefix)) {\n        return fullPrefix;\n      }\n    }\n\n    return undefined;\n  }\n\n  public binderRegex(identifier: string) {\n    const wildcards = identifier.match(/\\*/g)?.length || 0;\n    let regexp: RegExp;\n    if (wildcards > 1) {\n      regexp = new RegExp(\n        `^${identifier.replace(\"*\", \"([^-]*)\").replaceAll(\"-*\", \"-(.+)\")}$`\n      );\n    } else {\n      regexp = new RegExp(`^${identifier.replaceAll(\"*\", \"(.+)\")}$`);\n    }\n    return regexp;\n  }\n\n  /**\n   *\n   */\n  private bindBinders(\n    attributes: NamedNodeMap,\n    node: BindableElement,\n    attributeBinders = this.options.attributeBinders\n  ) {\n    let block = false;\n    if (!this.options.binders) {\n      return block;\n    }\n    const bindInfos = [];\n    for (let i = 0, len = attributes.length; i < len; i++) {\n      let nodeName = \"\";\n      let Binder: ClassOfBinder | null = null;\n      const attribute = attributes[i];\n      // if attribute starts with the binding prefix. E.g. rv-\n      const startingPrefix = this.startsWithPrefix(attribute.name);\n      if (startingPrefix) {\n        let identifier = \"\";\n        nodeName = attribute.name.slice(startingPrefix.length);\n\n        // if binder is not a attributeBinder binder should be set\n        if (this.options.binders[nodeName]) {\n          Binder = this.options.binders[nodeName];\n        }\n\n        if (Binder === null) {\n          // seems to be a star binder\n          // Check if any attributeBinder match's\n          for (let k = 0; k < attributeBinders.length; k++) {\n            identifier = attributeBinders[k];\n            const regexp = this.binderRegex(identifier);\n            if (regexp.test(nodeName)) {\n              Binder = this.options.binders[identifier];\n              break;\n            }\n          }\n        }\n\n        if (Binder === null) {\n          if (this.options.binders[\"*\"]) {\n            Binder = this.options.binders[\"*\"];\n            identifier = \"*\";\n          } else {\n            Binder = AttributeBinder;\n          }\n        }\n        // if block is set, do not bind its child's (this means the binder bound it by itself)\n        // and build binding directly (do not push it to bindInfos array)\n        if (Binder.block) {\n          this.buildBinding(\n            node,\n            nodeName,\n            attribute.value,\n            Binder,\n            identifier\n          );\n          if (node.removeAttribute && this.options.removeBinderAttributes) {\n            node.removeAttribute(attribute.name);\n          }\n          block = true;\n          return block;\n        }\n\n        bindInfos.push({ attr: attribute, Binder, nodeName, identifier });\n      }\n    }\n\n    for (let i = 0; i < bindInfos.length; i++) {\n      const bindInfo = bindInfos[i];\n      this.buildBinding(\n        node,\n        bindInfo.nodeName,\n        bindInfo.attr.value,\n        bindInfo.Binder,\n        bindInfo.identifier\n      );\n      if (node.removeAttribute && this.options.removeBinderAttributes) {\n        node.removeAttribute(bindInfo.attr.name);\n      }\n    }\n    return block;\n  }\n\n  private bindComponent(node: BindableElement) {\n    let block = false;\n    if (!this.options.components) {\n      return block;\n    }\n\n    const nodeName = node.nodeName.toLowerCase();\n    const COMPONENT = this.options.components[nodeName];\n    if (COMPONENT) {\n      // this.registComponentWithFallback(node, COMPONENT, nodeName);\n      this.registerComponent(COMPONENT, nodeName);\n      block = true;\n    }\n    // Also block unknown custom elements except page components\n    else if (\n      this.options.blockUnknownCustomElements &&\n      isCustomElement(node) &&\n      !nodeName.endsWith(\"-page\")\n    ) {\n      block = true;\n    }\n    return block;\n  }\n\n  public traverse(node: BindableElement): boolean {\n    /** If true stop / block the parseNode recursion */\n    let block = this.options.blockNodeNames.includes(node.nodeName);\n    if (block) {\n      return block;\n    }\n    const attributes = node.attributes;\n\n    // bind attribute binders if available\n    if (attributes && this.options.binders) {\n      block = this.bindBinders(attributes, node);\n      if (block) {\n        return block;\n      }\n    }\n\n    // bind components\n    if (!block && !node._bound && this.options.components) {\n      block = this.bindComponent(node);\n    }\n    return block;\n  }\n\n  public buildBinding(\n    node: HTMLUnknownElement | Text,\n    type: string | null,\n    declaration: string,\n    Binder: ClassOfBinder,\n    identifier: string | null\n  ) {\n    const parsedDeclaration = parseDeclaration(declaration);\n    const keypath = parsedDeclaration.keypath;\n    const pipes = parsedDeclaration.pipes;\n    this.bindings.push(\n      new Binder(this, node, type, Binder.key, keypath, pipes, identifier)\n    );\n  }\n\n  /**\n   * Regist all components\n   * This can sometimes be useful so that the browser automatically recognizes whether a component is inserted into the dom.\n   * However, the components are already registered when they are found by riba in the DOM.\n   *\n   * Please note, this method does not support the browser fallback for browsers that cannot use custom elements.\n   */\n  public registerComponents() {\n    for (const nodeName in this.options.components) {\n      if (this.options.components[nodeName]) {\n        // Not already registered?\n        if (!customElements.get(nodeName)) {\n          const COMPONENT = this.options.components[nodeName];\n          this.registerComponent(COMPONENT, nodeName);\n        }\n      }\n    }\n  }\n\n  /**\n   * Register a custom element using the native customElements feature.\n   * @param COMPONENT\n   * @param nodeName\n   */\n  public registerComponent(COMPONENT: ClassOfComponent, nodeName?: string) {\n    if (!customElements) {\n      console.error(\"customElements not supported by your browser!\");\n      throw new Error(\"customElements not supported by your browser!\");\n    }\n\n    const resolveNodeName = nodeName || COMPONENT.tagName;\n    if (!customElements.get(resolveNodeName)) {\n      customElements.define(COMPONENT.tagName, COMPONENT);\n    }\n  }\n}\n","import { Bindable } from \"../types/index.js\";\nimport { View } from \"../view.js\";\nimport { Binder } from \"../binder.js\";\nimport { times, camelCase } from \"@ribajs/utils\";\n\n/**\n * each-*\n * Appends bound instances of the element in place for each item in the array.\n */\nexport class EachStarBinder extends Binder<any[], HTMLElement> {\n  static key = \"each-*\";\n  static block = true;\n  priority = 4000;\n\n  iterated: View[] = [];\n\n  bind(el: HTMLElement) {\n    if (!this.marker) {\n      this.marker = window?.document?.createComment(` riba: ${this.type} `);\n      if (!el.parentNode?.insertBefore || !this.marker) {\n        // console.warn('No parent node!');\n      } else {\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      }\n    } else {\n      this.iterated.forEach((view: View) => {\n        view.bind();\n      });\n    }\n  }\n\n  unbind() {\n    if (this.iterated) {\n      this.iterated.forEach((view: View) => {\n        view.unbind();\n      });\n    }\n  }\n\n  routine(el: HTMLElement, collection: any[]) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    let isObject = false;\n    const modelName = camelCase(this.args[0].toString());\n    collection = collection || [];\n\n    // Transform object to array to iterate over\n    if (\n      !Array.isArray(collection) &&\n      typeof collection === \"object\" &&\n      collection !== null\n    ) {\n      collection = Object.entries(collection).map(([key, value]) => {\n        return { key, value };\n      });\n      isObject = true;\n    }\n\n    if (!Array.isArray(collection)) {\n      throw new Error(\n        `each-${\n          this.args[0]\n        } needs an array or object to iterate over, but it is ${typeof collection}`\n      );\n    }\n\n    // if index name is set by `index-property` use this name, otherwise `%[modelName]%`\n    const indexProp =\n      el.getAttribute(\"index-property\") || this.getIterationAlias(modelName);\n\n    collection.forEach((model, index) => {\n      const scope: any = { $parent: this.view.models };\n      // Is object transformed to array\n      if (isObject) {\n        scope[indexProp] = model.key;\n        scope[modelName] = model.value;\n      }\n      // Is Array\n      else {\n        scope[indexProp] = index;\n        scope[modelName] = model;\n      }\n\n      let view = this.iterated[index];\n\n      if (!view) {\n        let previous: HTMLElement | Element | Node | undefined;\n\n        if (this.iterated.length) {\n          previous = this.iterated[this.iterated.length - 1].els[0];\n        } else if (this.marker) {\n          previous = this.marker;\n        }\n\n        if (!previous) {\n          return;\n        }\n        view = View.create(this, scope, previous.nextSibling);\n        this.iterated.push(view);\n      } else {\n        if (view.models[modelName] !== model) {\n          // search for a view that matches the model\n          let matchIndex;\n          let nextView: View = this.iterated[index];\n          for (\n            let nextIndex = index + 1;\n            nextIndex < this.iterated.length;\n            nextIndex++\n          ) {\n            nextView = this.iterated[nextIndex];\n            if (nextView.models[modelName] === model) {\n              matchIndex = nextIndex;\n              break;\n            }\n          }\n          if (matchIndex !== undefined) {\n            // model is in other position\n            // TODO: consider avoiding the splice here by setting a flag\n            // profile performance before implementing such change\n            this.iterated.splice(matchIndex, 1);\n            if (!this.marker || !this.marker.parentNode?.insertBefore) {\n              throw new Error(\"Marker has no parent node\");\n            }\n            if (nextView && nextView.els[0] && view.els[0]) {\n              this.marker.parentNode.insertBefore(nextView.els[0], view.els[0]);\n            }\n\n            nextView.models[indexProp] = index;\n          } else {\n            // new model\n            nextView = View.create(this, scope, view.els[0]);\n          }\n          this.iterated.splice(index, 0, nextView);\n        } else {\n          view.models[indexProp] = index;\n        }\n      }\n    });\n\n    if (this.iterated.length > collection.length) {\n      times(this.iterated.length - collection.length, () => {\n        const view = this.iterated.pop();\n        if (!view) {\n          throw new Error(\"view is undefined!\");\n        }\n        view.unbind();\n        if (!this.marker || !this.marker.parentNode) {\n          throw new Error(\"Marker has no parent node\");\n        }\n        this.marker.parentNode.removeChild(view.els[0]);\n      });\n    }\n\n    if (el.nodeName === \"OPTION\" && this.view.bindings) {\n      this.view.bindings.forEach((binding: Bindable) => {\n        if (\n          this.marker &&\n          binding.el === this.marker.parentNode &&\n          binding.type === \"value\" &&\n          binding.sync\n        ) {\n          binding.sync();\n        }\n      });\n    }\n  }\n\n  update(models: any) {\n    const data: any = {};\n    // TODO: add test and fix if necessary\n    Object.keys(models).forEach((key) => {\n      if (this.args === null) {\n        throw new Error(\"args is null\");\n      }\n      if (key !== this.args[0]) {\n        data[key] = models[key];\n      }\n    });\n\n    this.iterated.forEach((view: View) => {\n      view.update(data);\n    });\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Sets a reference to the HTML element into the scope\n */\nexport class ElementBinder extends Binder<HTMLElement, HTMLElement> {\n  static key = \"element\";\n  publishes = true;\n\n  bind() {\n    this.publish();\n  }\n\n  routine() {\n    //\n  }\n\n  getValue(el: HTMLElement) {\n    return el;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Enables the element when value is true.\n */\nexport class EnabledBinder extends Binder<\n  boolean,\n  HTMLButtonElement | HTMLInputElement\n> {\n  static key = \"enabled\";\n  routine(el: HTMLButtonElement | HTMLInputElement, value: boolean) {\n    el.disabled = !value;\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * sort-childs using flex order\n */\nexport class FlexSortChildsBinder extends Binder<boolean, HTMLElement> {\n  static key = \"flex-sort-childs\";\n  priority = 90000;\n\n  routine(el: HTMLElement, descending: boolean) {\n    const childrens = Array.from(el.children) as HTMLElement[];\n    childrens.sort((a, b) => {\n      if (!a.dataset.sortBy || !b.dataset.sortBy) {\n        return 0;\n      }\n      if (a.dataset.sortBy < b.dataset.sortBy) {\n        return descending ? 1 : -1;\n      }\n      if (a.dataset.sortBy > b.dataset.sortBy) {\n        return descending ? -1 : 1;\n      }\n      return 0;\n    });\n    for (let i = 0; i < childrens.length; i++) {\n      const child = childrens[i];\n      child.style.order = i.toString();\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Hides the element when value is true (negated version of `show` binder).\n */\nexport class HideBinder extends Binder<boolean, HTMLElement> {\n  static key = \"hide\";\n  routine(el: HTMLElement, value: boolean) {\n    el.style.display = value ? \"none\" : \"\";\n    if (value) {\n      el.setAttribute(\"hidden\", \"true\");\n    } else {\n      el.removeAttribute(\"hidden\");\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Sets the element's text value.\n */\nexport class HtmlBinder extends Binder<number | string | boolean, HTMLElement> {\n  static key = \"html\";\n  routine(el: HTMLElement, value: number | string | boolean) {\n    if (typeof value !== \"string\") {\n      if (value === undefined || value === null) {\n        value = \"\";\n      } else if (typeof value?.toString === \"function\") {\n        value = value.toString();\n      } else {\n        console.warn(\"[HtmlBinder] Value is not a string\", value);\n        value = JSON.stringify(value);\n      }\n    }\n\n    el.innerHTML = value || \"\";\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { View } from \"../view.js\";\n\n/**\n * if\n * Inserts and binds the element and it's child nodes into the DOM when true.\n */\nexport class IfBinder extends Binder<boolean> {\n  static key = \"if\";\n  static block = true;\n  priority = 4000;\n\n  attached = false;\n  nested?: View;\n\n  bind(el: HTMLUnknownElement) {\n    if (!this.marker) {\n      this.marker = window?.document?.createComment(\n        \" riba: \" + this.type + \" \" + this.keypath + \" \"\n      );\n      this.attached = false;\n      if (!el.parentNode?.insertBefore) {\n        // console.warn('Element has no parent node');\n      } else {\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      }\n    } else if (this.nested) {\n      this.nested.bind();\n    }\n  }\n\n  unbind() {\n    if (this.nested) {\n      this.nested.unbind();\n    }\n  }\n\n  routine(el: HTMLElement, value: boolean) {\n    value = !!value;\n    if (value !== this.attached) {\n      if (value) {\n        if (!this.nested) {\n          this.nested = new View(el, this.view.models, this.view.options);\n          this.nested.bind();\n        }\n        if (!this.marker || !this.marker.parentNode) {\n          // console.warn('Marker has no parent node');\n        } else {\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\n        }\n        this.attached = true;\n      } else {\n        if (!el.parentNode) {\n          // console.warn('Element has no parent node');\n        } else {\n          el.parentNode.removeChild(el);\n        }\n        this.attached = false;\n      }\n    }\n  }\n\n  update(models: any) {\n    if (this.nested) {\n      this.nested.update(models);\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * maxlength\n */\nexport class MaxlengthBinder extends Binder<number, HTMLElement> {\n  static key = \"maxlength\";\n\n  routine(el: HTMLElement, maxLength?: number) {\n    if (typeof maxLength === \"number\") {\n      (el as HTMLInputElement).setAttribute(\"maxlength\", maxLength.toString());\n      (el as HTMLInputElement).maxLength = maxLength;\n    } else {\n      (el as HTMLInputElement).removeAttribute(\"maxlength\");\n    }\n  }\n}\n","import { eventHandlerFunction } from \"../types/index.js\";\nimport { Binder } from \"../binder.js\";\n\n/**\n * Binds an event handler on the element.\n */\nexport class OnEventBinder extends Binder<eventHandlerFunction, HTMLElement> {\n  static key = \"on-*\";\n  function = true;\n  priority = 1000;\n\n  handler?: any;\n\n  unbind(el: HTMLElement) {\n    if (this.handler) {\n      if (this.args === null) {\n        throw new Error(\"args is null\");\n      }\n      const eventName = this.args[0] as string;\n      el.removeEventListener(eventName, this.handler);\n    }\n  }\n\n  routine(el: HTMLElement, value: eventHandlerFunction) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    const eventName = this.args[0] as string;\n\n    // see https://github.com/microsoft/TypeScript/issues/32912\n    const options: AddEventListenerOptions & EventListenerOptions = {\n      passive: this.el.dataset.passive === \"true\", // data-passive=\"true\"\n    };\n    if (this.handler) {\n      el.removeEventListener(eventName, this.handler, options);\n    }\n    this.handler = this.eventHandler(value, el).bind(this);\n\n    el.addEventListener(eventName, this.handler, options);\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { BasicComponent } from \"../component/basic-component.js\";\nimport { isCustomElement, waitForCustomElement } from \"@ribajs/utils\";\n\n/**\n * parent\n * Binds the parent scope to your component\n */\nexport class ParentBinder extends Binder<any, BasicComponent> {\n  static key = \"parent\";\n  routine() {\n    /**/\n  }\n  private bindIntern(el: BasicComponent) {\n    if (el.setBinderAttribute) {\n      el.setBinderAttribute(\"$parent\", this.view.models);\n    } else {\n      console.warn(\n        \"[parentBinder] You can only use this binder on Riba components\",\n        el.localName,\n        customElements.get(el.localName)\n      );\n    }\n  }\n\n  async bind(el: BasicComponent) {\n    if (isCustomElement(el, true, true)) {\n      this.bindIntern(el);\n    } else if (isCustomElement(el, true)) {\n      console.info(\n        `[parentBinder] CustomElement ${el.localName} has been defined, but is not yet upgraded. Waiting for upgrade..`,\n        el\n      );\n      await waitForCustomElement(el);\n      this.bindIntern(el);\n    } else {\n      console.warn(\n        \"[parentBinder] You can only use this binder on Riba components\",\n        el.localName\n      );\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * readonly\n */\nexport class ReadonlyBinder extends Binder<boolean, HTMLInputElement> {\n  static key = \"readonly\";\n\n  routine(el: HTMLInputElement, readOnly: boolean) {\n    readOnly = !!readOnly;\n    el.readOnly = readOnly;\n    if (readOnly) {\n      el.setAttribute(\"readonly\", \"\");\n    } else {\n      el.removeAttribute(\"readonly\");\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * remove-class\n * Removes the given class string.\n * Instead of `class-[classname]` the classname is removed by the\n * given attribute and not by the star value,\n * @example\n * <img class=\"loading\" rv-src=\"img.src\" rv-remove-class=\"loadingClass\">\n */\nexport class RemoveClassBinder extends Binder<string, HTMLElement> {\n  static key = \"remove-class\";\n  private staticClassesString?: string;\n  bind(el: HTMLElement) {\n    this.staticClassesString = el.className;\n  }\n  routine(el: HTMLElement, value: string) {\n    const regex = new RegExp(`\\\\b${value}\\\\b`, \"g\");\n    if (!this.staticClassesString) {\n      throw new Error(\"staticClassesString is undefined!\");\n    }\n    el.className = this.staticClassesString.replace(regex, \"\").trim();\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Shows the element when value is true (negated version of `hide` binder).\n */\nexport class ShowBinder extends Binder<boolean, HTMLElement> {\n  static key = \"show\";\n  routine(el: HTMLElement, value: boolean) {\n    el.style.display = value ? \"\" : \"none\";\n    if (value) {\n      el.removeAttribute(\"hidden\");\n    } else {\n      el.setAttribute(\"hidden\", \"true\");\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * srcset-size\n * Sets an url with size to the `srcset` attribute\n */\nexport class SrcsetSizeBinder extends Binder<string, HTMLElement> {\n  static key = \"srcset-*\";\n\n  routine(el: HTMLUnknownElement, url: string) {\n    const size: string = this.args[0] as string;\n    let srcset = el.getAttribute(\"srcset\");\n    if (typeof srcset !== \"string\") {\n      srcset = \"\";\n    }\n    if (typeof url === \"string\" && url.length > 0) {\n      const seperator = srcset.length > 0 ? \", \" : \"\";\n      // Add size to srcset attribute\n      srcset += `${seperator}${url} ${size}`;\n    } else {\n      // Remove size from srcset attribute\n      let sizes = srcset.split(\",\");\n      sizes = sizes.map((iterSize) => iterSize.trim());\n      sizes = sizes.filter((iterSize) => !iterSize.includes(size));\n      srcset = sizes.join(\", \") || \"\";\n    }\n    el.setAttribute(\"srcset\", srcset);\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * style-*\n * Adds a style to the element.\n *\n * ```html\n * <div rv-style-background-image=\"'/image.png'\"></div>\n * ```\n */\nexport class StyleBackgroundImageBinder extends Binder<string, HTMLElement> {\n  static key = \"style-background-image\";\n  routine(el: HTMLElement, value: string) {\n    const prop = \"background-image\";\n    if (value === null || value === undefined || value === \"\") {\n      el.style.removeProperty(prop);\n    } else {\n      el.style.setProperty(prop, `url(${value})`);\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * style-*\n * Adds a style to the element.\n *\n * ```html\n * <div rv-style-background-color=\"'blue'\"></div>\n * ```\n */\nexport class StyleStarBinder extends Binder<string, HTMLElement> {\n  static key = \"style-*\";\n  routine(el: HTMLElement, value: string) {\n    const propertyName = this.args[0];\n    if (value === null || value === undefined || value === \"\") {\n      el.style.removeProperty(propertyName.toString());\n    } else {\n      el.style.setProperty(propertyName.toString(), value);\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { kebabCase } from \"@ribajs/utils\";\n\n/**\n * style\n * Adds a style to the element.\n *\n * ```html\n * <div rv-style=\"{'backgroundColor':'blue'}\"></div>\n * ```\n */\nexport class StyleBinder extends Binder<\n  Partial<CSSStyleDeclaration> | string,\n  HTMLElement\n> {\n  static key = \"style\";\n  routine(el: HTMLElement, value: Partial<CSSStyleDeclaration> | string) {\n    if (value) {\n      if (typeof value === \"string\") {\n        el.setAttribute(\"style\", value);\n      } else {\n        for (const key of Object.keys(value)) {\n          el.style.setProperty(kebabCase(key), value[key as any] || null);\n        }\n      }\n    } else {\n      for (const key of Object.keys(el.style)) {\n        (el.style as any).removeProperty(key);\n      }\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * tag-*\n * tag-[tagname]\n *\n * Changes the html tag (whatever value is in place of [tagname]) of the element\n * when the value evaluates to true and reverts to the original tag name if the value evaluates to false.\n *\n * TODO test me on value change\n *\n * @example\n * <div rv-tag-a=\"item.hasHref\">{ item.label }</div>\n */\nexport class TagStarBinder extends Binder<boolean, HTMLElement> {\n  static key = \"tag-*\";\n  priority = -1000;\n\n  private originalTag?: string;\n\n  bind(el: HTMLUnknownElement) {\n    this.originalTag = el.tagName.toLowerCase();\n  }\n\n  routine(oldEl: HTMLUnknownElement, value: boolean) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n\n    const curTagName = this.el.tagName.toLowerCase();\n    let tagName: string;\n    if (value) {\n      tagName = (this.args[0] as string).trim().toLowerCase();\n    } else if (this.originalTag) {\n      tagName = this.originalTag.toLowerCase();\n    } else {\n      throw new Error(\"Tag name not found!\");\n    }\n\n    if (curTagName !== tagName) {\n      const newEl = document.createElement(tagName);\n\n      // Move childs to new element we use this instead if innerHTML to keep the binders alive on this childs\n      while (oldEl.childNodes.length > 0) {\n        if (oldEl.firstChild) {\n          newEl.appendChild(oldEl.firstChild);\n        }\n      }\n\n      // Copy attributes to new element\n      const attributes = Array.prototype.slice.call(oldEl.attributes);\n      for (const attribute of attributes) {\n        newEl.setAttribute(attribute.name, attribute.value);\n      }\n\n      // Replace the old element with the new element\n      if (oldEl.parentNode) {\n        oldEl.parentNode.replaceChild(newEl, oldEl);\n      } else {\n        console.warn(\"No parent\");\n      }\n\n      this.el = newEl;\n    }\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { View } from \"../view.js\";\n\n/**\n * template\n * Similar to rv-html but also binds the html with riba, so you can also use binders and components in this templates.\n */\nexport class TemplateBinder extends Binder<string, HTMLElement> {\n  static key = \"template\";\n\n  private nested?: View;\n\n  bind(el: HTMLUnknownElement) {\n    this.nested = new View(el, this.view.models, this.view.options);\n  }\n\n  routine(el: HTMLUnknownElement, value: string) {\n    this.nested?.unbind();\n    el.innerHTML = value ? value : \"\";\n    this.nested = new View(el, this.view.models, this.view.options);\n    this.nested?.bind();\n  }\n\n  unbind() {\n    this.nested?.unbind();\n  }\n\n  update(models: any) {\n    this.nested?.update(models);\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Sets the element's text value.\n */\nexport class TextBinder extends Binder<string, HTMLElement> {\n  static key = \"text\";\n  routine(el: HTMLElement, value: any) {\n    if (typeof value !== \"string\") {\n      if (typeof value?.toString === \"function\") {\n        value = value.toString();\n      } else {\n        // console.warn(\n        //   `[TextBinder] Can't convert value \"${value}\" to string! Element: `,\n        //   el\n        // );\n      }\n    }\n\n    el.textContent = value || \"\";\n  }\n}\n","import { Binder } from \"../binder.js\";\n\n/**\n * Toggles a boolean variable to true/false if the event is triggered.\n */\nexport class ToggleOnEventBinder extends Binder<string, HTMLUnknownElement> {\n  static key = \"toggle-on-*\";\n\n  private propertyKey?: string;\n\n  toggle() {\n    if (this.propertyKey) {\n      this.view.models[this.propertyKey] = !this.view.models[this.propertyKey];\n    }\n  }\n\n  bind(el: HTMLUnknownElement) {\n    const eventName = this.args[0] as string;\n    const passive = this.el.dataset.passive === \"true\"; // data-passive=\"true\"\n    el.addEventListener(eventName, this.toggle, { passive });\n  }\n\n  unbind(el: HTMLUnknownElement) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    const eventName = this.args[0] as string;\n    el.removeEventListener(eventName, this.toggle);\n  }\n\n  routine(el: HTMLUnknownElement, propertyKey: string) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    this.propertyKey = propertyKey;\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { getInputValue } from \"@ribajs/utils/src/dom.js\";\nimport { getString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * unchecked\n * Unchecks a checkbox or radio input when the value is true (negated version of\n * `checked` binder). Also sets the model property when the input is checked or\n * unchecked (two-way binder).\n */\nexport class UncheckedBinder extends Binder<\n  string | boolean,\n  HTMLInputElement\n> {\n  static key = \"unchecked\";\n  publishes = true;\n  priority = 2000;\n\n  onChange = this.publish.bind(this);\n\n  bind(el: HTMLInputElement) {\n    el.addEventListener(\"change\", this.onChange);\n  }\n\n  unbind(el: HTMLInputElement) {\n    el.removeEventListener(\"change\", this.onChange);\n  }\n\n  routine(el: HTMLInputElement, value: string | boolean) {\n    if (el.type === \"radio\") {\n      el.checked = getString(el.value) !== getString(value);\n    } else {\n      el.checked = !value;\n    }\n  }\n\n  getValue(el: HTMLInputElement) {\n    return getInputValue(el);\n  }\n}\n","import { IfBinder } from \"./if.binder.js\";\n\n/**\n * unless\n * Removes and unbinds the element and it's child nodes into the DOM when true\n * (negated version of `if` binder).\n */\nexport class UnlessBinder extends IfBinder {\n  static key = \"unless\";\n\n  routine(el: HTMLElement, value: boolean) {\n    return super.routine(el, !value);\n  }\n}\n","import { Binder } from \"../binder.js\";\nimport { getInputValue, getString, setAttribute } from \"@ribajs/utils\";\n\nconst DEFAULT_EVENTS = \"change input paste blur focus\";\n\n/**\n * Sets the element's value. Also sets the model property when the input changes\n * (two-way binder).\n */\nexport class ValueBinder extends Binder<any, HTMLElement> {\n  static key = \"value\";\n  publishes = true;\n  priority = 3000;\n\n  event?: string;\n\n  getData(el: HTMLElement) {\n    const data = {\n      type: (el as HTMLInputElement).type,\n      tagName: el.tagName,\n      contenteditable: el.getAttribute(\"contenteditable\") ? true : false,\n      isRadio: false,\n      isOption: false,\n    };\n    data.isRadio = data.tagName === \"INPUT\" && data.type === \"radio\";\n    data.isOption = data.tagName === \"OPTION\";\n    return data;\n  }\n\n  onChange = this.publish.bind(this);\n\n  bind(el: HTMLElement) {\n    if (el.tagName === \"OPTION\") {\n      return;\n    }\n    const data = this.getData(el);\n    if (!data.isRadio) {\n      this.event = el.getAttribute(\"event-name\") || DEFAULT_EVENTS;\n\n      const events = this.event.split(\" \");\n      for (const event of events) {\n        el.addEventListener(event.trim(), this.onChange, false);\n      }\n    }\n  }\n\n  unbind(el: HTMLUnknownElement) {\n    if (this.event) {\n      const events = this.event.split(\" \");\n      for (const event in events) {\n        el.removeEventListener(event.trim(), this.onChange);\n      }\n    }\n  }\n\n  routine(\n    el: HTMLElement | HTMLSelectElement,\n    newValue?: number | string | string[]\n  ) {\n    let oldValue = this.getValue(el);\n\n    if (!Array.isArray(newValue)) {\n      if (newValue != null) {\n        newValue = getString(newValue);\n      } else {\n        newValue = \"\";\n      }\n    }\n    if (!Array.isArray(oldValue)) {\n      if (oldValue != null) {\n        oldValue = getString(oldValue);\n      } else {\n        oldValue = \"\";\n      }\n    }\n\n    if (oldValue === newValue) {\n      // nothing changed\n      return;\n    }\n\n    const data = this.getData(el);\n\n    if (data.isRadio || data.isOption) {\n      return setAttribute(el, \"value\", newValue);\n    }\n\n    if ((el as HTMLSelectElement).type === \"select-multiple\") {\n      if (Array.isArray(newValue)) {\n        for (let i = 0; i < (el as HTMLSelectElement).options.length; i++) {\n          const option = (el as HTMLSelectElement).options[\n            i\n          ] as HTMLOptionElement;\n          option.selected = newValue.indexOf(option.value) > -1;\n        }\n      }\n    } else if (el.getAttribute(\"contenteditable\")) {\n      el.innerHTML = newValue as string; // TODO write test for contenteditable\n    } else {\n      (el as HTMLInputElement).value = newValue as string;\n    }\n  }\n\n  getValue(el: HTMLElement) {\n    return getInputValue(el);\n  }\n}\n","import {\n  Adapters,\n  Binders,\n  Formatters,\n  Components,\n  RibaModule,\n} from \"../types/index.js\";\nimport { BindersService } from \"./binder.service.js\";\nimport { ComponentService } from \"./component.service.js\";\nimport { FormatterService } from \"./formatter.service.js\";\nimport { AdapterService } from \"./adapter.service.js\";\n\nexport class ModulesService {\n  public binder: BindersService;\n  public component: ComponentService;\n  public formatter: FormatterService;\n  public adapter: AdapterService;\n\n  /**\n   *\n   * @param binders;\n   * @param components;\n   * @param formatters;\n   * @param adapters;\n   */\n  constructor(\n    binders: Binders<any>,\n    components: Components,\n    formatters: Formatters,\n    adapters: Adapters\n  ) {\n    this.binder = new BindersService(binders);\n    this.component = new ComponentService(components);\n    this.formatter = new FormatterService(formatters);\n    this.adapter = new AdapterService(adapters);\n  }\n\n  public register(module: RibaModule) {\n    if (!module) {\n      console.error(module);\n      throw new Error(\"The Riba module is falsy!\");\n    }\n    if (module.binders) {\n      this.binder.registerAll(module.binders);\n    }\n    if (module.components) {\n      this.component.registerAll(module.components);\n    }\n    if (module.formatters) {\n      this.formatter.registerAll(module.formatters);\n    }\n    if (module.adapters) {\n      this.adapter.registerAll(module.adapters);\n    }\n  }\n}\n","import {\n  Formatters,\n  Binders,\n  Adapters,\n  Root,\n  Components,\n  Options,\n} from \"./types/index.js\";\nimport { parseTemplate } from \"./parse-template.js\";\nimport { parseType } from \"@ribajs/utils\";\nimport { Binder } from \"./binder.js\";\nimport { View } from \"./view.js\";\nimport { Observer } from \"./observer.js\";\nimport { ModulesService } from \"./services/module.service.js\";\nimport { LifecycleService } from \"./services/lifecycle.service.js\";\n\nexport class Riba {\n  /**\n   * Default event handler, calls the function defined in his binder\n   * @see Binding.eventHandler\n   * @param el The element the event was triggered from\n   */\n  public static handler(\n    this: any,\n    context: any,\n    ev: Event,\n    binder: Binder,\n    el: HTMLElement\n  ) {\n    if (!this || !this.call) {\n      const error = new Error(\n        `[rv-${binder.type}=\"${binder.keypath}\"] Event handler \"${binder.keypath}\" not found!\"`\n      );\n      console.error(error, binder, el, binder.view.models);\n      throw error;\n    }\n    this.call(context, ev, binder.view.models, el);\n  }\n\n  /** singleton instance */\n  private static instance: Riba;\n\n  public module: ModulesService;\n\n  public lifecycle = LifecycleService.getInstance();\n\n  /** Global binders */\n  public binders: Binders<any> = {};\n\n  /** Global components. */\n  public components: Components = {};\n\n  /** Global formatters. */\n  public formatters: Formatters = {};\n\n  /** Global (sightglass) adapters. */\n  public adapters: Adapters = {};\n\n  public parseTemplate = parseTemplate;\n\n  public parseType = parseType;\n\n  /** Default template delimiters. */\n  public templateDelimiters = [\"{\", \"}\"];\n\n  /** Default sightglass root interface. */\n  public rootInterface = \".\";\n\n  /** Preload data by default. */\n  public preloadData = true;\n\n  /** Remove binder attributes after binding */\n  public removeBinderAttributes = true; // TODO fixme on false: Maximum call stack size exceeded\n\n  /** Stop binding on this node types */\n  public blockNodeNames = [\"SCRIPT\", \"STYLE\", \"TEMPLATE\", \"CODE\"];\n\n  public blockUnknownCustomElements = true;\n\n  /** Default attribute prefix. */\n  private _prefix: string[] = [\"rv\"];\n\n  /** Default attribute full prefix. */\n  private _fullPrefix: string[] = [\"rv-\"];\n\n  set prefix(value: string[]) {\n    if (Array.isArray(value)) {\n      this._prefix = [];\n      this._fullPrefix = [];\n      for (const val of value) {\n        this._prefix.push(val);\n        this._fullPrefix.push(val + \"-\");\n      }\n    }\n  }\n\n  get prefix(): string[] {\n    return this._prefix;\n  }\n\n  get fullPrefix(): string[] {\n    return this._fullPrefix;\n  }\n\n  /**\n   * Creates an singleton instance of Riba.\n   */\n  constructor() {\n    this.module = new ModulesService(\n      this.binders,\n      this.components,\n      this.formatters,\n      this.adapters\n    );\n    if (Riba.instance) {\n      return Riba.instance;\n    }\n    Riba.instance = this;\n  }\n\n  /**\n   * Merges an object literal into the corresponding global options.\n   * @param options\n   */\n  public configure(options: Partial<Options>) {\n    if (!options) {\n      return;\n    }\n\n    for (const [option, value] of Object.entries(options)) {\n      switch (option) {\n        case \"binders\":\n          this.binders = { ...this.binders, ...(value as Binders) };\n          break;\n        case \"formatters\":\n          this.formatters = { ...this.formatters, ...(value as Formatters) };\n          break;\n        case \"components\":\n          this.components = { ...this.components, ...(value as Components) };\n          break;\n        case \"adapters\":\n          this.adapters = { ...this.adapters, ...(value as Adapters) };\n          break;\n        case \"prefix\":\n          this.prefix = value as string[];\n          break;\n        case \"parseTemplate\":\n          this.parseTemplate = value as any;\n          break;\n        case \"parseType\":\n          this.parseType = value as any;\n          break;\n        case \"templateDelimiters\":\n          this.templateDelimiters = value as string[];\n          break;\n        case \"rootInterface\":\n          this.rootInterface = value as string;\n          break;\n        case \"preloadData\":\n          this.preloadData = value as boolean;\n          break;\n        case \"blockNodeNames\":\n          this.blockNodeNames = value as string[];\n          break;\n        case \"blockUnknownCustomElements\":\n          this.blockUnknownCustomElements = Boolean(value);\n          break;\n        default:\n          console.warn(\"Option not supported\", option, value);\n          break;\n      }\n    }\n  }\n\n  public getViewOptions(options?: Partial<Options>) {\n    const viewOptions: Partial<Options> = {\n      // EXTENSIONS\n      adapters: {} as Adapters,\n      binders: {} as Binders<any>,\n      components: {} as Components,\n      formatters: {} as Formatters,\n\n      // other\n      attributeBinders: [],\n\n      // sightglass\n      rootInterface: {} as Root,\n    };\n\n    if (options) {\n      viewOptions.binders = { ...viewOptions.binders, ...options.binders };\n      viewOptions.formatters = {\n        ...viewOptions.formatters,\n        ...options.formatters,\n      };\n      viewOptions.components = {\n        ...viewOptions.components,\n        ...options.components,\n      };\n      viewOptions.adapters = {\n        ...viewOptions.adapters,\n        ...options.adapters,\n      };\n    }\n\n    // Prefix\n    if (options?.prefix && Array.isArray(options?.prefix)) {\n      viewOptions.prefix = [];\n      viewOptions.fullPrefix = [];\n      for (const prefix of options.prefix) {\n        viewOptions.prefix.push(prefix);\n        viewOptions.fullPrefix.push(prefix + \"-\");\n      }\n    } else {\n      viewOptions.prefix = this.prefix;\n      viewOptions.fullPrefix = this.fullPrefix;\n    }\n\n    viewOptions.templateDelimiters =\n      options?.templateDelimiters || this.templateDelimiters;\n    viewOptions.rootInterface = options?.rootInterface || this.rootInterface;\n    viewOptions.removeBinderAttributes =\n      typeof options?.removeBinderAttributes === \"boolean\"\n        ? options.removeBinderAttributes\n        : this.removeBinderAttributes;\n    viewOptions.blockNodeNames = options?.blockNodeNames || this.blockNodeNames;\n    viewOptions.preloadData =\n      typeof options?.preloadData === \"boolean\"\n        ? options.preloadData\n        : this.preloadData;\n    viewOptions.handler = options?.handler || Riba.handler;\n\n    // merge extensions\n    viewOptions.binders = { ...this.binders, ...viewOptions.binders };\n    viewOptions.formatters = { ...this.formatters, ...viewOptions.formatters };\n    viewOptions.components = { ...this.components, ...viewOptions.components };\n    viewOptions.adapters = { ...this.adapters, ...viewOptions.adapters };\n\n    if (!viewOptions.attributeBinders) {\n      viewOptions.attributeBinders = [];\n    }\n\n    // get all attributeBinders from available binders\n    if (viewOptions.binders) {\n      const attributeBinders = Object.keys(viewOptions.binders).filter(\n        (key) => key.indexOf(\"*\") >= 1 // Should contain, but not start with, *\n      );\n      viewOptions.attributeBinders.push(...attributeBinders);\n    }\n\n    return viewOptions as Options;\n  }\n\n  /**\n   * Binds some data to a template / element. Returns a riba.View instance.\n   * @param el\n   * @param models The root\n   * @param options\n   * @returns\n   */\n  public bind(\n    el: HTMLElement | DocumentFragment | HTMLUnknownElement[],\n    models: any = {},\n    options?: Options\n  ) {\n    const viewOptions: Options = this.getViewOptions(options);\n\n    Observer.updateOptions(viewOptions);\n\n    const view = new View(el, models, viewOptions);\n    view.bind();\n    return view;\n  }\n}\n\n(window as any).Riba = Riba;\n","export const JsxFragment = Symbol();\n","/**\n * Used to inject HTML directly into the document.\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function Raw(_props: { html: string }) {\n  // This is handled specially by the renderElement function. Instead of being\n  // called, the tag is compared to this function and the `html` prop will be\n  // returned directly.\n  return null;\n}\n","/* eslint-disable no-var */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable @typescript-eslint/no-namespace */\n/**\n * Custom JSX module designed specifically for Ribajs's needs.\n * When overriding a default TypeDoc theme output, your implementation must create valid {@link Element}\n * instances, which can be most easily done by using TypeDoc's JSX implementation. To use it, set up\n * your tsconfig with the following compiler options:\n * ```json\n * {\n *     \"jsx\": \"react\",\n *     \"jsxFactory\": \"JSX.createElement\",\n *     \"jsxFragmentFactory\": \"JSX.Fragment\"\n * }\n * ```\n * @see https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/jsx.ts\n * @module\n */\n\nimport type {\n  JsxElement,\n  JsxChildren,\n  JsxComponent,\n  BasicIntrinsicElements,\n} from \"./types/index.js\";\nimport { isCustomElement, jsonStringify, escapeHtml } from \"@ribajs/utils\";\nimport { JsxFragment } from \"./jsx-fragment.js\";\nimport { Raw } from \"./jsx-raw.js\";\n\nexport const htmlVoidElements = new Set([\n  \"area\",\n  \"base\",\n  \"br\",\n  \"col\",\n  \"embed\",\n  \"hr\",\n  \"img\",\n  \"input\",\n  \"link\",\n  \"meta\",\n  \"param\",\n  \"source\",\n  \"track\",\n  \"wbr\",\n]);\n\n/**\n * JSX factory function to create an \"element\" that can later be rendered with {@link renderElement}\n * @param tag\n * @param props\n * @param children\n */\nexport function createElement(\n  tag: typeof JsxFragment | string | JsxComponent<any>,\n  props: Record<string, unknown> | null,\n  ...children: JsxChildren[]\n): JsxElement {\n  return { tag, props, children };\n}\n\nexport function renderElement(element: JsxElement | null | undefined): string {\n  if (!element) {\n    return \"\";\n  }\n\n  const { tag, props, children } = element;\n\n  if (typeof tag === \"function\") {\n    if (tag === Raw) {\n      return String((props as any).html);\n    }\n    return renderElement(tag(Object.assign({ children }, props)));\n  }\n\n  const html: string[] = [];\n\n  if (tag !== JsxFragment) {\n    html.push(\"<\", tag);\n\n    for (const [key, val] of Object.entries(props ?? {})) {\n      if (val == null) continue;\n\n      if (typeof val == \"boolean\" && !isCustomElement(tag)) {\n        if (val) {\n          html.push(\" \", key);\n        }\n      } else {\n        html.push(\" \", key, \"=\", jsonStringify(val));\n      }\n    }\n  }\n\n  let hasChildren = false;\n  if (children.length) {\n    hasChildren = true;\n    if (tag !== JsxFragment) html.push(\">\");\n    renderChildren(children);\n  }\n\n  if (tag !== JsxFragment) {\n    if (!hasChildren) {\n      if (htmlVoidElements.has(tag)) {\n        html.push(\"/>\");\n      } else {\n        html.push(\"></\", tag, \">\");\n      }\n    } else {\n      html.push(\"</\", tag, \">\");\n    }\n  }\n\n  return html.join(\"\");\n\n  function renderChildren(children: JsxChildren[]) {\n    for (const child of children) {\n      if (!child) continue;\n\n      if (Array.isArray(child)) {\n        renderChildren(child);\n      } else if (typeof child === \"string\" || typeof child === \"number\") {\n        html.push(escapeHtml(child.toString()));\n      } else {\n        html.push(renderElement(child));\n      }\n    }\n  }\n}\n\ndeclare global {\n  var jsxCreateElement: typeof createElement;\n  var jsxFragment: typeof JsxFragment;\n  /**\n   * TypeScript's rules for looking up the JSX.IntrinsicElements and JSX.Element\n   * interfaces are incredibly strange. It will find them if they are included as\n   * a namespace under the createElement function, or globally, or, apparently, if\n   * a JSX namespace is declared at the same scope as the factory function.\n   * Hide this in the docs, hopefully someday TypeScript improves this and allows\n   * looking adjacent to the factory function and we can get rid of this phantom namespace.\n   *\n   * We are using the global namespace to be able to extend the IntrinsicElements interface in other Ribajs Modules\n   * @hidden\n   */\n  namespace JSX {\n    // This must be an interface to be able to extend this interface in other Ribajs Modules\n    export interface IntrinsicElements extends BasicIntrinsicElements {}\n    export { JsxElement as Element };\n  }\n}\n\n// Set as global variable in Browser, Deno or Node\nglobalThis.jsxCreateElement = createElement;\nglobalThis.jsxFragment = JsxFragment;\n","/**\n * Auto parse custom element attributes\n *\n * @see https://developer.mozilla.org/de/docs/Web/Web_Components/Using_custom_elements\n */\nimport \"@ribajs/types\";\nimport {\n  EventHandler,\n  ObservedAttributesToCheck,\n  TemplateFunction,\n  ObserverSyncCallback,\n} from \"../types/index.js\";\nimport type { JsxElement } from \"@ribajs/jsx\";\nimport { renderElement } from \"@ribajs/jsx\";\nimport { Binder } from \"../binder.js\";\nimport { Observer } from \"../observer.js\";\nimport { parseJsonString, camelCase } from \"@ribajs/utils/src/type.js\";\nimport { getRandomColor, consoleColoured } from \"@ribajs/utils/src/color.js\";\n\nexport abstract class BasicComponent extends HTMLElement {\n  public static tagName: string;\n\n  public _debug = false;\n  public _color?: string;\n\n  protected templateLoaded = false;\n\n  /**\n   * Used to check if all passed observedAttributes are initialized\n   */\n  protected observedAttributesToCheck: ObservedAttributesToCheck = {};\n\n  protected observedAttributes: string[] = [];\n\n  public abstract scope: any;\n\n  constructor() {\n    super();\n\n    if (this._debug) {\n      this._color = getRandomColor();\n    }\n  }\n\n  /**\n   * Remove this custom element\n   */\n  public remove() {\n    if (this && this.parentElement) {\n      this.parentElement.removeChild(this);\n    }\n  }\n\n  protected abstract template(): ReturnType<TemplateFunction>;\n\n  protected _log(mode: \"debug\" | \"info\" | \"log\" | \"error\", ...args: unknown[]) {\n    const namespace = this.constructor.name || this.tagName;\n    if (!this._color) {\n      this._color = getRandomColor();\n    }\n    consoleColoured({ namespace, color: this._color, mode }, ...args);\n  }\n\n  protected info(...args: unknown[]) {\n    return this._log(\"info\", ...args);\n  }\n\n  protected debug(...args: unknown[]) {\n    if (!this._debug) {\n      return;\n    }\n\n    return this._log(\"debug\", ...args);\n  }\n\n  protected error(...args: unknown[]) {\n    console.error(...args);\n  }\n\n  /**\n   * returns a list of attributes which are required until the riba binding starts\n   */\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected async init(observedAttributes: string[]) {\n    this.loadAttributes(observedAttributes);\n    this.getPassedObservedAttributes(observedAttributes);\n    return;\n  }\n\n  protected ready() {\n    return (\n      this.allPassedObservedAttributesAreInitialized() &&\n      this.checkRequiredAttributes()\n    );\n  }\n\n  /**\n   * Check if the attribute (e.g. `src`) is passed to this custom element\n   * @param observedAttribute\n   */\n  protected attributeIsPassed(observedAttribute: string) {\n    return this.hasAttribute(observedAttribute);\n  }\n\n  /**\n   * Get passed observed attributes, used to check if all passed attributes are initialized\n   * @param observedAttributes\n   */\n  protected getPassedObservedAttributes(observedAttributes: string[]) {\n    const oa2c = this.observedAttributesToCheck;\n    for (const observedAttribute of observedAttributes) {\n      if (!oa2c[observedAttribute]) {\n        oa2c[observedAttribute] = { passed: false, initialized: false };\n      } else {\n        if (!oa2c[observedAttribute].passed) {\n          oa2c[observedAttribute].passed =\n            this.attributeIsPassed(observedAttribute);\n        }\n      }\n    }\n  }\n\n  /**\n   * Checks if all passed observed attributes are initialized\n   */\n  protected allPassedObservedAttributesAreInitialized() {\n    return Object.keys(this.observedAttributesToCheck).every(\n      (key) =>\n        !this.observedAttributesToCheck[key]?.passed ||\n        this.observedAttributesToCheck[key]?.initialized\n    );\n  }\n\n  /**\n   * Required attributes before the view is bound\n   *\n   * The attributeChangedCallback is called for each attribute which updates the riba view each time\n   * which can have a big impact on performance or required attributes are not yet available which can lead to errors.\n   * So define required attributes and the view is ony bind the first time after all this attributes are transmitted.\n   */\n  protected checkRequiredAttributes() {\n    return this.requiredAttributes().every((requiredAttribute) => {\n      requiredAttribute = camelCase(requiredAttribute);\n      return (\n        this.scope.hasOwnProperty(requiredAttribute) &&\n        typeof this.scope[requiredAttribute] !== \"undefined\"\n      );\n    });\n  }\n\n  protected parseAttribute(attr: string | null) {\n    let value: any = attr;\n    if (typeof attr !== \"string\") {\n      return attr;\n    }\n\n    if (attr === \"true\") {\n      value = true;\n    } else if (attr === \"false\") {\n      value = false;\n    } else if (attr === \"null\") {\n      value = null;\n    } else if (attr === \"undefined\") {\n      value = undefined;\n    } else if (attr === \"\") {\n      value = undefined;\n    } else if (!isNaN(Number(attr))) {\n      value = Number(attr);\n      // If number is too large store the value as string\n      if (value >= Number.MAX_SAFE_INTEGER) {\n        value = attr;\n      }\n    } else {\n      const jsonString = parseJsonString(value);\n      value = jsonString ? jsonString : value;\n    }\n\n    return value;\n  }\n\n  /**\n   * Returns an event handler for the bindings (most on-*) inside this component.\n   */\n  protected eventHandler(self: BasicComponent): EventHandler {\n    // IMPORTANT this must be a function and not a Arrow Functions\n    return function (\n      context: Binder,\n      event: Event,\n      binding: Binder,\n      el: HTMLElement\n    ) {\n      if (!this || !this.call) {\n        const error = new Error(\n          `[rv-${binding.type}=\"${binding.keypath}\"] Event handler \"${binding.keypath}\" not found!\"`\n        );\n        console.error(binding, el);\n        throw error;\n      }\n\n      this.call(self, event, binding.view.models, el);\n    };\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when the custom element is first connected to the document's DOM.\n   */\n  protected connectedCallback() {\n    // console.warn('connectedCallback called');\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when the custom element is disconnected from the document's DOM.\n   */\n  protected disconnectedCallback() {\n    // if (this.bound && this.view) {\n    //   // IMPORTANT ROUTE FIXME, if we unbind the component then it will no longer work if it is retrieved from the cache and the connectedCallback is called\n    //   // because the riba attributes are removed. We need a solution for that, maybe we do not remove the attributes or we recreate the attributes\n    //   // See view bind / unbind methods for that.\n    //   // only unbind if cache is not enabled?\n    //   this.unbind();\n    // }\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when one of the custom element's attributes is added, removed, or changed.\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected async attributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    // this.debug(\"attributeChangedCallback\", attributeName, newValue);\n    if (\n      this.observedAttributesToCheck &&\n      this.observedAttributesToCheck[attributeName]\n    ) {\n      this.observedAttributesToCheck[attributeName].initialized = true;\n    }\n\n    newValue = this.parseAttribute(newValue);\n\n    const parsedAttributeName = camelCase(attributeName);\n\n    if (this.scope && this.scope[parsedAttributeName]) {\n      oldValue = this.scope[parsedAttributeName];\n    }\n\n    // automatically inject observed attributes to view scope\n    this.scope[parsedAttributeName] = newValue;\n\n    // call custom attribute changed callback with parsed values\n    this.parsedAttributeChangedCallback(\n      parsedAttributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  /**\n   * Similar to attributeChangedCallback but attribute arguments are already parsed as they are stored in the scope\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    this.debug(\n      \"parsedAttributeChangedCallback called\",\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when one of the custom element's attributes is added, removed, or changed.\n   * Note: Not supported on polyfill: https://github.com/webcomponents/custom-elements#known-bugs-and-limitations\n   * @param oldDocument\n   * @param newDocument\n   */\n  protected adoptedCallback(oldDocument: Document, newDocument: Document) {\n    this.debug(\"adoptedCallback called\", oldDocument, newDocument);\n  }\n\n  protected async loadTemplate(): Promise<\n    JsxElement | HTMLElement | string | null\n  > {\n    if (this.templateLoaded === true) {\n      // this.debug(\"template already loaded\");\n      return null;\n    }\n\n    if (!this.checkRequiredAttributes()) {\n      this.debug(\"Not all required attributes are set to load the template\");\n      return null;\n    }\n\n    this.templateLoaded = true;\n\n    const template = await this.template();\n\n    // if innerHTML is null this component uses the innerHTML which he already has!\n    try {\n      if (template) {\n        if (template instanceof HTMLElement) {\n          this.innerHTML = \"\";\n          this.appendChild(template as HTMLElement);\n        } else if (typeof template === \"string\") {\n          this.innerHTML = template;\n        } else if ((template as JsxElement).tag) {\n          this.innerHTML = renderElement(template as JsxElement);\n        }\n      }\n      return template;\n    } catch (error) {\n      this.templateLoaded = false;\n      throw error;\n    }\n  }\n\n  protected async beforeTemplate(): Promise<any> {\n    // this.debug('beforeTemplate');\n  }\n\n  protected async afterTemplate(\n    template: JsxElement | HTMLElement | string | null\n  ): Promise<any> {\n    this.debug(\"afterTemplate\", template);\n  }\n\n  protected async onReady(): Promise<any> {\n    // this.debug('onReady', this.bound);\n  }\n\n  /**\n   * Observes a object keypath in the scope\n   * @param keypath\n   * @param callback\n   */\n  public observe(keypath: string, callback: ObserverSyncCallback): Observer {\n    return new Observer(this.scope, keypath, callback);\n  }\n\n  /**\n   * Observes a attributeName\n   * @param attributeName\n   * @param callback\n   */\n  public observeAttribute(\n    attributeName: string,\n    callback: ObserverSyncCallback\n  ): Observer {\n    const parsedAttributeName = camelCase(attributeName);\n    return this.observe(parsedAttributeName, callback);\n  }\n\n  /**\n   * Directly set a attribute value in the scope.\n   * This method is meant to be called from the outside, e.g. from a binder or another component.\n   * @note This method is used in the componentAttributeBinder\n   * @param attributeName\n   * @param newValue\n   * @param namespace\n   */\n  public setBinderAttribute(\n    attributeName: string,\n    newValue: any,\n    namespace: string | null = null\n  ) {\n    const parsedAttributeName = camelCase(attributeName);\n    const oldValue = this.scope[parsedAttributeName];\n    this.attributeChangedCallback(attributeName, oldValue, newValue, namespace);\n  }\n\n  /**\n   * Directly get a attribute value from the scope.\n   * This method is meant to be called from the outside, e.g. from a binder or another component.\n   * @note This method is used in the componentAttributeBinder\n   * @param attributeName\n   * @returns\n   */\n  public getBinderAttribute(attributeName: string) {\n    const parsedAttributeName = camelCase(attributeName);\n    const value = this.scope[parsedAttributeName];\n    return value;\n  }\n\n  /**\n   * Load all attributes and calls the attributeChangedCallback for each attribute.\n   * Please note: Normally the browser calls the attributeChangedCallback for you\n   */\n  protected loadAttributes(observedAttributes: string[]) {\n    const attributes = this.attributes;\n    for (const i in attributes) {\n      const attribute: Node = attributes[i];\n      const name = attribute.nodeName;\n      if (observedAttributes.indexOf(name) !== -1) {\n        const newValue = attribute.nodeValue;\n        this.attributeChangedCallback(name, undefined, newValue, null);\n      }\n    }\n  }\n}\n","/**\n * This implementation of components replaces the old components of rivets following the Web Components v1 specs\n *\n * @see https://developer.mozilla.org/de/docs/Web/Web_Components/Using_custom_elements\n */\nimport { View } from \"../view.js\";\nimport { Riba } from \"../riba.js\";\nimport { Binder } from \"../binder.js\";\nimport { BasicComponent } from \"./basic-component.js\";\nimport { Formatter } from \"../types/index.js\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport type {\n  ComponentLifecycleEventData,\n  ComponentLifecycleOptions,\n} from \"../types/index.js\";\n\nexport abstract class Component extends BasicComponent {\n  protected view?: View | null = null;\n  protected riba?: Riba;\n  /** true when binding is in progress */\n  protected _binds = false;\n  /** true when binding is done */\n  protected _bound = false;\n  /** true when component is connected to the dom */\n  protected _connected = false;\n  /** true when component is disconnected from the dom */\n  protected _disconnected = false;\n  protected lifecycleEvents = EventDispatcher.getInstance(\"lifecycle\");\n\n  protected lifecycleOptions: ComponentLifecycleOptions = {};\n\n  /** true when binding is in progress */\n  public get binds() {\n    return this._binds;\n  }\n\n  /** true when binding is done */\n  public get bound() {\n    return this._bound;\n  }\n\n  /** true when component is connected to the dom */\n  public get connected() {\n    return this._connected;\n  }\n\n  /** true when component is disconnected from the dom */\n  public get disconnected() {\n    return this._disconnected;\n  }\n\n  /**\n   * If true the component will automatically bind the component to riba if all required attributes are set.\n   */\n  protected autobind = true;\n\n  constructor() {\n    super();\n    this.lifecycleEvents.trigger(\n      \"Component:constructor\",\n      this.getLifecycleEventData()\n    );\n    this.lifecycleEvents.on(\n      \"ComponentLifecycle:allBound\",\n      this.afterAllBind,\n      this\n    );\n  }\n\n  protected async init(observedAttributes: string[]) {\n    try {\n      await super.init(observedAttributes);\n      this.lifecycleEvents.trigger(\n        \"Component:init\",\n        this.getLifecycleEventData()\n      );\n      return await this.bindIfReady();\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  /**\n   * Use this to throw critical errors within the component\n   *\n   * @protected\n   * @param {Error} error\n   * @memberof Component\n   */\n  protected throw(error: any) {\n    if (error.message) {\n      console.error(`[${this.tagName}] ${error.message}`);\n    }\n    this.lifecycleEvents.trigger(\n      \"Component:error\",\n      error,\n      this.getLifecycleEventData()\n    );\n    this.error(error);\n  }\n\n  /**\n   * If `autobind` is true this component will bind riba automatically in this component if all all passed observed and required attributes are initialized\n   */\n  protected async bindIfReady() {\n    /**\n     * After all required and passed attributes are set we load the template and bind the component\n     */\n    if (this.ready()) {\n      await this.beforeTemplate();\n      const template = await this.loadTemplate();\n      await this.afterTemplate(template);\n      if (this.autobind) {\n        await this.bind();\n      }\n      await this.onReady();\n      return;\n    }\n    this.debug(\n      `Not all required or passed attributes are set to load and bind the template`,\n      this.observedAttributesToCheck,\n      this.scope\n    );\n    return;\n  }\n\n  /** Only internal used */\n  private async _beforeBind(): Promise<any> {\n    this._binds = true;\n    this.debug(\"Start to bind Riba\");\n    this.lifecycleEvents.trigger(\n      \"Component:beforeBind\",\n      this.getLifecycleEventData()\n    );\n  }\n\n  /** Used to handle stuff before binding starts */\n  protected async beforeBind(): Promise<any> {\n    // this.debug(\"beforeBind\", this.scope);\n  }\n\n  /** Only internal used */\n  private async _afterBind(): Promise<any> {\n    this._binds = false;\n    this._bound = true;\n    this.lifecycleEvents.trigger(\n      \"Component:afterBind\",\n      this.getLifecycleEventData()\n    );\n  }\n\n  /** Used to handle stuff after binding is done */\n  protected async afterBind(): Promise<any> {\n    // this.debug(\"afterBind\", this.scope);\n  }\n\n  /**\n   * Called after component binding is done for all current components.\n   * Please note: this method is called every time a route changes, so be careful with this method.\n   */\n  protected async afterAllBind(): Promise<any> {\n    // this.debug(\"afterBind\", this.scope);\n  }\n\n  protected getLifecycleEventData() {\n    const data: ComponentLifecycleEventData = {\n      tagName: this.tagName.toLowerCase(),\n      // scope: this.scope,\n      component: this,\n      // id: this.id,\n      options: this.lifecycleOptions,\n    };\n    return data;\n  }\n\n  /**\n   * Event handler to listen for publish binder event for two-way-binding in web components\n   */\n  // protected publish(name: string, newValue: any, namespace: string | null) {\n  //   this.dispatchEvent(\n  //     new CustomEvent(\"publish-binder-change:\" + name, {\n  //       detail: {\n  //         name,\n  //         newValue,\n  //         namespace: null, // TODO\n  //       },\n  //     })\n  //   );\n  // }\n\n  /**\n   * Default custom Element method\n   * Invoked when the custom element is disconnected from the document's DOM.\n   */\n  protected disconnectedCallback() {\n    try {\n      this._disconnected = true;\n      this._connected = false;\n      super.disconnectedCallback();\n      // IMPORTANT ROUTE FIXME, if we unbind the component then it will no longer work if it is retrieved from the cache and the connectedCallback is called\n      // because the riba attributes are removed. We need a solution for that, maybe we do not remove the attributes or we recreate the attributes\n      // See view bind / unbind methods for that.\n      // only unbind if cache is not enabled?\n      // if (this._binds && this.view) {\n      //   this.unbind();\n      // }\n      this.lifecycleEvents.trigger(\n        \"Component:disconnected\",\n        this.getLifecycleEventData()\n      );\n      this.lifecycleEvents.off(\n        \"ComponentLifecycle:allBound\",\n        this.afterAllBind,\n        this\n      );\n      this.lifecycleEvents.off(\n        \"ComponentLifecycle:error\",\n        this.afterAllBind,\n        this\n      );\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when the custom element is first connected to the document's DOM.\n   */\n  protected connectedCallback() {\n    try {\n      this._disconnected = false;\n      this._connected = true;\n      super.connectedCallback();\n      this.lifecycleEvents.trigger(\n        \"Component:connected\",\n        this.getLifecycleEventData()\n      );\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  /**\n   * Default custom Element method\n   * Invoked when one of the custom element's attributes is added, removed, or changed.\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected async attributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    try {\n      super.attributeChangedCallback(\n        attributeName,\n        oldValue,\n        newValue,\n        namespace\n      );\n      await this.bindIfReady();\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  /**\n   * Extra call formatter to avoid the \"this\" context problem\n   */\n  protected callFormatterHandler(self: this): any {\n    return {\n      name: \"call\",\n      read: (fn: (...args: any[]) => any, ...args: any[]) => {\n        if (!fn) {\n          throw new Error(\n            `[${self.tagName}] Can not use \"call\" formatter: fn is undefined!`\n          );\n        }\n        return fn.apply(self, args);\n      },\n    };\n  }\n\n  /**\n   * Extra args formatter to avoid the \"this\" context problem\n   *\n   * Sets arguments to a function without directly call them\n   * @param fn The function you wish to call\n   * @param args the parameters you wish to call the function with\n   */\n  protected argsFormatterHandler(self: this): Formatter {\n    return {\n      name: \"args\",\n      read: (fn: (...args: any[]) => any, ...fnArgs: any[]) => {\n        return (event: Event, scope: any, el: HTMLElement, binding: Binder) => {\n          if (!fn) {\n            throw new Error(\n              `[${self.tagName}] Can not use \"args\" formatter: fn is undefined!`\n            );\n          }\n\n          // append the event handler args to passed args\n          fnArgs.push(event);\n          fnArgs.push(scope);\n          fnArgs.push(el);\n          fnArgs.push(binding);\n          return fn.apply(self, fnArgs);\n        };\n      },\n    };\n  }\n\n  protected async bind() {\n    if (this.binds || this.bound) {\n      // this.debug(\"component already bound\");\n      return this.view;\n    }\n\n    if (!this.checkRequiredAttributes()) {\n      this.debug(\"Not all required attributes are set for bind\");\n      return;\n    }\n\n    try {\n      await this._beforeBind();\n      await this.beforeBind();\n\n      this.riba = new Riba();\n      this.view = this.getView();\n      if (this.view) {\n        this.scope = this.view.models;\n        this.view.bind();\n      }\n\n      await this._afterBind();\n      await this.afterBind();\n    } catch (error) {\n      this._binds = false;\n      this._bound = false;\n      this.throw(error as Error);\n    }\n\n    return this.view;\n  }\n\n  protected getView() {\n    try {\n      const viewOptions = this.riba?.getViewOptions({\n        handler: this.eventHandler(this),\n        formatters: {\n          call: this.callFormatterHandler(this),\n          args: this.argsFormatterHandler(this),\n        },\n      });\n\n      if (viewOptions) {\n        const view = new View(\n          Array.prototype.slice.call(this.childNodes),\n          this.scope,\n          viewOptions\n        );\n        return view;\n      }\n      return null;\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  public async unbind() {\n    try {\n      if (this.view) {\n        this._binds = false;\n        this._bound = false;\n        this.view.unbind();\n        this.view = null;\n      }\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n\n  protected async build() {\n    try {\n      if (this.view) {\n        this.view.build();\n      }\n    } catch (error) {\n      this.throw(error as Error);\n    }\n  }\n}\n","import { Component, ScopeBase } from \"@ribajs/core\";\nimport { camelCase, parseJsonString, parseType } from \"@ribajs/utils\";\n\nexport type AttributeType = string;\n\nexport interface TemplateAttribute {\n  name: string;\n  type?: AttributeType;\n  required?: boolean;\n}\n\nexport type TemplateAttributes = Array<TemplateAttribute>;\n\nexport interface Scope extends ScopeBase {\n  items?: Array<any>;\n}\n\nexport abstract class TemplatesComponent extends Component {\n  protected templateAttributes: TemplateAttributes = [];\n\n  protected templateReady = false;\n\n  public abstract scope: Scope;\n\n  protected connectedCallback() {\n    this.addItemsByTemplate();\n    super.connectedCallback();\n    this.removeTemplates();\n    this.bindIfReady();\n  }\n\n  protected ready() {\n    return super.ready() && this.templateReady;\n  }\n\n  /**\n   * Called before getting attribute value, use this method to transform the attribute value if you wish\n   * @param name Attribute name\n   * @param value Attribute value\n   */\n  protected transformTemplateAttribute(\n    name: string,\n    value: any,\n    type?: AttributeType\n  ) {\n    switch (type) {\n      case \"number\":\n        return Number(value);\n      case \"boolean\":\n        return value === \"true\";\n      case \"string\":\n        if (typeof value === \"string\") {\n          return value;\n        }\n        if (typeof value?.toString === \"function\") {\n          return value.toString();\n        }\n      case \"object\":\n        return parseJsonString(value);\n    }\n    return parseType(value).value;\n  }\n\n  /**\n   * Called before getting all attribute values, use this method to transform the attribute values if you wish\n   * @param attributes\n   */\n  protected transformTemplateAttributes(attributes: any, index: number) {\n    attributes.index = attributes.index || index;\n    return attributes;\n  }\n\n  protected getTemplateAttributes(\n    tpl: HTMLTemplateElement | HTMLElement,\n    index: number\n  ) {\n    const attributes: any = {};\n    for (const attribute of this.templateAttributes) {\n      const attrValue = tpl.getAttribute(attribute.name);\n      if (typeof attrValue !== \"string\" && attribute.required) {\n        console.error(\n          new Error(`template \"${attribute.name}\" attribute is required!`)\n        );\n      } else {\n        attributes[camelCase(attribute.name)] = this.transformTemplateAttribute(\n          attribute.name,\n          tpl.getAttribute(attribute.name)\n        );\n      }\n    }\n    return this.transformTemplateAttributes(attributes, index);\n  }\n\n  protected addItemByTemplate(\n    tpl: HTMLTemplateElement | HTMLElement,\n    index: number\n  ) {\n    const attributes = this.getTemplateAttributes(tpl, index);\n    const content = tpl.innerHTML;\n    if (!this.scope.items) {\n      this.scope.items = [];\n    }\n    this.scope.items.push({ ...attributes, content });\n  }\n\n  protected addItemsByTemplate() {\n    const templates = this.querySelectorAll<HTMLTemplateElement | HTMLElement>(\n      \"template, .template\"\n    );\n    for (let index = 0; index < templates.length; index++) {\n      const tpl = templates[index];\n\n      this.addItemByTemplate(tpl, index);\n    }\n    this.templateReady = true;\n  }\n\n  protected removeTemplates() {\n    const templates = this.querySelectorAll<HTMLTemplateElement | HTMLElement>(\n      \"template, .template\"\n    );\n    for (let index = 0; index < templates.length; index++) {\n      const tpl = templates[index];\n      this.removeChild(tpl);\n    }\n  }\n\n  protected hasOnlyTemplateChilds() {\n    return !Array.from(this.children).some(\n      (child) =>\n        child.nodeName !== \"TEMPLATE\" &&\n        !child.classList?.contains(\"template\") &&\n        child.nodeName !== \"#text\"\n    );\n  }\n}\n","import {\n  isString,\n  isObject,\n  isDefined,\n  isNumber,\n} from \"@ribajs/utils/src/type.js\";\n\n/**\n * Returns true if an object, array or string contains an index, object, property or substring.\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const containsFormatter = {\n  name: \"contains\",\n  read(value: string | any | any[], attr: string | number, search: string) {\n    if (isString(value)) {\n      return value.indexOf(attr) > -1;\n    } else if (Array.isArray(value)) {\n      if (!isNumber(attr)) {\n        console.warn(\n          \"[containsFormatter] The second parameter must be of type number for arrays but is \" +\n            typeof attr\n        );\n      }\n      attr = Number(attr);\n      if (isDefined(attr)) {\n        if (isDefined(search)) {\n          return value[attr] === search;\n        } else {\n          return value.includes(attr);\n        }\n      }\n    } else if (isObject(value)) {\n      if (isDefined(attr)) {\n        if (isDefined(search)) {\n          return value[attr] === search;\n        } else {\n          if (!isString(attr)) {\n            console.warn(\n              \"[containsFormatter] The second parameter must be of type string for objects\" +\n                typeof attr\n            );\n          }\n\n          return Object.keys(value).includes(String(attr));\n        }\n      }\n    }\n    return false;\n  },\n};\n","/**\n * Returns the size of a string (the number of characters) or an array (the number of elements).\n * @see https://help.shopify.com/themes/liquid/filters/array-filters#size\n */\nexport const sizeFormatter = {\n  name: \"size\",\n  read(value: any[] | string) {\n    return value && value.length ? value.length : 0;\n  },\n};\n","import { sizeFormatter } from \"./size.formatter.js\";\n\nexport const emptyFormatter = {\n  name: \"empty\",\n  read(a: any[] | string) {\n    return sizeFormatter.read(a) <= 0;\n  },\n};\n","import { isObject, isString, isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Get property of object or get item by index of array\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const getFormatter = {\n  name: \"get\",\n  read(value: any | any[] | string, key: string | number) {\n    if (isObject(value) || Array.isArray(value)) {\n      return value[key];\n    }\n    if (isString(value)) {\n      if (isNumber(key)) {\n        return (value as string).charAt(key as number);\n      }\n    }\n    return null;\n  },\n};\n","import { getFormatter } from \"./get.formatter.js\";\n\n/**\n * Array formatter to get the first element of an array\n */\nexport const firstFormatter = {\n  name: \"first\",\n  read(value: any | any[] | string) {\n    return getFormatter.read(value, 0);\n  },\n};\n","/**\n * Returns true if value index is the last index of the array. Returns false if it is not the last index.\n * ```\n *  <div rv-each-image=\"product.images\" rv-hide=\"product.images | last %image%\"></div>\n * ```\n * @see https://help.shopify.com/themes/liquid/objects/for-loops#forloop-last\n */\nexport const isLastFormatter = {\n  name: \"isLast\",\n  read(array: any[], i: number) {\n    return array.length === i + 1;\n  },\n};\n","import { getFormatter } from \"./get.formatter.js\";\n\n/**\n * Array formatter to get the last element of an array\n */\nexport const lastFormatter = {\n  name: \"last\",\n  read(array: any[]) {\n    return getFormatter.read(array, array.length - 1);\n  },\n};\n","import { isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Gets back random value of array\n * @example <div rv-add-class='\"[\"col-2\", \"col-3\", \"col-4\", \"col-5\", \"col-6\"]\" | parse | random'>\n *\n * Or gets back a randon number\n * Random number between 0 and 6:\n * @example <div rv-add-class='6 | random'>\n * Random number between 1 and 6:\n * @example <div rv-add-class='6 | random 1'>\n */\nexport const randomFormatter = {\n  name: \"random\",\n  read(arrayOrMaxNumber: any, min = 0) {\n    // If is array\n    if (Array.isArray(arrayOrMaxNumber)) {\n      return arrayOrMaxNumber[\n        Math.floor(Math.random() * arrayOrMaxNumber.length)\n      ];\n    }\n    // If is number\n    if (isNumber(arrayOrMaxNumber)) {\n      const max = arrayOrMaxNumber as number;\n      return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n    return null;\n  },\n};\n","import { isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Array formatter to get a subarray from array\n */\nexport const rangeFormatter = {\n  name: \"range\",\n  read(arr: any[], start: number, end: number) {\n    start = Number(isNumber(start) ? start : 0);\n    end = Number(isNumber(end) ? end : arr.length - 1);\n    if (end > arr.length - 1) {\n      end = arr.length - 1;\n    }\n    if (start > end) {\n      return [];\n    }\n    return arr.slice(Number(start || 0), 1 + end);\n  },\n};\n","import { isObject } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Sets property of object, array or value\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const setFormatter = {\n  name: \"set\",\n  read(obj: any | any[], key: string | number, value?: any) {\n    // the key is the value if value is not set\n    if (!value) {\n      value = key;\n    }\n\n    if (isObject(obj) || Array.isArray(obj)) {\n      obj[key] = value;\n    } else {\n      obj = value;\n    }\n    return obj;\n  },\n};\n","/**\n * Returns true if an array overlaps with another array.\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const overlapsFormatter = {\n  name: \"overlaps\",\n  read(value: any[], search: any[]) {\n    for (const a of value) {\n      for (const b of search) {\n        if (a.equals && a.equals(b)) {\n          return true;\n        }\n        if (a === b) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n};\n","/**\n * Joins value with a given delimeter\n */\nexport const joinFormatter = {\n  name: \"join\",\n  read(value: any[], delimeter: string | undefined) {\n    return value.join(delimeter);\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a && b\n */\nexport const andFormatter: Formatter = {\n  name: \"and\",\n  read(a: boolean, b: boolean) {\n    return a && b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a >= b && a <= c\n */\nexport const betweenFormatter: Formatter = {\n  name: \"between\",\n  read(num: number, ...nums: any[]) {\n    return num >= nums[0] && num <= nums[1];\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * equal or greater than\n * a >= b\n */\nexport const egtFormatter: Formatter = {\n  name: \"egt\",\n  read(a: number, b: number) {\n    return a >= b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a === b\n */\nexport const eqFormatter: Formatter = {\n  name: \"eq\",\n  read(a: any, b: any) {\n    return a === b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * greater than\n * a > b\n */\nexport const gtFormatter: Formatter = {\n  name: \"gt\",\n  read(a: number, b: number) {\n    return a > b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a !== b\n */\nexport const neFormatter: Formatter = {\n  name: \"ne\",\n  read(a: any, b: any) {\n    return a !== b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * lower than\n * a < b\n */\nexport const ltFormatter: Formatter = {\n  name: \"lt\",\n  read(a: number, b: number) {\n    return a < b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * euqal or lower than\n * a <= b\n */\nexport const eltFormatter: Formatter = {\n  name: \"elt\",\n  read(a: number, b: number) {\n    return a <= b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a || b\n */\nexport const orFormatter: Formatter = {\n  name: \"or\",\n  read(a: boolean, b: boolean) {\n    return a || b;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * !a\n */\nexport const notFormatter: Formatter = {\n  name: \"not\",\n  read(a: boolean) {\n    return !a;\n  },\n};\n","/**\n * Adds a number to an value.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#plus\n */\nexport const plusFormatter = {\n  name: \"plus\",\n  read(a: string | number, b: string | number) {\n    return Number(a) + Number(b);\n  },\n};\n","/**\n * Subtracts a number from an output.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#minus\n */\nexport const minusFormatter = {\n  name: \"minus\",\n  read(a: string | number, b: string | number) {\n    return Number(a) - Number(b);\n  },\n};\n","/**\n * Multiplies an value by a number.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#times\n */\nexport const timesFormatter = {\n  name: \"times\",\n  read(a: string | number, b: string | number) {\n    return Number(a) * Number(b);\n  },\n};\n","/**\n * Divides an output by a number. The output is rounded down to the nearest integer.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#divided_by\n */\nexport const dividedByFormatter = {\n  name: \"dividedBy\",\n  read(a: string | number, b: string | number) {\n    return Number(a) / Number(b);\n  },\n};\n","/**\n * Divides an value by a number and returns the remainder.\n * @see https://help.shopify.com/themes/liquid/filters/math-filters#modulo\n */\nexport const moduloFormatter = {\n  name: \"modulo\",\n  read(a: string | number, b: string | number) {\n    return Number(a) % Number(b);\n  },\n};\n","/**\n * Greatest common divisor (GCD) useful to calculate a ratio\n * @see https://stackoverflow.com/a/1186465/1465919\n */\nconst _gcd = (a: number, b: number): number => {\n  return b === 0 ? a : _gcd(b, a % b);\n};\n\nexport const gcdFormatter = {\n  name: \"gcd\",\n  read: _gcd,\n};\n","/**\n * Check if a number is even or not\n */\nexport const evenFormatter = {\n  name: \"even\",\n  read(num: number) {\n    return num % 2 === 0;\n  },\n};\n","export const unevenFormatter = {\n  name: \"uneven\",\n  read(num: number) {\n    return num % 2 !== 0;\n  },\n};\n","import { justDigits, isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Just get the digits of a string, useful to remove px from css value\n * @see http://stackoverflow.com/a/1100653/1465919\n */\nexport const digitsFormatter = {\n  name: \"digits\",\n  read(str: string) {\n    if (isNumber(str)) {\n      return str;\n    }\n    return justDigits(str);\n  },\n};\n","import type { Formatter } from \"../../types/index.js\";\nimport { FormatterFuntionParam } from \"./call.formatter.js\";\nimport { Binder } from \"../../binder.js\";\n\n/**\n * Sets arguments to a function without directly call them\n * ```html\n * <button rv-on-click=\"sum | args 1 2\"></button>\n * ```\n * @param fn The function the event handler should call\n * @param fnArgs the parameters you wish to get called the function with\n */\nexport const argsFormatter: Formatter = {\n  name: \"args\",\n  read(fn: FormatterFuntionParam, ...fnArgs: any[]) {\n    return (event: Event, scope: any, el: HTMLElement, binder: Binder) => {\n      // append the event handler args to passed args\n      fnArgs.push(event);\n      fnArgs.push(scope);\n      fnArgs.push(el);\n      fnArgs.push(binder);\n      return fn.apply(this, fnArgs);\n    };\n  },\n};\n","import { Formatter } from \"@ribajs/core\";\n\nexport const debugFormatter: Formatter = {\n  name: \"debug\",\n  read(\n    toPrint: any,\n    level: \"log\" | \"debug\" | \"info\" | \"error\" | \"warn\" = \"debug\"\n  ) {\n    console[level](toPrint);\n    return toPrint;\n  },\n};\n","import { isString, isDefined } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Sets a default value if the first value is not set\n * @see https://gist.github.com/der-On/cdafe908847e2b882691\n */\nexport const defaultFormatter = {\n  name: \"default\",\n  read(value: any, defaultValue: any) {\n    if (isDefined(value)) {\n      if (isString(value)) {\n        if (value.length > 0) {\n          return value;\n        } else {\n          return defaultValue;\n        }\n      }\n      if (value === null) {\n        return defaultValue;\n      }\n      return value;\n    }\n    return defaultValue;\n  },\n};\n","import { isDesktop } from \"@ribajs/utils\";\n\nexport const isDesktopFormatter = {\n  name: \"is-desktop\",\n  read() {\n    return isDesktop();\n  },\n};\n","import { isMobile } from \"@ribajs/utils\";\n\nexport const isMobileFormatter = {\n  name: \"is-mobile\",\n  read() {\n    return isMobile();\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n// babel misinterprets the \"this\" fake parameter, so we define it in this interfaces\nexport type FormatterFuntionParam = (this: any, ...args: any[]) => any;\n\n/**\n * Calls a function with arguments\n * @param fn The function you wish to call\n * @param args the parameters you wish to call the function with\n */\nexport const callFormatter: Formatter = {\n  name: \"call\",\n  read(fn: FormatterFuntionParam, ...args: any[]) {\n    return fn.apply(this, args);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Calls a function by name with arguments\n * @param object The object that contains the function you wish to call\n * @param name The name of the function you wish to call\n * @param args the parameters you wish to call the function with\n */\nexport const callNameFormatter: Formatter = {\n  name: \"call-name\",\n  read: function (object: any, name: string, ...args: any[]) {\n    return object[name](...args);\n  },\n};\n","/* eslint-disable prefer-spread */\n/* eslint-disable prefer-rest-params */\nimport { Formatter } from \"@ribajs/core\";\n\n/**\n * Calls a method on the given object. The first parameters defines the object and the second the methodname.\n * Target will be passed as the first argument to the method.\n * @see https://github.com/matthieuriolo/rivetsjs-stdlib#map\n * @example\n * ```html\n * <span rv-text=\"10 | map 'Math' 'sin'\"></span>\n * ```\n * @returns e.g. as in the example: `<span>-0.5440211108893699</span>`\n */\nexport const mapFormatter: Formatter = {\n  name: \"map\",\n  /**\n   * Calls a method on the given object. The first parameters defines the object and the second the method name.\n   * Target will be passed as the first argument to the method.\n   * @see https://github.com/matthieuriolo/rivetsjs-stdlib#map\n   * @example\n   * ```html\n   * <span rv-text=\"10 | map 'Math' 'sin'\"></span>\n   * ```\n   * @returns e.g. as in the example: `<span>-0.5440211108893699</span>`\n   * @param target\n   * @param obj\n   * @param prop\n   */\n  read(target: any, obj: any, prop: string) {\n    const args = Array.prototype.slice.call(arguments);\n    args.splice(1, 2);\n    return obj[prop].apply(obj, args);\n  },\n};\n","import { getOS } from \"@ribajs/utils\";\n\nexport const osFormatter = {\n  name: \"os\",\n  read() {\n    return getOS();\n  },\n};\n","/**\n * Prefers the first formatter parameter before left parameter\n */\nexport const preferFormatter = {\n  name: \"prefer\",\n  read(value: any, preferValue: any) {\n    return preferValue || value;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n/**\n * a ? b : c\n */\nexport const ternaryFormatter: Formatter = {\n  name: \"ternary\",\n  read(condition: any, yes, no) {\n    return condition ? yes : no;\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Appends characters to a string.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#append\n */\nexport const appendFormatter: Formatter = {\n  name: \"append\",\n  read(a: string, b: string) {\n    return a + b;\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { capitalize } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Uppercases the first letter of a string\n */\nexport const capitalizeFormatter: Formatter = {\n  name: \"capitalize\",\n  read(str: string) {\n    return capitalize(str);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Cats a string\n * If the first parameter is -1 the string will not be uncut\n * @example\n * <p rv-text=\"'abcdefghijklnmopqrstuvwxyzabcdefghijklnmopqrstuvwxyz' | cut 3 '...'\"></p>\n * -> <p>abc...</p>\n *\n * <p rv-text=\"'abcdefghijklnmopqrstuvwxyzabcdefghijklnmopqrstuvwxyz' | cut 3\"></p>\n * -> <p>abc</p>\n */\nexport const cutFormatter: Formatter = {\n  name: \"cut\",\n  read(str: string, cutAt: number, delimitation = \"\") {\n    if (!str) {\n      return \"\";\n    }\n    if (typeof str !== \"string\") {\n      console.warn(\"[cutFormatter] Value must be of type string\");\n      return str;\n    }\n    if (str.length > cutAt) {\n      return str.substring(cutAt, cutAt === -1 ? undefined : -1) + delimitation;\n    } else {\n      return str;\n    }\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Converts a string into lowercase.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#downcase\n */\nexport const downcaseFormatter: Formatter = {\n  name: \"downcase\",\n  read(str: string) {\n    return str.toLowerCase();\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Returns true if the sequence of elements of searchString converted to a String is the same as the corresponding elements of this object (converted to a String) starting at endPosition  length(this).\n * Otherwise returns false.\n *\n * @example\n * <p rv-if=\"'abcdefg' | ends-with 'efg'\">Hello World!</p>\n * -> <p>Hello World!</p>\n */\nexport const endsWithFormatter: Formatter = {\n  name: \"ends-with\",\n  read(str: string, checkStart: string) {\n    if (typeof str !== \"string\") {\n      console.warn(\"[endsWithFormatter] Value must be of type string\");\n      return str;\n    }\n    return str.endsWith(checkStart);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { emptyFormatter } from \"../array/empty.formatter.js\";\nimport { isString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Check if value is a string and not empty\n */\nexport const filledFormatter: Formatter = {\n  name: \"filled\",\n  read(str: string) {\n    return isString(str) && !emptyFormatter.read(str.replace(/\\s/g, \"\"));\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { handleize } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Formats a string into a handle.\n * E.g. '100% M & Ms!!!' -> 100-m-ms\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#handle-handleize\n */\nexport const handleizeFormatter: Formatter = {\n  name: \"handleize\",\n  read(str: string) {\n    if (!str) {\n      console.warn(\"[handleizeFormatter] str is not set\");\n      return \"\";\n    }\n    return handleize(str);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\nexport const matchFormatter: Formatter = {\n  name: \"match\",\n  read(a: string, regexp: string, flags?: string) {\n    if (!a || !regexp) {\n      return false;\n    }\n    return a.match(new RegExp(regexp, flags));\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * The padStart formatter pads the current string with another string (multiple times, if needed) until the resulting string reaches the given length.\n * The padding is applied from the start of the current string.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\n */\nexport const padStartFormatter: Formatter = {\n  name: \"padStart\",\n  /**\n   * The padStart formatter pads the current string with another string (multiple times, if needed) until the resulting string reaches the given length.\n   * The padding is applied from the start of the current string.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\n   * @param target\n   * @param length The length of the resulting string once the current `str` has been padded. If the value is less than `str.length`, then `str` is returned as-is.\n   * @param padString The string to pad the current `str` with. If `padString` is too long to stay within the `targetLength`, it will be truncated from the end. The default value is `\" \"` (`U+0020 'SPACE'`).\n   */\n  read(target: string, length = 2, padString = \"0\") {\n    return target.padStart(length, padString);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * The padEnd formatters pads the current string with a given string (repeated, if needed) so that the resulting string reaches a given length.\n * The padding is applied from the end of the current string.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n */\nexport const padEndFormatter: Formatter = {\n  name: \"padEnd\",\n  /**\n   *\n   * The padEnd formatters pads the current string with a given string (repeated, if needed) so that the resulting string reaches a given length.\n   * The padding is applied from the end of the current string.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n   *\n   * @param target\n   * @param length The length of the resulting string once the current `str` has been padded. If the value is lower than `str.length`, the current string will be returned as-is.\n   * @param padString The string to pad the current `str` with. If `padString` is too long to stay within `targetLength`, it will be truncated: for left-to-right languages the left-most part and for right-to-left languages the right-most will be applied. The default value for this parameter is \" \" (`U+0020`).\n   */\n  read(target: string, length = 2, padString = \"0\") {\n    return target.padEnd(length, padString);\n  },\n};\n","import { Formatter } from \"@ribajs/core\";\n\n/**\n * Returns the integer representation of the given target.\n * @see https://github.com/matthieuriolo/rivetsjs-stdlib/blob/master/src/rivetsstdlib.js#L128\n */\nexport const toIntegerFormatter: Formatter = {\n  name: \"to-integer\",\n  /**\n   * Returns the integer representation of the given target.\n   * @param target\n   */\n  read(target: any) {\n    const ret = parseInt((target * 1) as any, 10);\n    return isNaN(ret) ? 0 : ret;\n  },\n};\n","import { Formatter } from \"@ribajs/core\";\n\n/**\n * Returns the float representation of the given target\n * @see https://github.com/matthieuriolo/rivetsjs-stdlib/blob/master/src/rivetsstdlib.js#L133\n */\nexport const toFloatFormatter: Formatter = {\n  name: \"to-float\",\n  /**\n   * Returns the integer representation of the given target.\n   * @param target\n   */\n  read(target: any) {\n    const ret = parseFloat((target * 1.0) as any);\n    return isNaN(ret) ? 0.0 : ret;\n  },\n};\n","import { Formatter } from \"@ribajs/core\";\nimport { toIntegerFormatter } from \"./to-integer.formatter.js\";\nimport { toFloatFormatter } from \"./to-float.formatter.js\";\n\nexport const toDecimalFormatter: Formatter = {\n  name: \"to-decimal\",\n  read(target: any) {\n    if (!toIntegerFormatter.read) {\n      throw new Error(\"toIntegerFormatter must have a read function\");\n    }\n    if (!toFloatFormatter.read) {\n      throw new Error(\"toFloatFormatter must have a read function\");\n    }\n    const retI = toIntegerFormatter.read(target * 1);\n    const retF = toFloatFormatter.read(target);\n    return retI == retF ? retI : retF;\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n\n/**\n * Checks if value is a number\n * @see https://github.com/matthieuriolo/rivetsjs-stdlib/blob/master/src/rivetsstdlib.js#L82\n */\nexport const isIntegerFormatter: Formatter = {\n  name: \"is-integer\",\n  read(n: number) {\n    /**\n     * Thanks a lot to Dagg Nabbit\n     * http://stackoverflow.com/questions/3885817/how-to-check-if-a-number-is-float-or-integer\n     */\n    return n === +n && n === (n | 0);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { isNumber } from \"@ribajs/utils/src/type.js\";\nimport { toDecimalFormatter } from \"../type/to-decimal.formatter.js\";\nimport { isIntegerFormatter } from \"../type/is-integer.formatter.js\";\n\n// TODO set by current locale\nconst DEFAULT_DECIMAL_SEPARATOR = \".\";\nconst DEFAULT_THOUSAND_SEPARATOR = \"'\";\nconst DEFAULT_PRECISION = 2;\n\n/**\n * Returns a formatted version of the target as string.\n * The number will always be rounded after the DIN 1333 (1.55 => 1.6 and -1.55 => -1.6)\n */\nexport const numberFormatFormatter: Formatter = {\n  name: \"numberFormat\",\n  /**\n   * Returns a formatted version of the target as string.\n   * The number will always be rounded after the DIN 1333 (1.55 => 1.6 and -1.55 => -1.6)\n   * @param target\n   * @param precision (default: 2)\n   * @param decimalSeparator (default: \".\")\n   * @param thousandSeparator (default: \"'\")\n   */\n  read(\n    target: number,\n    precision = DEFAULT_PRECISION,\n    decimalSeparator = DEFAULT_DECIMAL_SEPARATOR,\n    thousandSeparator = DEFAULT_THOUSAND_SEPARATOR\n  ) {\n    if (!toDecimalFormatter.read) {\n      throw new Error(\"toDecimalFormatter must have a read function\");\n    }\n    if (!isIntegerFormatter.read) {\n      throw new Error(\"isIntegerFormatter must have a read function\");\n    }\n    target = isNumber(target) ? target : toDecimalFormatter.read(target);\n\n    if (!isIntegerFormatter.read(precision)) {\n      precision = DEFAULT_PRECISION;\n    }\n\n    /*\n     * Thanks to user2823670\n     * http://stackoverflow.com/questions/10015027/javascript-tofixed-not-rounding\n     */\n    let retStr = (+(\n      Math.round(+(Math.abs(target) + \"e\" + precision)) +\n      \"e\" +\n      -precision\n    )).toFixed(precision);\n    if (target < 0) retStr = \"-\" + retStr;\n\n    /**\n     * Thanks to Elias Zamaria\n     * http://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n     */\n    const ret = retStr.split(\".\");\n    if (ret.length == 2) {\n      return (\n        ret[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandSeparator) +\n        decimalSeparator +\n        ret[1]\n      );\n    }\n\n    return ret[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandSeparator);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\nexport const pluralizeFormatter: Formatter = {\n  name: \"pluralize\",\n  read(input: any, singular: string, plural: string) {\n    if (plural === null) {\n      plural = singular + \"s\";\n    }\n    if (Array.isArray(input)) {\n      input = input.length;\n    }\n    if (input === 1) {\n      return singular;\n    } else {\n      return plural;\n    }\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Prepends characters to a string.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#prepend\n */\nexport const prependFormatter: Formatter = {\n  name: \"prepend\",\n  read(a: string, b: string) {\n    return b + a;\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Converts a string into uppercase.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#upcase\n */\nexport const upcaseFormatter: Formatter = {\n  name: \"upcase\",\n  read(str: string) {\n    return str.toUpperCase();\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Replaces all occurrences of a string with a substring.\n * @see https://help.shopify.com/en/themes/liquid/filters/string-filters#replace\n */\nexport const replaceFormatter: Formatter = {\n  name: \"replace\",\n  read(str: string, value: string, replaceValue: string) {\n    return str.replace(new RegExp(value, \"g\"), replaceValue);\n  },\n};\n","/* tslint:disable:variable-name */\nimport { Formatter } from \"../../types/index.js\";\n\n/**\n * Replaces the first occurrence of a string with a substring.\n * @see https://help.shopify.com/en/themes/liquid/filters/string-filters#replace_first\n */\nexport const replaceFirstFormatter: Formatter = {\n  name: \"replaceFirst\",\n  read(str: string, value: string, replaceValue: string) {\n    return str.replace(value, replaceValue);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * The `slice` formatter returns a substring, starting at the specified index.\n * An optional second parameter can be passed to specify the length of the substring.\n * If no second parameter is given, the substring continues to the end of string.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#slice\n */\nexport const sliceFormatter: Formatter = {\n  name: \"slice\",\n  read(value: any, start: number, end: number) {\n    return value.slice(start, end);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Returns true if the sequence of elements of searchString converted to a String is the same as the corresponding elements of this object (converted to a String) starting at position.\n * Otherwise returns false.\n *\n * @example\n * <p rv-if=\"'abcdefg' | starts-with 'abc'\">Hello World!</p>\n * -> <p>Hello World!</p>\n */\nexport const startsWithFormatter: Formatter = {\n  name: \"starts-with\",\n  read(str: string, checkStart: string) {\n    if (typeof str !== \"string\") {\n      console.warn(\"[startsWithFormatter] Value must be of type string\");\n      return str;\n    }\n    return str.startsWith(checkStart);\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\n\n/**\n * Strips tabs, spaces, and newlines (all whitespace) from the left and right side of a string.\n * @see https://help.shopify.com/themes/liquid/filters/string-filters#strip\n */\nexport const stripFormatter: Formatter = {\n  name: \"strip\",\n  read(str: string) {\n    return str.trim();\n  },\n};\n","import { Formatter } from \"../../types/index.js\";\nimport { stripHtml } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Strips all HTML tags from a string.\n * @see https://help.shopify.com/en/themes/liquid/filters/string-filters#strip_html\n */\nexport const stripHtmlFormatter: Formatter = {\n  name: \"strip-html\",\n  read(html: string) {\n    return stripHtml(html);\n  },\n};\n","/**\n * Converts a variable to boolean\n */\nexport const booleanFormatter = {\n  name: \"boolean\",\n  read(value: string | boolean) {\n    if (value === \"true\") {\n      return true;\n    } else if (value === \"false\") {\n      return false;\n    } else {\n      return !!value;\n    }\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\n\n/**\n * Checks if value is an array\n */\nexport const isArrayFormatter: Formatter = {\n  name: \"is-array\",\n  read: Array.isArray,\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isBoolean } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Checks if value is an boolean\n */\nexport const isBooleanFormatter: Formatter = {\n  name: \"is-boolean\",\n  read: isBoolean,\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isDefined } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Checks if value is defined\n */\nexport const isDefinedFormatter: Formatter = {\n  name: \"is-defined\",\n  read: isDefined,\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Checks if value is a number\n */\nexport const isNumberFormatter: Formatter = {\n  name: \"is-number\",\n  read: isNumber,\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isObject } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Checks if value is a object\n */\nexport const isObjectFormatter: Formatter = {\n  name: \"is-object\",\n  read: isObject,\n};\n","import { isString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Check if value is a string\n */\nexport const isStringFormatter = {\n  name: \"is-string\",\n  read(str: string) {\n    return isString(str);\n  },\n};\n","import { Formatter } from \"../../types/formatter.js\";\nimport { isUndefined } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Check if value is undefined\n */\nexport const isUndefinedFormatter: Formatter = {\n  name: \"is-undefined\",\n  read: isUndefined,\n};\n","import { jsonStringify } from \"@ribajs/utils\";\n\n/**\n * Converts a string into a JSON string.\n */\nexport const jsonFormatter = {\n  name: \"json\",\n  read(object: any, space = 2, replaceSingleQuote = true) {\n    return jsonStringify(object, space, replaceSingleQuote);\n  },\n};\n","import { isObject, parseType } from \"@ribajs/utils/src/type.js\";\n\n/**\n * parse json, base64 or any other value string to to its real value\n * @example <div rv-add-class='\"[\"col-2\", \"col-3\", \"col-4\", \"col-5\", \"col-6\"]\" | parse | random'>\n */\nexport const parseFormatter = {\n  name: \"parse\",\n  read(str?: any) {\n    if (\n      isObject(str as any) ||\n      Array.isArray(str as any) ||\n      typeof str === \"boolean\" ||\n      typeof str === \"number\"\n    ) {\n      console.warn(\n        \"[parseFormatter] You do not need to parse the value because since it already been parsed\"\n      );\n      return str;\n    }\n\n    if (typeof str === \"string\") {\n      return parseType(str, true).value;\n    } else {\n      return null;\n    }\n  },\n};\n","import { toBase64 } from \"@ribajs/utils\";\n\n/**\n * Decodes a string into a base64 string.\n */\nexport const toBase64Formatter = {\n  name: \"toBase64\",\n  read(object: any) {\n    return toBase64(object);\n  },\n};\n","import { isObject, getString } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Parses a value to string\n * @param value The value you want to parse to string\n * @param def Default value if value is undefined\n */\nexport const toStringFormatter = {\n  name: \"to-string\",\n  read(value: any, def: string) {\n    // If value is an array convert each value in array to string\n    if (Array.isArray(value)) {\n      for (const i in value as Array<any>) {\n        if (value[i]) {\n          value[i] = getString(value[i]);\n        }\n      }\n    } else if (isObject(value)) {\n      for (const key in value) {\n        value[key] = getString(value[key]);\n      }\n    } else {\n      value = getString(value);\n    }\n\n    // If default value is set return the default value if num is 0, null or undefined\n    if (def) {\n      return value ? value : def;\n    }\n\n    return value;\n  },\n};\n","import { getNumber } from \"@ribajs/utils/src/type.js\";\n\n/**\n * Parse a string to number / float\n * @see http://stackoverflow.com/a/1100653/1465919\n */\nexport const toNumberFormatter = {\n  name: \"to-number\",\n  read(str: string, def: number) {\n    const num = getNumber(str);\n    // If default value is set return the default value if num is 0, null or undefined\n    if (def) {\n      return num ? num : def;\n    }\n    return num;\n  },\n};\n","import { RibaModule, CoreModuleOptions } from \"./types/index.js\";\nimport * as binders from \"./binders/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as components from \"./components/index.js\";\nimport * as adapters from \"./adapters/index.js\";\n\nexport const coreModule: RibaModule<CoreModuleOptions> = {\n  formatters,\n  binders,\n  services,\n  components,\n  adapters,\n  init(options = {}) {\n    services.CoreService.setSingleton(options);\n\n    window.onerror = (msg, url, line, col, error) => {\n      console.error(msg, url, line, col, error);\n    };\n    window.addEventListener(\"error\", (event: Event) => {\n      console.error(event);\n    });\n\n    return this;\n  },\n};\n","import { State } from \"../types/state.js\";\n/**\n * HistoryManager helps to keep track of the navigation\n */\nexport class HistoryManager {\n  private static instance: HistoryManager;\n\n  /**\n   * Keep track of the status in historic order\n   */\n  private readonly history: State[] = [];\n\n  constructor() {\n    if (HistoryManager.instance) {\n      return HistoryManager.instance;\n    }\n\n    HistoryManager.instance = this;\n    return HistoryManager.instance;\n  }\n\n  /**\n   * Return information about the current status\n   */\n  public currentStatus(): State {\n    return this.history[this.history.length - 1];\n  }\n\n  /**\n   * Return information about the previous status\n   */\n  public prevStatus(): State | null {\n    const history = this.history;\n\n    if (history.length < 2) {\n      return null;\n    }\n\n    return history[history.length - 2];\n  }\n\n  /**\n   * Add a new set of url and namespace\n   */\n  public add(url: string, namespace: string | null = null) {\n    this.history.push({\n      namespace,\n      url,\n    });\n  }\n}\n","/**\n * Class append to links which have caused an error\n */\nexport const ROUTE_ERROR_CLASS = \"router-error\";\n/**\n * Class name used to ignore links\n */\nexport const IGNORE_CLASS_LINK = \"no-barba\";\n/**\n * Class name used to ignore prefetch on links\n */\nexport const IGNORE_CLASS_PREFETCH = \"no-barba-prefetch\";\n","import { deferred } from \"@ribajs/utils\";\nimport { Transition } from \"../../types/transition.js\";\n\n/**\n * BaseTransition to extend\n */\nexport abstract class BaseTransition implements Transition {\n  protected oldContainer?: HTMLElement;\n\n  protected newContainer?: HTMLElement;\n\n  protected newContainerLoading?: Promise<HTMLElement>;\n\n  protected deferred = deferred();\n\n  protected action: \"replace\" | \"append\";\n\n  constructor(action: \"replace\" | \"append\" = \"replace\") {\n    this.action = action;\n  }\n\n  /**\n   * This function is called from Pjax module to initialize\n   * the transition.\n   *\n   */\n  public async init(\n    oldContainer: HTMLElement,\n    newContainer: Promise<HTMLElement>\n  ): Promise<void> {\n    this.oldContainer = oldContainer;\n\n    this.deferred = deferred();\n    const newContainerLoading = deferred<HTMLElement>();\n    this.newContainerLoading = newContainerLoading.promise;\n\n    this.start();\n\n    this.newContainer = await newContainer;\n    newContainerLoading.resolve(this.newContainer);\n    return this.deferred.promise;\n  }\n\n  /**\n   * This function needs to be called as soon the Transition is finished\n   */\n  public async done() {\n    if (!this.oldContainer) {\n      throw new Error(\"Can't remove old container\");\n    }\n\n    if (this.action === \"replace\") {\n      this.oldContainer.remove();\n    }\n\n    if (!this.newContainer) {\n      throw new Error(\"Can't show new container\");\n    }\n    this.newContainer.style.visibility = \"visible\";\n    return this.deferred.resolve(undefined);\n  }\n\n  /**\n   * Constructor for your Transition\n   */\n  public abstract start(): void;\n}\n","import { BaseTransition } from \"./BaseTransition.js\";\nimport { Transition } from \"../../types/transition.js\";\n\ndeclare global {\n  // tslint:disable: interface-name\n  interface Window {\n    model: any;\n  }\n}\n\n/**\n * Basic Transition object, wait for the new Container to be ready,\n * scroll top, and finish the transition (removing the old container and displaying the new one)\n *\n * @private\n */\nclass CustomTransition extends BaseTransition implements Transition {\n  public async start() {\n    if (!this.newContainerLoading) {\n      throw new Error(\"this.newContainerLoading is not set\");\n    }\n    await this.newContainerLoading;\n    this.finish();\n    return;\n  }\n\n  public async finish() {\n    document.body.scrollTop = 0;\n    return this.done();\n  }\n}\n\nexport { CustomTransition };\n","import { BaseTransition } from \"./BaseTransition.js\";\nimport { Transition } from \"../../types/transition.js\";\nimport { scrollToPosition } from \"@ribajs/utils\";\n\n/**\n * Basic Transition object, wait for the new Container to be ready,\n * scroll top, and finish the transition (removing the old container and displaying the new one)\n *\n * @private\n */\nexport class FadeTransition extends BaseTransition implements Transition {\n  protected scrollToTop: boolean;\n  protected durationMs = 200;\n\n  constructor(scrollToTop = true) {\n    super(\"replace\");\n    this.scrollToTop = scrollToTop;\n  }\n\n  public async start() {\n    if (!this.newContainerLoading) {\n      throw new Error(\"this.newContainerLoading is not set\");\n    }\n\n    if (this.oldContainer) {\n      this.oldContainer.style.transition = `opacity ${this.durationMs}ms`;\n      this.oldContainer.style.opacity = \"0\";\n    }\n\n    if (this.scrollToTop) {\n      await scrollToPosition(window, \"start\", \"vertical\", \"smooth\");\n    }\n\n    const newContainer = await this.newContainerLoading;\n\n    newContainer.style.opacity = \"0\";\n    newContainer.style.transition = `opacity ${this.durationMs}ms`;\n\n    setTimeout(() => {\n      this.finish(newContainer);\n    }, this.durationMs);\n\n    return;\n  }\n\n  public async finish(newContainer: HTMLElement) {\n    newContainer.style.opacity = \"1\";\n    return this.done();\n  }\n}\n","import { BaseTransition } from \"./BaseTransition.js\";\nimport { Transition } from \"../../types/transition.js\";\nimport { scrollToPosition } from \"@ribajs/utils\";\n\n/**\n * Basic Transition object, wait for the new Container to be ready,\n * scroll top, and finish the transition (removing the old container and displaying the new one)\n *\n * @private\n */\nexport class HideShowTransition extends BaseTransition implements Transition {\n  protected action: \"replace\" | \"append\";\n\n  protected scrollToTop: boolean;\n\n  constructor(action: \"replace\" | \"append\" = \"replace\", scrollToTop = true) {\n    super(action);\n    this.action = action;\n    this.scrollToTop = scrollToTop;\n  }\n\n  public async start() {\n    if (!this.newContainerLoading) {\n      throw new Error(\"this.newContainerLoading is not set\");\n    }\n    if (this.oldContainer) {\n      this.oldContainer.style.display = \"none\";\n    }\n\n    if (this.scrollToTop) {\n      await scrollToPosition(window, \"start\", \"vertical\", \"smooth\");\n    }\n\n    await this.newContainerLoading;\n\n    await this.finish();\n\n    if (this.oldContainer) {\n      this.oldContainer.style.display = \"\";\n    }\n\n    return;\n  }\n\n  public async finish() {\n    return this.done();\n  }\n}\n","import { EventDispatcher } from \"@ribajs/events\";\nimport { State } from \"@ribajs/history\";\nimport { extend } from \"@ribajs/utils/src/type.js\";\n\n/**\n * BaseView to be extended\n */\nabstract class BaseView {\n  /**\n   * Namespace of the view.\n   * (need to be associated with the data-namespace of the container)\n   */\n  protected namespace?: string;\n\n  protected container?: HTMLElement;\n\n  private dispatcher = EventDispatcher.getInstance();\n\n  /**\n   * Helper to extend the object\n   */\n  public extend(obj: any) {\n    return extend({ deep: false }, this, obj);\n  }\n\n  /**\n   * Init the view.\n   * P.S. Is suggested to init the view before starting Barba.Pjax.start(),\n   * in this way .onEnter() and .onEnterCompleted() will be fired for the current\n   * container when the page is loaded.\n   */\n  public init() {\n    this.dispatcher.on(\n      \"initStateChange\",\n      (viewId: string, newStatus: State, oldStatus: State) => {\n        if (oldStatus && oldStatus.namespace === this.namespace) {\n          this.onLeave();\n        }\n      }\n    );\n\n    this.dispatcher.on(\n      \"newPageReady\",\n      (\n        viewId: string,\n        newStatus: State,\n        oldStatus: State,\n        container: HTMLElement /*, html: string, isInit: boolean*/\n      ) => {\n        this.container = container;\n        if (newStatus.namespace === this.namespace) {\n          this.onEnter();\n        }\n      }\n    );\n\n    this.dispatcher.on(\n      \"transitionCompleted\",\n      (viewId: string, newStatus: State, oldStatus: State) => {\n        if (newStatus.namespace === this.namespace) {\n          this.onEnterCompleted();\n        }\n\n        if (oldStatus && oldStatus.namespace === this.namespace) {\n          this.onLeaveCompleted();\n        }\n      }\n    );\n  }\n\n  /**\n   * This function will be fired when the container\n   * is ready and attached to the DOM.\n   */\n  protected abstract onEnter(): any;\n\n  /**\n   * This function will be fired when the transition\n   * to this container has just finished.\n   */\n  protected abstract onEnterCompleted(): any;\n\n  /**\n   * This function will be fired when the transition\n   * to a new container has just started.\n   */\n  protected abstract onLeave(): any;\n\n  /**\n   * This function will be fired when the container\n   * has just been removed from the DOM.\n   */\n  protected abstract onLeaveCompleted(): any;\n}\n\nexport { BaseView };\n","import { Response } from \"../../types/response.js\";\n\n/**\n * Object that is going to deal with DOM parsing/manipulation\n * TODO move to @ribajs/core dom utils\n */\nclass Dom {\n  public static getPrefetchLinkElements(content: DocumentFragment | Document) {\n    // router-preload is a custom preloader\n    return content.querySelectorAll(\n      'link[href][rel=\"dns-prefetch\"], link[href][rel=\"preconnect\"], link[href][rel=\"prefetch\"], link[href][rel=\"subresource\"], link[href][rel=\"preload\"], link[href][rel=\"router-preload\"]'\n    ) as NodeListOf<HTMLLinkElement>;\n  }\n\n  public static parseTitle(content: DocumentFragment | Document) {\n    let title = \"\";\n    // title = Dom.findHTMLTagContent('title', template.innerHTML) || '';\n    const titleElement = content.querySelector(\"title\");\n    if (titleElement && titleElement.innerText) {\n      title = titleElement.innerText;\n    }\n    return title;\n  }\n\n  /**\n   * Parse the responseText obtained from the fetch call\n   * @see https://stackoverflow.com/a/41038197/1465919\n   */\n  public static parseResponse(\n    responseText: string,\n    parseTitle: boolean,\n    containerSelector: string,\n    prefetchLinks = true\n  ): Response {\n    let title = \"\";\n    let prefetchLinkElements:\n      | NodeListOf<HTMLLinkElement>\n      | Array<HTMLLinkElement> = [];\n    const template = document.createElement(\"template\") as HTMLTemplateElement;\n    template.innerHTML = responseText;\n\n    if (parseTitle) {\n      title = this.parseTitle(template.content);\n    }\n\n    if (prefetchLinks) {\n      prefetchLinkElements = this.getPrefetchLinkElements(template.content);\n    }\n\n    const container = this.getContainer(template, containerSelector);\n\n    return {\n      container,\n      title,\n      prefetchLinks: prefetchLinkElements,\n    };\n  }\n\n  /**\n   * Use this method only on the first page load\n   */\n  public static parseInitial(\n    parseTitle: boolean,\n    containerSelector: string,\n    prefetchLinks = true\n  ) {\n    let title = \"\";\n    let prefetchLinkElements:\n      | NodeListOf<HTMLLinkElement>\n      | Array<HTMLLinkElement> = [];\n\n    // const template = document.createElement(\"template\") as HTMLTemplateElement;\n    // template.innerHTML = document.body.innerHTML;\n\n    const container = this.getContainer(document, containerSelector);\n\n    if (parseTitle) {\n      title = this.parseTitle(document);\n    }\n\n    if (prefetchLinks) {\n      prefetchLinkElements = this.getPrefetchLinkElements(document);\n    }\n\n    return {\n      container: container,\n      title,\n      prefetchLinks: prefetchLinkElements,\n    };\n  }\n\n  /**\n   * Get the container on the current DOM,\n   * or from an Element passed via argument\n   */\n  public static getContainer(\n    element: HTMLTemplateElement | HTMLElement | Document,\n    containerSelector: string\n  ): HTMLElement {\n    if (!element) {\n      throw new Error(\n        \"Barba.js: [getContainer] No element to get container from, maybe the DOM is not ready!\"\n      );\n    }\n\n    const container = this.parseContainer(element, containerSelector);\n\n    if (!container) {\n      throw new Error(\"[DOM] No container found\");\n    }\n\n    return container;\n  }\n\n  /**\n   * Get the namespace of the container\n   */\n  public static getNamespace(element: HTMLElement): string | null {\n    if (element && element.dataset && element.dataset.namespace) {\n      return element.dataset.namespace;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Put the container on the page\n   */\n  public static putContainer(element: HTMLElement, wrapper: HTMLElement) {\n    element = element as HTMLElement;\n    element.style.visibility = \"hidden\";\n    wrapper.appendChild(element);\n  }\n\n  /**\n   * Get container selector\n   */\n  protected static parseContainer(\n    newPage: HTMLTemplateElement | HTMLElement | Document,\n    containerSelector: string\n  ): HTMLElement {\n    if (!newPage) {\n      const error = new Error(\"New page not loaded!\");\n      console.error(error, newPage);\n      throw error;\n    }\n\n    let result: HTMLElement | null;\n\n    if ((newPage as HTMLTemplateElement).content) {\n      result = (newPage as HTMLTemplateElement).content.querySelector(\n        containerSelector\n      );\n    } else {\n      result = newPage.querySelector(containerSelector);\n    }\n\n    if (!result) {\n      const error = new Error(\n        `No container with selector \"${containerSelector}\" found!`\n      );\n      console.error(error, newPage);\n      throw error;\n    }\n\n    return result;\n  }\n}\n\nexport { Dom };\n","import { Pjax } from \"./index.js\";\nimport { getElementFromEvent } from \"@ribajs/utils/src/dom.js\";\nimport { normalizeUrl } from \"@ribajs/utils/src/url\";\nimport { IGNORE_CLASS_PREFETCH, ROUTE_ERROR_CLASS } from \"../../constants.js\";\n\nexport interface PrefetchInstances {\n  [key: string]: Prefetch;\n}\n\n/**\n * Prefetch\n */\nclass Prefetch {\n  public static getInstance(id = \"main\"): Prefetch {\n    const result = Prefetch.instances[id];\n    if (!result) {\n      return new this(id);\n    }\n    return result;\n  }\n\n  /** singleton instance */\n  protected static instances: PrefetchInstances = {};\n\n  /**\n   * Creates an singleton instance of Prefetch.\n   */\n  constructor(readonly viewId: string) {\n    this.viewId = viewId;\n    if (Prefetch.instances[this.viewId]) {\n      return Prefetch.instances[this.viewId];\n    }\n    Prefetch.instances[this.viewId] = this;\n    this.onLinkEnterIntern = this.onLinkEnterIntern.bind(this);\n  }\n\n  /**\n   * Init the event listener on mouseover and touchstart for all links on the document\n   * for the prefetch\n   *\n   */\n  public init(autobindLinks = false) {\n    if (!window.history.pushState) {\n      return false;\n    }\n    if (autobindLinks) {\n      this.deInit();\n      document.body.addEventListener(\"mouseover\", this.onLinkEnterIntern, {\n        passive: true,\n      });\n      document.body.addEventListener(\"touchstart\", this.onLinkEnterIntern, {\n        passive: true,\n      });\n    }\n  }\n\n  public deInit() {\n    document.body.removeEventListener(\"mouseover\", this.onLinkEnterIntern);\n    document.body.removeEventListener(\"touchstart\", this.onLinkEnterIntern);\n  }\n\n  /**\n   * This method is used from the rv-route binder\n   * @param el\n   */\n  public initBinder(el: HTMLAnchorElement, url: string) {\n    if (!window.history.pushState) {\n      return false;\n    }\n    this.deInitBinder(el, url);\n    el.addEventListener(\"mouseover\", this.onLinkEnter.bind(this, url, el), {\n      passive: true,\n    });\n    el.addEventListener(\"touchstart\", this.onLinkEnter.bind(this, url, el), {\n      passive: true,\n    });\n  }\n\n  public deInitBinder(el: HTMLAnchorElement, url: string) {\n    el.removeEventListener(\"mouseover\", this.onLinkEnter.bind(this, url, el));\n    el.removeEventListener(\"touchstart\", this.onLinkEnter.bind(this, url, el));\n  }\n\n  public onLinkEnter(\n    url: string,\n    el: HTMLAnchorElement | HTMLUnknownElement,\n    evt: Event\n  ) {\n    if (\n      el.classList &&\n      (el.classList.contains(IGNORE_CLASS_PREFETCH) ||\n        el.classList.contains(ROUTE_ERROR_CLASS))\n    ) {\n      return;\n    }\n\n    url = normalizeUrl(url).url;\n\n    const preventCheck = Pjax.preventCheck(url, el, evt);\n\n    // Check if the link is eligible for Pjax\n    if (url && preventCheck) {\n      const pjax = Pjax.getInstance(this.viewId);\n      if (pjax) {\n        pjax.loadResponseCached(url, false, false).catch((error) => {\n          el.classList.add(ROUTE_ERROR_CLASS);\n          console.error(url);\n          console.error(error);\n        });\n      } else {\n        console.warn(\n          `[Prefetch.onLinkEnter] No pjax instance for viewId \"${this.viewId}\" found!`\n        );\n        el.classList.add(ROUTE_ERROR_CLASS);\n      }\n    }\n  }\n\n  public url(url: string) {\n    url = normalizeUrl(url).url;\n\n    const preventCheck = Pjax.preventCheck(url);\n\n    // Check if the link is eligible for Pjax\n    if (url && preventCheck) {\n      const pjax = Pjax.getInstance(this.viewId);\n      if (pjax) {\n        pjax.loadResponseCached(url, false, false).catch((error) => {\n          console.error(error);\n        });\n      } else {\n        console.warn(\n          `[Prefetch.url] No pjax instance for viewId \"${this.viewId}\" found!`\n        );\n      }\n    }\n  }\n\n  /**\n   * Callback for the mouseover/touchstart, please use the rv-route binder instead\n   *\n   */\n  protected onLinkEnterIntern(evt: Event) {\n    let el = getElementFromEvent(evt);\n\n    if (!el) {\n      throw new Error(\"HTML Element not set\");\n    }\n\n    while (el && !Pjax.getHref(el)) {\n      el = el.parentNode as HTMLAnchorElement;\n    }\n\n    if (!el) {\n      return;\n    }\n\n    if (el.nodeName !== \"A\") {\n      return;\n    }\n\n    const href = Pjax.getHref(el);\n\n    // Already managed by the rv-route binder\n    if (el.classList.contains(\"route\") || el.hasAttribute(\"rv-route\")) {\n      return;\n    }\n\n    if (!href) {\n      console.warn(\n        `Url is not defined, you can't cache the link without the url. Please make sure your element has the href attribute or pass the url directly to this function.`,\n        el\n      );\n      return;\n    }\n\n    return this.onLinkEnter(href, el, evt);\n  }\n}\n\nexport { Prefetch };\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","class InMemoryStorage {\n  constructor() {\n    this.cache = new Map()\n  }\n\n  get(key) {\n    return this.cache.get(key)\n  }\n\n  set(key, value) {\n    this.cache.set(key, value)\n  }\n\n  keys() {\n    return Array.from(this.cache.keys())\n  }\n\n  del(key) {\n    this.cache.delete(key)\n  }\n\n  clear() {\n    this.cache.clear()\n  }\n}\n\nmodule.exports = InMemoryStorage\n","const ms = require('ms')\nconst InMemoryStorage = require('./InMemoryStorage')\n\nfunction createCache({ cleanupInterval = '5 mins', customStorage } = {}) {\n  let cache = customStorage || new InMemoryStorage()\n  let intervalTickId\n\n  const isUndef = v => typeof v === 'undefined'\n  const isDef = v => typeof v !== 'undefined'\n  const isFn = v => typeof v === 'function'\n  const isNum = v => typeof v === 'number'\n\n  const checkHasExpired = exp => exp && new Date(exp).getTime() < Date.now()\n\n  async function set(key, value, expiresIn) {\n    if (expiresIn) {\n      const expiredInMs = isNum(expiresIn) ? expiresIn : ms(expiresIn)\n      await cache.set(key, [value, new Date(Date.now() + expiredInMs).toISOString()])\n      return value\n    }\n\n    await cache.set(key, [value])\n    return value\n  }\n\n  async function resolve(key, value, expiresIn) {\n    const storedValue = await cache.get(key)\n\n    if (isUndef(storedValue)) {\n      if (isDef(value)) {\n        // A first time set (nothing in store but value defined).\n        const newValue = isFn(value) ? await value() : value\n        set(key, newValue, expiresIn)\n        return newValue\n      }\n\n      // A get request with nothing in the store.\n      return undefined\n    }\n\n    const [cachedValue, cachedExpiresIn] = storedValue\n    const hasExpired = checkHasExpired(cachedExpiresIn)\n\n    if (hasExpired) {\n      // If the stored value has expired and a value was provided then save it to store\n      // and return that.\n      if (isDef(value)) {\n        const newValue = isFn(value) ? await value() : value\n        set(key, newValue, expiresIn)\n        return newValue\n      }\n\n      // If the stored value has expired and no value was provided then return undefined and\n      // remove it from storage.\n      cache.del(key)\n      return undefined\n    }\n\n    // If the value hasn't expired then return it.\n    return cachedValue\n  }\n\n  async function del(key, matchStart) {\n    if (matchStart) {\n      const keys = await cache.keys()\n      keys.forEach(cacheKey => {\n        if (cacheKey.indexOf(key) === 0) {\n          cache.del(cacheKey)\n        }\n      })\n      return\n    }\n\n    cache.del(key)\n  }\n\n  function clear() {\n    return cache.clear()\n  }\n\n  function teardown() {\n    clearInterval(intervalTickId)\n  }\n\n  if (cleanupInterval) {\n    intervalTickId = setInterval(async () => {\n      const keys = await cache.keys()\n      keys.forEach(async k => {\n        const value = await cache.get(k)\n        if (value) {\n          const expiresIn = value[1]\n          const hasExpired = checkHasExpired(expiresIn)\n          if (hasExpired) {\n            cache.del(k)\n          }\n        }\n      })\n    }, ms(cleanupInterval))\n  }\n\n  return {\n    resolve,\n    del,\n    clear,\n    teardown,\n  }\n}\n\nmodule.exports = createCache\n","/**\n * BaseCache it's a simple static cache\n */\nclass BaseCache<T = any> {\n  /**\n   * The Object that keeps all the key value information\n   */\n  public data: { [key: string]: T };\n\n  constructor() {\n    this.data = {};\n  }\n\n  /**\n   * Set a key and value data, mainly Barba is going to save promises\n   *\n   */\n  public set(key: string, val: T) {\n    this.data[key] = val;\n    return this.data[key];\n  }\n\n  /**\n   * Retrieve the data using the key\n   */\n  public get(key: string): T | undefined {\n    return this.data[key];\n  }\n\n  /**\n   * Flush the cache\n   */\n  public reset() {\n    this.data = {};\n  }\n}\n\nexport { BaseCache };\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic  if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","import createCache from \"keshi\";\nimport type { Storage } from \"keshi\";\nimport { get, set, keys, del, clear } from \"idb-keyval\";\n\nexport const idbStorage: Storage = {\n  get,\n  set,\n  keys,\n  del,\n  clear: () => {\n    return clear() as any;\n  },\n};\n\nexport const idbCache = createCache({\n  // Use default memory storage on ssr\n  customStorage: (window as any).ssr ? undefined : idbStorage,\n});\n","export * from \"./Dom.js\";\nexport * from \"./Prefetch.js\";\n\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { HttpService, HttpServiceOptions } from \"@ribajs/core\";\nimport {\n  cleanLink,\n  getPort,\n  normalizeUrl,\n  getUrl,\n  isBoolean,\n  getElementFromEvent,\n  getDataset,\n  scrollTo,\n} from \"@ribajs/utils\";\n\nimport { BaseCache } from \"@ribajs/cache\";\nimport { HideShowTransition } from \"../Transition/index.js\";\nimport { Transition, Response, PjaxOptions } from \"../../types/index.js\";\nimport { Dom } from \"./Dom.js\";\nimport { HistoryManager } from \"@ribajs/history\";\nimport { ROUTE_ERROR_CLASS, IGNORE_CLASS_LINK } from \"../../constants.js\";\nimport { RouterService } from \"../../services/index.js\";\n\nexport interface PjaxInstances {\n  [key: string]: Pjax;\n}\n\n/**\n * Pjax is a static object with main function\n *\n * @borrows Dom as Dom\n */\nclass Pjax {\n  public static cache = new BaseCache<Promise<Response>>();\n\n  public static getInstance(id = \"main\"): Pjax | undefined {\n    const result = Pjax.instances[id];\n    if (!result) {\n      console.warn(\n        `[Pjax.getInstance] No pjax instance for viewId \"${id}\" found!`\n      );\n    }\n    return result;\n  }\n\n  /**\n   * Determine if the link should be followed\n   */\n  protected static preventCheckUrl(href: string): boolean {\n    /**\n     * Create fake html element\n     */\n    const element = document.createElement(\"a\");\n    element.setAttribute(\"href\", href);\n\n    if (!element) {\n      return false;\n    }\n\n    if (!href) {\n      return false;\n    }\n\n    // In case you're trying to load the same page\n    if (cleanLink(href) === cleanLink(location.href)) {\n      return false;\n    }\n\n    // Check if it's the same domain\n    if (\n      window.location.protocol !== (element as HTMLAnchorElement).protocol ||\n      window.location.hostname !== (element as HTMLAnchorElement).hostname\n    ) {\n      return false;\n    }\n\n    // Check if the port is the same\n    if (getPort() !== getPort((element as HTMLAnchorElement).port)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Determine if the link should be followed\n   */\n  public static preventCheck(\n    url: string,\n    element?: HTMLAnchorElement | HTMLLinkElement | HTMLUnknownElement,\n    evt?: Event\n  ): boolean {\n    if (!window.history.pushState) {\n      return false;\n    }\n\n    if (!this.preventCheckUrl(url)) {\n      return false;\n    }\n\n    if (evt) {\n      // Middle click, cmd click, ctrl click or prefetch load event\n      if (\n        (evt && (evt as any).which && (evt as any).which > 1) ||\n        (evt as any).metaKey ||\n        (evt as any).ctrlKey ||\n        (evt as any).shiftKey ||\n        (evt as any).altKey\n      ) {\n        return false;\n      }\n    }\n\n    if (element) {\n      // Ignore target with _blank target\n      if (\n        (element as HTMLAnchorElement).target &&\n        (element as HTMLAnchorElement).target === \"_blank\"\n      ) {\n        return false;\n      }\n\n      // Ignore case where there is download attribute\n      if (\n        element.getAttribute &&\n        typeof element.getAttribute(\"download\") === \"string\"\n      ) {\n        return false;\n      }\n\n      if (element.classList.contains(IGNORE_CLASS_LINK)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Get the .href parameter out of an element\n   * and handle special cases (like xlink:href)\n   */\n  public static getHref(\n    el: HTMLAnchorElement | SVGAElement | HTMLLinkElement | HTMLUnknownElement\n  ): string | undefined {\n    if (!el) {\n      return undefined;\n    }\n\n    if (el.getAttribute && typeof el.getAttribute(\"xlink:href\") === \"string\") {\n      return el.getAttribute(\"xlink:href\") || undefined;\n    }\n\n    if (\n      typeof (el as HTMLAnchorElement).href === \"string\" ||\n      (el.hasAttribute && el.hasAttribute(\"href\"))\n    ) {\n      const href = (el as HTMLAnchorElement).href || el.getAttribute(\"href\");\n      if (!href) {\n        console.error(\"href attribute not found for element: \", el);\n        throw new Error(\"href attribute not found!\");\n      }\n      return href;\n    }\n\n    return undefined;\n  }\n\n  private static instances: PjaxInstances = {};\n\n  public history = new HistoryManager();\n\n  /**\n   * Indicate wether or not use the cache\n   */\n  public cacheEnabled = true;\n\n  /**\n   * Indicate if there is an animation in progress\n   */\n  public transitionProgress = false;\n\n  protected listenAllLinks: boolean;\n\n  protected listenPopstate: boolean;\n\n  protected parseTitle: boolean;\n\n  protected changeBrowserUrl: boolean;\n\n  protected dispatcher: EventDispatcher;\n\n  protected transition?: Transition;\n\n  protected wrapper?: HTMLElement;\n\n  protected viewId = \"main\";\n\n  protected containerSelector: string;\n\n  /**\n   * Finds elements in the head like <link rel=\"preload\" href=\"...\" as=\"fetch\"> add them to the new head (and removes the old)\n   */\n  protected prefetchLinks: boolean;\n\n  protected scrollToAnchorOffset: number;\n\n  /**\n   * Creates an singleton instance of Pjax.\n   */\n  constructor({\n    id,\n    action = \"replace\",\n    wrapper,\n    containerSelector = \"[data-namespace]\",\n    listenAllLinks = false,\n    listenPopstate = true,\n    parseTitle = true,\n    changeBrowserUrl = true,\n    prefetchLinks = true,\n    scrollToTop = true,\n    scrollToAnchorOffset = RouterService.options.scrollToAnchorOffset,\n  }: PjaxOptions) {\n    if (id) {\n      this.viewId = id;\n    }\n\n    let instance = this as Pjax;\n\n    this.scrollToAnchorOffset = scrollToAnchorOffset || 0;\n\n    this.dispatcher = new EventDispatcher(this.viewId);\n\n    this.listenAllLinks = listenAllLinks;\n    this.listenPopstate = listenPopstate;\n    this.parseTitle = parseTitle;\n    this.changeBrowserUrl = changeBrowserUrl;\n    this.containerSelector = containerSelector;\n    this.prefetchLinks = prefetchLinks;\n\n    if (Pjax.instances[this.viewId]) {\n      instance = Pjax.instances[this.viewId];\n    }\n\n    instance.transition =\n      instance.transition || new HideShowTransition(action, scrollToTop);\n    instance.wrapper = instance.wrapper || wrapper;\n    instance.containerSelector =\n      instance.containerSelector || containerSelector;\n\n    instance.listenAllLinks = isBoolean(instance.listenAllLinks)\n      ? instance.listenAllLinks\n      : listenAllLinks;\n    instance.listenPopstate = isBoolean(instance.listenPopstate)\n      ? instance.listenPopstate\n      : listenPopstate;\n    instance.parseTitle = isBoolean(instance.parseTitle)\n      ? instance.parseTitle\n      : parseTitle;\n    instance.changeBrowserUrl = isBoolean(instance.changeBrowserUrl)\n      ? instance.changeBrowserUrl\n      : changeBrowserUrl;\n    instance.prefetchLinks = isBoolean(instance.prefetchLinks)\n      ? instance.prefetchLinks\n      : prefetchLinks;\n\n    if (instance.wrapper) {\n      instance.wrapper.setAttribute(\"aria-live\", \"polite\");\n    }\n\n    Pjax.instances[this.viewId] = instance;\n    return Pjax.instances[this.viewId];\n  }\n\n  /**\n   * USe this if you have a view component\n   */\n  public setActiveWrapper(wrapper: HTMLElement) {\n    this.wrapper = wrapper;\n  }\n\n  /**\n   * Function to be called to start Pjax\n   */\n  public start() {\n    if (this.wrapper) {\n      try {\n        this.init(this.wrapper, this.listenAllLinks, this.listenPopstate);\n      } catch (error) {\n        console.error(error);\n      }\n    } else {\n      console.error(`Can't init pjax without wrapper`);\n    }\n  }\n\n  /**\n   * Return the currentURL cleaned\n   */\n  public getCurrentUrl() {\n    return cleanLink(getUrl());\n  }\n\n  /**\n   * Change the URL with push state and trigger the state change\n   */\n  public goTo(url: string, newTab = false) {\n    if (newTab) {\n      const win = window.open(url, \"_blank\");\n      if (win) {\n        return win.focus();\n      }\n      return false;\n    }\n\n    if (url.startsWith(\"http\")) {\n      url = normalizeUrl(url).url;\n    }\n\n    if (!url.startsWith(\"http\")) {\n      if (this.changeBrowserUrl) {\n        window.history.pushState(null, \"\", url);\n      }\n      return this.onStateChange(undefined, url);\n    } else {\n      // fallback\n      this.forceGoTo(url);\n    }\n  }\n\n  /**\n   * Return a transition object\n   */\n  public getTransition(): Transition {\n    // User customizable\n    return this.transition || new HideShowTransition();\n  }\n\n  public prefetchLink(href: string) {\n    href = normalizeUrl(href).url;\n    const follow = Pjax.preventCheckUrl(href);\n    if (follow) {\n      return this.loadResponseCached(href, true, false);\n    }\n  }\n\n  /**\n   * Appends a prefetch link to the head and caches the result\n   */\n  protected prefetchLinkElement(\n    linkElement: HTMLLinkElement,\n    head: HTMLHeadElement\n  ) {\n    const rel = linkElement.getAttribute(\"rel\");\n    const href = Pjax.getHref(linkElement);\n    if (\n      rel === \"router-preload\" &&\n      href &&\n      this.cacheEnabled &&\n      !linkElement.classList.contains(ROUTE_ERROR_CLASS)\n    ) {\n      try {\n        this.prefetchLink(href);\n      } catch (error) {\n        linkElement.classList.add(ROUTE_ERROR_CLASS);\n        console.error(error);\n      }\n    }\n    // Append The link elements to the head for native prefetch by the browser\n    head.appendChild(linkElement);\n  }\n\n  protected removePrefetchLinks(head: HTMLHeadElement) {\n    const removePrefetchLinkElements = head.querySelectorAll(\n      'link[href][rel=\"dns-prefetch\"], link[href][rel=\"preconnect\"], link[href][rel=\"prefetch\"], link[href][rel=\"subresource\"], link[href][rel=\"preload\"], link[href][rel=\"router-preload\"]'\n    ) as NodeListOf<HTMLLinkElement>;\n    // Remove the old prefetch link elements\n    removePrefetchLinkElements.forEach((linkElement: HTMLLinkElement) => {\n      if (linkElement && linkElement.parentNode) {\n        linkElement.parentNode.removeChild(linkElement);\n      }\n    });\n  }\n\n  /**\n   * Replaces the prefetch links in the head with the new one.\n   * The custom link[href][rel=\"router-preload\"] elements will be not readd to the head\n   * because we preload them with javascript, the others are preloaded by the browser\n   * because it has native support for them and for that they must exist in the head\n   * @param prefetchLinks\n   */\n  protected replacePrefetchLinkElements(\n    prefetchLinks: NodeListOf<HTMLLinkElement> | HTMLLinkElement[]\n  ) {\n    const head = document.head || document.getElementsByTagName(\"head\")[0];\n    this.removePrefetchLinks(head);\n\n    prefetchLinks.forEach((linkElement: HTMLLinkElement) => {\n      this.prefetchLinkElement(linkElement, head);\n    });\n  }\n\n  /**\n   * Load an url, will start an fetch request or load the response from the cache and returns the container\n   * Also puts the container to the DOM and sets the title (if this option is active)\n   */\n  public async loadCached(url: string): Promise<HTMLElement> {\n    try {\n      const { responsePromise } = await this.loadResponseCached(\n        url,\n        false,\n        true\n      );\n      if (!this.wrapper) {\n        throw new Error(\"[Pjax] you need a wrapper!\");\n      }\n      const response = await responsePromise;\n      Dom.putContainer(response.container, this.wrapper);\n      if (this.parseTitle === true && response.title) {\n        document.title = response.title;\n      }\n      if (this.prefetchLinks === true && response.prefetchLinks) {\n        this.replacePrefetchLinkElements(response.prefetchLinks);\n      }\n\n      return response.container;\n    } catch (error) {\n      console.error(error);\n      // Something went wrong (timeout, 404, 505...)\n      this.forceGoTo(url);\n      throw error;\n    }\n  }\n\n  /**\n   * Load an url, will start an fetch request or load from the cache (and set it to the cache) and will return a `Response` object\n   * @param url Url to get from cache or to make the request for\n   * @param forceCache Force to use the browser build in cache, for more information see `force-cache` on https://developer.mozilla.org/en-US/docs/Web/API/Request/cache\n   * @param fallback If there is an error, make a normal browser request and reload the page you should not use this on prefetch urls\n   */\n  public async loadResponseCached(\n    url: string,\n    forceCache = false,\n    fallback = true\n  ) {\n    let responsePromise: Promise<Response> | undefined;\n    try {\n      if (this.cacheEnabled) {\n        responsePromise = Pjax.cache.get(url);\n        if (responsePromise) {\n          return {\n            fromCache: true,\n            responsePromise,\n          };\n        }\n      }\n      responsePromise = this.loadResponse(url, forceCache);\n      if (this.cacheEnabled && responsePromise) {\n        Pjax.cache.set(url, responsePromise);\n      } else {\n        // Pjax.cache.reset();\n      }\n    } catch (error) {\n      console.error(error);\n      if (fallback) {\n        this.forceGoTo(url);\n      }\n      throw error;\n    }\n\n    return {\n      fromCache: false,\n      responsePromise,\n    };\n  }\n\n  /**\n   * Load an url, will start an fetch request and will return a `Response` object\n   * @param url Url to get from cache or to make the request for\n   * @param forceCache Force to use the browser build in cache, for more information see `force-cache` on https://developer.mozilla.org/en-US/docs/Web/API/Request/cache\n   */\n  public async loadResponse(url: string, forceCache = false) {\n    const options: HttpServiceOptions = forceCache\n      ? { cache: \"force-cache\" }\n      : {};\n    const data = await HttpService.get<string>(\n      url,\n      undefined,\n      \"html\",\n      {},\n      options\n    );\n    if (!data || !data.body) {\n      throw new Error(\"No body!\");\n    }\n    const response = Dom.parseResponse(\n      data.body,\n      this.parseTitle,\n      this.containerSelector,\n      this.prefetchLinks\n    );\n    return response;\n  }\n\n  /**\n   * Attach the event listeners\n   */\n  protected bindEvents(listenAllLinks: boolean, listenPopstate: boolean) {\n    // you can also use the rv-router for this\n    if (listenAllLinks) {\n      document.addEventListener(\"click\", this.onLinkClickIntern.bind(this));\n    }\n    if (listenPopstate) {\n      window.addEventListener(\"popstate\", this.onStateChange.bind(this));\n    }\n  }\n\n  /**\n   * Force the browser to go to a certain url\n   */\n  public forceGoTo(url: Location | string) {\n    console.warn(\"forceGoTo\", url);\n    if (url && (url as Location).href) {\n      window.location = url as Location;\n    }\n    if (typeof url === \"string\") {\n      window.location.href = url;\n    }\n  }\n\n  protected onLinkClickIntern(evt: Event) {\n    let el = getElementFromEvent(evt);\n\n    while (el && !Pjax.getHref(el)) {\n      el = el.parentNode as HTMLAnchorElement; // TODO test me\n    }\n\n    if (!el || el.nodeName !== \"A\") {\n      return;\n    }\n\n    const href = Pjax.getHref(el);\n\n    // Already managed by the rv-route binder\n    if (el.classList.contains(\"route\") || el.hasAttribute(\"rv-route\")) {\n      return;\n    }\n\n    if (!href) {\n      throw new Error(\n        `Url is not defined, you can't cache the link without the url. Please make sure your element has the href attribute or pass the url directly to this function.`\n      );\n    }\n\n    // Already managed by the rv-route binder\n    if (el.classList.contains(\"route\") || el.hasAttribute(\"rv-route\")) {\n      return false;\n    }\n\n    return this.onLinkClick(evt, el as HTMLAnchorElement, href);\n  }\n\n  /**\n   * Callback called from click event\n   */\n  public onLinkClick(\n    evt: Event,\n    el: HTMLAnchorElement,\n    href: string,\n    newTab = false\n  ) {\n    // normalize url, returns the relative url for internal urls and the full url for external urls\n    const { url, location } = normalizeUrl(href);\n\n    const { location: currLocation } = normalizeUrl();\n\n    // Is this a local scroll link to an title anchor?\n    if (location.hash && currLocation.pathname === location.pathname) {\n      let id = location.hash.slice(1);\n      id = decodeURI(id); // Workaround for markdown generated ids with umlauts\n      const scrollToElement = document.getElementById(id);\n      if (scrollToElement) {\n        evt.stopPropagation();\n        evt.preventDefault();\n        if (this.changeBrowserUrl) {\n          window.history.pushState(null, \"\", url);\n        }\n        return scrollTo(scrollToElement, this.scrollToAnchorOffset);\n      }\n    }\n\n    if (!url) {\n      throw new Error(\"url is falsy\");\n    }\n    const follow = Pjax.preventCheck(url, el, evt);\n\n    if (follow) {\n      evt.stopPropagation();\n      evt.preventDefault();\n\n      this.dispatcher.trigger(\"linkClicked\", el, evt);\n\n      this.goTo(url, newTab);\n    }\n  }\n\n  /**\n   * Method called after a 'popstate' or from .goTo()\n   */\n  protected async onStateChange(\n    event?: Event,\n    newUrl: string = this.getCurrentUrl()\n  ) {\n    // normalize url, returns the relative url for internal urls and the full url for external urls\n    newUrl = normalizeUrl(newUrl).url;\n    const oldUrl = normalizeUrl(this.history.currentStatus().url).url;\n\n    if (this.changeBrowserUrl && oldUrl === newUrl) {\n      return false;\n    }\n\n    this.history.add(newUrl);\n\n    this.dispatcher.trigger(\n      \"initStateChange\",\n      this.viewId,\n      this.history.currentStatus(),\n      this.history.prevStatus()\n    );\n\n    const oldContainer = Dom.getContainer(document, this.containerSelector);\n    const newContainerPromise = this.loadCached(newUrl);\n\n    const transition = this.getTransition();\n\n    this.transitionProgress = true;\n\n    const transitionResult = transition.init(oldContainer, newContainerPromise);\n\n    this.onNewContainerLoaded(await newContainerPromise);\n\n    await transitionResult;\n    this.onTransitionEnd();\n  }\n\n  /**\n   * Function called as soon the new container is ready\n   */\n  protected onNewContainerLoaded(container: HTMLElement) {\n    const currentStatus = this.history.currentStatus();\n\n    currentStatus.namespace = Dom.getNamespace(container);\n\n    const dataset = getDataset(container);\n\n    this.dispatcher.trigger(\n      \"newPageReady\",\n      this.viewId,\n      this.history.currentStatus(),\n      this.history.prevStatus(),\n      container,\n      container.innerHTML,\n      dataset,\n      false // true if this is the first time newPageReady is triggered / true on initialization\n    );\n  }\n\n  /**\n   * Function called as soon the transition is finished\n   */\n  protected onTransitionEnd() {\n    this.transitionProgress = false;\n\n    this.dispatcher.trigger(\n      \"transitionCompleted\",\n      this.viewId,\n      this.history.currentStatus(),\n      this.history.prevStatus()\n    );\n  }\n\n  /**\n   * Init the events\n   */\n  protected init(\n    wrapper: HTMLElement,\n    listenAllLinks: boolean,\n    listenPopstate: boolean\n  ) {\n    const initialResponse = Dom.parseInitial(\n      this.parseTitle,\n      this.containerSelector,\n      this.prefetchLinks\n    );\n    const url = window.location.pathname;\n    // Reload the current site with pjax to cache the initial page\n    if (this.cacheEnabled) {\n      const currentUrl = normalizeUrl(window.location.href).url;\n      if (!Pjax.cache.get(url)) {\n        this.loadResponseCached(currentUrl, false, false);\n      }\n    }\n\n    this.replacePrefetchLinkElements(initialResponse.prefetchLinks);\n\n    this.wrapper = wrapper;\n\n    this.history.add(\n      this.getCurrentUrl(),\n      Dom.getNamespace(initialResponse.container)\n    );\n\n    // Fire for the current view.\n    this.dispatcher.trigger(\n      \"initStateChange\",\n      this.viewId,\n      this.history.currentStatus()\n    );\n\n    const dataset = getDataset(initialResponse.container);\n\n    this.dispatcher.trigger(\n      \"newPageReady\",\n      this.viewId,\n      this.history.currentStatus(),\n      {},\n      initialResponse.container,\n      initialResponse.container.innerHTML,\n      dataset,\n      true // true if this is the first time newPageReady is triggered / true on initialization\n    );\n\n    this.dispatcher.trigger(\n      \"transitionCompleted\",\n      this.viewId,\n      this.history.currentStatus()\n    );\n\n    this.bindEvents(listenAllLinks, listenPopstate);\n  }\n}\n\nexport { Pjax };\n","import { RouterModuleOptions } from \"../types/index.js\";\nimport { HideShowTransition } from \"./Transition/HideShowTransition.js\";\n\nexport class RouterService {\n  protected static _options: RouterModuleOptions;\n  public static instance?: RouterService;\n\n  public static get options() {\n    return this._options;\n  }\n\n  protected constructor() {\n    /**/\n  }\n\n  public static getSingleton() {\n    if (this.instance) {\n      return this.instance;\n    }\n\n    throw new Error(\n      `Singleton of RouterService not defined, please call setSingleton first!`\n    );\n  }\n\n  public static setSingleton(options: Partial<RouterModuleOptions> = {}) {\n    if (this.instance) {\n      console.warn(`Singleton of RouterService already defined!`);\n      return this.instance;\n    }\n    options.defaultTransition =\n      options.defaultTransition ?? new HideShowTransition();\n    options.scrollToAnchorOffset = options.scrollToAnchorOffset ?? 0;\n    this._options = options as RouterModuleOptions;\n    this.instance = new this();\n    return this.instance;\n  }\n}\n","import { Binder, View, handleizeFormatter, FormatterFn } from \"@ribajs/core\";\nimport { isObject } from \"@ribajs/utils/src/type.js\";\nimport { Pjax, HideShowTransition } from \"../services/index.js\";\n\nconst handleize = handleizeFormatter.read as FormatterFn;\n\n/**\n * Loads a url with pjax and show them inside the element this binder is used on\n */\nexport class ViewStaticBinder extends Binder<string, HTMLAnchorElement> {\n  static key = \"view-static\";\n  static block = true;\n\n  private nested: View | null = null;\n\n  async routine(el: HTMLElement, options: any) {\n    const wrapper = el;\n\n    // Set default options\n    options = options || {};\n    options.listenAllLinks = false;\n    options.listenPopstate = false;\n    options.parseTitle = false;\n    options.transition = options.transition || new HideShowTransition();\n    options.viewId =\n      options.viewId || el.getAttribute(\"id\") || handleize(options.url);\n    options.containerSelector = options.containerSelector || \"[data-namespace]\";\n    options.changeBrowserUrl = false;\n\n    const pjax = new Pjax(options);\n\n    const { responsePromise } = await pjax.loadResponseCached(\n      options.url,\n      false,\n      false\n    );\n\n    const response = await responsePromise;\n\n    wrapper.replaceWith(response.container);\n\n    response.container.style.visibility = \"visible\";\n\n    // add the dataset to the model\n    if (!isObject(this.view.models)) {\n      this.view.models = {};\n    }\n\n    if (this.nested) {\n      this.nested.unbind();\n    }\n    this.nested = new View(\n      response.container,\n      this.view.models,\n      this.view.options\n    );\n    this.nested.bind();\n  }\n\n  unbind() {\n    if (this.nested) {\n      this.nested.unbind();\n    }\n  }\n}\n","import { Pjax, Prefetch } from \"../services/index.js\";\nimport { Binder } from \"@ribajs/core\";\nimport { isObject, isString } from \"@ribajs/utils/src/type.js\";\nimport { onRoute, normalizeUrl, isExternalUrl } from \"@ribajs/utils/src/url\";\nimport { RouteOptions } from \"../types/route-options.js\";\n\n/**\n * Open link with pajax if the route is not the active route\n */\nexport class RouteBinder extends Binder<string, HTMLAnchorElement> {\n  static key = \"route\";\n\n  private prefetch?: Prefetch;\n\n  private options: RouteOptions = {\n    url: \"\",\n    viewId: \"main\",\n    removeAfterActivation: false,\n    newTab: false,\n    newTabOnExtern: true,\n  };\n\n  private _onClick(event: Event) {\n    // console.log(this.options.url);\n    const pjax = Pjax.getInstance(this.options.viewId);\n    if (onRoute(this.options.url, true)) {\n      console.info(\"already on this site, do nothing\");\n      event.stopPropagation();\n      event.preventDefault();\n    } else if (isExternalUrl(this.options.url)) {\n      if (!pjax) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n      // Is extern\n      const newTab = this.options.newTab || this.options.newTabOnExtern;\n      pjax.goTo(this.options.url, newTab);\n    } else {\n      if (this.options.url) {\n        if (!pjax) {\n          return;\n        }\n        pjax.onLinkClick(event, this.el, this.options.url, this.options.newTab);\n      }\n    }\n    if (this.options.removeAfterActivation && this.el && this.el.parentNode) {\n      // this.unbind(); TODO?\n      this.el.parentNode.removeChild(this.el);\n    }\n  }\n\n  private onClick = this._onClick.bind(this);\n\n  bind(el: HTMLAnchorElement) {\n    el.classList.add(\"route\");\n    if (window.ssr) {\n      return;\n    }\n    this.onClick = this.onClick.bind(this);\n    el.addEventListener(\"click\", this.onClick);\n  }\n\n  routine(el: HTMLAnchorElement, optionsOrUrl?: string | RouteOptions) {\n    if (isString(optionsOrUrl)) {\n      this.options.url = optionsOrUrl as string;\n    } else if (isObject(optionsOrUrl as RouteOptions)) {\n      this.options = optionsOrUrl as RouteOptions;\n    }\n    this.options.viewId = this.options.viewId || \"main\";\n    this.prefetch = new Prefetch(this.options.viewId);\n\n    this.options.newTab = false;\n    const isAnchorHTMLElement = el.tagName === \"A\";\n\n    if (!this.options.url && isAnchorHTMLElement) {\n      const url = el.getAttribute(\"href\");\n      if (url) {\n        this.options.url = url;\n      }\n    }\n\n    if (el.getAttribute(\"target\") === \"_blank\") {\n      this.options.newTab = true;\n    }\n\n    // normalize url\n    this.options.url = normalizeUrl(this.options.url).url;\n\n    // set href if not set\n    if (\n      isAnchorHTMLElement &&\n      (!(el as HTMLAnchorElement).href || !el.getAttribute(\"href\")) &&\n      this.options.url\n    ) {\n      el.setAttribute(\"href\", this.options.url);\n      (el as HTMLAnchorElement).href = this.options.url;\n    }\n\n    if (!this.options.newTab) {\n      this.prefetch.initBinder(el, this.options.url);\n    }\n    // this.checkURL.call(this, this.options.url);\n  }\n\n  unbind(el: HTMLAnchorElement) {\n    this.prefetch?.deInitBinder(el, this.options.url);\n    el.removeEventListener(\"click\", this.onClick);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { onRoute } from \"@ribajs/utils/src/url\";\n\nexport class RouteClassStarBinder extends Binder<string, HTMLInputElement> {\n  static key = \"route-class-*\";\n\n  private dispatcher = new EventDispatcher(\"main\");\n  private url?: string;\n  private className = \"\";\n\n  private _onUrlChange() {\n    if (this.url) {\n      if (onRoute(this.url)) {\n        this.el.classList.add(this.className);\n        // check if element is radio input\n        if (this.el.getAttribute(\"type\") === \"radio\") {\n          this.el.checked = true;\n        }\n        return true;\n      } else {\n        this.el.classList.remove(this.className);\n        // uncheck if element is radio input\n        if (this.el.getAttribute(\"type\") === \"radio\") {\n          this.el.checked = false;\n        }\n      }\n    }\n    return false;\n  }\n\n  private onUrlChange = this._onUrlChange.bind(this);\n\n  bind() {\n    this.dispatcher.on(\"newPageReady\", this.onUrlChange);\n  }\n\n  /**\n   * Tests the url with the current location, if the url is equal to the current location this element gets the `[classname]` class\n   * @param el Binder HTML Element\n   * @param url Url to compare with the current location\n   */\n  routine(el: HTMLElement, url?: string) {\n    this.url = url;\n    this.className = this.args[0].toString() || \"active\";\n    const isAnchorElement = el.tagName === \"A\";\n    if (!this.url && isAnchorElement) {\n      const href = el.getAttribute(\"href\");\n      if (href) {\n        this.url = href;\n      }\n    }\n\n    this.onUrlChange();\n  }\n\n  unbind() {\n    this.dispatcher.off(\"newPageReady\", this.onUrlChange);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { Pjax } from \"@ribajs/router\";\n\nexport class RoutePreloadBinder extends Binder<string, HTMLAnchorElement> {\n  static key = \"route-preload\";\n\n  routine(el: HTMLElement, url?: string) {\n    if (window.ssr) {\n      return;\n    }\n    const isAnchorElement = el.tagName === \"A\";\n    if (!url && isAnchorElement) {\n      const href = el.getAttribute(\"href\");\n      if (href) {\n        url = href;\n      }\n    }\n    if (url) {\n      Pjax.getInstance()?.prefetchLink(url);\n    }\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { onParentRoute } from \"@ribajs/utils/src/url\";\n\nexport class ParentRouteClassStarBinder extends Binder<\n  string,\n  HTMLAnchorElement | HTMLInputElement\n> {\n  static class = \"parent-route-class-*\";\n\n  private dispatcher = new EventDispatcher(\"main\");\n\n  private className?: string;\n\n  private url?: string;\n\n  private _onUrlChange() {\n    if (!this.url) {\n      throw new Error(\"url is not defined!\");\n    }\n\n    if (!this.className) {\n      throw new Error(\"className is not defined!\");\n    }\n\n    if (onParentRoute(this.url)) {\n      this.el.classList.add(this.className);\n      // check if element is radio input\n      if (this.el.getAttribute(\"type\") === \"radio\") {\n        (this.el as HTMLInputElement).checked = true;\n      }\n      return true;\n    } else {\n      this.el.classList.remove(this.className);\n      // uncheck if element is radio input\n      if (this.el.getAttribute(\"type\") === \"radio\") {\n        (this.el as HTMLInputElement).checked = false;\n      }\n    }\n    return false;\n  }\n\n  private onUrlChange = this._onUrlChange.bind(this);\n\n  /**\n   * Tests the url with the current location, if the current location starts with the url this element gets the `[classname]` class\n   * @param el Binder HTML Element\n   * @param url Url to compare with the current location\n   */\n  routine(el: HTMLElement, url?: string) {\n    this.url = url;\n    this.className = this.args[0].toString() || \"active\";\n    const isAnkerHTMLElement = el.tagName === \"A\";\n    if (!this.url && isAnkerHTMLElement) {\n      const href = el.getAttribute(\"href\");\n      if (href) {\n        this.url = href;\n      }\n    }\n    this.onUrlChange();\n  }\n\n  bind() {\n    this.dispatcher.on(\"newPageReady\", this.onUrlChange);\n  }\n\n  unbind() {\n    this.dispatcher.off(\"newPageReady\", this.onUrlChange);\n  }\n}\n","import { Binder, eventHandlerFunction } from \"@ribajs/core\";\n\nconst goBack = () => {\n  window.history.back();\n};\n\n/**\n * Calls `window.history.back()` on event.\n */\nexport class RouteBackOnStarBinder extends Binder<eventHandlerFunction> {\n  static key = \"route-back-on-*\";\n  priority = 3000;\n\n  private eventName?: string;\n\n  unbind(el: HTMLElement) {\n    if (this.eventName) {\n      el.removeEventListener(this.eventName, goBack);\n    }\n  }\n\n  routine(el: HTMLElement /*, options: any*/) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    if (this.eventName) {\n      el.removeEventListener(this.eventName, goBack);\n    }\n    this.eventName = this.args[0] as string;\n    el.addEventListener(this.args[0] as string, goBack);\n  }\n}\n","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { loadScript, getUID } from \"@ribajs/utils/src/dom.js\";\n\ninterface Scope extends ScopeBase {\n  src: string;\n  id: string;\n  async: boolean;\n  defer: boolean;\n}\n\nexport class RouterLoadScriptComponent extends Component {\n  public static tagName = \"router-load-script\";\n\n  protected autobind = false;\n\n  static get observedAttributes(): string[] {\n    return [\"src\", \"id\", \"async\", \"defer\"];\n  }\n\n  public scope: Scope = {\n    src: \"\",\n    id: \"\",\n    async: true,\n    defer: true,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    super.init(RouterLoadScriptComponent.observedAttributes);\n  }\n\n  protected async onReady() {\n    await super.onReady();\n    if (!this.scope.id) {\n      this.scope.id = getUID(\"script-\");\n    }\n    loadScript(this.scope.src, this.scope.id, this.scope.async);\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"src\"];\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, View, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { scrollTo, scrollToPosition } from \"@ribajs/utils/src/dom.js\";\nimport { State } from \"@ribajs/history\";\nimport { Pjax, Prefetch, RouterService } from \"../../services/index.js\";\nimport type {\n  RouterViewOptions,\n  PjaxOptions,\n  JsxRouterViewProps,\n} from \"../../types/index.js\";\n\ninterface RouterViewScope extends RouterViewOptions, ScopeBase {}\n\nexport class RouterViewComponent extends Component {\n  public static tagName = \"router-view\";\n  protected events = EventDispatcher.getInstance(\"main\");\n  protected nested: View | null = null;\n  protected wrapper: HTMLElement | null = null;\n  protected pjax: Pjax | null = null;\n  protected prefetch: Prefetch | null = null;\n\n  static get observedAttributes(): (keyof JsxRouterViewProps)[] {\n    return [\n      \"id\",\n      \"action\",\n      \"container-selector\",\n      \"scroll-to-top\",\n      \"listen-all-links\",\n      \"listen-popstate\",\n      \"scroll-to-anchor-hash\",\n      \"scroll-to-anchor-offset\",\n      \"dataset-to-root-scope\",\n      \"parse-title\",\n      \"change-browser-url\",\n      \"prefetch-links\",\n    ];\n  }\n\n  public scope: RouterViewScope = {\n    id: \"main\",\n    action: \"replace\",\n    scrollToTop: true,\n    listenAllLinks: true,\n    listenPopstate: true,\n    scrollToAnchorHash: true,\n    scrollToAnchorOffset: RouterService.options.scrollToAnchorOffset,\n    datasetToRootScope: true,\n    parseTitle: true,\n    changeBrowserUrl: true,\n    prefetchLinks: true,\n    transition: RouterService.options.defaultTransition,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(RouterViewComponent.observedAttributes);\n  }\n\n  protected addEventListeners() {\n    this.events.on(\"newPageReady\", this.onPageReady, this);\n    this.events.on(\"initStateChange\", this.onTransitionInit, this);\n    this.events.on(\"transitionCompleted\", this.onTransitionCompleted, this);\n  }\n\n  protected removeEventListeners() {\n    this.events.off(\"newPageReady\", this.onPageReady, this);\n    this.events.off(\"initStateChange\", this.onTransitionInit, this);\n    this.events.off(\"transitionCompleted\", this.onTransitionCompleted, this);\n  }\n\n  protected getContainerSelector() {\n    if (this.scope.id === \"main\") {\n      return `${RouterViewComponent.tagName} > *:first-child`;\n    } else {\n      return `${RouterViewComponent.tagName}#${this.scope.id} > *:first-child`;\n    }\n  }\n\n  protected initAndStartPjax() {\n    if (!this.scope.id) {\n      console.error(\"Id attribute is required!\");\n      return;\n    }\n\n    const pjaxOptions: PjaxOptions = {\n      id: this.scope.id,\n      action: this.scope.action,\n      wrapper: this,\n      containerSelector: this.getContainerSelector(),\n      listenAllLinks: !!this.scope.listenAllLinks,\n      listenPopstate: !!this.scope.listenPopstate,\n      transition: this.scope.transition,\n      parseTitle: !!this.scope.parseTitle,\n      changeBrowserUrl: !!this.scope.changeBrowserUrl,\n      prefetchLinks: !!this.scope.prefetchLinks,\n      scrollToTop: !!this.scope.scrollToTop,\n    };\n    this.pjax = new Pjax(pjaxOptions);\n    this.pjax.setActiveWrapper(this);\n    this.prefetch = new Prefetch(this.scope.id);\n    this.prefetch.init(pjaxOptions.prefetchLinks);\n    this.pjax.start();\n  }\n\n  protected onPageReady(\n    viewId: string,\n    currentStatus: State,\n    prevStatus: State,\n    container: HTMLElement,\n    newPageRawHTML: string,\n    dataset: any,\n    isInit: boolean\n  ) {\n    // Only continue if the viewID is equal (in this way it is possible to have multiple views)\n    if (viewId !== this.scope.id) {\n      console.warn(\"not the right view\", this.scope.id, viewId, dataset);\n      return;\n    }\n\n    this.debug(\"New page ready!\", this.innerHTML);\n\n    if (this.scope.datasetToRootScope) {\n      if (!this.scope.$root) {\n        this.scope.$root = {};\n      }\n      this.scope.$root.dataset = dataset;\n    }\n\n    // Ignore rest on first page requests\n    if (isInit) {\n      return;\n    }\n\n    this.view = this.getView();\n\n    if (!this.view) {\n      console.warn(\"View ist not ready!\");\n      return;\n    }\n\n    this.view.bind();\n  }\n\n  protected async onTransitionInit(viewId: string) {\n    if (viewId !== this.scope.id) {\n      return;\n    }\n    this.setTransitionClass(\"init\");\n  }\n\n  protected async onTransitionCompleted(viewId: string) {\n    // Only to anything if the viewID is equal (in this way it is possible to have multiple views)\n    if (viewId !== this.scope.id) {\n      return;\n    }\n\n    this.setTransitionClass(\"complete\");\n\n    if (this.scope.scrollToAnchorHash) {\n      let scrollToElement: HTMLElement | null = null;\n      const hash = window.location.hash.substr(1);\n      if (hash) {\n        scrollToElement = document.getElementById(\n          window.location.hash.substr(1)\n        );\n        // Scroll to Anchor of hash\n        if (scrollToElement) {\n          return await scrollTo(\n            scrollToElement,\n            this.scope.scrollToAnchorOffset,\n            window\n          );\n        }\n      }\n    }\n\n    if (this.scope.scrollToTop) {\n      return await scrollToPosition(window, \"start\", \"vertical\", \"smooth\");\n    }\n  }\n\n  protected setTransitionClass(state: \"init\" | \"complete\") {\n    this.classList.remove(\"transition-init\");\n    this.classList.remove(\"transition-complete\");\n    this.classList.add(`transition-${state}`);\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    switch (attributeName) {\n      case \"id\":\n        this.events = EventDispatcher.getInstance(this.scope.id);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.addEventListeners();\n    this.initAndStartPjax();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { RibaModule } from \"@ribajs/core\";\nimport * as binders from \"./binders/index.js\";\nimport * as components from \"./components/index.js\";\nimport * as services from \"./services/index.js\";\nimport { RouterModuleOptions } from \"./types/index.js\";\n\nexport const routerModule: RibaModule<Partial<RouterModuleOptions>> = {\n  binders,\n  components,\n  services,\n  formatters: {},\n  init(options = {}) {\n    services.RouterService.setSingleton(options);\n    return this;\n  },\n};\n","import type { ThemeChoice } from \"../types/index.js\";\n\nexport const themeChoices: ThemeChoice[] = [\"os\", \"dark\", \"light\"];\n","import { Bs5ModuleOptions, Breakpoint } from \"../types/index.js\";\n\nexport * from \"./theme-choices.js\";\n\n// Breakpoints\nexport const DEFAULT_BP_XS: Breakpoint = {\n  dimension: 0,\n  name: \"xs\",\n};\nexport const DEFAULT_BP_SM: Breakpoint = {\n  dimension: 576,\n  name: \"sm\",\n};\nexport const DEFAULT_BP_MD: Breakpoint = {\n  dimension: 768,\n  name: \"md\",\n};\nexport const DEFAULT_BP_LG: Breakpoint = {\n  dimension: 992,\n  name: \"lg\",\n};\nexport const DEFAULT_BP_XL: Breakpoint = {\n  dimension: 1200,\n  name: \"xl\",\n};\nexport const DEFAULT_BP_XXL: Breakpoint = {\n  dimension: 1400,\n  name: \"xxl\",\n};\n\nexport const DEFAULT_MODULE_OPTIONS: Bs5ModuleOptions = {\n  breakpoints: [\n    DEFAULT_BP_XS,\n    DEFAULT_BP_SM,\n    DEFAULT_BP_MD,\n    DEFAULT_BP_LG,\n    DEFAULT_BP_XL,\n    DEFAULT_BP_XXL,\n  ],\n  allowStoreDataInBrowser: true,\n};\n\n// EventDispatcher events\nexport const TOGGLE_BUTTON = {\n  nsPrefix: \"bs5-toggle-button:\",\n  eventNames: {\n    toggle: \"toggle\",\n    toggled: \"toggled\",\n    init: \"init\",\n    state: \"state\",\n  },\n};\n\nexport const TOGGLE_ATTRIBUTE = {\n  elEventNames: {\n    removed: \"removed\",\n    added: \"added\",\n  },\n};\n\nexport const TOGGLE_CLASS = {\n  elEventNames: {\n    removed: \"removed\",\n    added: \"added\",\n  },\n};\n","import { Breakpoint, Bs5ModuleOptions } from \"../types/index.js\";\nimport { DEFAULT_MODULE_OPTIONS } from \"../constants/index.js\";\nimport { debounce } from \"@ribajs/utils/src/control\";\nimport { getViewportDimensions } from \"@ribajs/utils/src/dom.js\";\nimport { EventDispatcher, EventCallback } from \"@ribajs/events\";\n\n/**\n * Events:\n * * breakpoint:changed\n */\nexport class Bs5Service {\n  protected _options: Bs5ModuleOptions = DEFAULT_MODULE_OPTIONS;\n  protected _events = EventDispatcher.getInstance(\"bs5\");\n  protected _activeBreakpoint: Breakpoint | null = null;\n\n  public static instance?: Bs5Service;\n\n  protected constructor(options: Bs5ModuleOptions) {\n    this._options = options;\n    this.sortBreakpoints(this._options.breakpoints);\n    this._onViewChanges();\n    this.addEventListeners();\n  }\n\n  public static getSingleton() {\n    if (Bs5Service.instance) {\n      return Bs5Service.instance;\n    }\n\n    throw new Error(\n      \"Singleton of Bs5Service not defined, please call `Bs5Service.setSingleton` or `bs5Module.init` first!\"\n    );\n  }\n\n  public static setSingleton(\n    options: Bs5ModuleOptions = DEFAULT_MODULE_OPTIONS\n  ) {\n    if (Bs5Service.instance) {\n      throw new Error(`Singleton of Bs5Service already defined!`);\n    }\n    Bs5Service.instance = new Bs5Service(options);\n    return Bs5Service.instance;\n  }\n\n  protected onBreakpointChanges() {\n    this._events.trigger(\"breakpoint:changed\", this.activeBreakpoint);\n  }\n\n  protected setActiveBreakpoint(breakpoint: Breakpoint) {\n    if (breakpoint && breakpoint.name !== this.activeBreakpoint?.name) {\n      this._activeBreakpoint = breakpoint;\n      this.onBreakpointChanges();\n    }\n  }\n\n  protected addEventListeners() {\n    window.addEventListener(\"resize\", this.onViewChanges, { passive: true });\n  }\n\n  protected removeEventListeners() {\n    window.removeEventListener(\"resize\", this.onViewChanges);\n  }\n\n  protected _onViewChanges() {\n    const newBreakpoint =\n      this.getBreakpointByDimension(getViewportDimensions().w) ||\n      this.getBreakpointByName(\"xs\");\n    if (newBreakpoint) {\n      this.setActiveBreakpoint(newBreakpoint);\n    }\n  }\n\n  protected onViewChanges = debounce(this._onViewChanges.bind(this));\n\n  public sortBreakpoints(breakpoints: Breakpoint[]) {\n    breakpoints.sort((a, b) => a.dimension - b.dimension);\n  }\n\n  public get options() {\n    return this._options;\n  }\n\n  public get activeBreakpoint() {\n    return this._activeBreakpoint;\n  }\n\n  public get breakpointNames() {\n    return this.options.breakpoints.map((breakpoint) => breakpoint.name);\n  }\n\n  public get events() {\n    return this._events;\n  }\n\n  public on(\n    eventName: \"breakpoint:changed\",\n    cb: (activeBreakpoint: Breakpoint) => void,\n    thisContext?: any\n  ): void;\n  public on(eventName: string, cb: EventCallback, thisContext?: any) {\n    return this.events.on(eventName, cb, thisContext);\n  }\n\n  public once(\n    eventName: \"breakpoint:changed\",\n    cb: (activeBreakpoint: Breakpoint) => void,\n    thisContext?: any\n  ): void;\n  public once(eventName: string, cb: EventCallback, thisContext?: any) {\n    return this.events.once(eventName, cb, thisContext);\n  }\n\n  public off(\n    eventName: \"breakpoint:changed\",\n    cb: (activeBreakpoint: Breakpoint) => void,\n    thisContext?: any\n  ): void;\n  public off(eventName: string, cb: EventCallback, thisContext?: any) {\n    return this.events.off(eventName, cb, thisContext);\n  }\n\n  /**\n   * Get breakpoint for width\n   * @param dimension The dimension you are looking for, e.g. window.innerWidth\n   * @param breakpoints Optional custom breakpoints, otherwise the default globally breakpoints are used\n   */\n  public getBreakpointByDimension(\n    dimension: number,\n    breakpoints?: Breakpoint[]\n  ): Breakpoint | null {\n    breakpoints = breakpoints || this.options.breakpoints;\n\n    for (let i = 0; i < breakpoints.length - 1; i++) {\n      const curr = breakpoints[i];\n      const next = breakpoints[i + 1];\n      if (\n        next &&\n        curr &&\n        dimension > curr.dimension &&\n        dimension < next.dimension\n      ) {\n        return curr;\n      }\n    }\n\n    const last = breakpoints[breakpoints.length - 1];\n    if (dimension >= last.dimension) {\n      return last;\n    }\n\n    return null;\n  }\n\n  /**\n   * Get breakpoint by name\n   * @param name The name you are looking for, e.g. xs\n   * @param breakpoints Optional custom breakpoints, otherwise the default globally breakpoints are used\n   */\n  public getBreakpointByName(\n    name: string,\n    breakpoints?: Breakpoint[]\n  ): Breakpoint | null {\n    breakpoints = breakpoints || this.options.breakpoints;\n    const found = breakpoints.find((breakpoint) => breakpoint.name === name);\n    if (!found) {\n      return null;\n    }\n    return found;\n  }\n\n  public getNextBreakpointByName(name: string) {\n    const breakpoints = this.breakpointNames;\n    const index = breakpoints.indexOf(name);\n    if (index < 0) {\n      throw new Error(`the breakpoint \"${name}\" does not exist!`);\n    }\n    // There is no next breakpoint\n    if (index === breakpoints.length - 1) {\n      return null;\n    }\n    return breakpoints[index + 1];\n  }\n\n  public getPrevBreakpointByName(name: string) {\n    const breakpoints = this.breakpointNames;\n    const index = breakpoints.indexOf(name);\n    if (index < 0) {\n      throw new Error(`the breakpoint \"${name}\" does not exist!`);\n    }\n    // There is no previous breakpoint\n    if (index === 0) {\n      return null;\n    }\n    return breakpoints[index - 1];\n  }\n\n  public isBreakpointGreaterThan(\n    isBreakpointName: string,\n    compareBreakpointName: string\n  ): boolean | null {\n    const isBreakpoint = this.getBreakpointByName(isBreakpointName);\n    const compareBreakpoint = this.getBreakpointByName(compareBreakpointName);\n    if (isBreakpoint && compareBreakpoint) {\n      return isBreakpoint.dimension > compareBreakpoint.dimension;\n    }\n    return null;\n  }\n\n  public isBreakpointSmallerThan(\n    isBreakpointName: string,\n    compareBreakpointName: string\n  ): boolean | null {\n    const isBreakpoint = this.getBreakpointByName(isBreakpointName);\n    const compareBreakpoint = this.getBreakpointByName(compareBreakpointName);\n    if (isBreakpoint && compareBreakpoint) {\n      return isBreakpoint.dimension < compareBreakpoint.dimension;\n    }\n    return null;\n  }\n\n  public isActiveBreakpointGreaterThan(\n    compareBreakpoint: string\n  ): boolean | null {\n    if (!this.activeBreakpoint) {\n      return null;\n    }\n    return this.isBreakpointGreaterThan(\n      this.activeBreakpoint.name,\n      compareBreakpoint\n    );\n  }\n\n  public isActiveBreakpointSmallerThan(\n    compareBreakpoint: string\n  ): boolean | null {\n    if (!this.activeBreakpoint) {\n      return null;\n    }\n    return this.isBreakpointSmallerThan(\n      this.activeBreakpoint.name,\n      compareBreakpoint\n    );\n  }\n}\n","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}","import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}","import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases  research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update  it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update  it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","/*!\n  * Bootstrap v5.3.0 (https://getbootstrap.com/)\n  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)\n  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n  */\nimport * as Popper from '@popperjs/core';\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * Constants\n */\n\nconst elementMap = new Map();\nconst Data = {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map());\n    }\n    const instanceMap = elementMap.get(element);\n\n    // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`);\n      return;\n    }\n    instanceMap.set(key, instance);\n  },\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null;\n    }\n    return null;\n  },\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return;\n    }\n    const instanceMap = elementMap.get(element);\n    instanceMap.delete(key);\n\n    // free up element references if there are no instances left for an element\n    if (instanceMap.size === 0) {\n      elementMap.delete(element);\n    }\n  }\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1000000;\nconst MILLISECONDS_MULTIPLIER = 1000;\nconst TRANSITION_END = 'transitionend';\n\n/**\n * Properly escape IDs selectors to handle weird IDs\n * @param {string} selector\n * @returns {string}\n */\nconst parseSelector = selector => {\n  if (selector && window.CSS && window.CSS.escape) {\n    // document.querySelector needs escaping to handle IDs (html5+) containing for instance /\n    selector = selector.replace(/#([^\\s\"#']+)/g, (match, id) => `#${CSS.escape(id)}`);\n  }\n  return selector;\n};\n\n// Shout-out Angus Croll (https://goo.gl/pxwQGp)\nconst toType = object => {\n  if (object === null || object === undefined) {\n    return `${object}`;\n  }\n  return Object.prototype.toString.call(object).match(/\\s([a-z]+)/i)[1].toLowerCase();\n};\n\n/**\n * Public Util API\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += Math.floor(Math.random() * MAX_UID);\n  } while (document.getElementById(prefix));\n  return prefix;\n};\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0;\n  }\n\n  // Get transition-duration of the element\n  let {\n    transitionDuration,\n    transitionDelay\n  } = window.getComputedStyle(element);\n  const floatTransitionDuration = Number.parseFloat(transitionDuration);\n  const floatTransitionDelay = Number.parseFloat(transitionDelay);\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0;\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0];\n  transitionDelay = transitionDelay.split(',')[0];\n  return (Number.parseFloat(transitionDuration) + Number.parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER;\n};\nconst triggerTransitionEnd = element => {\n  element.dispatchEvent(new Event(TRANSITION_END));\n};\nconst isElement = object => {\n  if (!object || typeof object !== 'object') {\n    return false;\n  }\n  if (typeof object.jquery !== 'undefined') {\n    object = object[0];\n  }\n  return typeof object.nodeType !== 'undefined';\n};\nconst getElement = object => {\n  // it's a jQuery object or a node element\n  if (isElement(object)) {\n    return object.jquery ? object[0] : object;\n  }\n  if (typeof object === 'string' && object.length > 0) {\n    return document.querySelector(parseSelector(object));\n  }\n  return null;\n};\nconst isVisible = element => {\n  if (!isElement(element) || element.getClientRects().length === 0) {\n    return false;\n  }\n  const elementIsVisible = getComputedStyle(element).getPropertyValue('visibility') === 'visible';\n  // Handle `details` element as its content may falsie appear visible when it is closed\n  const closedDetails = element.closest('details:not([open])');\n  if (!closedDetails) {\n    return elementIsVisible;\n  }\n  if (closedDetails !== element) {\n    const summary = element.closest('summary');\n    if (summary && summary.parentNode !== closedDetails) {\n      return false;\n    }\n    if (summary === null) {\n      return false;\n    }\n  }\n  return elementIsVisible;\n};\nconst isDisabled = element => {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    return true;\n  }\n  if (element.classList.contains('disabled')) {\n    return true;\n  }\n  if (typeof element.disabled !== 'undefined') {\n    return element.disabled;\n  }\n  return element.hasAttribute('disabled') && element.getAttribute('disabled') !== 'false';\n};\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null;\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode();\n    return root instanceof ShadowRoot ? root : null;\n  }\n  if (element instanceof ShadowRoot) {\n    return element;\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null;\n  }\n  return findShadowRoot(element.parentNode);\n};\nconst noop = () => {};\n\n/**\n * Trick to restart an element's animation\n *\n * @param {HTMLElement} element\n * @return void\n *\n * @see https://www.charistheo.io/blog/2021/02/restart-a-css-animation-with-javascript/#restarting-a-css-animation\n */\nconst reflow = element => {\n  element.offsetHeight; // eslint-disable-line no-unused-expressions\n};\n\nconst getjQuery = () => {\n  if (window.jQuery && !document.body.hasAttribute('data-bs-no-jquery')) {\n    return window.jQuery;\n  }\n  return null;\n};\nconst DOMContentLoadedCallbacks = [];\nconst onDOMContentLoaded = callback => {\n  if (document.readyState === 'loading') {\n    // add listener on the first call when the document is in loading state\n    if (!DOMContentLoadedCallbacks.length) {\n      document.addEventListener('DOMContentLoaded', () => {\n        for (const callback of DOMContentLoadedCallbacks) {\n          callback();\n        }\n      });\n    }\n    DOMContentLoadedCallbacks.push(callback);\n  } else {\n    callback();\n  }\n};\nconst isRTL = () => document.documentElement.dir === 'rtl';\nconst defineJQueryPlugin = plugin => {\n  onDOMContentLoaded(() => {\n    const $ = getjQuery();\n    /* istanbul ignore if */\n    if ($) {\n      const name = plugin.NAME;\n      const JQUERY_NO_CONFLICT = $.fn[name];\n      $.fn[name] = plugin.jQueryInterface;\n      $.fn[name].Constructor = plugin;\n      $.fn[name].noConflict = () => {\n        $.fn[name] = JQUERY_NO_CONFLICT;\n        return plugin.jQueryInterface;\n      };\n    }\n  });\n};\nconst execute = (possibleCallback, args = [], defaultValue = possibleCallback) => {\n  return typeof possibleCallback === 'function' ? possibleCallback(...args) : defaultValue;\n};\nconst executeAfterTransition = (callback, transitionElement, waitForTransition = true) => {\n  if (!waitForTransition) {\n    execute(callback);\n    return;\n  }\n  const durationPadding = 5;\n  const emulatedDuration = getTransitionDurationFromElement(transitionElement) + durationPadding;\n  let called = false;\n  const handler = ({\n    target\n  }) => {\n    if (target !== transitionElement) {\n      return;\n    }\n    called = true;\n    transitionElement.removeEventListener(TRANSITION_END, handler);\n    execute(callback);\n  };\n  transitionElement.addEventListener(TRANSITION_END, handler);\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(transitionElement);\n    }\n  }, emulatedDuration);\n};\n\n/**\n * Return the previous/next element of a list.\n *\n * @param {array} list    The list of elements\n * @param activeElement   The active element\n * @param shouldGetNext   Choose to get next or previous element\n * @param isCycleAllowed\n * @return {Element|elem} The proper element\n */\nconst getNextActiveElement = (list, activeElement, shouldGetNext, isCycleAllowed) => {\n  const listLength = list.length;\n  let index = list.indexOf(activeElement);\n\n  // if the element does not exist in the list return an element\n  // depending on the direction and if cycle is allowed\n  if (index === -1) {\n    return !shouldGetNext && isCycleAllowed ? list[listLength - 1] : list[0];\n  }\n  index += shouldGetNext ? 1 : -1;\n  if (isCycleAllowed) {\n    index = (index + listLength) % listLength;\n  }\n  return list[Math.max(0, Math.min(index, listLength - 1))];\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/event-handler.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst namespaceRegex = /[^.]*(?=\\..*)\\.|.*/;\nconst stripNameRegex = /\\..*/;\nconst stripUidRegex = /::\\d+$/;\nconst eventRegistry = {}; // Events storage\nlet uidEvent = 1;\nconst customEvents = {\n  mouseenter: 'mouseover',\n  mouseleave: 'mouseout'\n};\nconst nativeEvents = new Set(['click', 'dblclick', 'mouseup', 'mousedown', 'contextmenu', 'mousewheel', 'DOMMouseScroll', 'mouseover', 'mouseout', 'mousemove', 'selectstart', 'selectend', 'keydown', 'keypress', 'keyup', 'orientationchange', 'touchstart', 'touchmove', 'touchend', 'touchcancel', 'pointerdown', 'pointermove', 'pointerup', 'pointerleave', 'pointercancel', 'gesturestart', 'gesturechange', 'gestureend', 'focus', 'blur', 'change', 'reset', 'select', 'submit', 'focusin', 'focusout', 'load', 'unload', 'beforeunload', 'resize', 'move', 'DOMContentLoaded', 'readystatechange', 'error', 'abort', 'scroll']);\n\n/**\n * Private methods\n */\n\nfunction makeEventUid(element, uid) {\n  return uid && `${uid}::${uidEvent++}` || element.uidEvent || uidEvent++;\n}\nfunction getElementEvents(element) {\n  const uid = makeEventUid(element);\n  element.uidEvent = uid;\n  eventRegistry[uid] = eventRegistry[uid] || {};\n  return eventRegistry[uid];\n}\nfunction bootstrapHandler(element, fn) {\n  return function handler(event) {\n    hydrateObj(event, {\n      delegateTarget: element\n    });\n    if (handler.oneOff) {\n      EventHandler.off(element, event.type, fn);\n    }\n    return fn.apply(element, [event]);\n  };\n}\nfunction bootstrapDelegationHandler(element, selector, fn) {\n  return function handler(event) {\n    const domElements = element.querySelectorAll(selector);\n    for (let {\n      target\n    } = event; target && target !== this; target = target.parentNode) {\n      for (const domElement of domElements) {\n        if (domElement !== target) {\n          continue;\n        }\n        hydrateObj(event, {\n          delegateTarget: target\n        });\n        if (handler.oneOff) {\n          EventHandler.off(element, event.type, selector, fn);\n        }\n        return fn.apply(target, [event]);\n      }\n    }\n  };\n}\nfunction findHandler(events, callable, delegationSelector = null) {\n  return Object.values(events).find(event => event.callable === callable && event.delegationSelector === delegationSelector);\n}\nfunction normalizeParameters(originalTypeEvent, handler, delegationFunction) {\n  const isDelegated = typeof handler === 'string';\n  // TODO: tooltip passes `false` instead of selector, so we need to check\n  const callable = isDelegated ? delegationFunction : handler || delegationFunction;\n  let typeEvent = getTypeEvent(originalTypeEvent);\n  if (!nativeEvents.has(typeEvent)) {\n    typeEvent = originalTypeEvent;\n  }\n  return [isDelegated, callable, typeEvent];\n}\nfunction addHandler(element, originalTypeEvent, handler, delegationFunction, oneOff) {\n  if (typeof originalTypeEvent !== 'string' || !element) {\n    return;\n  }\n  let [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction);\n\n  // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position\n  // this prevents the handler from being dispatched the same way as mouseover or mouseout does\n  if (originalTypeEvent in customEvents) {\n    const wrapFunction = fn => {\n      return function (event) {\n        if (!event.relatedTarget || event.relatedTarget !== event.delegateTarget && !event.delegateTarget.contains(event.relatedTarget)) {\n          return fn.call(this, event);\n        }\n      };\n    };\n    callable = wrapFunction(callable);\n  }\n  const events = getElementEvents(element);\n  const handlers = events[typeEvent] || (events[typeEvent] = {});\n  const previousFunction = findHandler(handlers, callable, isDelegated ? handler : null);\n  if (previousFunction) {\n    previousFunction.oneOff = previousFunction.oneOff && oneOff;\n    return;\n  }\n  const uid = makeEventUid(callable, originalTypeEvent.replace(namespaceRegex, ''));\n  const fn = isDelegated ? bootstrapDelegationHandler(element, handler, callable) : bootstrapHandler(element, callable);\n  fn.delegationSelector = isDelegated ? handler : null;\n  fn.callable = callable;\n  fn.oneOff = oneOff;\n  fn.uidEvent = uid;\n  handlers[uid] = fn;\n  element.addEventListener(typeEvent, fn, isDelegated);\n}\nfunction removeHandler(element, events, typeEvent, handler, delegationSelector) {\n  const fn = findHandler(events[typeEvent], handler, delegationSelector);\n  if (!fn) {\n    return;\n  }\n  element.removeEventListener(typeEvent, fn, Boolean(delegationSelector));\n  delete events[typeEvent][fn.uidEvent];\n}\nfunction removeNamespacedHandlers(element, events, typeEvent, namespace) {\n  const storeElementEvent = events[typeEvent] || {};\n  for (const [handlerKey, event] of Object.entries(storeElementEvent)) {\n    if (handlerKey.includes(namespace)) {\n      removeHandler(element, events, typeEvent, event.callable, event.delegationSelector);\n    }\n  }\n}\nfunction getTypeEvent(event) {\n  // allow to get the native events from namespaced events ('click.bs.button' --> 'click')\n  event = event.replace(stripNameRegex, '');\n  return customEvents[event] || event;\n}\nconst EventHandler = {\n  on(element, event, handler, delegationFunction) {\n    addHandler(element, event, handler, delegationFunction, false);\n  },\n  one(element, event, handler, delegationFunction) {\n    addHandler(element, event, handler, delegationFunction, true);\n  },\n  off(element, originalTypeEvent, handler, delegationFunction) {\n    if (typeof originalTypeEvent !== 'string' || !element) {\n      return;\n    }\n    const [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction);\n    const inNamespace = typeEvent !== originalTypeEvent;\n    const events = getElementEvents(element);\n    const storeElementEvent = events[typeEvent] || {};\n    const isNamespace = originalTypeEvent.startsWith('.');\n    if (typeof callable !== 'undefined') {\n      // Simplest case: handler is passed, remove that listener ONLY.\n      if (!Object.keys(storeElementEvent).length) {\n        return;\n      }\n      removeHandler(element, events, typeEvent, callable, isDelegated ? handler : null);\n      return;\n    }\n    if (isNamespace) {\n      for (const elementEvent of Object.keys(events)) {\n        removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1));\n      }\n    }\n    for (const [keyHandlers, event] of Object.entries(storeElementEvent)) {\n      const handlerKey = keyHandlers.replace(stripUidRegex, '');\n      if (!inNamespace || originalTypeEvent.includes(handlerKey)) {\n        removeHandler(element, events, typeEvent, event.callable, event.delegationSelector);\n      }\n    }\n  },\n  trigger(element, event, args) {\n    if (typeof event !== 'string' || !element) {\n      return null;\n    }\n    const $ = getjQuery();\n    const typeEvent = getTypeEvent(event);\n    const inNamespace = event !== typeEvent;\n    let jQueryEvent = null;\n    let bubbles = true;\n    let nativeDispatch = true;\n    let defaultPrevented = false;\n    if (inNamespace && $) {\n      jQueryEvent = $.Event(event, args);\n      $(element).trigger(jQueryEvent);\n      bubbles = !jQueryEvent.isPropagationStopped();\n      nativeDispatch = !jQueryEvent.isImmediatePropagationStopped();\n      defaultPrevented = jQueryEvent.isDefaultPrevented();\n    }\n    const evt = hydrateObj(new Event(event, {\n      bubbles,\n      cancelable: true\n    }), args);\n    if (defaultPrevented) {\n      evt.preventDefault();\n    }\n    if (nativeDispatch) {\n      element.dispatchEvent(evt);\n    }\n    if (evt.defaultPrevented && jQueryEvent) {\n      jQueryEvent.preventDefault();\n    }\n    return evt;\n  }\n};\nfunction hydrateObj(obj, meta = {}) {\n  for (const [key, value] of Object.entries(meta)) {\n    try {\n      obj[key] = value;\n    } catch (_unused) {\n      Object.defineProperty(obj, key, {\n        configurable: true,\n        get() {\n          return value;\n        }\n      });\n    }\n  }\n  return obj;\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/manipulator.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nfunction normalizeData(value) {\n  if (value === 'true') {\n    return true;\n  }\n  if (value === 'false') {\n    return false;\n  }\n  if (value === Number(value).toString()) {\n    return Number(value);\n  }\n  if (value === '' || value === 'null') {\n    return null;\n  }\n  if (typeof value !== 'string') {\n    return value;\n  }\n  try {\n    return JSON.parse(decodeURIComponent(value));\n  } catch (_unused) {\n    return value;\n  }\n}\nfunction normalizeDataKey(key) {\n  return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`);\n}\nconst Manipulator = {\n  setDataAttribute(element, key, value) {\n    element.setAttribute(`data-bs-${normalizeDataKey(key)}`, value);\n  },\n  removeDataAttribute(element, key) {\n    element.removeAttribute(`data-bs-${normalizeDataKey(key)}`);\n  },\n  getDataAttributes(element) {\n    if (!element) {\n      return {};\n    }\n    const attributes = {};\n    const bsKeys = Object.keys(element.dataset).filter(key => key.startsWith('bs') && !key.startsWith('bsConfig'));\n    for (const key of bsKeys) {\n      let pureKey = key.replace(/^bs/, '');\n      pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length);\n      attributes[pureKey] = normalizeData(element.dataset[key]);\n    }\n    return attributes;\n  },\n  getDataAttribute(element, key) {\n    return normalizeData(element.getAttribute(`data-bs-${normalizeDataKey(key)}`));\n  }\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/config.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Class definition\n */\n\nclass Config {\n  // Getters\n  static get Default() {\n    return {};\n  }\n  static get DefaultType() {\n    return {};\n  }\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!');\n  }\n  _getConfig(config) {\n    config = this._mergeConfigObj(config);\n    config = this._configAfterMerge(config);\n    this._typeCheckConfig(config);\n    return config;\n  }\n  _configAfterMerge(config) {\n    return config;\n  }\n  _mergeConfigObj(config, element) {\n    const jsonConfig = isElement(element) ? Manipulator.getDataAttribute(element, 'config') : {}; // try to parse\n\n    return {\n      ...this.constructor.Default,\n      ...(typeof jsonConfig === 'object' ? jsonConfig : {}),\n      ...(isElement(element) ? Manipulator.getDataAttributes(element) : {}),\n      ...(typeof config === 'object' ? config : {})\n    };\n  }\n  _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {\n    for (const [property, expectedTypes] of Object.entries(configTypes)) {\n      const value = config[property];\n      const valueType = isElement(value) ? 'element' : toType(value);\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`);\n      }\n    }\n  }\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst VERSION = '5.3.0';\n\n/**\n * Class definition\n */\n\nclass BaseComponent extends Config {\n  constructor(element, config) {\n    super();\n    element = getElement(element);\n    if (!element) {\n      return;\n    }\n    this._element = element;\n    this._config = this._getConfig(config);\n    Data.set(this._element, this.constructor.DATA_KEY, this);\n  }\n\n  // Public\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY);\n    EventHandler.off(this._element, this.constructor.EVENT_KEY);\n    for (const propertyName of Object.getOwnPropertyNames(this)) {\n      this[propertyName] = null;\n    }\n  }\n  _queueCallback(callback, element, isAnimated = true) {\n    executeAfterTransition(callback, element, isAnimated);\n  }\n  _getConfig(config) {\n    config = this._mergeConfigObj(config, this._element);\n    config = this._configAfterMerge(config);\n    this._typeCheckConfig(config);\n    return config;\n  }\n\n  // Static\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY);\n  }\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null);\n  }\n  static get VERSION() {\n    return VERSION;\n  }\n  static get DATA_KEY() {\n    return `bs.${this.NAME}`;\n  }\n  static get EVENT_KEY() {\n    return `.${this.DATA_KEY}`;\n  }\n  static eventName(name) {\n    return `${name}${this.EVENT_KEY}`;\n  }\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/selector-engine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-bs-target');\n  if (!selector || selector === '#') {\n    let hrefAttribute = element.getAttribute('href');\n\n    // The only valid content that could double as a selector are IDs or classes,\n    // so everything starting with `#` or `.`. If a \"real\" URL is used as the selector,\n    // `document.querySelector` will rightfully complain it is invalid.\n    // See https://github.com/twbs/bootstrap/issues/32273\n    if (!hrefAttribute || !hrefAttribute.includes('#') && !hrefAttribute.startsWith('.')) {\n      return null;\n    }\n\n    // Just in case some CMS puts out a full URL with the anchor appended\n    if (hrefAttribute.includes('#') && !hrefAttribute.startsWith('#')) {\n      hrefAttribute = `#${hrefAttribute.split('#')[1]}`;\n    }\n    selector = hrefAttribute && hrefAttribute !== '#' ? hrefAttribute.trim() : null;\n  }\n  return parseSelector(selector);\n};\nconst SelectorEngine = {\n  find(selector, element = document.documentElement) {\n    return [].concat(...Element.prototype.querySelectorAll.call(element, selector));\n  },\n  findOne(selector, element = document.documentElement) {\n    return Element.prototype.querySelector.call(element, selector);\n  },\n  children(element, selector) {\n    return [].concat(...element.children).filter(child => child.matches(selector));\n  },\n  parents(element, selector) {\n    const parents = [];\n    let ancestor = element.parentNode.closest(selector);\n    while (ancestor) {\n      parents.push(ancestor);\n      ancestor = ancestor.parentNode.closest(selector);\n    }\n    return parents;\n  },\n  prev(element, selector) {\n    let previous = element.previousElementSibling;\n    while (previous) {\n      if (previous.matches(selector)) {\n        return [previous];\n      }\n      previous = previous.previousElementSibling;\n    }\n    return [];\n  },\n  // TODO: this is now unused; remove later along with prev()\n  next(element, selector) {\n    let next = element.nextElementSibling;\n    while (next) {\n      if (next.matches(selector)) {\n        return [next];\n      }\n      next = next.nextElementSibling;\n    }\n    return [];\n  },\n  focusableChildren(element) {\n    const focusables = ['a', 'button', 'input', 'textarea', 'select', 'details', '[tabindex]', '[contenteditable=\"true\"]'].map(selector => `${selector}:not([tabindex^=\"-\"])`).join(',');\n    return this.find(focusables, element).filter(el => !isDisabled(el) && isVisible(el));\n  },\n  getSelectorFromElement(element) {\n    const selector = getSelector(element);\n    if (selector) {\n      return SelectorEngine.findOne(selector) ? selector : null;\n    }\n    return null;\n  },\n  getElementFromSelector(element) {\n    const selector = getSelector(element);\n    return selector ? SelectorEngine.findOne(selector) : null;\n  },\n  getMultipleElementsFromSelector(element) {\n    const selector = getSelector(element);\n    return selector ? SelectorEngine.find(selector) : [];\n  }\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/component-functions.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst enableDismissTrigger = (component, method = 'hide') => {\n  const clickEvent = `click.dismiss${component.EVENT_KEY}`;\n  const name = component.NAME;\n  EventHandler.on(document, clickEvent, `[data-bs-dismiss=\"${name}\"]`, function (event) {\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault();\n    }\n    if (isDisabled(this)) {\n      return;\n    }\n    const target = SelectorEngine.getElementFromSelector(this) || this.closest(`.${name}`);\n    const instance = component.getOrCreateInstance(target);\n\n    // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method\n    instance[method]();\n  });\n};\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$f = 'alert';\nconst DATA_KEY$a = 'bs.alert';\nconst EVENT_KEY$b = `.${DATA_KEY$a}`;\nconst EVENT_CLOSE = `close${EVENT_KEY$b}`;\nconst EVENT_CLOSED = `closed${EVENT_KEY$b}`;\nconst CLASS_NAME_FADE$5 = 'fade';\nconst CLASS_NAME_SHOW$8 = 'show';\n\n/**\n * Class definition\n */\n\nclass Alert extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME$f;\n  }\n\n  // Public\n  close() {\n    const closeEvent = EventHandler.trigger(this._element, EVENT_CLOSE);\n    if (closeEvent.defaultPrevented) {\n      return;\n    }\n    this._element.classList.remove(CLASS_NAME_SHOW$8);\n    const isAnimated = this._element.classList.contains(CLASS_NAME_FADE$5);\n    this._queueCallback(() => this._destroyElement(), this._element, isAnimated);\n  }\n\n  // Private\n  _destroyElement() {\n    this._element.remove();\n    EventHandler.trigger(this._element, EVENT_CLOSED);\n    this.dispose();\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Alert.getOrCreateInstance(this);\n      if (typeof config !== 'string') {\n        return;\n      }\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n      data[config](this);\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nenableDismissTrigger(Alert, 'close');\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Alert);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap button.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$e = 'button';\nconst DATA_KEY$9 = 'bs.button';\nconst EVENT_KEY$a = `.${DATA_KEY$9}`;\nconst DATA_API_KEY$6 = '.data-api';\nconst CLASS_NAME_ACTIVE$3 = 'active';\nconst SELECTOR_DATA_TOGGLE$5 = '[data-bs-toggle=\"button\"]';\nconst EVENT_CLICK_DATA_API$6 = `click${EVENT_KEY$a}${DATA_API_KEY$6}`;\n\n/**\n * Class definition\n */\n\nclass Button extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME$e;\n  }\n\n  // Public\n  toggle() {\n    // Toggle class and sync the `aria-pressed` attribute with the return value of the `.toggle()` method\n    this._element.setAttribute('aria-pressed', this._element.classList.toggle(CLASS_NAME_ACTIVE$3));\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Button.getOrCreateInstance(this);\n      if (config === 'toggle') {\n        data[config]();\n      }\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$6, SELECTOR_DATA_TOGGLE$5, event => {\n  event.preventDefault();\n  const button = event.target.closest(SELECTOR_DATA_TOGGLE$5);\n  const data = Button.getOrCreateInstance(button);\n  data.toggle();\n});\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Button);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/swipe.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$d = 'swipe';\nconst EVENT_KEY$9 = '.bs.swipe';\nconst EVENT_TOUCHSTART = `touchstart${EVENT_KEY$9}`;\nconst EVENT_TOUCHMOVE = `touchmove${EVENT_KEY$9}`;\nconst EVENT_TOUCHEND = `touchend${EVENT_KEY$9}`;\nconst EVENT_POINTERDOWN = `pointerdown${EVENT_KEY$9}`;\nconst EVENT_POINTERUP = `pointerup${EVENT_KEY$9}`;\nconst POINTER_TYPE_TOUCH = 'touch';\nconst POINTER_TYPE_PEN = 'pen';\nconst CLASS_NAME_POINTER_EVENT = 'pointer-event';\nconst SWIPE_THRESHOLD = 40;\nconst Default$c = {\n  endCallback: null,\n  leftCallback: null,\n  rightCallback: null\n};\nconst DefaultType$c = {\n  endCallback: '(function|null)',\n  leftCallback: '(function|null)',\n  rightCallback: '(function|null)'\n};\n\n/**\n * Class definition\n */\n\nclass Swipe extends Config {\n  constructor(element, config) {\n    super();\n    this._element = element;\n    if (!element || !Swipe.isSupported()) {\n      return;\n    }\n    this._config = this._getConfig(config);\n    this._deltaX = 0;\n    this._supportPointerEvents = Boolean(window.PointerEvent);\n    this._initEvents();\n  }\n\n  // Getters\n  static get Default() {\n    return Default$c;\n  }\n  static get DefaultType() {\n    return DefaultType$c;\n  }\n  static get NAME() {\n    return NAME$d;\n  }\n\n  // Public\n  dispose() {\n    EventHandler.off(this._element, EVENT_KEY$9);\n  }\n\n  // Private\n  _start(event) {\n    if (!this._supportPointerEvents) {\n      this._deltaX = event.touches[0].clientX;\n      return;\n    }\n    if (this._eventIsPointerPenTouch(event)) {\n      this._deltaX = event.clientX;\n    }\n  }\n  _end(event) {\n    if (this._eventIsPointerPenTouch(event)) {\n      this._deltaX = event.clientX - this._deltaX;\n    }\n    this._handleSwipe();\n    execute(this._config.endCallback);\n  }\n  _move(event) {\n    this._deltaX = event.touches && event.touches.length > 1 ? 0 : event.touches[0].clientX - this._deltaX;\n  }\n  _handleSwipe() {\n    const absDeltaX = Math.abs(this._deltaX);\n    if (absDeltaX <= SWIPE_THRESHOLD) {\n      return;\n    }\n    const direction = absDeltaX / this._deltaX;\n    this._deltaX = 0;\n    if (!direction) {\n      return;\n    }\n    execute(direction > 0 ? this._config.rightCallback : this._config.leftCallback);\n  }\n  _initEvents() {\n    if (this._supportPointerEvents) {\n      EventHandler.on(this._element, EVENT_POINTERDOWN, event => this._start(event));\n      EventHandler.on(this._element, EVENT_POINTERUP, event => this._end(event));\n      this._element.classList.add(CLASS_NAME_POINTER_EVENT);\n    } else {\n      EventHandler.on(this._element, EVENT_TOUCHSTART, event => this._start(event));\n      EventHandler.on(this._element, EVENT_TOUCHMOVE, event => this._move(event));\n      EventHandler.on(this._element, EVENT_TOUCHEND, event => this._end(event));\n    }\n  }\n  _eventIsPointerPenTouch(event) {\n    return this._supportPointerEvents && (event.pointerType === POINTER_TYPE_PEN || event.pointerType === POINTER_TYPE_TOUCH);\n  }\n\n  // Static\n  static isSupported() {\n    return 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0;\n  }\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap carousel.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$c = 'carousel';\nconst DATA_KEY$8 = 'bs.carousel';\nconst EVENT_KEY$8 = `.${DATA_KEY$8}`;\nconst DATA_API_KEY$5 = '.data-api';\nconst ARROW_LEFT_KEY$1 = 'ArrowLeft';\nconst ARROW_RIGHT_KEY$1 = 'ArrowRight';\nconst TOUCHEVENT_COMPAT_WAIT = 500; // Time for mouse compat events to fire after touch\n\nconst ORDER_NEXT = 'next';\nconst ORDER_PREV = 'prev';\nconst DIRECTION_LEFT = 'left';\nconst DIRECTION_RIGHT = 'right';\nconst EVENT_SLIDE = `slide${EVENT_KEY$8}`;\nconst EVENT_SLID = `slid${EVENT_KEY$8}`;\nconst EVENT_KEYDOWN$1 = `keydown${EVENT_KEY$8}`;\nconst EVENT_MOUSEENTER$1 = `mouseenter${EVENT_KEY$8}`;\nconst EVENT_MOUSELEAVE$1 = `mouseleave${EVENT_KEY$8}`;\nconst EVENT_DRAG_START = `dragstart${EVENT_KEY$8}`;\nconst EVENT_LOAD_DATA_API$3 = `load${EVENT_KEY$8}${DATA_API_KEY$5}`;\nconst EVENT_CLICK_DATA_API$5 = `click${EVENT_KEY$8}${DATA_API_KEY$5}`;\nconst CLASS_NAME_CAROUSEL = 'carousel';\nconst CLASS_NAME_ACTIVE$2 = 'active';\nconst CLASS_NAME_SLIDE = 'slide';\nconst CLASS_NAME_END = 'carousel-item-end';\nconst CLASS_NAME_START = 'carousel-item-start';\nconst CLASS_NAME_NEXT = 'carousel-item-next';\nconst CLASS_NAME_PREV = 'carousel-item-prev';\nconst SELECTOR_ACTIVE = '.active';\nconst SELECTOR_ITEM = '.carousel-item';\nconst SELECTOR_ACTIVE_ITEM = SELECTOR_ACTIVE + SELECTOR_ITEM;\nconst SELECTOR_ITEM_IMG = '.carousel-item img';\nconst SELECTOR_INDICATORS = '.carousel-indicators';\nconst SELECTOR_DATA_SLIDE = '[data-bs-slide], [data-bs-slide-to]';\nconst SELECTOR_DATA_RIDE = '[data-bs-ride=\"carousel\"]';\nconst KEY_TO_DIRECTION = {\n  [ARROW_LEFT_KEY$1]: DIRECTION_RIGHT,\n  [ARROW_RIGHT_KEY$1]: DIRECTION_LEFT\n};\nconst Default$b = {\n  interval: 5000,\n  keyboard: true,\n  pause: 'hover',\n  ride: false,\n  touch: true,\n  wrap: true\n};\nconst DefaultType$b = {\n  interval: '(number|boolean)',\n  // TODO:v6 remove boolean support\n  keyboard: 'boolean',\n  pause: '(string|boolean)',\n  ride: '(boolean|string)',\n  touch: 'boolean',\n  wrap: 'boolean'\n};\n\n/**\n * Class definition\n */\n\nclass Carousel extends BaseComponent {\n  constructor(element, config) {\n    super(element, config);\n    this._interval = null;\n    this._activeElement = null;\n    this._isSliding = false;\n    this.touchTimeout = null;\n    this._swipeHelper = null;\n    this._indicatorsElement = SelectorEngine.findOne(SELECTOR_INDICATORS, this._element);\n    this._addEventListeners();\n    if (this._config.ride === CLASS_NAME_CAROUSEL) {\n      this.cycle();\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default$b;\n  }\n  static get DefaultType() {\n    return DefaultType$b;\n  }\n  static get NAME() {\n    return NAME$c;\n  }\n\n  // Public\n  next() {\n    this._slide(ORDER_NEXT);\n  }\n  nextWhenVisible() {\n    // FIXME TODO use `document.visibilityState`\n    // Don't call next when the page isn't visible\n    // or the carousel or its parent isn't visible\n    if (!document.hidden && isVisible(this._element)) {\n      this.next();\n    }\n  }\n  prev() {\n    this._slide(ORDER_PREV);\n  }\n  pause() {\n    if (this._isSliding) {\n      triggerTransitionEnd(this._element);\n    }\n    this._clearInterval();\n  }\n  cycle() {\n    this._clearInterval();\n    this._updateInterval();\n    this._interval = setInterval(() => this.nextWhenVisible(), this._config.interval);\n  }\n  _maybeEnableCycle() {\n    if (!this._config.ride) {\n      return;\n    }\n    if (this._isSliding) {\n      EventHandler.one(this._element, EVENT_SLID, () => this.cycle());\n      return;\n    }\n    this.cycle();\n  }\n  to(index) {\n    const items = this._getItems();\n    if (index > items.length - 1 || index < 0) {\n      return;\n    }\n    if (this._isSliding) {\n      EventHandler.one(this._element, EVENT_SLID, () => this.to(index));\n      return;\n    }\n    const activeIndex = this._getItemIndex(this._getActive());\n    if (activeIndex === index) {\n      return;\n    }\n    const order = index > activeIndex ? ORDER_NEXT : ORDER_PREV;\n    this._slide(order, items[index]);\n  }\n  dispose() {\n    if (this._swipeHelper) {\n      this._swipeHelper.dispose();\n    }\n    super.dispose();\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    config.defaultInterval = config.interval;\n    return config;\n  }\n  _addEventListeners() {\n    if (this._config.keyboard) {\n      EventHandler.on(this._element, EVENT_KEYDOWN$1, event => this._keydown(event));\n    }\n    if (this._config.pause === 'hover') {\n      EventHandler.on(this._element, EVENT_MOUSEENTER$1, () => this.pause());\n      EventHandler.on(this._element, EVENT_MOUSELEAVE$1, () => this._maybeEnableCycle());\n    }\n    if (this._config.touch && Swipe.isSupported()) {\n      this._addTouchEventListeners();\n    }\n  }\n  _addTouchEventListeners() {\n    for (const img of SelectorEngine.find(SELECTOR_ITEM_IMG, this._element)) {\n      EventHandler.on(img, EVENT_DRAG_START, event => event.preventDefault());\n    }\n    const endCallBack = () => {\n      if (this._config.pause !== 'hover') {\n        return;\n      }\n\n      // If it's a touch-enabled device, mouseenter/leave are fired as\n      // part of the mouse compatibility events on first tap - the carousel\n      // would stop cycling until user tapped out of it;\n      // here, we listen for touchend, explicitly pause the carousel\n      // (as if it's the second time we tap on it, mouseenter compat event\n      // is NOT fired) and after a timeout (to allow for mouse compatibility\n      // events to fire) we explicitly restart cycling\n\n      this.pause();\n      if (this.touchTimeout) {\n        clearTimeout(this.touchTimeout);\n      }\n      this.touchTimeout = setTimeout(() => this._maybeEnableCycle(), TOUCHEVENT_COMPAT_WAIT + this._config.interval);\n    };\n    const swipeConfig = {\n      leftCallback: () => this._slide(this._directionToOrder(DIRECTION_LEFT)),\n      rightCallback: () => this._slide(this._directionToOrder(DIRECTION_RIGHT)),\n      endCallback: endCallBack\n    };\n    this._swipeHelper = new Swipe(this._element, swipeConfig);\n  }\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) {\n      return;\n    }\n    const direction = KEY_TO_DIRECTION[event.key];\n    if (direction) {\n      event.preventDefault();\n      this._slide(this._directionToOrder(direction));\n    }\n  }\n  _getItemIndex(element) {\n    return this._getItems().indexOf(element);\n  }\n  _setActiveIndicatorElement(index) {\n    if (!this._indicatorsElement) {\n      return;\n    }\n    const activeIndicator = SelectorEngine.findOne(SELECTOR_ACTIVE, this._indicatorsElement);\n    activeIndicator.classList.remove(CLASS_NAME_ACTIVE$2);\n    activeIndicator.removeAttribute('aria-current');\n    const newActiveIndicator = SelectorEngine.findOne(`[data-bs-slide-to=\"${index}\"]`, this._indicatorsElement);\n    if (newActiveIndicator) {\n      newActiveIndicator.classList.add(CLASS_NAME_ACTIVE$2);\n      newActiveIndicator.setAttribute('aria-current', 'true');\n    }\n  }\n  _updateInterval() {\n    const element = this._activeElement || this._getActive();\n    if (!element) {\n      return;\n    }\n    const elementInterval = Number.parseInt(element.getAttribute('data-bs-interval'), 10);\n    this._config.interval = elementInterval || this._config.defaultInterval;\n  }\n  _slide(order, element = null) {\n    if (this._isSliding) {\n      return;\n    }\n    const activeElement = this._getActive();\n    const isNext = order === ORDER_NEXT;\n    const nextElement = element || getNextActiveElement(this._getItems(), activeElement, isNext, this._config.wrap);\n    if (nextElement === activeElement) {\n      return;\n    }\n    const nextElementIndex = this._getItemIndex(nextElement);\n    const triggerEvent = eventName => {\n      return EventHandler.trigger(this._element, eventName, {\n        relatedTarget: nextElement,\n        direction: this._orderToDirection(order),\n        from: this._getItemIndex(activeElement),\n        to: nextElementIndex\n      });\n    };\n    const slideEvent = triggerEvent(EVENT_SLIDE);\n    if (slideEvent.defaultPrevented) {\n      return;\n    }\n    if (!activeElement || !nextElement) {\n      // Some weirdness is happening, so we bail\n      // TODO: change tests that use empty divs to avoid this check\n      return;\n    }\n    const isCycling = Boolean(this._interval);\n    this.pause();\n    this._isSliding = true;\n    this._setActiveIndicatorElement(nextElementIndex);\n    this._activeElement = nextElement;\n    const directionalClassName = isNext ? CLASS_NAME_START : CLASS_NAME_END;\n    const orderClassName = isNext ? CLASS_NAME_NEXT : CLASS_NAME_PREV;\n    nextElement.classList.add(orderClassName);\n    reflow(nextElement);\n    activeElement.classList.add(directionalClassName);\n    nextElement.classList.add(directionalClassName);\n    const completeCallBack = () => {\n      nextElement.classList.remove(directionalClassName, orderClassName);\n      nextElement.classList.add(CLASS_NAME_ACTIVE$2);\n      activeElement.classList.remove(CLASS_NAME_ACTIVE$2, orderClassName, directionalClassName);\n      this._isSliding = false;\n      triggerEvent(EVENT_SLID);\n    };\n    this._queueCallback(completeCallBack, activeElement, this._isAnimated());\n    if (isCycling) {\n      this.cycle();\n    }\n  }\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_SLIDE);\n  }\n  _getActive() {\n    return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element);\n  }\n  _getItems() {\n    return SelectorEngine.find(SELECTOR_ITEM, this._element);\n  }\n  _clearInterval() {\n    if (this._interval) {\n      clearInterval(this._interval);\n      this._interval = null;\n    }\n  }\n  _directionToOrder(direction) {\n    if (isRTL()) {\n      return direction === DIRECTION_LEFT ? ORDER_PREV : ORDER_NEXT;\n    }\n    return direction === DIRECTION_LEFT ? ORDER_NEXT : ORDER_PREV;\n  }\n  _orderToDirection(order) {\n    if (isRTL()) {\n      return order === ORDER_PREV ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return order === ORDER_PREV ? DIRECTION_RIGHT : DIRECTION_LEFT;\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Carousel.getOrCreateInstance(this, config);\n      if (typeof config === 'number') {\n        data.to(config);\n        return;\n      }\n      if (typeof config === 'string') {\n        if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config]();\n      }\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$5, SELECTOR_DATA_SLIDE, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this);\n  if (!target || !target.classList.contains(CLASS_NAME_CAROUSEL)) {\n    return;\n  }\n  event.preventDefault();\n  const carousel = Carousel.getOrCreateInstance(target);\n  const slideIndex = this.getAttribute('data-bs-slide-to');\n  if (slideIndex) {\n    carousel.to(slideIndex);\n    carousel._maybeEnableCycle();\n    return;\n  }\n  if (Manipulator.getDataAttribute(this, 'slide') === 'next') {\n    carousel.next();\n    carousel._maybeEnableCycle();\n    return;\n  }\n  carousel.prev();\n  carousel._maybeEnableCycle();\n});\nEventHandler.on(window, EVENT_LOAD_DATA_API$3, () => {\n  const carousels = SelectorEngine.find(SELECTOR_DATA_RIDE);\n  for (const carousel of carousels) {\n    Carousel.getOrCreateInstance(carousel);\n  }\n});\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Carousel);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap collapse.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$b = 'collapse';\nconst DATA_KEY$7 = 'bs.collapse';\nconst EVENT_KEY$7 = `.${DATA_KEY$7}`;\nconst DATA_API_KEY$4 = '.data-api';\nconst EVENT_SHOW$6 = `show${EVENT_KEY$7}`;\nconst EVENT_SHOWN$6 = `shown${EVENT_KEY$7}`;\nconst EVENT_HIDE$6 = `hide${EVENT_KEY$7}`;\nconst EVENT_HIDDEN$6 = `hidden${EVENT_KEY$7}`;\nconst EVENT_CLICK_DATA_API$4 = `click${EVENT_KEY$7}${DATA_API_KEY$4}`;\nconst CLASS_NAME_SHOW$7 = 'show';\nconst CLASS_NAME_COLLAPSE = 'collapse';\nconst CLASS_NAME_COLLAPSING = 'collapsing';\nconst CLASS_NAME_COLLAPSED = 'collapsed';\nconst CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`;\nconst CLASS_NAME_HORIZONTAL = 'collapse-horizontal';\nconst WIDTH = 'width';\nconst HEIGHT = 'height';\nconst SELECTOR_ACTIVES = '.collapse.show, .collapse.collapsing';\nconst SELECTOR_DATA_TOGGLE$4 = '[data-bs-toggle=\"collapse\"]';\nconst Default$a = {\n  parent: null,\n  toggle: true\n};\nconst DefaultType$a = {\n  parent: '(null|element)',\n  toggle: 'boolean'\n};\n\n/**\n * Class definition\n */\n\nclass Collapse extends BaseComponent {\n  constructor(element, config) {\n    super(element, config);\n    this._isTransitioning = false;\n    this._triggerArray = [];\n    const toggleList = SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);\n    for (const elem of toggleList) {\n      const selector = SelectorEngine.getSelectorFromElement(elem);\n      const filterElement = SelectorEngine.find(selector).filter(foundElement => foundElement === this._element);\n      if (selector !== null && filterElement.length) {\n        this._triggerArray.push(elem);\n      }\n    }\n    this._initializeChildren();\n    if (!this._config.parent) {\n      this._addAriaAndCollapsedClass(this._triggerArray, this._isShown());\n    }\n    if (this._config.toggle) {\n      this.toggle();\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default$a;\n  }\n  static get DefaultType() {\n    return DefaultType$a;\n  }\n  static get NAME() {\n    return NAME$b;\n  }\n\n  // Public\n  toggle() {\n    if (this._isShown()) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  show() {\n    if (this._isTransitioning || this._isShown()) {\n      return;\n    }\n    let activeChildren = [];\n\n    // find active children\n    if (this._config.parent) {\n      activeChildren = this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(element => element !== this._element).map(element => Collapse.getOrCreateInstance(element, {\n        toggle: false\n      }));\n    }\n    if (activeChildren.length && activeChildren[0]._isTransitioning) {\n      return;\n    }\n    const startEvent = EventHandler.trigger(this._element, EVENT_SHOW$6);\n    if (startEvent.defaultPrevented) {\n      return;\n    }\n    for (const activeInstance of activeChildren) {\n      activeInstance.hide();\n    }\n    const dimension = this._getDimension();\n    this._element.classList.remove(CLASS_NAME_COLLAPSE);\n    this._element.classList.add(CLASS_NAME_COLLAPSING);\n    this._element.style[dimension] = 0;\n    this._addAriaAndCollapsedClass(this._triggerArray, true);\n    this._isTransitioning = true;\n    const complete = () => {\n      this._isTransitioning = false;\n      this._element.classList.remove(CLASS_NAME_COLLAPSING);\n      this._element.classList.add(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW$7);\n      this._element.style[dimension] = '';\n      EventHandler.trigger(this._element, EVENT_SHOWN$6);\n    };\n    const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1);\n    const scrollSize = `scroll${capitalizedDimension}`;\n    this._queueCallback(complete, this._element, true);\n    this._element.style[dimension] = `${this._element[scrollSize]}px`;\n  }\n  hide() {\n    if (this._isTransitioning || !this._isShown()) {\n      return;\n    }\n    const startEvent = EventHandler.trigger(this._element, EVENT_HIDE$6);\n    if (startEvent.defaultPrevented) {\n      return;\n    }\n    const dimension = this._getDimension();\n    this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`;\n    reflow(this._element);\n    this._element.classList.add(CLASS_NAME_COLLAPSING);\n    this._element.classList.remove(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW$7);\n    for (const trigger of this._triggerArray) {\n      const element = SelectorEngine.getElementFromSelector(trigger);\n      if (element && !this._isShown(element)) {\n        this._addAriaAndCollapsedClass([trigger], false);\n      }\n    }\n    this._isTransitioning = true;\n    const complete = () => {\n      this._isTransitioning = false;\n      this._element.classList.remove(CLASS_NAME_COLLAPSING);\n      this._element.classList.add(CLASS_NAME_COLLAPSE);\n      EventHandler.trigger(this._element, EVENT_HIDDEN$6);\n    };\n    this._element.style[dimension] = '';\n    this._queueCallback(complete, this._element, true);\n  }\n  _isShown(element = this._element) {\n    return element.classList.contains(CLASS_NAME_SHOW$7);\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    config.toggle = Boolean(config.toggle); // Coerce string values\n    config.parent = getElement(config.parent);\n    return config;\n  }\n  _getDimension() {\n    return this._element.classList.contains(CLASS_NAME_HORIZONTAL) ? WIDTH : HEIGHT;\n  }\n  _initializeChildren() {\n    if (!this._config.parent) {\n      return;\n    }\n    const children = this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);\n    for (const element of children) {\n      const selected = SelectorEngine.getElementFromSelector(element);\n      if (selected) {\n        this._addAriaAndCollapsedClass([element], this._isShown(selected));\n      }\n    }\n  }\n  _getFirstLevelChildren(selector) {\n    const children = SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent);\n    // remove children if greater depth\n    return SelectorEngine.find(selector, this._config.parent).filter(element => !children.includes(element));\n  }\n  _addAriaAndCollapsedClass(triggerArray, isOpen) {\n    if (!triggerArray.length) {\n      return;\n    }\n    for (const element of triggerArray) {\n      element.classList.toggle(CLASS_NAME_COLLAPSED, !isOpen);\n      element.setAttribute('aria-expanded', isOpen);\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    const _config = {};\n    if (typeof config === 'string' && /show|hide/.test(config)) {\n      _config.toggle = false;\n    }\n    return this.each(function () {\n      const data = Collapse.getOrCreateInstance(this, _config);\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config]();\n      }\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$4, SELECTOR_DATA_TOGGLE$4, function (event) {\n  // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n  if (event.target.tagName === 'A' || event.delegateTarget && event.delegateTarget.tagName === 'A') {\n    event.preventDefault();\n  }\n  for (const element of SelectorEngine.getMultipleElementsFromSelector(this)) {\n    Collapse.getOrCreateInstance(element, {\n      toggle: false\n    }).toggle();\n  }\n});\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Collapse);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap dropdown.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$a = 'dropdown';\nconst DATA_KEY$6 = 'bs.dropdown';\nconst EVENT_KEY$6 = `.${DATA_KEY$6}`;\nconst DATA_API_KEY$3 = '.data-api';\nconst ESCAPE_KEY$2 = 'Escape';\nconst TAB_KEY$1 = 'Tab';\nconst ARROW_UP_KEY$1 = 'ArrowUp';\nconst ARROW_DOWN_KEY$1 = 'ArrowDown';\nconst RIGHT_MOUSE_BUTTON = 2; // MouseEvent.button value for the secondary button, usually the right button\n\nconst EVENT_HIDE$5 = `hide${EVENT_KEY$6}`;\nconst EVENT_HIDDEN$5 = `hidden${EVENT_KEY$6}`;\nconst EVENT_SHOW$5 = `show${EVENT_KEY$6}`;\nconst EVENT_SHOWN$5 = `shown${EVENT_KEY$6}`;\nconst EVENT_CLICK_DATA_API$3 = `click${EVENT_KEY$6}${DATA_API_KEY$3}`;\nconst EVENT_KEYDOWN_DATA_API = `keydown${EVENT_KEY$6}${DATA_API_KEY$3}`;\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY$6}${DATA_API_KEY$3}`;\nconst CLASS_NAME_SHOW$6 = 'show';\nconst CLASS_NAME_DROPUP = 'dropup';\nconst CLASS_NAME_DROPEND = 'dropend';\nconst CLASS_NAME_DROPSTART = 'dropstart';\nconst CLASS_NAME_DROPUP_CENTER = 'dropup-center';\nconst CLASS_NAME_DROPDOWN_CENTER = 'dropdown-center';\nconst SELECTOR_DATA_TOGGLE$3 = '[data-bs-toggle=\"dropdown\"]:not(.disabled):not(:disabled)';\nconst SELECTOR_DATA_TOGGLE_SHOWN = `${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`;\nconst SELECTOR_MENU = '.dropdown-menu';\nconst SELECTOR_NAVBAR = '.navbar';\nconst SELECTOR_NAVBAR_NAV = '.navbar-nav';\nconst SELECTOR_VISIBLE_ITEMS = '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)';\nconst PLACEMENT_TOP = isRTL() ? 'top-end' : 'top-start';\nconst PLACEMENT_TOPEND = isRTL() ? 'top-start' : 'top-end';\nconst PLACEMENT_BOTTOM = isRTL() ? 'bottom-end' : 'bottom-start';\nconst PLACEMENT_BOTTOMEND = isRTL() ? 'bottom-start' : 'bottom-end';\nconst PLACEMENT_RIGHT = isRTL() ? 'left-start' : 'right-start';\nconst PLACEMENT_LEFT = isRTL() ? 'right-start' : 'left-start';\nconst PLACEMENT_TOPCENTER = 'top';\nconst PLACEMENT_BOTTOMCENTER = 'bottom';\nconst Default$9 = {\n  autoClose: true,\n  boundary: 'clippingParents',\n  display: 'dynamic',\n  offset: [0, 2],\n  popperConfig: null,\n  reference: 'toggle'\n};\nconst DefaultType$9 = {\n  autoClose: '(boolean|string)',\n  boundary: '(string|element)',\n  display: 'string',\n  offset: '(array|string|function)',\n  popperConfig: '(null|object|function)',\n  reference: '(string|element|object)'\n};\n\n/**\n * Class definition\n */\n\nclass Dropdown extends BaseComponent {\n  constructor(element, config) {\n    super(element, config);\n    this._popper = null;\n    this._parent = this._element.parentNode; // dropdown wrapper\n    // TODO: v6 revert #37011 & change markup https://getbootstrap.com/docs/5.3/forms/input-group/\n    this._menu = SelectorEngine.next(this._element, SELECTOR_MENU)[0] || SelectorEngine.prev(this._element, SELECTOR_MENU)[0] || SelectorEngine.findOne(SELECTOR_MENU, this._parent);\n    this._inNavbar = this._detectNavbar();\n  }\n\n  // Getters\n  static get Default() {\n    return Default$9;\n  }\n  static get DefaultType() {\n    return DefaultType$9;\n  }\n  static get NAME() {\n    return NAME$a;\n  }\n\n  // Public\n  toggle() {\n    return this._isShown() ? this.hide() : this.show();\n  }\n  show() {\n    if (isDisabled(this._element) || this._isShown()) {\n      return;\n    }\n    const relatedTarget = {\n      relatedTarget: this._element\n    };\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$5, relatedTarget);\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n    this._createPopper();\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement && !this._parent.closest(SELECTOR_NAVBAR_NAV)) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.on(element, 'mouseover', noop);\n      }\n    }\n    this._element.focus();\n    this._element.setAttribute('aria-expanded', true);\n    this._menu.classList.add(CLASS_NAME_SHOW$6);\n    this._element.classList.add(CLASS_NAME_SHOW$6);\n    EventHandler.trigger(this._element, EVENT_SHOWN$5, relatedTarget);\n  }\n  hide() {\n    if (isDisabled(this._element) || !this._isShown()) {\n      return;\n    }\n    const relatedTarget = {\n      relatedTarget: this._element\n    };\n    this._completeHide(relatedTarget);\n  }\n  dispose() {\n    if (this._popper) {\n      this._popper.destroy();\n    }\n    super.dispose();\n  }\n  update() {\n    this._inNavbar = this._detectNavbar();\n    if (this._popper) {\n      this._popper.update();\n    }\n  }\n\n  // Private\n  _completeHide(relatedTarget) {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$5, relatedTarget);\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n\n    // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.off(element, 'mouseover', noop);\n      }\n    }\n    if (this._popper) {\n      this._popper.destroy();\n    }\n    this._menu.classList.remove(CLASS_NAME_SHOW$6);\n    this._element.classList.remove(CLASS_NAME_SHOW$6);\n    this._element.setAttribute('aria-expanded', 'false');\n    Manipulator.removeDataAttribute(this._menu, 'popper');\n    EventHandler.trigger(this._element, EVENT_HIDDEN$5, relatedTarget);\n  }\n  _getConfig(config) {\n    config = super._getConfig(config);\n    if (typeof config.reference === 'object' && !isElement(config.reference) && typeof config.reference.getBoundingClientRect !== 'function') {\n      // Popper virtual elements require a getBoundingClientRect method\n      throw new TypeError(`${NAME$a.toUpperCase()}: Option \"reference\" provided type \"object\" without a required \"getBoundingClientRect\" method.`);\n    }\n    return config;\n  }\n  _createPopper() {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s dropdowns require Popper (https://popper.js.org)');\n    }\n    let referenceElement = this._element;\n    if (this._config.reference === 'parent') {\n      referenceElement = this._parent;\n    } else if (isElement(this._config.reference)) {\n      referenceElement = getElement(this._config.reference);\n    } else if (typeof this._config.reference === 'object') {\n      referenceElement = this._config.reference;\n    }\n    const popperConfig = this._getPopperConfig();\n    this._popper = Popper.createPopper(referenceElement, this._menu, popperConfig);\n  }\n  _isShown() {\n    return this._menu.classList.contains(CLASS_NAME_SHOW$6);\n  }\n  _getPlacement() {\n    const parentDropdown = this._parent;\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPEND)) {\n      return PLACEMENT_RIGHT;\n    }\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPSTART)) {\n      return PLACEMENT_LEFT;\n    }\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPUP_CENTER)) {\n      return PLACEMENT_TOPCENTER;\n    }\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPDOWN_CENTER)) {\n      return PLACEMENT_BOTTOMCENTER;\n    }\n\n    // We need to trim the value because custom properties can also include spaces\n    const isEnd = getComputedStyle(this._menu).getPropertyValue('--bs-position').trim() === 'end';\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPUP)) {\n      return isEnd ? PLACEMENT_TOPEND : PLACEMENT_TOP;\n    }\n    return isEnd ? PLACEMENT_BOTTOMEND : PLACEMENT_BOTTOM;\n  }\n  _detectNavbar() {\n    return this._element.closest(SELECTOR_NAVBAR) !== null;\n  }\n  _getOffset() {\n    const {\n      offset\n    } = this._config;\n    if (typeof offset === 'string') {\n      return offset.split(',').map(value => Number.parseInt(value, 10));\n    }\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element);\n    }\n    return offset;\n  }\n  _getPopperConfig() {\n    const defaultBsPopperConfig = {\n      placement: this._getPlacement(),\n      modifiers: [{\n        name: 'preventOverflow',\n        options: {\n          boundary: this._config.boundary\n        }\n      }, {\n        name: 'offset',\n        options: {\n          offset: this._getOffset()\n        }\n      }]\n    };\n\n    // Disable Popper if we have a static display or Dropdown is in Navbar\n    if (this._inNavbar || this._config.display === 'static') {\n      Manipulator.setDataAttribute(this._menu, 'popper', 'static'); // TODO: v6 remove\n      defaultBsPopperConfig.modifiers = [{\n        name: 'applyStyles',\n        enabled: false\n      }];\n    }\n    return {\n      ...defaultBsPopperConfig,\n      ...execute(this._config.popperConfig, [defaultBsPopperConfig])\n    };\n  }\n  _selectMenuItem({\n    key,\n    target\n  }) {\n    const items = SelectorEngine.find(SELECTOR_VISIBLE_ITEMS, this._menu).filter(element => isVisible(element));\n    if (!items.length) {\n      return;\n    }\n\n    // if target isn't included in items (e.g. when expanding the dropdown)\n    // allow cycling to get the last item in case key equals ARROW_UP_KEY\n    getNextActiveElement(items, target, key === ARROW_DOWN_KEY$1, !items.includes(target)).focus();\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Dropdown.getOrCreateInstance(this, config);\n      if (typeof config !== 'string') {\n        return;\n      }\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n      data[config]();\n    });\n  }\n  static clearMenus(event) {\n    if (event.button === RIGHT_MOUSE_BUTTON || event.type === 'keyup' && event.key !== TAB_KEY$1) {\n      return;\n    }\n    const openToggles = SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);\n    for (const toggle of openToggles) {\n      const context = Dropdown.getInstance(toggle);\n      if (!context || context._config.autoClose === false) {\n        continue;\n      }\n      const composedPath = event.composedPath();\n      const isMenuTarget = composedPath.includes(context._menu);\n      if (composedPath.includes(context._element) || context._config.autoClose === 'inside' && !isMenuTarget || context._config.autoClose === 'outside' && isMenuTarget) {\n        continue;\n      }\n\n      // Tab navigation through the dropdown menu or events from contained inputs shouldn't close the menu\n      if (context._menu.contains(event.target) && (event.type === 'keyup' && event.key === TAB_KEY$1 || /input|select|option|textarea|form/i.test(event.target.tagName))) {\n        continue;\n      }\n      const relatedTarget = {\n        relatedTarget: context._element\n      };\n      if (event.type === 'click') {\n        relatedTarget.clickEvent = event;\n      }\n      context._completeHide(relatedTarget);\n    }\n  }\n  static dataApiKeydownHandler(event) {\n    // If not an UP | DOWN | ESCAPE key => not a dropdown command\n    // If input/textarea && if key is other than ESCAPE => not a dropdown command\n\n    const isInput = /input|textarea/i.test(event.target.tagName);\n    const isEscapeEvent = event.key === ESCAPE_KEY$2;\n    const isUpOrDownEvent = [ARROW_UP_KEY$1, ARROW_DOWN_KEY$1].includes(event.key);\n    if (!isUpOrDownEvent && !isEscapeEvent) {\n      return;\n    }\n    if (isInput && !isEscapeEvent) {\n      return;\n    }\n    event.preventDefault();\n\n    // TODO: v6 revert #37011 & change markup https://getbootstrap.com/docs/5.3/forms/input-group/\n    const getToggleButton = this.matches(SELECTOR_DATA_TOGGLE$3) ? this : SelectorEngine.prev(this, SELECTOR_DATA_TOGGLE$3)[0] || SelectorEngine.next(this, SELECTOR_DATA_TOGGLE$3)[0] || SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3, event.delegateTarget.parentNode);\n    const instance = Dropdown.getOrCreateInstance(getToggleButton);\n    if (isUpOrDownEvent) {\n      event.stopPropagation();\n      instance.show();\n      instance._selectMenuItem(event);\n      return;\n    }\n    if (instance._isShown()) {\n      // else is escape and we check if it is shown\n      event.stopPropagation();\n      instance.hide();\n      getToggleButton.focus();\n    }\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_DATA_TOGGLE$3, Dropdown.dataApiKeydownHandler);\nEventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_MENU, Dropdown.dataApiKeydownHandler);\nEventHandler.on(document, EVENT_CLICK_DATA_API$3, Dropdown.clearMenus);\nEventHandler.on(document, EVENT_KEYUP_DATA_API, Dropdown.clearMenus);\nEventHandler.on(document, EVENT_CLICK_DATA_API$3, SELECTOR_DATA_TOGGLE$3, function (event) {\n  event.preventDefault();\n  Dropdown.getOrCreateInstance(this).toggle();\n});\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Dropdown);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/backdrop.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$9 = 'backdrop';\nconst CLASS_NAME_FADE$4 = 'fade';\nconst CLASS_NAME_SHOW$5 = 'show';\nconst EVENT_MOUSEDOWN = `mousedown.bs.${NAME$9}`;\nconst Default$8 = {\n  className: 'modal-backdrop',\n  clickCallback: null,\n  isAnimated: false,\n  isVisible: true,\n  // if false, we use the backdrop helper without adding any element to the dom\n  rootElement: 'body' // give the choice to place backdrop under different elements\n};\n\nconst DefaultType$8 = {\n  className: 'string',\n  clickCallback: '(function|null)',\n  isAnimated: 'boolean',\n  isVisible: 'boolean',\n  rootElement: '(element|string)'\n};\n\n/**\n * Class definition\n */\n\nclass Backdrop extends Config {\n  constructor(config) {\n    super();\n    this._config = this._getConfig(config);\n    this._isAppended = false;\n    this._element = null;\n  }\n\n  // Getters\n  static get Default() {\n    return Default$8;\n  }\n  static get DefaultType() {\n    return DefaultType$8;\n  }\n  static get NAME() {\n    return NAME$9;\n  }\n\n  // Public\n  show(callback) {\n    if (!this._config.isVisible) {\n      execute(callback);\n      return;\n    }\n    this._append();\n    const element = this._getElement();\n    if (this._config.isAnimated) {\n      reflow(element);\n    }\n    element.classList.add(CLASS_NAME_SHOW$5);\n    this._emulateAnimation(() => {\n      execute(callback);\n    });\n  }\n  hide(callback) {\n    if (!this._config.isVisible) {\n      execute(callback);\n      return;\n    }\n    this._getElement().classList.remove(CLASS_NAME_SHOW$5);\n    this._emulateAnimation(() => {\n      this.dispose();\n      execute(callback);\n    });\n  }\n  dispose() {\n    if (!this._isAppended) {\n      return;\n    }\n    EventHandler.off(this._element, EVENT_MOUSEDOWN);\n    this._element.remove();\n    this._isAppended = false;\n  }\n\n  // Private\n  _getElement() {\n    if (!this._element) {\n      const backdrop = document.createElement('div');\n      backdrop.className = this._config.className;\n      if (this._config.isAnimated) {\n        backdrop.classList.add(CLASS_NAME_FADE$4);\n      }\n      this._element = backdrop;\n    }\n    return this._element;\n  }\n  _configAfterMerge(config) {\n    // use getElement() with the default \"body\" to get a fresh Element on each instantiation\n    config.rootElement = getElement(config.rootElement);\n    return config;\n  }\n  _append() {\n    if (this._isAppended) {\n      return;\n    }\n    const element = this._getElement();\n    this._config.rootElement.append(element);\n    EventHandler.on(element, EVENT_MOUSEDOWN, () => {\n      execute(this._config.clickCallback);\n    });\n    this._isAppended = true;\n  }\n  _emulateAnimation(callback) {\n    executeAfterTransition(callback, this._getElement(), this._config.isAnimated);\n  }\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/focustrap.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$8 = 'focustrap';\nconst DATA_KEY$5 = 'bs.focustrap';\nconst EVENT_KEY$5 = `.${DATA_KEY$5}`;\nconst EVENT_FOCUSIN$2 = `focusin${EVENT_KEY$5}`;\nconst EVENT_KEYDOWN_TAB = `keydown.tab${EVENT_KEY$5}`;\nconst TAB_KEY = 'Tab';\nconst TAB_NAV_FORWARD = 'forward';\nconst TAB_NAV_BACKWARD = 'backward';\nconst Default$7 = {\n  autofocus: true,\n  trapElement: null // The element to trap focus inside of\n};\n\nconst DefaultType$7 = {\n  autofocus: 'boolean',\n  trapElement: 'element'\n};\n\n/**\n * Class definition\n */\n\nclass FocusTrap extends Config {\n  constructor(config) {\n    super();\n    this._config = this._getConfig(config);\n    this._isActive = false;\n    this._lastTabNavDirection = null;\n  }\n\n  // Getters\n  static get Default() {\n    return Default$7;\n  }\n  static get DefaultType() {\n    return DefaultType$7;\n  }\n  static get NAME() {\n    return NAME$8;\n  }\n\n  // Public\n  activate() {\n    if (this._isActive) {\n      return;\n    }\n    if (this._config.autofocus) {\n      this._config.trapElement.focus();\n    }\n    EventHandler.off(document, EVENT_KEY$5); // guard against infinite focus loop\n    EventHandler.on(document, EVENT_FOCUSIN$2, event => this._handleFocusin(event));\n    EventHandler.on(document, EVENT_KEYDOWN_TAB, event => this._handleKeydown(event));\n    this._isActive = true;\n  }\n  deactivate() {\n    if (!this._isActive) {\n      return;\n    }\n    this._isActive = false;\n    EventHandler.off(document, EVENT_KEY$5);\n  }\n\n  // Private\n  _handleFocusin(event) {\n    const {\n      trapElement\n    } = this._config;\n    if (event.target === document || event.target === trapElement || trapElement.contains(event.target)) {\n      return;\n    }\n    const elements = SelectorEngine.focusableChildren(trapElement);\n    if (elements.length === 0) {\n      trapElement.focus();\n    } else if (this._lastTabNavDirection === TAB_NAV_BACKWARD) {\n      elements[elements.length - 1].focus();\n    } else {\n      elements[0].focus();\n    }\n  }\n  _handleKeydown(event) {\n    if (event.key !== TAB_KEY) {\n      return;\n    }\n    this._lastTabNavDirection = event.shiftKey ? TAB_NAV_BACKWARD : TAB_NAV_FORWARD;\n  }\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/scrollBar.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top';\nconst SELECTOR_STICKY_CONTENT = '.sticky-top';\nconst PROPERTY_PADDING = 'padding-right';\nconst PROPERTY_MARGIN = 'margin-right';\n\n/**\n * Class definition\n */\n\nclass ScrollBarHelper {\n  constructor() {\n    this._element = document.body;\n  }\n\n  // Public\n  getWidth() {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth#usage_notes\n    const documentWidth = document.documentElement.clientWidth;\n    return Math.abs(window.innerWidth - documentWidth);\n  }\n  hide() {\n    const width = this.getWidth();\n    this._disableOverFlow();\n    // give padding to element to balance the hidden scrollbar width\n    this._setElementAttributes(this._element, PROPERTY_PADDING, calculatedValue => calculatedValue + width);\n    // trick: We adjust positive paddingRight and negative marginRight to sticky-top elements to keep showing fullwidth\n    this._setElementAttributes(SELECTOR_FIXED_CONTENT, PROPERTY_PADDING, calculatedValue => calculatedValue + width);\n    this._setElementAttributes(SELECTOR_STICKY_CONTENT, PROPERTY_MARGIN, calculatedValue => calculatedValue - width);\n  }\n  reset() {\n    this._resetElementAttributes(this._element, 'overflow');\n    this._resetElementAttributes(this._element, PROPERTY_PADDING);\n    this._resetElementAttributes(SELECTOR_FIXED_CONTENT, PROPERTY_PADDING);\n    this._resetElementAttributes(SELECTOR_STICKY_CONTENT, PROPERTY_MARGIN);\n  }\n  isOverflowing() {\n    return this.getWidth() > 0;\n  }\n\n  // Private\n  _disableOverFlow() {\n    this._saveInitialAttribute(this._element, 'overflow');\n    this._element.style.overflow = 'hidden';\n  }\n  _setElementAttributes(selector, styleProperty, callback) {\n    const scrollbarWidth = this.getWidth();\n    const manipulationCallBack = element => {\n      if (element !== this._element && window.innerWidth > element.clientWidth + scrollbarWidth) {\n        return;\n      }\n      this._saveInitialAttribute(element, styleProperty);\n      const calculatedValue = window.getComputedStyle(element).getPropertyValue(styleProperty);\n      element.style.setProperty(styleProperty, `${callback(Number.parseFloat(calculatedValue))}px`);\n    };\n    this._applyManipulationCallback(selector, manipulationCallBack);\n  }\n  _saveInitialAttribute(element, styleProperty) {\n    const actualValue = element.style.getPropertyValue(styleProperty);\n    if (actualValue) {\n      Manipulator.setDataAttribute(element, styleProperty, actualValue);\n    }\n  }\n  _resetElementAttributes(selector, styleProperty) {\n    const manipulationCallBack = element => {\n      const value = Manipulator.getDataAttribute(element, styleProperty);\n      // We only want to remove the property if the value is `null`; the value can also be zero\n      if (value === null) {\n        element.style.removeProperty(styleProperty);\n        return;\n      }\n      Manipulator.removeDataAttribute(element, styleProperty);\n      element.style.setProperty(styleProperty, value);\n    };\n    this._applyManipulationCallback(selector, manipulationCallBack);\n  }\n  _applyManipulationCallback(selector, callBack) {\n    if (isElement(selector)) {\n      callBack(selector);\n      return;\n    }\n    for (const sel of SelectorEngine.find(selector, this._element)) {\n      callBack(sel);\n    }\n  }\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$7 = 'modal';\nconst DATA_KEY$4 = 'bs.modal';\nconst EVENT_KEY$4 = `.${DATA_KEY$4}`;\nconst DATA_API_KEY$2 = '.data-api';\nconst ESCAPE_KEY$1 = 'Escape';\nconst EVENT_HIDE$4 = `hide${EVENT_KEY$4}`;\nconst EVENT_HIDE_PREVENTED$1 = `hidePrevented${EVENT_KEY$4}`;\nconst EVENT_HIDDEN$4 = `hidden${EVENT_KEY$4}`;\nconst EVENT_SHOW$4 = `show${EVENT_KEY$4}`;\nconst EVENT_SHOWN$4 = `shown${EVENT_KEY$4}`;\nconst EVENT_RESIZE$1 = `resize${EVENT_KEY$4}`;\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY$4}`;\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY$4}`;\nconst EVENT_KEYDOWN_DISMISS$1 = `keydown.dismiss${EVENT_KEY$4}`;\nconst EVENT_CLICK_DATA_API$2 = `click${EVENT_KEY$4}${DATA_API_KEY$2}`;\nconst CLASS_NAME_OPEN = 'modal-open';\nconst CLASS_NAME_FADE$3 = 'fade';\nconst CLASS_NAME_SHOW$4 = 'show';\nconst CLASS_NAME_STATIC = 'modal-static';\nconst OPEN_SELECTOR$1 = '.modal.show';\nconst SELECTOR_DIALOG = '.modal-dialog';\nconst SELECTOR_MODAL_BODY = '.modal-body';\nconst SELECTOR_DATA_TOGGLE$2 = '[data-bs-toggle=\"modal\"]';\nconst Default$6 = {\n  backdrop: true,\n  focus: true,\n  keyboard: true\n};\nconst DefaultType$6 = {\n  backdrop: '(boolean|string)',\n  focus: 'boolean',\n  keyboard: 'boolean'\n};\n\n/**\n * Class definition\n */\n\nclass Modal extends BaseComponent {\n  constructor(element, config) {\n    super(element, config);\n    this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element);\n    this._backdrop = this._initializeBackDrop();\n    this._focustrap = this._initializeFocusTrap();\n    this._isShown = false;\n    this._isTransitioning = false;\n    this._scrollBar = new ScrollBarHelper();\n    this._addEventListeners();\n  }\n\n  // Getters\n  static get Default() {\n    return Default$6;\n  }\n  static get DefaultType() {\n    return DefaultType$6;\n  }\n  static get NAME() {\n    return NAME$7;\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget);\n  }\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return;\n    }\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$4, {\n      relatedTarget\n    });\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n    this._isShown = true;\n    this._isTransitioning = true;\n    this._scrollBar.hide();\n    document.body.classList.add(CLASS_NAME_OPEN);\n    this._adjustDialog();\n    this._backdrop.show(() => this._showElement(relatedTarget));\n  }\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return;\n    }\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$4);\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n    this._isShown = false;\n    this._isTransitioning = true;\n    this._focustrap.deactivate();\n    this._element.classList.remove(CLASS_NAME_SHOW$4);\n    this._queueCallback(() => this._hideModal(), this._element, this._isAnimated());\n  }\n  dispose() {\n    EventHandler.off(window, EVENT_KEY$4);\n    EventHandler.off(this._dialog, EVENT_KEY$4);\n    this._backdrop.dispose();\n    this._focustrap.deactivate();\n    super.dispose();\n  }\n  handleUpdate() {\n    this._adjustDialog();\n  }\n\n  // Private\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop),\n      // 'static' option will be translated to true, and booleans will keep their value,\n      isAnimated: this._isAnimated()\n    });\n  }\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    });\n  }\n  _showElement(relatedTarget) {\n    // try to append dynamic modal\n    if (!document.body.contains(this._element)) {\n      document.body.append(this._element);\n    }\n    this._element.style.display = 'block';\n    this._element.removeAttribute('aria-hidden');\n    this._element.setAttribute('aria-modal', true);\n    this._element.setAttribute('role', 'dialog');\n    this._element.scrollTop = 0;\n    const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog);\n    if (modalBody) {\n      modalBody.scrollTop = 0;\n    }\n    reflow(this._element);\n    this._element.classList.add(CLASS_NAME_SHOW$4);\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate();\n      }\n      this._isTransitioning = false;\n      EventHandler.trigger(this._element, EVENT_SHOWN$4, {\n        relatedTarget\n      });\n    };\n    this._queueCallback(transitionComplete, this._dialog, this._isAnimated());\n  }\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS$1, event => {\n      if (event.key !== ESCAPE_KEY$1) {\n        return;\n      }\n      if (this._config.keyboard) {\n        this.hide();\n        return;\n      }\n      this._triggerBackdropTransition();\n    });\n    EventHandler.on(window, EVENT_RESIZE$1, () => {\n      if (this._isShown && !this._isTransitioning) {\n        this._adjustDialog();\n      }\n    });\n    EventHandler.on(this._element, EVENT_MOUSEDOWN_DISMISS, event => {\n      // a bad trick to segregate clicks that may start inside dialog but end outside, and avoid listen to scrollbar clicks\n      EventHandler.one(this._element, EVENT_CLICK_DISMISS, event2 => {\n        if (this._element !== event.target || this._element !== event2.target) {\n          return;\n        }\n        if (this._config.backdrop === 'static') {\n          this._triggerBackdropTransition();\n          return;\n        }\n        if (this._config.backdrop) {\n          this.hide();\n        }\n      });\n    });\n  }\n  _hideModal() {\n    this._element.style.display = 'none';\n    this._element.setAttribute('aria-hidden', true);\n    this._element.removeAttribute('aria-modal');\n    this._element.removeAttribute('role');\n    this._isTransitioning = false;\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN);\n      this._resetAdjustments();\n      this._scrollBar.reset();\n      EventHandler.trigger(this._element, EVENT_HIDDEN$4);\n    });\n  }\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE$3);\n  }\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED$1);\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;\n    const initialOverflowY = this._element.style.overflowY;\n    // return if the following background transition hasn't yet completed\n    if (initialOverflowY === 'hidden' || this._element.classList.contains(CLASS_NAME_STATIC)) {\n      return;\n    }\n    if (!isModalOverflowing) {\n      this._element.style.overflowY = 'hidden';\n    }\n    this._element.classList.add(CLASS_NAME_STATIC);\n    this._queueCallback(() => {\n      this._element.classList.remove(CLASS_NAME_STATIC);\n      this._queueCallback(() => {\n        this._element.style.overflowY = initialOverflowY;\n      }, this._dialog);\n    }, this._dialog);\n    this._element.focus();\n  }\n\n  /**\n   * The following methods are used to handle overflowing modals\n   */\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;\n    const scrollbarWidth = this._scrollBar.getWidth();\n    const isBodyOverflowing = scrollbarWidth > 0;\n    if (isBodyOverflowing && !isModalOverflowing) {\n      const property = isRTL() ? 'paddingLeft' : 'paddingRight';\n      this._element.style[property] = `${scrollbarWidth}px`;\n    }\n    if (!isBodyOverflowing && isModalOverflowing) {\n      const property = isRTL() ? 'paddingRight' : 'paddingLeft';\n      this._element.style[property] = `${scrollbarWidth}px`;\n    }\n  }\n  _resetAdjustments() {\n    this._element.style.paddingLeft = '';\n    this._element.style.paddingRight = '';\n  }\n\n  // Static\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Modal.getOrCreateInstance(this, config);\n      if (typeof config !== 'string') {\n        return;\n      }\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n      data[config](relatedTarget);\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$2, SELECTOR_DATA_TOGGLE$2, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this);\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault();\n  }\n  EventHandler.one(target, EVENT_SHOW$4, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if modal will actually get shown\n      return;\n    }\n    EventHandler.one(target, EVENT_HIDDEN$4, () => {\n      if (isVisible(this)) {\n        this.focus();\n      }\n    });\n  });\n\n  // avoid conflict when clicking modal toggler while another one is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR$1);\n  if (alreadyOpen) {\n    Modal.getInstance(alreadyOpen).hide();\n  }\n  const data = Modal.getOrCreateInstance(target);\n  data.toggle(this);\n});\nenableDismissTrigger(Modal);\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Modal);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap offcanvas.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$6 = 'offcanvas';\nconst DATA_KEY$3 = 'bs.offcanvas';\nconst EVENT_KEY$3 = `.${DATA_KEY$3}`;\nconst DATA_API_KEY$1 = '.data-api';\nconst EVENT_LOAD_DATA_API$2 = `load${EVENT_KEY$3}${DATA_API_KEY$1}`;\nconst ESCAPE_KEY = 'Escape';\nconst CLASS_NAME_SHOW$3 = 'show';\nconst CLASS_NAME_SHOWING$1 = 'showing';\nconst CLASS_NAME_HIDING = 'hiding';\nconst CLASS_NAME_BACKDROP = 'offcanvas-backdrop';\nconst OPEN_SELECTOR = '.offcanvas.show';\nconst EVENT_SHOW$3 = `show${EVENT_KEY$3}`;\nconst EVENT_SHOWN$3 = `shown${EVENT_KEY$3}`;\nconst EVENT_HIDE$3 = `hide${EVENT_KEY$3}`;\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY$3}`;\nconst EVENT_HIDDEN$3 = `hidden${EVENT_KEY$3}`;\nconst EVENT_RESIZE = `resize${EVENT_KEY$3}`;\nconst EVENT_CLICK_DATA_API$1 = `click${EVENT_KEY$3}${DATA_API_KEY$1}`;\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY$3}`;\nconst SELECTOR_DATA_TOGGLE$1 = '[data-bs-toggle=\"offcanvas\"]';\nconst Default$5 = {\n  backdrop: true,\n  keyboard: true,\n  scroll: false\n};\nconst DefaultType$5 = {\n  backdrop: '(boolean|string)',\n  keyboard: 'boolean',\n  scroll: 'boolean'\n};\n\n/**\n * Class definition\n */\n\nclass Offcanvas extends BaseComponent {\n  constructor(element, config) {\n    super(element, config);\n    this._isShown = false;\n    this._backdrop = this._initializeBackDrop();\n    this._focustrap = this._initializeFocusTrap();\n    this._addEventListeners();\n  }\n\n  // Getters\n  static get Default() {\n    return Default$5;\n  }\n  static get DefaultType() {\n    return DefaultType$5;\n  }\n  static get NAME() {\n    return NAME$6;\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget);\n  }\n  show(relatedTarget) {\n    if (this._isShown) {\n      return;\n    }\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$3, {\n      relatedTarget\n    });\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n    this._isShown = true;\n    this._backdrop.show();\n    if (!this._config.scroll) {\n      new ScrollBarHelper().hide();\n    }\n    this._element.setAttribute('aria-modal', true);\n    this._element.setAttribute('role', 'dialog');\n    this._element.classList.add(CLASS_NAME_SHOWING$1);\n    const completeCallBack = () => {\n      if (!this._config.scroll || this._config.backdrop) {\n        this._focustrap.activate();\n      }\n      this._element.classList.add(CLASS_NAME_SHOW$3);\n      this._element.classList.remove(CLASS_NAME_SHOWING$1);\n      EventHandler.trigger(this._element, EVENT_SHOWN$3, {\n        relatedTarget\n      });\n    };\n    this._queueCallback(completeCallBack, this._element, true);\n  }\n  hide() {\n    if (!this._isShown) {\n      return;\n    }\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$3);\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n    this._focustrap.deactivate();\n    this._element.blur();\n    this._isShown = false;\n    this._element.classList.add(CLASS_NAME_HIDING);\n    this._backdrop.hide();\n    const completeCallback = () => {\n      this._element.classList.remove(CLASS_NAME_SHOW$3, CLASS_NAME_HIDING);\n      this._element.removeAttribute('aria-modal');\n      this._element.removeAttribute('role');\n      if (!this._config.scroll) {\n        new ScrollBarHelper().reset();\n      }\n      EventHandler.trigger(this._element, EVENT_HIDDEN$3);\n    };\n    this._queueCallback(completeCallback, this._element, true);\n  }\n  dispose() {\n    this._backdrop.dispose();\n    this._focustrap.deactivate();\n    super.dispose();\n  }\n\n  // Private\n  _initializeBackDrop() {\n    const clickCallback = () => {\n      if (this._config.backdrop === 'static') {\n        EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED);\n        return;\n      }\n      this.hide();\n    };\n\n    // 'static' option will be translated to true, and booleans will keep their value\n    const isVisible = Boolean(this._config.backdrop);\n    return new Backdrop({\n      className: CLASS_NAME_BACKDROP,\n      isVisible,\n      isAnimated: true,\n      rootElement: this._element.parentNode,\n      clickCallback: isVisible ? clickCallback : null\n    });\n  }\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    });\n  }\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (event.key !== ESCAPE_KEY) {\n        return;\n      }\n      if (this._config.keyboard) {\n        this.hide();\n        return;\n      }\n      EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED);\n    });\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Offcanvas.getOrCreateInstance(this, config);\n      if (typeof config !== 'string') {\n        return;\n      }\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n      data[config](this);\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API$1, SELECTOR_DATA_TOGGLE$1, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this);\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault();\n  }\n  if (isDisabled(this)) {\n    return;\n  }\n  EventHandler.one(target, EVENT_HIDDEN$3, () => {\n    // focus on trigger when it is closed\n    if (isVisible(this)) {\n      this.focus();\n    }\n  });\n\n  // avoid conflict when clicking a toggler of an offcanvas, while another is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR);\n  if (alreadyOpen && alreadyOpen !== target) {\n    Offcanvas.getInstance(alreadyOpen).hide();\n  }\n  const data = Offcanvas.getOrCreateInstance(target);\n  data.toggle(this);\n});\nEventHandler.on(window, EVENT_LOAD_DATA_API$2, () => {\n  for (const selector of SelectorEngine.find(OPEN_SELECTOR)) {\n    Offcanvas.getOrCreateInstance(selector).show();\n  }\n});\nEventHandler.on(window, EVENT_RESIZE, () => {\n  for (const element of SelectorEngine.find('[aria-modal][class*=show][class*=offcanvas-]')) {\n    if (getComputedStyle(element).position !== 'fixed') {\n      Offcanvas.getOrCreateInstance(element).hide();\n    }\n  }\n});\nenableDismissTrigger(Offcanvas);\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Offcanvas);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/sanitizer.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n// js-docs-start allow-list\nconst ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i;\nconst DefaultAllowlist = {\n  // Global attributes allowed on any supplied element below.\n  '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],\n  a: ['target', 'href', 'title', 'rel'],\n  area: [],\n  b: [],\n  br: [],\n  col: [],\n  code: [],\n  div: [],\n  em: [],\n  hr: [],\n  h1: [],\n  h2: [],\n  h3: [],\n  h4: [],\n  h5: [],\n  h6: [],\n  i: [],\n  img: ['src', 'srcset', 'alt', 'title', 'width', 'height'],\n  li: [],\n  ol: [],\n  p: [],\n  pre: [],\n  s: [],\n  small: [],\n  span: [],\n  sub: [],\n  sup: [],\n  strong: [],\n  u: [],\n  ul: []\n};\n// js-docs-end allow-list\n\nconst uriAttributes = new Set(['background', 'cite', 'href', 'itemtype', 'longdesc', 'poster', 'src', 'xlink:href']);\n\n/**\n * A pattern that recognizes URLs that are safe wrt. XSS in URL navigation\n * contexts.\n *\n * Shout-out to Angular https://github.com/angular/angular/blob/15.2.8/packages/core/src/sanitization/url_sanitizer.ts#L38\n */\n// eslint-disable-next-line unicorn/better-regex\nconst SAFE_URL_PATTERN = /^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i;\nconst allowedAttribute = (attribute, allowedAttributeList) => {\n  const attributeName = attribute.nodeName.toLowerCase();\n  if (allowedAttributeList.includes(attributeName)) {\n    if (uriAttributes.has(attributeName)) {\n      return Boolean(SAFE_URL_PATTERN.test(attribute.nodeValue));\n    }\n    return true;\n  }\n\n  // Check if a regular expression validates the attribute.\n  return allowedAttributeList.filter(attributeRegex => attributeRegex instanceof RegExp).some(regex => regex.test(attributeName));\n};\nfunction sanitizeHtml(unsafeHtml, allowList, sanitizeFunction) {\n  if (!unsafeHtml.length) {\n    return unsafeHtml;\n  }\n  if (sanitizeFunction && typeof sanitizeFunction === 'function') {\n    return sanitizeFunction(unsafeHtml);\n  }\n  const domParser = new window.DOMParser();\n  const createdDocument = domParser.parseFromString(unsafeHtml, 'text/html');\n  const elements = [].concat(...createdDocument.body.querySelectorAll('*'));\n  for (const element of elements) {\n    const elementName = element.nodeName.toLowerCase();\n    if (!Object.keys(allowList).includes(elementName)) {\n      element.remove();\n      continue;\n    }\n    const attributeList = [].concat(...element.attributes);\n    const allowedAttributes = [].concat(allowList['*'] || [], allowList[elementName] || []);\n    for (const attribute of attributeList) {\n      if (!allowedAttribute(attribute, allowedAttributes)) {\n        element.removeAttribute(attribute.nodeName);\n      }\n    }\n  }\n  return createdDocument.body.innerHTML;\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap util/template-factory.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$5 = 'TemplateFactory';\nconst Default$4 = {\n  allowList: DefaultAllowlist,\n  content: {},\n  // { selector : text ,  selector2 : text2 , }\n  extraClass: '',\n  html: false,\n  sanitize: true,\n  sanitizeFn: null,\n  template: '<div></div>'\n};\nconst DefaultType$4 = {\n  allowList: 'object',\n  content: 'object',\n  extraClass: '(string|function)',\n  html: 'boolean',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  template: 'string'\n};\nconst DefaultContentType = {\n  entry: '(string|element|function|null)',\n  selector: '(string|element)'\n};\n\n/**\n * Class definition\n */\n\nclass TemplateFactory extends Config {\n  constructor(config) {\n    super();\n    this._config = this._getConfig(config);\n  }\n\n  // Getters\n  static get Default() {\n    return Default$4;\n  }\n  static get DefaultType() {\n    return DefaultType$4;\n  }\n  static get NAME() {\n    return NAME$5;\n  }\n\n  // Public\n  getContent() {\n    return Object.values(this._config.content).map(config => this._resolvePossibleFunction(config)).filter(Boolean);\n  }\n  hasContent() {\n    return this.getContent().length > 0;\n  }\n  changeContent(content) {\n    this._checkContent(content);\n    this._config.content = {\n      ...this._config.content,\n      ...content\n    };\n    return this;\n  }\n  toHtml() {\n    const templateWrapper = document.createElement('div');\n    templateWrapper.innerHTML = this._maybeSanitize(this._config.template);\n    for (const [selector, text] of Object.entries(this._config.content)) {\n      this._setContent(templateWrapper, text, selector);\n    }\n    const template = templateWrapper.children[0];\n    const extraClass = this._resolvePossibleFunction(this._config.extraClass);\n    if (extraClass) {\n      template.classList.add(...extraClass.split(' '));\n    }\n    return template;\n  }\n\n  // Private\n  _typeCheckConfig(config) {\n    super._typeCheckConfig(config);\n    this._checkContent(config.content);\n  }\n  _checkContent(arg) {\n    for (const [selector, content] of Object.entries(arg)) {\n      super._typeCheckConfig({\n        selector,\n        entry: content\n      }, DefaultContentType);\n    }\n  }\n  _setContent(template, content, selector) {\n    const templateElement = SelectorEngine.findOne(selector, template);\n    if (!templateElement) {\n      return;\n    }\n    content = this._resolvePossibleFunction(content);\n    if (!content) {\n      templateElement.remove();\n      return;\n    }\n    if (isElement(content)) {\n      this._putElementInTemplate(getElement(content), templateElement);\n      return;\n    }\n    if (this._config.html) {\n      templateElement.innerHTML = this._maybeSanitize(content);\n      return;\n    }\n    templateElement.textContent = content;\n  }\n  _maybeSanitize(arg) {\n    return this._config.sanitize ? sanitizeHtml(arg, this._config.allowList, this._config.sanitizeFn) : arg;\n  }\n  _resolvePossibleFunction(arg) {\n    return execute(arg, [this]);\n  }\n  _putElementInTemplate(element, templateElement) {\n    if (this._config.html) {\n      templateElement.innerHTML = '';\n      templateElement.append(element);\n      return;\n    }\n    templateElement.textContent = element.textContent;\n  }\n}\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap tooltip.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$4 = 'tooltip';\nconst DISALLOWED_ATTRIBUTES = new Set(['sanitize', 'allowList', 'sanitizeFn']);\nconst CLASS_NAME_FADE$2 = 'fade';\nconst CLASS_NAME_MODAL = 'modal';\nconst CLASS_NAME_SHOW$2 = 'show';\nconst SELECTOR_TOOLTIP_INNER = '.tooltip-inner';\nconst SELECTOR_MODAL = `.${CLASS_NAME_MODAL}`;\nconst EVENT_MODAL_HIDE = 'hide.bs.modal';\nconst TRIGGER_HOVER = 'hover';\nconst TRIGGER_FOCUS = 'focus';\nconst TRIGGER_CLICK = 'click';\nconst TRIGGER_MANUAL = 'manual';\nconst EVENT_HIDE$2 = 'hide';\nconst EVENT_HIDDEN$2 = 'hidden';\nconst EVENT_SHOW$2 = 'show';\nconst EVENT_SHOWN$2 = 'shown';\nconst EVENT_INSERTED = 'inserted';\nconst EVENT_CLICK$1 = 'click';\nconst EVENT_FOCUSIN$1 = 'focusin';\nconst EVENT_FOCUSOUT$1 = 'focusout';\nconst EVENT_MOUSEENTER = 'mouseenter';\nconst EVENT_MOUSELEAVE = 'mouseleave';\nconst AttachmentMap = {\n  AUTO: 'auto',\n  TOP: 'top',\n  RIGHT: isRTL() ? 'left' : 'right',\n  BOTTOM: 'bottom',\n  LEFT: isRTL() ? 'right' : 'left'\n};\nconst Default$3 = {\n  allowList: DefaultAllowlist,\n  animation: true,\n  boundary: 'clippingParents',\n  container: false,\n  customClass: '',\n  delay: 0,\n  fallbackPlacements: ['top', 'right', 'bottom', 'left'],\n  html: false,\n  offset: [0, 6],\n  placement: 'top',\n  popperConfig: null,\n  sanitize: true,\n  sanitizeFn: null,\n  selector: false,\n  template: '<div class=\"tooltip\" role=\"tooltip\">' + '<div class=\"tooltip-arrow\"></div>' + '<div class=\"tooltip-inner\"></div>' + '</div>',\n  title: '',\n  trigger: 'hover focus'\n};\nconst DefaultType$3 = {\n  allowList: 'object',\n  animation: 'boolean',\n  boundary: '(string|element)',\n  container: '(string|element|boolean)',\n  customClass: '(string|function)',\n  delay: '(number|object)',\n  fallbackPlacements: 'array',\n  html: 'boolean',\n  offset: '(array|string|function)',\n  placement: '(string|function)',\n  popperConfig: '(null|object|function)',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  selector: '(string|boolean)',\n  template: 'string',\n  title: '(string|element|function)',\n  trigger: 'string'\n};\n\n/**\n * Class definition\n */\n\nclass Tooltip extends BaseComponent {\n  constructor(element, config) {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s tooltips require Popper (https://popper.js.org)');\n    }\n    super(element, config);\n\n    // Private\n    this._isEnabled = true;\n    this._timeout = 0;\n    this._isHovered = null;\n    this._activeTrigger = {};\n    this._popper = null;\n    this._templateFactory = null;\n    this._newContent = null;\n\n    // Protected\n    this.tip = null;\n    this._setListeners();\n    if (!this._config.selector) {\n      this._fixTitle();\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default$3;\n  }\n  static get DefaultType() {\n    return DefaultType$3;\n  }\n  static get NAME() {\n    return NAME$4;\n  }\n\n  // Public\n  enable() {\n    this._isEnabled = true;\n  }\n  disable() {\n    this._isEnabled = false;\n  }\n  toggleEnabled() {\n    this._isEnabled = !this._isEnabled;\n  }\n  toggle() {\n    if (!this._isEnabled) {\n      return;\n    }\n    this._activeTrigger.click = !this._activeTrigger.click;\n    if (this._isShown()) {\n      this._leave();\n      return;\n    }\n    this._enter();\n  }\n  dispose() {\n    clearTimeout(this._timeout);\n    EventHandler.off(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler);\n    if (this._element.getAttribute('data-bs-original-title')) {\n      this._element.setAttribute('title', this._element.getAttribute('data-bs-original-title'));\n    }\n    this._disposePopper();\n    super.dispose();\n  }\n  show() {\n    if (this._element.style.display === 'none') {\n      throw new Error('Please use show on visible elements');\n    }\n    if (!(this._isWithContent() && this._isEnabled)) {\n      return;\n    }\n    const showEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOW$2));\n    const shadowRoot = findShadowRoot(this._element);\n    const isInTheDom = (shadowRoot || this._element.ownerDocument.documentElement).contains(this._element);\n    if (showEvent.defaultPrevented || !isInTheDom) {\n      return;\n    }\n\n    // TODO: v6 remove this or make it optional\n    this._disposePopper();\n    const tip = this._getTipElement();\n    this._element.setAttribute('aria-describedby', tip.getAttribute('id'));\n    const {\n      container\n    } = this._config;\n    if (!this._element.ownerDocument.documentElement.contains(this.tip)) {\n      container.append(tip);\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_INSERTED));\n    }\n    this._popper = this._createPopper(tip);\n    tip.classList.add(CLASS_NAME_SHOW$2);\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.on(element, 'mouseover', noop);\n      }\n    }\n    const complete = () => {\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOWN$2));\n      if (this._isHovered === false) {\n        this._leave();\n      }\n      this._isHovered = false;\n    };\n    this._queueCallback(complete, this.tip, this._isAnimated());\n  }\n  hide() {\n    if (!this._isShown()) {\n      return;\n    }\n    const hideEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDE$2));\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n    const tip = this._getTipElement();\n    tip.classList.remove(CLASS_NAME_SHOW$2);\n\n    // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.off(element, 'mouseover', noop);\n      }\n    }\n    this._activeTrigger[TRIGGER_CLICK] = false;\n    this._activeTrigger[TRIGGER_FOCUS] = false;\n    this._activeTrigger[TRIGGER_HOVER] = false;\n    this._isHovered = null; // it is a trick to support manual triggering\n\n    const complete = () => {\n      if (this._isWithActiveTrigger()) {\n        return;\n      }\n      if (!this._isHovered) {\n        this._disposePopper();\n      }\n      this._element.removeAttribute('aria-describedby');\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDDEN$2));\n    };\n    this._queueCallback(complete, this.tip, this._isAnimated());\n  }\n  update() {\n    if (this._popper) {\n      this._popper.update();\n    }\n  }\n\n  // Protected\n  _isWithContent() {\n    return Boolean(this._getTitle());\n  }\n  _getTipElement() {\n    if (!this.tip) {\n      this.tip = this._createTipElement(this._newContent || this._getContentForTemplate());\n    }\n    return this.tip;\n  }\n  _createTipElement(content) {\n    const tip = this._getTemplateFactory(content).toHtml();\n\n    // TODO: remove this check in v6\n    if (!tip) {\n      return null;\n    }\n    tip.classList.remove(CLASS_NAME_FADE$2, CLASS_NAME_SHOW$2);\n    // TODO: v6 the following can be achieved with CSS only\n    tip.classList.add(`bs-${this.constructor.NAME}-auto`);\n    const tipId = getUID(this.constructor.NAME).toString();\n    tip.setAttribute('id', tipId);\n    if (this._isAnimated()) {\n      tip.classList.add(CLASS_NAME_FADE$2);\n    }\n    return tip;\n  }\n  setContent(content) {\n    this._newContent = content;\n    if (this._isShown()) {\n      this._disposePopper();\n      this.show();\n    }\n  }\n  _getTemplateFactory(content) {\n    if (this._templateFactory) {\n      this._templateFactory.changeContent(content);\n    } else {\n      this._templateFactory = new TemplateFactory({\n        ...this._config,\n        // the `content` var has to be after `this._config`\n        // to override config.content in case of popover\n        content,\n        extraClass: this._resolvePossibleFunction(this._config.customClass)\n      });\n    }\n    return this._templateFactory;\n  }\n  _getContentForTemplate() {\n    return {\n      [SELECTOR_TOOLTIP_INNER]: this._getTitle()\n    };\n  }\n  _getTitle() {\n    return this._resolvePossibleFunction(this._config.title) || this._element.getAttribute('data-bs-original-title');\n  }\n\n  // Private\n  _initializeOnDelegatedTarget(event) {\n    return this.constructor.getOrCreateInstance(event.delegateTarget, this._getDelegateConfig());\n  }\n  _isAnimated() {\n    return this._config.animation || this.tip && this.tip.classList.contains(CLASS_NAME_FADE$2);\n  }\n  _isShown() {\n    return this.tip && this.tip.classList.contains(CLASS_NAME_SHOW$2);\n  }\n  _createPopper(tip) {\n    const placement = execute(this._config.placement, [this, tip, this._element]);\n    const attachment = AttachmentMap[placement.toUpperCase()];\n    return Popper.createPopper(this._element, tip, this._getPopperConfig(attachment));\n  }\n  _getOffset() {\n    const {\n      offset\n    } = this._config;\n    if (typeof offset === 'string') {\n      return offset.split(',').map(value => Number.parseInt(value, 10));\n    }\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element);\n    }\n    return offset;\n  }\n  _resolvePossibleFunction(arg) {\n    return execute(arg, [this._element]);\n  }\n  _getPopperConfig(attachment) {\n    const defaultBsPopperConfig = {\n      placement: attachment,\n      modifiers: [{\n        name: 'flip',\n        options: {\n          fallbackPlacements: this._config.fallbackPlacements\n        }\n      }, {\n        name: 'offset',\n        options: {\n          offset: this._getOffset()\n        }\n      }, {\n        name: 'preventOverflow',\n        options: {\n          boundary: this._config.boundary\n        }\n      }, {\n        name: 'arrow',\n        options: {\n          element: `.${this.constructor.NAME}-arrow`\n        }\n      }, {\n        name: 'preSetPlacement',\n        enabled: true,\n        phase: 'beforeMain',\n        fn: data => {\n          // Pre-set Popper's placement attribute in order to read the arrow sizes properly.\n          // Otherwise, Popper mixes up the width and height dimensions since the initial arrow style is for top placement\n          this._getTipElement().setAttribute('data-popper-placement', data.state.placement);\n        }\n      }]\n    };\n    return {\n      ...defaultBsPopperConfig,\n      ...execute(this._config.popperConfig, [defaultBsPopperConfig])\n    };\n  }\n  _setListeners() {\n    const triggers = this._config.trigger.split(' ');\n    for (const trigger of triggers) {\n      if (trigger === 'click') {\n        EventHandler.on(this._element, this.constructor.eventName(EVENT_CLICK$1), this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event);\n          context.toggle();\n        });\n      } else if (trigger !== TRIGGER_MANUAL) {\n        const eventIn = trigger === TRIGGER_HOVER ? this.constructor.eventName(EVENT_MOUSEENTER) : this.constructor.eventName(EVENT_FOCUSIN$1);\n        const eventOut = trigger === TRIGGER_HOVER ? this.constructor.eventName(EVENT_MOUSELEAVE) : this.constructor.eventName(EVENT_FOCUSOUT$1);\n        EventHandler.on(this._element, eventIn, this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event);\n          context._activeTrigger[event.type === 'focusin' ? TRIGGER_FOCUS : TRIGGER_HOVER] = true;\n          context._enter();\n        });\n        EventHandler.on(this._element, eventOut, this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event);\n          context._activeTrigger[event.type === 'focusout' ? TRIGGER_FOCUS : TRIGGER_HOVER] = context._element.contains(event.relatedTarget);\n          context._leave();\n        });\n      }\n    }\n    this._hideModalHandler = () => {\n      if (this._element) {\n        this.hide();\n      }\n    };\n    EventHandler.on(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler);\n  }\n  _fixTitle() {\n    const title = this._element.getAttribute('title');\n    if (!title) {\n      return;\n    }\n    if (!this._element.getAttribute('aria-label') && !this._element.textContent.trim()) {\n      this._element.setAttribute('aria-label', title);\n    }\n    this._element.setAttribute('data-bs-original-title', title); // DO NOT USE IT. Is only for backwards compatibility\n    this._element.removeAttribute('title');\n  }\n  _enter() {\n    if (this._isShown() || this._isHovered) {\n      this._isHovered = true;\n      return;\n    }\n    this._isHovered = true;\n    this._setTimeout(() => {\n      if (this._isHovered) {\n        this.show();\n      }\n    }, this._config.delay.show);\n  }\n  _leave() {\n    if (this._isWithActiveTrigger()) {\n      return;\n    }\n    this._isHovered = false;\n    this._setTimeout(() => {\n      if (!this._isHovered) {\n        this.hide();\n      }\n    }, this._config.delay.hide);\n  }\n  _setTimeout(handler, timeout) {\n    clearTimeout(this._timeout);\n    this._timeout = setTimeout(handler, timeout);\n  }\n  _isWithActiveTrigger() {\n    return Object.values(this._activeTrigger).includes(true);\n  }\n  _getConfig(config) {\n    const dataAttributes = Manipulator.getDataAttributes(this._element);\n    for (const dataAttribute of Object.keys(dataAttributes)) {\n      if (DISALLOWED_ATTRIBUTES.has(dataAttribute)) {\n        delete dataAttributes[dataAttribute];\n      }\n    }\n    config = {\n      ...dataAttributes,\n      ...(typeof config === 'object' && config ? config : {})\n    };\n    config = this._mergeConfigObj(config);\n    config = this._configAfterMerge(config);\n    this._typeCheckConfig(config);\n    return config;\n  }\n  _configAfterMerge(config) {\n    config.container = config.container === false ? document.body : getElement(config.container);\n    if (typeof config.delay === 'number') {\n      config.delay = {\n        show: config.delay,\n        hide: config.delay\n      };\n    }\n    if (typeof config.title === 'number') {\n      config.title = config.title.toString();\n    }\n    if (typeof config.content === 'number') {\n      config.content = config.content.toString();\n    }\n    return config;\n  }\n  _getDelegateConfig() {\n    const config = {};\n    for (const [key, value] of Object.entries(this._config)) {\n      if (this.constructor.Default[key] !== value) {\n        config[key] = value;\n      }\n    }\n    config.selector = false;\n    config.trigger = 'manual';\n\n    // In the future can be replaced with:\n    // const keysWithDifferentValues = Object.entries(this._config).filter(entry => this.constructor.Default[entry[0]] !== this._config[entry[0]])\n    // `Object.fromEntries(keysWithDifferentValues)`\n    return config;\n  }\n  _disposePopper() {\n    if (this._popper) {\n      this._popper.destroy();\n      this._popper = null;\n    }\n    if (this.tip) {\n      this.tip.remove();\n      this.tip = null;\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tooltip.getOrCreateInstance(this, config);\n      if (typeof config !== 'string') {\n        return;\n      }\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n      data[config]();\n    });\n  }\n}\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tooltip);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap popover.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$3 = 'popover';\nconst SELECTOR_TITLE = '.popover-header';\nconst SELECTOR_CONTENT = '.popover-body';\nconst Default$2 = {\n  ...Tooltip.Default,\n  content: '',\n  offset: [0, 8],\n  placement: 'right',\n  template: '<div class=\"popover\" role=\"tooltip\">' + '<div class=\"popover-arrow\"></div>' + '<h3 class=\"popover-header\"></h3>' + '<div class=\"popover-body\"></div>' + '</div>',\n  trigger: 'click'\n};\nconst DefaultType$2 = {\n  ...Tooltip.DefaultType,\n  content: '(null|string|element|function)'\n};\n\n/**\n * Class definition\n */\n\nclass Popover extends Tooltip {\n  // Getters\n  static get Default() {\n    return Default$2;\n  }\n  static get DefaultType() {\n    return DefaultType$2;\n  }\n  static get NAME() {\n    return NAME$3;\n  }\n\n  // Overrides\n  _isWithContent() {\n    return this._getTitle() || this._getContent();\n  }\n\n  // Private\n  _getContentForTemplate() {\n    return {\n      [SELECTOR_TITLE]: this._getTitle(),\n      [SELECTOR_CONTENT]: this._getContent()\n    };\n  }\n  _getContent() {\n    return this._resolvePossibleFunction(this._config.content);\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Popover.getOrCreateInstance(this, config);\n      if (typeof config !== 'string') {\n        return;\n      }\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n      data[config]();\n    });\n  }\n}\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Popover);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap scrollspy.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$2 = 'scrollspy';\nconst DATA_KEY$2 = 'bs.scrollspy';\nconst EVENT_KEY$2 = `.${DATA_KEY$2}`;\nconst DATA_API_KEY = '.data-api';\nconst EVENT_ACTIVATE = `activate${EVENT_KEY$2}`;\nconst EVENT_CLICK = `click${EVENT_KEY$2}`;\nconst EVENT_LOAD_DATA_API$1 = `load${EVENT_KEY$2}${DATA_API_KEY}`;\nconst CLASS_NAME_DROPDOWN_ITEM = 'dropdown-item';\nconst CLASS_NAME_ACTIVE$1 = 'active';\nconst SELECTOR_DATA_SPY = '[data-bs-spy=\"scroll\"]';\nconst SELECTOR_TARGET_LINKS = '[href]';\nconst SELECTOR_NAV_LIST_GROUP = '.nav, .list-group';\nconst SELECTOR_NAV_LINKS = '.nav-link';\nconst SELECTOR_NAV_ITEMS = '.nav-item';\nconst SELECTOR_LIST_ITEMS = '.list-group-item';\nconst SELECTOR_LINK_ITEMS = `${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`;\nconst SELECTOR_DROPDOWN = '.dropdown';\nconst SELECTOR_DROPDOWN_TOGGLE$1 = '.dropdown-toggle';\nconst Default$1 = {\n  offset: null,\n  // TODO: v6 @deprecated, keep it for backwards compatibility reasons\n  rootMargin: '0px 0px -25%',\n  smoothScroll: false,\n  target: null,\n  threshold: [0.1, 0.5, 1]\n};\nconst DefaultType$1 = {\n  offset: '(number|null)',\n  // TODO v6 @deprecated, keep it for backwards compatibility reasons\n  rootMargin: 'string',\n  smoothScroll: 'boolean',\n  target: 'element',\n  threshold: 'array'\n};\n\n/**\n * Class definition\n */\n\nclass ScrollSpy extends BaseComponent {\n  constructor(element, config) {\n    super(element, config);\n\n    // this._element is the observablesContainer and config.target the menu links wrapper\n    this._targetLinks = new Map();\n    this._observableSections = new Map();\n    this._rootElement = getComputedStyle(this._element).overflowY === 'visible' ? null : this._element;\n    this._activeTarget = null;\n    this._observer = null;\n    this._previousScrollData = {\n      visibleEntryTop: 0,\n      parentScrollTop: 0\n    };\n    this.refresh(); // initialize\n  }\n\n  // Getters\n  static get Default() {\n    return Default$1;\n  }\n  static get DefaultType() {\n    return DefaultType$1;\n  }\n  static get NAME() {\n    return NAME$2;\n  }\n\n  // Public\n  refresh() {\n    this._initializeTargetsAndObservables();\n    this._maybeEnableSmoothScroll();\n    if (this._observer) {\n      this._observer.disconnect();\n    } else {\n      this._observer = this._getNewObserver();\n    }\n    for (const section of this._observableSections.values()) {\n      this._observer.observe(section);\n    }\n  }\n  dispose() {\n    this._observer.disconnect();\n    super.dispose();\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    // TODO: on v6 target should be given explicitly & remove the {target: 'ss-target'} case\n    config.target = getElement(config.target) || document.body;\n\n    // TODO: v6 Only for backwards compatibility reasons. Use rootMargin only\n    config.rootMargin = config.offset ? `${config.offset}px 0px -30%` : config.rootMargin;\n    if (typeof config.threshold === 'string') {\n      config.threshold = config.threshold.split(',').map(value => Number.parseFloat(value));\n    }\n    return config;\n  }\n  _maybeEnableSmoothScroll() {\n    if (!this._config.smoothScroll) {\n      return;\n    }\n\n    // unregister any previous listeners\n    EventHandler.off(this._config.target, EVENT_CLICK);\n    EventHandler.on(this._config.target, EVENT_CLICK, SELECTOR_TARGET_LINKS, event => {\n      const observableSection = this._observableSections.get(event.target.hash);\n      if (observableSection) {\n        event.preventDefault();\n        const root = this._rootElement || window;\n        const height = observableSection.offsetTop - this._element.offsetTop;\n        if (root.scrollTo) {\n          root.scrollTo({\n            top: height,\n            behavior: 'smooth'\n          });\n          return;\n        }\n\n        // Chrome 60 doesn't support `scrollTo`\n        root.scrollTop = height;\n      }\n    });\n  }\n  _getNewObserver() {\n    const options = {\n      root: this._rootElement,\n      threshold: this._config.threshold,\n      rootMargin: this._config.rootMargin\n    };\n    return new IntersectionObserver(entries => this._observerCallback(entries), options);\n  }\n\n  // The logic of selection\n  _observerCallback(entries) {\n    const targetElement = entry => this._targetLinks.get(`#${entry.target.id}`);\n    const activate = entry => {\n      this._previousScrollData.visibleEntryTop = entry.target.offsetTop;\n      this._process(targetElement(entry));\n    };\n    const parentScrollTop = (this._rootElement || document.documentElement).scrollTop;\n    const userScrollsDown = parentScrollTop >= this._previousScrollData.parentScrollTop;\n    this._previousScrollData.parentScrollTop = parentScrollTop;\n    for (const entry of entries) {\n      if (!entry.isIntersecting) {\n        this._activeTarget = null;\n        this._clearActiveClass(targetElement(entry));\n        continue;\n      }\n      const entryIsLowerThanPrevious = entry.target.offsetTop >= this._previousScrollData.visibleEntryTop;\n      // if we are scrolling down, pick the bigger offsetTop\n      if (userScrollsDown && entryIsLowerThanPrevious) {\n        activate(entry);\n        // if parent isn't scrolled, let's keep the first visible item, breaking the iteration\n        if (!parentScrollTop) {\n          return;\n        }\n        continue;\n      }\n\n      // if we are scrolling up, pick the smallest offsetTop\n      if (!userScrollsDown && !entryIsLowerThanPrevious) {\n        activate(entry);\n      }\n    }\n  }\n  _initializeTargetsAndObservables() {\n    this._targetLinks = new Map();\n    this._observableSections = new Map();\n    const targetLinks = SelectorEngine.find(SELECTOR_TARGET_LINKS, this._config.target);\n    for (const anchor of targetLinks) {\n      // ensure that the anchor has an id and is not disabled\n      if (!anchor.hash || isDisabled(anchor)) {\n        continue;\n      }\n      const observableSection = SelectorEngine.findOne(decodeURI(anchor.hash), this._element);\n\n      // ensure that the observableSection exists & is visible\n      if (isVisible(observableSection)) {\n        this._targetLinks.set(decodeURI(anchor.hash), anchor);\n        this._observableSections.set(anchor.hash, observableSection);\n      }\n    }\n  }\n  _process(target) {\n    if (this._activeTarget === target) {\n      return;\n    }\n    this._clearActiveClass(this._config.target);\n    this._activeTarget = target;\n    target.classList.add(CLASS_NAME_ACTIVE$1);\n    this._activateParents(target);\n    EventHandler.trigger(this._element, EVENT_ACTIVATE, {\n      relatedTarget: target\n    });\n  }\n  _activateParents(target) {\n    // Activate dropdown parents\n    if (target.classList.contains(CLASS_NAME_DROPDOWN_ITEM)) {\n      SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1, target.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);\n      return;\n    }\n    for (const listGroup of SelectorEngine.parents(target, SELECTOR_NAV_LIST_GROUP)) {\n      // Set triggered links parents as active\n      // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor\n      for (const item of SelectorEngine.prev(listGroup, SELECTOR_LINK_ITEMS)) {\n        item.classList.add(CLASS_NAME_ACTIVE$1);\n      }\n    }\n  }\n  _clearActiveClass(parent) {\n    parent.classList.remove(CLASS_NAME_ACTIVE$1);\n    const activeNodes = SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`, parent);\n    for (const node of activeNodes) {\n      node.classList.remove(CLASS_NAME_ACTIVE$1);\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = ScrollSpy.getOrCreateInstance(this, config);\n      if (typeof config !== 'string') {\n        return;\n      }\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n      data[config]();\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API$1, () => {\n  for (const spy of SelectorEngine.find(SELECTOR_DATA_SPY)) {\n    ScrollSpy.getOrCreateInstance(spy);\n  }\n});\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(ScrollSpy);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap tab.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME$1 = 'tab';\nconst DATA_KEY$1 = 'bs.tab';\nconst EVENT_KEY$1 = `.${DATA_KEY$1}`;\nconst EVENT_HIDE$1 = `hide${EVENT_KEY$1}`;\nconst EVENT_HIDDEN$1 = `hidden${EVENT_KEY$1}`;\nconst EVENT_SHOW$1 = `show${EVENT_KEY$1}`;\nconst EVENT_SHOWN$1 = `shown${EVENT_KEY$1}`;\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY$1}`;\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY$1}`;\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY$1}`;\nconst ARROW_LEFT_KEY = 'ArrowLeft';\nconst ARROW_RIGHT_KEY = 'ArrowRight';\nconst ARROW_UP_KEY = 'ArrowUp';\nconst ARROW_DOWN_KEY = 'ArrowDown';\nconst CLASS_NAME_ACTIVE = 'active';\nconst CLASS_NAME_FADE$1 = 'fade';\nconst CLASS_NAME_SHOW$1 = 'show';\nconst CLASS_DROPDOWN = 'dropdown';\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle';\nconst SELECTOR_DROPDOWN_MENU = '.dropdown-menu';\nconst NOT_SELECTOR_DROPDOWN_TOGGLE = ':not(.dropdown-toggle)';\nconst SELECTOR_TAB_PANEL = '.list-group, .nav, [role=\"tablist\"]';\nconst SELECTOR_OUTER = '.nav-item, .list-group-item';\nconst SELECTOR_INNER = `.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role=\"tab\"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`;\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]'; // TODO: could only be `tab` in v6\nconst SELECTOR_INNER_ELEM = `${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`;\nconst SELECTOR_DATA_TOGGLE_ACTIVE = `.${CLASS_NAME_ACTIVE}[data-bs-toggle=\"tab\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"pill\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"list\"]`;\n\n/**\n * Class definition\n */\n\nclass Tab extends BaseComponent {\n  constructor(element) {\n    super(element);\n    this._parent = this._element.closest(SELECTOR_TAB_PANEL);\n    if (!this._parent) {\n      return;\n      // TODO: should throw exception in v6\n      // throw new TypeError(`${element.outerHTML} has not a valid parent ${SELECTOR_INNER_ELEM}`)\n    }\n\n    // Set up initial aria attributes\n    this._setInitialAttributes(this._parent, this._getChildren());\n    EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event));\n  }\n\n  // Getters\n  static get NAME() {\n    return NAME$1;\n  }\n\n  // Public\n  show() {\n    // Shows this elem and deactivate the active sibling if exists\n    const innerElem = this._element;\n    if (this._elemIsActive(innerElem)) {\n      return;\n    }\n\n    // Search for active tab on same parent to deactivate it\n    const active = this._getActiveElem();\n    const hideEvent = active ? EventHandler.trigger(active, EVENT_HIDE$1, {\n      relatedTarget: innerElem\n    }) : null;\n    const showEvent = EventHandler.trigger(innerElem, EVENT_SHOW$1, {\n      relatedTarget: active\n    });\n    if (showEvent.defaultPrevented || hideEvent && hideEvent.defaultPrevented) {\n      return;\n    }\n    this._deactivate(active, innerElem);\n    this._activate(innerElem, active);\n  }\n\n  // Private\n  _activate(element, relatedElem) {\n    if (!element) {\n      return;\n    }\n    element.classList.add(CLASS_NAME_ACTIVE);\n    this._activate(SelectorEngine.getElementFromSelector(element)); // Search and activate/show the proper section\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.add(CLASS_NAME_SHOW$1);\n        return;\n      }\n      element.removeAttribute('tabindex');\n      element.setAttribute('aria-selected', true);\n      this._toggleDropDown(element, true);\n      EventHandler.trigger(element, EVENT_SHOWN$1, {\n        relatedTarget: relatedElem\n      });\n    };\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE$1));\n  }\n  _deactivate(element, relatedElem) {\n    if (!element) {\n      return;\n    }\n    element.classList.remove(CLASS_NAME_ACTIVE);\n    element.blur();\n    this._deactivate(SelectorEngine.getElementFromSelector(element)); // Search and deactivate the shown section too\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.remove(CLASS_NAME_SHOW$1);\n        return;\n      }\n      element.setAttribute('aria-selected', false);\n      element.setAttribute('tabindex', '-1');\n      this._toggleDropDown(element, false);\n      EventHandler.trigger(element, EVENT_HIDDEN$1, {\n        relatedTarget: relatedElem\n      });\n    };\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE$1));\n  }\n  _keydown(event) {\n    if (![ARROW_LEFT_KEY, ARROW_RIGHT_KEY, ARROW_UP_KEY, ARROW_DOWN_KEY].includes(event.key)) {\n      return;\n    }\n    event.stopPropagation(); // stopPropagation/preventDefault both added to support up/down keys without scrolling the page\n    event.preventDefault();\n    const isNext = [ARROW_RIGHT_KEY, ARROW_DOWN_KEY].includes(event.key);\n    const nextActiveElement = getNextActiveElement(this._getChildren().filter(element => !isDisabled(element)), event.target, isNext, true);\n    if (nextActiveElement) {\n      nextActiveElement.focus({\n        preventScroll: true\n      });\n      Tab.getOrCreateInstance(nextActiveElement).show();\n    }\n  }\n  _getChildren() {\n    // collection of inner elements\n    return SelectorEngine.find(SELECTOR_INNER_ELEM, this._parent);\n  }\n  _getActiveElem() {\n    return this._getChildren().find(child => this._elemIsActive(child)) || null;\n  }\n  _setInitialAttributes(parent, children) {\n    this._setAttributeIfNotExists(parent, 'role', 'tablist');\n    for (const child of children) {\n      this._setInitialAttributesOnChild(child);\n    }\n  }\n  _setInitialAttributesOnChild(child) {\n    child = this._getInnerElement(child);\n    const isActive = this._elemIsActive(child);\n    const outerElem = this._getOuterElement(child);\n    child.setAttribute('aria-selected', isActive);\n    if (outerElem !== child) {\n      this._setAttributeIfNotExists(outerElem, 'role', 'presentation');\n    }\n    if (!isActive) {\n      child.setAttribute('tabindex', '-1');\n    }\n    this._setAttributeIfNotExists(child, 'role', 'tab');\n\n    // set attributes to the related panel too\n    this._setInitialAttributesOnTargetPanel(child);\n  }\n  _setInitialAttributesOnTargetPanel(child) {\n    const target = SelectorEngine.getElementFromSelector(child);\n    if (!target) {\n      return;\n    }\n    this._setAttributeIfNotExists(target, 'role', 'tabpanel');\n    if (child.id) {\n      this._setAttributeIfNotExists(target, 'aria-labelledby', `${child.id}`);\n    }\n  }\n  _toggleDropDown(element, open) {\n    const outerElem = this._getOuterElement(element);\n    if (!outerElem.classList.contains(CLASS_DROPDOWN)) {\n      return;\n    }\n    const toggle = (selector, className) => {\n      const element = SelectorEngine.findOne(selector, outerElem);\n      if (element) {\n        element.classList.toggle(className, open);\n      }\n    };\n    toggle(SELECTOR_DROPDOWN_TOGGLE, CLASS_NAME_ACTIVE);\n    toggle(SELECTOR_DROPDOWN_MENU, CLASS_NAME_SHOW$1);\n    outerElem.setAttribute('aria-expanded', open);\n  }\n  _setAttributeIfNotExists(element, attribute, value) {\n    if (!element.hasAttribute(attribute)) {\n      element.setAttribute(attribute, value);\n    }\n  }\n  _elemIsActive(elem) {\n    return elem.classList.contains(CLASS_NAME_ACTIVE);\n  }\n\n  // Try to get the inner element (usually the .nav-link)\n  _getInnerElement(elem) {\n    return elem.matches(SELECTOR_INNER_ELEM) ? elem : SelectorEngine.findOne(SELECTOR_INNER_ELEM, elem);\n  }\n\n  // Try to get the outer element (usually the .nav-item)\n  _getOuterElement(elem) {\n    return elem.closest(SELECTOR_OUTER) || elem;\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tab.getOrCreateInstance(this);\n      if (typeof config !== 'string') {\n        return;\n      }\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`);\n      }\n      data[config]();\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault();\n  }\n  if (isDisabled(this)) {\n    return;\n  }\n  Tab.getOrCreateInstance(this).show();\n});\n\n/**\n * Initialize on focus\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const element of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE)) {\n    Tab.getOrCreateInstance(element);\n  }\n});\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tab);\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap toast.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n\n/**\n * Constants\n */\n\nconst NAME = 'toast';\nconst DATA_KEY = 'bs.toast';\nconst EVENT_KEY = `.${DATA_KEY}`;\nconst EVENT_MOUSEOVER = `mouseover${EVENT_KEY}`;\nconst EVENT_MOUSEOUT = `mouseout${EVENT_KEY}`;\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`;\nconst EVENT_FOCUSOUT = `focusout${EVENT_KEY}`;\nconst EVENT_HIDE = `hide${EVENT_KEY}`;\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`;\nconst EVENT_SHOW = `show${EVENT_KEY}`;\nconst EVENT_SHOWN = `shown${EVENT_KEY}`;\nconst CLASS_NAME_FADE = 'fade';\nconst CLASS_NAME_HIDE = 'hide'; // @deprecated - kept here only for backwards compatibility\nconst CLASS_NAME_SHOW = 'show';\nconst CLASS_NAME_SHOWING = 'showing';\nconst DefaultType = {\n  animation: 'boolean',\n  autohide: 'boolean',\n  delay: 'number'\n};\nconst Default = {\n  animation: true,\n  autohide: true,\n  delay: 5000\n};\n\n/**\n * Class definition\n */\n\nclass Toast extends BaseComponent {\n  constructor(element, config) {\n    super(element, config);\n    this._timeout = null;\n    this._hasMouseInteraction = false;\n    this._hasKeyboardInteraction = false;\n    this._setListeners();\n  }\n\n  // Getters\n  static get Default() {\n    return Default;\n  }\n  static get DefaultType() {\n    return DefaultType;\n  }\n  static get NAME() {\n    return NAME;\n  }\n\n  // Public\n  show() {\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW);\n    if (showEvent.defaultPrevented) {\n      return;\n    }\n    this._clearTimeout();\n    if (this._config.animation) {\n      this._element.classList.add(CLASS_NAME_FADE);\n    }\n    const complete = () => {\n      this._element.classList.remove(CLASS_NAME_SHOWING);\n      EventHandler.trigger(this._element, EVENT_SHOWN);\n      this._maybeScheduleHide();\n    };\n    this._element.classList.remove(CLASS_NAME_HIDE); // @deprecated\n    reflow(this._element);\n    this._element.classList.add(CLASS_NAME_SHOW, CLASS_NAME_SHOWING);\n    this._queueCallback(complete, this._element, this._config.animation);\n  }\n  hide() {\n    if (!this.isShown()) {\n      return;\n    }\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE);\n    if (hideEvent.defaultPrevented) {\n      return;\n    }\n    const complete = () => {\n      this._element.classList.add(CLASS_NAME_HIDE); // @deprecated\n      this._element.classList.remove(CLASS_NAME_SHOWING, CLASS_NAME_SHOW);\n      EventHandler.trigger(this._element, EVENT_HIDDEN);\n    };\n    this._element.classList.add(CLASS_NAME_SHOWING);\n    this._queueCallback(complete, this._element, this._config.animation);\n  }\n  dispose() {\n    this._clearTimeout();\n    if (this.isShown()) {\n      this._element.classList.remove(CLASS_NAME_SHOW);\n    }\n    super.dispose();\n  }\n  isShown() {\n    return this._element.classList.contains(CLASS_NAME_SHOW);\n  }\n\n  // Private\n\n  _maybeScheduleHide() {\n    if (!this._config.autohide) {\n      return;\n    }\n    if (this._hasMouseInteraction || this._hasKeyboardInteraction) {\n      return;\n    }\n    this._timeout = setTimeout(() => {\n      this.hide();\n    }, this._config.delay);\n  }\n  _onInteraction(event, isInteracting) {\n    switch (event.type) {\n      case 'mouseover':\n      case 'mouseout':\n        {\n          this._hasMouseInteraction = isInteracting;\n          break;\n        }\n      case 'focusin':\n      case 'focusout':\n        {\n          this._hasKeyboardInteraction = isInteracting;\n          break;\n        }\n    }\n    if (isInteracting) {\n      this._clearTimeout();\n      return;\n    }\n    const nextElement = event.relatedTarget;\n    if (this._element === nextElement || this._element.contains(nextElement)) {\n      return;\n    }\n    this._maybeScheduleHide();\n  }\n  _setListeners() {\n    EventHandler.on(this._element, EVENT_MOUSEOVER, event => this._onInteraction(event, true));\n    EventHandler.on(this._element, EVENT_MOUSEOUT, event => this._onInteraction(event, false));\n    EventHandler.on(this._element, EVENT_FOCUSIN, event => this._onInteraction(event, true));\n    EventHandler.on(this._element, EVENT_FOCUSOUT, event => this._onInteraction(event, false));\n  }\n  _clearTimeout() {\n    clearTimeout(this._timeout);\n    this._timeout = null;\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Toast.getOrCreateInstance(this, config);\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config](this);\n      }\n    });\n  }\n}\n\n/**\n * Data API implementation\n */\n\nenableDismissTrigger(Toast);\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Toast);\n\nexport { Alert, Button, Carousel, Collapse, Dropdown, Modal, Offcanvas, Popover, ScrollSpy, Tab, Toast, Tooltip };\n//# sourceMappingURL=bootstrap.esm.js.map\n","import { Carousel as _Carousel } from \"bootstrap\";\n// import { CarouselOption } from \"../interfaces.js\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/carousel.js\n */\nexport class Carousel extends _Carousel {}\n\n// /**\n//  * ------------------------------------------------------------------------\n//  * Constants\n//  * ------------------------------------------------------------------------\n//  */\n\n// export const NAME = \"carousel\";\n// export const DATA_KEY = \"bs.carousel\";\n// export const EVENT_KEY = `.${DATA_KEY}`;\n// export const DATA_API_KEY = \".data-api\";\n\n// export const ARROW_LEFT_KEY = \"ArrowLeft\";\n// export const ARROW_RIGHT_KEY = \"ArrowRight\";\n// export const TOUCHEVENT_COMPAT_WAIT = 500; // Time for mouse compat events to fire after touch\n// export const SWIPE_THRESHOLD = 40;\n\n// export const Default: CarouselOption = {\n//   interval: 5000,\n//   keyboard: true,\n//   slide: false,\n//   pause: \"hover\",\n//   wrap: true,\n//   touch: true,\n// };\n\n// export const DefaultType = {\n//   interval: \"(number|boolean)\",\n//   keyboard: \"boolean\",\n//   slide: \"(boolean|string)\",\n//   pause: \"(string|boolean)\",\n//   wrap: \"boolean\",\n//   touch: \"boolean\",\n// };\n\n// export const DIRECTION_NEXT = \"next\";\n// export const DIRECTION_PREV = \"prev\";\n// export const DIRECTION_LEFT = \"left\";\n// export const DIRECTION_RIGHT = \"right\";\n\n// export const EVENT_SLIDE = `slide${EVENT_KEY}`;\n// export const EVENT_SLID = `slid${EVENT_KEY}`;\n// export const EVENT_KEYDOWN = `keydown${EVENT_KEY}`;\n// export const EVENT_MOUSEENTER = `mouseenter${EVENT_KEY}`;\n// export const EVENT_MOUSELEAVE = `mouseleave${EVENT_KEY}`;\n// export const EVENT_TOUCHSTART = `touchstart${EVENT_KEY}`;\n// export const EVENT_TOUCHMOVE = `touchmove${EVENT_KEY}`;\n// export const EVENT_TOUCHEND = `touchend${EVENT_KEY}`;\n// export const EVENT_POINTERDOWN = `pointerdown${EVENT_KEY}`;\n// export const EVENT_POINTERUP = `pointerup${EVENT_KEY}`;\n// export const EVENT_DRAG_START = `dragstart${EVENT_KEY}`;\n// export const EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`;\n// export const EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`;\n\n// export const CLASS_NAME_CAROUSEL = \"carousel\";\n// export const CLASS_NAME_ACTIVE = \"active\";\n// export const CLASS_NAME_SLIDE = \"slide\";\n// export const CLASS_NAME_END = \"carousel-item-end\";\n// export const CLASS_NAME_START = \"carousel-item-start\";\n// export const CLASS_NAME_NEXT = \"carousel-item-next\";\n// export const CLASS_NAME_PREV = \"carousel-item-prev\";\n// export const CLASS_NAME_POINTER_EVENT = \"pointer-event\";\n\n// export const SELECTOR_ACTIVE = \".active\";\n// export const SELECTOR_ACTIVE_ITEM = \".active.carousel-item\";\n// export const SELECTOR_ITEM = \".carousel-item\";\n// export const SELECTOR_ITEM_IMG = \".carousel-item img\";\n// export const SELECTOR_NEXT_PREV = \".carousel-item-next, .carousel-item-prev\";\n// export const SELECTOR_INDICATORS = \".carousel-indicators\";\n// export const SELECTOR_INDICATOR = \"[data-bs-target]\";\n// export const SELECTOR_DATA_SLIDE = \"[data-bs-slide], [data-bs-slide-to]\";\n// export const SELECTOR_DATA_RIDE = '[data-bs-ride=\"carousel\"]';\n\n// export const POINTER_TYPE_TOUCH = \"touch\";\n// export const POINTER_TYPE_PEN = \"pen\";\n","import { Collapse as _Collapse } from \"bootstrap\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/collapse.js\n */\nexport class Collapse extends _Collapse {\n  static CLASS_NAME_SHOW = \"show\";\n  static CLASS_NAME_COLLAPSE = \"collapse\";\n  static CLASS_NAME_COLLAPSING = \"collapsing\";\n  static CLASS_NAME_COLLAPSED = \"collapsed\";\n  static SELECTOR_ACTIVES = \".show, .collapsing\";\n  static SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"collapse\"]';\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { Dropdown } from \"../../services/dropdown.js\";\nimport { Dropdown as BSDropdown } from \"bootstrap\";\nimport { JsxBs5DropdownProps } from \"../../types/jsx/jsx-dropdown-props.js\";\n\ninterface Scope extends Partial<BSDropdown.Options> {\n  toggle: Bs5DropdownComponent[\"toggle\"];\n  show: Bs5DropdownComponent[\"show\"];\n  hide: Bs5DropdownComponent[\"hide\"];\n  update: Bs5DropdownComponent[\"update\"];\n  isShown: boolean;\n}\n\nexport class Bs5DropdownComponent extends Component {\n  public static tagName = \"bs5-dropdown\";\n\n  public scope: Scope = {\n    toggle: this.toggle,\n    show: this.show,\n    hide: this.hide,\n    update: this.update,\n    isShown: false,\n  };\n\n  public dropdown?: Dropdown;\n  protected toggler: HTMLElement | Bs5DropdownComponent | null = null;\n\n  static get observedAttributes(): (keyof JsxBs5DropdownProps)[] {\n    return [\n      \"offset\",\n      \"boundary\",\n      \"reference\",\n      \"display\",\n      \"popper-config\",\n      \"auto-close\",\n    ];\n  }\n\n  constructor() {\n    super();\n  }\n\n  public isShown() {\n    // TODO: Do not access private methods\n    return (this.dropdown as any)?._isShown() || false;\n  }\n\n  public toggle(event: Event, ctx: Scope, el: any) {\n    if (!this.dropdown) {\n      throw new Error(\"Dropdown not ready!\");\n    }\n\n    // Only call toggle if this is not called by the dropdown service itself which is the case on the toggler element\n    if (el !== this.toggler) {\n      this.dropdown.toggle();\n    }\n  }\n\n  public show() {\n    if (!this.dropdown) {\n      throw new Error(\"Dropdown not ready!\");\n    }\n\n    this.dropdown.show();\n  }\n\n  public hide() {\n    if (!this.dropdown) {\n      throw new Error(\"Dropdown not ready!\");\n    }\n\n    this.dropdown.hide();\n  }\n\n  public update() {\n    if (!this.dropdown) {\n      throw new Error(\"Dropdown not ready!\");\n    }\n\n    this.dropdown.update();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5DropdownComponent.observedAttributes);\n  }\n\n  async afterBind() {\n    this.initDropdown();\n    this.addEventListeners();\n    await super.afterBind();\n  }\n\n  protected initDropdown() {\n    this.toggler = this.classList.contains(\"dropdown-toggle\")\n      ? this\n      : this.querySelector<HTMLElement>(\".dropdown-toggle\") || this;\n\n    // To detect this element as an dropdown by the bootstrap logic\n    this.toggler.dataset.bsToggle = \"dropdown\";\n    this.dropdown = new Dropdown(this.toggler, this.scope);\n    this.dropdown.hide();\n    this.scope.isShown = this.isShown();\n  }\n\n  protected _onShown() {\n    console.debug(\"onShown\");\n    this.scope.isShown = this.isShown();\n  }\n\n  protected onShown = this._onShown.bind(this);\n\n  protected _onHidden() {\n    console.debug(\"onHidden\");\n    this.scope.isShown = this.isShown();\n  }\n\n  protected onHidden = this._onHidden.bind(this);\n\n  protected addEventListeners() {\n    this.toggler?.addEventListener(Dropdown.EVENT_SHOWN, this.onShown);\n    this.toggler?.addEventListener(Dropdown.EVENT_HIDDEN, this.onHidden);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Dropdown as _Dropdown } from \"bootstrap\";\nimport { Bs5DropdownComponent } from \"../components/bs5-dropdown/bs5-dropdown.component.js\";\n\nconst DROPDOWN_DATA_API_KEY = \".data-api\";\n\nconst DROPDOWN_ARROW_DOWN_KEY = \"ArrowDown\";\nconst DROPDOWN_ARROW_UP_KEY = \"ArrowUp\";\nconst DROPDOWN_ESCAPE_KEY = \"Escape\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/dropdown.js\n */\nexport class Dropdown extends _Dropdown {\n  public static hideAll(event: Event) {\n    (this as any).clearMenus(event); // TODO type\n  }\n\n  public static getAllComponents() {\n    const dropdownEls = document.querySelectorAll<Bs5DropdownComponent>(\n      Bs5DropdownComponent.tagName\n    );\n    return Array.from(dropdownEls);\n  }\n\n  public static hideAllComponents() {\n    const dropdownEls = this.getAllComponents();\n\n    for (const dropdownEl of Array.from(dropdownEls)) {\n      dropdownEl.dropdown?.hide();\n    }\n  }\n\n  constructor(element: string | Element, options?: Partial<_Dropdown.Options>) {\n    super(element, options);\n  }\n\n  // static NAME = \"dropdown\";\n  // static get DATA_KEY() {\n  //   return DROPDOWN_DATA_KEY;\n  // }\n  // static EVENT_KEY = Dropdown.EVENT_KEY;\n  static DATA_API_KEY = DROPDOWN_DATA_API_KEY;\n\n  static ESCAPE_KEY = DROPDOWN_ESCAPE_KEY;\n  static SPACE_KEY = \"Space\";\n  static TAB_KEY = \"Tab\";\n  static ARROW_UP_KEY = DROPDOWN_ARROW_UP_KEY;\n  static ARROW_DOWN_KEY = DROPDOWN_ARROW_DOWN_KEY;\n  static RIGHT_MOUSE_BUTTON = 2; // MouseEvent.button value for the secondary button, usually the right button\n\n  static REGEXP_KEYDOWN = new RegExp(\n    `${DROPDOWN_ARROW_UP_KEY}|${DROPDOWN_ARROW_DOWN_KEY}|${DROPDOWN_ESCAPE_KEY}`\n  );\n\n  static EVENT_HIDE = `hide${Dropdown.EVENT_KEY}`;\n  static EVENT_HIDDEN = `hidden${Dropdown.EVENT_KEY}`;\n  static EVENT_SHOW = `show${Dropdown.EVENT_KEY}`;\n  static EVENT_SHOWN = `shown${Dropdown.EVENT_KEY}`;\n  static EVENT_CLICK = `click${Dropdown.EVENT_KEY}`;\n  static EVENT_CLICK_DATA_API = `click${Dropdown.EVENT_KEY}${DROPDOWN_DATA_API_KEY}`;\n  static EVENT_KEYDOWN_DATA_API = `keydown${Dropdown.EVENT_KEY}${DROPDOWN_DATA_API_KEY}`;\n  static EVENT_KEYUP_DATA_API = `keyup${Dropdown.EVENT_KEY}${DROPDOWN_DATA_API_KEY}`;\n\n  static CLASS_NAME_DISABLED = \"disabled\";\n  static CLASS_NAME_SHOW = \"show\";\n  static CLASS_NAME_DROPUP = \"dropup\";\n  static CLASS_NAME_DROPEND = \"dropend\";\n  static CLASS_NAME_DROPSTART = \"dropstart\";\n  static CLASS_NAME_NAVBAR = \"navbar\";\n\n  static SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"dropdown\"]';\n  static SELECTOR_FORM_CHILD = \".dropdown form\";\n  static SELECTOR_MENU = \".dropdown-menu\";\n  static SELECTOR_NAVBAR_NAV = \".navbar-nav\";\n  static SELECTOR_VISIBLE_ITEMS =\n    \".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)\";\n}\n","export enum CollapseEvents {\n  /**\n   * This event fires immediately when the show instance method is called.\n   */\n  show = \"show.bs.collapse\",\n\n  /**\n   * This event is fired when a collapse element has been made visible to the user (will wait for CSS transitions to complete).\n   */\n  shown = \"shown.bs.collapse\",\n\n  /**\n   * This event is fired immediately when the hide method has been called.\n   */\n  hide = \"hide.bs.collapse\",\n\n  /**\n   * This event is fired when a collapse element has been hidden from the\n   * user (will wait for CSS transitions to complete).\n   */\n  hidden = \"hidden.bs.collapse\",\n}\n","import type { NotificationEventBinderData } from \"./notification-event-binder-data.js\";\nexport abstract class Notification implements NotificationEventBinderData {\n  type: string;\n  title?: string;\n\n  channel?: string;\n  $event?: CustomEvent;\n  $context?: any;\n\n  constructor(type: string, title?: string) {\n    this.type = type;\n    this.title = title;\n  }\n}\n","import { Notification, ModalNotificationButton } from \"../types/index.js\";\nimport { Modal } from \"../services/modal.js\";\n\nexport class ModalNotification extends Notification {\n  message: string;\n  iconUrl?: string;\n\n  focus: boolean;\n  keyboard: boolean;\n  backdrop: boolean | \"static\";\n\n  buttons: ModalNotificationButton[] = [];\n\n  modalService?: Modal;\n  contextualClass?: string;\n\n  constructor({\n    title,\n    message,\n    iconUrl,\n\n    focus,\n    keyboard,\n    backdrop,\n\n    buttons,\n\n    modalService,\n    contextualClass,\n    channel,\n    $event,\n    $context,\n  }: {\n    title?: string;\n    message: string;\n    iconUrl?: string;\n\n    focus?: boolean;\n    keyboard?: boolean;\n    backdrop?: boolean | \"static\";\n    show?: boolean;\n\n    buttons?: ModalNotificationButton[];\n\n    modalService?: Modal;\n    contextualClass?: string;\n    channel?: string;\n    $event?: CustomEvent;\n    $context?: any;\n  }) {\n    super(\"modal\", title);\n    this.message = message;\n    this.iconUrl = iconUrl;\n\n    this.focus = focus || false;\n    this.keyboard = keyboard || true;\n    this.backdrop = backdrop || true;\n\n    this.buttons = buttons || [];\n\n    this.modalService = modalService;\n    this.contextualClass = contextualClass;\n    this.channel = channel;\n    this.$event = $event;\n    this.$context = $context;\n  }\n}\n","import { Modal as _Modal } from \"bootstrap\";\n\nconst DATA_KEY = \"bs.modal\";\nconst DATA_API_KEY = \".data-api\";\nconst EVENT_KEY = `.${DATA_KEY}`;\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/modal.js\n */\nexport class Modal extends _Modal {\n  static get DATA_KEY() {\n    return DATA_KEY;\n  }\n\n  static get DATA_API_KEY() {\n    return DATA_API_KEY;\n  }\n\n  static get EVENT_KEY() {\n    return EVENT_KEY;\n  }\n\n  // static NAME = \"modal\";\n\n  static ESCAPE_KEY = \"Escape\";\n\n  static EVENT_HIDE = `hide${EVENT_KEY}`;\n  static EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`;\n  static EVENT_HIDDEN = `hidden${EVENT_KEY}`;\n  static EVENT_SHOW = `show${EVENT_KEY}`;\n  static EVENT_SHOWN = `shown${EVENT_KEY}`;\n  static EVENT_FOCUSIN = `focusin${EVENT_KEY}`;\n  static EVENT_RESIZE = `resize${EVENT_KEY}`;\n  static EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`;\n  static EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`;\n  static EVENT_MOUSEUP_DISMISS = `mouseup.dismiss${EVENT_KEY}`;\n  static EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`;\n  static EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`;\n\n  static CLASS_NAME_SCROLLBAR_MEASURER = \"modal-scrollbar-measure\";\n  static CLASS_NAME_BACKDROP = \"modal-backdrop\";\n  static CLASS_NAME_OPEN = \"modal-open\";\n  static CLASS_NAME_FADE = \"fade\";\n  static CLASS_NAME_SHOW = \"show\";\n  static CLASS_NAME_STATIC = \"modal-static\";\n\n  static SELECTOR_DIALOG = \".modal-dialog\";\n  static SELECTOR_MODAL_BODY = \".modal-body\";\n  static SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"modal\"]';\n  static SELECTOR_DATA_DISMISS = '[data-bs-dismiss=\"modal\"]';\n  static SELECTOR_FIXED_CONTENT =\n    \".fixed-top, .fixed-bottom, .is-fixed, .sticky-top\";\n  static SELECTOR_STICKY_CONTENT = \".sticky-top\";\n}\n","import { Tooltip as _Tooltip } from \"bootstrap\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/tooltip.js\n */\nexport class Tooltip extends _Tooltip {}\n","import { Popover as _Popover } from \"bootstrap\";\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/popover.js\n */\nexport class Popover extends _Popover {}\n","import { EventDispatcher } from \"@ribajs/events\";\nimport { themeChoices } from \"../constants/index.js\";\nimport { Bs5Service } from \"./bs5.service.js\";\n\nimport type {\n  ThemeChoice,\n  ThemeData,\n  ThemeChangedCallback,\n} from \"../types/index.js\";\n\n/**\n * The theme service is used to change and observe the color scheme from the OS or the user.\n * Can be dark or light respectively.\n * @credits https://stackoverflow.com/questions/56393880/how-do-i-detect-dark-mode-using-javascript\n */\nexport class ThemeService {\n  protected eventDispatcher = EventDispatcher.getInstance();\n\n  protected static instance?: ThemeService;\n  protected bs5 = Bs5Service.getSingleton();\n  public current: ThemeChoice = \"os\";\n\n  protected constructor() {\n    this.addEventListeners();\n    const data = this.init();\n    const selectEl = document.getElementById(\n      \"theme\"\n    ) as HTMLSelectElement | null;\n\n    if (selectEl) this.select(data.choice, selectEl);\n  }\n\n  public static getSingleton() {\n    if (ThemeService.instance) {\n      return ThemeService.instance;\n    }\n\n    return this.setSingleton();\n  }\n\n  public static setSingleton() {\n    if (ThemeService.instance) {\n      throw new Error(`Singleton of ThemeService already defined!`);\n    }\n    ThemeService.instance = new ThemeService();\n    return ThemeService.instance;\n  }\n\n  protected addEventListeners() {\n    // To watch for changes\n    window\n      .matchMedia(\"(prefers-color-scheme: dark)\")\n      .addEventListener(\"change\", (e: MediaQueryListEvent) => {\n        this.triggerChange(e);\n      });\n  }\n\n  /**\n   * Sets the last selected theme (which was stored in the localStorage)\n   * @param choices The theme theme-(light, dark or os)\n   * @returns The selected theme or or `null` in case of an error\n   */\n  public init() {\n    let savedTheme: ThemeChoice = \"os\";\n    if (this.bs5.options.allowStoreDataInBrowser) {\n      savedTheme = (localStorage.getItem(\"bs5-theme\") || \"os\") as ThemeChoice;\n    }\n\n    return this.set(savedTheme);\n  }\n\n  /**\n   * Selects the option of a global theme select element\n   * @param selectEl\n   * @param choice\n   */\n  public select(choice: ThemeChoice, selectEl: HTMLSelectElement) {\n    if (selectEl?.nodeName === \"SELECT\") {\n      selectEl.value = choice;\n    }\n  }\n\n  /**\n   * Get the default data for internal use.\n   * The default is the system light theme.\n   * @returns\n   */\n  protected getDefaultData(): ThemeData {\n    return {\n      supported: !!window.matchMedia, // TODO more checks?\n      isDark: false,\n      isLight: false,\n      systemIsDark: false,\n      systemIsLight: true,\n      bySystem: true,\n      byUser: false,\n      choice: \"os\",\n    };\n  }\n\n  protected triggerChange(e?: MediaQueryListEvent, oldValue?: ThemeData) {\n    if (!oldValue) {\n      oldValue = this.getDefaultData();\n    }\n    const newValue = this.getScheme();\n    this.eventDispatcher.trigger(\"theme-change\", {\n      oldValue,\n      newValue,\n    });\n    return newValue;\n  }\n\n  /**\n   * Adds an one time event listener triggered on theme change\n   * @param cb\n   * @param thisContext\n   */\n  onceChange(cb: ThemeChangedCallback, thisContext?: any): void {\n    this.eventDispatcher.once(\"theme-change\", cb, thisContext);\n  }\n  /**\n   * Adds an event listener triggered on theme change\n   * @param cb\n   * @param thisContext\n   */\n  onChange(cb: ThemeChangedCallback, thisContext?: any): void {\n    this.eventDispatcher.on(\"theme-change\", cb, thisContext);\n  }\n  /**\n   * Removes the theme changed event listener\n   * @param cb\n   * @param thisContext\n   */\n  offChange(cb?: ThemeChangedCallback, thisContext?: any): void {\n    this.eventDispatcher.off(\"theme-change\", cb, thisContext);\n  }\n\n  /**\n   * Sets the theme class to the <html>.\n   * - `os` means that the theme will be used by the operating system (which corresponds to light or dark)\n   * - `light` means that the light theme will be used\n   * - `dark` means that the dark theme will be used\n   * @param choices\n   * @returns The selected theme\n   */\n  set(newColorScheme: ThemeChoice): ThemeData {\n    const oldScheme = this.getScheme();\n    if (!themeChoices.includes(newColorScheme)) {\n      console.warn(\n        `Unsupported theme \"${newColorScheme}\", set instead the default \"os\".`\n      );\n      newColorScheme = \"os\";\n    }\n    if (this.bs5.options.allowStoreDataInBrowser) {\n      localStorage.setItem(\"bs5-theme\", newColorScheme);\n    }\n\n    if (newColorScheme === \"os\") {\n      const newScheme = this.getScheme(newColorScheme);\n      document.documentElement.setAttribute(\n        \"data-bs-theme\",\n        newScheme.isDark ? \"dark\" : \"light\"\n      );\n    } else {\n      document.documentElement.setAttribute(\"data-bs-theme\", newColorScheme);\n    }\n    this.current = newColorScheme;\n    return this.triggerChange(undefined, oldScheme);\n  }\n\n  getScheme(choice: ThemeChoice = this.current): ThemeData {\n    const data = this.getDefaultData();\n    data.systemIsDark = window.matchMedia(\n      \"(prefers-color-scheme: dark)\"\n    ).matches;\n    data.systemIsLight = !data.systemIsDark;\n\n    if (choice === \"os\") {\n      data.bySystem = true;\n      data.byUser = false;\n      data.choice = \"os\";\n      data.isDark = data.systemIsDark;\n      data.isLight = data.systemIsLight;\n    } else {\n      data.bySystem = false;\n      data.byUser = true;\n      if (choice === \"dark\") {\n        data.isDark = true;\n        data.choice = \"dark\";\n      }\n      if (choice === \"light\") {\n        data.isLight = true;\n        data.choice = \"light\";\n      }\n    }\n    return data;\n  }\n}\n","import { Toast } from \"./index.js\";\nimport { Notification } from \"../types/notification.js\";\n\nexport class ToastNotification extends Notification {\n  message: string;\n  iconUrl?: string;\n  delay?: number;\n  autoHide?: boolean;\n  animation?: boolean;\n  toastService?: Toast;\n  contextualClass?: string;\n\n  constructor({\n    title,\n    message,\n    iconUrl,\n    delay,\n    autoHide,\n    animation,\n    toastService,\n    contextualClass,\n    channel,\n    $event,\n    $context,\n  }: {\n    title?: string;\n    message: string;\n    iconUrl?: string;\n    delay?: number;\n    autoHide?: boolean;\n    animation?: boolean;\n    toastService?: Toast;\n    contextualClass?: string;\n    channel?: string;\n    $event?: CustomEvent;\n    $context?: any;\n  }) {\n    super(\"toast\", title);\n    this.message = message;\n    this.iconUrl = iconUrl;\n    this.delay = delay;\n    this.autoHide = autoHide;\n    this.animation = animation;\n    this.toastService = toastService;\n    this.contextualClass = contextualClass;\n    this.channel = channel;\n    this.$event = $event;\n    this.$context = $context;\n  }\n}\n","import { Toast as _Toast } from \"bootstrap\";\n\n// const DATA_KEY = \"bs.toast\";\n// const EVENT_KEY = `.${DATA_KEY}`;\n\n/**\n * @see https://github.com/twbs/bootstrap/blob/main/js/src/toast.js\n */\nexport class Toast extends _Toast {\n  // static NAME = \"toast\";\n  // static get DATA_KEY() {\n  //   return DATA_KEY;\n  // }\n  // static get EVENT_KEY() {\n  //   return EVENT_KEY;\n  // }\n\n  static EVENT_CLICK_DISMISS = `click.dismiss${Toast.EVENT_KEY}`;\n  static EVENT_HIDE = `hide${Toast.EVENT_KEY}`;\n  static EVENT_HIDDEN = `hidden${Toast.EVENT_KEY}`;\n  static EVENT_SHOW = `show${Toast.EVENT_KEY}`;\n  static EVENT_SHOWN = `shown${Toast.EVENT_KEY}`;\n\n  static CLASS_NAME_FADE = \"fade\";\n  static CLASS_NAME_HIDE = \"hide\";\n  static CLASS_NAME_SHOW = \"show\";\n  static CLASS_NAME_SHOWING = \"showing\";\n}\n","import { BasicComponent, Binder, View } from \"@ribajs/core\";\nimport { Bs5Service } from \"../services/bs5.service.js\";\nimport { parseJsonString, jsonStringify, camelCase } from \"@ribajs/utils\";\n\nexport abstract class Bs5AbstractBreakpointBinder<\n  E extends HTMLElement = HTMLElement\n> extends Binder<string, E> {\n  protected abstract defaultAttributeBinder: Binder<\n    any,\n    HTMLElement | BasicComponent\n  >;\n  protected bs5: Bs5Service;\n  protected breakpoint: string;\n  protected attributeName: string;\n  protected val?: any;\n\n  constructor(\n    view: View,\n    el: E,\n    type: string | null,\n    name: string,\n    keypath: string | undefined,\n    formatters: string[] | null,\n    identifier: string | null\n  ) {\n    super(view, el, type, name, keypath, formatters, identifier);\n    this.bs5 = Bs5Service.getSingleton();\n    if (this.args.length !== 2) {\n      throw new Error(\n        \"The Bs5AttributeBreakpointBinder was not initialized correctly!\"\n      );\n    }\n    const breakpoint = this.args[0].toString();\n    const attributeName = this.args[1].toString();\n    if (!this.bs5.breakpointNames.includes(breakpoint)) {\n      throw new Error(\n        `Unknown breakpoint \"${breakpoint}\"! You can define breakpoints at the initialization of the Bs5Module.`\n      );\n    }\n    this.breakpoint = breakpoint;\n    this.attributeName = attributeName;\n  }\n\n  protected onBreakpointChanges(/* activeBreakpoint: Breakpoint */) {\n    this.setAttributeOnMatch();\n  }\n\n  /**\n   * Sets the attribute if the current breakpoint matches\n   * @returns\n   */\n  protected setAttributeOnMatch() {\n    if (!this.bs5.activeBreakpoint) return;\n    if (this.isBreakpointMatch(this.breakpoint)) {\n      return this.defaultAttributeBinder.routine(this.el, this.val);\n    }\n    if (this.breakpointUnhandled(this.bs5.activeBreakpoint.name)) {\n      // Remove attribute\n      this.defaultAttributeBinder.routine(this.el, undefined);\n    }\n  }\n\n  /**\n   * Returns `true` if the current active breakpoint matches the breakpoints handled by this binder\n   * @param breakpoint\n   * @returns\n   */\n  protected isBreakpointMatch(breakpoint = this.breakpoint) {\n    if (!this.bs5.activeBreakpoint) {\n      return false;\n    }\n\n    if (this.bs5.activeBreakpoint.name === breakpoint) {\n      return true;\n    }\n\n    const myBreakpoints = this.myBreakpoints(breakpoint);\n    if (myBreakpoints.includes(this.bs5.activeBreakpoint.name)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns all breakpoints handled by this binder.\n   * This binder handles multiple breakpoints if other larger breakpoints exists but are not handled by another binder.\n   * @returns\n   */\n  protected myBreakpoints(breakpoint = this.breakpoint) {\n    const myBreakpoints: string[] = [breakpoint];\n    let nextBreakpoint: string | null = breakpoint;\n    while (nextBreakpoint) {\n      nextBreakpoint = this.bs5.getNextBreakpointByName(nextBreakpoint);\n\n      if (!nextBreakpoint || this.breakpointHandledByAnother(nextBreakpoint)) {\n        break;\n      }\n\n      myBreakpoints.push(nextBreakpoint);\n    }\n    return myBreakpoints;\n  }\n\n  /**\n   * Check if another breakpoint (mostly the next breakpoint) is handled by another binder\n   */\n  protected breakpointHandledByAnother(name: string) {\n    const handledBreakpoints = this.getHandledBreakpoints();\n    if (handledBreakpoints.includes(name)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Check if another breakpoint (mostly the previous breakpoint) is handled by no other breakpoint binders.\n   * These are all breakpoints that are smaller than the minimum breakpoint.\n   * I.e. for these breakpoints there is no binder, neither this one nor another one.\n   * @returns\n   */\n  protected breakpointUnhandled(breakpoint: string) {\n    let prevBreakpoint: string | null = breakpoint;\n\n    // Check if all smaller breakpoints are unhandled\n    let unhandled = true;\n    while (prevBreakpoint && unhandled) {\n      if (this.breakpointHandledByAnother(prevBreakpoint)) {\n        unhandled = false;\n        break;\n      }\n\n      prevBreakpoint = this.bs5.getPrevBreakpointByName(prevBreakpoint);\n\n      if (!prevBreakpoint) {\n        break;\n      }\n    }\n    return unhandled;\n  }\n\n  /**\n   * Used to check if there are more binders for other breakpoints\n   **/\n  protected addToHandledBreakpoints() {\n    const handledBreakpoints = this.getHandledBreakpoints();\n    handledBreakpoints.push(this.breakpoint);\n    this.el.dataset[camelCase(this.attributeName)] =\n      jsonStringify(handledBreakpoints);\n  }\n\n  /**\n   * Get all handled breakpoints.\n   * These are the own but also those of other binders.\n   * @returns\n   */\n  protected getHandledBreakpoints() {\n    const handledBreakpoints: string[] = parseJsonString(\n      this.el.dataset[camelCase(this.attributeName)] || \"[]\"\n    );\n    if (!Array.isArray(handledBreakpoints)) {\n      throw new Error(\"breakpoints dataset has unsupported values!\");\n    }\n    return handledBreakpoints;\n  }\n\n  bind(el: HTMLElement) {\n    this.bs5.on(\"breakpoint:changed\", this.onBreakpointChanges, this);\n    if (typeof this.defaultAttributeBinder.bind === \"function\") {\n      this.defaultAttributeBinder.bind(el);\n    }\n  }\n\n  routine(el: HTMLElement, newValue: any) {\n    this.addToHandledBreakpoints();\n    this.val = newValue;\n    this.setAttributeOnMatch();\n  }\n\n  unbind(el: HTMLElement) {\n    this.bs5?.off(\"breakpoint:changed\", this.onBreakpointChanges, this);\n    if (typeof this.defaultAttributeBinder.unbind === \"function\") {\n      this.defaultAttributeBinder.unbind(el);\n    }\n  }\n}\n","import { AttributeBinder, View } from \"@ribajs/core\";\nimport { Bs5AbstractBreakpointBinder } from \"./bs5-abstract-breakpoint.binder.js\";\n\n/**\n * Responsive attribute breakpoint binder\n * This binder is used to pass attributes to an element that should only be set at certain breakpoints (viewport widths).\n * @example\n * ```html\n *  <img\n *    rv-bs5-attr-xxs-src=\"'https://picsum.photos/100'\"\n *    rv-bs5-attr-xs-src=\"'https://picsum.photos/200'\"\n *    rv-bs5-attr-sm-src=\"'https://picsum.photos/500/200'\"\n *    rv-bs5-attr-md-src=\"'https://picsum.photos/1000/500'\"\n *\n *    rv-bs5-attr-xxs-alt=\"'Image for very small displays'\"\n *    rv-bs5-attr-xs-src=\"'Image for small displays'\"\n *    rv-bs5-attr-sm-src=\"'Image for smartphones'\"\n *    rv-bs5-attr-md-src=\"'Image for tablets and small laptops'\"\n *  />\n * ```\n */\nexport class Bs5AttributeBreakpointBinder extends Bs5AbstractBreakpointBinder<HTMLElement> {\n  static key = \"bs5-attr-*-*\";\n\n  defaultAttributeBinder: AttributeBinder;\n\n  constructor(\n    view: View,\n    el: HTMLElement,\n    type: string | null,\n    name: string,\n    keypath: string | undefined,\n    formatters: string[] | null,\n    identifier: string | null\n  ) {\n    super(view, el, type, name, keypath, formatters, identifier);\n    this.defaultAttributeBinder = new AttributeBinder(\n      view,\n      el,\n      this.attributeName,\n      name,\n      keypath,\n      formatters,\n      \"*\"\n    );\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Collapse } from \"../services/collapse.js\";\nimport { onRoute } from \"@ribajs/utils/src/url\";\n\n/**\n *\n * @see https://getbootstrap.com/docs/4.1/components/collapse/\n * @see https://github.com/twbs/bootstrap/blob/v4-dev/js/src/collapse.js\n */\nexport class CollapseOnUrlBinder extends Binder<string, HTMLInputElement> {\n  static key = \"bs5-collapse-on-url\";\n\n  private dispatcher = EventDispatcher.getInstance(\"main\");\n  private collapseService?: Collapse;\n  private url?: string;\n\n  private _checkURL() {\n    if (this.url && onRoute(this.url)) {\n      this.collapseService?.hide();\n      return true;\n    }\n    // collapseService.show();\n    return false;\n  }\n\n  private checkURL = this._checkURL.bind(this);\n\n  bind(el: HTMLElement) {\n    this.collapseService = new Collapse(el, { toggle: false });\n  }\n\n  unbind() {\n    if (this.checkURL) {\n      this.dispatcher.off(\"newPageReady\", this.checkURL);\n    }\n  }\n\n  routine(el: HTMLElement, url: string) {\n    this.url = url;\n    if (this.checkURL) {\n      this.dispatcher.off(\"newPageReady\", this.checkURL);\n    }\n    this.dispatcher.on(\"newPageReady\", this.checkURL);\n  }\n}\n","import { BasicComponent, ComponentAttributeBinder, View } from \"@ribajs/core\";\nimport { Bs5AbstractBreakpointBinder } from \"./bs5-abstract-breakpoint.binder.js\";\n\n/**\n * Responsive component attribute breakpoint binder\n * This binder is used to pass attributes to an Riba Component (directly) that should only be set at certain breakpoints (viewport widths).\n * @example\n * ```html\n *  <custom-image-component\n *    rv-bs5-co-xxs-src=\"'https://picsum.photos/100'\"\n *    rv-bs5-co-xs-src=\"'https://picsum.photos/200'\"\n *    rv-bs5-co-sm-src=\"'https://picsum.photos/500/200'\"\n *    rv-bs5-co-md-src=\"'https://picsum.photos/1000/500'\"\n *\n *    rv-bs5-co-xxs-alt=\"'Image for very small displays'\"\n *    rv-bs5-co-xs-src=\"'Image for small displays'\"\n *    rv-bs5-co-sm-src=\"'Image for smartphones'\"\n *    rv-bs5-co-md-src=\"'Image for tablets and small laptops'\"\n *  />\n * ```\n */\nexport class Bs5ComponentAttributeBreakpointBinder extends Bs5AbstractBreakpointBinder<BasicComponent> {\n  static key = \"bs5-co-*-*\";\n\n  defaultAttributeBinder: ComponentAttributeBinder;\n\n  constructor(\n    view: View,\n    el: BasicComponent,\n    type: string | null,\n    name: string,\n    keypath: string | undefined,\n    formatters: string[] | null,\n    identifier: string | null\n  ) {\n    super(view, el, type, name, keypath, formatters, identifier);\n    this.defaultAttributeBinder = new ComponentAttributeBinder(\n      view,\n      el,\n      `co-${this.attributeName}`,\n      name,\n      keypath,\n      formatters,\n      ComponentAttributeBinder.key\n    );\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { Collapse } from \"../services/collapse.js\";\n\n/**\n *\n */\nexport class ToggleCollapseOnEventBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-toggle-collapse-on-*\";\n\n  private targets = new Map<HTMLElement, Collapse>();\n\n  private _onEvent(event: Event) {\n    event.preventDefault();\n    for (const collapseService of this.targets.values()) {\n      collapseService.toggle();\n    }\n  }\n\n  private onEvent = this._onEvent.bind(this);\n\n  bind(el: HTMLElement) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    const eventName = this.args[0] as string;\n    el.addEventListener(eventName, this.onEvent);\n  }\n\n  unbind() {\n    const eventName = this.args[0] as string;\n    this.el.removeEventListener(eventName, this.onEvent);\n  }\n\n  routine(el: HTMLElement, targetSelector: string) {\n    const newTargets = Array.from(\n      document.querySelectorAll<HTMLElement>(targetSelector)\n    );\n\n    if (newTargets.length <= 0) {\n      console.warn(\n        `[toggleCollapseOnEventBinder] No element with selector \"${targetSelector}\" found.`\n      );\n    }\n\n    for (const target of this.targets.keys()) {\n      if (!newTargets.find((x) => x === target)) {\n        this.targets.get(target)?.dispose();\n        this.targets.delete(target);\n      }\n    }\n\n    for (const target of newTargets) {\n      if (!this.targets.has(target)) {\n        this.targets.set(target, new Collapse(target, { toggle: false }));\n      }\n    }\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { Dropdown } from \"../services/dropdown.js\";\nimport { Dropdown as BSDropdown } from \"bootstrap\";\n\n/**\n *\n * @see https://getbootstrap.com/docs/5.0/components/dropdowns/#via-javascript\n */\nexport class DropdownBinder extends Binder<\n  Partial<BSDropdown.Options>,\n  HTMLInputElement\n> {\n  static key = \"bs5-dropdown\";\n\n  private toggler?: HTMLButtonElement | HTMLAnchorElement;\n\n  private dropdownService?: Dropdown;\n\n  bind(el: HTMLElement) {\n    this.toggler = ((el.classList.contains(\"dropdown-toggle\")\n      ? el\n      : el.querySelector(\".dropdown-toggle\")) || el) as\n      | HTMLButtonElement\n      | HTMLAnchorElement;\n  }\n\n  routine(el: HTMLElement, option = {}) {\n    if (!this.toggler) {\n      throw new Error(\"No dropdown toggle element found!\");\n    }\n    if (this.dropdownService) {\n      const dropdownService: Dropdown = this.dropdownService;\n      dropdownService.dispose();\n      // To detect this element as an dropdown by the bootstrap logic\n      this.toggler.dataset.bsToggle = \"\";\n    }\n    const dropdownService = new Dropdown(this.toggler, option);\n    // To detect this element as an dropdown by the bootstrap logic\n    this.toggler.dataset.bsToggle = \"dropdown\";\n    this.dropdownService = dropdownService;\n    this.dropdownService.hide();\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Collapse } from \"../services/collapse.js\";\nimport { onRoute } from \"@ribajs/utils/src/url.js\";\n\n/**\n *\n * @see https://getbootstrap.com/docs/4.1/components/collapse/\n * @see https://github.com/twbs/bootstrap/blob/v4-dev/js/src/collapse.js\n */\nexport class ExpandOnUrlBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-expand-on-url\";\n\n  routine(el: HTMLElement, url: string) {\n    const collapseService = new Collapse(el, { toggle: false });\n    const dispatcher = new EventDispatcher(\"main\");\n\n    const checkURL = (urlToCheck?: string) => {\n      if (urlToCheck && onRoute(urlToCheck)) {\n        collapseService.show();\n        return true;\n      }\n      collapseService.hide();\n      return false;\n    };\n\n    dispatcher.on(\"newPageReady\", () => checkURL(url));\n\n    checkURL(url);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { Popover, PopoverOptions } from \"@ribajs/bs5\";\n\n/**\n *\n */\nexport class PopoverBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-popover\";\n\n  private popover?: Popover;\n  private listeners: { [key: string]: EventListener } = {};\n\n  routine(el: HTMLElement, optionsOrContent: string | PopoverOptions) {\n    let options: Partial<PopoverOptions> = {};\n\n    if (typeof optionsOrContent === \"string\") {\n      options.content = optionsOrContent;\n    } else if (typeof optionsOrContent === \"object\") {\n      options = { ...optionsOrContent };\n    }\n    options.placement = options.placement || \"auto\";\n\n    const popover = new Popover(el, {\n      ...Popover.Default,\n      ...options,\n    });\n\n    // destroy previous popover if it already exists\n    if (this.popover) {\n      this.popover.dispose();\n    }\n\n    this.popover = popover;\n\n    /*\n     * Methods \"show\", \"hide\", etc. of the Popover can be called by dispatching an\n     * event `trigger-${methodName}` on the bound element.\n     * All these methods have no arguments.\n     */\n    const methodNames: (keyof typeof popover)[] = [\n      \"show\",\n      \"hide\",\n      \"toggle\",\n      \"dispose\",\n      \"enable\",\n      \"disable\",\n      \"update\", // render update\n    ];\n\n    // remove listeners of previous Popover if there already was one\n    if (this.listeners) {\n      for (const [trigger, listener] of Object.entries(this.listeners)) {\n        this.el.removeEventListener(trigger, listener as EventListener);\n      }\n    }\n\n    this.listeners = Object.create(null);\n    for (const methodName of methodNames) {\n      if (popover[methodName] && typeof popover[methodName] === \"function\") {\n        const trigger = `trigger-${String(methodName)}`;\n        const listener = (popover[methodName] as any).bind(popover);\n        this.el.addEventListener(trigger, listener);\n        this.listeners[trigger] = listener;\n      } else {\n        console.warn(\"Unknown method \" + methodName);\n      }\n    }\n  }\n\n  bind(el: HTMLElement) {\n    // inform ancestors that this popover was bound\n    // Event name in same style as the other popover CustomEvents from Bootstrap\n    el.dispatchEvent(\n      new CustomEvent(\"bound.bs.popover\", { bubbles: true, cancelable: true })\n    );\n  }\n\n  unbind() {\n    // destroy Popover if it already exists\n    if (this.popover) {\n      this.popover.dispose();\n    }\n    // remove listeners if there are any\n    if (this.listeners) {\n      for (const [trigger, listener] of Object.entries(this.listeners)) {\n        this.el.removeEventListener(trigger, listener as EventListener);\n      }\n    }\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { ToastNotification } from \"@ribajs/bs5\";\n\nexport class ShowToastOnEventBinder extends Binder<\n  ToastNotification,\n  HTMLElement\n> {\n  static key = \"show-toast-on-*\";\n\n  private toastData?: ToastNotification;\n\n  private _onEvent(event: CustomEvent) {\n    if (!this.toastData) {\n      throw new Error(\"Toast data not set!\");\n    }\n    this.toastData.$event = event;\n    this.toastData.$context = this.view.models;\n    const toastData: ToastNotification = new ToastNotification(this.toastData);\n    const notificationDispatcher = new EventDispatcher(\n      toastData.channel || \"toast\"\n    );\n    notificationDispatcher.trigger(\"show-notification\", toastData);\n  }\n\n  private onEvent = this._onEvent.bind(this);\n\n  bind(el: HTMLUnknownElement) {\n    const eventName = this.args[0] as string;\n    el.addEventListener(eventName as any, this.onEvent);\n  }\n\n  routine(el: HTMLUnknownElement, toastData: ToastNotification) {\n    if (this.args === null) {\n      throw new Error(\"args is null\");\n    }\n    this.toastData = toastData;\n  }\n\n  unbind(el: HTMLElement) {\n    const eventName = this.args[0] as string;\n    el.removeEventListener(eventName as any, this.onEvent);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { debounce } from \"@ribajs/utils/src/control\";\nimport { isInViewport } from \"@ribajs/utils/src/dom.js\";\n\n/**\n * scrollspy-class\n * @see https://getbootstrap.com/docs/4.1/components/scrollspy/\n */\nexport class ScrollspyClassBinder extends Binder<string, HTMLInputElement> {\n  static key = \"bs5-scrollspy-*\";\n\n  private target?: HTMLElement;\n  private className?: string;\n\n  private _onScroll() {\n    if (!this.target) {\n      throw new Error(\"No target element found!\");\n    }\n\n    if (!this.className) {\n      throw new Error(\"className not set!\");\n    }\n\n    if (this.isInViewport(this.target)) {\n      this.el.classList.add(this.className);\n      if (this.el.type === \"radio\") {\n        this.el.checked = true;\n      }\n    } else {\n      this.el.classList.remove(this.className);\n      if (this.el.type === \"radio\") {\n        this.el.checked = false;\n      }\n    }\n  }\n\n  private onScroll = debounce(this._onScroll.bind(this));\n\n  /**\n   * Determine if an element is in the viewport\n   * @param elem The element\n   * @return Returns true if element is in the viewport\n   */\n  private _isInViewport(elem: Element) {\n    if (!elem) {\n      return false;\n    }\n    const offsetTop = Number(this.el.dataset.offset || 0);\n    const offsetBottom = Number(this.el.dataset.offsetBottom || 0);\n    return isInViewport(elem, { top: offsetTop, bottom: offsetBottom });\n  }\n\n  private isInViewport = this._isInViewport.bind(this);\n\n  bind() {\n    window.addEventListener(\"scroll\", this.onScroll, {\n      passive: true,\n    });\n    this.onScroll();\n  }\n\n  routine(el: HTMLElement, targetSelector: string) {\n    const nativeIDTargetSelector = targetSelector.replace(\"#\", \"\");\n    this.target = document.getElementById(nativeIDTargetSelector) || undefined;\n    this.className = this.args[0] as string;\n  }\n\n  unbind() {\n    window.removeEventListener(\"scroll\", this.onScroll);\n  }\n}\n","import { createPopper, Options } from \"@popperjs/core\";\nimport { Binder } from \"@ribajs/core\";\n\nconst template = document.createElement(\"div\");\ntemplate.classList.add(\"tooltip\");\ntemplate.setAttribute(\"role\", \"tooltip\");\n\nconst arrow = document.createElement(\"div\");\narrow.classList.add(\"arrow\");\ntemplate.appendChild(arrow);\n\nconst inner = document.createElement(\"div\");\ninner.classList.add(\"tooltip-inner\");\ntemplate.appendChild(inner);\n\n/**\n *\n */\nexport class TooltipBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-tooltip\";\n\n  private popper?: ReturnType<typeof createPopper>;\n\n  private tip = template.cloneNode(true) as HTMLElement;\n\n  private _show() {\n    const placement: Options[\"placement\"] = (this.el.dataset.placement ||\n      \"start\") as Options[\"placement\"];\n\n    const offset = 0;\n    this.popper = createPopper(this.el, this.tip, {\n      placement,\n      modifiers: [\n        {\n          name: \"flip\",\n          options: {\n            altBoundary: true,\n            // fallbackPlacements: this.config.fallbackPlacements\n            behavior: \"flip\",\n          },\n        },\n        {\n          name: \"offset\",\n          options: {\n            offset: offset,\n          },\n        },\n        {\n          name: \"arrow\",\n          options: {\n            element: `.arrow`,\n          },\n        },\n        {\n          name: \"preventOverflow\",\n          options: {\n            boundariesElement: \"scrollParent\",\n          },\n        },\n      ],\n      strategy: undefined,\n    });\n    document.body.appendChild(this.tip);\n    this.tip.classList.add(\"show\");\n    this.tip.classList.add(\"bs-tooltip-\" + placement);\n  }\n\n  private show = this._show.bind(this);\n\n  private _hide() {\n    this.tip.classList.remove(\"show\");\n    if (this.popper) {\n      this.popper.destroy();\n    }\n  }\n\n  private hide = this._hide.bind(this);\n\n  bind(el: HTMLUnknownElement) {\n    el.addEventListener(\"mouseenter\", this.show);\n    el.addEventListener(\"mouseleave\", this.hide);\n  }\n\n  routine(el: HTMLElement, text: string) {\n    const innerEl = this.tip.querySelector(\".tooltip-inner\") as HTMLDivElement;\n    innerEl.innerHTML = text;\n  }\n\n  unbind() {\n    this.hide();\n    this.el.removeEventListener(\"mouseenter\", this.show);\n    this.el.removeEventListener(\"mouseleave\", this.hide);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { scrollTo } from \"@ribajs/utils/src/dom.js\";\n\nexport class ScrollToOnEventBinder extends Binder<string, HTMLElement> {\n  static key = \"scroll-to-on-*\";\n\n  private target?: HTMLElement;\n\n  private _onEvent(event: Event) {\n    const offset = Number(this.el.dataset.offset || 0);\n    const scrollElement = this.el.dataset.scrollElement\n      ? document.querySelector<HTMLElement>(this.el.dataset.scrollElement)\n      : window;\n    if (this.target) {\n      scrollTo(this.target, offset, scrollElement);\n      event.preventDefault();\n    }\n  }\n\n  private onEvent = this._onEvent.bind(this);\n\n  bind(el: HTMLUnknownElement) {\n    this.onEvent = this.onEvent.bind(this);\n    const eventName = this.args[0] as string;\n    el.addEventListener(eventName, this.onEvent);\n  }\n\n  routine(el: HTMLUnknownElement, targetSelector: string) {\n    this.target =\n      document.querySelector<HTMLElement>(targetSelector) || undefined;\n  }\n\n  unbind(el: HTMLElement) {\n    const eventName = this.args[0] as string;\n    el.removeEventListener(eventName, this.onEvent);\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { TOGGLE_BUTTON, TOGGLE_ATTRIBUTE } from \"../constants/index.js\";\n\n/**\n * Adds / removes the attribute on click on the bs5-toggle-button with the same id\n * E.g. with this binder you can toggle a hidden attribute to show / hide the element\n * Events\n * * `off`\n * * `on`\n */\nexport class ToggleAttributeBinder extends Binder<string, HTMLElement> {\n  static key = \"bs5-toggle-attribute-*\";\n\n  private toggleButtonEvents?: EventDispatcher;\n  private state = \"off\";\n\n  private _triggerState() {\n    this.toggleButtonEvents?.trigger(\n      TOGGLE_BUTTON.eventNames.state,\n      this.state\n    );\n  }\n\n  private triggerState = this._triggerState.bind(this);\n\n  private _onToggle() {\n    this.toggle.bind(this)(this.el);\n  }\n\n  private onToggle = this._onToggle.bind(this);\n\n  private toggle(el: HTMLElement) {\n    if (this.state === \"removed\") {\n      this.add.bind(this)(el);\n    } else {\n      this.remove.bind(this)(el);\n    }\n  }\n\n  private remove(el: HTMLElement) {\n    const attributeName = this.args[0] as string;\n    el.removeAttribute(attributeName);\n    this.state = \"removed\";\n    el.dispatchEvent(\n      new CustomEvent(TOGGLE_ATTRIBUTE.elEventNames.removed, {\n        detail: { attributeName },\n      })\n    );\n    this.triggerState();\n  }\n\n  private add(el: HTMLElement) {\n    const attributeName = this.args[0] as string;\n\n    el.setAttribute(attributeName, attributeName);\n    this.state = \"added\";\n    el.dispatchEvent(\n      new CustomEvent(TOGGLE_ATTRIBUTE.elEventNames.added, {\n        detail: { attributeName },\n      })\n    );\n    this.triggerState();\n  }\n\n  bind(el: HTMLElement) {\n    const attributeName = this.args[0] as string;\n    this.state = el.hasAttribute(attributeName) ? \"added\" : \"removed\";\n  }\n\n  unbind() {\n    this.toggleButtonEvents?.off(\n      TOGGLE_BUTTON.eventNames.toggle,\n      this.onToggle,\n      this\n    );\n    this.toggleButtonEvents?.off(\n      TOGGLE_BUTTON.eventNames.init,\n      this.triggerState,\n      this\n    );\n  }\n\n  routine(el: HTMLElement, newId: string) {\n    const oldId = this._getValue(el);\n    let toggleButton = this.toggleButtonEvents;\n    if (oldId && toggleButton) {\n      toggleButton.off(TOGGLE_BUTTON.eventNames.toggle, this.onToggle, this);\n      toggleButton.off(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n\n    if (!this.toggleButtonEvents) {\n      this.toggleButtonEvents = new EventDispatcher(\n        TOGGLE_BUTTON.nsPrefix + newId\n      );\n      toggleButton = this.toggleButtonEvents as EventDispatcher;\n      toggleButton.on(TOGGLE_BUTTON.eventNames.toggle, this.onToggle, this);\n      toggleButton.on(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n  }\n}\n","import { Binder } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { TOGGLE_BUTTON, TOGGLE_CLASS } from \"../constants/index.js\";\n\n/**\n * Adds / removes the class on click on the bs5-toggle-button with the same id\n *\n * Events\n * * `off`\n * * `on`\n */\nexport class ToggleClassBinder extends Binder<string, HTMLButtonElement> {\n  static key = \"bs5-toggle-class-*\";\n\n  private toggleButtonEvents?: EventDispatcher;\n  private state = \"off\";\n\n  private _triggerState() {\n    this.toggleButtonEvents?.trigger(\n      TOGGLE_BUTTON.eventNames.state,\n      this.state\n    );\n  }\n\n  private triggerState = this._triggerState.bind(this);\n\n  private _onToggle() {\n    this.toggle.bind(this)(this.el);\n  }\n\n  private onToggle = this._onToggle.bind(this);\n\n  private toggle(el: HTMLButtonElement) {\n    if (this.state === \"removed\") {\n      this.add.bind(this)(el);\n    } else {\n      this.remove.bind(this)(el);\n    }\n  }\n\n  private remove(el: HTMLButtonElement) {\n    const className = this.args[0] as string;\n    el.classList.remove(className);\n    this.state = \"removed\";\n    el.dispatchEvent(\n      new CustomEvent(TOGGLE_CLASS.elEventNames.removed, {\n        detail: { className },\n      })\n    );\n    this.triggerState();\n  }\n\n  private add(el: HTMLButtonElement) {\n    const className = this.args[0] as string;\n\n    el.classList.add(className, className);\n    this.state = \"added\";\n    el.dispatchEvent(\n      new CustomEvent(TOGGLE_CLASS.elEventNames.added, {\n        detail: { className },\n      })\n    );\n    this.triggerState();\n  }\n\n  bind(el: HTMLButtonElement) {\n    const className = this.args[0] as string;\n    this.state = el.classList.contains(className) ? \"added\" : \"removed\";\n  }\n\n  unbind() {\n    this.toggleButtonEvents?.off(\n      TOGGLE_BUTTON.eventNames.toggle,\n      this.onToggle,\n      this\n    );\n    this.toggleButtonEvents?.off(\n      TOGGLE_BUTTON.eventNames.init,\n      this.triggerState,\n      this\n    );\n  }\n\n  routine(el: HTMLButtonElement, newId: string) {\n    const oldId = this._getValue(el);\n    let toggleButton = this.toggleButtonEvents;\n    if (oldId && toggleButton) {\n      toggleButton.off(TOGGLE_BUTTON.eventNames.toggle, this.onToggle, this);\n      toggleButton.off(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n\n    if (!this.toggleButtonEvents) {\n      this.toggleButtonEvents = new EventDispatcher(\n        TOGGLE_BUTTON.nsPrefix + newId\n      );\n      toggleButton = this.toggleButtonEvents as EventDispatcher;\n      toggleButton.on(TOGGLE_BUTTON.eventNames.toggle, this.onToggle, this);\n      toggleButton.on(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n  }\n}\n","import {\n  handleizeFormatter,\n  FormatterFn,\n  TemplatesComponent,\n  ScopeBase,\n} from \"@ribajs/core\";\nimport { Collapse } from \"../../services/collapse.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport {\n  JsxBs5AccordionProps,\n  CollapseEvents,\n  AccordionItem,\n} from \"../../types/index.js\";\n\nconst handleize = handleizeFormatter.read as FormatterFn;\n\ninterface Scope extends ScopeBase {\n  items: AccordionItem[];\n  toggle: Bs5AccordionComponent[\"toggle\"];\n  show: Bs5AccordionComponent[\"show\"];\n  hide: Bs5AccordionComponent[\"hide\"];\n  collapseIconSrc?: string;\n  collapseIconSize: number;\n  showOnlyOne: boolean;\n}\n\nexport class Bs5AccordionComponent extends TemplatesComponent {\n  public static tagName = \"bs5-accordion\";\n\n  protected autobind = true;\n\n  protected templateAttributes = [\n    {\n      name: \"title\",\n      required: true,\n    },\n    {\n      name: \"show\",\n      required: false,\n    },\n    {\n      name: \"icon-direction\",\n      required: false,\n    },\n  ];\n\n  // protected collapseServices: Collapse[] = [];\n\n  static get observedAttributes(): (keyof JsxBs5AccordionProps)[] {\n    return [\n      \"items\",\n      \"collapse-icon-src\",\n      \"collapse-icon-size\",\n      \"show-only-one\",\n    ];\n  }\n\n  public scope: Scope = {\n    items: [],\n    toggle: this.toggle,\n    show: this.show,\n    hide: this.hide,\n    collapseIconSize: 16,\n    showOnlyOne: true,\n  };\n\n  constructor() {\n    super();\n  }\n\n  public hide(item: AccordionItem, index: number) {\n    const target = this.querySelector<HTMLElement>(`[data-index=\"${index}\"]`);\n    if (target) {\n      this.initItemEventListeners(item, target);\n      new Collapse(target, { toggle: false }).hide();\n    }\n  }\n\n  public show(item: AccordionItem, index: number) {\n    const target = this.querySelector<HTMLElement>(`[data-index=\"${index}\"]`);\n    const others = Array.from(\n      this.querySelectorAll<HTMLElement>(\n        `[data-index]:not([data-index=\"${index}\"])`\n      )\n    );\n    if (others && this.scope.showOnlyOne) {\n      for (const other of others) {\n        new Collapse(other, { toggle: false }).hide();\n      }\n    }\n    if (target) {\n      this.initItemEventListeners(item, target);\n      new Collapse(target, { toggle: false }).show();\n    }\n  }\n\n  public toggle(item: AccordionItem, index: number) {\n    const target = this.querySelector<HTMLElement>(`[data-index=\"${index}\"]`);\n    const others = Array.from(\n      this.querySelectorAll<HTMLElement>(\n        `[data-index]:not([data-index=\"${index}\"])`\n      )\n    );\n    if (others && this.scope.showOnlyOne) {\n      for (const other of others) {\n        new Collapse(other, { toggle: false }).hide();\n      }\n    }\n    if (target) {\n      this.initItemEventListeners(item, target);\n      new Collapse(target, { toggle: false }).toggle();\n    }\n  }\n\n  protected initItemEventListeners(item: AccordionItem, element: HTMLElement) {\n    element.removeEventListener(\n      CollapseEvents.hide,\n      this.onHide.bind(this, element, item)\n    );\n    element.removeEventListener(\n      CollapseEvents.show,\n      this.onShow.bind(this, element, item)\n    );\n    element.addEventListener(\n      CollapseEvents.hide,\n      this.onHide.bind(this, element, item),\n      { once: true }\n    );\n    element.addEventListener(\n      CollapseEvents.show,\n      this.onShow.bind(this, element, item),\n      { once: true }\n    );\n  }\n\n  protected getContentChildByIndex() {\n    return this.querySelector(`.card-body > *`) || undefined;\n  }\n\n  protected onShow(element: HTMLElement, item: AccordionItem) {\n    item.show = true;\n    item.iconDirection = \"up\";\n    const firstContentChild = this.getContentChildByIndex();\n    if (firstContentChild) {\n      this.triggerVisibilityChangedForElement(firstContentChild, item.show);\n    }\n  }\n\n  protected onHide(element: HTMLElement, item: AccordionItem) {\n    item.show = false;\n    item.iconDirection = \"down\";\n    const firstContentChild = this.getContentChildByIndex();\n    if (firstContentChild) {\n      this.triggerVisibilityChangedForElement(firstContentChild, item.show);\n    }\n  }\n\n  protected transformTemplateAttributes(attributes: any) {\n    attributes.handle = attributes.handle || handleize(attributes.title);\n    attributes.show = !!attributes.show;\n    attributes.iconDirection =\n      attributes.iconDirection || attributes.show ? \"up\" : \"down\";\n\n    return attributes;\n  }\n\n  /**\n   * Trigger `visibility-changed` for components that need to update if visibility changes.\n   * Se also bsf-tabs\n   * @param element\n   * @param visible\n   */\n  protected triggerVisibilityChangedForElement(\n    element: Element,\n    visible: boolean\n  ) {\n    setTimeout(() => {\n      // Use this event to update any custom element when it becomes visible\n      element.dispatchEvent(\n        new CustomEvent(\"visibility-changed\", { detail: { visible } })\n      );\n    }, 200);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5AccordionComponent.observedAttributes);\n  }\n\n  protected async init(observedAttributes: string[]) {\n    return super.init(observedAttributes).then((view) => {\n      return view;\n    });\n  }\n\n  protected async beforeBind() {\n    return await super.beforeBind();\n  }\n\n  protected async afterBind() {\n    return await super.afterBind();\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  protected async template() {\n    // Only set the component template if there no childs or the childs are templates\n    if (!hasChildNodesTrim(this) || this.hasOnlyTemplateChilds()) {\n      const { default: template } = await import(\n        \"./bs5-accordion.component.html?raw\"\n      );\n      return template;\n    } else {\n      return null;\n    }\n  }\n}\n","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\n\ninterface Scope extends ScopeBase {\n  animationClass: string;\n  onClick: Bs5ButtonComponent[\"onClick\"];\n}\n\nexport class Bs5ButtonComponent extends Component {\n  public static tagName = \"bs5-button\";\n\n  protected autobind = true;\n\n  static get observedAttributes(): string[] {\n    return [\"animation-class\"];\n  }\n\n  public scope: Scope = {\n    animationClass: \"btn-animation-start\",\n    onClick: this.onClick.bind(this),\n  };\n\n  constructor() {\n    super();\n  }\n\n  public onClick() {\n    this.startAnimation();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ButtonComponent.observedAttributes);\n  }\n\n  protected startAnimation() {\n    this.classList.add(this.scope.animationClass);\n  }\n\n  protected onStartAnimation() {\n    //\n  }\n\n  protected onEndAnimation() {\n    setTimeout(() => {\n      this.classList.remove(this.scope.animationClass);\n    });\n  }\n\n  protected async init(observedAttributes: string[]) {\n    return super.init(observedAttributes).then((view) => {\n      this.onStartAnimation = this.onStartAnimation.bind(this);\n      this.addEventListener(\n        \"webkitAnimationStart\" as \"animationstart\",\n        this.onStartAnimation\n      );\n      this.addEventListener(\"animationstart\", this.onStartAnimation);\n      this.onEndAnimation = this.onEndAnimation.bind(this);\n      this.addEventListener(\n        \"webkitAnimationEnd\" as \"animationend\",\n        this.onEndAnimation\n      );\n      this.addEventListener(\"animationend\", this.onEndAnimation);\n      this.addEventListener(\"click\", this.scope.onClick);\n      return view;\n    });\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener(\n      \"webkitAnimationStart\" as \"animationstart\",\n      this.onStartAnimation\n    );\n    this.removeEventListener(\"animationstart\", this.onStartAnimation);\n    this.removeEventListener(\n      \"webkitAnimationEnd\" as \"animationend\",\n      this.onEndAnimation\n    );\n    this.removeEventListener(\"animationend\", this.onEndAnimation);\n    this.removeEventListener(\"click\", this.scope.onClick);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { Carousel } from \"../../services/carousel.js\";\nimport { CarouselOptions } from \"../../types/index.js\";\n\nexport interface Scope extends ScopeBase {\n  // Properties\n  interval: CarouselOptions[\"interval\"];\n  keyboard: CarouselOptions[\"keyboard\"];\n  pause: CarouselOptions[\"pause\"];\n  wrap: CarouselOptions[\"wrap\"];\n  touch: CarouselOptions[\"touch\"];\n  fade: boolean;\n  // Methods\n  next: Bs5CarouselComponent[\"next\"];\n  nextWhenVisible: Bs5CarouselComponent[\"nextWhenVisible\"];\n  prev: Bs5CarouselComponent[\"prev\"];\n  startPause: Bs5CarouselComponent[\"pause\"];\n  cycle: Bs5CarouselComponent[\"cycle\"];\n  to: Bs5CarouselComponent[\"to\"];\n  dispose: Bs5CarouselComponent[\"dispose\"];\n}\n\nexport class Bs5CarouselComponent extends Component {\n  public static tagName = \"bs5-carousel\";\n\n  static get observedAttributes(): string[] {\n    return [\"interval\", \"keyboard\", \"pause\", \"wrap\", \"touch\", \"fade\"];\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  public scope: Scope = {\n    // Properties\n    interval: Carousel.Default.interval,\n    keyboard: Carousel.Default.keyboard,\n    pause: Carousel.Default.pause || false, // changed from pause to pause\n    wrap: Carousel.Default.wrap,\n    touch: Carousel.Default.touch,\n    fade: false,\n    // Methods\n    next: this.next,\n    nextWhenVisible: this.nextWhenVisible,\n    prev: this.prev,\n    startPause: this.pause,\n    cycle: this.cycle,\n    to: this.to,\n    dispose: this.dispose,\n  };\n\n  protected autobind = true;\n\n  protected carouselService?: Carousel;\n\n  constructor() {\n    super();\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.classList.add(\"carousel\", \"slide\");\n  }\n\n  protected async afterBind() {\n    this.carouselService = new Carousel(this, {\n      interval: this.scope.interval,\n      keyboard: this.scope.keyboard,\n      pause: this.scope.pause,\n      wrap: this.scope.wrap,\n      touch: this.scope.touch,\n    });\n    if (this.scope.fade) {\n      this.classList.add(\"carousel-fade\");\n    }\n    // TODO make this configurable?\n    this.carouselService.cycle();\n    await super.afterBind();\n  }\n\n  public next() {\n    if (this.carouselService) {\n      this.carouselService.next();\n    }\n  }\n\n  public nextWhenVisible() {\n    if (this.carouselService) {\n      this.carouselService.nextWhenVisible();\n    }\n  }\n\n  public prev() {\n    if (this.carouselService) {\n      this.carouselService.prev();\n    }\n  }\n\n  public pause() {\n    if (this.carouselService) {\n      this.carouselService.pause();\n    }\n  }\n\n  public cycle() {\n    if (this.carouselService) {\n      this.carouselService.cycle();\n    }\n  }\n\n  public to() {\n    if (this.carouselService) {\n      throw new Error(\"TODO\");\n      // this.carouselService.to(index);\n    }\n  }\n\n  public dispose() {\n    if (this.carouselService) {\n      this.carouselService.dispose();\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    super.init(Bs5CarouselComponent.observedAttributes);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { Collapse } from \"../../services/collapse.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { JsxBs5CollapseProps, CollapseEvents } from \"../../types/index.js\";\n\ninterface Scope {\n  title: string;\n  content: string;\n  collapsed: boolean;\n  toggle: Bs5CollapseComponent[\"toggle\"];\n  show: Bs5CollapseComponent[\"show\"];\n  hide: Bs5CollapseComponent[\"hide\"];\n  collapseEl?: HTMLUnknownElement;\n}\n\nexport class Bs5CollapseComponent extends Component {\n  public static tagName = \"bs5-collapse\";\n\n  protected autobind = true;\n\n  protected collapse?: Collapse;\n\n  static get observedAttributes(): (keyof JsxBs5CollapseProps)[] {\n    return [\"title\", \"content\", \"collapsed\"];\n  }\n\n  protected requiredAttributes(): (keyof JsxBs5CollapseProps)[] {\n    return [\"title\"];\n  }\n\n  public scope: Scope = {\n    title: \"\",\n    content:\n      \"Please set the content of the collapse using the content attribute or just by set the content as the child of this element\",\n    collapsed: true,\n    toggle: this.toggle,\n    show: this.show,\n    hide: this.hide,\n  };\n\n  constructor() {\n    super();\n  }\n\n  public hide() {\n    console.debug(\"hide\");\n    if (this.collapse) {\n      this.scope.collapsed = true;\n      this.collapse.hide();\n    }\n  }\n\n  public show() {\n    if (this.collapse) {\n      this.scope.collapsed = false;\n      this.collapse.show();\n    }\n  }\n\n  public toggle() {\n    if (this.collapse) {\n      this.collapse.toggle();\n      this.scope.collapsed = !!this.scope.collapsed;\n    }\n  }\n\n  protected addEventListeners() {\n    if (this.scope.collapseEl) {\n      this.scope.collapseEl.addEventListener(\n        CollapseEvents.hide,\n        this.onHide.bind(this)\n      );\n      this.scope.collapseEl.addEventListener(\n        CollapseEvents.show,\n        this.onShow.bind(this)\n      );\n    }\n  }\n\n  protected removeEventListeners() {\n    if (this.scope.collapseEl) {\n      this.scope.collapseEl.removeEventListener(\n        CollapseEvents.hide,\n        this.onHide.bind(this)\n      );\n      this.scope.collapseEl.removeEventListener(\n        CollapseEvents.show,\n        this.onShow.bind(this)\n      );\n    }\n  }\n\n  protected onShow() {\n    console.debug(\"onShow\");\n    this.scope.collapsed = false;\n    this.triggerVisibilityChangedForElement(!this.scope.collapsed);\n  }\n\n  protected onHide() {\n    console.debug(\"onShow\");\n    this.scope.collapsed = true;\n    this.triggerVisibilityChangedForElement(!this.scope.collapsed);\n  }\n\n  /**\n   * Trigger `visibility-changed` for components that need to update if visibility changes.\n   * Se also bsf-tabs\n   * @param visible\n   */\n  protected triggerVisibilityChangedForElement(visible: boolean) {\n    setTimeout(() => {\n      const event = new CustomEvent(\"visibility-changed\", {\n        detail: { visible },\n      });\n\n      // Use this event to update any custom element when it becomes visible\n      this.dispatchEvent(event);\n\n      if (this.scope.collapseEl) {\n        this.scope.collapseEl.dispatchEvent(event);\n      }\n    }, 200);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5CollapseComponent.observedAttributes);\n  }\n\n  protected async afterBind() {\n    console.debug(\"afterBind\", this.scope.collapsed);\n    this.scope.collapseEl = this.querySelector(\".collapse\") || undefined;\n    // this.addEventListeners(); TODO: Fixme calls onShow every time\n    if (!this.scope.collapseEl) {\n      throw new Error(\"No collapse element found!\");\n    }\n    this.collapse = new Collapse(this.scope.collapseEl, {\n      toggle: !this.scope.collapsed,\n    });\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (hasChildNodesTrim(this)) {\n      this.scope.content = this.innerHTML;\n    }\n\n    return (\n      <div>\n        <button\n          rv-on-click=\"toggle\"\n          class=\"btn btn-primary\"\n          type=\"button\"\n          aria-expanded=\"false\"\n          rv-aria-controls=\"title | handleize\"\n          rv-text=\"title\"\n        ></button>\n        <div class=\"collapse mt-2\" rv-id=\"title\">\n          <div class=\"card card-body\" rv-template=\"content\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*global String*/\n/*global atob*/\nString.prototype.startsWith = (String.prototype.startsWith || function(needle)   { return (this.indexOf(needle) === 0); });\nString.prototype.padStart   = (String.prototype.padStart   || function(len, pad) { let str = this; while(str.length < len) { str = pad + str; }; return str; });\n\n\n/*\n    Code golfing:\n    This is a compacted list of all 148 CSS color names (from https://github.com/bahamas10/css-color-names/blob/master/css-color-names.json).\n    Every seven characters in this array is a name and its RGB value.\n\n        //3 chars name hash (rudimentary, but just enough to separate all unique colors),\n        //based on https://stackoverflow.com/a/15710692/1869660\n        hash = [].reduce.call(name.replace('ey','ay'), (h, c) => (h << 2) + c.charCodeAt(0), 0)\n                            .toString(36).slice(-3);\n\n        //4 chars base64 color value. Split the hex into [R, G, B], cast to bytes and base64-encode the byte array:\n        hex64 = btoa( hex.match(/../g).map(x => String.fromCharCode(parseInt(x, 16))).join('') );\n\nconst colorNames = '735AACA770//Xub218Pj/mo5+uvX6mdAP//gtpf//Ur258P//q1d9fXcxop/+TEq9zAAAAqfg/+vN6m1AAD/ngoiiviqt6pSoqzyo3riHxvdX56grk1f/8Aax10mkeqts/39QxbtZJXttkb//jcyxm3BQ86rmAP//wl5AACLwqqAIuL3y8uIYLwv1qampniqAGQAns5vbdrmohiwCLw5uVWsvsdd/4wAsegmTLMqagiwAAsqi6ZZ6uz6j7yPxtzSD2Lxk3L09PudbAM7RwsolADT0kz/xSTfuhAL//vfhaWlpyuxHpD/43rsiIiwn9//rw39uIosi9bp/wD/6w73Nzc9s5+Pj/6v8/9cA3b42qUg6vxgICArmaAIAAtdfrf8vf9n8P/wek3/2m0xnczVxc3bvSwCCsdt///wrvp8OaMs5i5ub6iyk//D1e8ifPwAoui//rNpyxrdjmw9c8ICAq4i4P//mx9+vrSq8t09PTx1ukO6Qqlv/7bBuuy/6B690uILKqpfdh876sd9d4iZnehsMTe0dv///g71lAP8A4nmMs0ys9u+vDmg9d/wD/4pmgAAAcurZs2qzllAADN4lkulXT6txk3Db66qPLNxozre2juokuAPqalj3SNHMgdkxxWF60pGRlwxfl9f/6hr5/+Thx6q/+S1m85/96tutd/fXmszxgIAAe4ma44j8rl/6UAmu0/0UA8so2nDWji87uiqumqmPuY9xbr+7u4rs23CTsb8/+/V95a/9q577xzYU/78z/8DL7b53aDdsu1sODmb11gACAy5nZjOZ1so/wAAlvevI+Pn09QWnhm7ui0UT94q+oBy7ei9KRg5aqLotXad5oFItasmwMDAaihh87r9fdalrN9p9cICQ7gz//r6k5uAP9/4qhRoK01te0rSM7cwAICA91x2L/Yclr/2NHcw1QODQd6w7oLuua09d6zudh////t359fX1enn//8Ao0ims0y';\nlet  colorNamesDeser;\n*/\n\n//https://github.com/bahamas10/css-color-names/blob/master/css-color-names.json\n//  const colorNames = { aliceblue:'#f0f8ff', antiquewhite:'#faebd7', aqua:'#00ffff', aquamarine:'#7fffd4', azure:'#f0ffff', beige:'#f5f5dc', bisque:'#ffe4c4', black:'#000000', blanchedalmond:'#ffebcd', blue:'#0000ff', blueviolet:'#8a2be2', brown:'#a52a2a', burlywood:'#deb887', cadetblue:'#5f9ea0', chartreuse:'#7fff00', chocolate:'#d2691e', coral:'#ff7f50', cornflowerblue:'#6495ed', cornsilk:'#fff8dc', crimson:'#dc143c', cyan:'#00ffff', darkblue:'#00008b', darkcyan:'#008b8b', darkgoldenrod:'#b8860b', darkgray:'#a9a9a9', darkgreen:'#006400', darkgrey:'#a9a9a9', darkkhaki:'#bdb76b', darkmagenta:'#8b008b', darkolivegreen:'#556b2f', darkorange:'#ff8c00', darkorchid:'#9932cc', darkred:'#8b0000', darksalmon:'#e9967a', darkseagreen:'#8fbc8f', darkslateblue:'#483d8b', darkslategray:'#2f4f4f', darkslategrey:'#2f4f4f', darkturquoise:'#00ced1', darkviolet:'#9400d3', deeppink:'#ff1493', deepskyblue:'#00bfff', dimgray:'#696969', dimgrey:'#696969', dodgerblue:'#1e90ff', firebrick:'#b22222', floralwhite:'#fffaf0', forestgreen:'#228b22', fuchsia:'#ff00ff', gainsboro:'#dcdcdc', ghostwhite:'#f8f8ff', gold:'#ffd700', goldenrod:'#daa520', gray:'#808080', green:'#008000', greenyellow:'#adff2f', grey:'#808080', honeydew:'#f0fff0', hotpink:'#ff69b4', indianred:'#cd5c5c', indigo:'#4b0082', ivory:'#fffff0', khaki:'#f0e68c', lavender:'#e6e6fa', lavenderblush:'#fff0f5', lawngreen:'#7cfc00', lemonchiffon:'#fffacd', lightblue:'#add8e6', lightcoral:'#f08080', lightcyan:'#e0ffff', lightgoldenrodyellow:'#fafad2', lightgray:'#d3d3d3', lightgreen:'#90ee90', lightgrey:'#d3d3d3', lightpink:'#ffb6c1', lightsalmon:'#ffa07a', lightseagreen:'#20b2aa', lightskyblue:'#87cefa', lightslategray:'#778899', lightslategrey:'#778899', lightsteelblue:'#b0c4de', lightyellow:'#ffffe0', lime:'#00ff00', limegreen:'#32cd32', linen:'#faf0e6', magenta:'#ff00ff', maroon:'#800000', mediumaquamarine:'#66cdaa', mediumblue:'#0000cd', mediumorchid:'#ba55d3', mediumpurple:'#9370db', mediumseagreen:'#3cb371', mediumslateblue:'#7b68ee', mediumspringgreen:'#00fa9a', mediumturquoise:'#48d1cc', mediumvioletred:'#c71585', midnightblue:'#191970', mintcream:'#f5fffa', mistyrose:'#ffe4e1', moccasin:'#ffe4b5', navajowhite:'#ffdead', navy:'#000080', oldlace:'#fdf5e6', olive:'#808000', olivedrab:'#6b8e23', orange:'#ffa500', orangered:'#ff4500', orchid:'#da70d6', palegoldenrod:'#eee8aa', palegreen:'#98fb98', paleturquoise:'#afeeee', palevioletred:'#db7093', papayawhip:'#ffefd5', peachpuff:'#ffdab9', peru:'#cd853f', pink:'#ffc0cb', plum:'#dda0dd', powderblue:'#b0e0e6', purple:'#800080', rebeccapurple:'#663399', red:'#ff0000', rosybrown:'#bc8f8f', royalblue:'#4169e1', saddlebrown:'#8b4513', salmon:'#fa8072', sandybrown:'#f4a460', seagreen:'#2e8b57', seashell:'#fff5ee', sienna:'#a0522d', silver:'#c0c0c0', skyblue:'#87ceeb', slateblue:'#6a5acd', slategray:'#708090', slategrey:'#708090', snow:'#fffafa', springgreen:'#00ff7f', steelblue:'#4682b4', tan:'#d2b48c', teal:'#008080', thistle:'#d8bfd8', tomato:'#ff6347', turquoise:'#40e0d0', violet:'#ee82ee', wheat:'#f5deb3', white:'#ffffff', whitesmoke:'#f5f5f5', yellow:'#ffff00', yellowgreen:'#9acd32' };\n//\n//More golfing, just because.. Simple hashing of the names - see nameToRgb()\nconst colorNames = {cb:'0f8ff',tqw:'aebd7',q:'-ffff',qmrn:'7fffd4',zr:'0ffff',bg:'5f5dc',bsq:'e4c4',bck:'---',nch:'ebcd',b:'--ff',bvt:'8a2be2',brwn:'a52a2a',brw:'deb887',ctb:'5f9ea0',hrt:'7fff-',chcT:'d2691e',cr:'7f50',rnw:'6495ed',crns:'8dc',crms:'dc143c',cn:'-ffff',Db:'--8b',Dcn:'-8b8b',Dgnr:'b8860b',Dgr:'a9a9a9',Dgrn:'-64-',Dkhk:'bdb76b',Dmgn:'8b-8b',Dvgr:'556b2f',Drng:'8c-',Drch:'9932cc',Dr:'8b--',Dsmn:'e9967a',Dsgr:'8fbc8f',DsTb:'483d8b',DsTg:'2f4f4f',Dtrq:'-ced1',Dvt:'94-d3',ppnk:'1493',pskb:'-bfff',mgr:'696969',grb:'1e90ff',rbrc:'b22222',rwht:'af0',stg:'228b22',chs:'-ff',gnsb:'dcdcdc',st:'8f8ff',g:'d7-',gnr:'daa520',gr:'808080',grn:'-8-0',grnw:'adff2f',hnw:'0fff0',htpn:'69b4',nnr:'cd5c5c',ng:'4b-82',vr:'0',khk:'0e68c',vnr:'e6e6fa',nrb:'0f5',wngr:'7cfc-',mnch:'acd',Lb:'add8e6',Lcr:'08080',Lcn:'e0ffff',Lgnr:'afad2',Lgr:'d3d3d3',Lgrn:'90ee90',Lpnk:'b6c1',Lsmn:'a07a',Lsgr:'20b2aa',Lskb:'87cefa',LsTg:'778899',Lstb:'b0c4de',Lw:'e0',m:'-ff-',mgrn:'32cd32',nn:'af0e6',mgnt:'-ff',mrn:'8--0',mqm:'66cdaa',mmb:'--cd',mmrc:'ba55d3',mmpr:'9370db',msg:'3cb371',mmsT:'7b68ee','':'-fa9a',mtr:'48d1cc',mmvt:'c71585',mnLb:'191970',ntc:'5fffa',mstr:'e4e1',mccs:'e4b5',vjw:'dead',nv:'--80',c:'df5e6',v:'808-0',vrb:'6b8e23',rng:'a5-',rngr:'45-',rch:'da70d6',pgnr:'eee8aa',pgrn:'98fb98',ptrq:'afeeee',pvtr:'db7093',ppwh:'efd5',pchp:'dab9',pr:'cd853f',pnk:'c0cb',pm:'dda0dd',pwrb:'b0e0e6',prp:'8-080',cc:'663399',r:'--',sbr:'bc8f8f',rb:'4169e1',sbrw:'8b4513',smn:'a8072',nbr:'4a460',sgrn:'2e8b57',ssh:'5ee',snn:'a0522d',svr:'c0c0c0',skb:'87ceeb',sTb:'6a5acd',sTgr:'708090',snw:'afa',n:'-ff7f',stb:'4682b4',tn:'d2b48c',t:'-8080',thst:'d8bfd8',tmT:'6347',trqs:'40e0d0',vt:'ee82ee',whT:'5deb3',wht:'',hts:'5f5f5',w:'-',wgrn:'9acd32'};\n\n\nfunction printNum(num, decs = 1) {\n    const str = (decs > 0) ? num.toFixed(decs).replace(/0+$/, '').replace(/\\.$/, '')\n                           : num.toString();\n    return str || '0';\n}\n\n\nclass Color {\n\n    constructor(r, g, b, a) {\n\n        const that = this;\n        function parseString(input) {\n\n            //HSL string. Examples:\n            //\thsl(120, 60%,  50%) or\n            //\thsla(240, 100%, 50%, .7)\n            if( input.startsWith('hsl') ) {\n                let [h, s, l, a] = input.match(/([\\-\\d\\.e]+)/g).map(Number);\n                if(a === undefined) { a = 1; }\n\n                h /= 360;\n                s /= 100;\n                l /= 100;\n                that.hsla = [h, s, l, a];\n            }\n\n            //RGB string. Examples:\n            //\trgb(51, 170, 51)\n            //\trgba(51, 170, 51, .7)\n            else if( input.startsWith('rgb') ) {\n                let [r, g, b, a] = input.match(/([\\-\\d\\.e]+)/g).map(Number);\n                if(a === undefined) { a = 1; }\n\n                that.rgba = [r, g, b, a];\n            }\n\n            //Hex string or color name:\n            else {\n                if( input.startsWith('#') ) {\n                    that.rgba = Color.hexToRgb(input);\n                }\n                else {\n                    that.rgba = Color.nameToRgb(input) || Color.hexToRgb(input);\n                }\n            }\n        }\n\n\n        if( r === undefined ) {\n            //No color input - the color can be set later through .hsla/.rgba/.hex\n        }\n\n        //Single input - RGB(A) array\n        else if( Array.isArray(r) ) {\n            this.rgba = r;\n        }\n\n        //Single input - CSS string\n        else if( b === undefined ) {\n            const color = r && ('' + r);\n            if(color) {\n                parseString(color.toLowerCase());\n            }\n        }\n\n        else {\n            this.rgba = [r, g, b, (a === undefined) ? 1 : a];\n        }\n    }\n\n\n    /* RGBA representation */\n\n    get rgba() {\n        if(this._rgba) { return this._rgba; }\n        if(!this._hsla) { throw new Error('No color is set'); }\n        \n        return (this._rgba = Color.hslToRgb(this._hsla));\n    }\n    set rgba(rgb) {\n        if(rgb.length === 3) { rgb[3] = 1; }\n        \n        this._rgba = rgb;\n        this._hsla = null;\n    }\n\n    printRGB(alpha) {\n        const rgb = alpha ? this.rgba : this.rgba.slice(0, 3),\n              vals = rgb.map((x, i) => printNum(x, (i === 3) ? 3 : 0));\n\n        return alpha ? `rgba(${ vals })` : `rgb(${ vals })`;\n    }\n    get rgbString()  { return this.printRGB(); }\n    get rgbaString() { return this.printRGB(true); }\n\n\n    /* HSLA representation */\n\n    get hsla() {\n        if(this._hsla) { return this._hsla; }\n        if(!this._rgba) { throw new Error('No color is set'); }\n        \n        return (this._hsla = Color.rgbToHsl(this._rgba));\n    }\n    set hsla(hsl) {\n        if(hsl.length === 3) { hsl[3] = 1; }\n        \n        this._hsla = hsl;\n        this._rgba = null;\n    }\n\n    printHSL(alpha) {\n        const mults = [360, 100, 100, 1],\n              suff =  ['', '%', '%', ''];\n\n        const hsl = alpha ? this.hsla : this.hsla.slice(0, 3),\n              //in printNum(), use enough decimals to represent all RGB colors:\n              //https://gist.github.com/mjackson/5311256#gistcomment-2336011\n              vals = hsl.map((x, i) => printNum(x * mults[i], (i === 3) ? 3 : 1) + suff[i]);\n        \n        return alpha ? `hsla(${ vals })` : `hsl(${ vals })`;\n    }\n    get hslString()  { return this.printHSL(); }\n    get hslaString() { return this.printHSL(true); }\n\n\n    /* HEX representation */\n\n    get hex() {\n        const rgb = this.rgba,\n              hex = rgb.map((x, i) => (i < 3) ? x.toString(16)\n                                              : Math.round(x * 255).toString(16));\n\n        return '#' + hex.map(x => x.padStart(2, '0')).join('');\n    }\n    set hex(hex) {\n        this.rgba = Color.hexToRgb(hex);\n    }\n\n    printHex(alpha) {\n        const hex = this.hex;\n        return alpha ? hex : hex.substring(0, 7);\n    }\n\n\n    /* Conversion utils */\n\n\n    /**\n     * Splits a HEX string into its RGB(A) components\n     */\n    static hexToRgb(input) {\n        //Normalize all hex codes (3/4/6/8 digits) to 8 digits RGBA\n        const hex = (input.startsWith('#') ? input.slice(1) : input)\n            .replace(/^(\\w{3})$/,          '$1F')                   //987      -> 987F\n            .replace(/^(\\w)(\\w)(\\w)(\\w)$/, '$1$1$2$2$3$3$4$4')      //9876     -> 99887766\n            .replace(/^(\\w{6})$/,          '$1FF');                 //987654   -> 987654FF\n\n        if(!hex.match(/^([0-9a-fA-F]{8})$/)) { throw new Error('Unknown hex color; ' + input); }\n\n        const rgba = hex\n            .match(/^(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)$/).slice(1)  //98765432 -> 98 76 54 32\n            .map(x => parseInt(x, 16));                    //Hex to decimal\n\n        rgba[3] = rgba[3]/255;\n        return rgba;\n    }\n\n\n    /**\n     * Gets the RGB value from a CSS color name\n     */\n    static nameToRgb(input) {\n        /* See comments on colorNames\n\n        if(!colorNamesDeser) {\n            colorNamesDeser = {};\n            colorNames.match(/.{7}/g).forEach(x =>\n                colorNamesDeser[x.slice(0, 3)] = atob(x.slice(-4)).split('').map(b => b.charCodeAt(0))\n            );\n        }\n        const hash = [].reduce.call(input.replace('ey', 'ay'), (h, c) => (h << 2) + c.charCodeAt(0), 0)\n                                .toString(36).slice(-3);\n\n        return colorNamesDeser[hash];\n        */\n\n        //const hex = colorNames[input];\n        //if(hex) {\n        //    return Color.hexToRgb(hex);\n        //}\n\n        const hash = input.toLowerCase()\n                          .replace('at', 'T')\n                          .replace(/[aeiouyldf]/g, '')\n                          .replace('ght', 'L')\n                          .replace('rk', 'D')\n                          .slice(-5, 4),\n              hex = colorNames[hash];\n        return (hex === undefined) ? hex\n                                   : Color.hexToRgb(hex.replace(/\\-/g, '00').padStart(6, 'f'));\n    }\n\n\n    /**\n     * https://gist.github.com/mjackson/5311256\n     * \n     * Converts an RGB color value to HSL. Conversion formula\n     * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n     * Assumes r, g, and b are contained in the set [0, 255] and\n     * returns h, s, and l in the set [0, 1].\n     */\n    static rgbToHsl([r, g, b, a]) {\n\n        r /= 255;\n        g /= 255;\n        b /= 255;\n\n        const max = Math.max(r, g, b),\n              min = Math.min(r, g, b);\n        let h,\n            s,\n            l = (max + min) / 2;\n\n        if(max === min){\n            h = s = 0; // achromatic\n        }\n        else {\n            const d = max - min;\n            s = (l > 0.5) ? d / (2 - max - min)\n                          : d / (max + min);\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n            \n            h /= 6;\n        }\n        \n        return [h, s, l, a];\n    }\n\n\n    /**\n     * https://gist.github.com/mjackson/5311256\n     * \n     * Converts an HSL color value to RGB. Conversion formula\n     * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n     * Assumes h, s, and l are contained in the set [0, 1] and\n     * returns r, g, and b in the set [0, 255].\n     */\n    static hslToRgb([h, s, l, a]) {\n\n        let r, g, b;\n        \n        if (s === 0) {\n            r = g = b = l; // achromatic\n        }\n        else {\n            const hue2rgb = function(p, q, t) {\n                if (t < 0) t += 1;\n                if (t > 1) t -= 1;\n                if (t < 1/6) return p + (q - p) * 6 * t;\n                if (t < 1/2) return q;\n                if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n                return p;\n            };\n\n            const q = (l < 0.5) ? l * (1 + s)\n                                : l + s - (l * s),\n                  p = (2 * l) - q;\n\n            r = hue2rgb(p, q, h + 1/3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1/3);\n        }\n        \n        const rgba = [r * 255, g * 255, b * 255].map(Math.round);\n        rgba[3] = a;\n        \n        return rgba;\n    }\n\n}\n\n\nexport default Color;\n","/**\n * Based on https://vanilla-picker.js.org/\n */\n\nimport Color from \"@sphinxxxx/color-conversion\";\nimport { Component } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { ColorPickerOptions } from \"../../types/index.js\";\nimport { debounce } from \"@ribajs/utils/src/control\";\n\ninterface EventBucketItem {\n  target: HTMLElement | Window;\n  type: Event[\"type\"];\n  handler: any;\n}\n\nclass EventBucket {\n  protected events: EventBucketItem[] = [];\n\n  add(target: HTMLElement | Window, type: Event[\"type\"], handler: any) {\n    target.addEventListener(type, handler, false);\n    this.events.push({\n      target,\n      type,\n      handler,\n    });\n  }\n\n  remove(target: HTMLElement, type: Event[\"type\"], handler: any) {\n    this.events = this.events.filter((e) => {\n      let isMatch = true;\n      if (target && target !== e.target) {\n        isMatch = false;\n      }\n      if (type && type !== e.type) {\n        isMatch = false;\n      }\n      if (handler && handler !== e.handler) {\n        isMatch = false;\n      }\n\n      if (isMatch) {\n        EventBucket._doRemove(e.target as HTMLElement, e.type, e.handler);\n      }\n      return !isMatch;\n    });\n  }\n  static _doRemove(target: HTMLElement, type: Event[\"type\"], handler: any) {\n    target.removeEventListener(type, handler, false);\n  }\n\n  destroy() {\n    this.events.forEach((e) =>\n      EventBucket._doRemove(e.target as HTMLElement, e.type, e.handler)\n    );\n    this.events = [];\n  }\n}\n\nconst dragTrack = (\n  eventBucket: EventBucket,\n  area: HTMLElement,\n  callback: any\n) => {\n  let dragging = false;\n\n  const clamp = (val: number, min: number, max: number) => {\n    return Math.max(min, Math.min(val, max));\n  };\n\n  const onMove = (\n    e: MouseEvent | TouchEvent,\n    info: { clientX: number; clientY: number },\n    starting: boolean\n  ) => {\n    if (starting) {\n      dragging = true;\n    }\n    if (!dragging) {\n      return;\n    }\n\n    e.preventDefault();\n\n    const bounds = area.getBoundingClientRect(),\n      w = bounds.width,\n      h = bounds.height,\n      x = info.clientX,\n      y = info.clientY;\n\n    const relX = clamp(x - bounds.left, 0, w),\n      relY = clamp(y - bounds.top, 0, h);\n\n    callback(relX / w, relY / h);\n  };\n\n  const onMouse = (e: MouseEvent, starting: boolean) => {\n    const button = e.buttons === undefined ? e.which : e.buttons;\n    if (button === 1) {\n      onMove(e, e, starting);\n    }\n    // `mouseup` outside of window:\n    else {\n      dragging = false;\n    }\n  };\n\n  function onTouch(e: TouchEvent, starting: boolean) {\n    if (e.touches.length === 1) {\n      onMove(e, e.touches[0], starting);\n    }\n    //Don't interfere with pinch-to-zoom etc:\n    else {\n      dragging = false;\n    }\n  }\n\n  // Notice how we must listen on the whole window to really keep track of mouse movements,\n  // while touch movements \"stick\" to the original target from `touchstart` (which works well for our purposes here):\n  //\n  //  https://stackoverflow.com/a/51750458/1869660\n  //  \"Mouse moves = *hover* like behavior. Touch moves = *drags* like behavior\"\n  //\n  eventBucket.add(area, \"mousedown\", (e: MouseEvent) => {\n    onMouse(e, true);\n  });\n  eventBucket.add(area, \"touchstart\", (e: TouchEvent) => {\n    onTouch(e, true);\n  });\n  eventBucket.add(window, \"mousemove\", onMouse);\n  eventBucket.add(area, \"touchmove\", onTouch);\n  eventBucket.add(window, \"mouseup\", () => {\n    dragging = false;\n  });\n  eventBucket.add(area, \"touchend\", () => {\n    dragging = false;\n  });\n  eventBucket.add(area, \"touchcancel\", () => {\n    dragging = false;\n  });\n};\n\nconst BG_TRANSP = `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")`;\nconst HUES = 360;\n// We need to use keydown instead of keypress to handle Esc from the editor textbox:\nconst EVENT_KEY = \"keydown\"; //'keypress'\n\nfunction stopEvent(e: Event) {\n  // Stop an event from bubbling up to the parent:\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction onKey(\n  bucket: EventBucket,\n  target: HTMLElement,\n  keys: string[],\n  handler: any,\n  stop = false\n) {\n  bucket.add(target, EVENT_KEY, function (e: KeyboardEvent) {\n    if (keys.indexOf(e.key) >= 0) {\n      if (stop) {\n        stopEvent(e);\n      }\n      handler(e);\n    }\n  });\n}\n\ninterface Scope extends ColorPickerOptions {\n  namespace: string;\n  hsl: number[];\n  cssHue: string;\n  cssHsl: string;\n  cssHsla: string;\n  alphaBg: string;\n}\n\nexport class Bs5ColorPickerComponent extends Component {\n  public static tagName = \"bs5-colorpicker\";\n  static get observedAttributes(): string[] {\n    return [\n      \"namespace\",\n      \"alpha\",\n      \"editor\",\n      \"editor-format\",\n      \"cancel-button\",\n      \"okay-button\",\n      \"color\",\n    ];\n  }\n\n  protected eventDispatcher?: EventDispatcher;\n\n  public color?: Color;\n  public _debug = false;\n  public scope: Scope = {\n    namespace: \"main\",\n    hsl: [],\n    cssHue: \"\",\n    cssHsl: \"\",\n    cssHsla: \"\",\n    alphaBg: \"\",\n    color: \"#0cf\",\n    alpha: true,\n    editor: true,\n    editorFormat: \"hex\",\n    cancelButton: false,\n    okayButton: false,\n  };\n\n  protected events = new EventBucket();\n\n  protected _domH: HTMLElement | null = null;\n  protected _domSL: HTMLElement | null = null;\n  protected _domA: HTMLElement | null = null;\n  protected _domEdit: HTMLInputElement | null = null;\n  protected _domSample: HTMLElement | null = null;\n  protected _domOkay: HTMLElement | null = null;\n  protected _domCancel: HTMLElement | null = null;\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    super.init(Bs5ColorPickerComponent.observedAttributes);\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.eventDispatcher = EventDispatcher.getInstance(\n      \"bs5-colorpicker:\" + this.scope.namespace\n    );\n    this.setColor(this.scope.color);\n    this.updateUI();\n    this.bindEvents();\n  }\n\n  protected async afterTemplate(\n    template: string | HTMLElement | null\n  ): Promise<any> {\n    await super.afterTemplate(template);\n    this.setElements();\n  }\n\n  /**\n   * Callback whenever the color changes.\n   */\n  protected onChange(color?: Color) {\n    this.debug(\"onChange\", color);\n    this.eventDispatcher?.trigger(\"change\", color);\n  }\n\n  /**\n   * Callback when the user clicks \"Ok\".\n   */\n  protected onDone(color?: Color) {\n    this.debug(\"onDone\", color);\n    this.eventDispatcher?.trigger(\"done\", color);\n  }\n\n  protected async template() {\n    if (hasChildNodesTrim(this)) {\n      return null;\n    } else {\n      const { default: template } = await import(\n        \"./bs5-colorpicker.component.html?raw\"\n      );\n      return template;\n    }\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName === \"color\") {\n      this.setColor(this.scope.color);\n    }\n  }\n\n  /**\n   * Set/initialize the picker's color.\n   *\n   * @param color Color name, RGBA/HSLA/HEX string, or RGBA array.\n   * @param flags If { silent: true }, won't trigger onChange.\n   */\n  protected setColor = debounce(this._setColor.bind(this));\n\n  protected _setColor(color: string, flags: any = { silent: false }) {\n    if (typeof color === \"string\") {\n      color = color.trim();\n    }\n    if (!color) {\n      return;\n    }\n\n    flags = flags || {};\n    let c;\n    try {\n      // Will throw on unknown colors:\n      c = new Color(color);\n    } catch (ex) {\n      if (flags.failSilently) {\n        return;\n      }\n      throw ex;\n    }\n\n    if (!this.scope.alpha) {\n      const hsla = c.hsla;\n      hsla[3] = 1;\n      c.hsla = hsla;\n    }\n    this.color = c;\n    this.setHSLA(null, null, null, null, flags);\n  }\n\n  protected setElements() {\n    this._domH = this.querySelector(\".picker-hue\");\n    this._domSL = this.querySelector(\".picker-sl\");\n    this._domA = this.querySelector(\".picker-alpha\");\n    this._domEdit =\n      (this.querySelector(\".picker-editor\") as HTMLInputElement) || null;\n    this._domSample = this.querySelector(\".picker-sample\");\n    this._domOkay = this.querySelector(\".picker-done\");\n    this._domCancel = this.querySelector(\".picker-cancel\");\n  }\n\n  /**\n   * Release all resources used by this picker instance.\n   */\n  protected disconnectedCallback() {\n    this.events.destroy();\n  }\n\n  /**\n   * Handle user input.\n   */\n  protected bindEvents() {\n    const events = this.events;\n\n    const addEvent = (\n      target: HTMLElement | HTMLInputElement,\n      type: Event[\"type\"],\n      handler: any\n    ) => {\n      events.add(target, type, handler);\n    };\n\n    // Prevent clicks while dragging from bubbling up to the parent:\n    addEvent(this, \"click\", (e: MouseEvent) => e.preventDefault());\n\n    // Draggable color selection\n    const _dragTrack = dragTrack.bind(this);\n\n    // Select hue\n    if (\n      !this._domH ||\n      !this._domSL ||\n      !this._domA ||\n      !this._domEdit ||\n      !this._domOkay\n    ) {\n      throw new Error(\"Not ready!\");\n    }\n    _dragTrack(events, this._domH, (x: number /*, y: number*/) =>\n      this.setHSLA(x)\n    );\n\n    // Select saturation/lightness\n    _dragTrack(events, this._domSL, (x: number, y: number) =>\n      this.setHSLA(null, x, 1 - y)\n    );\n\n    // Select alpha\n    if (this.scope.alpha) {\n      _dragTrack(events, this._domA, (x: number, y: number) =>\n        this.setHSLA(null, null, null, 1 - y)\n      );\n    }\n\n    //Always init the editor, for accessibility and screen readers (we'll hide it with CSS if `!settings.editor`)\n    addEvent(this._domEdit, \"input\", (e: InputEvent) => {\n      const input = e.target as HTMLInputElement;\n      this.setColor(input.value, {\n        fromEditor: true,\n        failSilently: true,\n      });\n    });\n    // Select all text on focus:\n    addEvent(this._domEdit, \"focus\", (e: FocusEvent) => {\n      const input = e.target as HTMLInputElement;\n      //If no current selection:\n      if (input.selectionStart === input.selectionEnd) {\n        input.select();\n      }\n    });\n\n    const onDoneProxy = () => {\n      this.onDone(this.color);\n    };\n    addEvent(this._domOkay, \"click\", onDoneProxy);\n    onKey(events, this, [\"Enter\"], onDoneProxy);\n  }\n\n  /*\n   * \"Hub\" for all color changes\n   *\n   * @private\n   */\n  protected setHSLA(\n    h: number | null = null,\n    s: number | null = null,\n    l: number | null = null,\n    a: number | null = null,\n    flags: any = {}\n  ) {\n    if (!this.color) {\n      throw new Error(\"Not ready!\");\n    }\n    const hsla = this.color.hsla;\n\n    [h, s, l, a].forEach((x, i) => {\n      if (x || x === 0) {\n        hsla[i] = x;\n      }\n    });\n    this.color.hsla = hsla;\n\n    this.updateUI(flags);\n\n    if (this.onChange && !flags.silent) {\n      this.onChange(this.color);\n    }\n  }\n\n  protected updateUI = debounce(this._updateUI.bind(this));\n\n  protected _updateUI(flags: any = {}) {\n    if (!this || !this.color) {\n      return;\n    }\n\n    this.scope.hsl = this.color.hsla;\n    this.scope.cssHue = `hsl(${this.scope.hsl[0] * HUES}, 100%, 50%)`;\n    this.scope.cssHsl = this.color.hslString;\n    this.scope.cssHsla = this.color.hslaString;\n\n    if (!this._domH || !this._domSL || !this._domA) {\n      throw new Error(\"Color ui elements not found!\");\n    }\n\n    const thumbH = this._domH.querySelector(\n      \".picker-selector\"\n    ) as HTMLElement | null;\n    const thumbSL = this._domSL.querySelector(\n      \".picker-selector\"\n    ) as HTMLElement | null;\n    const thumbA = this._domA.querySelector(\n      \".picker-selector\"\n    ) as HTMLElement | null;\n\n    if (!thumbH || !thumbSL || !thumbA || !this._domEdit || !this._domSample) {\n      console.error(\n        thumbH,\n        thumbSL,\n        thumbA,\n        this._domA,\n        this._domSL,\n        this._domH,\n        this._domEdit,\n        this._domSample\n      );\n      throw new Error(\"Not ready!\");\n    }\n\n    const posX = (parent: HTMLElement, child: HTMLElement, relX: number) => {\n      child.style.left = relX * 100 + \"%\";\n    };\n    const posY = (parent: HTMLElement, child: HTMLElement, relY: number) => {\n      child.style.top = relY * 100 + \"%\";\n    };\n\n    posX(this._domH, thumbH, this.scope.hsl[0]);\n\n    // S/L\n    posX(this._domSL, thumbSL, this.scope.hsl[1]);\n    posY(this._domSL, thumbSL, 1 - this.scope.hsl[2]);\n\n    // Alpha\n    posY(this._domA, thumbA, 1 - this.scope.hsl[3]);\n\n    const opaque = this.scope.cssHsl;\n    const transp = opaque.replace(\"hsl\", \"hsla\").replace(\")\", \", 0)\");\n    const bg = `linear-gradient(${[opaque, transp]})`;\n\n    // Let the Alpha slider fade from opaque to transparent:\n    this.scope.alphaBg = bg + \", \" + BG_TRANSP;\n\n    // Don't update the editor if the user is typing.\n    // That creates too much noise because of our auto-expansion of 3/4/6 -> 8 digit hex codes.\n    if (!flags.fromEditor) {\n      const format = this.scope.editorFormat,\n        alpha = this.scope.alpha;\n\n      let color: string;\n      switch (format) {\n        case \"rgb\":\n          color = this.color.printRGB(alpha);\n          break;\n        case \"hsl\":\n          color = this.color.printHSL(alpha);\n          break;\n        default:\n          color = this.color.printHex(alpha);\n      }\n      this.scope.color = color;\n    }\n  }\n}\n","import { Component, ScopeBase } from \"@ribajs/core\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\n\nexport interface Anchor {\n  element: HTMLHeadingElement;\n  href: string;\n  title: string;\n  childs: Anchor[];\n}\n\nexport interface Scope extends ScopeBase {\n  /**\n   * If start is `2` and depth is `2` depth starts on `h2` and ends on `h2`.\n   */\n  headersStart: number;\n  /**\n   * If start is `1` and depth is `1` only `h1` headers are detected, if depth is `2` also `h2` is detected.\n   */\n  headersDepth: number;\n  /**\n   * Depth in how many parents elements should be searched for an id for each found header element (default `1`)\n   */\n  findHeaderIdDepth: number;\n  /**\n   * Selector to search for headers insite of the element\n   */\n  headerParentSelector?: string;\n  /**\n   * Pixels to offset from top when calculating position to scroll there.\n   */\n  scrollOffset: number;\n  /**\n   * The element to scroll (default `window`)\n   */\n  scrollElement?: string;\n  /**\n   * Array of found headers / anchors\n   */\n  anchors: Anchor[];\n}\n\nexport class Bs5ContentsComponent extends Component {\n  public static tagName = \"bs5-contents\";\n\n  protected autobind = true;\n\n  protected wrapperElement?: Element;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"headers-start\",\n      \"headers-depth\",\n      \"find-header-id-depth\",\n      \"header-parent-selector\",\n      \"scroll-offset\",\n      \"scroll-element\",\n    ];\n  }\n\n  public scope: Scope = {\n    headersDepth: 1,\n    headersStart: 2,\n    findHeaderIdDepth: 1,\n    headerParentSelector: undefined,\n    scrollOffset: 0,\n    anchors: [],\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ContentsComponent.observedAttributes);\n  }\n\n  protected getIdFromElementOrParent(\n    element: HTMLElement,\n    depth = 1\n  ): string | null {\n    if (element.id) {\n      return element.id;\n    }\n    if (depth <= this.scope.findHeaderIdDepth) {\n      if (element.parentElement) {\n        return this.getIdFromElementOrParent(element.parentElement, ++depth);\n      }\n    }\n    return null;\n  }\n\n  protected pushHeaders(\n    wrapperElement: Element,\n    headersStart: number,\n    headersDepth: number,\n    pushTo: Anchor[]\n  ) {\n    const headerElements = wrapperElement.querySelectorAll(\n      \"h\" + headersStart\n    ) as NodeListOf<HTMLHeadingElement>;\n    headerElements.forEach((headerElement) => {\n      const id = this.getIdFromElementOrParent(headerElement);\n      if (!id) {\n        return;\n      }\n      pushTo.push({\n        element: headerElement,\n        href: \"#\" + id,\n        title: headerElement.innerHTML,\n        childs: [],\n      });\n      if (headerElement.parentElement && headersDepth >= headersStart + 1) {\n        this.pushHeaders(\n          headerElement.parentElement,\n          headersStart + 1,\n          headersDepth,\n          pushTo[pushTo.length - 1].childs\n        );\n      }\n    });\n  }\n\n  protected async afterBind() {\n    if (\n      this.scope.headerParentSelector &&\n      this.scope.headersStart &&\n      this.scope.headersDepth\n    ) {\n      this.wrapperElement =\n        document.querySelector(this.scope.headerParentSelector) || undefined;\n      this.scope.anchors = [];\n      if (!this.wrapperElement) {\n        console.error(\"No wrapper element found!\");\n        return;\n      }\n      this.pushHeaders(\n        this.wrapperElement,\n        this.scope.headersStart,\n        this.scope.headersDepth,\n        this.scope.anchors\n      );\n    }\n    await super.afterBind();\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"headersStart\", \"headersDepth\", \"headerParentSelector\"];\n  }\n\n  protected async attributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.attributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.scope.anchors = [];\n  }\n\n  protected async template() {\n    // Only set the component template if there no childs already\n    if (hasChildNodesTrim(this)) {\n      return null;\n    } else {\n      const { default: template } = await import(\n        \"./bs5-contents.component.html?raw\"\n      );\n      return template;\n    }\n  }\n}\n","import {\n  Component,\n  HttpService,\n  HttpMethod,\n  HttpDataType,\n  ScopeBase,\n} from \"@ribajs/core\";\nimport { stripHtml } from \"@ribajs/utils/src/type.js\";\nimport {\n  getUID,\n  hasChildNodesTrim,\n  scrollTo,\n  getViewportDimensions,\n} from \"@ribajs/utils/src/dom.js\";\n\nexport interface ValidationObject {\n  fields:\n    | {\n        [name: string]: string | boolean | string[];\n      }\n    | FormData;\n  valid: boolean;\n  error?: string;\n}\n\nexport interface SubmitSettings {\n  action: string;\n  method: HttpMethod;\n  target?: string;\n  type: HttpDataType;\n}\n\nexport interface Scope extends ScopeBase {\n  id: string;\n  form: ValidationObject;\n  onSubmit: Bs5FormComponent[\"onSubmit\"];\n\n  disableSubmitUntilChange: boolean;\n  submitDisabled: boolean;\n  /**\n   * Set this to `true` to submit the form using ajax.\n   * Set this to `false` to use the default submit request with a page reload\n   */\n  useAjax: boolean;\n  /**\n   * Used for the ajax submit request. Default is \"form\" but can also be \"script\" | \"json\" | \"xml\" | \"text\" | \"html\" | \"form\".\n   */\n  ajaxRequestType: HttpDataType;\n  /**\n   * Submitted data for the ajax submit.\n   *\n   * Set this tp `true` if you do not want to use `rv-value` on your form elements,\n   * in this case the property name is in this case the property name is determined from the name attribute:\n   *\n   * @example\n   *   `<input name=\"given-name\">` -> `scope.form.fields.givenName\n   *\n   * Set this to `false` if you if you want to use the rv-value binder,\n   * in this case the property name may be different from the name attribute:\n   * @example\n   *  `<input name=\"given-name\" rv-value=\"form.fields.name | default 'Zelda'\">`\n   *\n   **/\n  autoSetFormData: boolean;\n  stripHtml: boolean;\n  scrollToInvalidElement: true;\n  animateInvalidElement: true;\n}\n\nexport class Bs5FormComponent extends Component {\n  public static tagName = \"bs5-form\";\n  public _debug = false;\n  protected autobind = true;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"id\",\n      \"disable-submit-until-change\",\n      \"use-ajax\",\n      \"ajax-request-type\",\n      \"auto-set-form-data\",\n      \"strip-html\",\n      \"scroll-invalid-element\",\n      \"animate-invalid-element\",\n    ];\n  }\n\n  protected formEl: HTMLFormElement | null = null;\n\n  protected getDefaultScope(): Scope {\n    const scope: Scope = {\n      id: getUID(\"form\"),\n\n      form: {\n        fields: {},\n        valid: false,\n        error: undefined,\n      },\n\n      disableSubmitUntilChange: false,\n\n      submitDisabled: false,\n      onSubmit: this.onSubmit,\n\n      useAjax: true,\n      ajaxRequestType: \"form\",\n      autoSetFormData: true,\n      stripHtml: true,\n      scrollToInvalidElement: true,\n      animateInvalidElement: true,\n    };\n    return scope;\n  }\n\n  public scope: Scope = this.getDefaultScope();\n\n  constructor() {\n    super();\n    this.enableSubmit = this.enableSubmit.bind(this);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5FormComponent.observedAttributes);\n    this.addEventListeners();\n  }\n\n  protected addEventListeners() {\n    if (this.scope.disableSubmitUntilChange) {\n      this.addEventListener(\"input\", this.enableSubmit);\n    }\n  }\n\n  protected removeEventListeners() {\n    this.removeEventListener(\"input\", this.enableSubmit);\n  }\n\n  private enableSubmit() {\n    this.scope.submitDisabled = false;\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.id = this.scope.id;\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n  }\n\n  protected stripHtml() {\n    for (const key in this.scope.form.fields) {\n      if (\n        (this.scope.form.fields as any)[key] &&\n        typeof (this.scope.form.fields as any)[key] === \"string\"\n      ) {\n        (this.scope.form.fields as any)[key] = stripHtml(\n          (this.scope.form.fields as any)[key] as string\n        );\n      }\n    }\n  }\n\n  public onSubmit(event: Event, el: HTMLButtonElement) {\n    this.debug(\"onSubmit\", event, el);\n    if (!this.formEl) {\n      console.warn(\"No form found\");\n      return false;\n    }\n\n    if (this.scope.autoSetFormData) {\n      this.getFormValues();\n    }\n\n    if (this.scope.stripHtml) {\n      this.stripHtml();\n    }\n\n    this.validate(this.formEl, this.scope.form);\n\n    if (!this.scope.form.valid) {\n      this.onInvalidForm(event);\n      return;\n    }\n\n    const submitSettings = this.getSubmitSettings(event);\n    if (submitSettings?.target === \"_blank\") {\n      return true;\n    }\n\n    if (this.scope.useAjax) {\n      // stop native submit because we submit the data using javascript\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.ajaxSubmit(event, el);\n    }\n  }\n\n  /**\n   * TODO Not tested in the wild, may need to be adjusted. Also the error handling is untested\n   */\n  protected async ajaxSubmit(event?: Event, el?: HTMLButtonElement) {\n    this.debug(\"onSubmit\", event, el, this.scope);\n    const submitSettings = this.getSubmitSettings(event);\n    if (!submitSettings) {\n      console.warn(\"Can't get submit settings\");\n      return;\n    }\n\n    if (this.scope.autoSetFormData) {\n      this.getFormValues();\n    }\n\n    try {\n      // This method is untested in the wild\n      const res = await HttpService.fetch(\n        submitSettings.action,\n        submitSettings.method,\n        this.scope.form.fields,\n        submitSettings.type\n      );\n\n      if (!res || !res.body) {\n        return this.onErrorSubmit(\"500\", \"Error\", \"Empty body!\");\n      }\n\n      const message = res.body && res.body.message ? res.body.message : \"\";\n      if (Number(res.status) >= 400) {\n        // TODO generate message by status\n        this.onErrorSubmit(res.status.toString(), message, res.body);\n      }\n      return this.onSuccessSubmit(res.status.toString(), message, res.body);\n    } catch (err: any) {\n      if (err.status && err.body) {\n        this.onErrorSubmit(err.status, err.body.message, err.body);\n      } else {\n        throw this.error;\n      }\n    }\n  }\n\n  protected getSubmitSettings(event?: Event) {\n    if (!this.formEl) {\n      console.warn(\"No form found\");\n      return null;\n    }\n\n    let action = this.formEl.action;\n    let method = this.formEl.method;\n    let target = this.formEl.method;\n\n    // Overwrite action by formaction attribute: <button type=\"submit\" formaction=\"/foobar\">\n\n    // TODO submitter from vanilla event\n\n    // If this is a jquery event\n    if ((event as any)?.originalEvent?.submitter) {\n      const submitter = (event as any)?.originalEvent?.submitter;\n      action = submitter?.formAction || action;\n      method = submitter?.formMethod || method;\n      target = submitter?.formTarget || target;\n    }\n\n    const settings: SubmitSettings = {\n      action,\n      method: method.toUpperCase() as HttpMethod,\n      target,\n      type: this.scope.ajaxRequestType,\n    };\n\n    return settings;\n  }\n\n  protected onInvalidForm(event: Event): void {\n    this.debug(\"Form not valid\", this.scope);\n    // stop native submit\n    event.preventDefault();\n    event.stopPropagation();\n    if (!this.formEl) {\n      console.warn(\"No form found\");\n      return;\n    }\n    const invalidElements =\n      this.formEl.querySelectorAll<HTMLElement>(\":invalid\");\n    if (invalidElements && invalidElements.length) {\n      const invalidElement = invalidElements[0];\n      if (this.scope.scrollToInvalidElement) {\n        this.scrollToElement(invalidElement);\n      }\n      if (this.scope.animateInvalidElement) {\n        this.scrollToElement(invalidElement);\n      }\n    }\n\n    this.dispatchEvent(\n      new CustomEvent(\"invalid\", {\n        detail: { elements: invalidElements },\n      })\n    );\n  }\n\n  protected scrollToElement(invalidElement: HTMLElement) {\n    const vp = getViewportDimensions();\n    const offset = vp.h / 2;\n    scrollTo(invalidElement, offset, window);\n    this.animateInvalidElement(invalidElement);\n  }\n\n  protected animateInvalidElement(invalidElement: HTMLElement, endsOn = 3000) {\n    invalidElement.classList.add(\"invalid-flashing-animation\");\n    setTimeout(() => {\n      invalidElement.classList.remove(\"invalid-flashing-animation\");\n    }, endsOn);\n  }\n\n  protected onErrorSubmit(status: string, message: string, response: any) {\n    this.debug(\"onErrorSubmit\");\n    this.dispatchEvent(\n      new CustomEvent(\"submit-error\", {\n        detail: { status, message: message, response },\n      })\n    );\n  }\n\n  protected onSuccessSubmit(status: string, message: string, response: any) {\n    this.debug(\"onSuccessSubmit\");\n    if (this.scope.disableSubmitUntilChange) {\n      this.scope.submitDisabled = true;\n    }\n\n    this.dispatchEvent(\n      new CustomEvent(\"submit-success\", {\n        detail: { status, message: message, response },\n      })\n    );\n  }\n\n  protected validate(\n    form: HTMLFormElement,\n    validationScope: ValidationObject,\n    errorEventName = \"validation-error\"\n  ) {\n    validationScope.valid = form.checkValidity();\n    validationScope.error = form.validationMessage;\n    // only show validation if we want to give a hint to the user that something is wrong\n    if (!validationScope.valid) {\n      this.dispatchEvent(new CustomEvent(errorEventName));\n      form.classList.add(\"was-validated\");\n    }\n  }\n\n  protected getFormValues() {\n    if (!this.formEl) {\n      console.warn(\"No form found\");\n      return null;\n    }\n    // this.formEl.querySelectorAll(\"input\").forEach((element) => {\n    //   this.scope.form.fields[camelCase(element.name)] = getInputValue(element);\n    // });\n    this.scope.form.fields = new FormData(this.formEl);\n    return this.scope.form.fields;\n  }\n\n  protected initForm() {\n    const formEl = this.querySelector(\"form\");\n    if (formEl && formEl.length > 0) {\n      this.formEl = formEl;\n      this.formEl.classList.add(\"needs-validation\");\n      this.formEl.setAttribute(\"novalidate\", \"\");\n    } else {\n      console.warn(\"bs5 form without children found\");\n    }\n  }\n\n  protected async template() {\n    if (hasChildNodesTrim(this)) {\n      this.initForm();\n      return null;\n    } else {\n      const { default: template } = await import(\n        \"./bs5-form.component.html?raw\"\n      );\n      return template;\n    }\n  }\n}\n","import {\n  BasicComponent,\n  TemplateFunction,\n  HttpService,\n  HttpServiceResponse,\n} from \"@ribajs/core\";\nimport { getLocation } from \"@ribajs/utils\";\nimport { BaseCache } from \"@ribajs/cache\";\nimport { JsxBs5IconProps } from \"../../types/jsx/jsx-icon-props.js\";\n\nexport class Bs5IconComponent extends BasicComponent {\n  public static tagName = \"bs5-icon\";\n  public static cache = new BaseCache<Promise<HttpServiceResponse<string>>>();\n\n  static get observedAttributes(): (keyof JsxBs5IconProps)[] {\n    return [\"size\", \"width\", \"height\", \"src\", \"color\", \"direction\", \"alt\"];\n  }\n\n  public scope: any = {};\n\n  constructor() {\n    super();\n  }\n\n  protected getSvg() {\n    return this.querySelector(\"svg\");\n  }\n\n  protected async fetchCached(url: string) {\n    let response = Bs5IconComponent.cache.get(url);\n    if (response) {\n      return response;\n    }\n    response = HttpService.get(url);\n    if (response) {\n      Bs5IconComponent.cache.set(url, response);\n    }\n    return response;\n  }\n\n  protected async fetchIcon(src: string) {\n    let response: HttpServiceResponse<string>;\n\n    // Append hostname on ssr\n    if (\n      window?.ssr &&\n      !src.startsWith(\"http\") &&\n      !src.startsWith(\"ftp\") &&\n      !src.startsWith(\"sftp\")\n    ) {\n      let url: URL;\n\n      if (window.ssr.env.NEST_INTERN_URL) {\n        url = new URL(src, window.ssr.env.NEST_INTERN_URL);\n      } else if (window.ssr.ctx) {\n        url = new URL(\n          src,\n          window.ssr.ctx.protocol + \"://\" + window.ssr.ctx.hostname\n        );\n      } else {\n        throw new Error(\"Host for SSR not found!\");\n      }\n\n      response = await this.fetchCached(url.href);\n    } else {\n      response = await this.fetchCached(src);\n    }\n\n    if (response.status !== 200) {\n      console.error(response.status);\n      return \"\";\n    }\n\n    if (response.headers.get(\"content-type\")?.includes(\"image/svg+xml\")) {\n      return response.body;\n    }\n\n    console.error(\n      \"[bs5-icon] Only SVG's are supported! But content-type is \" +\n        response.headers.get(\"content-type\")\n    );\n    return \"\";\n  }\n\n  protected getBasename(src: string) {\n    const pathnames = getLocation(src).pathname.split(\"/\");\n    return pathnames?.[pathnames.length - 1];\n  }\n\n  protected getAlternativeText(src: string) {\n    const basename = this.getBasename(src);\n    return basename.split(\".\")[0]?.replaceAll(\"_\", \" \");\n  }\n\n  protected async onSrcChanged() {\n    let icon = \"\";\n\n    if (!this.scope.src) {\n      this.innerHTML = \"\";\n      return;\n    }\n    const alt = this.getAlternativeText(this.scope.src);\n    if (alt) this.setAttribute(\"alt\", alt);\n\n    const currentSvg = this.getSvg();\n    const oldSrc = currentSvg ? currentSvg.getAttribute(\"src\") : \"\";\n\n    // Icon already set (maybe on SSR)\n    if (oldSrc === this.scope.src) {\n      return;\n    }\n\n    try {\n      icon = await this.fetchIcon(this.scope.src);\n    } catch (error) {\n      console.warn(\n        `Error on fetch icon \"${this.scope.src}\"! Try to switch the protocol...`,\n        error\n      );\n      // Try to switch protocol on error\n      if (this.scope.src.startsWith(\"//\")) {\n        this.scope.src = location.protocol + this.scope.src;\n      }\n      const url = new URL(this.scope.src);\n      if (url.protocol === \"http:\") {\n        url.protocol = \"https:\";\n      } else {\n        url.protocol = \"http:\";\n      }\n      try {\n        icon = await this.fetchIcon(url.href);\n      } catch (error2) {\n        console.error(\n          `Error on fetch icon \"${this.scope.src}\"!`,\n          error,\n          error2\n        );\n        return;\n      }\n    }\n\n    if (!icon) {\n      console.error(`Error on fetch icon \"${this.scope.src}\"!`);\n      return;\n    }\n\n    this.innerHTML = icon;\n    const newSvg = this.getSvg();\n    if (newSvg) {\n      newSvg.setAttribute(\"src\", this.scope.src);\n    }\n  }\n\n  protected removeColor() {\n    this.className = this.className.replace(/(^|\\s)color-\\S+/g, \"\");\n    this.style.color = \"\";\n  }\n\n  protected setColor(color?: string) {\n    if (!color) {\n      return this.removeColor();\n    }\n    if (color.includes(\",\")) {\n      const colorArr = color.split(\",\");\n      if (colorArr.length > 0) {\n        this.className = this.className.replace(/(^|\\s)color-\\S+/g, \"\");\n        for (let i = 0; i < colorArr.length; i++) {\n          const newColor: string = colorArr[i];\n          if (newColor.startsWith(\"#\") || newColor.startsWith(\"rgb\")) {\n            this.style.color = newColor;\n          }\n          this.classList.add(`color-${newColor}`);\n        }\n      }\n    } else {\n      this.style.color = color;\n      this.className = this.className.replace(/(^|\\s)color-\\S+/g, \"\");\n      this.classList.add(`color-${color}`);\n    }\n  }\n\n  protected setSize(size: number) {\n    this.style.height = size + \"px\";\n    this.style.width = size + \"px\";\n    this.className = this.className.replace(/(^|\\s)size-\\S+/g, \"\");\n    this.classList.add(`size-${size}`);\n  }\n\n  protected setWidth(width: number) {\n    this.style.width = width + \"px\";\n    this.className = this.className.replace(/(^|\\s)width-\\S+/g, \"\");\n    this.classList.add(`width-${width}`);\n  }\n\n  protected setHeight(height: number) {\n    this.style.height = height + \"px\";\n    this.className = this.className.replace(/(^|\\s)height-\\S+/g, \"\");\n    this.classList.add(`height-${height}`);\n  }\n\n  protected setDirection(direction: string) {\n    let classString = `direction-${direction}`;\n    if (direction === \"left\") {\n      classString += \" rotate-270\";\n    } else if (\n      direction === \"left-top\" ||\n      direction === \"left-up\" ||\n      direction === \"top-left\" ||\n      direction === \"up-left\"\n    ) {\n      classString += \" rotate-315\";\n    } else if (direction === \"top\" || direction === \"up\") {\n      classString += \" rotate-0\";\n    } else if (\n      direction === \"top-right\" ||\n      direction === \"up-right\" ||\n      direction === \"right-top\" ||\n      direction === \"right-up\"\n    ) {\n      classString += \" rotate-45\";\n    } else if (direction === \"right\") {\n      classString += \" rotate-90\";\n    } else if (\n      direction === \"right-bottom\" ||\n      direction === \"right-down\" ||\n      direction === \"bottom-right\" ||\n      direction === \"down-right\"\n    ) {\n      classString += \" rotate-135\";\n    } else if (direction === \"bottom\" || direction === \"down\") {\n      classString += \" rotate-180\";\n    } else if (\n      direction === \"left-bottom\" ||\n      direction === \"left-down\" ||\n      direction === \"bottom-left\" ||\n      direction === \"down-left\"\n    ) {\n      classString += \" rotate-225\";\n    }\n\n    this.className = this.className.replace(/(^|\\s)direction-\\S+/g, \"\");\n    this.className = this.className.replace(/(^|\\s)rotate-\\S+/g, \"\");\n    this.className += \" \" + classString;\n  }\n\n  protected async attributeChangedCallback(\n    name: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    // injects the changed attributes to scope\n    super.attributeChangedCallback(name, oldValue, newValue, namespace);\n\n    if (name === \"src\") {\n      // if (!newValue) {\n      //   console.warn(\"The src attribute must have a value!\", this.scope);\n      //   return \"\";\n      // }\n      this.onSrcChanged();\n    }\n\n    if (name === \"color\") {\n      this.setColor(newValue);\n    }\n\n    if (name === \"size\") {\n      this.setSize(newValue);\n    }\n\n    if (name === \"width\") {\n      this.setWidth(newValue);\n    }\n\n    if (name === \"height\") {\n      this.setHeight(newValue);\n    }\n\n    if (name === \"direction\") {\n      this.setDirection(newValue);\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute(\"aria-hidden\", \"true\");\n    this.setAttribute(\"role\", \"icon\");\n    this.setAttribute(\"alt\", \"icon\");\n    this.classList.add(\"iconset\");\n    this.init(Bs5IconComponent.observedAttributes);\n    // set default values\n    if (!this.scope.direction) {\n      this.scope.direction = \"up\";\n      this.attributeChangedCallback(\n        \"direction\",\n        null,\n        this.scope.direction,\n        null\n      );\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","export default \"<div class=\\\"modal fade\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" rv-add-class=\\\"modal.contextualClass | prepend 'modal-'\\\">\\n  <div class=\\\"modal-dialog\\\">\\n    <div class=\\\"modal-content\\\">\\n      <div class=\\\"modal-header\\\" rv-show=\\\"modal.title\\\">\\n        <h5 class=\\\"modal-title\\\" rv-template=\\\"modal.title\\\"></h5>\\n        <button type=\\\"button\\\" class=\\\"btn-close\\\" aria-label=\\\"Close\\\" rv-on-click=\\\"dismiss\\\"></button>\\n      </div>\\n      <div class=\\\"modal-body\\\">\\n        <p rv-template=\\\"modal.message\\\"></p>\\n      </div>\\n      <div class=\\\"modal-footer\\\" rv-show=\\\"modal.buttons | size | gt 0\\\">\\n        <div rv-each-button=\\\"modal.buttons\\\">\\n          <button type=\\\"button\\\" class=\\\"btn\\\" rv-add-class=\\\"button.class\\\" rv-on-click=\\\"button.action\\\" rv-template=\\\"modal.label\\\"></button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","import { Component, ScopeBase } from \"@ribajs/core\";\n\nimport { getElementFromEvent } from \"@ribajs/utils/src/dom.js\";\nimport { Modal, ModalNotification } from \"../../services/index.js\";\nimport { Scope as Bs5NotificationContainerScope } from \"../bs5-notification-container/bs5-notification-container.component.js\";\nimport template from \"./bs5-modal-item.component.html?raw\";\n\ninterface Scope extends ScopeBase {\n  iconUrl?: string;\n  modal?: ModalNotification;\n  onHidden: Bs5ModalItemComponent[\"onHidden\"];\n  dismiss: Bs5ModalItemComponent[\"dismiss\"];\n  index: number;\n  $parent?: any;\n  $event?: CustomEvent;\n}\n\n/**\n * Use this component to show a modal inside a bs5-notification-container\n */\nexport class Bs5ModalItemComponent extends Component {\n  public static tagName = \"bs5-modal-item\";\n\n  public _debug = false;\n  protected autobind = true;\n\n  protected modalService?: Modal;\n\n  static get observedAttributes(): string[] {\n    return [\"modal\", \"index\"];\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"modal\"];\n  }\n\n  public scope: Scope = {\n    onHidden: this.onHidden.bind(this),\n    index: -1,\n    dismiss: this.dismiss.bind(this),\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ModalItemComponent.observedAttributes);\n  }\n\n  protected async afterBind() {\n    this.initModal();\n    await super.afterBind();\n  }\n\n  protected initModal() {\n    const modal = this.scope.modal;\n    const modalEl = this.firstElementChild as HTMLElement | null;\n    if (modal && modalEl) {\n      this.modalService = new Modal(modalEl, {\n        focus: modal.focus !== undefined ? modal.focus : true,\n        keyboard: modal.keyboard !== undefined ? modal.keyboard : true,\n        backdrop: modal.backdrop !== undefined ? modal.backdrop : true,\n      });\n\n      // Call onHidden on hidden event once\n      modalEl.addEventListener(Modal.EVENT_HIDDEN, this.scope.onHidden, {\n        once: true,\n      });\n\n      // show modal using the modal service\n      this.modalService.show();\n    }\n  }\n\n  // Can be called if modal should be removed\n  public dismiss() {\n    this.modalService?.hide();\n  }\n\n  // Remove modal from dom once shown\n  public onHidden(event: Event, el?: HTMLElement) {\n    if (!el) {\n      el = getElementFromEvent(event);\n    }\n    const notificationContainer: Bs5NotificationContainerScope | null =\n      this.scope.$parent?.$parent || null;\n    if (\n      typeof notificationContainer?.onItemHide === \"function\" &&\n      this.scope.modal &&\n      el\n    ) {\n      notificationContainer.onItemHide(\n        event,\n        el,\n        this.scope.index,\n        this.scope.modal\n      );\n    }\n  }\n  protected async template() {\n    // const { default: template } = await import(\n    //   \"./bs5-modal-item.component.html?raw\"\n    // );\n    return template;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Collapse } from \"../../services/collapse.js\";\n\nexport class Bs5NavbarComponent extends Component {\n  public static tagName = \"bs5-navbar\";\n\n  public scope: any = {\n    toggle: this.toggle,\n    show: this.show,\n    hide: this.hide,\n    isCollapsed: true,\n    collapseSelector: \".navbar-collapse\",\n  };\n\n  protected collapseTargets: Map<HTMLElement, Collapse> = new Map();\n  protected routerEvents?: EventDispatcher;\n\n  static get observedAttributes(): string[] {\n    return [\"collapse-selector\"];\n  }\n\n  constructor() {\n    super();\n    this.onStateChange = this.onStateChange.bind(this);\n  }\n\n  protected async afterBind() {\n    this.hide();\n    await super.afterBind();\n  }\n\n  public toggle(event?: Event) {\n    for (const collapseService of this.collapseTargets.values()) {\n      collapseService.toggle();\n    }\n\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  public show(event?: Event) {\n    for (const collapseService of this.collapseTargets.values()) {\n      collapseService.show();\n    }\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  public hide(event?: Event) {\n    for (const collapseService of this.collapseTargets.values()) {\n      collapseService.hide();\n    }\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.routerEvents = new EventDispatcher(\"main\");\n    this.routerEvents.on(\"newPageReady\", this.onNewPageReady, this);\n\n    this.setCollapseElement();\n\n    this.onStateChange();\n\n    this.init(Bs5NavbarComponent.observedAttributes);\n  }\n\n  protected setCollapseElement() {\n    const collapseElements = Array.from(\n      this.querySelectorAll<HTMLElement>(this.scope.collapseSelector) || []\n    );\n\n    // remove old collapse targets\n    for (const collapseElement of this.collapseTargets.keys()) {\n      if (!collapseElements.find((ce) => ce === collapseElement)) {\n        this.disposeCollapseTarget(collapseElement);\n      }\n    }\n\n    // add new collapse targets\n    for (const collapseElement of collapseElements) {\n      if (!this.collapseTargets.has(collapseElement)) {\n        this.collapseTargets.set(\n          collapseElement,\n          new Collapse(collapseElement, { toggle: false })\n        );\n        collapseElement.addEventListener(\n          Collapse.Events.shown,\n          this.onStateChange\n        );\n        collapseElement.addEventListener(\n          Collapse.Events.hidden,\n          this.onStateChange\n        );\n      }\n    }\n\n    this.hide();\n  }\n\n  protected disposeCollapseTargets() {\n    for (const collapseElement of this.collapseTargets.keys()) {\n      this.disposeCollapseTarget(collapseElement);\n    }\n  }\n\n  protected disposeCollapseTarget(collapseElement: HTMLElement) {\n    const collapseService = this.collapseTargets.get(collapseElement);\n    if (collapseService) {\n      collapseService.dispose();\n    }\n    this.collapseTargets.delete(collapseElement);\n    collapseElement.removeEventListener(\n      Collapse.Events.shown,\n      this.onStateChange\n    );\n    collapseElement.removeEventListener(\n      Collapse.Events.hidden,\n      this.onStateChange\n    );\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.disposeCollapseTargets();\n    if (this.routerEvents) {\n      this.routerEvents.off(\"newPageReady\", this.onNewPageReady, this);\n    }\n  }\n\n  protected onStateChange() {\n    this.scope.isCollapsed = this.collapseTargets\n      .values()\n      .next()\n      .value?.isCollapsed();\n\n    if (this.scope.isCollapsed) {\n      this.classList.add(Collapse.CLASS_NAME_COLLAPSED);\n      this.setAttribute(\"aria-expanded\", \"false\");\n    } else {\n      this.classList.remove(Collapse.CLASS_NAME_COLLAPSED);\n      this.setAttribute(\"aria-expanded\", \"true\");\n    }\n  }\n\n  protected onNewPageReady() {\n    this.hide();\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName === \"collapseSelector\") {\n      this.setCollapseElement();\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","export default \"<div class=\\\"toast-container\\\">\\n  <div aria-live=\\\"polite\\\" aria-atomic=\\\"true\\\" class=\\\"toast-item-container\\\" rv-add-class=\\\"positionClass\\\">\\n    <div rv-each-toast=\\\"notifications\\\" >\\n      <div rv-if=\\\"toast.type | eq 'toast'\\\">\\n        <bs5-toast-item rv-index=\\\"%toast%\\\" rv-parent rv-icon-url=\\\"iconUrl\\\" rv-co-toast=\\\"toast\\\"></bs5-toast-item>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n<div rv-each-modal=\\\"notifications\\\">\\n  <div rv-if=\\\"modal.type | eq 'modal'\\\">\\n    <bs5-modal-item rv-index=\\\"%modal%\\\" rv-parent rv-icon-url=\\\"iconUrl\\\" rv-co-modal=\\\"modal\\\"></bs5-modal-item>\\n  </div>\\n</div>\"","import { Component, ScopeBase } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { Notification } from \"../../types/index.js\";\n\nimport template from \"./bs5-notification-container.component.html?raw\";\n\nexport interface Scope extends ScopeBase {\n  iconUrl?: string;\n  positionClass: string;\n  notifications: Notification[];\n  channelName: string;\n  onItemHide: Bs5NotificationContainerComponent[\"onItemHide\"];\n}\n\nexport class Bs5NotificationContainerComponent extends Component {\n  public static tagName = \"bs5-notification-container\";\n\n  protected autobind = true;\n  public _debug = false;\n\n  protected notificationDispatcher?: EventDispatcher;\n\n  static get observedAttributes(): string[] {\n    return [\"icon-url\", \"position-class\", \"channel-name\"];\n  }\n\n  public scope: Scope = {\n    notifications: [],\n    positionClass: \"absolute-bottom absolute-center\",\n    channelName: \"toast\",\n    onItemHide: this.onItemHide,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5NotificationContainerComponent.observedAttributes);\n  }\n\n  // Called by child if notification item wants to be removed\n  public onItemHide(\n    this: Scope,\n    event: Event,\n    el: HTMLElement,\n    index: number,\n    notification: Notification\n  ) {\n    if (index > -1) {\n      this.notifications.splice(index, 1);\n    } else {\n      console.warn(\"Notification not found\", notification);\n    }\n  }\n\n  protected onShowNotification(notification: Notification) {\n    this.debug(\n      \"Received notification container on \" + this.scope.channelName,\n      this.scope,\n      notification\n    );\n    this.scope.notifications.push(notification);\n  }\n\n  protected async afterBind() {\n    // Add event dispatcher to listen for toast notifications\n    this.notificationDispatcher = new EventDispatcher(this.scope.channelName);\n    this.notificationDispatcher.on(\n      \"show-notification\",\n      this.onShowNotification,\n      this\n    );\n    await super.afterBind();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    (this.notificationDispatcher as EventDispatcher).off(\n      \"show-notification\",\n      this.onShowNotification,\n      this\n    );\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected async template() {\n    // Only set the component template if there no childs or the childs are templates\n    if (!hasChildNodesTrim(this)) {\n      // TODO this is not working if multiple components are used on the same page\n      // const { default: template } = await import(\n      //   \"./bs5-notification-container.component.html?raw\"\n      // );\n      return template;\n    }\n    return null;\n  }\n}\n","import {\n  Bs5ContentsComponent,\n  Scope as Bs5ContentsComponentScope,\n} from \"../bs5-contents/bs5-contents.component.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\n\nexport interface Anchor {\n  element: HTMLHeadingElement;\n  href: string;\n  title: string;\n  childs: Anchor[];\n}\n\nexport interface Scope extends Bs5ContentsComponentScope {\n  /**\n   * Pixels to offset from top when calculating position of scroll.\n   */\n  offset: number;\n  /**\n   * Pixels to offset from bottom when calculating position of scroll.\n   */\n  offsetBottom: number;\n}\n\nexport class Bs5ScrollspyComponent extends Bs5ContentsComponent {\n  public static tagName = \"bs5-scrollspy\";\n\n  protected autobind = true;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"headers-start\",\n      \"headers-depth\",\n      \"find-header-id-depth\",\n      \"header-parent-selector\",\n      \"offset\",\n      \"offset-bottom\",\n      \"scroll-offset\",\n    ];\n  }\n\n  public scope: Scope = {\n    headersDepth: 1,\n    headersStart: 2,\n    findHeaderIdDepth: 1,\n    headerParentSelector: undefined,\n    offset: 0,\n    offsetBottom: 0,\n    scrollOffset: 0,\n    anchors: [],\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ScrollspyComponent.observedAttributes);\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"headersStart\", \"headersDepth\", \"headerParentSelector\"];\n  }\n\n  protected async template() {\n    // Only set the component template if there no childs already\n    if (hasChildNodesTrim(this)) {\n      return null;\n    } else {\n      const { default: template } = await import(\n        \"./bs5-scrollspy.component.html?raw\"\n      );\n      return template;\n    }\n  }\n}\n","export default \"<div rv-add-class=\\\"'drop' | append dropdownDirection\\\">\\n  <button class=\\\"btn btn-icon dropdown-toggle dropdown-toggle-share d-flex align-items-center\\\" rv-id=\\\"dropdownId\\\"\\n    rv-template=\\\"labelTemplate\\\" aria-label=\\\"Toggle dropdown share menu\\\"></button>\\n  <div class=\\\"dropdown-menu\\\" rv-aria-labelledby=\\\"dropdownId\\\" rv-add-class=\\\"'dropdown-menu-' | append dropdownAlignment\\\">\\n\\n    <div rv-each-item=\\\"shareItems\\\">\\n      <div rv-if=\\\"item.available\\\" rv-on-click=\\\"shareOnService | args item\\\">\\n        <a rv-if=\\\"item.type | eq 'download'\\\" class=\\\"dropdown-item no-barba cursor-pointer\\\" rv-type=\\\"item.type\\\"\\n          target=\\\"_blank\\\" rv-download=\\\"getFilename | call item\\\" rv-href=\\\"item.url\\\" rv-html=\\\"item.label\\\">\\n        </a>\\n        <div class=\\\"dropdown-item cursor-pointer\\\" rv-unless=\\\"item.type | eq 'download'\\\" rv-type=\\\"item.type\\\"\\n          rv-html=\\\"item.label\\\"></div>\\n      </div>\\n\\n    </div>\\n\\n  </div>\\n</div>\"","export default \"<div class=\\\"share-label\\\" rv-on-click=\\\"share\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" rv-text=\\\"label\\\"></div>\\n\"","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { getUrl } from \"@ribajs/utils/src/url\";\nimport template from \"./bs5-share.component.html?raw\";\nimport labelTemplate from \"./bs5-share.label.html?raw\";\nimport { ShareItem, ShareUrlType } from \"../../types/index.js\";\nimport { Dropdown } from \"@ribajs/bs5\";\nimport {\n  hasChildNodesTrim,\n  copyTextToClipboard,\n  stripHtml,\n} from \"@ribajs/utils\";\n\nexport interface Scope extends ScopeBase {\n  type: ShareUrlType;\n  title: string;\n  text: string;\n  /** Page url to share */\n  url?: string;\n  label: string;\n  labelTemplate: string;\n  filename?: string;\n\n  /** true if the browser runs on Android */\n  isAndroid: boolean;\n  /** true if the browser runs on iOS */\n  isIos: boolean;\n  /** true if the browser runs on a desktop computer */\n  isDesktop: boolean;\n  /** true if the browser supports native share */\n  isNative: boolean;\n  dropdownId: string;\n  /**\n   * Object with share urls like WhatsApp, Telegram, instagram etc used if the native share is not available\n   * Only used if the browser has not an native share support like on android and iOS\n   * */\n  shareItems: ShareItem[];\n\n  dropdownDirection: \"up\" | \"down\" | \"start\" | \"end\";\n  dropdownAlignment: \"end\" | \"start\" | \"auto\";\n\n  labelFacebook: string;\n  labelTwitter: string;\n  labelPinterest: string;\n  labelWhatsapp: string;\n  labelTelegram: string;\n  labelEmail: string;\n  labelDownload: string;\n  labelClipboard: string;\n\n  // Methods\n  shareOnService: Bs5ShareComponent[\"shareOnService\"];\n  share: Bs5ShareComponent[\"share\"];\n  getFilename: Bs5ShareComponent[\"getFilename\"];\n}\n\nexport interface NavigatorShareParam {\n  url: string;\n  text: string;\n  title: string;\n}\n\ndeclare global {\n  // tslint:disable: interface-name\n  interface Navigator {\n    share: (data?: ShareData) => Promise<void>;\n  }\n}\n\n/**\n * Component to share the a link\n * Similar projects which are can share stuff:\n *  * https://github.com/nimiq/web-share-shim\n *  * http://webintents.org/\n *  * http://chriswren.github.io/native-social-interactions/\n *  * https://github.com/dimsemenov/PhotoSwipe/blob/master/src/js/ui/photoswipe-ui-default.js\n *\n */\nexport class Bs5ShareComponent extends Component {\n  public static tagName = \"bs5-share\";\n\n  public _debug = false;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"type\",\n      \"title\",\n      \"text\",\n      \"url\",\n      \"media-url\",\n      \"filename\",\n      \"label\",\n      \"dropdown-direction\",\n      \"dropdown-alignment\",\n      \"label-facebook\",\n      \"label-twitter\",\n      \"label-pinterest\",\n      \"label-whatsapp\",\n      \"label-telegram\",\n      \"label-email\",\n      \"label-download\",\n      \"label-clipboard\",\n    ];\n  }\n\n  protected dropdown?: Dropdown;\n\n  // Count of Bs5ShareComponent components\n  static count = 0;\n\n  public scope: Scope;\n\n  constructor() {\n    super();\n    this.scope = this.getScopeDefaults();\n    // this.debug(\"constructor\", this.scope);\n    Bs5ShareComponent.count++;\n    this.onExternalOpenEvent = this.onExternalOpenEvent.bind(this);\n    this.onExternalCloseEvent = this.onExternalCloseEvent.bind(this);\n  }\n\n  public getFilename(item: ShareItem) {\n    if (item.filename) {\n      return item.filename;\n    }\n    const url = this.getMediaUrlForShare();\n    const filename = url.split(\"/\").pop();\n    return filename;\n  }\n\n  protected getDefaultShareServices() {\n    const newLine = \"%0A\";\n    const shareItems: ShareItem[] = [\n      {\n        id: \"facebook\",\n        label: this.scope.labelFacebook,\n        // It is not possible to add a message on facebook sharer.php but with the Dialog API, see https://developers.facebook.com/docs/javascript/reference/FB.ui\n        urlTemplate: \"https://www.facebook.com/sharer/sharer.php?u={{url}}\",\n        mediaUrlTemplate:\n          \"https://www.facebook.com/sharer/sharer.php?u={{media_url}}\",\n        type: \"popup\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      {\n        id: \"twitter\",\n        label: this.scope.labelTwitter,\n        urlTemplate:\n          \"https://twitter.com/intent/tweet?text={{text}}&url={{url}}\",\n        mediaUrlTemplate: `https://twitter.com/intent/tweet?text={{text}}&url={{media_url}}${newLine}({{url}})`,\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      {\n        id: \"pinterest\",\n        label: this.scope.labelPinterest,\n        urlTemplate:\n          \"http://www.pinterest.com/pin/create/button/\" +\n          \"?url={{url}}&media={{media_url}}&description={{text}}\",\n        type: \"popup\",\n        url: \"\",\n\n        availableFor: [\"image\", \"video\"],\n      },\n      {\n        id: \"whatsapp\",\n        label: this.scope.labelWhatsapp,\n        urlTemplate: `https://api.whatsapp.com/send?text={{text}}${newLine}${newLine}{{url}}`,\n        mediaUrlTemplate: `https://api.whatsapp.com/send?text={{text}}${newLine}${newLine}{{media_url}}${newLine}({{url}})`,\n        type: \"popup\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      {\n        id: \"telegram\",\n        label: this.scope.labelTelegram,\n        urlTemplate: `https://telegram.me/share/url?url={{url}}&text={{text}}`,\n        mediaUrlTemplate: `https://telegram.me/share/url?url={{media_url}}&text={{text}}${newLine}({{url}})`,\n        type: \"popup\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      {\n        id: \"email\",\n        label: this.scope.labelEmail,\n        urlTemplate: `mailto:?subject={{title}}&body={{text}}${newLine}${newLine}{{url}}`,\n        mediaUrlTemplate: `mailto:?subject={{title}}&body={{text}}${newLine}${newLine}{{media_url}}${newLine}({{url}})`,\n        type: \"href\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n      // {\n      //   id: \"sms\",\n      //   label: \"SMS\",\n      //   urlTemplate: \"sms:?body={{text}}\",\n      //   type: 'href',\n      //   url: \"\",\n      //   canPassUrl: false,\n      //   availableFor: ['page', 'image', 'video'],\n      // },\n      {\n        id: \"download\",\n        label: this.scope.labelDownload,\n        urlTemplate: \"{{raw_media_url}}\",\n        type: \"download\",\n        url: \"\",\n        availableFor: [\"image\", \"video\"],\n        filename: this.scope.filename,\n      },\n      {\n        id: \"clipboard\",\n        label: this.scope.labelClipboard,\n        urlTemplate: \"{{url}}\",\n        mediaUrlTemplate: `{{media_url}}`,\n        type: \"clipboard\",\n        url: \"\",\n        availableFor: [\"page\", \"image\", \"video\"],\n      },\n    ];\n    return shareItems;\n  }\n\n  protected isIos() {\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i) !== null;\n  }\n\n  protected isAndroid() {\n    return navigator.userAgent.match(/Android/i) !== null;\n  }\n\n  protected browserSupportsNativeShare() {\n    return typeof navigator.share === \"function\";\n  }\n\n  protected getScopeDefaults(): Scope {\n    const scope: Scope = {\n      type: \"page\",\n      title: document.title,\n      text: \"Look at this! \",\n      url: undefined,\n      label: \"Share\",\n      labelTemplate,\n      isAndroid: this.isAndroid(),\n      isIos: this.isIos(),\n      isDesktop: false,\n      isNative: this.browserSupportsNativeShare(),\n      dropdownId: \"dropdownShare\" + Bs5ShareComponent.count,\n      shareItems: [],\n      dropdownDirection: \"down\",\n      dropdownAlignment: \"auto\",\n      // Service labels\n      labelFacebook: \"Facebook\",\n      labelTwitter: \"Twitter\",\n      labelPinterest: \"Pinterest\",\n      labelWhatsapp: \"Whatsapp\",\n      labelTelegram: \"Telegram\",\n      labelEmail: \"Email\",\n      labelDownload: \"Download\",\n      labelClipboard: \"Copy to clipboard\",\n      // Methods\n      share: this.share,\n      shareOnService: this.shareOnService,\n      getFilename: this.getFilename,\n    };\n\n    // on those two support \"mobile deep links\", so HTTP based fallback for all others.\n    scope.isDesktop = !scope.isIos && !scope.isAndroid;\n\n    return scope;\n  }\n\n  protected onExternalOpenEvent() {\n    this.dropdown?.show();\n  }\n\n  protected onExternalCloseEvent() {\n    this.dropdown?.hide();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ShareComponent.observedAttributes);\n    this.addEventListeners();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListeners();\n  }\n\n  protected addEventListeners() {\n    this.addEventListener(\"open\", this.onExternalOpenEvent);\n    this.addEventListener(\"btn-close\", this.onExternalCloseEvent);\n  }\n\n  protected removeEventListeners() {\n    this.removeEventListener(\"open\", this.onExternalOpenEvent);\n    this.removeEventListener(\"btn-close\", this.onExternalOpenEvent);\n  }\n\n  protected getURLForShare() {\n    if (this.scope.type === \"page\" && this.scope.url) {\n      return getUrl(this.scope.url);\n    }\n    return window.location.href;\n  }\n\n  protected getMediaUrlForShare() {\n    if (this.scope.type !== \"page\" && this.scope.url) {\n      return getUrl(this.scope.url);\n    }\n    return \"\";\n  }\n\n  protected getTextForShare() {\n    return stripHtml(this.scope.text);\n  }\n\n  /**\n   * Currently only used for email\n   * @param appendUrl\n   */\n  protected getTitleForShare() {\n    return stripHtml(this.scope.title);\n  }\n\n  protected updateShareURLs() {\n    for (const shareItem of this.scope.shareItems) {\n      const url = this.getURLForShare();\n      const mediaUrl = this.getMediaUrlForShare();\n      const shareText = this.getTextForShare();\n      const shareTitle = this.getTitleForShare();\n      let urlTemplate = shareItem.urlTemplate;\n\n      if (this.scope.type !== \"page\" && shareItem.mediaUrlTemplate) {\n        urlTemplate = shareItem.mediaUrlTemplate;\n      }\n\n      const encode = shareItem.type === \"clipboard\" ? false : true;\n\n      const shareURL = urlTemplate\n        .replace(\"{{url}}\", encode ? encodeURIComponent(url) : url)\n        .replace(\n          \"{{media_url}}\",\n          encode ? encodeURIComponent(mediaUrl) : mediaUrl\n        )\n        .replace(\"{{raw_media_url}}\", mediaUrl)\n        .replace(\"{{text}}\", encode ? encodeURIComponent(shareText) : shareText)\n        .replace(\n          \"{{title}}\",\n          encode ? encodeURIComponent(shareTitle) : shareTitle\n        );\n\n      shareItem.available = shareItem.availableFor.includes(this.scope.type);\n      shareItem.url = shareURL;\n    }\n  }\n\n  protected initDropdown() {\n    const dropDownButtonElement = this.querySelector(\n      \".dropdown-toggle-share\"\n    ) as HTMLButtonElement | HTMLAnchorElement;\n    if (!dropDownButtonElement) {\n      console.warn(\n        'Element with selector \".dropdown-toggle-share\" not found!',\n        this\n      );\n      return;\n    }\n    this.dropdown = new Dropdown(dropDownButtonElement);\n  }\n\n  /**\n   * New browser popup with the external site (e.g. Facebook) on you want to share your url\n   * @param binding\n   * @param event\n   * @param controller\n   * @param el\n   */\n  public async shareOnService(item: ShareItem, event: Event) {\n    this.dropdown?.hide();\n\n    if (item.type === \"clipboard\") {\n      event.preventDefault();\n      event.stopPropagation();\n      await copyTextToClipboard(item.url);\n      return false;\n    }\n\n    // We use the default browser anchor href logic for download and href\n    if (item.type === \"download\") {\n      return true;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    window.open(\n      item.url,\n      \"Share\",\n      \"scrollbars=yes,resizable=yes,toolbar=no,\" +\n        \"location=yes,width=550,height=420,top=100,left=\" +\n        (window.screen ? Math.round(screen.width / 2 - 275) : 100)\n    );\n\n    return false;\n  }\n\n  public async share(event: Event): Promise<any> {\n    this.debug(\"share\", this.scope);\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.scope.isNative && !this.scope.isDesktop) {\n      try {\n        await navigator.share({\n          title: this.scope.title,\n          text: `${this.scope.text}\\r\\n\\r\\n`,\n          url: this.scope.url || window.location.href,\n        });\n      } catch (error: any) {\n        if (error.name === \"AbortError\") {\n          // TODO show flash message\n          // this.debug(error.message);\n          return;\n        }\n        console.error(`Error ${error.name}: ${error.message}`, error);\n      }\n    } else {\n      this.updateShareURLs();\n      return this.dropdown?.toggle();\n    }\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    // this.debug('beforeBind');\n  }\n\n  protected async afterBind() {\n    this.initDropdown();\n    this.debug(\"afterBind\", this.scope);\n    this.scope.shareItems = this.getDefaultShareServices();\n    await super.afterBind();\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (this && hasChildNodesTrim(this)) {\n      this.scope.labelTemplate = this.innerHTML;\n    }\n    return template;\n  }\n}\n","import { ScrollPosition } from \"../types/scroll-position.js\";\n\nexport const getScrollPosition = (\n  element: HTMLUnknownElement | Window\n): ScrollPosition => {\n  const window = element as Window;\n  const el = element as HTMLUnknownElement;\n  // If element is window\n  if (window.document && window.location) {\n    const scrollPosition: ScrollPosition = {\n      /** horizontal: left / right / width */\n      x: window.pageXOffset,\n      /** vertical: top / bottom / height */\n      y: window.pageYOffset,\n      /** horizontal: left / right / width */\n      maxX:\n        document.documentElement.scrollWidth -\n        document.documentElement.clientWidth,\n      /** vertical: top / bottom / height */\n      maxY:\n        document.documentElement.scrollHeight -\n        document.documentElement.clientHeight,\n    };\n    return scrollPosition;\n  }\n  const scrollPosition: ScrollPosition = {\n    /** horizontal: left / right / width */\n    x: el.scrollLeft,\n    /** vertical: top / bottom / height */\n    y: el.scrollTop,\n    /** horizontal: left / right / width */\n    maxX: el.scrollWidth - el.clientWidth,\n    /** vertical: top / bottom / height */\n    maxY: el.scrollHeight - el.clientHeight,\n  };\n\n  return scrollPosition;\n};\n\nexport const isScrollable = (element: HTMLUnknownElement) => {\n  const scrollPosition = getScrollPosition(element);\n  return scrollPosition.maxX > 0 || scrollPosition.maxY > 0;\n};\n","import { EventDispatcher } from \"@ribajs/events\";\n\nexport interface GameloopOptions {\n  maxFPS?: number;\n}\n\n/**\n * @see https://www.sitepoint.com/quick-tip-game-loop-in-javascript/\n * @see https://isaacsukin.com/news/2015/01/detailed-explanation-javascript-game-loops-and-timing#fps-control\n */\nexport class Gameloop {\n  public static events = new EventDispatcher(\"gameloop\");\n\n  public static maxFPS = 60;\n\n  public static getFps() {\n    return this.fps;\n  }\n\n  public static startLoop(options: GameloopOptions = {}) {\n    this.setOptions(options);\n\n    if (!this.loopStarted) {\n      this.loopStarted = true;\n      window.requestAnimationFrame(this.loop.bind(this));\n    }\n  }\n\n  public static fps = 60;\n\n  // We want to simulate 1000 ms / 60 FPS = 16.667 ms per frame every time we run scroll()\n  protected static timestep = 1000 / 60;\n\n  protected static loopStarted = false;\n\n  protected static lastFrameTimeMs = 0;\n\n  protected static delta = 0;\n\n  protected static framesThisSecond = 0;\n\n  protected static lastFpsUpdate = 0;\n\n  protected static frameID = 0;\n\n  protected static setOptions(options: GameloopOptions) {\n    this.maxFPS =\n      typeof options.maxFPS === \"number\" ? options.maxFPS : this.maxFPS;\n  }\n\n  /**\n   * The main / game loop\n   * @param timestamp\n   */\n  protected static loop(timestamp: number) {\n    // Throttle the frame rate.\n    if (timestamp < this.lastFrameTimeMs + 1000 / this.maxFPS) {\n      this.frameID = window.requestAnimationFrame(this.loop.bind(this));\n      return;\n    }\n\n    const progress = timestamp - this.lastFrameTimeMs;\n    this.delta += progress;\n    this.lastFrameTimeMs = timestamp;\n\n    this.begin(timestamp, this.delta);\n\n    if (timestamp > this.lastFpsUpdate + 1000) {\n      this.fps = 0.25 * this.framesThisSecond + 0.75 * this.fps;\n\n      this.lastFpsUpdate = timestamp;\n      this.framesThisSecond = 0;\n    }\n    this.framesThisSecond++;\n\n    let numUpdateSteps = 0;\n    while (this.delta >= this.timestep) {\n      this.update(this.timestep);\n      this.delta -= this.timestep;\n      if (++numUpdateSteps >= 240) {\n        this.panic();\n        break;\n      }\n    }\n\n    this.render(this.delta / this.timestep);\n\n    this.end(this.fps);\n\n    this.frameID = window.requestAnimationFrame(this.loop.bind(this));\n  }\n\n  protected static begin(timestamp: number, delta: number) {\n    this.events.trigger(\"begin\", timestamp, delta);\n  }\n\n  protected static render(interp: number) {\n    this.events.trigger(\"render\", interp);\n  }\n\n  protected static update(delta: number) {\n    this.events.trigger(\"update\", delta);\n  }\n\n  protected static end(delta: number) {\n    this.events.trigger(\"end\", delta);\n  }\n\n  protected static panic() {\n    this.delta = 0; // discard the unsimulated time\n  }\n\n  constructor(options: GameloopOptions = {}) {\n    Gameloop.setOptions(options);\n  }\n}\n","import { getScrollPosition } from \"../helper/scroll.js\";\nimport { Gameloop } from \"./gameloop.service.js\";\nimport { throttle } from \"@ribajs/utils/src/control\";\n\nexport interface AutoscrollOptions {\n  angle?: \"vertical\" | \"horizontal\";\n  direction?: 1 | -1;\n  velocity?: number;\n  width?: string;\n  pauseOnHover?: boolean;\n}\n\nexport class Autoscroll {\n  protected touchCapable = \"ontouchstart\" in window;\n\n  protected direction = 1;\n\n  protected limit: number;\n\n  protected options: AutoscrollOptions;\n\n  protected el: HTMLElement;\n\n  protected _pause = false;\n\n  protected velocity = 0.008;\n\n  protected move = 0;\n\n  protected lastMove = 0;\n\n  protected angle: \"horizontal\" | \"vertical\" = \"horizontal\";\n\n  protected pauseOnHover = true;\n\n  protected resumeTimer: number | null = null;\n\n  constructor(el: HTMLElement, options: AutoscrollOptions = {}) {\n    this.el = el;\n    this.options = options;\n    this.direction = this.options.direction || this.direction;\n    this.velocity = this.options.velocity || this.velocity;\n    this.angle = this.options.angle || this.angle;\n    this.pauseOnHover =\n      typeof this.options.pauseOnHover === \"boolean\"\n        ? this.options.pauseOnHover\n        : this.pauseOnHover;\n\n    this.limit = this.getLimit(this.el);\n    this.move = this.getPosition();\n\n    if (this.direction === -1) {\n      // start right\n      this.el.scrollLeft = this.limit;\n    } else {\n      // start left\n      this.el.scrollLeft = 0;\n    }\n\n    this.addEventListeners();\n\n    Gameloop.startLoop({ maxFPS: 60 });\n  }\n\n  /**\n   * @note this is not the gameloop update method!\n   */\n  public update() {\n    this.limit = this.getLimit(this.el);\n    this.setPosition();\n  }\n\n  public destroy() {\n    this.removeEventListeners();\n  }\n\n  public pause() {\n    this.el.style.scrollBehavior = \"\";\n    this._pause = true;\n  }\n\n  /** Resume autoscrolling if this method was not called up for [delay] milliseconds */\n  public resume(delay = 0) {\n    if (!this._pause) {\n      return;\n    }\n\n    this.stopResumeTimeout();\n\n    this.resumeTimer = window.setTimeout(() => {\n      this.setPosition();\n      this._pause = false;\n      // Disable smooth scrolling on autoscroll if set\n      this.el.style.scrollBehavior = \"auto\";\n    }, delay);\n  }\n\n  protected addEventListeners() {\n    this.removeEventListeners();\n    this.onResize = this.onResize.bind(this);\n    this.onMouseIn = this.onMouseIn.bind(this);\n    this.onMouseOut = this.onMouseOut.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n    this.render = this.render.bind(this);\n    this.updateMove = this.updateMove.bind(this);\n\n    window.addEventListener(\"resize\", this.onResize, {\n      passive: true,\n    });\n\n    this.el.addEventListener(\"mouseenter\", this.onMouseIn, {\n      passive: true,\n    });\n    this.el.addEventListener(\"mouseover\", this.onMouseIn, {\n      passive: true,\n    });\n    this.el.addEventListener(\"focusin\", this.onMouseIn, {\n      passive: true,\n    });\n    this.el.addEventListener(\"touchstart\", this.onMouseIn, {\n      passive: true,\n    });\n\n    this.el.addEventListener(\"mouseleave\", this.onMouseOut, {\n      passive: true,\n    });\n    this.el.addEventListener(\"focusout\", this.onMouseOut, {\n      passive: true,\n    });\n\n    this.el.addEventListener(\"mouseup\", this.onMouseUp, {\n      passive: true,\n    });\n    this.el.addEventListener(\"touchend\", this.onMouseUp, {\n      passive: true,\n    });\n\n    if (this.touchCapable) {\n      this.el.addEventListener(\"scroll\", this.onMouseUp, {\n        passive: true,\n      });\n      this.el.addEventListener(\"scrollend\", this.onMouseUp, {\n        passive: true,\n      });\n      // See ScrollEventsService for \"scrollended\" event\n      this.el.addEventListener(\"scrollended\", this.onMouseUp, {\n        passive: true,\n      });\n    } else {\n      this.el.addEventListener(\"scroll\", this.onScroll, {\n        passive: true,\n      });\n      this.el.addEventListener(\"scrollend\", this.onScroll, {\n        passive: true,\n      });\n      this.el.addEventListener(\"scrollended\", this.onScroll, {\n        passive: true,\n      });\n    }\n\n    Gameloop.events.on(\"render\", this.render);\n    Gameloop.events.on(\"update\", this.updateMove);\n  }\n\n  protected removeEventListeners() {\n    window.removeEventListener(\"resize\", this.onResize);\n\n    this.el.removeEventListener(\"mouseenter\", this.onMouseIn);\n    this.el.removeEventListener(\"mouseover\", this.onMouseIn);\n    this.el.removeEventListener(\"focusin\", this.onMouseIn);\n    this.el.removeEventListener(\"touchstart\", this.onMouseIn);\n\n    this.el.removeEventListener(\"mouseleave\", this.onMouseOut);\n    this.el.removeEventListener(\"focusout\", this.onMouseOut);\n\n    this.el.removeEventListener(\"mouseup\", this.onMouseUp);\n    this.el.removeEventListener(\"touchend\", this.onMouseUp);\n\n    if (this.touchCapable) {\n      this.el.removeEventListener(\"scroll\", this.onMouseUp);\n      this.el.removeEventListener(\"scrollend\", this.onMouseUp);\n      this.el.removeEventListener(\"scrollended\", this.onMouseUp);\n    } else {\n      this.el.removeEventListener(\"scroll\", this.onScroll);\n      this.el.removeEventListener(\"scrollend\", this.onScroll);\n      this.el.removeEventListener(\"scrollended\", this.onScroll);\n    }\n\n    Gameloop.events.off(\"render\", this.render);\n    Gameloop.events.off(\"update\", this.updateMove);\n  }\n\n  protected onMouseIn() {\n    if (this.pauseOnHover) {\n      this.pause();\n    }\n  }\n\n  protected onMouseOut() {\n    this.resume(200);\n  }\n\n  protected onMouseUp() {\n    this.resume(1000);\n  }\n\n  protected _onResize() {\n    this.limit = this.getLimit(this.el);\n    this.resume(200);\n  }\n\n  protected onResize = throttle(this._onResize.bind(this));\n\n  protected _onScroll() {\n    this.stopResumeTimeout();\n  }\n\n  protected onScroll = throttle(this._onScroll.bind(this));\n\n  protected stopResumeTimeout() {\n    if (this.resumeTimer !== null) {\n      clearTimeout(this.resumeTimer);\n      this.resumeTimer = null;\n    }\n  }\n\n  protected getPosition() {\n    return (\n      (this.angle === \"vertical\" ? this.el.scrollTop : this.el.scrollLeft) || 0\n    );\n  }\n\n  protected setPosition() {\n    this.move = this.getPosition();\n  }\n\n  protected getLimit(el: HTMLElement) {\n    return this.angle === \"vertical\"\n      ? getScrollPosition(el).maxY\n      : getScrollPosition(el).maxX;\n  }\n\n  /**\n   * This Interpolation:\n   * ```\n   * protected render(Interpolation: number) {\n   * ...\n   * this.move = (this.lastMove + (this.move - this.lastMove) * Interpolation);\n   * ```\n   * is not working here for some reason\n   * like it works in the demos/extras-game-loop demo or here:\n   * https://isaacsukin.com/news/2015/01/detailed-explanation-javascript-game-loops-and-timing\n   *\n   * Without this the scrollbar scrolls smooth, need to find out why.\n   */\n  protected render() {\n    if (this._pause) {\n      return;\n    }\n\n    this.scroll(this.move);\n  }\n\n  protected updateMove(delta: number) {\n    if (this._pause) {\n      return;\n    }\n\n    this.lastMove = this.move;\n    const append = this.velocity * this.direction * delta;\n    this.move += append;\n\n    // Switch directions if we go too far\n    if (this.move <= 0 && this.direction !== 1) {\n      this.direction = 1;\n    }\n\n    if (this.move >= this.limit && this.direction !== -1) {\n      this.direction = -1;\n    }\n  }\n\n  protected scroll(move: number) {\n    if (this.angle === \"vertical\") {\n      this.el.scrollTop = move;\n    } else {\n      this.el.scrollLeft = move;\n    }\n  }\n}\n","import { isScrollable } from \"../helper/scroll.js\";\nimport { throttle } from \"@ribajs/utils/src/control\";\n\nexport interface DragscrollOptions {\n  detectGlobalMove?: boolean;\n}\n\n/**\n * Scroll an scrollable element by dragging and moving your mouse.\n * inspired by https://github.com/asvd/dragscroll\n */\nexport class Dragscroll {\n  protected options: DragscrollOptions;\n  protected lastClientX = 0;\n  protected lastClientY = 0;\n  protected el: HTMLElement;\n  protected pushed = false;\n  protected touchCapable = \"ontouchstart\" in window;\n\n  constructor(\n    el: HTMLElement,\n    options: DragscrollOptions = { detectGlobalMove: true }\n  ) {\n    this.el = el;\n    this.options = options;\n\n    if (this.touchCapable) {\n      // Do noting on touch devices\n      return this;\n    }\n\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.checkDraggable = this.checkDraggable.bind(this);\n\n    el.removeEventListener(\"mousedown\", this.onMouseDown);\n    el.addEventListener(\"mousedown\", this.onMouseDown, {\n      passive: true,\n    });\n\n    window.addEventListener(\"resize\", this.checkDraggable);\n\n    // Use global move if your element does not use the full width / height\n    if (this.options.detectGlobalMove) {\n      window.removeEventListener(\"mouseup\", this.onMouseUp);\n      window.removeEventListener(\"mousemove\", this.onMouseMove);\n\n      window.addEventListener(\"mouseup\", this.onMouseUp, {\n        passive: true,\n      });\n      window.addEventListener(\"mousemove\", this.onMouseMove, {\n        passive: true,\n      });\n    } else {\n      el.removeEventListener(\"mouseup\", this.onMouseUp);\n      el.removeEventListener(\"mousemove\", this.onMouseMove);\n\n      el.addEventListener(\"mouseup\", this.onMouseUp, {\n        passive: true,\n      });\n      el.addEventListener(\"mousemove\", this.onMouseMove, {\n        passive: true,\n      });\n    }\n\n    // initial\n    this.checkDraggable();\n  }\n\n  public destroy() {\n    this.removeEventListeners();\n    this.el.classList.remove(\"draggable\");\n  }\n\n  protected _checkDraggable() {\n    if (isScrollable(this.el)) {\n      this.el.classList.add(\"draggable\");\n    } else {\n      this.el.classList.remove(\"draggable\");\n    }\n  }\n\n  public checkDraggable = throttle(this._checkDraggable.bind(this));\n\n  protected onMouseDown(e: MouseEvent) {\n    this.pushed = true;\n    this.lastClientX = e.clientX;\n    this.lastClientY = e.clientY;\n  }\n\n  protected onMouseUp() {\n    this.pushed = false;\n  }\n\n  protected onMouseMove(e: MouseEvent) {\n    let newScrollX = 0;\n    let newScrollY = 0;\n    if (this.pushed) {\n      this.el.scrollLeft -= newScrollX =\n        -this.lastClientX + (this.lastClientX = e.clientX);\n      this.el.scrollTop -= newScrollY =\n        -this.lastClientY + (this.lastClientY = e.clientY);\n      if (this.el === document.body) {\n        if (document.documentElement) {\n          this.el = document.documentElement;\n        }\n        this.el.scrollLeft -= newScrollX;\n        this.el.scrollTop -= newScrollY;\n      }\n    }\n  }\n\n  protected removeEventListeners() {\n    window.removeEventListener(\"resize\", this.checkDraggable);\n    this.el.removeEventListener(\"mousedown\", this.onMouseDown);\n    this.el.removeEventListener(\"mouseup\", this.onMouseUp);\n    this.el.removeEventListener(\"mousemove\", this.onMouseMove);\n  }\n}\n","import type { BaseEventDetail } from \"../../types/index.js\";\n\nexport abstract class BaseEventsService {\n  protected touchCapable = \"ontouchstart\" in window;\n  /** The element to trigger the events on */\n  protected el: HTMLUnknownElement | HTMLElement | Window;\n  public get isTouchCapable() {\n    return this.touchCapable;\n  }\n  constructor(el: HTMLUnknownElement | HTMLElement | Window) {\n    this.el = el;\n  }\n\n  protected triggerCustomEvent<T = any>(\n    eventName: string,\n    originalEvent: Event,\n    extraParameters: T & BaseEventDetail\n  ) {\n    extraParameters.originalEvent = originalEvent;\n    extraParameters.target = originalEvent.target;\n    // create and dispatch the event\n    const event = new CustomEvent<T>(eventName, {\n      detail: extraParameters,\n    });\n    this.el.dispatchEvent(event);\n  }\n}\n","import {\n  ScrollPosition,\n  ScrollEventsOptions,\n  ScrollDirection,\n  ScrollEventDetail,\n} from \"../../types/index.js\";\nimport { getScrollPosition } from \"../../helper/scroll.js\";\nimport { BaseEventsService } from \"./base-events.service.js\";\n\nexport class ScrollEventsService extends BaseEventsService {\n  public isScrolling = false;\n\n  protected _scrollEvent: Array<\"touchmove\" | \"scroll\" | \"scrollend\">;\n\n  protected delay = 300;\n\n  protected startPosition: ScrollPosition | null = null;\n\n  protected endPosition: ScrollPosition | null = null;\n\n  protected scrollTimer: number | null = null;\n\n  constructor(\n    el: HTMLUnknownElement | Window,\n    options: Partial<ScrollEventsOptions> = {}\n  ) {\n    super(el);\n    this.el = el;\n    this.delay = options.delay || this.delay;\n    this.startPosition = getScrollPosition(this.el);\n    // Watch also native scrollend to not trigger scrollended before scrollend was triggered\n    this._scrollEvent = this.touchCapable\n      ? [\"touchmove\", \"scrollend\", \"scroll\"]\n      : [\"scroll\", \"scrollend\"];\n    this.removeEventListeners();\n    this.addEventListeners();\n  }\n\n  public destroy() {\n    this.removeEventListeners();\n  }\n\n  public get scrollEvent() {\n    return this._scrollEvent;\n  }\n\n  protected getScrollDir(\n    start: ScrollPosition | null,\n    end: ScrollPosition | null\n  ): ScrollDirection {\n    if (!start || !end) {\n      return \"unknown\";\n    }\n    if (start.x > end.x) {\n      return \"right\";\n    }\n    if (start.x < end.x) {\n      return \"left\";\n    }\n    if (start.y > end.y) {\n      return \"down\";\n    }\n    if (start.y < end.y) {\n      return \"up\";\n    }\n    return \"none\";\n  }\n\n  protected removeEventListeners() {\n    for (const eventName of this._scrollEvent) {\n      this.el.removeEventListener(eventName, this.onScrollEvent);\n    }\n  }\n\n  protected addEventListeners() {\n    for (const eventName of this._scrollEvent) {\n      this.el.addEventListener(eventName, this.onScrollEvent, {\n        passive: true,\n      });\n    }\n  }\n\n  protected _onScrollEvent(event: TouchEvent | MouseEvent) {\n    if (!event.target) {\n      return false;\n    }\n\n    if (this.scrollTimer !== null) {\n      clearTimeout(this.scrollTimer);\n      this.scrollTimer = null;\n    }\n\n    if (!this.isScrolling) {\n      this.scrollstart(event);\n    }\n\n    if (this.isScrolling) {\n      this.scroll(event);\n    }\n\n    this.scrollTimer = window.setTimeout(() => {\n      this.scrollended(event);\n    }, this.delay);\n\n    return true;\n  }\n\n  protected onScrollEvent = this._onScrollEvent.bind(\n    this\n  ) as any as EventListener;\n\n  /**\n   * scrollended Event\n   */\n  protected scrollended(event: TouchEvent | MouseEvent) {\n    this.isScrolling = false;\n    this.endPosition = getScrollPosition(this.el);\n    const direction = this.getScrollDir(this.startPosition, this.endPosition);\n    this.triggerCustomEvent<ScrollEventDetail>(\"scrollended\", event, {\n      startPosition: this.startPosition,\n      endPosition: this.endPosition,\n      direction,\n    });\n  }\n\n  /**\n   * scrollstart Event\n   */\n  protected scrollstart(event: TouchEvent | MouseEvent) {\n    this.isScrolling = true;\n    this.startPosition = getScrollPosition(this.el);\n    this.triggerCustomEvent<ScrollEventDetail>(\"scrollstart\", event, {\n      startPosition: this.startPosition,\n    });\n  }\n\n  /**\n   * scrolling, scrollup, scrolldown, scrollleft and scrollright Events\n   */\n  protected _scroll(event: TouchEvent | MouseEvent) {\n    const currentPosition = getScrollPosition(this.el);\n    const direction = this.getScrollDir(this.startPosition, currentPosition);\n    this.triggerCustomEvent<ScrollEventDetail>(\"scroll\" + direction, event, {\n      startPosition: this.startPosition,\n      currentPosition,\n      direction,\n    });\n    this.triggerCustomEvent<ScrollEventDetail>(\"scrolling\", event, {\n      startPosition: this.startPosition,\n      currentPosition,\n      direction,\n    });\n  }\n\n  protected scroll = this._scroll.bind(this);\n}\n","/**\n * Represents the ready state of the audio/video element\n * @see https://www.w3schools.com/TAgs/av_prop_readystate.asp\n */\nexport enum MediaReadyState {\n  /** no information whether or not the audio/video is ready */\n  HAVE_NOTHING,\n  /** metadata for the audio/video is ready */\n  HAVE_METADATA,\n  /** data for the current playback position is available, but not enough data to play next frame/millisecond */\n  HAVE_CURRENT_DATA,\n  /** data for the current and at least the next frame is available */\n  HAVE_FUTURE_DATA,\n  /** enough data available to start playing */\n  HAVE_ENOUGH_DATA,\n}\n","export enum TouchType {\n  DEFAULT,\n  TARGET,\n  CHANGED,\n}\n","import { getElementIndex } from \"@ribajs/utils/src/dom.js\";\nimport {\n  Position,\n  TouchData,\n  TouchEventData,\n  TouchOffset,\n  TouchSettings,\n  TouchType,\n  TouchSwipeData,\n  TouchDirection,\n} from \"../../types/index.js\";\n\nimport { BaseEventsService } from \"./base-events.service.js\";\n\n/**\n * Vanilla version of jQuery Mobile Events\n * @see https://github.com/benmajor/jQuery-Touch-Events\n *\n * Copyright 2011-2019, Ben Major\n * Copyright 2019-2021, Pascal Garber\n * Licensed under the MIT License:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nexport class TouchEventsService extends BaseEventsService {\n  // GETTERS:\n\n  public get isTouchCapable() {\n    return this.settings.touchCapable;\n  }\n\n  public get startEvent() {\n    return this.settings.startevent;\n  }\n\n  public get endEvent() {\n    return this.settings.endevent;\n  }\n\n  public get moveEvent() {\n    return this.settings.moveevent;\n  }\n\n  public get tapEvent() {\n    return this.settings.tapevent;\n  }\n\n  // public get scrollEvent() {\n  //   return this.scrollEvents.scrollEvent;\n  // }\n\n  // SETTERS:\n\n  /** Set the X threshold of swipe events */\n  public set swipeThresholdX(threshold: number) {\n    if (typeof threshold !== \"number\") {\n      throw new Error(\"Threshold parameter must be a type of number\");\n    }\n    this.settings.swipeHThreshold = threshold;\n  }\n\n  /** Set the Y threshold of swipe events */\n  public set swipeThresholdY(threshold: number) {\n    if (typeof threshold !== \"number\") {\n      throw new Error(\"Threshold parameter must be a type of number\");\n    }\n    this.settings.swipeVThreshold = threshold;\n  }\n\n  /** Set the double tap interval */\n  public set doubleTapInt(interval: number) {\n    if (typeof interval !== \"number\") {\n      throw new Error(\"Interval parameter must be a type of number\");\n    }\n    this.settings.doubletapInterval = interval;\n  }\n\n  /** Set the taphold threshold */\n  public set tapHoldThreshold(threshold: number) {\n    if (typeof threshold !== \"number\") {\n      throw new Error(\"Threshold parameter must be a type of number\");\n    }\n    this.settings.tapholdThreshold = threshold;\n  }\n\n  /** Set the pixel range for tapas */\n  public set tapRange(range: number) {\n    if (typeof range !== \"number\") {\n      throw new Error(\"Ranger parameter must be a type of number\");\n    }\n    this.settings.tapPixelRange = range;\n  }\n\n  // PROPERTIES:\n\n  /** Used internally for `taphold` */\n  protected startPosition: Position = {\n    x: 0,\n    y: 0,\n  };\n\n  /** Used internally for `taphold` */\n  protected endPosition: Position = {\n    x: 0,\n    y: 0,\n  };\n\n  /** Used internally for `swipe` */\n  protected originalCoord: Position = {\n    x: 0,\n    y: 0,\n  };\n\n  /** Used internally for `swipe` */\n  protected finalCoord: Position = {\n    x: 0,\n    y: 0,\n  };\n\n  /** Used internally for `swipe` */\n  protected startEvnt: TouchData | null = null;\n\n  /** Used internally for `taphold` and `singletap` */\n  protected tapheld = false;\n\n  /** Used internally for `doubletap` */\n  protected firstTap: TouchData | null = null;\n\n  /** Used internally for `doubletap` */\n  protected cooling = false;\n\n  /** Used internally for `doubletap` and `singletap` */\n  protected doubletapped = false;\n\n  /** Used internally for `doubletap` */\n  protected lastTouch = 0;\n\n  /** Used internally for `swipe` */\n  protected hasSwiped = false;\n\n  /** Used internally for `tap` */\n  protected tapStarted = false;\n\n  /** Used internally for `swipe` */\n  protected swipeStarted = false;\n\n  /** Used internally for `tap`, `taphold` and `singletap` */\n  protected startTime = 0;\n\n  // TIMERS:\n\n  protected holdTimer = -1;\n  protected tapTimer = -1;\n\n  /** Used internally for `doubletap` */\n  protected actionTimer = -1;\n\n  protected settings: TouchSettings;\n\n  // protected scrollEvents: ScrollEventsService;\n\n  constructor(\n    el: HTMLElement,\n    settings: TouchSettings = {\n      tapPixelRange: 5,\n      swipeHThreshold: 50,\n      swipeVThreshold: 50,\n      tapholdThreshold: 750,\n      doubletapInterval: 500,\n      shakeThreshold: 15,\n      touchCapable: \"ontouchstart\" in window,\n\n      startevent: [\"touchstart\"],\n      endevent: [\"touchend\"],\n      moveevent: [\"touchmove\"],\n      tapevent: [\"tap\"],\n    }\n  ) {\n    super(el);\n    this.el = el;\n\n    // Set settings by device type (if device is touch capable)\n    settings.startevent = settings.touchCapable\n      ? [\"touchstart\"]\n      : [\"mousedown\"];\n    settings.endevent = settings.touchCapable ? [\"touchend\"] : [\"mouseup\"];\n    settings.moveevent = settings.touchCapable ? [\"touchmove\"] : [\"mousemove\"];\n    settings.tapevent = settings.touchCapable ? [\"tap\"] : [\"click\"];\n\n    this.settings = settings;\n\n    // this.scrollEvents = new ScrollEventsService(this.el);\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.onMoveEvent = this.onMoveEvent.bind(this);\n    this.onEndEvent = this.onEndEvent.bind(this);\n    this.addEventListeners();\n  }\n\n  public destroy() {\n    this.removeEventListeners();\n    // this.scrollEvents.destroy();\n  }\n\n  protected removeEventListeners() {\n    for (const eventName of this.settings.startevent) {\n      this.el.removeEventListener(\n        eventName,\n        this.onStartEvent as any as EventListener\n      );\n    }\n    for (const eventName of this.settings.moveevent) {\n      this.el.removeEventListener(\n        eventName,\n        this.onMoveEvent as any as EventListener\n      );\n    }\n    for (const eventName of this.settings.endevent) {\n      this.el.removeEventListener(\n        eventName,\n        this.onEndEvent as any as EventListener\n      );\n    }\n    // this.scrollEvents.destroy();\n  }\n\n  // HELPER METHODS:\n\n  protected getSwipeDir(\n    startPosition: Position,\n    endPosition: Position,\n    hThreshold: number = this.settings.swipeHThreshold,\n    vThreshold: number = this.settings.swipeVThreshold\n  ) {\n    let swipeDir = \"\";\n    if (\n      startPosition.y > endPosition.y &&\n      startPosition.y - endPosition.y > vThreshold\n    ) {\n      swipeDir = \"swipeup\";\n    }\n    if (\n      startPosition.x < endPosition.x &&\n      endPosition.x - startPosition.x > hThreshold\n    ) {\n      swipeDir = \"swiperight\";\n    }\n    if (\n      startPosition.y < endPosition.y &&\n      endPosition.y - startPosition.y > vThreshold\n    ) {\n      swipeDir = \"swipedown\";\n    }\n    if (\n      startPosition.x > endPosition.x &&\n      startPosition.x - endPosition.x > hThreshold\n    ) {\n      swipeDir = \"swipeleft\";\n    }\n    return swipeDir;\n  }\n\n  protected getPosition(\n    event: TouchEvent | MouseEvent,\n    type: TouchType = TouchType.DEFAULT,\n    index = 0\n  ): Position {\n    let touchesTypes: TouchList;\n    switch (type) {\n      case TouchType.CHANGED:\n        touchesTypes = (event as TouchEvent).changedTouches;\n        break;\n      case TouchType.TARGET:\n        touchesTypes = (event as TouchEvent).targetTouches;\n        break;\n      default:\n        touchesTypes = (event as TouchEvent).touches;\n        break;\n    }\n    const position = {\n      x: this.settings.touchCapable\n        ? touchesTypes[index].pageX\n        : (event as MouseEvent).pageX,\n      y: this.settings.touchCapable\n        ? touchesTypes[index].pageY\n        : (event as MouseEvent).pageY,\n    };\n    return position;\n  }\n\n  protected getOffset(\n    event: TouchEvent | MouseEvent,\n    type: TouchType = TouchType.DEFAULT,\n    index = 0\n  ): TouchOffset {\n    const boundingClientRect = (this.el as HTMLElement).getBoundingClientRect();\n    let touchesTypes: TouchList;\n    switch (type) {\n      case TouchType.CHANGED:\n        touchesTypes = (event as TouchEvent).changedTouches;\n        break;\n      case TouchType.TARGET:\n        touchesTypes = (event as TouchEvent).targetTouches;\n        break;\n      default:\n        touchesTypes = (event as TouchEvent).touches;\n        break;\n    }\n    const offset = {\n      x: this.settings.touchCapable\n        ? Math.round(\n            touchesTypes[index].pageX -\n              (boundingClientRect ? boundingClientRect.left : 0)\n          )\n        : Math.round(\n            (event as any as MouseEvent).pageX -\n              (boundingClientRect ? boundingClientRect.left : 0)\n          ),\n      y: this.settings.touchCapable\n        ? Math.round(\n            touchesTypes[index].pageY -\n              (boundingClientRect ? boundingClientRect.top : 0)\n          )\n        : Math.round(\n            (event as any as MouseEvent).pageY -\n              (boundingClientRect ? boundingClientRect.top : 0)\n          ),\n    };\n    return offset;\n  }\n\n  protected getTouchData(\n    event: TouchEvent | MouseEvent,\n    withIndex = false,\n    positionType = TouchType.DEFAULT,\n    offsetType = TouchType.CHANGED\n  ): TouchData {\n    const touchData: TouchData = {\n      position: this.getPosition(event, positionType),\n      offset: this.getOffset(event, offsetType),\n      time: Date.now(),\n    };\n    if (withIndex) {\n      touchData.index = getElementIndex(event.target as Element | null);\n    }\n    return touchData;\n  }\n\n  protected addEventListeners() {\n    for (const eventName of this.settings.startevent) {\n      this.el.addEventListener(\n        eventName,\n        this.onStartEvent as any as EventListener,\n        {\n          passive: true,\n        }\n      );\n    }\n    for (const eventName of this.settings.moveevent) {\n      this.el.addEventListener(\n        eventName,\n        this.onMoveEvent as any as EventListener,\n        {\n          passive: true,\n        }\n      );\n    }\n    for (const eventName of this.settings.endevent) {\n      this.el.addEventListener(\n        eventName,\n        this.onEndEvent as any as EventListener,\n        {\n          passive: true,\n        }\n      );\n    }\n  }\n\n  // EVENT HANDLERS:\n\n  protected onStartEvent(event: TouchEvent | MouseEvent) {\n    if (event.which && event.which !== 1) {\n      return false;\n    }\n    this.startPosition = this.getPosition(event, TouchType.TARGET);\n    this.endPosition = {\n      x: this.startPosition.x,\n      y: this.startPosition.y,\n    };\n    this.startTime = Date.now();\n\n    // For `doubletap`\n    this.doubletapped = false;\n    if (!this.firstTap) {\n      this.firstTap = this.getTouchData(\n        event,\n        true,\n        TouchType.DEFAULT,\n        TouchType.CHANGED\n      );\n    }\n\n    // For `tap`, `swipe`\n    this.tapStarted = true;\n    this.swipeStarted = true;\n\n    // For `swipe`\n    this.originalCoord = this.getPosition(event, TouchType.TARGET);\n    this.finalCoord = this.getPosition(event, TouchType.TARGET);\n    this.startEvnt = this.getTouchData(\n      event,\n      false,\n      TouchType.DEFAULT,\n      TouchType.CHANGED\n    );\n\n    this.tapstart(event);\n    this.taphold(event);\n    return true;\n  }\n\n  protected onEndEvent(event: TouchEvent | MouseEvent) {\n    this.endPosition = this.getPosition(event, TouchType.CHANGED);\n    this.tapheld = false;\n\n    window.clearTimeout(this.holdTimer);\n    this.tapend(event);\n    this.swipeend(event);\n    this.tap(event);\n    this.doubletap(event);\n    this.singletap(event);\n\n    this.tapStarted = false;\n    this.swipeStarted = false;\n    this.hasSwiped = false;\n\n    return true;\n  }\n\n  protected onMoveEvent(event: TouchEvent | MouseEvent) {\n    this.endPosition = this.getPosition(event, TouchType.TARGET);\n    this.finalCoord = this.getPosition(event, TouchType.TARGET);\n    this.tapmove(event);\n    this.swipe(event);\n    return true;\n  }\n\n  // CUSTOM EVENT METHODS:\n\n  /** tapstart Event */\n  protected tapstart(event: TouchEvent | MouseEvent) {\n    this.triggerCustomEvent(\n      \"tapstart\",\n      event,\n      this.getTouchData(event, false, TouchType.DEFAULT, TouchType.CHANGED)\n    );\n    return true;\n  }\n\n  /** tapmove Event */\n  protected tapmove(event: TouchEvent | MouseEvent) {\n    this.triggerCustomEvent(\n      \"tapmove\",\n      event,\n      this.getTouchData(event, false, TouchType.DEFAULT, TouchType.CHANGED)\n    );\n    return true;\n  }\n\n  /** tapend Event */\n  protected tapend(event: TouchEvent | MouseEvent) {\n    this.triggerCustomEvent(\n      \"tapend\",\n      event,\n      this.getTouchData(event, false, TouchType.CHANGED, TouchType.CHANGED)\n    );\n    return true;\n  }\n\n  /** taphold Event */\n  protected taphold(event: TouchEvent | MouseEvent) {\n    this.holdTimer = window.setTimeout(() => {\n      const diffPosition: Position = {\n        x: this.startPosition.x - this.endPosition.x,\n        y: this.startPosition.y - this.endPosition.y,\n      };\n\n      // helded?\n      if (\n        (this.startPosition.x === this.endPosition.x &&\n          this.startPosition.y === this.endPosition.y) ||\n        (diffPosition.x >= -this.settings.tapPixelRange &&\n          diffPosition.x <= this.settings.tapPixelRange &&\n          diffPosition.y >= -this.settings.tapPixelRange &&\n          diffPosition.y <= this.settings.tapPixelRange)\n      ) {\n        this.tapheld = true;\n        const endTime = Date.now();\n        const duration = endTime - this.startTime;\n        const touchesLength: number = (event as TouchEvent).targetTouches\n          ? (event as TouchEvent).targetTouches.length\n          : 1;\n        const touches = new Array<Partial<TouchData>>();\n\n        for (let i = 0; i < touchesLength; i++) {\n          const elOffset = (this.el as HTMLElement).getBoundingClientRect();\n          const touch = {\n            position: {\n              x: this.settings.touchCapable\n                ? (event as TouchEvent).changedTouches[i].pageX\n                : (event as MouseEvent).pageX,\n              y: this.settings.touchCapable\n                ? (event as TouchEvent).changedTouches[i].pageY\n                : (event as MouseEvent).pageY,\n            },\n            offset: {\n              x: this.settings.touchCapable\n                ? Math.round(\n                    (event as TouchEvent).changedTouches[i].pageX -\n                      (elOffset ? elOffset.left : 0)\n                  )\n                : Math.round(\n                    (event as MouseEvent).pageX - (elOffset ? elOffset.left : 0)\n                  ),\n              y: this.settings.touchCapable\n                ? Math.round(\n                    (event as TouchEvent).changedTouches[i].pageY -\n                      (elOffset ? elOffset.top : 0)\n                  )\n                : Math.round(\n                    (event as MouseEvent).pageY - (elOffset ? elOffset.top : 0)\n                  ),\n            },\n          };\n\n          touches.push(touch);\n        }\n        const eventName =\n          touchesLength > 1 ? \"taphold\" + touchesLength : \"taphold\";\n\n        const touchData: TouchEventData = {\n          touches,\n          time: Date.now(),\n          duration,\n        };\n\n        this.triggerCustomEvent(eventName, event, touchData);\n      }\n    }, this.settings.tapholdThreshold);\n\n    return true;\n  }\n\n  /** doubletap Event */\n  protected doubletap(event: TouchEvent | MouseEvent) {\n    const now = Date.now();\n    const lastTouch = Number(this.lastTouch) || now + 1;\n    const delta = now - lastTouch;\n    if (this.actionTimer !== -1) {\n      window.clearTimeout(this.actionTimer);\n    }\n\n    if (\n      delta < this.settings.doubletapInterval &&\n      delta > 100 &&\n      this.firstTap &&\n      getElementIndex(event.target as Element | null) === this.firstTap.index\n    ) {\n      this.doubletapped = true;\n      window.clearTimeout(this.tapTimer);\n      const lastTap = this.getTouchData(\n        event,\n        true,\n        TouchType.CHANGED,\n        TouchType.CHANGED\n      );\n      const touchData: TouchEventData = {\n        firstTap: this.firstTap,\n        secondTap: lastTap,\n        interval: lastTap.time - this.firstTap.time,\n      };\n      if (!this.cooling) {\n        this.triggerCustomEvent(\"doubletap\", event, touchData);\n        this.firstTap = null;\n      }\n      this.cooling = true;\n      window.setTimeout(() => {\n        this.cooling = false;\n      }, this.settings.doubletapInterval);\n    } else {\n      this.actionTimer = window.setTimeout(\n        () => {\n          this.firstTap = null;\n          window.clearTimeout(this.actionTimer);\n        },\n        this.settings.doubletapInterval,\n        [event]\n      );\n    }\n    this.lastTouch = now;\n  }\n\n  /**\n   * singletap Event\n   * This is used in conjunction with doubletap when both events are needed on the same element\n   */\n  protected singletap(event: TouchEvent | MouseEvent) {\n    this.tapTimer = window.setTimeout(() => {\n      const diffPosition: Position = {\n        x: this.startPosition.x - this.endPosition.x,\n        y: this.startPosition.y - this.endPosition.y,\n      };\n      if (\n        !this.doubletapped &&\n        !this.tapheld &&\n        ((this.startPosition.x === this.endPosition.x &&\n          this.startPosition.y === this.endPosition.y) ||\n          (diffPosition.x >= -this.settings.tapPixelRange &&\n            diffPosition.x <= this.settings.tapPixelRange &&\n            diffPosition.y >= -this.settings.tapPixelRange &&\n            diffPosition.y <= this.settings.tapPixelRange))\n      ) {\n        const touchData = this.getTouchData(\n          event,\n          false,\n          TouchType.CHANGED,\n          TouchType.CHANGED\n        );\n\n        // Was it a taphold?\n        if (touchData.time - this.startTime < this.settings.tapholdThreshold) {\n          this.triggerCustomEvent(\"singletap\", event, touchData);\n        }\n      }\n    }, this.settings.doubletapInterval);\n  }\n\n  /** tap Event */\n  protected tap(event: TouchEvent | MouseEvent) {\n    const diffPosition: Position = {\n      x: this.startPosition.x - this.endPosition.x,\n      y: this.startPosition.y - this.endPosition.y,\n    };\n\n    if (\n      this.tapStarted &&\n      Date.now() - this.startTime < this.settings.tapholdThreshold &&\n      ((this.startPosition.x === this.endPosition.x &&\n        this.startPosition.y === this.endPosition.y) ||\n        (diffPosition.x >= -this.settings.tapPixelRange &&\n          diffPosition.x <= this.settings.tapPixelRange &&\n          diffPosition.y >= -this.settings.tapPixelRange &&\n          diffPosition.y <= this.settings.tapPixelRange))\n    ) {\n      const touchesLength: number = (event as TouchEvent).targetTouches\n        ? (event as TouchEvent).targetTouches.length\n        : 1;\n      const touches = new Array<Partial<TouchData>>();\n\n      for (let i = 0; i < touchesLength; i++) {\n        const elOffset = (this.el as HTMLElement).getBoundingClientRect();\n        const touch = {\n          position: {\n            x: this.settings.touchCapable\n              ? (event as TouchEvent).changedTouches[i].pageX\n              : (event as MouseEvent).pageX,\n            y: this.settings.touchCapable\n              ? (event as TouchEvent).changedTouches[i].pageY\n              : (event as MouseEvent).pageY,\n          },\n          offset: {\n            x: this.settings.touchCapable\n              ? Math.round(\n                  (event as TouchEvent).changedTouches[i].pageX -\n                    (elOffset ? elOffset.left : 0)\n                )\n              : Math.round(\n                  (event as MouseEvent).pageX - (elOffset ? elOffset.left : 0)\n                ),\n            y: this.settings.touchCapable\n              ? Math.round(\n                  (event as TouchEvent).changedTouches[i].pageY -\n                    (elOffset ? elOffset.top : 0)\n                )\n              : Math.round(\n                  (event as MouseEvent).pageY - (elOffset ? elOffset.top : 0)\n                ),\n          },\n        };\n\n        touches.push(touch);\n      }\n\n      const touchData = {\n        touches,\n        time: Date.now(),\n      };\n\n      const eventName = touchesLength > 1 ? \"tap\" + touchesLength : \"tap\";\n      this.triggerCustomEvent(eventName, event, touchData);\n    }\n  }\n\n  /**\n   * swipe Event\n   * (also handles swipeup, swiperight, swipedown and swipeleft)\n   *\n   * (similar to `touchMove` method in jquery touch events)\n   */\n  protected swipe(event: TouchEvent | MouseEvent) {\n    const swipeDir = this.getSwipeDir(this.originalCoord, this.finalCoord);\n\n    if (swipeDir && this.swipeStarted && this.startEvnt) {\n      this.originalCoord.x = 0;\n      this.originalCoord.y = 0;\n      this.finalCoord.x = 0;\n      this.finalCoord.y = 0;\n      this.swipeStarted = false;\n\n      const endEvnt: TouchData = this.getTouchData(\n        event,\n        false,\n        TouchType.DEFAULT,\n        TouchType.CHANGED\n      );\n\n      // Calculate the swipe amount (normalized):\n      const xAmount = Math.abs(this.startEvnt.position.x - endEvnt.position.x);\n      const yAmount = Math.abs(this.startEvnt.position.y - endEvnt.position.y);\n\n      const touchData: TouchSwipeData = {\n        startEvnt: this.startEvnt,\n        endEvnt,\n        direction: swipeDir.replace(\"swipe\", \"\") as TouchDirection,\n        xAmount,\n        yAmount,\n        duration: endEvnt.time - this.startEvnt.time,\n      };\n      this.hasSwiped = true;\n      this.triggerCustomEvent(\"swipe\", event, touchData);\n      this.triggerCustomEvent(swipeDir, event, touchData);\n    }\n  }\n\n  /**\n   * swipeend Event\n   * (similar `touchEnd` method in jquery touch events)\n   */\n  protected swipeend(event: TouchEvent | MouseEvent) {\n    const endEvnt: TouchData = this.getTouchData(\n      event,\n      false,\n      TouchType.CHANGED,\n      TouchType.CHANGED\n    );\n    if (this.hasSwiped && this.startEvnt) {\n      const swipeDir = this.getSwipeDir(\n        this.startEvnt.position,\n        endEvnt.position\n      );\n\n      // Calculate the swipe amount (normalized):\n      const xAmount = Math.abs(this.startEvnt.position.x - endEvnt.position.x);\n      const yAmount = Math.abs(this.startEvnt.position.y - endEvnt.position.y);\n\n      const touchData: TouchSwipeData = {\n        startEvnt: this.startEvnt,\n        endEvnt,\n        direction: swipeDir.replace(\"swipe\", \"\") as TouchDirection,\n        xAmount,\n        yAmount,\n        duration: endEvnt.time - this.startEvnt.time,\n      };\n      this.triggerCustomEvent(\"swipeend\", event, touchData);\n    }\n  }\n}\n","/**\n * EvEmitter v2.1.1\n * Lil' event emitter\n * MIT License\n */\n\n( function( global, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\nfunction EvEmitter() {}\n\nlet proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) return this;\n\n  // set events hash\n  let events = this._events = this._events || {};\n  // set listeners array\n  let listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( !listeners.includes( listener ) ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) return this;\n\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  let onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  let onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  let listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) return this;\n\n  let index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  let listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) return this;\n\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice( 0 );\n  args = args || [];\n  // once stuff\n  let onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( let listener of listeners ) {\n    let isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n  return this;\n};\n\nreturn EvEmitter;\n\n} ) );\n","/*!\n * imagesLoaded v5.0.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory( window, require('ev-emitter') );\n  } else {\n    // browser global\n    window.imagesLoaded = factory( window, window.EvEmitter );\n  }\n\n} )( typeof window !== 'undefined' ? window : this,\n    function factory( window, EvEmitter ) {\n\nlet console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  // use object if already an array\n  if ( Array.isArray( obj ) ) return obj;\n\n  let isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  // convert nodeList to array\n  if ( isArrayLike ) return [ ...obj ];\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {[Array, Element, NodeList, String]} elem\n * @param {[Object, Function]} options - if function, use as callback\n * @param {Function} onAlways - callback function\n * @returns {ImagesLoaded}\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  let queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error(`Bad element for imagesLoaded ${queryElem || elem}`);\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = {};\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    Object.assign( this.options, options );\n  }\n\n  if ( onAlways ) this.on( 'always', onAlways );\n\n  this.getImages();\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\nconst elementNodeTypes = [ 1, 9, 11 ];\n\n/**\n * @param {Node} elem\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName === 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  let { nodeType } = elem;\n  if ( !nodeType || !elementNodeTypes.includes( nodeType ) ) return;\n\n  let childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( let img of childImgs ) {\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    let children = elem.querySelectorAll( this.options.background );\n    for ( let child of children ) {\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nconst reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  let style = getComputedStyle( elem );\n  // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n  if ( !style ) return;\n\n  // get url inside url(\"...\")\n  let matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    let url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  let loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  let background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  /* eslint-disable-next-line func-style */\n  let onProgress = ( image, elem, message ) => {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( () => {\n      this.progress( image, elem, message );\n    } );\n  };\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  } );\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n\n  // check if completed\n  if ( this.progressedCount === this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( `progress: ${message}`, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  let eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // Continue only if there is a non empty src\n  const src = this.img.currentSrc || this.img.src;\n  if ( !src ) {\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  // add crossOrigin attribute. #204\n  if ( this.img.crossOrigin ) {\n    this.proxyImage.crossOrigin = this.img.crossOrigin;\n  }\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  let { parentNode } = this.img;\n  // emit progress with parent <picture> or self <img>\n  let elem = parentNode.nodeName === 'PICTURE' ? parentNode : this.img;\n  this.emitEvent( 'progress', [ this, elem, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  let method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\nreturn ImagesLoaded;\n\n} );\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { TouchEventsService, TouchSwipeData } from \"@ribajs/extras\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { TOGGLE_BUTTON } from \"../../constants/index.js\";\nimport { Bs5Service } from \"../../services/index.js\";\nimport {\n  JsxBs5SidebarProps,\n  Bs5SidebarComponentScope,\n  SidebarState,\n  // Breakpoint,\n} from \"../../types/index.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { debounce } from \"@ribajs/utils/src/control\";\n\nexport class Bs5SidebarComponent extends Component {\n  public static tagName = \"bs5-sidebar\";\n\n  public static states = [\n    \"hidden\",\n    \"side-left\",\n    \"side-right\",\n    \"overlap-left\",\n    \"overlap-right\",\n    \"move-left\",\n    \"move-right\",\n  ];\n\n  protected computedStyle?: CSSStyleDeclaration;\n\n  protected autobind = true;\n\n  public _debug = false;\n\n  protected bs5: Bs5Service;\n\n  protected touch: TouchEventsService = new TouchEventsService(this);\n\n  static get observedAttributes(): (keyof JsxBs5SidebarProps)[] {\n    return [\n      \"id\",\n      \"container-selector\",\n      \"position\",\n      \"mode\",\n      \"width\",\n      \"auto-show\",\n      \"auto-hide\",\n      \"force-hide-on-location-pathnames\",\n      \"force-show-on-location-pathnames\",\n      \"watch-new-page-ready-event\",\n      \"close-on-swipe\",\n      \"prevent-scrolling-on-overlap\",\n    ];\n  }\n\n  public events?: EventDispatcher;\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public defaults: Bs5SidebarComponentScope = {\n    // Template properties\n    containerSelector: undefined,\n    state: \"hidden\",\n    oldState: \"hidden\",\n    id: undefined,\n    width: \"250px\",\n\n    // Options\n    position: \"left\",\n    mode: \"overlap\",\n    autoShow: false,\n    autoHide: false,\n    watchNewPageReadyEvent: true,\n    forceHideOnLocationPathnames: [],\n    forceShowOnLocationPathnames: [],\n    closeOnSwipe: true,\n    preventScrollingOnOverlap: true,\n\n    // Template methods\n    hide: this.hide,\n    show: this.show,\n    toggle: this.toggle,\n  };\n\n  public scope: Bs5SidebarComponentScope = {\n    ...this.defaults,\n  };\n\n  constructor() {\n    super();\n    this.bs5 = Bs5Service.getSingleton();\n    // assign this to bound version, so we can remove window EventListener later without problem\n    this.onEnvironmentChanges = this.onEnvironmentChanges.bind(this);\n  }\n\n  public setState(state: SidebarState) {\n    this.scope.oldState = this.scope.state;\n    this.scope.state = state;\n    this.onStateChange();\n  }\n\n  public getState() {\n    return this.scope.state;\n  }\n\n  public getShowMode() {\n    const mode: SidebarState =\n      `${this.scope.mode}-${this.scope.position}` as SidebarState;\n    return mode;\n  }\n\n  public hide() {\n    this.setState(\"hidden\");\n  }\n\n  public show() {\n    const state = this.getShowMode();\n    this.setState(state);\n  }\n\n  public toggle() {\n    this.debug(\"toggle state: \" + this.scope.state);\n    if (this.scope.state === \"hidden\") {\n      this.show();\n    } else {\n      this.hide();\n    }\n    this.debug(\"toggled state: \" + this.scope.state);\n  }\n\n  protected preventScrolling(scrollEl = document.body) {\n    scrollEl.style.overflow = \"hidden\";\n  }\n\n  protected allowScrolling(scrollEl = document.body) {\n    if (scrollEl.style.overflow === \"hidden\") {\n      scrollEl.style.overflow = \"\";\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5SidebarComponent.observedAttributes);\n    this.computedStyle = window.getComputedStyle(this);\n    this.addEventListeners();\n    // initial\n    this.onEnvironmentChanges();\n  }\n\n  protected onBreakpoint(/*breakpoint: Breakpoint | null*/) {\n    this.onEnvironmentChanges();\n  }\n\n  protected addEventListeners() {\n    // window.addEventListener(\"resize\", this.onEnvironmentChanges, {\n    //   passive: true,\n    // });\n    this.addEventListener(\"swipe\" as any, this.onSwipe);\n    this.bs5.events.on(\"breakpoint:changed\", this.onBreakpoint, this);\n  }\n\n  protected removeEventListeners() {\n    this.events?.off(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    this.events?.off(TOGGLE_BUTTON.eventNames.toggle, this.toggle, this);\n    this.routerEvents.off(\"newPageReady\", this.onEnvironmentChanges, this);\n    // window.removeEventListener(\"resize\", this.onEnvironmentChanges);\n    this.bs5.events.off(\"breakpoint:changed\", this.onBreakpoint, this);\n  }\n\n  protected initToggleButtonEventDispatcher() {\n    if (this.events) {\n      this.events.off(TOGGLE_BUTTON.eventNames.toggle, this.toggle, this);\n      this.events.off(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n    }\n    const namespace = TOGGLE_BUTTON.nsPrefix + this.scope.id;\n    this.debug(`Init event dispatcher for namespace  ${namespace}`);\n    this.events = new EventDispatcher(namespace);\n    this.events.on(TOGGLE_BUTTON.eventNames.toggle, this.toggle, this);\n    this.events.on(TOGGLE_BUTTON.eventNames.init, this.triggerState, this);\n  }\n\n  protected initRouterEventDispatcher() {\n    if (this.scope.watchNewPageReadyEvent) {\n      this.routerEvents.on(\"newPageReady\", this.onEnvironmentChanges, this);\n    }\n  }\n\n  protected _onSwipe(event: CustomEvent<TouchSwipeData>) {\n    if (!this.scope.closeOnSwipe) {\n      return;\n    }\n    if (this.scope.state === \"side-left\" || this.scope.state === \"side-right\") {\n      return;\n    }\n    if (this.scope.position === \"left\" && event.detail.direction === \"left\") {\n      this.hide();\n    }\n\n    if (this.scope.position === \"right\" && event.detail.direction === \"right\") {\n      this.hide();\n    }\n  }\n\n  protected onSwipe = this._onSwipe.bind(this);\n\n  protected onHidden() {\n    const translateX = this.scope.position === \"left\" ? \"-100%\" : \"100%\";\n    this.style.transform = `translateX(${translateX})`;\n    this.width = this.scope.width;\n    this.setContainersStyle(this.scope.state);\n    if (this.scope.preventScrollingOnOverlap) {\n      this.allowScrolling();\n    }\n  }\n\n  protected onMove(state: SidebarState) {\n    this.style.transform = `translateX(0)`;\n    this.style.width = this.scope.width;\n    this.width = this.scope.width;\n    this.setContainersStyle(state);\n    if (this.scope.preventScrollingOnOverlap) {\n      this.allowScrolling();\n    }\n  }\n\n  protected onSide(state: SidebarState) {\n    this.style.transform = `translateX(0)`;\n    this.style.width = this.scope.width;\n    this.width = this.scope.width;\n    this.setContainersStyle(state);\n    if (this.scope.preventScrollingOnOverlap) {\n      this.allowScrolling();\n    }\n  }\n\n  protected onOverlap(state: SidebarState) {\n    this.style.transform = `translateX(0)`;\n    this.width = this.scope.width;\n    this.setContainersStyle(state);\n    if (this.scope.preventScrollingOnOverlap) {\n      this.preventScrolling();\n    }\n  }\n\n  protected triggerState() {\n    // Global event\n    this.events?.trigger(\"state\", this.scope.state);\n  }\n\n  protected onStateChange() {\n    switch (this.scope.state) {\n      case \"side-left\":\n      case \"side-right\":\n        this.onSide(this.scope.state);\n        break;\n      case \"overlap-left\":\n      case \"overlap-right\":\n        this.onOverlap(this.scope.state);\n        break;\n      case \"move-left\":\n      case \"move-right\":\n        this.onMove(this.scope.state);\n        break;\n      default:\n        this.onHidden();\n        break;\n    }\n\n    this.classList.remove(...Bs5SidebarComponent.states);\n    this.classList.add(this.scope.state);\n\n    if (this.events) {\n      this.events.trigger(TOGGLE_BUTTON.eventNames.toggled, this.scope.state);\n    }\n    this.dispatchEvent(\n      new CustomEvent(TOGGLE_BUTTON.eventNames.toggled, {\n        detail: this.scope.state,\n      })\n    );\n  }\n\n  protected get width() {\n    if (this.scope.width === this.defaults.width) {\n      return this.offsetWidth + \"px\";\n    }\n    return this.scope.width;\n  }\n\n  protected set width(width: string) {\n    this.scope.width = width;\n    this.style.width = width;\n  }\n\n  protected setStateByEnvironment() {\n    if (\n      this.scope.forceHideOnLocationPathnames.includes(window.location.pathname)\n    ) {\n      return this.hide();\n    }\n    if (\n      this.scope.forceShowOnLocationPathnames.includes(window.location.pathname)\n    ) {\n      return this.show();\n    }\n    if (this.scope.autoHide) {\n      return this.hide();\n    }\n    if (this.scope.autoShow) {\n      return this.show();\n    }\n  }\n\n  /**\n   * Internal (not debounced) version of `onEnvironmentChanges`.\n   */\n  protected _onEnvironmentChanges() {\n    this.setStateByEnvironment();\n  }\n\n  /**\n   * If viewport size changes, location url changes or something else.\n   */\n  protected onEnvironmentChanges = debounce(\n    this._onEnvironmentChanges.bind(this)\n  );\n\n  protected getContainers() {\n    return this.scope.containerSelector\n      ? document.querySelectorAll<HTMLUnknownElement>(\n          this.scope.containerSelector\n        )\n      : undefined;\n  }\n\n  protected initContainers(state: SidebarState) {\n    this.setContainersStyle(state);\n  }\n\n  protected setContainersStyle(state: SidebarState) {\n    const containers:\n      | NodeListOf<HTMLUnknownElement>\n      | Array<HTMLUnknownElement> = this.getContainers() || [];\n\n    if (containers) {\n      for (let i = 0; i < containers.length; i++) {\n        const container = containers[i];\n        this.setContainerStyle(container, state);\n      }\n    }\n  }\n\n  /**\n   * Sets the container style, takes overs always the transition style of this sidebar\n   * @param container\n   * @param style\n   * @param state\n   */\n  protected setContainerStyle(\n    container: HTMLUnknownElement,\n    state: SidebarState\n  ) {\n    const currStyle = container.style;\n    if (state) {\n      const width = this.width;\n      const conStyle = window.getComputedStyle(container);\n\n      if (this.scope.mode === \"move\" && state.startsWith(\"overlap-\")) {\n        switch (conStyle.position) {\n          case \"fixed\":\n          case \"absolute\":\n            currStyle.left = \"0\";\n            currStyle.right = \"0\";\n            break;\n          default:\n            currStyle.marginLeft = \"0\";\n            currStyle.marginRight = \"0\";\n            break;\n        }\n      }\n\n      switch (state) {\n        case \"side-left\":\n          switch (conStyle.position) {\n            case \"fixed\":\n            case \"absolute\":\n              currStyle.left = width;\n              break;\n            default:\n              currStyle.marginLeft = width;\n              break;\n          }\n          break;\n        case \"side-right\":\n          switch (conStyle.position) {\n            case \"fixed\":\n            case \"absolute\":\n              currStyle.right = width;\n              break;\n            default:\n              currStyle.marginRight = width;\n              break;\n          }\n          break;\n        case \"move-left\":\n          switch (conStyle.position) {\n            case \"fixed\":\n            case \"absolute\":\n              currStyle.left = width;\n              currStyle.right = `-${width}`;\n              break;\n            default:\n              currStyle.marginLeft = width;\n              currStyle.marginRight = `-${width}`;\n              break;\n          }\n          break;\n        case \"move-right\":\n          switch (conStyle.position) {\n            case \"fixed\":\n            case \"absolute\":\n              currStyle.right = width;\n              currStyle.left = `-${width}`;\n              break;\n            default:\n              currStyle.marginRight = width;\n              currStyle.marginLeft = `-${width}`;\n              break;\n          }\n          break;\n        case \"hidden\":\n          switch (this.scope.oldState) {\n            case \"side-left\":\n              switch (conStyle.position) {\n                case \"fixed\":\n                case \"absolute\":\n                  currStyle.left = \"0\";\n                  break;\n                default:\n                  currStyle.marginLeft = \"0\";\n                  break;\n              }\n              break;\n            case \"side-right\":\n              switch (conStyle.position) {\n                case \"fixed\":\n                case \"absolute\":\n                  currStyle.right = \"0\";\n                  break;\n                default:\n                  currStyle.marginRight = \"0\";\n                  break;\n              }\n              break;\n            case \"move-left\":\n              switch (conStyle.position) {\n                case \"fixed\":\n                case \"absolute\":\n                  currStyle.left = \"0\";\n                  currStyle.right = \"0\";\n                  break;\n                default:\n                  currStyle.marginRight = \"0\";\n                  currStyle.marginLeft = \"0\";\n                  break;\n              }\n              break;\n            case \"move-right\":\n              switch (conStyle.position) {\n                case \"fixed\":\n                case \"absolute\":\n                  currStyle.right = \"0\";\n                  currStyle.left = \"0\";\n                  break;\n                default:\n                  currStyle.marginRight = \"0\";\n                  currStyle.marginLeft = \"0\";\n                  break;\n              }\n              break;\n            default:\n              break;\n          }\n\n        default:\n          break;\n      }\n    }\n    container.style.transition = this.computedStyle\n      ? this.computedStyle.transition\n      : \"\";\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.scope.oldState = this.getShowMode();\n    this.initRouterEventDispatcher();\n    return this.onEnvironmentChanges();\n  }\n\n  protected async afterBind() {\n    this.onEnvironmentChanges();\n    await super.afterBind();\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"id\"];\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName === \"containerSelector\") {\n    }\n    if (attributeName === \"id\") {\n      this.initToggleButtonEventDispatcher();\n    }\n    switch (attributeName) {\n      case \"containerSelector\":\n        this.initContainers(this.scope.state);\n        break;\n      case \"id\":\n        this.initToggleButtonEventDispatcher();\n        break;\n      case \"width\":\n        this.width = newValue;\n      case \"mode\":\n        this.onStateChange();\n        this.initContainers(this.scope.state);\n        break;\n      case \"autoHide\":\n      case \"autoShow\":\n        this.setStateByEnvironment();\n        break;\n      default:\n        break;\n    }\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListeners();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (!hasChildNodesTrim(this)) {\n      console.warn(\n        \"No child elements found, this component as no template so you need to define your own as child of this component.\"\n      );\n    }\n    return null;\n  }\n}\n","export default \"<div class=\\\"row slideshow-row\\\">\\n  <div rv-each-slide=\\\"items\\\" rv-class=\\\"slide.class\\\" rv-class-active=\\\"slide.active\\\" rv-id=\\\"'slide-' | append slide.handle\\\" rv-index=\\\"slide.index\\\" rv-template=\\\"slide.content\\\"></div>\\n</div>\\n\"","export default \"<button rv-show=\\\"controls\\\" class=\\\"btn btn-link slideshow-controls slideshow-control-prev\\\" rv-add-class=\\\"controlsPositionClass\\\" role=\\\"button\\\" data-slide=\\\"prev\\\" rv-on-click=\\\"prev\\\">\\n  <bs5-icon rv-if=\\\"controlPrevIconSrc\\\" rv-src=\\\"controlPrevIconSrc\\\" direction=\\\"left\\\" size=\\\"24\\\"></bs5-icon>\\n  <span rv-hide=\\\"controlPrevIconSrc\\\" class=\\\"btn btn-link slideshow-control-fallback-prev-icon\\\" aria-hidden=\\\"true\\\"></span>\\n  <span class=\\\"visually-hidden\\\">Previous</span>\\n</button>\\n<button rv-show=\\\"controls\\\" class=\\\"btn btn-link slideshow-controls slideshow-control-next\\\" rv-add-class=\\\"controlsPositionClass\\\" role=\\\"button\\\" data-slide=\\\"next\\\" rv-on-click=\\\"next\\\">\\n  <bs5-icon rv-if=\\\"controlNextIconSrc\\\" rv-src=\\\"controlNextIconSrc\\\" direction=\\\"right\\\" size=\\\"24\\\"></bs5-icon>\\n  <span rv-hide=\\\"controlNextIconSrc\\\" class=\\\"slideshow-control-fallback-next-icon\\\" aria-hidden=\\\"true\\\"></span>\\n  <span class=\\\"visually-hidden\\\">Next</span>\\n</button>\\n\"","export default \"<ol rv-if=\\\"indicators\\\" class=\\\"slideshow-indicators\\\" rv-add-class=\\\"indicatorsPositionClass\\\">\\n  <li rv-each-slide=\\\"items\\\" rv-class-active=\\\"slide.active\\\" rv-on-click=\\\"goTo | args slide.index\\\">\\n    <bs5-icon rv-hide=\\\"slide.active\\\" rv-src=\\\"indicatorInactiveIconSrc\\\" size=\\\"16\\\"></bs5-icon>\\n    <bs5-icon rv-show=\\\"slide.active\\\" rv-src=\\\"indicatorActiveIconSrc\\\" size=\\\"16\\\"></bs5-icon>\\n  </li>\\n</ol>\\n\"","export default \"<img lazyload=\\\"lazy\\\" class=\\\"img-fluid w-100\\\" rv-src=\\\"slide.src\\\" rv-alt=\\\"slide.title\\\">\"","import { TemplatesComponent, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { hasChildNodesTrim, scrollTo } from \"@ribajs/utils/src/dom.js\";\nimport { throttle, debounce } from \"@ribajs/utils/src/control\";\nimport { Bs5Service } from \"../../services/index.js\";\nimport {\n  SlideshowControlsPosition,\n  SlideshowIndicatorsPosition,\n  SlideshowSlidePosition,\n  Bs5SlideshowComponentScope,\n  JsxBs5SlideshowProps,\n} from \"../../types/index.js\";\nimport {\n  Dragscroll,\n  DragscrollOptions,\n  Autoscroll,\n  AutoscrollOptions,\n  ScrollPosition,\n  ScrollEventsService,\n  getScrollPosition,\n} from \"@ribajs/extras\";\nimport templateSlides from \"./bs5-slideshow-slides.component.html?raw\";\nimport templateControls from \"./bs5-slideshow-controls.component.html?raw\";\nimport templateIndicators from \"./bs5-slideshow-indicators.component.html?raw\";\nimport templateImage from \"./bs5-slideshow-image.component.html?raw\";\n\nconst SLIDESHOW_INNER_SELECTOR = \".slideshow-row\";\n\nconst SLIDES_SELECTOR = `${SLIDESHOW_INNER_SELECTOR} .slide`;\n\nexport class Bs5SlideshowComponent extends TemplatesComponent {\n  protected resizeObserver?: ResizeObserver;\n  protected bs5: Bs5Service;\n\n  protected get slideshowInner() {\n    return this.querySelector<HTMLElement>(SLIDESHOW_INNER_SELECTOR);\n  }\n\n  protected get slideElements() {\n    return this.querySelectorAll<HTMLElement>(SLIDES_SELECTOR);\n  }\n\n  protected get controlsElements() {\n    return this.querySelectorAll(\n      \".slideshow-control-prev, .slideshow-control-next\"\n    );\n  }\n\n  protected get indicatorsElement() {\n    return this.querySelector(\".slideshow-indicators\");\n  }\n\n  static get observedAttributes(): (keyof JsxBs5SlideshowProps)[] {\n    return [\n      \"items\",\n      \"slides-to-scroll\",\n      \"controls\",\n      \"controls-position\",\n      \"drag\",\n      \"autoplay\",\n      \"autoplay-interval\",\n      \"autoplay-velocity\",\n      \"control-prev-icon-src\",\n      \"control-next-icon-src\",\n      \"indicator-inactive-icon-src\",\n      \"indicator-active-icon-src\",\n      \"angle\",\n      \"pause-on-hover\",\n      \"sticky\",\n      \"indicators\",\n      \"indicators-position\",\n      \"pause\",\n      \"infinite\",\n    ];\n  }\n\n  protected defaultScope: Bs5SlideshowComponentScope = {\n    // Options\n    slidesToScroll: 1,\n    controls: true,\n    controlsPosition: \"inside-middle\",\n    pauseOnHover: true,\n    sticky: false,\n    indicators: true,\n    indicatorsPosition: \"inside-bottom\",\n    pause: false,\n    drag: true,\n    touchScroll: true,\n    autoplay: false,\n    autoplayInterval: 0,\n    autoplayVelocity: 0.8,\n    controlPrevIconSrc: \"\",\n    controlNextIconSrc: \"\",\n    indicatorActiveIconSrc: \"\",\n    indicatorInactiveIconSrc: \"\",\n    angle: \"horizontal\",\n    infinite: true,\n\n    // Template methods\n    next: this.next.bind(this),\n    prev: this.prev.bind(this),\n    goTo: this.goTo.bind(this),\n    enableTouchScroll: this.enableTouchScroll.bind(this),\n    disableTouchScroll: this.disableTouchScroll.bind(this),\n\n    // Template properties\n    items: undefined,\n\n    // Classes\n    controlsPositionClass: \"\",\n    indicatorsPositionClass: \"\",\n    intervalCount: 0,\n    intervalProgress: 0,\n    nextIndex: -1,\n    prevIndex: -1,\n    activeIndex: 0,\n  };\n\n  public static tagName = \"bs5-slideshow\";\n\n  protected templateAttributes = [\n    {\n      name: \"class\",\n      required: false,\n    },\n    {\n      name: \"handle\",\n      required: false,\n    },\n    {\n      name: \"type\",\n      required: true,\n    },\n    {\n      name: \"active\",\n      type: \"boolean\",\n      required: false,\n    },\n    {\n      name: \"index\",\n      type: \"number\",\n      required: false,\n    },\n    {\n      name: \"src\",\n      type: \"string\",\n      required: false,\n    },\n  ];\n\n  protected autobind = true;\n\n  protected dragscrollService?: Dragscroll;\n\n  protected continuousAutoplayService?: Autoscroll;\n\n  protected scrollEventsService?: ScrollEventsService;\n\n  protected templateControls = templateControls;\n\n  protected templateIndicators = templateIndicators;\n\n  protected autoplayIntervalIndex: number | null = null;\n\n  protected continuousAutoplayIntervalIndex: number | null = null;\n\n  protected resumeTimer: number | null = null;\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: Bs5SlideshowComponentScope = {\n    ...this.defaultScope,\n  };\n\n  constructor() {\n    super();\n    this.bs5 = Bs5Service.getSingleton();\n\n    // set event listeners to the this-bound version once, so we can easily pass them to DOM event handlers and remove them again later\n    this.onViewChanges = this.onViewChanges.bind(this);\n    this.onVisibilityChanged = this.onVisibilityChanged.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n    this.onScrollend = this.onScrollend.bind(this);\n    this.onMouseIn = this.onMouseIn.bind(this);\n    this.onMouseOut = this.onMouseOut.bind(this);\n  }\n\n  /**\n   * Go to next slide\n   */\n  public next() {\n    this.scrollToNextSlide();\n  }\n\n  /**\n   * Go to prev slide\n   */\n  public prev() {\n    this.scrollToPrevSlide();\n  }\n\n  /**\n   * Go to slide by index\n   * @param index\n   */\n  public goTo(index: number) {\n    if (\n      index < 0 ||\n      !this.scope.items?.[index] ||\n      !this.slideElements[index] ||\n      !this.slideshowInner\n    ) {\n      this.throw(new Error(`Can't go to slide of index ${index}`));\n      console.error(\"items\", this.scope.items);\n      console.error(\"this.slideElements\", this.slideElements);\n      console.error(\"this.slideshowInner\", this.slideshowInner);\n      return;\n    }\n    this.setSlidePositions();\n\n    if (!this.slideElements[index]) {\n      this.throw(new Error(`Slide element with index \"${index}\" not found!`));\n    } else {\n      scrollTo(\n        this.slideElements[index],\n        0,\n        this.slideshowInner,\n        this.scope.angle\n      );\n      this.setSlideActive(index);\n    }\n  }\n\n  public getNextIndex(centeredIndex: number) {\n    let nextIndex = centeredIndex + this.scope.slidesToScroll;\n\n    if (nextIndex >= this.slideElements.length) {\n      if (!this.scope.infinite) {\n        return this.slideElements.length - 1;\n      }\n      nextIndex = nextIndex - this.slideElements.length;\n    }\n\n    return nextIndex;\n  }\n\n  public getPrevIndex(centeredIndex: number) {\n    let prevIndex = centeredIndex - this.scope.slidesToScroll;\n\n    if (prevIndex < 0) {\n      if (!this.scope.infinite) {\n        return 0;\n      }\n      prevIndex = this.slideElements.length - 1 + (prevIndex + 1);\n    }\n    return prevIndex;\n  }\n\n  public scrollToNearestSlide() {\n    this.setSlidePositions();\n    const nearestIndex = this.getMostCenteredSlideIndex();\n    return this.goTo(nearestIndex);\n  }\n\n  protected scrollToNextSlide() {\n    this.setSlidePositions();\n    const centeredIndex = this.getMostCenteredSlideIndex();\n    const nextIndex = this.getNextIndex(centeredIndex);\n\n    return this.goTo(nextIndex);\n  }\n\n  protected scrollToPrevSlide() {\n    this.setSlidePositions();\n    const centeredIndex = this.getMostCenteredSlideIndex();\n    const prevIndex = this.getPrevIndex(centeredIndex);\n    return this.goTo(prevIndex);\n  }\n\n  protected initOptions() {\n    this.setOptions();\n  }\n\n  protected setOptions() {\n    if (this.scope.autoplay) {\n      this.enableAutoplay();\n    } else {\n      this.disableAutoplay();\n    }\n    if (this.scope.drag) {\n      this.enableDesktopDragscroll();\n    } else {\n      this.disableDesktopDragscroll();\n    }\n    if (this.scope.touchScroll) {\n      this.enableTouchScroll();\n    } else {\n      this.disableTouchScroll();\n    }\n    this.setControlsOptions();\n    this.setIndicatorsOptions();\n  }\n\n  protected setControlsOptions() {\n    const position = this.scope.controlsPosition?.split(\n      \"-\"\n    ) as SlideshowControlsPosition[];\n    if (this.scope.controls && position.length === 2) {\n      this.scope.controlsPositionClass = `control-${position[0]} control-${position[1]}`;\n    } else {\n      this.scope.controlsPositionClass = \"\";\n    }\n  }\n\n  protected setIndicatorsOptions() {\n    const positions = this.scope.indicatorsPosition?.split(\n      \"-\"\n    ) as SlideshowIndicatorsPosition[];\n    if (this.scope.indicators && positions.length === 2) {\n      this.scope.indicatorsPositionClass = `indicators-${positions[0]} indicators-${positions[1]}`;\n    } else {\n      this.scope.indicatorsPositionClass = \"\";\n    }\n  }\n\n  protected _onViewChanges() {\n    this.debug(\"onViewChanges\");\n    if (!this.scope.items?.length || !this.slideElements?.length) {\n      return;\n    }\n    try {\n      this.setSlidePositions();\n      const index = this.setCenteredSlideActive();\n      if (this.scope.sticky) {\n        this.goTo(index);\n      }\n    } catch (error: any) {\n      this.throw(error);\n    }\n  }\n\n  protected onViewChanges = debounce(this._onViewChanges.bind(this));\n\n  protected onVisibilityChanged(event: CustomEvent) {\n    if (event.detail.visible) {\n      this.dragscrollService?.checkDraggable();\n      this.continuousAutoplayService?.update();\n    }\n  }\n\n  protected _onScroll() {\n    //\n  }\n\n  protected onScroll = debounce(this._onScroll.bind(this));\n\n  protected onScrollend() {\n    if (!this.scope.items?.length) {\n      return;\n    }\n    try {\n      this.setSlidePositions();\n      this.setCenteredSlideActive();\n      if (this.scope.sticky) {\n        this.scrollToNearestSlide();\n      }\n    } catch (error: any) {\n      this.throw(error);\n    }\n  }\n\n  protected onMouseIn() {\n    if (this.scope.pauseOnHover) {\n      this.scope.pause = true;\n    }\n  }\n\n  protected onMouseOut() {\n    this.resume();\n  }\n\n  protected _onMouseUp() {\n    //\n  }\n\n  protected onMouseUp = throttle(this._onMouseUp.bind(this));\n\n  protected _resume() {\n    this.setSlidePositions();\n    this.scope.pause = false;\n  }\n\n  /** Resume if this method was not called up for [delay] milliseconds */\n  protected resume = throttle(this._resume.bind(this), 500);\n\n  protected connectedCallback() {\n    // If slides not added by template or attribute\n    if (!this.scope.items?.length && this.slideElements) {\n      this.addItemsByChilds();\n    }\n    super.connectedCallback();\n    this.init(Bs5SlideshowComponent.observedAttributes);\n    this.addEventListeners();\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"newPageReady\", this.onViewChanges);\n\n    // If sidebar itself resizes\n    if (window.ResizeObserver) {\n      this.resizeObserver = new window.ResizeObserver(this.onViewChanges);\n      this.resizeObserver?.observe(this);\n    }\n\n    // If window resizes\n    window.addEventListener(\"resize\", this.onViewChanges, { passive: true });\n\n    // Custom event triggered by some parent components when this component changes his visibility, e.g. triggered in the bs5-tabs component\n    this.addEventListener(\n      \"visibility-changed\" as any,\n      this.onVisibilityChanged\n    );\n\n    this.slideshowInner?.addEventListener(\"scroll\", this.onScroll, {\n      passive: true,\n    });\n    this.slideshowInner?.addEventListener(\"scrollended\", this.onScrollend, {\n      passive: true,\n    });\n\n    this.addEventListener(\"mouseenter\", this.onMouseIn, { passive: true });\n    this.addEventListener(\"mouseover\", this.onMouseIn, { passive: true });\n    this.addEventListener(\"focusin\", this.onMouseIn, { passive: true });\n    this.addEventListener(\"touchstart\", this.onMouseIn, { passive: true });\n\n    this.addEventListener(\"mouseleave\", this.onMouseOut, { passive: true });\n    this.addEventListener(\"focusout\", this.onMouseOut, { passive: true });\n\n    this.addEventListener(\"mouseup\", this.onMouseUp, { passive: true });\n    this.addEventListener(\"touchend\", this.onMouseUp, { passive: true });\n    this.addEventListener(\"scroll\", this.onMouseUp, { passive: true });\n    this.addEventListener(\"scrollend\", this.onMouseUp, { passive: true });\n    // See ScrollEventsService for this event\n    this.addEventListener(\"scrollended\", this.onMouseUp, { passive: true });\n  }\n\n  protected removeEventListeners() {\n    this.routerEvents.off(\"newPageReady\", this.onViewChanges, this);\n\n    window.removeEventListener(\"resize\", this.onViewChanges);\n\n    this.resizeObserver?.unobserve(this);\n\n    this.bs5.events.off(\"breakpoint:changed\", this.onViewChanges, this);\n\n    this.removeEventListener(\n      \"visibility-changed\" as any,\n      this.onVisibilityChanged\n    );\n\n    this.slideshowInner?.removeEventListener(\"scroll\", this.onScroll);\n    this.slideshowInner?.removeEventListener(\"scrollended\", this.onScrollend);\n\n    this.removeEventListener(\"mouseenter\", this.onMouseIn);\n    this.removeEventListener(\"mouseover\", this.onMouseIn);\n    this.removeEventListener(\"focusin\", this.onMouseIn);\n    this.removeEventListener(\"touchstart\", this.onMouseIn);\n\n    this.removeEventListener(\"mouseleave\", this.onMouseOut);\n    this.removeEventListener(\"focusout\", this.onMouseOut);\n\n    this.removeEventListener(\"mouseup\", this.onMouseUp);\n    this.removeEventListener(\"touchend\", this.onMouseUp);\n    this.removeEventListener(\"scroll\", this.onMouseUp);\n    this.removeEventListener(\"scrollend\", this.onMouseUp);\n    // See ScrollEventsService for this event\n    this.removeEventListener(\"scrollended\", this.onMouseUp);\n  }\n\n  protected initAll() {\n    this.initSlideshowInner();\n    this.initOptions();\n    this.addEventListeners();\n    // initial\n    this.onViewChanges();\n    this.onScrollend();\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.validateItems();\n  }\n\n  protected async afterBind() {\n    this.initAll();\n    await super.afterBind();\n  }\n\n  protected initSlideshowInner() {\n    if (!this.slideshowInner) {\n      this.throw(new Error(\"Can't init slideshow inner!\"));\n      return;\n    }\n\n    this.scrollEventsService = new ScrollEventsService(this.slideshowInner);\n  }\n\n  protected enableDesktopDragscroll() {\n    if (!this.dragscrollService) {\n      if (!this.slideshowInner) {\n        return;\n      }\n      const dragscrollOptions: DragscrollOptions = { detectGlobalMove: true };\n      this.dragscrollService = new Dragscroll(\n        this.slideshowInner,\n        dragscrollOptions\n      );\n    }\n  }\n\n  protected disableDesktopDragscroll() {\n    if (this.dragscrollService) {\n      this.dragscrollService.destroy();\n      this.dragscrollService = undefined;\n    }\n  }\n\n  public enableTouchScroll() {\n    this.classList.remove(\"touchscroll-disabled\");\n  }\n\n  public disableTouchScroll() {\n    this.classList.add(\"touchscroll-disabled\");\n  }\n\n  protected enableContinuousAutoplay() {\n    if (!this.continuousAutoplayService && this.slideshowInner) {\n      const autoscrollOptions: AutoscrollOptions = {\n        velocity: this.scope.autoplayVelocity,\n        angle: this.scope.angle,\n        pauseOnHover: this.scope.pauseOnHover,\n      };\n      this.continuousAutoplayService = new Autoscroll(\n        this.slideshowInner,\n        autoscrollOptions\n      );\n    }\n    // on continuous autoplay the scrollended event is never triggered, so call this method all `intervalsTimeMs` milliseconds as a WORKAROUND\n    if (this.continuousAutoplayIntervalIndex === null) {\n      // intervals are depending on the autoscrolling speed (autoplayVelocity)\n      const intervalsTimeMs = this.scope.autoplayVelocity * 10000;\n      // this.debug('intervalsTimeMs', intervalsTimeMs);\n      this.continuousAutoplayIntervalIndex = window.setInterval(\n        this.onScrollend.bind(this),\n        intervalsTimeMs\n      );\n    }\n  }\n\n  protected disableContinuousAutoplay() {\n    if (this.continuousAutoplayService) {\n      this.continuousAutoplayService.pause();\n      this.continuousAutoplayService.destroy();\n      this.continuousAutoplayService = undefined;\n    }\n    if (this.continuousAutoplayIntervalIndex !== null) {\n      window.clearInterval(this.continuousAutoplayIntervalIndex);\n      this.continuousAutoplayIntervalIndex = null;\n    }\n  }\n\n  protected resetIntervalAutoplay() {\n    this.scope.intervalCount = 0;\n    this.scope.intervalProgress = 0;\n  }\n\n  protected enableIntervalAutoplay() {\n    const steps = 100;\n    if (this.autoplayIntervalIndex === null) {\n      this.autoplayIntervalIndex = window.setInterval(() => {\n        if (!this.scope.pause) {\n          this.scope.intervalCount += steps;\n          this.scope.intervalProgress =\n            (this.scope.intervalCount / this.scope.autoplayInterval) * 100;\n          if (this.scope.intervalProgress >= 100) {\n            this.next();\n          }\n        }\n      }, steps);\n    }\n  }\n\n  protected disableIntervalAutoplay() {\n    this.resetIntervalAutoplay();\n    console.debug(\"disableIntervalAutoplay\", this.autoplayIntervalIndex);\n    if (this.autoplayIntervalIndex !== null) {\n      window.clearInterval(this.autoplayIntervalIndex);\n      this.autoplayIntervalIndex = null;\n    }\n  }\n\n  protected disableAutoplay() {\n    this.disableIntervalAutoplay();\n    this.disableContinuousAutoplay();\n  }\n\n  protected enableAutoplay() {\n    this.disableAutoplay();\n    // continuous scrolling\n    if (this.scope.autoplayInterval <= 0) {\n      this.enableContinuousAutoplay();\n    } else {\n      this.enableIntervalAutoplay();\n    }\n  }\n\n  protected transformTemplateAttributes(attributes: any, index: number) {\n    attributes = super.transformTemplateAttributes(attributes, index);\n    attributes.handle = attributes.handle || index.toString();\n    attributes.index = index;\n    attributes.class = attributes.class || \"\";\n    attributes.class += \" slide\";\n    return attributes;\n  }\n\n  protected validateItems() {\n    if (!this.scope.items) {\n      this.throw(new Error(\"No items to validate!\"));\n      return;\n    }\n    for (let i = 0; i < this.scope.items.length; i++) {\n      const item = this.scope.items[i];\n      item.index = item.index || i;\n      item.active = item.active || false;\n      item.title = item.title || \"\";\n      item.handle = item.handle || item.index.toString();\n      item.position =\n        item.position ||\n        ({\n          centerX: 0,\n          centerY: 0,\n        } as SlideshowSlidePosition);\n\n      item.class = item.class || \"\";\n      item.class += \" slide\";\n\n      item.content = item.content || templateImage;\n    }\n  }\n\n  /**\n   * Add slide by template element\n   * @param tpl template element\n   */\n  protected addItemByTemplate(tpl: HTMLTemplateElement, index: number) {\n    const attributes = this.getTemplateAttributes(tpl, index);\n    const content = tpl.innerHTML;\n    if (attributes.type) {\n      if (attributes.type === \"slide\") {\n        if (!this.scope.items) {\n          this.scope.items = [];\n        }\n        this.scope.items.push({ ...attributes, content });\n      }\n      if (attributes.type === \"controls\") {\n        this.templateControls = content;\n      }\n      if (attributes.type === \"indicators\") {\n        this.templateIndicators = content;\n      }\n    }\n  }\n\n  /**\n   * Add slides by child elements (not as template elements)\n   * @param tpl template element\n   */\n  protected addItemsByChilds() {\n    if (!this.slideElements) {\n      this.throw(\n        new Error(\n          \"Can't not add items by child's because no slide child's are found!\"\n        )\n      );\n    }\n\n    this.slideElements.forEach((slideElement, index) => {\n      const handle =\n        slideElement.getAttribute(\"handle\") ||\n        slideElement.getAttribute(\"id\") ||\n        index.toString();\n      slideElement.setAttribute(\"index\", index.toString());\n      const attributes = {\n        handle,\n        active: false,\n        content: slideElement.innerHTML,\n        index,\n        position: {\n          ...slideElement.getBoundingClientRect(),\n          centerY: 0,\n          centerX: 0,\n        },\n      };\n      if (!this.scope.items) {\n        this.scope.items = [];\n      }\n      this.scope.items.push(attributes);\n    });\n  }\n\n  protected getScrollPosition(): ScrollPosition | null {\n    if (!this.slideshowInner) {\n      return null;\n    }\n    const scrollPosition = getScrollPosition(this.slideshowInner);\n    return scrollPosition;\n  }\n\n  /**\n   * get closest number\n   * @see https://stackoverflow.com/a/35000557\n   * @param goal the number which this number should be closest to\n   * @param curr current number in loop\n   * @param prev previous number or closest value found so far\n   */\n  protected getCurrentClosestNumber(goal: number, curr: number, prev: number) {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  }\n\n  protected getMostCenteredSlideIndex() {\n    if (!this.scope.items?.length) {\n      this.throw(new Error(\"No slide items found!\"));\n      return -1;\n    }\n\n    let nearZero = Math.abs(\n      this.scope.angle === \"vertical\"\n        ? this.scope.items[0].position.centerY\n        : this.scope.items[0].position.centerX\n    );\n    let minIndex = 0;\n\n    for (let i = 1; i < this.scope.items.length; i++) {\n      const position = Math.abs(\n        this.scope.angle === \"vertical\"\n          ? this.scope.items[i].position.centerY\n          : this.scope.items[i].position.centerX\n      );\n      nearZero = this.getCurrentClosestNumber(0, position, nearZero);\n      if (nearZero === position) {\n        minIndex = i;\n      }\n    }\n    return minIndex;\n  }\n\n  protected setAllSlidesInactive(excludeIndex = -1) {\n    if (!this.slideElements || !this.scope.items?.length) {\n      return;\n    }\n    for (let index = 0; index < this.scope.items.length; index++) {\n      if (index !== excludeIndex) {\n        if (this.scope.items[index]) {\n          this.scope.items[index].active = false;\n        }\n        if (this.slideElements[index] && this.slideElements[index].classList) {\n          this.slideElements[index].classList.remove(\"active\");\n        }\n      }\n    }\n  }\n\n  protected setSlideActive(index: number) {\n    if (index === -1 || !this.scope.items?.length) {\n      console.warn(new Error(\"Most centered slide not found!\"));\n      index = 0;\n    }\n\n    if (!this.scope.items?.[index]) {\n      index = 0;\n    }\n    if (!this.scope.items?.[index]) {\n      this.throw(new Error(\"Slide item to set active not found!\"));\n      return 0;\n    }\n    this.setAllSlidesInactive(index);\n    this.scope.items[index].active = true;\n    this.scope.activeIndex = index;\n    this.scope.nextIndex = this.getNextIndex(index);\n    this.scope.prevIndex = this.getPrevIndex(index);\n    this.resetIntervalAutoplay();\n\n    if (this.slideElements && this.slideElements[index].classList) {\n      this.slideElements[index].classList.add(\"active\");\n    }\n  }\n\n  protected setCenteredSlideActive(): number {\n    const index = this.getMostCenteredSlideIndex();\n    this.setSlideActive(index);\n    return index;\n  }\n\n  protected isScrollableToIndex(index: number) {\n    const scrollPosition = this.getScrollPosition();\n    if (!this.scope.items?.[index] || !this.slideshowInner || !scrollPosition) {\n      return false;\n    }\n    const maxScrollTo =\n      this.scope.angle === \"vertical\"\n        ? scrollPosition.maxY\n        : scrollPosition.maxX;\n    const scrollTo =\n      this.scope.angle === \"vertical\"\n        ? this.slideshowInner.scrollTop +\n          this.scope.items[index].position.centerY\n        : this.slideshowInner.scrollLeft +\n          this.scope.items[index].position.centerX;\n    return scrollTo <= maxScrollTo && scrollTo >= 0;\n  }\n\n  protected setSlidePositions() {\n    if (!this.bound) {\n      return;\n    }\n\n    if (this.scope.items?.length !== this.slideElements?.length) {\n      console.warn(\n        new Error(\n          `The slide objects must be the same size as the slide elements! items (${this.scope.items?.length}) !== slideElements (${this.slideElements?.length})`\n        ),\n        this.slideElements,\n        this\n      );\n      return;\n    }\n    if (!this.slideshowInner) {\n      return;\n    }\n\n    const mainBoundingClient = this.slideshowInner.getBoundingClientRect();\n    for (let i = 0; i < this.scope.items.length; i++) {\n      const slideElement = this.slideElements[i];\n      const item = this.scope.items[i];\n      const rect = slideElement.getBoundingClientRect();\n\n      rect.x -= mainBoundingClient.x;\n      rect.y -= mainBoundingClient.y;\n\n      item.position = {\n        ...rect,\n        // 0 if element is in the middle / center\n        centerY: rect.y + rect.height / 2 - mainBoundingClient.height / 2,\n        // 0 if element is in the middle / center\n        centerX: rect.x + rect.width / 2 - mainBoundingClient.width / 2,\n      };\n    }\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"items\"];\n  }\n\n  /**\n   * Similar to attributeChangedCallback but attribute arguments are already parsed as they are stored in the scope\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected parsedAttributeChangedCallback(\n    attributeName: keyof Bs5SlideshowComponentScope,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n\n    if (attributeName === \"items\") {\n      this.validateItems();\n    }\n\n    if (attributeName === \"autoplay\") {\n      if (this.scope.autoplay) {\n        this.enableAutoplay();\n      } else {\n        this.disableAutoplay();\n      }\n    }\n\n    if (attributeName === \"drag\") {\n      if (this.scope.drag) {\n        this.enableDesktopDragscroll();\n      } else {\n        this.disableDesktopDragscroll();\n      }\n    }\n\n    if (attributeName === \"touchScroll\") {\n      if (this.scope.touchScroll) {\n        this.enableTouchScroll();\n      } else {\n        this.disableTouchScroll();\n      }\n    }\n    if (attributeName === \"controls\" || attributeName === \"controlsPosition\") {\n      this.setControlsOptions();\n    }\n\n    if (\n      attributeName === \"indicators\" ||\n      attributeName === \"indicatorsPosition\"\n    ) {\n      this.setIndicatorsOptions();\n    }\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    this.removeEventListeners();\n    // this.scrollEventsService?.destroy();\n    // this.disableAutoplay();\n    // this.disableDesktopDragscroll();\n    // return super.disconnectedCallback();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    // Only set the component template if there no childs or the childs are templates\n    if (!hasChildNodesTrim(this) || this.hasOnlyTemplateChilds()) {\n      // ('Full template!', this.templateIndicators);\n      return templateSlides + this.templateControls + this.templateIndicators;\n    } else {\n      // this.debug('Append to template!');\n      // Prepend control elements if no custom control elements in template are found\n      if (this.controlsElements.length <= 0) {\n        this.innerHTML += this.templateControls;\n      }\n\n      if (!this.indicatorsElement) {\n        this.innerHTML += this.templateIndicators;\n      }\n\n      return null;\n    }\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { scrollTo } from \"@ribajs/utils/src/dom.js\";\nimport { debounce } from \"@ribajs/utils/src/control\";\nimport { Bs5Service } from \"../../services/index.js\";\nimport {\n  Bs5SliderControlsPosition,\n  Bs5SliderIndicatorsPosition,\n  Bs5SliderComponentScope,\n  JsxBs5SliderProps,\n  Bs5SliderSlide,\n} from \"../../types/index.js\";\nimport {\n  Dragscroll,\n  DragscrollOptions,\n  Autoscroll,\n  ScrollPosition,\n  ScrollEventsService,\n  getScrollPosition,\n  ScrollEventDetail,\n} from \"@ribajs/extras\";\n\nconst SLIDER_INNER_SELECTOR = \".slider-row\";\n\nconst SLIDES_SELECTOR = `${SLIDER_INNER_SELECTOR} .slide`;\n\n/**\n * @event scrolling - Fires when the slider is scrolling\n * @event scrollended - Fires when the slider has scrolled\n */\nexport class Bs5SliderComponent extends Component {\n  protected resizeObserver?: ResizeObserver;\n  protected bs5: Bs5Service;\n\n  protected get sliderInner() {\n    return this.querySelector<HTMLElement>(SLIDER_INNER_SELECTOR);\n  }\n\n  protected get slideElements() {\n    return Array.from(this.querySelectorAll<HTMLElement>(SLIDES_SELECTOR));\n  }\n\n  protected get controlsElements() {\n    return this.querySelectorAll(\".slider-control-prev, .slider-control-next\");\n  }\n\n  protected get indicatorsElement() {\n    return this.querySelector(\".slider-indicators\");\n  }\n\n  public static EVENTS = {\n    scrolling: \"scrolling\",\n    scrollended: \"scrollended\",\n  };\n\n  static get observedAttributes(): (keyof JsxBs5SliderProps)[] {\n    return [\n      \"items\",\n      \"slides-to-scroll\",\n      \"controls\",\n      \"controls-position\",\n      \"drag\",\n      \"sticky\",\n      \"indicators\",\n      \"indicators-position\",\n      \"infinite\",\n      \"columns\",\n    ];\n  }\n\n  protected defaultScope: Bs5SliderComponentScope = {\n    // Options\n    slidesToScroll: 1,\n    controls: true,\n    controlsPosition: \"inside-middle\",\n    sticky: false,\n    indicators: true,\n    indicatorsPosition: \"inside-bottom\",\n    drag: false,\n    touchScroll: true,\n    angle: \"horizontal\",\n    infinite: false,\n    columns: 0,\n\n    // States\n    items: [],\n    nextIndex: -1,\n    prevIndex: -1,\n    enableNextControl: false,\n    enablePrevControl: false,\n    showControls: false,\n    showIndicators: false,\n    activeSlides: [],\n    isScrolling: false,\n    slideItemStyle: {},\n\n    // Template methods\n    next: this.next.bind(this),\n    prev: this.prev.bind(this),\n    goTo: this.goTo.bind(this),\n    enableTouchScroll: this.enableTouchScroll.bind(this),\n    disableTouchScroll: this.disableTouchScroll.bind(this),\n\n    // Classes\n    controlsPositionClass: \"\",\n    indicatorsPositionClass: \"\",\n  };\n\n  public static tagName = \"bs5-slider\";\n\n  protected autobind = true;\n\n  protected dragscrollService?: Dragscroll;\n\n  protected continuousAutoplayService?: Autoscroll;\n\n  protected scrollEventsService?: ScrollEventsService;\n\n  protected autoplayIntervalIndex: number | null = null;\n\n  protected continuousAutoplayIntervalIndex: number | null = null;\n\n  protected resumeTimer: number | null = null;\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: Bs5SliderComponentScope = {\n    ...this.defaultScope,\n  };\n\n  constructor() {\n    super();\n    this.bs5 = Bs5Service.getSingleton();\n\n    // set event listeners to the this-bound version once, so we can easily pass them to DOM event handlers and remove them again later\n    this.onViewChanges = this.onViewChanges.bind(this);\n    this.onVisibilityChanged = this.onVisibilityChanged.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n    this.onScrollEnd = this.onScrollEnd.bind(this);\n\n    // this.onScroll = debounce(this.onScroll.bind(this), 100)\n  }\n\n  /**\n   * Go to next slide\n   */\n  public next() {\n    this.scrollToNextSlide();\n  }\n\n  /**\n   * Go to prev slide\n   */\n  public prev() {\n    this.scrollToPrevSlide();\n  }\n\n  /**\n   * Go to slide by index\n   * @param index The index of the slide you want to go to\n   * @param fromRight If true, the index is calculated from the right side of the slider, set this to true if you slide to the right\n   * @returns The index of the slide you went to or -1 if the end of the slider is reached\n   */\n  protected goTo(index: number, fromRight = false) {\n    if (index === -1 && !this.scope.infinite) {\n      console.warn(`End of slider reached!`);\n      return -1;\n    }\n\n    // The `scrollTo` method scrolls to the left, so we need to calculate the index of the right slide item\n    if (index !== -1 && fromRight && this.scope.activeSlides.length > 1) {\n      index = index - this.scope.activeSlides.length + 1;\n      if (index < 0) {\n        index = 0;\n      }\n    }\n\n    const item = this.scope.items[index];\n\n    if (!item || !this.sliderInner || !item.el) {\n      console.warn(`Slide element with index \"${index}\" not found!`);\n      return -1;\n    }\n\n    scrollTo(item.el, 0, this.sliderInner, this.scope.angle);\n    return index;\n  }\n\n  /**\n   * Calculate the next index to scroll to\n   * @param currentActive The current active index\n   * @returns The next index or -1 if there is no next index\n   */\n  protected getNextIndex(currentActive: number) {\n    let nextIndex = currentActive + this.scope.slidesToScroll;\n\n    if (nextIndex > this.scope.items.length - 1) {\n      if (this.scope.infinite) {\n        nextIndex = nextIndex - this.scope.items.length;\n      } else {\n        // return this.scope.items.length - 1\n        return -1;\n      }\n    }\n    return nextIndex;\n  }\n\n  /**\n   * Calculate the previous index to scroll to\n   * @param currentActive The current active index\n   * @returns The previous index or -1 if there is no previous index\n   */\n  protected getPrevIndex(currentActive: number) {\n    let prevIndex = currentActive - this.scope.slidesToScroll;\n\n    if (prevIndex < 0) {\n      if (this.scope.infinite) {\n        prevIndex = this.scope.items.length - 1 + (prevIndex + 1);\n      } else {\n        // return 0\n        return -1;\n      }\n    }\n    return prevIndex;\n  }\n\n  /**\n   * Scroll to the next slide\n   */\n  protected scrollToNextSlide() {\n    // Skip slide if already scrolling\n    if (this.scope.isScrolling) {\n      this.scope.nextIndex = this.getNextIndex(this.scope.nextIndex);\n      this.updateControls();\n    }\n    return this.goTo(this.scope.nextIndex, true);\n  }\n\n  /**\n   * Scroll to the previous slide\n   */\n  protected scrollToPrevSlide() {\n    // Skip slide if already scrolling\n    if (this.scope.isScrolling) {\n      this.scope.prevIndex = this.getPrevIndex(this.scope.prevIndex);\n      this.updateControls();\n    }\n    return this.goTo(this.scope.prevIndex, false);\n  }\n\n  protected initOptions() {\n    this.setOptions();\n  }\n\n  protected setOptions() {\n    if (this.scope.drag) {\n      this.enableDesktopDragscroll();\n    } else {\n      this.disableDesktopDragscroll();\n    }\n    if (this.scope.touchScroll) {\n      this.enableTouchScroll();\n    } else {\n      this.disableTouchScroll();\n    }\n    this.updateColumns();\n    this.setControlsOptions();\n    this.setIndicatorsOptions();\n  }\n\n  protected updateColumns() {\n    this.scope.slideItemStyle ||= {};\n\n    if (this.scope.columns > 0) {\n      this.scope.slideItemStyle.flex = `0 0 ${100 / this.scope.columns}%`;\n    } else {\n      this.scope.slideItemStyle.flex = \"\";\n    }\n  }\n\n  protected setControlsOptions() {\n    const position = this.scope.controlsPosition?.split(\n      \"-\"\n    ) as Bs5SliderControlsPosition[];\n    if (this.scope.controls && position.length === 2) {\n      this.scope.controlsPositionClass = `control-${position[0]} control-${position[1]}`;\n    } else {\n      this.scope.controlsPositionClass = \"\";\n    }\n  }\n\n  protected setIndicatorsOptions() {\n    const positions = this.scope.indicatorsPosition?.split(\n      \"-\"\n    ) as Bs5SliderIndicatorsPosition[];\n    if (this.scope.indicators && positions.length === 2) {\n      this.scope.indicatorsPositionClass = `indicators-${positions[0]} indicators-${positions[1]}`;\n    } else {\n      this.scope.indicatorsPositionClass = \"\";\n    }\n  }\n\n  protected _onViewChanges() {\n    this.debug(\"onViewChanges\");\n    if (!this.scope.items?.length || !this.slideElements?.length) {\n      return;\n    }\n    try {\n      this.updateSlides();\n    } catch (error: any) {\n      this.throw(error);\n    }\n  }\n\n  protected onViewChanges = debounce(this._onViewChanges.bind(this));\n\n  protected onVisibilityChanged(event: CustomEvent) {\n    if (event.detail.visible) {\n      this.dragscrollService?.checkDraggable();\n      this.continuousAutoplayService?.update();\n    }\n  }\n\n  protected onScroll(event: CustomEvent<ScrollEventDetail>) {\n    this.scope.isScrolling = true;\n    // Forward the event to this component, so that other components can listen to it\n    this.dispatchEvent(\n      new CustomEvent<ScrollEventDetail>(event.type, { detail: event.detail })\n    );\n  }\n\n  protected onScrollEnd(event: CustomEvent<ScrollEventDetail>) {\n    this.scope.isScrolling = false;\n    if (!this.scope.items?.length) {\n      return;\n    }\n\n    if (event.detail.direction === \"none\") {\n      return;\n    }\n\n    try {\n      this.updateSlides();\n    } catch (error: any) {\n      this.throw(error);\n    }\n\n    // Forward the event to this component, so that other components can listen to it\n    this.dispatchEvent(\n      new CustomEvent<ScrollEventDetail>(event.type, { detail: event.detail })\n    );\n  }\n\n  protected connectedCallback() {\n    if (this.scope.items.length || this.scope.slideTemplate) {\n      this.updateItems();\n    } else {\n      this.initItemsByChildren();\n    }\n\n    super.connectedCallback();\n    this.init(Bs5SliderComponent.observedAttributes);\n    this.addEventListeners();\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"newPageReady\", this.onViewChanges);\n\n    // If sidebar itself resizes\n    if (window.ResizeObserver) {\n      this.resizeObserver = new window.ResizeObserver(this.onViewChanges);\n      this.resizeObserver?.observe(this);\n    }\n\n    // If window resizes\n    window.addEventListener(\"resize\", this.onViewChanges, { passive: true });\n\n    // Custom event triggered by some parent components when this component changes his visibility, e.g. triggered in the bs5-tabs component\n    this.addEventListener(\n      \"visibility-changed\" as any,\n      this.onVisibilityChanged\n    );\n\n    this.sliderInner?.addEventListener(\n      Bs5SliderComponent.EVENTS.scrolling,\n      this.onScroll as EventListener,\n      {\n        passive: true,\n      }\n    );\n    this.sliderInner?.addEventListener(\n      Bs5SliderComponent.EVENTS.scrollended,\n      this.onScrollEnd as EventListener,\n      {\n        passive: true,\n      }\n    );\n  }\n\n  protected removeEventListeners() {\n    this.routerEvents.off(\"newPageReady\", this.onViewChanges, this);\n\n    window.removeEventListener(\"resize\", this.onViewChanges);\n\n    this.resizeObserver?.unobserve(this);\n\n    this.bs5.events.off(\"breakpoint:changed\", this.onViewChanges, this);\n\n    this.removeEventListener(\n      \"visibility-changed\" as any,\n      this.onVisibilityChanged\n    );\n\n    this.sliderInner?.removeEventListener(\n      Bs5SliderComponent.EVENTS.scrolling,\n      this.onScroll as EventListener\n    );\n    this.sliderInner?.removeEventListener(\n      Bs5SliderComponent.EVENTS.scrollended,\n      this.onScrollEnd as EventListener\n    );\n  }\n\n  protected initAll() {\n    this.initSlideshowInner();\n    this.initOptions();\n    this.addEventListeners();\n    // initial\n    this.updateSlides();\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.validateItems();\n  }\n\n  protected async afterBind() {\n    this.initAll();\n    this.updateItems();\n    this.classList.add(`${Bs5SliderComponent.tagName}-ready`);\n    await super.afterBind();\n  }\n\n  protected async afterAllBind() {\n    this.updateItems();\n    await super.afterAllBind();\n  }\n\n  protected initSlideshowInner() {\n    if (!this.sliderInner) {\n      this.throw(new Error(\"Can't init slider inner!\"));\n      return;\n    }\n\n    this.scrollEventsService = new ScrollEventsService(this.sliderInner);\n  }\n\n  protected enableDesktopDragscroll() {\n    if (!this.dragscrollService) {\n      if (!this.sliderInner) {\n        return;\n      }\n      const dragscrollOptions: DragscrollOptions = { detectGlobalMove: true };\n      this.dragscrollService = new Dragscroll(\n        this.sliderInner,\n        dragscrollOptions\n      );\n    }\n  }\n\n  protected disableDesktopDragscroll() {\n    if (this.dragscrollService) {\n      this.dragscrollService.destroy();\n      this.dragscrollService = undefined;\n    }\n  }\n\n  public enableTouchScroll() {\n    this.classList.remove(\"touchscroll-disabled\");\n  }\n\n  public disableTouchScroll() {\n    this.classList.add(\"touchscroll-disabled\");\n  }\n\n  protected validateItems() {\n    if (!this.scope.items) {\n      this.throw(new Error(\"No items to validate!\"));\n      return;\n    }\n    for (let i = 0; i < this.scope.items.length; i++) {\n      const item = this.scope.items[i];\n      item.index = item.index || i;\n      item.active = item.active || false;\n    }\n  }\n\n  public updateItems() {\n    let hasChange = false;\n    const slideEls = this.slideElements;\n\n    // Check if items are missing only if there is no slide template\n    if (!this.scope.slideTemplate) {\n      slideEls.forEach((slideEl, index) => {\n        const exists = this.scope.items.find((item) => item.el === slideEl);\n        if (!exists) {\n          this.addItemByElement(slideEl, index);\n          hasChange = true;\n        }\n      });\n    }\n\n    // Check if items are not existing anymore\n    for (const item of this.scope.items) {\n      const exists = slideEls.find((slideEl) => slideEl === item.el);\n      if (!exists) {\n        this.removeItem(item.index, false);\n        hasChange = true;\n      }\n    }\n\n    if (hasChange) {\n      this.updateItemIndexes();\n      this.updateSlides();\n    }\n\n    return hasChange;\n  }\n\n  /**\n   * Remove slide item\n   * @param index The index of the item to remove\n   */\n  protected removeItem(index: number, updateIndex = true) {\n    const item = this.scope.items[index];\n    if (!item) {\n      return;\n    }\n    item.el?.remove();\n    this.scope.items.splice(index, 1);\n    if (updateIndex) this.updateItemIndexes();\n  }\n\n  protected updateItemIndexes() {\n    for (let i = 0; i < this.scope.items.length; i++) {\n      const item = this.scope.items[i];\n      item.index = i;\n    }\n  }\n\n  protected addItemByElement(slideElement: HTMLElement, index: number) {\n    slideElement.setAttribute(\"index\", index.toString());\n    const attributes: Bs5SliderSlide = {\n      active: false,\n      index,\n      el: slideElement,\n    };\n    this.scope.items.push(attributes);\n  }\n\n  /**\n   * Add slides by child elements\n   * @param tpl template element\n   */\n  protected initItemsByChildren() {\n    if (!this.slideElements) {\n      this.throw(\n        new Error(\n          \"Can't not add items by child's because no slide child's are found!\"\n        )\n      );\n    }\n    this.scope.items = [];\n    this.slideElements.forEach(this.addItemByElement.bind(this));\n  }\n\n  protected getScrollPosition(): ScrollPosition | null {\n    if (!this.sliderInner) {\n      return null;\n    }\n    const scrollPosition = getScrollPosition(this.sliderInner);\n    return scrollPosition;\n  }\n\n  /**\n   * get closest number\n   * @see https://stackoverflow.com/a/35000557\n   * @param goal the number which this number should be closest to\n   * @param curr current number in loop\n   * @param prev previous number or closest value found so far\n   */\n  protected getCurrentClosestNumber(goal: number, curr: number, prev: number) {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  }\n\n  protected setAllSlidesInactive(excludeIndex = -1) {\n    for (const item of this.scope.items) {\n      if (item.index !== excludeIndex) {\n        item.active = false;\n        item.el?.classList.remove(\"active\");\n      }\n    }\n  }\n\n  protected setSlideActive(index: number) {\n    if (index === -1 || !this.scope.items?.length) {\n      console.warn(new Error(\"Most centered slide not found!\"));\n      index = 0;\n    }\n    if (!this.scope.items?.[index]) {\n      index = 0;\n    }\n    if (!this.scope.items?.[index]) {\n      this.throw(new Error(\"Slide item to set active, not found!\"));\n      return 0;\n    }\n\n    const item = this.scope.items[index];\n\n    item.active = true;\n    item.el?.classList.add(\"active\");\n  }\n\n  protected setSlidesActive(slides: number[]) {\n    this.setAllSlidesInactive();\n    for (const slideIndex of slides) {\n      this.setSlideActive(slideIndex);\n    }\n  }\n\n  protected isScrollable() {\n    if (!this.sliderInner) {\n      return false;\n    }\n\n    // Compare the height to see if the element has scrollable content\n    const hasScrollableContent =\n      this.scope.angle === \"horizontal\"\n        ? this.sliderInner.scrollWidth > this.sliderInner.clientWidth\n        : this.sliderInner.scrollHeight > this.sliderInner.clientHeight;\n\n    return hasScrollableContent;\n  }\n\n  protected getSlideElementByIndex(index: number) {\n    if (!this.sliderInner) {\n      return undefined;\n    }\n    const slideEl = this.sliderInner.querySelector(\n      `[index=\"${index}\"]`\n    ) as HTMLElement;\n    return slideEl;\n  }\n\n  protected isSlideVisible(item: Bs5SliderSlide, offset: number) {\n    if (!this.sliderInner) {\n      return false;\n    }\n    const containerRect = this.sliderInner.getBoundingClientRect();\n    item.el ||= this.getSlideElementByIndex(item.index);\n    const slideEl = item.el;\n    if (!slideEl) {\n      console.warn(\"Slide element not found!\");\n      return false;\n    }\n    const slideRect = slideEl.getBoundingClientRect();\n\n    // Check if the element is visible by comparing its position with the container\n    const isVisible =\n      this.scope.angle === \"horizontal\"\n        ? slideRect.left + offset >= containerRect.left &&\n          slideRect.right - offset <= containerRect.right\n        : slideRect.top + offset >= containerRect.top &&\n          slideRect.bottom - offset <= containerRect.bottom;\n\n    return isVisible;\n  }\n\n  protected getVisibleSlides(offset: number) {\n    const activeSlides: number[] = [];\n\n    if (!this.scope.items?.length) {\n      return activeSlides;\n    }\n\n    for (const item of this.scope.items) {\n      if (this.isSlideVisible(item, offset)) {\n        activeSlides.push(item.index);\n      }\n    }\n\n    return activeSlides.sort((a, b) => a - b);\n  }\n\n  protected setVisibleSlidesActive(offset: number) {\n    this.setAllSlidesInactive();\n    const activeSlides = this.getVisibleSlides(offset);\n    this.setSlidesActive(activeSlides);\n    return activeSlides;\n  }\n\n  updateActiveSlides(offset = 8) {\n    const activeSlides = this.setVisibleSlidesActive(offset);\n    const firstIndex = activeSlides[0] || 0;\n    const lastIndex = activeSlides[activeSlides.length - 1] || 0;\n    const prevIndex = this.getPrevIndex(firstIndex);\n    const nextIndex = this.getNextIndex(lastIndex);\n    return {\n      firstIndex,\n      lastIndex,\n      activeSlides,\n      prevIndex,\n      nextIndex,\n    };\n  }\n\n  protected updateSlides(offset = 8, isRetry = false): number[] {\n    if (!this.scope.items.length) {\n      return [];\n    }\n    const { activeSlides, firstIndex, prevIndex, nextIndex } =\n      this.updateActiveSlides(offset);\n\n    // Try again with a bigger offset if no slides are found\n    if (!activeSlides.length && !isRetry) {\n      let fallbackOffset = offset * 2;\n      if (this.scope.angle === \"horizontal\") {\n        const slideWidth = this.scope.items[0]?.el?.clientWidth || 0;\n        if (slideWidth) {\n          fallbackOffset = Math.round(slideWidth / 2 - 0.5);\n        }\n      } else {\n        const slideHeight = this.scope.items[0]?.el?.clientHeight || 0;\n        if (slideHeight) {\n          fallbackOffset = Math.round(slideHeight / 2 - 0.5);\n        }\n      }\n      return this.updateSlides(fallbackOffset, true);\n    }\n\n    // const oldActiveSlides = this.scope.activeSlides;\n    this.scope.activeSlides = activeSlides;\n    this.scope.prevIndex = prevIndex;\n    this.scope.nextIndex = nextIndex;\n\n    this.updateControls();\n    this.updateIndicators();\n\n    if (this.scope.sticky) {\n      this.goTo(firstIndex);\n    }\n\n    return activeSlides;\n  }\n\n  protected updateControls() {\n    const isScrollable = this.isScrollable();\n    this.scope.showControls =\n      this.scope.controls && isScrollable && this.scope.items.length > 1;\n\n    if (this.scope.infinite) {\n      this.scope.enableNextControl = true;\n      this.scope.enablePrevControl = true;\n      return;\n    }\n\n    this.scope.enableNextControl =\n      isScrollable &&\n      this.scope.nextIndex !== -1 &&\n      this.scope.nextIndex <= this.scope.items.length - 1;\n    this.scope.enablePrevControl =\n      isScrollable && this.scope.prevIndex !== -1 && this.scope.prevIndex >= 0;\n  }\n\n  protected updateIndicators() {\n    const isScrollable = this.isScrollable();\n    this.scope.showIndicators =\n      this.scope.indicators && isScrollable && this.scope.items.length > 1;\n  }\n\n  protected requiredAttributes(): string[] {\n    return [];\n  }\n\n  /**\n   * Similar to attributeChangedCallback but attribute arguments are already parsed as they are stored in the scope\n   * @param attributeName\n   * @param oldValue\n   * @param newValue\n   * @param namespace\n   */\n  protected parsedAttributeChangedCallback(\n    attributeName: keyof Bs5SliderComponentScope,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n\n    if (attributeName === \"items\") {\n      this.validateItems();\n    }\n\n    if (attributeName === \"drag\") {\n      if (this.scope.drag) {\n        this.enableDesktopDragscroll();\n      } else {\n        this.disableDesktopDragscroll();\n      }\n    }\n\n    if (attributeName === \"touchScroll\") {\n      if (this.scope.touchScroll) {\n        this.enableTouchScroll();\n      } else {\n        this.disableTouchScroll();\n      }\n    }\n    if (attributeName === \"controls\" || attributeName === \"controlsPosition\") {\n      this.setControlsOptions();\n    }\n\n    if (\n      attributeName === \"indicators\" ||\n      attributeName === \"indicatorsPosition\"\n    ) {\n      this.setIndicatorsOptions();\n    }\n\n    if (attributeName === \"columns\") {\n      this.updateColumns();\n    }\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    this.removeEventListeners();\n    // this.scrollEventsService?.destroy();\n    // this.disableDesktopDragscroll();\n    // return super.disconnectedCallback();\n  }\n\n  protected async beforeTemplate(): Promise<void> {\n    const templates = Array.from(this.querySelectorAll(\"template\"));\n    for (const template of templates) {\n      const type = template.getAttribute(\"type\");\n      switch (type) {\n        case \"slide-item\":\n          this.scope.slideTemplate =\n            template.content.children.item(0)?.outerHTML || undefined;\n          this.debug(\"Slide template found!\", this.scope.slideTemplate);\n          break;\n\n        default:\n          console.warn(`Unknown template type: ${type}`, template);\n          break;\n      }\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { VideoComponentScope, MediaReadyState } from \"../../types/index.js\";\nimport { justDigits } from \"@ribajs/utils\";\n\nexport class VideoComponent extends Component {\n  public static tagName = \"rv-video\";\n\n  protected autobind = true;\n  protected alreadyStartedPlaying = false;\n  protected wasPaused = false;\n  public _debug = false;\n\n  static get observedAttributes(): string[] {\n    return [\"video-src\", \"autoplay-on-min-buffer\", \"autoplay-media-query\"];\n  }\n\n  public get muted() {\n    return this.video && this.video.muted;\n  }\n\n  public set muted(muted: boolean) {\n    this.video.muted = muted;\n    this.scope.muted = this.video.muted;\n    if (muted) {\n      this.video.setAttribute(\"muted\", \"\");\n    } else {\n      this.video.removeAttribute(\"muted\");\n    }\n    this.onUpdate();\n  }\n\n  /**\n   * * 1.0 is highest volume (100%. This is default)\n   * * 0.5 is half volume (50%)\n   * * 0.0 is silent (same as mute)\n   */\n  public get volume() {\n    return this.video?.volume || 0;\n  }\n\n  public set volume(volume: number) {\n    this.video.volume = volume;\n    this.onUpdate();\n  }\n\n  public get loop() {\n    return this.video?.loop;\n  }\n\n  public set loop(loop: boolean) {\n    this.video.loop = loop;\n    if (loop) {\n      this.video.setAttribute(\"loop\", \"\");\n    } else {\n      this.video.removeAttribute(\"loop\");\n    }\n    this.onUpdate();\n  }\n\n  public get controls() {\n    return this.video?.controls;\n  }\n\n  public set controls(controls: boolean) {\n    this.video.controls = controls;\n    this.scope.controls = this.video.controls;\n    if (controls) {\n      this.video.setAttribute(\"controls\", \"\");\n      // show controls\n      this.video.dispatchEvent(new Event(\"mouseover\"));\n      this.video.dispatchEvent(new Event(\"mouseenter\"));\n      this.video.dispatchEvent(new Event(\"mousemove\"));\n    } else {\n      this.video.removeAttribute(\"controls\");\n    }\n    this.onUpdate();\n  }\n\n  public get currentTime() {\n    return this.video?.currentTime || 0;\n  }\n\n  public set currentTime(currentTime: number) {\n    this.video.currentTime = currentTime;\n    this.onUpdate();\n  }\n\n  public get autoplay() {\n    return this.video?.autoplay || false;\n  }\n\n  public set autoplay(autoplay: boolean) {\n    this.video.autoplay = autoplay;\n    this.onUpdate();\n  }\n\n  public get height() {\n    return this.video?.height || 0;\n  }\n\n  public set height(height: number) {\n    this.video.height = height;\n    this.onUpdate();\n  }\n\n  public get width() {\n    return this.video?.width || 0;\n  }\n\n  public set width(width: number) {\n    this.video.width = width;\n    this.onUpdate();\n  }\n\n  public get poster() {\n    return this.video?.poster;\n  }\n\n  public set poster(poster: string) {\n    this.video.poster = poster;\n    this.onUpdate();\n  }\n\n  public get preload() {\n    return this.video?.preload as \"\" | \"none\" | \"metadata\" | \"auto\";\n  }\n\n  public set preload(preload: \"\" | \"none\" | \"metadata\" | \"auto\") {\n    this.video.preload = preload;\n    this.onUpdate();\n  }\n\n  public get disablePictureInPicture() {\n    return (\n      (this.video as any)?.disablePictureInPicture ||\n      this.video?.hasAttribute(\"disablePictureInPicture\") ||\n      false\n    );\n  }\n\n  public set disablePictureInPicture(disablePictureInPicture: boolean) {\n    if (typeof (this.video as any)?.disablePictureInPicture !== \"undefined\") {\n      (this.video as any).disablePictureInPicture = disablePictureInPicture;\n    }\n\n    if (disablePictureInPicture) {\n      this.video.setAttribute(\"disablePictureInPicture\", \"\");\n    } else {\n      this.video.removeAttribute(\"disablePictureInPicture\");\n    }\n\n    this.onUpdate();\n  }\n\n  /**\n   * @readonly\n   */\n  public get paused() {\n    return this.video?.paused ?? true;\n  }\n\n  protected video: HTMLVideoElement;\n\n  public scope: VideoComponentScope = {\n    // properties\n    muted: this.muted,\n    volume: this.volume,\n    loop: this.loop,\n    controls: this.controls,\n    currentTime: this.currentTime,\n\n    videoSrc: undefined,\n    autoplayOnMinBuffer: 0,\n    autoplayMediaQuery: \"\",\n    disablePictureInPicture: this.disablePictureInPicture,\n    /**\n     * @readonly\n     */\n    paused: this.paused,\n    loading: false,\n    duration: 0,\n    readyState: MediaReadyState.HAVE_NOTHING,\n    buffer: 0,\n    // methods\n    toggleMute: this.toggleMute,\n    toggleControls: this.toggleControls,\n    play: this.play,\n    pause: this.pause,\n    togglePlay: this.togglePlay,\n    togglePause: this.togglePause,\n    reset: this.reset,\n  };\n\n  constructor() {\n    super();\n    this.video = this.getVideoEl();\n  }\n\n  protected getVideoEl() {\n    const video = this.querySelector<HTMLVideoElement>(\"video\");\n    if (!video) {\n      throw new Error(\"No video element found\");\n    }\n    return video;\n  }\n\n  public load() {\n    this.video.load();\n  }\n\n  public toggleMute() {\n    this.debug(\"toggleMute\");\n    this.muted = !this.muted;\n    this.onUpdate();\n  }\n\n  public toggleControls() {\n    this.debug(\"toggleControls\");\n    this.controls = !this.controls;\n    this.onUpdate();\n  }\n\n  public async play() {\n    this.debug(\"play\");\n    try {\n      this.video.play();\n    } catch (error) {\n      this.error(error);\n    }\n  }\n\n  public pause() {\n    this.debug(\"pause\");\n    this.video.pause();\n    this.onUpdate();\n  }\n\n  public async togglePlay() {\n    if (this.paused) {\n      return this.play();\n    } else {\n      return this.pause();\n    }\n  }\n\n  public togglePause() {\n    this.debug(\"togglePause\");\n    return this.togglePlay();\n  }\n\n  public reset() {\n    this.debug(\"reset\");\n    this.video.currentTime = 0;\n    this.onUpdate();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(VideoComponent.observedAttributes);\n    this.video = this.getVideoEl();\n    if (this.preload === \"auto\" || this.preload === \"metadata\") {\n      this.load();\n    }\n  }\n\n  protected initVideoElement() {\n    const video = this.querySelector(\"video\");\n    if (!video) {\n      throw new Error(\"The video child element is required!\");\n    }\n    this.video = video;\n    this.addEventListeners();\n    this.onUpdate();\n  }\n\n  /**\n   * Used to load new video source file\n   */\n  public resetVideo() {\n    this.video.innerHTML = \"\";\n    const videoEl = this.video.cloneNode(true) as HTMLVideoElement;\n    const videoWrapperEl = this.querySelector(\".video-wrapper\");\n    this.removeEventListeners();\n    this.video.remove();\n    if (videoWrapperEl) {\n      videoWrapperEl.appendChild(videoEl);\n    } else {\n      this.appendChild(videoEl);\n    }\n\n    this.video = videoEl;\n\n    if (this.video.hasAttribute(\"muted\")) {\n      this.muted = true;\n    } else {\n      this.muted = false;\n    }\n\n    if (this.video.hasAttribute(\"controls\")) {\n      this.controls = true;\n    } else {\n      this.controls = false;\n    }\n\n    if (this.video.hasAttribute(\"autoplay\")) {\n      this.autoplay = true;\n    } else {\n      this.autoplay = false;\n    }\n\n    if (this.video.hasAttribute(\"height\")) {\n      this.height = justDigits(this.video.getAttribute(\"height\") || 0);\n    }\n\n    if (this.video.hasAttribute(\"width\")) {\n      this.width = justDigits(this.video.getAttribute(\"width\") || 0);\n    }\n\n    if (this.video.hasAttribute(\"loop\")) {\n      this.loop = true;\n    } else {\n      this.loop = false;\n    }\n\n    if (this.video.hasAttribute(\"muted\")) {\n      this.muted = true;\n    } else {\n      this.muted = false;\n    }\n\n    if (this.video.hasAttribute(\"poster\")) {\n      this.poster = this.video.getAttribute(\"poster\") || \"\";\n    }\n\n    if (this.video.hasAttribute(\"preload\")) {\n      this.preload = (this.video.getAttribute(\"preload\") || \"\") as\n        | \"\"\n        | \"none\"\n        | \"metadata\"\n        | \"auto\";\n    }\n\n    if (this.video.hasAttribute(\"disablePictureInPicture\")) {\n      this.disablePictureInPicture = true;\n    } else {\n      this.disablePictureInPicture = false;\n    }\n\n    this.scope.readyState = MediaReadyState.HAVE_NOTHING;\n    this.alreadyStartedPlaying = false;\n    this.scope.loading = false;\n\n    this.initVideoElement();\n\n    this.reset();\n  }\n\n  protected setVideoSource() {\n    if (this.scope.videoSrc) {\n      this.resetVideo();\n      let sourceElement = this.video.querySelector(\"source\");\n      if (!sourceElement) {\n        sourceElement = document.createElement(\"source\");\n        this.video.appendChild(sourceElement);\n      }\n      sourceElement.setAttribute(\"src\", this.scope.videoSrc);\n    }\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    this.debug(\"parsedAttributeChangedCallback\", attributeName);\n    if (attributeName === \"videoSrc\") {\n      this.setVideoSource();\n    }\n  }\n\n  protected addEventListeners() {\n    if (this.scope.autoplayMediaQuery) {\n      // autoplay-media-query attribute\n      const mediaQueryList = window.matchMedia(this.scope.autoplayMediaQuery);\n      mediaQueryList.addEventListener(\"change\", this.onMediaQueryListEvent);\n      // Initial check\n      if (mediaQueryList.matches) {\n        this.startAutoplay();\n      }\n    }\n\n    this.video.addEventListener(\"progress\", this.onVideoProgress);\n    this.video.addEventListener(\"loadstart\", this.onLoadStart);\n    this.video.addEventListener(\"canplay\", this.onCanPlay);\n    this.video.addEventListener(\"canplaythrough\", this.onCanPlayThrough);\n    this.video.addEventListener(\"waiting\", this.onWaiting);\n    this.video.addEventListener(\"durationchange\", this.onDurationChange);\n    this.video.addEventListener(\"timeupdate\", this.onTimeUpdate);\n    this.video.addEventListener(\"play\", this.onPlay);\n    this.video.addEventListener(\"pause\", this.onPause);\n  }\n\n  protected removeEventListeners() {\n    if (this.scope.autoplayMediaQuery) {\n      // autoplay-media-query attribute\n      const mediaQueryList = window.matchMedia(this.scope.autoplayMediaQuery);\n      mediaQueryList.removeEventListener(\"change\", this.onMediaQueryListEvent);\n    }\n\n    this.video.removeEventListener(\"progress\", this.onVideoProgress);\n    this.video.removeEventListener(\"loadstart\", this.onLoadStart);\n    this.video.removeEventListener(\"canplay\", this.onCanPlay);\n    this.video.removeEventListener(\"canplaythrough\", this.onCanPlayThrough);\n    this.video.removeEventListener(\"waiting\", this.onWaiting);\n    this.video.removeEventListener(\"durationchange\", this.onDurationChange);\n    this.video.removeEventListener(\"timeupdate\", this.onTimeUpdate);\n    this.video.removeEventListener(\"play\", this.onPlay);\n    this.video.removeEventListener(\"pause\", this.onPause);\n  }\n\n  protected _onUpdate() {\n    if (this.scope.muted !== this.video.muted) {\n      this.scope.muted = this.video.muted;\n    }\n\n    if (this.scope.volume !== this.video.volume) {\n      this.scope.volume = this.video.volume;\n    }\n\n    if (this.scope.loop !== this.video.loop) {\n      this.scope.loop = this.video.loop;\n    }\n\n    if (this.scope.controls !== this.video.controls) {\n      this.scope.controls = this.video.controls;\n    }\n\n    if (this.scope.currentTime !== this.video.currentTime) {\n      this.scope.currentTime = this.video.currentTime;\n    }\n\n    if (this.scope.paused !== this.video.paused) {\n      this.scope.paused = this.video.paused;\n    }\n\n    if (this.scope.duration !== this.video.duration) {\n      this.scope.duration = this.video.duration;\n    }\n\n    if (this.scope.readyState !== this.video.readyState) {\n      this.scope.readyState = this.video.readyState;\n    }\n  }\n\n  protected onUpdate = this._onUpdate.bind(this);\n\n  protected async beforeBind() {\n    this.initVideoElement();\n  }\n\n  protected async afterBind() {\n    // Workaround for Firefox\n    this.video.load();\n  }\n\n  /**\n   * Loads the media and checks if the autoplay-on-min-buffer is set\n   */\n  public startAutoplay() {\n    if (this.scope.autoplayOnMinBuffer) {\n      this.forceLoad();\n    } else {\n      this.forceAutoplay();\n    }\n  }\n\n  public forceLoad() {\n    this.video.setAttribute(\"preload\", \"auto\");\n    this.video.load();\n  }\n\n  /**\n   * Forces autoplay without checking for the autoplay-on-min-buffer event\n   */\n  protected _forceAutoplay() {\n    if (!this.alreadyStartedPlaying) {\n      this.alreadyStartedPlaying = true;\n      this.video.muted = true; //video is required to be muted if autoplay video is supposed to autoplay\n      this.forceLoad();\n      this.play();\n    }\n  }\n\n  /**\n   * Forces autoplay without checking for the autoplay-on-min-buffer event\n   */\n  public forceAutoplay = this._forceAutoplay.bind(this);\n\n  /*********************\n   * Event listener start\n   *********************/\n  protected _onMediaQueryListEvent(event: MediaQueryListEvent) {\n    if (event.matches) {\n      //if mediaquery matches, play video or start autoplay\n      if (this.alreadyStartedPlaying) {\n        if (!this.wasPaused) {\n          this.play();\n        }\n      } else {\n        this.startAutoplay();\n      }\n    } else {\n      //if mediaquery stops matching, pause video if not already paused\n      this.wasPaused = this.video.paused;\n      this.pause();\n    }\n  }\n\n  protected onMediaQueryListEvent = this._onMediaQueryListEvent.bind(this);\n\n  protected _onVideoProgress() {\n    this.debug(\"_onVideoProgress\");\n    if (this.alreadyStartedPlaying) return;\n    if (isNaN(this.video.duration)) {\n      console.warn(\"Video duration is NaN\");\n      return;\n    }\n\n    // Calculate already buffered amount\n    let bufferedAmount = 0;\n    for (let i = 0; i < this.video.buffered.length; i++) {\n      bufferedAmount +=\n        this.video.buffered.end(i) - this.video.buffered.start(i);\n    }\n\n    this.scope.buffer = bufferedAmount / this.video.duration;\n\n    // If buffered amount is over given percentage in scope, force autoplay\n    if (\n      this.scope.autoplayOnMinBuffer &&\n      this.scope.buffer > this.scope.autoplayOnMinBuffer\n    ) {\n      this.forceAutoplay();\n    }\n  }\n\n  protected onVideoProgress = this._onVideoProgress.bind(this);\n\n  protected _onLoadStart() {\n    this.debug(\"_onLoadStart\");\n    this.scope.loading = true;\n    this.onUpdate();\n  }\n\n  protected onLoadStart = this._onLoadStart.bind(this);\n\n  protected _onCanPlay() {\n    this.debug(\"_onCanPlay\");\n    // this.scope.loading = false;\n    this.onUpdate();\n  }\n\n  protected onCanPlay = this._onCanPlay.bind(this);\n\n  protected _onCanPlayThrough() {\n    this.scope.loading = false;\n    if (this.scope.autoplayOnMinBuffer) {\n      this.forceAutoplay(); // trust browser more than ourselves\n    }\n    this.onUpdate();\n  }\n\n  protected onCanPlayThrough = this._onCanPlayThrough.bind(this);\n\n  protected _onWaiting() {\n    this.debug(\"_onPlay\");\n    this.scope.loading = true;\n    this.onUpdate();\n  }\n\n  protected onWaiting = this._onWaiting.bind(this);\n\n  protected _onDurationChange() {\n    this.onUpdate();\n  }\n\n  protected onDurationChange = this._onDurationChange.bind(this);\n\n  protected _onTimeUpdate() {\n    this.onUpdate();\n  }\n\n  protected onTimeUpdate = this._onTimeUpdate.bind(this);\n\n  protected _onPlay() {\n    this.debug(\"_onPlay\");\n    this.scope.loading = false;\n    this.alreadyStartedPlaying = true;\n    this.scope.paused = false;\n    this.onUpdate();\n  }\n\n  protected onPlay = this._onPlay.bind(this);\n\n  protected _onPause() {\n    this.scope.paused = true;\n    this.onUpdate();\n  }\n\n  protected onPause = this._onPause.bind(this);\n\n  /*********************\n   * Event listener end\n   *********************/\n\n  protected async init(observedAttributes: string[]) {\n    return super.init(observedAttributes).then((view) => {\n      return view;\n    });\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { Bs5SliderComponent } from \"../bs5-slider/bs5-slider.component.js\";\nimport { VideoComponent } from \"@ribajs/extras/src/components/index.js\";\n\nimport type { ScrollEvent } from \"@ribajs/extras\";\n\ninterface Scope {\n  /** Set to true to play the video automatically when the slide is active */\n  autoplay: boolean;\n}\n\n/**\n * A slide with a video, used to play the video when the slide is active\n */\nexport class Bs5SlideVideoComponent extends Component {\n  public static tagName = \"bs5-slide-video\";\n\n  public scope: Scope = {\n    autoplay: false,\n  };\n\n  slider: Bs5SliderComponent | null = null;\n  videoCo: VideoComponent | null = null;\n  videoEl: HTMLVideoElement | null = null;\n  slideEl: HTMLElement | null = null;\n\n  static get observedAttributes(): string[] {\n    return [\"autoplay\"];\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5SlideVideoComponent.observedAttributes);\n    this.onSlideEnd = this.onSlideEnd.bind(this);\n  }\n\n  protected onSlideEnd(event: ScrollEvent) {\n    this.debug(\n      \"[Bs5SlideVideoComponent] onSlideEnd\",\n      event,\n      this.slideEl?.classList\n    );\n\n    if (this.scope.autoplay) {\n      this.playIfActive();\n    }\n  }\n\n  protected playIfActive() {\n    if (this.slideEl?.classList.contains(\"active\")) {\n      if (this.videoCo) {\n        this.videoCo.play();\n      } else if (this.videoEl) {\n        this.videoEl.play();\n      }\n    }\n  }\n\n  protected addEventListeners() {\n    this.slider?.addEventListener(\n      Bs5SliderComponent.EVENTS.scrollended,\n      this.onSlideEnd as EventListener\n    );\n  }\n\n  protected removeEventListeners() {\n    this.slider?.removeEventListener(\n      Bs5SliderComponent.EVENTS.scrollended,\n      this.onSlideEnd as EventListener\n    );\n  }\n\n  protected async beforeBind(): Promise<void> {\n    await super.beforeBind();\n    this.addEventListeners();\n  }\n\n  protected async afterBind(): Promise<void> {\n    if (this.scope.autoplay) {\n      this.playIfActive();\n    }\n    await super.beforeBind();\n  }\n\n  protected async beforeTemplate(): Promise<void> {\n    this.slider = this.closest<Bs5SliderComponent>(Bs5SliderComponent.tagName);\n    this.videoCo = this.querySelector<VideoComponent>(VideoComponent.tagName);\n    this.videoEl = this.querySelector<HTMLVideoElement>(\"video\");\n    this.slideEl = this.closest<HTMLElement>(\".slide\");\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","export default \"<ul rv-scrollbar-draggable rv-aria-orientation=\\\"optionTabsAngle\\\" role=\\\"tablist\\\" class=\\\"nav nav-tabs flex-scrollbar-x-auto scrollbar-y-hidden\\\">\\n  <li class=\\\"nav-item\\\" rv-each-tab=\\\"items\\\">\\n    <button role=\\\"tab\\\" class=\\\"btn btn-link nav-link\\\" rv-class-active=\\\"tab.active\\\" rv-id=\\\"'tab-title-' | append tab.handle\\\" rv-aria-controls=\\\"'tab-content-' | append tab.handle\\\" rv-on-click=\\\"activate | args tab\\\" rv-html=\\\"tab.title\\\"></button>\\n  </li>\\n</ul>\\n<div class=\\\"tab-content\\\">\\n  <div rv-each-tab=\\\"items\\\" role=\\\"tabpanel\\\" class=\\\"tab-pane\\\" rv-class-show=\\\"tab.active\\\" rv-class-active=\\\"tab.active\\\" rv-id=\\\"'tab-content-' | append tab.handle\\\" rv-aria-labelledby=\\\"'tab-title-' | append tab.handle\\\" rv-template=\\\"tab.content\\\"></div>\\n</div>  \\n\"","export default \"<div class=\\\"row\\\">\\n  <div class=\\\"col-auto\\\">\\n    <div class=\\\"nav flex-column nav-pills\\\" role=\\\"tablist\\\" rv-aria-orientation=\\\"optionTabsAngle\\\">\\n      <div class=\\\"nav-item\\\" rv-each-tab=\\\"items\\\">\\n        <button class=\\\"btn btn-link nav-link\\\" role=\\\"tab\\\" rv-class-active=\\\"tab.active\\\" rv-id=\\\"'tab-title-' | append tab.handle\\\" rv-aria-controls=\\\"'tab-content-' | append tab.handle\\\" rv-on-click=\\\"activate | args tab\\\" rv-html=\\\"tab.title\\\"></button>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"col-auto\\\">\\n    <div class=\\\"tab-content\\\">\\n      <div rv-each-tab=\\\"items\\\" role=\\\"tabpanel\\\" class=\\\"tab-pane\\\" rv-class-show=\\\"tab.active\\\" rv-class-active=\\\"tab.active\\\" rv-id=\\\"'tab-content-' | append tab.handle\\\" rv-aria-labelledby=\\\"'tab-title-' | append tab.handle\\\" rv-template=\\\"tab.content\\\"></div>\\n    </div>  \\n  </div>\\n</div>\\n\"","import {\n  handleizeFormatter,\n  FormatterFn,\n  TemplateFunction,\n  TemplatesComponent,\n  ScopeBase,\n} from \"@ribajs/core\";\nimport templateHorizontal from \"./bs5-tabs-horizontal.component.html?raw\";\nimport templateVertical from \"./bs5-tabs-vertical.component.html?raw\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { throttle } from \"@ribajs/utils/src/control\";\n\nconst handleize = handleizeFormatter.read as FormatterFn;\n\nexport interface Tab {\n  title: string;\n  content: string;\n  handle: string;\n  active: boolean;\n  type?: string;\n  index: number;\n}\n\nexport interface Scope extends ScopeBase {\n  items: Tab[];\n  activate: Bs5TabsComponent[\"activate\"];\n  deactivate: Bs5TabsComponent[\"activate\"];\n  deactivateAll: Bs5TabsComponent[\"deactivateAll\"];\n  optionTabsAutoHeight: boolean;\n  optionTabsAngle: \"vertical\" | \"horizontal\";\n}\n\nexport class Bs5TabsComponent extends TemplatesComponent {\n  public static tagName = \"bs5-tabs\";\n\n  protected templateAttributes = [\n    {\n      name: \"title\",\n      required: true,\n    },\n    {\n      name: \"handle\",\n      required: false,\n    },\n    {\n      name: \"type\",\n      required: false,\n    },\n    {\n      name: \"active\",\n      required: false,\n    },\n    {\n      name: \"index\",\n      required: false,\n    },\n  ];\n\n  public scope: Scope = {\n    items: new Array<Tab>(),\n    activate: this.activate,\n    deactivate: this.deactivate,\n    deactivateAll: this.deactivateAll,\n    optionTabsAutoHeight: false,\n    optionTabsAngle: \"horizontal\",\n  };\n\n  protected tabs?: NodeListOf<Element>;\n  protected tabPanes?: NodeListOf<Element>;\n  protected scrollable?: Element | null;\n\n  static get observedAttributes(): string[] {\n    return [\n      \"option-tabs-auto-height\",\n      \"option-tabs-angle\",\n      \"tab-0-title\",\n      \"tab-0-content\",\n      \"tab-0-handle\",\n      \"tab-1-title\",\n      \"tab-1-content\",\n      \"tab-1-handle\",\n      \"tab-2-title\",\n      \"tab-2-content\",\n      \"tab-2-handle\",\n      \"tab-3-title\",\n      \"tab-3-content\",\n      \"tab-3-handle\",\n      \"tab-4-title\",\n      \"tab-4-content\",\n      \"tab-4-handle\",\n      \"tab-5-title\",\n      \"tab-5-content\",\n      \"tab-5-handle\",\n      \"tab-6-title\",\n      \"tab-6-content\",\n      \"tab-6-handle\",\n      \"tab-7-title\",\n      \"tab-7-content\",\n      \"tab-7-handle\",\n      \"tab-8-title\",\n      \"tab-8-content\",\n      \"tab-8-handle\",\n      \"tab-9-title\",\n      \"tab-9-content\",\n      \"tab-9-handle\",\n      \"tab-10-title\",\n      \"tab-10-content\",\n      \"tab-10-handle\",\n      \"tab-11-title\",\n      \"tab-11-content\",\n      \"tab-11-handle\",\n      \"tab-12-title\",\n      \"tab-12-content\",\n      \"tab-12-handle\",\n      \"tab-13-title\",\n      \"tab-13-content\",\n      \"tab-13-handle\",\n      \"tab-14-title\",\n      \"tab-14-content\",\n      \"tab-14-handle\",\n      \"tab-15-title\",\n      \"tab-15-content\",\n      \"tab-15-handle\",\n      \"tab-16-title\",\n      \"tab-16-content\",\n      \"tab-16-handle\",\n      \"tab-17-title\",\n      \"tab-17-content\",\n      \"tab-17-handle\",\n      \"tab-18-title\",\n      \"tab-18-content\",\n      \"tab-18-handle\",\n      \"tab-19-title\",\n      \"tab-19-content\",\n      \"tab-19-handle\",\n    ];\n  }\n\n  constructor() {\n    super();\n  }\n\n  protected _onResize() {\n    this.setHeight();\n  }\n\n  protected onResize = throttle(this._onResize.bind(this));\n\n  /**\n   * Make all tabs panes as height as the highest tab pane\n   */\n  public setHeight() {\n    if (this.scope.optionTabsAutoHeight) {\n      return;\n    }\n    // Bind static template\n    this.setElements();\n\n    let highest = 0;\n    if (!this.tabPanes) {\n      return;\n    }\n    this.tabPanes.forEach((tabPane) => {\n      if (!(tabPane as unknown as HTMLElement).style) {\n        return;\n      }\n      (tabPane as unknown as HTMLElement).style.height = \"auto\";\n      (tabPane as unknown as HTMLElement).style.display = \"block\";\n      const height = (tabPane as unknown as HTMLElement).offsetHeight || 0;\n      if (height > highest) {\n        highest = height;\n      }\n    });\n    this.tabPanes.forEach((tabPane) => {\n      if (!(tabPane as unknown as HTMLElement).style) {\n        return;\n      }\n      // Reset display style property\n      (tabPane as unknown as HTMLElement).style.display = \"\";\n      if (highest > 0) {\n        (tabPane as unknown as HTMLElement).style.height = highest + \"px\";\n      }\n    });\n  }\n\n  public deactivateAll() {\n    for (let index = 0; index < this.scope.items.length; index++) {\n      const tab = this.scope.items[index];\n      this.deactivate(tab);\n    }\n  }\n\n  public deactivate(tab: Tab) {\n    tab.active = false;\n\n    const firstTabContentChild = this.getTabContentChildByIndex(tab.index);\n    if (firstTabContentChild) {\n      this.triggerVisibilityChangedForElement(firstTabContentChild, tab.active);\n    }\n  }\n\n  public activate(tab: Tab) {\n    this.deactivateAll();\n    tab.active = true;\n\n    const firstTabContentChild = this.getTabContentChildByIndex(tab.index);\n    if (firstTabContentChild) {\n      this.triggerVisibilityChangedForElement(\n        firstTabContentChild as Element,\n        tab.active\n      );\n    }\n  }\n\n  protected activateFirstTab() {\n    if (this.scope.items.length > 0) {\n      this.activate(this.scope.items[0]);\n    }\n  }\n\n  protected getTabContentChildByIndex(index: number) {\n    return (\n      this.querySelector(\n        `.tab-content .tab-pane:nth-child(${index + 1}) > *`\n      ) || undefined\n    );\n  }\n\n  /**\n   * Trigger `visibility-changed` for components that need to update if visibility changes.\n   * E.g. this event is used the bs5-slideshow component\n   * @param element\n   * @param visible\n   */\n  protected triggerVisibilityChangedForElement(\n    element: Element,\n    visible: boolean\n  ) {\n    setTimeout(() => {\n      // Use this event to update any custom element when it becomes visible\n      element.dispatchEvent(\n        new CustomEvent(\"visibility-changed\", { detail: { visible } })\n      );\n    }, 200);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.initTabs();\n    this.activateFirstTab();\n    this.init(Bs5TabsComponent.observedAttributes);\n  }\n\n  protected disconnectedCallback() {\n    if (this.tabs) {\n      this.tabs.forEach((tab) => {\n        tab.removeEventListener(\"shown.bs.tab\", this.onTabShownEventHandler);\n      });\n    }\n    window.removeEventListener(\"resize\", this.onResize);\n  }\n\n  protected setElements() {\n    this.tabs = this.querySelectorAll('[role=\"tab\"]');\n    this.tabPanes = this.querySelectorAll('[role=\"tabpanel\"]');\n    this.scrollable = this.querySelector(\"[scrollable]\");\n  }\n\n  protected resizeTabsArray(newSize: number) {\n    while (newSize > this.scope.items.length) {\n      this.scope.items.push({\n        handle: \"\",\n        title: \"\",\n        content: \"\",\n        active: false,\n        index: this.scope.items.length - 1,\n      });\n    }\n  }\n\n  protected onTabShownEventHandler(event: Event) {\n    const curTab = (event.target || event.srcElement) as Element | null;\n    if (!curTab) {\n      return;\n    }\n    if (this.scrollable) {\n      const tabScrollPosition = curTab.getBoundingClientRect();\n      const scrollLeftTo =\n        this.scrollable.scrollLeft || 0 + tabScrollPosition.left;\n      // TODO animate\n      // this.scrollable.animate({ scrollLeft: scrollLeftTo}, 'slow');\n      this.scrollable.scrollLeft = scrollLeftTo;\n    }\n  }\n\n  protected initTabs() {\n    // Bind static template\n    this.setElements();\n\n    if (this.tabs) {\n      this.tabs.forEach((tab) => {\n        tab.removeEventListener(\"shown.bs.tab\", this.onTabShownEventHandler);\n        tab.addEventListener(\"shown.bs.tab\", this.onTabShownEventHandler);\n      });\n    }\n\n    if (this.scope.optionTabsAutoHeight) {\n      window.removeEventListener(\"resize\", this.onResize);\n      window.addEventListener(\"resize\", this.onResize, { passive: true });\n      this.setHeight();\n    }\n  }\n\n  protected addTabByAttribute(attributeName: string, newValue: string) {\n    const index = Number(attributeName.replace(/[^0-9]/g, \"\"));\n    if (index >= this.scope.items.length) {\n      this.resizeTabsArray(index + 1);\n    }\n    this.scope.items[index].index = index;\n    if (attributeName.endsWith(\"Content\")) {\n      this.scope.items[index].content = newValue;\n    }\n    if (attributeName.endsWith(\"Title\")) {\n      this.scope.items[index].title = newValue;\n      this.scope.items[index].handle =\n        this.scope.items[index].handle ||\n        handleize(this.scope.items[index].title);\n    }\n    if (attributeName.endsWith(\"Handle\")) {\n      this.scope.items[index].handle = newValue;\n    }\n\n    // if is first tab\n    if (\n      this.scope.items.length > 0 &&\n      this.scope.items[0] &&\n      this.scope.items[0].content.length > 0 &&\n      this.scope.items[0].title.length > 0 &&\n      this.scope.items[0].handle.length > 0\n    ) {\n      this.activateFirstTab();\n    }\n  }\n\n  /**\n   * Extends TemplatesComponent.transformTemplateAttributes to set the handle by the title if no handle is set\n   */\n  protected transformTemplateAttributes(attributes: any, index: number) {\n    attributes = super.transformTemplateAttributes(attributes, index);\n    if (!attributes.handle && attributes.title) {\n      attributes.handle = handleize(attributes.title);\n    }\n    attributes.active = attributes.active || false;\n    return attributes;\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName.startsWith(\"tab\")) {\n      this.addTabByAttribute(attributeName, newValue);\n      this.initTabs();\n    }\n  }\n\n  protected async afterBind(): Promise<any> {\n    // Workaround\n    setTimeout(() => {\n      if (this.scope.optionTabsAutoHeight) {\n        this.setHeight();\n      }\n    }, 500);\n    await super.afterBind();\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    // Only set the component template if there no childs or the childs are templates\n    if (!hasChildNodesTrim(this) || this.hasOnlyTemplateChilds()) {\n      if (this.scope.optionTabsAngle === \"horizontal\") {\n        return templateHorizontal;\n      } else {\n        return templateVertical;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n","export default \"<img>\\n<tag\\n  rv-each-tag=\\\"tags\\\"\\n  rv-index=\\\"tag.index\\\"\\n  rv-style-left=\\\"tag.left\\\"\\n  rv-style-top=\\\"tag.top\\\"\\n  rv-shape=\\\"tag.shape\\\"\\n  rv-color=\\\"tag.color\\\"\\n  rv-style---tag-color=\\\"tag.color\\\"\\n  rv-style---tag-border-radius=\\\"tag.borderRadius\\\"\\n  rv-style---tag-full-size=\\\"tag.fullSize\\\"\\n  rv-style---tag-small-size=\\\"tag.smallSize\\\"\\n  rv-bs5-popover=\\\"fillPopoverOptions | call tag.popoverOptions\\\"\\n  rv-on-bound.bs.popover=\\\"onPopoverBound\\\"\\n  rv-on-shown.bs.popover=\\\"onPopoverShown\\\"\\n  rv-on-hidden.bs.popover=\\\"onPopoverHidden\\\"\\n  rv-tabindex=\\\"triggerOnFocus | call tag.popoverOptions\\\"\\n>\\n</tag>\\n\"","import { extend } from \"@ribajs/utils\";\n\nimport { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { PopoverOptions } from \"@ribajs/bs5\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { TaggedImageTag as Tag } from \"../../types/index.js\";\nimport template from \"./bs5-tagged-image.component.html?raw\";\nimport { debounce } from \"@ribajs/utils/src/control\";\n\ninterface Options {\n  popoverOptions: Partial<PopoverOptions>;\n  tagOptions: Partial<Tag>;\n  multiPopover?: boolean;\n}\n\ninterface Scope extends ScopeBase {\n  debug: boolean;\n  options: Options;\n  tags: Tag[];\n  fillPopoverOptions: (\n    options: Partial<PopoverOptions>\n  ) => Partial<PopoverOptions>;\n  triggerOnFocus: (options: Partial<PopoverOptions>) => any;\n  onPopoverBound: EventListener;\n  onPopoverShown: EventListener;\n  onPopoverHidden: EventListener;\n  onClick: EventListener;\n  updateTagPositions: EventListener;\n}\n\nexport class Bs5TaggedImageComponent extends Component {\n  /**\n   * ATTRIBUTES AND SCOPE\n   */\n  public static tagName = \"bs5-tagged-image\";\n\n  protected autobind = true;\n  public _debug = true;\n\n  static get observedAttributes(): string[] {\n    return [\"tags\", \"options\", \"debug\"];\n  }\n\n  image?: HTMLImageElement;\n\n  public scope: Scope = {\n    debug: false,\n    tags: [],\n    options: {\n      popoverOptions: {}, // set container = this in constructor\n      multiPopover: false,\n      tagOptions: {},\n    },\n    fillPopoverOptions: (options: Partial<PopoverOptions>) => {\n      return {\n        ...this.scope.options.popoverOptions,\n        ...this.scope.options.tagOptions.popoverOptions,\n        ...options,\n      };\n    },\n    triggerOnFocus: (options: Partial<PopoverOptions>) => {\n      return this.scope.fillPopoverOptions(options).trigger ? 0 : null;\n    },\n    onClick: this.onClick.bind(this),\n    onPopoverBound: this.onPopoverBound.bind(this),\n    onPopoverShown: this.onPopoverShown.bind(this),\n    onPopoverHidden: this.onPopoverHidden.bind(this),\n    updateTagPositions: debounce(this.updateTagPositions.bind(this)),\n  };\n\n  /**\n   * CONSTRUCTOR AND LIFECYCLE HANDLERS\n   */\n\n  constructor() {\n    super();\n    this.scope.options.popoverOptions.container = this;\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any\n  ) {\n    if (attributeName === \"options\") {\n      // before the component is bound, we just want to extend the default options\n      if (this.bound) {\n        this.scope.options = newValue;\n      } else {\n        this.scope.options = extend({ deep: true }, oldValue, newValue);\n      }\n      const po = this.scope.options.popoverOptions;\n      if (po && typeof po.container === \"string\") {\n        po.container = document.querySelector(po.container) || undefined;\n      }\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (hasChildNodesTrim(this)) {\n      this.parseChildTags();\n    }\n    return template;\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    // Template has been loaded. So the <img> tag should be there now.\n    this.image = this.querySelector(\"img\") as HTMLImageElement;\n    this.addEventListeners();\n    this.initTags();\n  }\n\n  protected addEventListeners() {\n    const img = this.image as HTMLImageElement;\n    img.addEventListener(\"load\", this.scope.updateTagPositions);\n    window.addEventListener(\"resize\", this.scope.updateTagPositions);\n    img.addEventListener(\"click\", this.scope.onClick);\n  }\n\n  protected async afterBind() {\n    this.passImageAttributes();\n    await super.afterBind();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5TaggedImageComponent.observedAttributes);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"click\", this.scope.onClick);\n    window.removeEventListener(\"resize\", this.updateTagPositions);\n  }\n\n  /**\n   * LIFECYCLE HELPERS\n   */\n\n  protected parseColor(color: string) {\n    // Is css variable\n    if (color.startsWith(\"--\")) {\n      return `var(${color})`;\n    }\n    // Is bootstrap color variable\n    if (color.startsWith(\"bs-\")) {\n      return `var(--${color})`;\n    }\n    return color;\n  }\n\n  protected parseChildTags() {\n    this.debug(`parseChildTags()`);\n    for (const tagEl of Array.from(\n      this.querySelectorAll(\"tag\") as NodeListOf<HTMLElement>\n    )) {\n      const title = tagEl.getAttribute(\"title\") || \"\";\n      const content = tagEl.innerHTML;\n\n      const x = ((v) => (isNaN(v) ? Math.random() : v))(\n        parseFloat(tagEl.getAttribute(\"x\") || \"\")\n      );\n      const y = ((v) => (isNaN(v) ? Math.random() : v))(\n        parseFloat(tagEl.getAttribute(\"y\") || \"\")\n      );\n\n      const shape = tagEl.getAttribute(\"shape\") || undefined;\n      let color = tagEl.getAttribute(\"color\") || undefined;\n      if (color) {\n        color = this.parseColor(color);\n      }\n      const borderRadius = tagEl.getAttribute(\"border-radius\") || undefined;\n      const fullSize = tagEl.getAttribute(\"full-size\") || undefined;\n      const smallSize = tagEl.getAttribute(\"small-size\") || undefined;\n      const tagData = {\n        ...this.scope.options.tagOptions,\n        popoverOptions: this.scope.fillPopoverOptions({\n          title,\n          content,\n          html: true,\n        }),\n        x,\n        y,\n        shape,\n        color,\n        borderRadius,\n        fullSize,\n        smallSize,\n      };\n      this.scope.tags.push(tagData);\n    }\n  }\n\n  protected initTags() {\n    const scopeTagOptions = this.scope.options.tagOptions;\n    for (const [index, tag] of this.scope.tags.entries()) {\n      tag.index = index;\n      tag.shape = tag.shape || scopeTagOptions.shape;\n      tag.borderRadius = tag.borderRadius || scopeTagOptions.borderRadius;\n      tag.smallSize = tag.smallSize || scopeTagOptions.smallSize;\n      tag.fullSize = tag.fullSize || scopeTagOptions.fullSize;\n      tag.color = tag.color || scopeTagOptions.color;\n    }\n  }\n\n  /**\n   * Pass all attributes starting with \"img-\" down to the <img> Tag, without the prefix.\n   */\n  protected passImageAttributes() {\n    const img = this.image as HTMLImageElement;\n    const attrs = this.attributes;\n    for (let i = attrs.length - 1; i >= 0; i--) {\n      if (attrs[i].name.startsWith(\"img-\")) {\n        img.setAttribute(attrs[i].name.substr(4), attrs[i].value);\n      }\n    }\n  }\n\n  /**\n   * EVENT LISTENERS\n   */\n  onClick(e: Event) {\n    if (this.scope.debug) {\n      // adapted from here: https://stackoverflow.com/a/42111623/7048200\n      // TODO: avoid using \"as any\"\n      const img = this.image as HTMLImageElement;\n      const {\n        clientTop,\n        clientLeft,\n        width,\n        height,\n        naturalWidth,\n        naturalHeight,\n      } = img;\n      const { clientX, clientY } = e as any;\n      let x = clientX - clientLeft;\n      let y = clientY - clientTop;\n      const wRatio = width / naturalWidth;\n      const hRatio = height / naturalHeight;\n      let actualWidth = width;\n      let actualHeight = height;\n      if (wRatio < hRatio) {\n        // left, right cut off\n        actualWidth = (width * hRatio) / wRatio;\n        x += (actualWidth - width) / 2;\n      } else if (hRatio < wRatio) {\n        // left, right cut off\n        actualHeight = (height * wRatio) / hRatio;\n        y += (actualHeight - height) / 2;\n      }\n      x *= 100 / actualWidth;\n      y *= 100 / actualHeight;\n      console.log({ x, y });\n    }\n  }\n  onPopoverBound(event: Event) {\n    /*\n     *  We get the anchor `el` for each tag here, after they have been bound in the rv-each,\n     *  so we can trigger events on them later.\n     */\n    const boundIndexAttr = (event.target as HTMLElement).getAttribute(\"index\");\n    if (boundIndexAttr === null) {\n      throw new Error(\"popup bound on no index\");\n    }\n    const boundIndex = parseInt(boundIndexAttr);\n    if (isNaN(boundIndex)) {\n      throw new Error(`boundIndex \"${boundIndexAttr}\" is not a number!`);\n    }\n    const foundTag = this.scope.tags.find((tag) => tag.index === boundIndex);\n    if (foundTag) {\n      foundTag.el = event.target as HTMLElement;\n    } else {\n      throw new Error(\n        `Tag with index (${boundIndex}, \"${boundIndexAttr}\") not found`\n      );\n    }\n  }\n  onPopoverShown(event: Event) {\n    for (const tag of this.scope.tags) {\n      if (tag.el === event.target) {\n        // Set shown popover's anchor as active.\n        tag.el.classList.add(\"active\");\n      } else {\n        // Hide all other popovers and remove active class from other tags if multiPopover option is false.\n        if (!this.scope.options.multiPopover) {\n          tag.el?.classList.remove(\"active\");\n          tag.el?.dispatchEvent(new CustomEvent(\"trigger-hide\"));\n        }\n      }\n    }\n  }\n  onPopoverHidden(event: Event) {\n    const found = this.scope.tags.find((tag) => tag.el === event.target);\n    if (found) {\n      found.el?.classList.remove(\"active\");\n    }\n  }\n\n  protected updateTagPositions() {\n    /*\n     * Currently working for object-fit: cover, contain or fill, and object-position: 50% 50% (default)\n     * TODO: make this work for all CSS values of \"object-position\" and \"object-fit\"!\n     */\n    const img = this.image as HTMLImageElement;\n    const { width, height, naturalWidth, naturalHeight } = img;\n    const wRatio = naturalWidth / width;\n    const hRatio = naturalHeight / height;\n    const fit = window.getComputedStyle(img).getPropertyValue(\"object-fit\");\n    if (\n      (fit === \"cover\" && wRatio > hRatio) ||\n      (fit === \"contain\" && hRatio > wRatio)\n    ) {\n      for (const tag of this.scope.tags) {\n        tag.top = tag.y * 100 + \"%\";\n        tag.left = ((wRatio / hRatio) * (tag.x - 0.5) + 0.5) * 100 + \"%\";\n      }\n    } else if (fit === \"cover\" || fit === \"contain\") {\n      for (const tag of this.scope.tags) {\n        tag.left = tag.x * 100 + \"%\";\n        tag.top = ((hRatio / wRatio) * (tag.y - 0.5) + 0.5) * 100 + \"%\";\n      }\n    } else {\n      for (const tag of this.scope.tags) {\n        tag.left = tag.x * 100 + \"%\";\n        tag.top = tag.y * 100 + \"%\";\n      }\n    }\n  }\n}\n","export default \"<select class=\\\"form-select form-select\\\" id=\\\"theme\\\" rv-if=\\\"mode | eq 'dropdown'\\\" rv-on-change=\\\"selectTheme\\\"\\n  rv-value=\\\"selected\\\" aria-label=\\\"Select a theme\\\">\\n  <option rv-each-choice=\\\"choices\\\" rv-value=\\\"choice\\\" rv-html=\\\"labels | get choice\\\"></option>\\n</select>\\n<button class=\\\"btn btn-icon\\\" rv-if=\\\"mode | eq 'icon'\\\" rv-on-click=\\\"toggleTheme\\\" aria-label=\\\"Toggle light/dark theme\\\">\\n  <bs5-icon class=\\\"d-td-none\\\" rv-co-src=\\\"lightIconSrc\\\" rv-co-size=\\\"iconSize\\\"></bs5-icon>\\n  <bs5-icon class=\\\"d-tl-none\\\" rv-co-src=\\\"darkIconSrc\\\" rv-co-size=\\\"iconSize\\\"></bs5-icon>\\n</button>\"","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { ThemeService } from \"../../services/theme.js\";\nimport { hasChildNodesTrim } from \"@ribajs/utils\";\nimport template from \"./bs5-theme-button.component.html?raw\";\nimport { themeChoices } from \"../../constants/index.js\";\n\nimport type {\n  Bs5ThemeButtonComponentScope,\n  ThemeChoice,\n  ThemeChangedData,\n  JsxBs5ThemeButtonProps,\n} from \"../../types/index.js\";\n\n/**\n * @see https://github.com/TypeStrong/typedoc/blob/master/src/lib/output/themes/default/assets/typedoc/Theme.ts\n */\nexport class Bs5ThemeButtonComponent extends Component {\n  public static tagName = \"bs5-theme-button\";\n\n  protected theme: ThemeService;\n\n  static get observedAttributes(): (keyof JsxBs5ThemeButtonProps)[] {\n    return [\"mode\", \"labels\", \"light-icon-src\", \"icon-size\", \"dark-icon-src\"];\n  }\n\n  public scope: Bs5ThemeButtonComponentScope = {\n    // Options // Attributes\n    mode: \"dropdown\",\n    labels: {\n      os: \"OS\",\n      light: \"Light\",\n      dark: \"Dark\",\n    },\n    lightIconSrc: \"/iconset/svg/icon_sun.svg\",\n    darkIconSrc: \"/iconset/svg/icon_moon.svg\",\n    iconSize: 32,\n    // Methods / Properties\n    setTheme: this.setTheme.bind(this),\n    selectTheme: this.selectTheme.bind(this),\n    toggleTheme: this.toggleTheme.bind(this),\n    selected: undefined,\n    choices: themeChoices,\n  };\n\n  constructor() {\n    super();\n    this.theme = ThemeService.getSingleton();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ThemeButtonComponent.observedAttributes);\n    this.addEventListeners();\n    this.initTheme();\n  }\n\n  protected addEventListeners() {\n    this.theme.onChange((data) => {\n      this.onChange(data);\n    });\n  }\n\n  protected onChange(data: ThemeChangedData) {\n    this.scope.selected = data.newValue.choice;\n  }\n\n  protected async beforeBind() {\n    this.initTheme();\n  }\n\n  initTheme() {\n    const selectEl = this.getElementsByTagName(\"select\")?.item(0);\n    const data = this.theme.init();\n    this.scope.selected = data.choice || undefined;\n    if (selectEl) this.theme.select(this.scope.selected, selectEl);\n  }\n\n  public setTheme(theme: ThemeChoice) {\n    this.theme.set(theme);\n  }\n\n  /**\n   * Used in `dropdown` mode (which uses a select element)\n   */\n  public selectTheme() {\n    if (this.scope.selected) this.theme.set(this.scope.selected);\n  }\n\n  /**\n   * Used in `icon` mode (which uses a button element)\n   */\n  public toggleTheme() {\n    const current = this.theme.getScheme();\n    if (current.bySystem) {\n      if (current.systemIsLight) {\n        this.theme.set(\"dark\");\n      } else {\n        this.theme.set(\"light\");\n      }\n    } else if (current.isDark) {\n      if (current.supported && current.systemIsLight) {\n        this.theme.set(\"os\");\n      } else {\n        this.theme.set(\"light\");\n      }\n    } else {\n      if (current.supported && current.systemIsDark) {\n        this.theme.set(\"os\");\n      } else {\n        this.theme.set(\"dark\");\n      }\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (!hasChildNodesTrim(this)) {\n      return template;\n    } else {\n      return null;\n    }\n  }\n}\n","export default \"<div class=\\\"toast my-1\\\" rv-add-class=\\\"toast.contextualClass | prepend 'toast-'\\\" role=\\\"alert\\\" aria-live=\\\"assertive\\\" aria-atomic=\\\"true\\\">\\n  <div class=\\\"toast-header\\\" rv-show=\\\"toast.title\\\">\\n    <bs5-icon rv-if=\\\"iconUrl\\\" rv-src=\\\"iconUrl\\\" size=\\\"16\\\" rv-color=\\\"toast.contextualClass\\\" class=\\\"me-2\\\" alt=\\\"toast icon\\\"></bs5-icon>\\n    <strong class=\\\"me-auto\\\" rv-template=\\\"toast.title\\\"></strong>\\n    <button type=\\\"button\\\" class=\\\"ms-2 mb-1 btn-close\\\" rv-on-click=\\\"dismiss\\\" aria-label=\\\"Close\\\"></button>\\n  </div>\\n  <div class=\\\"toast-body\\\" rv-template=\\\"toast.message\\\"></div>\\n</div>\"","import { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\n\nimport template from \"./bs5-toast-item.component.html?raw\";\nimport { Toast, ToastNotification } from \"../../services/index.js\";\nimport { Scope as Bs5NotificationContainerScope } from \"../bs5-notification-container/bs5-notification-container.component.js\";\nimport { getElementFromEvent } from \"@ribajs/utils/src/dom.js\";\n\ninterface Scope extends ScopeBase {\n  iconUrl?: string;\n  toast?: ToastNotification;\n  onHidden: Bs5ToastItemComponent[\"onHidden\"];\n  dismiss: Bs5ToastItemComponent[\"dismiss\"];\n  index: number;\n  $parent?: any;\n  $event?: CustomEvent;\n}\n\n/**\n * Use this component to show a toast inside a bs5-notification-container\n */\nexport class Bs5ToastItemComponent extends Component {\n  public static tagName = \"bs5-toast-item\";\n\n  public _debug = false;\n  protected autobind = true;\n\n  protected toastService?: Toast;\n\n  static get observedAttributes(): string[] {\n    return [\"toast\", \"icon-url\", \"index\"];\n  }\n\n  protected requiredAttributes(): string[] {\n    return [\"toast\"];\n  }\n\n  public scope: Scope = {\n    onHidden: this.onHidden.bind(this),\n    index: -1,\n    dismiss: this.dismiss.bind(this),\n    toast: undefined,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ToastItemComponent.observedAttributes);\n  }\n\n  protected async afterBind() {\n    this.initToast();\n    await super.afterBind();\n  }\n\n  protected initToast() {\n    const toast = this.scope.toast;\n    const toastEl = this.firstElementChild as HTMLElement | null;\n    if (toast && toastEl) {\n      this.toastService = new Toast(toastEl, {\n        delay: toast.delay !== undefined ? toast.delay : 5000,\n        autohide: toast.autoHide !== undefined ? toast.autoHide : true,\n        animation: toast.animation !== undefined ? toast.animation : true,\n      });\n\n      // Call onHidden on hidden event once\n      toastEl.addEventListener(Toast.EVENT_HIDDEN, this.scope.onHidden, {\n        once: true,\n      });\n\n      // show toast using the `ToastService`\n      this.toastService.show();\n    }\n  }\n\n  // can be called if toast should be removed\n  public dismiss() {\n    this.toastService?.hide();\n  }\n\n  // remove toast from dom once shown\n  public onHidden(event: Event, el?: HTMLElement) {\n    if (!el) {\n      el = getElementFromEvent(event);\n    }\n    const toastContainer: Bs5NotificationContainerScope | null =\n      this.scope.$parent?.$parent || null;\n    if (\n      typeof toastContainer?.onItemHide === \"function\" &&\n      this.scope.toast &&\n      el\n    ) {\n      toastContainer.onItemHide(event, el, this.scope.index, this.scope.toast);\n    }\n  }\n  protected template(): ReturnType<TemplateFunction> {\n    return template;\n  }\n}\n","/**\n * This components is used to trigger a toggle event used in other components or parts of your project. This site itself uses the bs5-toggle-button to open or close the sidebar.\n * @attribute \"target-id\" (Required) The id with which the toggle event is triggered\n * @method toggle\t Triggeres the toggle event\n * @property state Can be 'hidden' or something else\n * @property isClosed Is true if the state is 'hidden'\n * @property targetId Passed attribute value, see `target-id` attribute\n */\n\nimport { Component, TemplateFunction, ScopeBase } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { hasChildNodesTrim } from \"@ribajs/utils/src/dom.js\";\nimport { JsxBs5ToggleButtonProps } from \"../../types/index.js\";\nimport { TOGGLE_BUTTON } from \"../../constants/index.js\";\n\ntype State =\n  | \"undefined\"\n  | \"overlay-left\"\n  | \"overlay-right\"\n  | \"side-left\"\n  | \"side-right\"\n  | \"hidden\"\n  | \"added\"\n  | \"removed\";\n\ninterface Scope extends ScopeBase {\n  targetId?: string;\n  toggle: Bs5ToggleButtonComponent[\"toggle\"];\n  state: State;\n  isActive: boolean;\n  /** @deprecated use !isActive instead */\n  isClosed: boolean;\n}\n\n// TODO extend from Bs5ButtonComponent\nexport class Bs5ToggleButtonComponent extends Component {\n  static get observedAttributes(): (keyof JsxBs5ToggleButtonProps)[] {\n    return [\"target-id\"];\n  }\n\n  protected requiredAttributes(): (keyof JsxBs5ToggleButtonProps)[] {\n    return [\"target-id\"];\n  }\n\n  public static tagName = \"bs5-toggle-button\";\n\n  protected autobind = true;\n\n  public _debug = false;\n\n  protected eventDispatcher?: EventDispatcher;\n\n  protected lifecycleEvents = EventDispatcher.getInstance(\"lifecycle\");\n\n  public scope: Scope = {\n    targetId: undefined,\n    toggle: this.toggle,\n    state: \"undefined\",\n    isActive: true,\n    isClosed: false,\n  };\n\n  constructor() {\n    super();\n    this.lifecycleEvents.once(\n      \"ComponentLifecycle:allBound\",\n      this.onAllComponentsReady,\n      this\n    );\n  }\n\n  public toggle() {\n    this.debug(\"toggle\", this.eventDispatcher);\n    if (this.eventDispatcher) {\n      this.eventDispatcher.trigger(\n        TOGGLE_BUTTON.eventNames.toggle,\n        this.scope.targetId\n      );\n    }\n  }\n\n  protected onAllComponentsReady() {\n    this.debug(\"onAllComponentsReady\");\n    // Trigger init to trigger there current state of all the components that are connected to this component\n    this.eventDispatcher?.trigger(\n      TOGGLE_BUTTON.eventNames.init,\n      this.scope.targetId\n    );\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(Bs5ToggleButtonComponent.observedAttributes);\n  }\n\n  protected onToggledEvent(state: State) {\n    this.scope.state = state;\n    this.scope.isActive = state !== \"hidden\" && state !== \"removed\";\n    this.scope.isClosed = !this.scope.isActive;\n  }\n\n  protected initEventDispatcher(id: string) {\n    if (this.eventDispatcher) {\n      this.eventDispatcher.off(\n        TOGGLE_BUTTON.eventNames.toggled,\n        this.onToggledEvent,\n        this\n      );\n    }\n    const namespace = TOGGLE_BUTTON.nsPrefix + id;\n    this.debug(`Init event dispatcher for namespace  ${namespace}`);\n    this.eventDispatcher = new EventDispatcher(namespace);\n    this.eventDispatcher.on(\n      TOGGLE_BUTTON.eventNames.toggled,\n      this.onToggledEvent,\n      this\n    );\n    // Triggered state triggered by `..trigger('init', ...`\n    this.eventDispatcher.on(\n      TOGGLE_BUTTON.eventNames.state,\n      this.onToggledEvent,\n      this\n    );\n  }\n\n  protected async attributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.attributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n    if (attributeName === \"targetId\" && newValue) {\n      this.initEventDispatcher(newValue);\n    }\n  }\n\n  // deconstruction\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this.eventDispatcher) {\n      this.eventDispatcher.off(\n        TOGGLE_BUTTON.eventNames.toggled,\n        this.onToggledEvent,\n        this\n      );\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (!hasChildNodesTrim(this)) {\n      console.warn(\n        \"No child elements found, this component as no template so you need to define your own as child of this component.\"\n      );\n    }\n    return null;\n  }\n}\n","import { RibaModule } from \"@ribajs/core\";\nimport { extend } from \"@ribajs/utils/src/type.js\";\nimport { Bs5ModuleOptions } from \"./types/index.js\";\n\nimport * as binders from \"./binders/index.js\";\nimport * as components from \"./components/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as constants from \"./constants/index.js\";\n\nexport const bs5Module: RibaModule<Partial<Bs5ModuleOptions>> = {\n  binders,\n  services,\n  formatters,\n  components,\n  constants,\n  init(partialOptions = {}) {\n    const options = extend(\n      { deep: true, keepValues: true },\n      partialOptions,\n      constants.DEFAULT_MODULE_OPTIONS\n    ) as Bs5ModuleOptions;\n    services.Bs5Service.setSingleton(options);\n    return this;\n  },\n};\n","/**\n * Fuse.js v6.6.2 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2022 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      totalWeight += obj.weight;\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, includeMatches } = this.options;\n\n    if (!isCaseSensitive) {\n      text = text.toLowerCase();\n    }\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '6.6.2';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","import Fuse from \"fuse.js\";\nimport { Component, TemplateFunction } from \"@ribajs/core\";\nimport {\n  FuseSearchComponentScope,\n  JsxFuseSearchProps,\n} from \"../../types/index.js\";\n\nexport class FuseSearchComponent<T = any> extends Component {\n  public static tagName = \"fuse-search\";\n\n  public fuse?: Fuse<any>;\n\n  static get observedAttributes(): (keyof JsxFuseSearchProps)[] {\n    return [\"items\", \"options\", \"limit\", \"search-pattern\"];\n  }\n\n  requiredAttributes(): (keyof JsxFuseSearchProps)[] {\n    return [\"items\"];\n  }\n\n  public scope: FuseSearchComponentScope<T> = {\n    items: [],\n    searchPattern: \"\",\n    options: {},\n    limit: -1,\n    results: [],\n    search: this.search,\n  };\n\n  constructor() {\n    super();\n  }\n\n  public search() {\n    if (!this.fuse) {\n      console.warn(\"fuse is not ready! Did you forget to call initFuse?\");\n      return [];\n    }\n    this.scope.results = this.fuse?.search<T>(this.scope.searchPattern) || [];\n    console.debug(\"on search\", this.scope.searchPattern, this.scope.results);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(FuseSearchComponent.observedAttributes);\n  }\n\n  protected parsedAttributeChangedCallback(\n    attributeName: string,\n    oldValue: any,\n    newValue: any,\n    namespace: string | null\n  ) {\n    super.parsedAttributeChangedCallback(\n      attributeName,\n      oldValue,\n      newValue,\n      namespace\n    );\n\n    if (attributeName === \"items\") {\n      console.debug(\"parsedAttributeChangedCallback items\", newValue);\n      this.initFuse();\n    }\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    this.initFuse();\n  }\n\n  protected getAllFuseKeys(items?: any) {\n    let testItem: any;\n    if (Array.isArray(items) && items.length > 0) {\n      testItem = items[0];\n    } else {\n      testItem = items;\n    }\n    if (!testItem) {\n      return [];\n    }\n    const keys: string[] = [];\n    for (const key of Object.keys(testItem)) {\n      if (\n        testItem[key] &&\n        (typeof testItem[key] === \"object\" || Array.isArray(testItem[key]))\n      ) {\n        const childKeys = this.getAllFuseKeys(testItem[key]);\n        for (const childKey of childKeys) {\n          keys.push(`${key}.${childKey}`);\n        }\n      } else {\n        keys.push(key);\n      }\n    }\n    return keys;\n  }\n\n  protected initFuse() {\n    if (!this.scope.items?.length) {\n      return;\n    }\n    if (!this.scope.options.keys?.length) {\n      this.scope.options.keys = this.getAllFuseKeys(this.scope.items);\n    }\n    this.fuse = new Fuse(this.scope.items, this.scope.options);\n    console.debug(\"initFuse\", this.scope.items, this.scope.options, this.fuse);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { RibaModule } from \"@ribajs/core\";\nimport * as binders from \"./binders/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as components from \"./components/index.js\";\nimport { FuseModuleOptions } from \"./types/index.js\";\n\nexport const fuseModule: RibaModule<FuseModuleOptions> = {\n  binders,\n  services,\n  formatters,\n  components,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  init(options = {}) {\n    return this;\n  },\n};\n","import { TypedocModuleOptions } from \"../types/index.js\";\n\nexport class TypedocService {\n  protected static _options: TypedocModuleOptions = {};\n  public static instance?: TypedocService;\n\n  public static get options() {\n    return this._options;\n  }\n\n  protected constructor() {\n    /**/\n  }\n\n  public static getSingleton() {\n    if (this.instance) {\n      return this.instance;\n    }\n\n    throw new Error(\n      `Singleton of TypedocService not defined, please call setSingleton first!`\n    );\n  }\n\n  public static setSingleton(options: TypedocModuleOptions = {}) {\n    if (this.instance) {\n      throw new Error(`Singleton of TypedocService already defined!`);\n    }\n\n    if (!options.serverBaseUrl) {\n      options.serverBaseUrl = window.remoteSearchOptions?.serverBaseUrl;\n    }\n\n    this._options = options;\n    this.instance = new this();\n    return this.instance;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\n\nimport type { FooterComponentScope } from \"../../types\";\n\nexport class FooterComponent extends Component {\n  public static tagName = \"tsd-footer\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  public scope: FooterComponentScope = {};\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(FooterComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.initFooter();\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n  }\n\n  initFooter() {\n    //\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\n\nimport type { HeaderComponentScope } from \"../../types\";\n\nexport class HeaderComponent extends Component {\n  public static tagName = \"tsd-header\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  public scope: HeaderComponentScope = {};\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(HeaderComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.initHeader();\n  }\n\n  initHeader() {\n    //\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\n\nimport type { MemberSignaturesComponentScope } from \"../../types/index.js\";\n\nexport class MemberSignaturesComponent extends Component {\n  public static tagName = \"tsd-member-signatures\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  public scope: MemberSignaturesComponentScope = {\n    signatureEls: [],\n    descriptionEls: [],\n    showDescByIndex: this.showDescByIndex,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(MemberSignaturesComponent.observedAttributes);\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    this.initMemberSignatures();\n  }\n\n  public showDescByIndex(index: number) {\n    for (const [i, signatureEl] of this.scope.signatureEls.entries()) {\n      if (i === index) {\n        signatureEl.classList.add(\"current\");\n      } else {\n        signatureEl.classList.remove(\"current\");\n      }\n    }\n\n    for (const [i, descriptionEl] of this.scope.descriptionEls.entries()) {\n      if (i === index) {\n        descriptionEl.classList.add(\"current\");\n      } else {\n        descriptionEl.classList.remove(\"current\");\n      }\n    }\n  }\n\n  initMemberSignatures() {\n    this.scope.signaturesEl?.classList.add(\"active\");\n    this.scope.descriptionsEl?.classList.add(\"active\");\n\n    this.scope.signatureEls = Array.from(\n      this.querySelectorAll<HTMLLIElement>(\n        \"tsd-member-signatures > .tsd-signatures > .tsd-signature\"\n      ) || []\n    );\n    this.scope.descriptionEls = Array.from(\n      this.querySelectorAll<HTMLLIElement>(\n        \"tsd-member-signatures > .tsd-descriptions > .tsd-description\"\n      ) || []\n    );\n\n    this.showDescByIndex(0);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { Pjax } from \"@ribajs/router\";\nimport { hasChildNodesTrim, debounce, normalizeUrl } from \"@ribajs/utils\";\nimport { NavbarComponent } from \"../navbar/navbar.component.js\";\n\nimport type {\n  SearchComponentScope,\n  SearchResult,\n  SearchOptions,\n} from \"../../types/index.js\";\n\ndeclare global {\n  interface Window {\n    remoteSearchOptions?: Partial<SearchOptions>;\n  }\n}\n\nexport class SearchComponent extends Component {\n  public static tagName = \"tsd-search\";\n\n  static get observedAttributes() {\n    return [\"server-base-url\"];\n  }\n\n  public scope: SearchComponentScope = {\n    serverBaseUrl: location.href,\n    isLoading: false,\n    isReady: false,\n    hasFailure: false,\n    results: [],\n    query: \"\",\n    preventPress: false,\n    setFocus: this.setFocus,\n    onBlur: this.onBlur,\n    onFocus: this.onFocus,\n    onInput: this.onInput,\n    onKeydown: this.onKeydown,\n    onKeypress: this.onKeypress,\n    onSearchResultHover: this.onSearchResultHover,\n    onSearchResultClick: this.onSearchResultClick,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(SearchComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.initSettings();\n    this.initSearch();\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    this.scope.navbarEl =\n      (\n        document.getElementsByTagName(\n          NavbarComponent.tagName\n        ) as HTMLCollectionOf<NavbarComponent>\n      ).item(0) || undefined;\n  }\n\n  initSettings() {\n    if (\n      this.scope.serverBaseUrl === location.href &&\n      window.remoteSearchOptions?.serverBaseUrl\n    ) {\n      this.scope.serverBaseUrl = window.remoteSearchOptions.serverBaseUrl;\n    }\n  }\n\n  initSearch() {\n    this.initSearchHotkey();\n  }\n\n  public setFocus() {\n    this.scope.fieldEl?.focus();\n  }\n\n  public hasFocus() {\n    return this.scope.fieldEl?.matches(\":focus\");\n  }\n\n  protected onFocus() {\n    this.classList.add(\"has-focus\");\n    this.dispatchEvent(new Event(\"focus\"));\n  }\n\n  protected onBlur() {\n    this.classList.remove(\"has-focus\");\n    this.dispatchEvent(new Event(\"blur\"));\n  }\n\n  protected onInput() {\n    this.updateResults();\n  }\n\n  protected onKeydown(\n    e: KeyboardEvent,\n    scope: SearchComponentScope,\n    field: HTMLInputElement\n  ) {\n    this.scope.preventPress = true;\n\n    if (e.key == \"Enter\") {\n      this.gotoCurrentResult();\n    } else if (e.key == \"Escape\") {\n      field.blur();\n    } else if (e.key == \"ArrowUp\") {\n      this.setCurrentResult(-1);\n    } else if (e.key === \"ArrowDown\") {\n      this.setCurrentResult(1);\n    } else {\n      this.scope.preventPress = false;\n    }\n  }\n\n  public onKeypress(e: KeyboardEvent) {\n    if (this.scope.preventPress) {\n      e.preventDefault();\n    }\n  }\n\n  public onSearchResultHover(\n    e: MouseEvent,\n    scope: SearchComponentScope,\n    newActive: HTMLLIElement\n  ) {\n    const oldActive = this.getActiveSearchResult();\n    oldActive?.classList.remove(\"active\");\n    newActive.classList.add(\"active\");\n  }\n\n  // Workaround\n  public onSearchResultClick(\n    e: MouseEvent | TouchEvent,\n    scope: SearchComponentScope,\n    el: HTMLAnchorElement\n  ) {\n    // Ignore right click\n    if (e.type === \"mousedown\" && (e as MouseEvent).button !== 0) {\n      return;\n    }\n    const anchor = el.firstChild as HTMLAnchorElement | null;\n    if (anchor?.href) {\n      this.goTo(anchor.href);\n    }\n  }\n\n  initSearchHotkey() {\n    /**\n     * Start searching by pressing slash.\n     */\n    document.body.addEventListener(\"keydown\", (e) => {\n      if (e.altKey || e.ctrlKey || e.metaKey) return;\n      if (!this.hasFocus() && e.key === \"/\") {\n        this.setFocus();\n        e.preventDefault();\n      }\n    });\n  }\n\n  protected async _updateResults() {\n    this.scope.results = [];\n\n    const searchText = this.scope.query.trim();\n    if (searchText.length < 2) {\n      return;\n    }\n\n    this.scope.isLoading = true;\n    this.scope.isReady = false;\n    this.scope.hasFailure = false;\n\n    const url = new URL(this.scope.serverBaseUrl);\n    const separator = url.pathname.endsWith(\"/\") ? \"\" : \"/\";\n\n    // Perform a wildcard search\n    url.pathname += `${separator}search/*${searchText}*`;\n    const results: SearchResult[] = [];\n\n    try {\n      const response = await fetch(url.toString());\n      results.push(...(await response.json()));\n    } catch (error) {\n      console.error(error);\n      this.scope.isLoading = false;\n      this.scope.hasFailure = true;\n    }\n\n    try {\n      this.validateResult(results);\n      this.transformResult(results);\n    } catch (error) {\n      console.error(error);\n      this.scope.results = [];\n      this.scope.isLoading = false;\n      this.scope.hasFailure = true;\n    }\n\n    if (this.scope.hasFailure) return;\n\n    this.scope.results = results;\n    this.scope.isLoading = false;\n    this.scope.isReady = !this.scope.isLoading && !this.scope.hasFailure;\n  }\n\n  public updateResults = debounce(async () => {\n    await this._updateResults();\n  }, 500);\n\n  protected validateResult(results: SearchResult[]) {\n    for (const result of results) {\n      if (typeof result.classes !== \"string\")\n        throw new Error(\"Property classes must be of type string!\");\n      if (typeof result.name !== \"string\")\n        throw new Error(\"Property name must be of type string!\");\n      if (typeof result.url !== \"string\")\n        throw new Error(\"Property url must be of type string!\");\n      if (typeof result.kind !== \"number\")\n        throw new Error(\"Property kind must be of type number!\");\n    }\n  }\n\n  protected transformResult(results: SearchResult[]) {\n    const separator = this.scope.serverBaseUrl.endsWith(\"/\") ? \"\" : \"/\";\n    for (const result of results) {\n      if (!result.url.startsWith(\"http\")) {\n        result.url = this.scope.serverBaseUrl + separator + result.url;\n      }\n      result.url = normalizeUrl(result.url).url;\n    }\n  }\n\n  getActiveSearchResult(dir = 1, fallbackByDir = false) {\n    let active = this.scope.resultsEl?.querySelector(\".active:not(.disabled)\");\n    if (fallbackByDir && !active) {\n      active = this.scope.resultsEl?.querySelector(\n        dir == 1 ? \"li:first-child\" : \"li:last-child\"\n      );\n      if (active) {\n        active.classList.add(\"active\");\n      }\n    }\n    return active || null;\n  }\n\n  /**\n   * Move the highlight within the result set.\n   */\n  setCurrentResult(dir: number) {\n    const active = this.getActiveSearchResult(dir, true);\n    if (active) {\n      let rel: Element | undefined = active;\n      // Tricky: We have to check that rel has an offsetParent so that users can't mark a hidden result as\n      // active with the arrow keys.\n      if (dir === 1) {\n        do {\n          rel = rel.nextElementSibling || undefined;\n        } while (rel instanceof HTMLElement && rel.offsetParent == null);\n      } else {\n        do {\n          rel = rel.previousElementSibling || undefined;\n        } while (rel instanceof HTMLElement && rel.offsetParent == null);\n      }\n\n      // Restart on last or first element\n      if (!rel) {\n        if (dir === -1 && !active.previousElementSibling) {\n          // If active element is the first, restart on the end\n          rel =\n            this.scope.resultsEl?.querySelector(\"li:last-child\") || undefined;\n        } else if (dir === 1 && !active.nextElementSibling) {\n          // If active element is the first, restart on the last\n          rel =\n            this.scope.resultsEl?.querySelector(\"li:first-child\") || undefined;\n        }\n      }\n\n      if (rel) {\n        active.classList.remove(\"active\");\n        rel.classList.add(\"active\");\n      }\n    }\n  }\n\n  /**\n   * Navigate to the highlighted result.\n   */\n  gotoCurrentResult() {\n    let active = this.scope.resultsEl?.querySelector(\".active:not(.disabled)\");\n\n    if (!active) {\n      active = this.scope.resultsEl?.querySelector(\n        \"li:not(.disabled):first-child\"\n      );\n    }\n\n    if (active) {\n      const link = active.querySelector(\"a\");\n      if (link?.href) {\n        this.goTo(link.href);\n      }\n      this.scope.fieldEl?.blur();\n    }\n  }\n\n  protected goTo(href: string) {\n    const pjax = Pjax.getInstance(\"main\");\n    if (!pjax) {\n      window.location.href = href;\n    } else {\n      pjax.goTo(href, false);\n    }\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (!hasChildNodesTrim(this)) {\n      return (\n        <div class=\"hello\">\n          <div class=\"search-group flex-nowrap d-flex\">\n            <button\n              class=\"btn btn-icon ps-4\"\n              id=\"tsd-search-field-addon\"\n              rv-on-click=\"setFocus\"\n            >\n              <bs5-icon\n                src=\"/assets/iconset/svg/icon_search2.svg\"\n                size={16}\n                direction=\"left\"\n              ></bs5-icon>\n            </button>\n            <input\n              class=\"form-control rounded-pill\"\n              id=\"tsd-search-field\"\n              type=\"search\"\n              aria-label=\"Search\"\n              aria-describedby=\"tsd-search-field-addon\"\n              autocomplete=\"off\"\n              spellcheck={false}\n              rv-element=\"fieldEl\"\n              rv-value=\"query\"\n              rv-on-input=\"onInput\"\n              rv-on-focus=\"onFocus\"\n              rv-on-blur=\"onBlur\"\n              rv-on-keydown=\"onKeydown\"\n              rv-on-keypress=\"onKeypress\"\n            />\n          </div>\n          <ul\n            class=\"list-group results card px-0 border-top-0\"\n            rv-if=\"isReady\"\n            rv-element=\"resultsEl\"\n          >\n            <li\n              class=\"list-group-item\"\n              rv-show=\"results | size | gt 0\"\n              rv-each-item=\"results\"\n              rv-add-class=\"item.classes\"\n              rv-on-mouseover=\"onSearchResultHover\"\n              rv-on-mousedown=\"onSearchResultClick\"\n              rv-on-ontouchend=\"onSearchResultClick\"\n            >\n              <a class=\"tsd-index-link\" rv-href=\"item.url\">\n                <svg class=\"tsd-kind-icon\" viewBox=\"0 0 24 24\">\n                  <use rv-href=\"'#icon-' | append item.kind\"></use>\n                </svg>\n                <span rv-html=\"item.name\"></span>\n              </a>\n            </li>\n            <li class=\"list-group-item disabled\" rv-if=\"results | size | eq 0\">\n              No results...\n            </li>\n          </ul>\n          <ul\n            class=\"list-group results card px-0 border-top-0\"\n            rv-unless=\"isReady\"\n          >\n            <li\n              class=\"list-group-item disabled\"\n              rv-show=\"isLoading\"\n              aria-disabled=\"true\"\n            >\n              Preparing remote search server...\n            </li>\n            <li\n              class=\"list-group-item disabled\"\n              rv-show=\"hasFailure\"\n              aria-disabled=\"true\"\n            >\n              The remote search server is not available\n            </li>\n          </ul>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\n\nimport type { NavbarComponentScope } from \"../../types/index.js\";\nimport type { Bs5SidebarComponent } from \"@ribajs/bs5\";\nimport { SearchComponent } from \"../search/search.component.js\";\n\nexport class NavbarComponent extends Component {\n  public static tagName = \"tsd-navbar\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  public scope: NavbarComponentScope = {\n    searchHasFocus: false,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(NavbarComponent.observedAttributes);\n  }\n\n  protected async afterAllBind() {\n    const sidebarEls = document.getElementsByTagName(\n      \"bs5-sidebar\"\n    ) as HTMLCollectionOf<Bs5SidebarComponent>;\n    const sidebar = sidebarEls.item(0);\n    if (sidebar) {\n      sidebar.style.marginTop = this.offsetHeight + \"px\";\n      sidebar.style.maxHeight = `calc(100vh - ${this.offsetHeight}px)`;\n    }\n\n    this.scope.searchEl =\n      (this.getElementsByTagName(SearchComponent.tagName)?.item(\n        0\n      ) as SearchComponent | null) || undefined;\n\n    this.scope.searchEl?.addEventListener(\"focus\", () => {\n      this.onSearchFocus();\n    });\n\n    this.scope.searchEl?.addEventListener(\"blur\", () => {\n      this.onSearchBlur();\n    });\n  }\n\n  public onSearchFocus() {\n    console.debug(\"onSearchFocus\");\n    this.classList.add(\"search-has-focus\");\n    this.scope.searchHasFocus = true;\n  }\n\n  public onSearchBlur() {\n    this.classList.remove(\"search-has-focus\");\n    this.scope.searchHasFocus = false;\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return null;\n  }\n}\n","import { Component, HttpService, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Dropdown } from \"@ribajs/bs5\";\nimport { Pjax } from \"@ribajs/router\";\nimport type {} from \"@ribajs/fuse\";\n\nimport type {\n  ModuleMenuScope,\n  ModuleNavigation,\n  JsxTsdModuleMenuProps,\n  Dataset,\n} from \"../../types/index.js\";\n\nexport class ModuleMenuComponent extends Component {\n  public static tagName = \"tsd-module-menu\";\n\n  static get observedAttributes(): (keyof JsxTsdModuleMenuProps)[] {\n    return [];\n  }\n\n  protected requiredAttributes(): (keyof JsxTsdModuleMenuProps)[] {\n    return [];\n  }\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: ModuleMenuScope = {\n    selectedModule: \"Modules\",\n    onModuleSelect: this.onModuleSelect,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(ModuleMenuComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.addEventListeners();\n    await this.fetchData();\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    if (this.scope.$root?.dataset) {\n      this.setSelectedModule(this.scope.$root?.dataset);\n    }\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"newPageReady\", this.onNewPage, this);\n  }\n\n  protected async onNewPage() {\n    if (this.scope.$root?.dataset) {\n      this.setSelectedModule(this.scope.$root?.dataset);\n    }\n  }\n\n  public onModuleSelect(mod: ModuleNavigation, event: Event) {\n    console.debug(\"onModuleSelect\", mod, event);\n    this.scope.selectedModule = mod.title;\n    const pjax = Pjax.getInstance(\"main\");\n    if (!pjax || !mod.url) {\n      console.warn(\"No module with href or no pjax instance found!\");\n      return;\n    }\n    Dropdown.hideAll(event);\n    pjax.goTo(mod.url);\n  }\n\n  protected setSelectedModule(dataset: Dataset) {\n    let selectedModule =\n      // this.scope.$root?.dataset?.module?.parent?.title ||\n      this.scope.$root?.dataset?.module?.title || \"Modules\";\n    if (selectedModule === dataset.projectName) {\n      selectedModule = this.scope.$root?.dataset?.module?.title || \"Modules\";\n    }\n    this.scope.selectedModule = selectedModule;\n  }\n\n  protected async fetchData() {\n    const url = \"/assets/navigation-modules.json\";\n    const data = await HttpService.getJSON<ModuleNavigation[]>(url);\n    if (data.status >= 400) {\n      if (data.status === 404) {\n        throw new Error(`Navigation data not found at ${url}`);\n      } else {\n        throw new Error(\n          `Navigation data could not be fetched from ${url}, status: ${data.status}`\n        );\n      }\n    }\n    this.scope.modules = data.body;\n    console.debug(\"ModuleMenu\", this.scope.modules);\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return (\n      <div class=\"dropdown\">\n        <button\n          rv-bs5-dropdown=\"\"\n          class=\"btn btn-outline-primary dropdown-toggle d-flex justify-content-between align-items-center\"\n          id=\"dropdownMenuModules\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n        >\n          <span rv-text=\"selectedModule\">Modules</span>{\" \"}\n          <bs5-icon\n            src=\"/assets/iconset/svg/arrow_carrot_thin.svg\"\n            size={16}\n            direction=\"down\"\n          ></bs5-icon>\n        </button>\n        <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuModules\">\n          <fuse-search\n            rv-parent\n            rv-co-items=\"modules\"\n            options=\"{'keys': ['title']}\"\n          >\n            <div class=\"mx-2 mb-2\">\n              <input\n                type=\"search\"\n                class=\"form-control\"\n                placeholder=\"Filter...\"\n                aria-label=\"Filter\"\n                rv-value=\"searchPattern\"\n                rv-on-input=\"search\"\n                rv-on-cut=\"search\"\n                rv-on-paste=\"search\"\n              />\n            </div>\n            <div class=\"scrollbar-y-scroll scrollbar-primary\">\n              <div class=\"dropdown-header\">Modules</div>\n              <div rv-show=\"searchPattern | size\" rv-each-result=\"results\">\n                <div\n                  class=\"dropdown-item cursor-pointer\"\n                  rv-add-class=\"result.item.classNames\"\n                  rv-route-class-active=\"result.item.url\"\n                  rv-route-class-parent-active=\"result.item.url\"\n                  rv-on-click=\"$parent.$parent.onModuleSelect | args result.item\"\n                >\n                  <a rv-href=\"result.item.url\" rv-text=\"result.item.title\"></a>\n                </div>\n              </div>\n              <div rv-if=\"results | size | eq 0\" rv-show=\"searchPattern | size\">\n                <div class=\"dropdown-item\">No result</div>\n              </div>\n              <div rv-hide=\"searchPattern | size\" rv-each-item=\"items\">\n                <div\n                  class=\"dropdown-item cursor-pointer\"\n                  rv-route-class-active=\"item.url\"\n                  rv-on-click=\"$parent.$parent.onModuleSelect | args item\"\n                >\n                  <a rv-href=\"item.url\" rv-text=\"item.title\"></a>\n                </div>\n              </div>\n            </div>\n          </fuse-search>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Component, HttpService, TemplateFunction } from \"@ribajs/core\";\nimport { EventDispatcher } from \"@ribajs/events\";\nimport { Dropdown } from \"@ribajs/bs5\";\nimport { Pjax } from \"@ribajs/router\";\nimport type {} from \"@ribajs/fuse\";\n\nimport type {\n  ModuleNavigationScope,\n  ModuleNavigation,\n  JsxTsdModuleNavigationProps,\n  Dataset,\n  NavigationData,\n} from \"../../types/index.js\";\n\nexport class ModuleNavigationComponent extends Component {\n  public static tagName = \"tsd-module-navigation\";\n\n  static get observedAttributes(): (keyof JsxTsdModuleNavigationProps)[] {\n    return [];\n  }\n\n  protected requiredAttributes(): (keyof JsxTsdModuleNavigationProps)[] {\n    return [];\n  }\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: ModuleNavigationScope = {\n    module: undefined,\n    modules: [],\n    navigation: undefined,\n    subModules: [],\n    subNamespaces: [],\n    subReferences: [],\n    onModuleSelect: this.onModuleSelect,\n  };\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(ModuleNavigationComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.addEventListeners();\n    await this.fetchModuleNavigation();\n    if (this.scope.$root?.dataset) {\n      this.setSelectedModule(this.scope.$root?.dataset);\n    }\n  }\n\n  protected async afterBind() {\n    await super.afterBind();\n    if (this.scope.$root?.dataset) {\n      this.setSelectedModule(this.scope.$root?.dataset);\n    }\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"newPageReady\", this.onNewPage, this);\n  }\n\n  protected async onNewPage() {\n    if (this.scope.$root?.dataset) {\n      this.setSelectedModule(this.scope.$root?.dataset);\n    }\n  }\n\n  public onModuleSelect(mod: ModuleNavigation, event: Event) {\n    console.debug(\"onModuleSelect\", mod, event);\n    this.scope.module = mod;\n    const pjax = Pjax.getInstance(\"main\");\n    if (!pjax || !mod.url) {\n      console.warn(\"No module with href or no pjax instance found!\");\n      return;\n    }\n    Dropdown.hideAll(event);\n    pjax.goTo(mod.url);\n  }\n\n  protected setSelectedModule(dataset: Dataset) {\n    const selectedModuleTitle = dataset.module?.title;\n\n    if (!this.scope.modules?.length) {\n      throw new Error(\"No modules set!\");\n    }\n\n    this.scope.module = this.scope.modules.find(\n      (mod) => mod.title === selectedModuleTitle\n    );\n\n    if (!this.scope.module) {\n      console.warn(`Module with title \"${selectedModuleTitle}\" not found!`);\n      return;\n    }\n\n    this.fetchModuleChildNavigation(this.scope.module);\n  }\n\n  protected async fetchModuleNavigation() {\n    const url = \"/assets/navigation-modules.json\";\n    const data = await HttpService.getJSON<ModuleNavigation[]>(url);\n    if (data.status >= 400) {\n      if (data.status === 404) {\n        throw new Error(`Navigation modules not found at ${url}`);\n      } else {\n        throw new Error(\n          `Navigation modules could not be fetched from ${url}, status: ${data.status}`\n        );\n      }\n    }\n    this.scope.modules = data.body;\n    console.debug(\"ModuleNavigation\", this.scope.modules);\n  }\n\n  protected async fetchModuleChildNavigation(module: ModuleNavigation) {\n    const url = \"/assets/\" + module.filename;\n    const data = await HttpService.getJSON<NavigationData>(url);\n    if (data.status >= 400) {\n      if (data.status === 404) {\n        throw new Error(`Navigation data not found at ${url}`);\n      } else {\n        throw new Error(\n          `Navigation data could not be fetched from ${url}, status: ${data.status}`\n        );\n      }\n    }\n    this.scope.navigation = data.body;\n    console.debug(\"NavigationData\", this.scope.navigation);\n    if (this.scope.navigation) {\n      this.scope.subModules = this.getFirstLevelChildren(\n        \"Modules\",\n        this.scope.navigation.children\n      );\n      this.scope.subNamespaces = this.getFirstLevelChildren(\n        \"Namespaces\",\n        this.scope.navigation.children\n      );\n      this.scope.subReferences = this.getFirstLevelChildren(\n        \"References\",\n        this.scope.navigation.children\n      );\n    }\n  }\n\n  getFirstLevelChildren(\n    type: \"Modules\" | \"Namespaces\" | \"References\",\n    children: NavigationData[],\n    level = 0,\n    maxLevel = 2\n  ) {\n    const result: NavigationData[] = [];\n    if (level > maxLevel) {\n      return result;\n    }\n    for (const child of children) {\n      // If children is a group and the title is `${type}`\n      if (child.isGroup && child.title === type) {\n        result.push(...child.children);\n      }\n      // If children is a group of Modules, also check it's children\n      if (type !== \"Modules\" && child.isGroup && child.title === \"Modules\") {\n        console.debug(\"check child modules\", child);\n        for (const child2 of child.children) {\n          result.push(\n            ...this.getFirstLevelChildren(type, child2.children, ++level)\n          );\n        }\n      }\n    }\n    return result;\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    return (\n      <div rv-show=\"navigation\" class=\"list-group list-group-flush\">\n        <div class=\"list-group-item fw-bold\">Modules</div>\n        <a\n          class=\"list-group-item list-group-item-action\"\n          rv-each-item=\"subModules\"\n          rv-href=\"item.url\"\n        >\n          <span rv-html=\"item.title\"></span>\n        </a>\n\n        <div class=\"list-group-item fw-bold\">Namespaces</div>\n        <a\n          class=\"list-group-item list-group-item-action\"\n          rv-each-item=\"subNamespaces\"\n          rv-href=\"item.url\"\n        >\n          <span rv-html=\"item.title\"></span>\n        </a>\n\n        <div class=\"list-group-item fw-bold\">References</div>\n        <a\n          class=\"list-group-item list-group-item-action\"\n          rv-each-item=\"subReferences\"\n          rv-href=\"item.url\"\n        >\n          <span rv-html=\"item.title\"></span>\n        </a>\n      </div>\n    );\n  }\n}\n","import { Component, TemplateFunction } from \"@ribajs/core\";\nimport { hasChildNodesTrim } from \"@ribajs/utils\";\nimport { EventDispatcher } from \"@ribajs/events\";\n\nimport type { SidebarContentComponentScope } from \"../../types/index.js\";\n\nexport class SidebarContentComponent extends Component {\n  public static tagName = \"tsd-sidebar-content\";\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  protected routerEvents = new EventDispatcher(\"main\");\n\n  public scope: SidebarContentComponentScope = {};\n\n  constructor() {\n    super();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.init(SidebarContentComponent.observedAttributes);\n  }\n\n  protected async beforeBind() {\n    await super.beforeBind();\n    this.addEventListeners();\n  }\n\n  protected addEventListeners() {\n    this.routerEvents.on(\"transitionCompleted\", this.onNewPage, this);\n  }\n\n  protected onNewPage() {\n    const templateEl = document.getElementById(\n      \"tsd-sidebar-content-template\"\n    ) as HTMLTemplateElement | null;\n    if (!templateEl) {\n      console.warn(\"[SidebarContentComponent] No template found!\");\n      return;\n    }\n    this.scope.template = templateEl.innerHTML;\n  }\n\n  protected template(): ReturnType<TemplateFunction> {\n    if (hasChildNodesTrim(this)) {\n      this.scope.template = this.innerHTML;\n    }\n    return <div rv-template=\"template\"></div>;\n  }\n}\n","import { RibaModule } from \"@ribajs/core\";\nimport * as binders from \"./binders/index.js\";\nimport * as formatters from \"./formatters/index.js\";\nimport * as services from \"./services/index.js\";\nimport * as components from \"./components/index.js\";\nimport { TypedocModuleOptions } from \"./types/index.js\";\n\nexport const gjsifyTypedocModule: RibaModule<TypedocModuleOptions> = {\n  binders,\n  services,\n  formatters,\n  components,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  init(options = {}) {\n    services.TypedocService.setSingleton(options);\n    return this;\n  }\n};\n","import type { IComponentOptions } from \"./Component\";\n\n/**\n * Component definition.\n */\nexport interface IComponent {\n  constructor: new (options: IComponentOptions) => unknown;\n  selector: string;\n}\n\n/**\n * List of all known components.\n */\nconst components: IComponent[] = [];\n\n/**\n * Register a new component.\n */\nexport function registerComponent(\n  constructor: IComponent[\"constructor\"],\n  selector: string\n) {\n  components.push({\n    selector: selector,\n    constructor: constructor,\n  });\n}\n\n/**\n * TypeDoc application class.\n */\nexport class Application {\n  alwaysVisibleMember: HTMLElement | null = null;\n\n  /**\n   * Create a new Application instance.\n   */\n  constructor() {\n    this.createComponents(document.body);\n    this.ensureFocusedElementVisible();\n    this.listenForCodeCopies();\n    window.addEventListener(\"hashchange\", () =>\n      this.ensureFocusedElementVisible()\n    );\n  }\n\n  /**\n   * Create all components beneath the given element.\n   */\n  private createComponents(context: HTMLElement) {\n    components.forEach((c) => {\n      context.querySelectorAll<HTMLElement>(c.selector).forEach((el) => {\n        if (!el.dataset[\"hasInstance\"]) {\n          new c.constructor({ el, app: this });\n          el.dataset[\"hasInstance\"] = String(true);\n        }\n      });\n    });\n  }\n\n  public filterChanged() {\n    this.ensureFocusedElementVisible();\n  }\n\n  /**\n   * Ensures that if a user was linked to a reflection which is hidden because of filter\n   * settings, that reflection is still shown.\n   */\n  private ensureFocusedElementVisible() {\n    if (this.alwaysVisibleMember) {\n      this.alwaysVisibleMember.classList.remove(\"always-visible\");\n      this.alwaysVisibleMember.firstElementChild?.remove();\n      this.alwaysVisibleMember = null;\n    }\n\n    if (!location.hash) return;\n\n    const reflAnchor = document.getElementById(location.hash.substring(1));\n    if (!reflAnchor) return;\n\n    let reflContainer = reflAnchor.parentElement;\n    while (reflContainer && reflContainer.tagName !== \"SECTION\") {\n      reflContainer = reflContainer.parentElement;\n    }\n\n    if (!reflContainer) {\n      // This is probably a link in the readme, doesn't have a containing section\n      return;\n    }\n\n    if (reflContainer.offsetParent == null) {\n      this.alwaysVisibleMember = reflContainer;\n\n      reflContainer.classList.add(\"always-visible\");\n\n      const warning = document.createElement(\"p\");\n      warning.classList.add(\"warning\");\n      warning.textContent =\n        \"This member is normally hidden due to your filter settings.\";\n\n      reflContainer.prepend(warning);\n    }\n  }\n\n  private listenForCodeCopies() {\n    document.querySelectorAll(\"pre > button\").forEach((button) => {\n      let timeout: ReturnType<typeof setTimeout>;\n      button.addEventListener(\"click\", () => {\n        if (button.previousElementSibling instanceof HTMLElement) {\n          navigator.clipboard.writeText(\n            button.previousElementSibling.innerText.trim()\n          );\n        }\n        button.textContent = \"Copied!\";\n        button.classList.add(\"visible\");\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n          button.classList.remove(\"visible\");\n          timeout = setTimeout(() => {\n            button.textContent = \"Copy\";\n          }, 100);\n        }, 1000);\n      });\n    });\n  }\n}\n","import { Application } from \"./Application\";\n\nexport interface IComponentOptions {\n  app: Application;\n  el: HTMLElement;\n}\n\n/**\n * TypeDoc component class.\n */\nexport class Component {\n  protected el: HTMLElement;\n  protected app: Application;\n\n  constructor(options: IComponentOptions) {\n    this.el = options.el;\n    this.app = options.app;\n  }\n}\n","/**\n * Simple point interface.\n */\nexport interface Point {\n    x: number;\n    y: number;\n}\n\n/**\n * Event name of the pointer down event.\n */\nexport let pointerDown: string = \"mousedown\";\n\n/**\n * Event name of the pointer move event.\n */\nexport let pointerMove: string = \"mousemove\";\n\n/**\n * Event name of the pointer up event.\n */\nexport let pointerUp: string = \"mouseup\";\n\n/**\n * Position the pointer was pressed at.\n */\nexport const pointerDownPosition: Point = { x: 0, y: 0 };\n\n/**\n * Should the next click on the document be suppressed?\n */\nexport let preventNextClick: boolean = false;\n\n/**\n * Is the pointer down?\n */\nexport let isPointerDown: boolean = false;\n\n/**\n * Is the pointer a touch point?\n */\nexport let isPointerTouch: boolean = false;\n\n/**\n * Did the pointer move since the last down event?\n */\nexport let hasPointerMoved: boolean = false;\n\n/**\n * Is the user agent a mobile agent?\n */\nexport const isMobile: boolean =\n    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n    );\ndocument.documentElement.classList.add(isMobile ? \"is-mobile\" : \"not-mobile\");\n\nif (isMobile && \"ontouchstart\" in document.documentElement) {\n    isPointerTouch = true;\n    pointerDown = \"touchstart\";\n    pointerMove = \"touchmove\";\n    pointerUp = \"touchend\";\n}\n\ndocument.addEventListener(pointerDown, (e) => {\n    isPointerDown = true;\n    hasPointerMoved = false;\n    const t =\n        pointerDown == \"touchstart\"\n            ? (e as TouchEvent).targetTouches[0]\n            : (e as MouseEvent);\n    pointerDownPosition.y = t.pageY || 0;\n    pointerDownPosition.x = t.pageX || 0;\n});\n\ndocument.addEventListener(pointerMove, (e) => {\n    if (!isPointerDown) return;\n    if (!hasPointerMoved) {\n        const t =\n            pointerDown == \"touchstart\"\n                ? (e as TouchEvent).targetTouches[0]\n                : (e as MouseEvent);\n        const x = pointerDownPosition.x - (t.pageX || 0);\n        const y = pointerDownPosition.y - (t.pageY || 0);\n        hasPointerMoved = Math.sqrt(x * x + y * y) > 10;\n    }\n});\n\ndocument.addEventListener(pointerUp, () => {\n    isPointerDown = false;\n});\n\ndocument.addEventListener(\"click\", (e) => {\n    if (preventNextClick) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        preventNextClick = false;\n    }\n});\n","import { Component, IComponentOptions } from \"../Component\";\nimport { hasPointerMoved, pointerDown, pointerUp } from \"../utils/pointer\";\n\nexport class Toggle extends Component {\n  active?: boolean;\n\n  className: string;\n\n  constructor(options: IComponentOptions) {\n    super(options);\n\n    this.className = this.el.dataset[\"toggle\"] || \"\";\n    this.el.addEventListener(pointerUp, (e) => this.onPointerUp(e));\n    this.el.addEventListener(\"click\", (e) => e.preventDefault());\n    document.addEventListener(pointerDown, (e) =>\n      this.onDocumentPointerDown(e)\n    );\n    document.addEventListener(pointerUp, (e) => this.onDocumentPointerUp(e));\n  }\n\n  setActive(value: boolean) {\n    if (this.active == value) return;\n    this.active = value;\n\n    document.documentElement.classList.toggle(\"has-\" + this.className, value);\n    this.el.classList.toggle(\"active\", value);\n\n    const transition = (this.active ? \"to-has-\" : \"from-has-\") + this.className;\n    document.documentElement.classList.add(transition);\n    setTimeout(\n      () => document.documentElement.classList.remove(transition),\n      500\n    );\n  }\n\n  onPointerUp(event: Event) {\n    if (hasPointerMoved) return;\n    this.setActive(true);\n    event.preventDefault();\n  }\n\n  onDocumentPointerDown(e: Event) {\n    if (this.active) {\n      if (\n        (e.target as HTMLElement).closest(\".col-sidebar, .tsd-filter-group\")\n      ) {\n        return;\n      }\n\n      this.setActive(false);\n    }\n  }\n\n  onDocumentPointerUp(e: Event) {\n    if (hasPointerMoved) return;\n    if (this.active) {\n      if ((e.target as HTMLElement).closest(\".col-sidebar\")) {\n        const link = (e.target as HTMLElement).closest(\"a\");\n        if (link) {\n          let href = window.location.href;\n          if (href.indexOf(\"#\") != -1) {\n            href = href.substring(0, href.indexOf(\"#\"));\n          }\n          if (link.href.substring(0, href.length) == href) {\n            setTimeout(() => this.setActive(false), 250);\n          }\n        }\n      }\n    }\n  }\n}\n","// This exists to abstract away the horrible fact that accessing localStorage can throw\n// an exception depending on a user's browser settings. Can't even check typeof localStorage\n// so we're stuck with a try..catch.\n\nexport interface MinimalStorage {\n    getItem(key: string): string | null;\n    setItem(key: string, value: string): void;\n}\n\nlet _storage: MinimalStorage;\n\ntry {\n    _storage = localStorage;\n} catch {\n    _storage = {\n        getItem() {\n            return null;\n        },\n        setItem() {},\n    };\n}\n\nexport const storage = _storage;\n","import { Component, IComponentOptions } from \"../Component\";\nimport { storage } from \"../utils/storage\";\n\n/**\n * Handles accordion dropdown behavior.\n */\nexport class Accordion extends Component {\n  override el: HTMLDetailsElement;\n\n  /**\n   * The heading container for this accordion.\n   */\n  private summary: HTMLElement;\n\n  /**\n   * The chevron icon next to this accordion's heading.\n   */\n  private icon: SVGElement;\n\n  /**\n   * The key by which to store this accordion's state in storage.\n   */\n  private readonly key: string;\n\n  constructor(options: IComponentOptions) {\n    super(options);\n    this.el = options.el as HTMLDetailsElement;\n    if (!this.el) {\n      console.warn(`Accordion element with selector ${options.el} not found`);\n    }\n    this.summary = this.el.querySelector(\".tsd-accordion-summary\")!;\n    this.icon = this.summary.querySelector(\"svg\")!;\n    this.key = `tsd-accordion-${\n      this.summary.dataset.key ??\n      this.summary.textContent!.trim().replace(/\\s+/g, \"-\").toLowerCase()\n    }`;\n\n    const stored = storage.getItem(this.key);\n    this.el.open = stored ? stored === \"true\" : this.el.open;\n\n    this.el.addEventListener(\"toggle\", () => this.update());\n\n    this.update();\n  }\n\n  private update() {\n    this.icon.style.transform = `rotate(${this.el.open ? 0 : -90}deg)`;\n    storage.setItem(this.key, this.el.open.toString());\n  }\n}\n","import { storage } from \"./utils/storage\";\n\ntype ThemeChoice = \"os\" | \"light\" | \"dark\";\n\nexport function initTheme(choices: HTMLOptionElement) {\n  const savedTheme = (storage.getItem(\"tsd-theme\") as ThemeChoice) || \"os\";\n  choices.value = savedTheme;\n  setTheme(savedTheme);\n\n  choices.addEventListener(\"change\", () => {\n    storage.setItem(\"tsd-theme\", choices.value);\n    setTheme(choices.value as ThemeChoice);\n  });\n}\n\n// Also see:\n// - src/lib/output/themes/defaults/layouts/default.tsx\n// - src/lib/utils/highlighter.tsx\nfunction setTheme(theme: ThemeChoice) {\n  document.documentElement.dataset.theme = theme;\n}\n","import { Application, registerComponent } from \"./typedoc/Application\";\nimport { Toggle } from \"./typedoc/components/Toggle\";\nimport { Accordion } from \"./typedoc/components/Accordion\";\nimport { initTheme } from \"./typedoc/Theme\";\n\nexport const bootstrap = () => {\n  console.debug(\"bootstrap original...\");\n\n  registerComponent(Toggle, \"a[data-toggle]\");\n  registerComponent(Accordion, \".tsd-index-accordion\");\n\n  const themeChoice = document.getElementById(\"tsd-theme\");\n  if (themeChoice) {\n    initTheme(themeChoice as HTMLOptionElement);\n  }\n\n  const app = new Application();\n\n  Object.defineProperty(window, \"app\", { value: app });\n\n  // Safari is broken and doesn't let you click on a link within\n  // a <summary> tag, so we have to manually handle clicks there.\n  document.querySelectorAll(\"summary a\").forEach((el) => {\n    el.addEventListener(\"click\", () => {\n      location.assign((el as HTMLAnchorElement).href);\n    });\n  });\n};\n","import { ready } from \"@ribajs/utils\";\nimport { Riba, coreModule } from \"@ribajs/core\";\n// import { EventDispatcher } from \"@ribajs/events\";\nimport { routerModule, FadeTransition } from \"@ribajs/router\";\nimport { bs5Module, ThemeService } from \"@ribajs/bs5\";\nimport { fuseModule } from \"@ribajs/fuse\";\nimport { gjsifyTypedocModule } from \"./module\";\n\n// Import original typedoc bootstrap\nimport { bootstrap as bootstrapOriginal } from \"./original/bootstrap.js\";\n\ndeclare global {\n  interface Window {\n    model: any;\n  }\n}\n\nconst bootstrap = () => {\n  console.debug(\"bootstrap...\");\n  const riba = new Riba();\n  window.model = {};\n\n  riba.configure({\n    prefix: [\"rv\", \"csr-rv\"],\n    blockUnknownCustomElements: false,\n    templateDelimiters: [\"{\", \"}\"],\n  });\n\n  // Register modules\n  riba.module.register(coreModule.init());\n  riba.module.register(\n    routerModule.init({\n      defaultTransition: new FadeTransition(),\n    })\n  );\n  riba.module.register(bs5Module.init());\n  riba.module.register(fuseModule.init());\n  riba.module.register(gjsifyTypedocModule.init());\n\n  const theme = ThemeService.getSingleton();\n  const view = riba.bind(document.body, window.model);\n\n  view.registerComponents();\n\n  riba.lifecycle.events.on(\"ComponentLifecycle:error\", (error: Error) => {\n    console.error(error);\n  });\n\n  // EventDispatcher.getInstance(\"main\").on(\"newPageReady\", () => {\n  //   bootstrapOriginal();\n  // });\n  bootstrapOriginal();\n\n  // Also add theme class to body for TypeDoc Theme backward compatibility\n  theme.onChange((data) => {\n    document.body.classList.remove(\"os\", \"dark\", \"light\");\n    if (data.newValue.bySystem) {\n      document.body.classList.add(\"os\");\n    }\n    if (data.newValue.byUser) {\n      if (data.newValue.isDark) {\n        document.body.classList.add(\"dark\");\n      } else {\n        document.body.classList.add(\"light\");\n      }\n    }\n  });\n};\n\nready(() => {\n  bootstrap();\n});\n"],"file":"main.bundle.js"}